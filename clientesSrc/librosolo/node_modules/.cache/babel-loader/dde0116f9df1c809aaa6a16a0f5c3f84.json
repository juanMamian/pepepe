{"remainingRequest":"/home/juan/webPj/pepepe/librosolo/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/librosolo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/librosolo/src/components/Libro.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/librosolo/src/components/Libro.vue","mtime":1620356337796},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvanVhbi93ZWJQai9wZXBlcGUvbGlicm9zb2xvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90YWdnZWRUZW1wbGF0ZUxpdGVyYWwiOwoKdmFyIF90ZW1wbGF0ZU9iamVjdCwgX3RlbXBsYXRlT2JqZWN0MiwgX3RlbXBsYXRlT2JqZWN0MywgX3RlbXBsYXRlT2JqZWN0NDsKCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdxbCB9IGZyb20gImFwb2xsby1zZXJ2ZXItY29yZSI7CmltcG9ydCBQYWdpbmEgZnJvbSAiLi9QYWdpbmEudnVlIjsKZXhwb3J0IHZhciBmcmFnbWVudG9DdWFkcm9UZXh0byA9IGdxbChfdGVtcGxhdGVPYmplY3QgfHwgKF90ZW1wbGF0ZU9iamVjdCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgZnJhZ21lbnQgZnJhZ0N1YWRyb1RleHRvIG9uIEN1YWRyb1RleHRvQ3VlbnRvIHtcbiAgICBpZFxuICAgIHRleHRvXG4gICAgcG9zaWNpb25aZXRhXG4gICAgcG9zaWNpb24ge1xuICAgICAgeFxuICAgICAgeVxuICAgIH1cbiAgICBzaXplIHtcbiAgICAgIHhcbiAgICAgIHlcbiAgICB9XG4gICAgYXVkaW8ge1xuICAgICAgdGlwb1JlcHJvZHVjY2lvblxuICAgIH1cbiAgICBmb3JtYXRvIHtcbiAgICAgIGZvbnRTaXplXG4gICAgICBjb2xvckxldHJhXG4gICAgICB0aXBvTGV0cmFcbiAgICAgIGFsaW5lYWNpb25cbiAgICB9XG4gIH1cbiJdKSkpOwpleHBvcnQgdmFyIGZyYWdtZW50b0N1YWRyb0ltYWdlbiA9IGdxbChfdGVtcGxhdGVPYmplY3QyIHx8IChfdGVtcGxhdGVPYmplY3QyID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICBmcmFnbWVudCBmcmFnQ3VhZHJvSW1hZ2VuIG9uIEN1YWRyb0ltYWdlbkN1ZW50byB7XG4gICAgaWRcbiAgICBzaW5BcmNoaXZvXG4gICAgdGlwb0FjdGl2YWNpb25TZWN1bmRhcmlvXG4gICAgcG9zaWNpb25aZXRhXG4gICAgcG9zaWNpb24ge1xuICAgICAgeFxuICAgICAgeVxuICAgIH1cbiAgICBzaXplIHtcbiAgICAgIHhcbiAgICAgIHlcbiAgICB9XG4gICAgYXVkaW8ge1xuICAgICAgdGlwb1JlcHJvZHVjY2lvblxuICAgIH1cbiAgfVxuIl0pKSk7CnZhciBmcmFnbWVudG9QYWdpbmEgPSBncWwoX3RlbXBsYXRlT2JqZWN0MyB8fCAoX3RlbXBsYXRlT2JqZWN0MyA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgZnJhZ21lbnQgZnJhZ1BhZ2luYSBvbiBQYWdpbmFDdWVudG8ge1xuICAgIGlkXG4gICAgbnVtUGFnXG4gICAgY29sb3JcbiAgICBjdWFkcm9zVGV4dG8ge1xuICAgICAgLi4uZnJhZ0N1YWRyb1RleHRvXG4gICAgfVxuICAgIGN1YWRyb3NJbWFnZW4ge1xuICAgICAgLi4uZnJhZ0N1YWRyb0ltYWdlblxuICAgIH1cbiAgfVxuICAiLCAiXG4gICIsICJcbiJdKSksIGZyYWdtZW50b0N1YWRyb1RleHRvLCBmcmFnbWVudG9DdWFkcm9JbWFnZW4pOwp2YXIgUVVFUllfTElCUk8gPSBncWwoX3RlbXBsYXRlT2JqZWN0NCB8fCAoX3RlbXBsYXRlT2JqZWN0NCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgcXVlcnkoJGlkTGlicm86IElEISkge1xuICAgIGxpYnJvKGlkTGlicm86ICRpZExpYnJvKSB7XG4gICAgICBpZFxuICAgICAgaWRzRWRpdG9yZXNcbiAgICAgIHRpdHVsb1xuICAgICAgcGFnaW5hcyB7XG4gICAgICAgIC4uLmZyYWdQYWdpbmFcbiAgICAgIH1cbiAgICAgIGlkRm9yb1xuICAgIH1cbiAgfVxuICAiLCAiXG4iXSkpLCBmcmFnbWVudG9QYWdpbmEpOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgUGFnaW5hOiBQYWdpbmEKICB9LAogIG5hbWU6ICJMaWJybyIsCiAgYXBvbGxvOiB7CiAgICBsaWJybzogewogICAgICBxdWVyeTogUVVFUllfTElCUk8sCiAgICAgIHZhcmlhYmxlczogZnVuY3Rpb24gdmFyaWFibGVzKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZExpYnJvOiB0aGlzLmlkTGlicm8KICAgICAgICB9OwogICAgICB9LAogICAgICBza2lwOiBmdW5jdGlvbiBza2lwKCkgewogICAgICAgIHJldHVybiB0aGlzLmlkTGlicm8gPT0gbnVsbDsKICAgICAgfSwKICAgICAgZmV0Y2hQb2xpY3k6ICJjYWNoZS1hbmQtbmV0d29yayIKICAgIH0KICB9LAogIHByb3BzOiB7CiAgICBpZExpYnJvOiBTdHJpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaWJybzogewogICAgICAgIHBhZ2luYXM6IG51bGwKICAgICAgfSwKICAgICAgaG9qYU1vdmlkYTogMCwKICAgICAgY2VudHJvSG9qYXM6IC0wLjUsCiAgICAgIHN3aXBpbmdQYWdpbmE6IGZhbHNlLAogICAgICBzd2lwZUFjdW11bGFkbzogMAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHN3aXBlUGFnaW5hOiBmdW5jdGlvbiBzd2lwZVBhZ2luYShlLCBkaXJlY2Npb24pIHsKICAgICAgaWYgKCF0aGlzLnN3aXBpbmdQYWdpbmEpIHJldHVybjsKCiAgICAgIGlmIChlLm1vdmVtZW50WCA8IDAgJiYgZGlyZWNjaW9uID09ICJhZGVsYW50ZSIgfHwgZS5tb3ZlbWVudFggPiAwICYmIGRpcmVjY2lvbiA9PSAiYXRyYXMiKSB7CiAgICAgICAgdGhpcy5zd2lwZUFjdW11bGFkbyArPSBlLm1vdmVtZW50WDsKICAgICAgfSAvLyBpZihkaXJlY2Npb249PSdhZGVsYW50ZScgJiYgZSkKCiAgICB9LAogICAgZW5kU3dpcGU6IGZ1bmN0aW9uIGVuZFN3aXBlKCkgewogICAgICBpZiAoTWF0aC5hYnModGhpcy5zd2lwZUFjdW11bGFkbykgPCA1KSB7CiAgICAgICAgdGhpcy5zd2lwaW5nUGFnaW5hID0gZmFsc2U7CiAgICAgICAgdGhpcy5zd2lwZUFjdW11bGFkbyA9IDA7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5zd2lwZUFjdW11bGFkbyA8IDApIHsKICAgICAgICBjb25zb2xlLmxvZygiQXZhbnphciB1bmEgaG9qYSIpOwogICAgICAgIHRoaXMubmF2ZWdhckhvamFzKDEpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCJSZXRyb2NlZGVyIHVuYSBob2phIik7CiAgICAgICAgdGhpcy5uYXZlZ2FySG9qYXMoLTEpOwogICAgICB9CgogICAgICB0aGlzLnN3aXBpbmdQYWdpbmEgPSBmYWxzZTsKICAgICAgdGhpcy5zd2lwZUFjdW11bGFkbyA9IDA7CiAgICB9LAogICAgbmF2ZWdhckhvamFzOiBmdW5jdGlvbiBuYXZlZ2FySG9qYXMobnVtKSB7CiAgICAgIHRoaXMuY2VudHJvSG9qYXMgKz0gbnVtOwoKICAgICAgaWYgKG51bSA8IDApIHsKICAgICAgICB0aGlzLmhvamFNb3ZpZGEgPSB0aGlzLmNlbnRyb0hvamFzICsgMC41OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaG9qYU1vdmlkYSA9IHRoaXMuY2VudHJvSG9qYXMgLSAwLjU7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["Libro.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,SAAA,GAAA,QAAA,oBAAA;AACA,OAAA,MAAA,MAAA,cAAA;AACA,OAAA,IAAA,oBAAA,GAAA,GAAA,yXAAA;AAyBA,OAAA,IAAA,qBAAA,GAAA,GAAA,qUAAA;AAoBA,IAAA,eAAA,GAAA,GAAA,mRAYA,oBAZA,EAaA,qBAbA,CAAA;AAgBA,IAAA,WAAA,GAAA,GAAA,kQAYA,eAZA,CAAA;AAcA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,MAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,OAFA;AAGA,EAAA,MAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,KAAA,EAAA,WADA;AAEA,MAAA,SAFA,uBAEA;AACA,eAAA;AACA,UAAA,OAAA,EAAA,KAAA;AADA,SAAA;AAGA,OANA;AAOA,MAAA,IAPA,kBAOA;AACA,eAAA,KAAA,OAAA,IAAA,IAAA;AACA,OATA;AAUA,MAAA,WAAA,EAAA;AAVA;AADA,GAHA;AAiBA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GAjBA;AAoBA,EAAA,IApBA,kBAoBA;AACA,WAAA;AACA,MAAA,KAAA,EAAA;AACA,QAAA,OAAA,EAAA;AADA,OADA;AAIA,MAAA,UAAA,EAAA,CAJA;AAKA,MAAA,WAAA,EAAA,CAAA,GALA;AAOA,MAAA,aAAA,EAAA,KAPA;AAQA,MAAA,cAAA,EAAA;AARA,KAAA;AAUA,GA/BA;AAgCA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,CADA,EACA,SADA,EACA;AACA,UAAA,CAAA,KAAA,aAAA,EAAA;;AACA,UACA,CAAA,CAAA,SAAA,GAAA,CAAA,IAAA,SAAA,IAAA,UAAA,IACA,CAAA,CAAA,SAAA,GAAA,CAAA,IAAA,SAAA,IAAA,OAFA,EAGA;AACA,aAAA,cAAA,IAAA,CAAA,CAAA,SAAA;AACA,OAPA,CASA;;AACA,KAXA;AAYA,IAAA,QAZA,sBAYA;AACA,UAAA,IAAA,CAAA,GAAA,CAAA,KAAA,cAAA,IAAA,CAAA,EAAA;AACA,aAAA,aAAA,GAAA,KAAA;AACA,aAAA,cAAA,GAAA,CAAA;AACA;AACA;;AACA,UAAA,KAAA,cAAA,GAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA;AACA,aAAA,YAAA,CAAA,CAAA;AACA,OAHA,MAGA;AACA,QAAA,OAAA,CAAA,GAAA;AACA,aAAA,YAAA,CAAA,CAAA,CAAA;AAEA;;AACA,WAAA,aAAA,GAAA,KAAA;AACA,WAAA,cAAA,GAAA,CAAA;AACA,KA5BA;AA6BA,IAAA,YA7BA,wBA6BA,GA7BA,EA6BA;AACA,WAAA,WAAA,IAAA,GAAA;;AACA,UAAA,GAAA,GAAA,CAAA,EAAA;AACA,aAAA,UAAA,GAAA,KAAA,WAAA,GAAA,GAAA;AACA,OAFA,MAGA;AACA,aAAA,UAAA,GAAA,KAAA,WAAA,GAAA,GAAA;AACA;AACA;AArCA;AAhCA,CAAA","sourcesContent":["<template>\n  <div id=\"libro\">\n    <div id=\"contenedorHojas\" v-if=\"libro.paginas\">\n      <div\n        class=\"hoja\"\n        :class=\"{ girada: numeroH - 1 < centroHojas, tapada: Math.abs((numeroH-1)-centroHojas)>=1 }\"\n        v-for=\"numeroH of Math.ceil(libro.paginas.length / 2)\"\n        :key=\"numeroH\"\n        :style=\"[\n          {\n            zIndex:\n              numeroH - 1 == hojaMovida\n                ? '0'\n                : -Math.abs(numeroH - 1 - hojaMovida),\n          },\n        ]\"\n      >\n        <pagina\n          :estaPagina=\"pagina\"\n          v-for=\"(pagina, index) of libro.paginas.slice(\n            (numeroH - 1) * 2,\n            (numeroH - 1) * 2 + 2\n          )\"\n          :key=\"pagina.id\"\n          :class=\"{ reverso: index % 2 > 0 }\"\n          :numPagina=\"index+((numeroH-1)*2)\"\n          :idLibro=\"idLibro\"\n          @mousedown.left.native=\"swipingPagina = true\"\n          @mouseup.left.native=\"endSwipe\"\n          @mousemove.native=\"\n            swipePagina($event, index % 2 > 0 ? 'atras' : 'adelante', index)\n          \"\n          @mouseleave.native=\"endSwipe\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { gql } from \"apollo-server-core\";\nimport Pagina from \"./Pagina.vue\";\nexport const fragmentoCuadroTexto = gql`\n  fragment fragCuadroTexto on CuadroTextoCuento {\n    id\n    texto\n    posicionZeta\n    posicion {\n      x\n      y\n    }\n    size {\n      x\n      y\n    }\n    audio {\n      tipoReproduccion\n    }\n    formato {\n      fontSize\n      colorLetra\n      tipoLetra\n      alineacion\n    }\n  }\n`;\n\nexport const fragmentoCuadroImagen = gql`\n  fragment fragCuadroImagen on CuadroImagenCuento {\n    id\n    sinArchivo\n    tipoActivacionSecundario\n    posicionZeta\n    posicion {\n      x\n      y\n    }\n    size {\n      x\n      y\n    }\n    audio {\n      tipoReproduccion\n    }\n  }\n`;\n\nconst fragmentoPagina = gql`\n  fragment fragPagina on PaginaCuento {\n    id\n    numPag\n    color\n    cuadrosTexto {\n      ...fragCuadroTexto\n    }\n    cuadrosImagen {\n      ...fragCuadroImagen\n    }\n  }\n  ${fragmentoCuadroTexto}\n  ${fragmentoCuadroImagen}\n`;\n\nconst QUERY_LIBRO = gql`\n  query($idLibro: ID!) {\n    libro(idLibro: $idLibro) {\n      id\n      idsEditores\n      titulo\n      paginas {\n        ...fragPagina\n      }\n      idForo\n    }\n  }\n  ${fragmentoPagina}\n`;\nexport default {\n  components: { Pagina },\n  name: \"Libro\",\n  apollo: {\n    libro: {\n      query: QUERY_LIBRO,\n      variables() {\n        return {\n          idLibro: this.idLibro,\n        };\n      },\n      skip() {\n        return this.idLibro == null;\n      },\n      fetchPolicy: \"cache-and-network\",\n    },\n  },\n  props: {\n    idLibro: String,\n  },\n  data() {\n    return {\n      libro: {\n        paginas: null,\n      },\n      hojaMovida: 0,\n      centroHojas: -0.5,\n\n      swipingPagina: false,\n      swipeAcumulado: 0,\n    };\n  },\n  methods: {\n    swipePagina(e, direccion) {\n      if (!this.swipingPagina) return;\n      if (\n        (e.movementX < 0 && direccion == \"adelante\") ||\n        (e.movementX > 0 && direccion == \"atras\")\n      ) {\n        this.swipeAcumulado += e.movementX;\n      }\n\n      // if(direccion=='adelante' && e)\n    },\n    endSwipe() {\n      if (Math.abs(this.swipeAcumulado) < 5) {\n        this.swipingPagina = false;\n        this.swipeAcumulado = 0;\n        return;\n      }\n      if (this.swipeAcumulado < 0) {\n        console.log(`Avanzar una hoja`);\n        this.navegarHojas(1);\n      } else {\n        console.log(`Retroceder una hoja`);\n        this.navegarHojas(-1);\n\n      }\n      this.swipingPagina = false;\n      this.swipeAcumulado = 0;\n    },\n    navegarHojas(num) {\n      this.centroHojas += num;\n      if(num<0){\n        this.hojaMovida=this.centroHojas+0.5;\n      }\n      else{\n        this.hojaMovida=this.centroHojas-0.5;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n#libro{\n  overflow: hidden;\n}\n#contenedorHojas {\n  width: 138vh;\n  height: 92vh;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  perspective: 4000px;\n\n}\n.hoja {\n  position: absolute;\n  left: 50%;\n  /* width: 450px;\n  height: 600px; */\n  height: 92vh;\n  width: 69vh;\n  perspective-origin: left bottom;\n  transform-origin: 0% 0%;\n  transition: transform 0.5s;\n  transform-style: preserve-3d;\n}\n.tapada{\n  pointer-events: none;\n}\n.girada {\n  transform: rotateY(-180deg);\n}\n.hoja:not(.girada)>.reverso{\n  pointer-events: none;\n}\n.girada>.pagina:not(.reverso){\n  pointer-events: none;\n}\n\n.reverso {\n  transform: rotateY(180deg);\n}\n.pagina {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  backface-visibility: hidden;\n  transform-style: preserve-3d;\n\n}\n\n</style>"],"sourceRoot":"src/components"}]}