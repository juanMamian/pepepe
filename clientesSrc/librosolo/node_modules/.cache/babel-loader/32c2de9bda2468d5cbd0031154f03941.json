{"remainingRequest":"/home/juan/webPj/pepepe/librosolo/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/librosolo/node_modules/eslint-loader/index.js??ref--13-0!/home/juan/webPj/pepepe/librosolo/src/apollo.js","dependencies":[{"path":"/home/juan/webPj/pepepe/librosolo/src/apollo.js","mtime":1620177899477},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvanVhbi93ZWJQai9wZXBlcGUvbGlicm9zb2xvL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHsgQXBvbGxvQ2xpZW50IH0gZnJvbSAiYXBvbGxvLWNsaWVudCI7CmltcG9ydCB7IEluTWVtb3J5Q2FjaGUgfSBmcm9tICJhcG9sbG8tY2FjaGUtaW5tZW1vcnkiOwppbXBvcnQgeyBjcmVhdGVIdHRwTGluayB9IGZyb20gImFwb2xsby1saW5rLWh0dHAiOwppbXBvcnQgVnVlQXBvbGxvIGZyb20gInZ1ZS1hcG9sbG8iOwppbXBvcnQgeyBzZXRDb250ZXh0IH0gZnJvbSAiYXBvbGxvLWxpbmstY29udGV4dCI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgb25FcnJvciB9IGZyb20gJ0BhcG9sbG8vY2xpZW50L2xpbmsvZXJyb3InOwpWdWUudXNlKFZ1ZUFwb2xsbyk7CnZhciBjYWNoZSA9IG5ldyBJbk1lbW9yeUNhY2hlKCk7Cgp2YXIgZ2V0VG9rZW4gPSBmdW5jdGlvbiBnZXRUb2tlbigpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7Cn07CgpleHBvcnQgdmFyIHNlcnZlclVybCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnaHR0cHM6Ly9wZS1wZS1wZS5oZXJva3VhcHAuY29tJyA6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnOwpleHBvcnQgdmFyIHdzU2VydmVyVXJsID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/ICd3c3M6Ly8nICsgc2VydmVyVXJsLnN1YnN0cig3KSArICcvc3Vic2NyaXBjaW9uZXMnIDogJ3dzOi8vJyArIHNlcnZlclVybC5zdWJzdHIoNykgKyAnL3N1YnNjcmlwY2lvbmVzJzsgLy9jb25zb2xlLmxvZyhgU2VydmVyIHVybDogJHtzZXJ2ZXJVcmx9YCk7Cgp2YXIgaHR0cExpbmsgPSBjcmVhdGVIdHRwTGluayh7CiAgdXJpOiBzZXJ2ZXJVcmwgKyAiL2dyYXBocWwiCn0pOwp2YXIgYXV0aExpbmsgPSBzZXRDb250ZXh0KGZ1bmN0aW9uIChfLCBfcmVmKSB7CiAgdmFyIGhlYWRlcnMgPSBfcmVmLmhlYWRlcnM7CiAgcmV0dXJuIHsKICAgIGhlYWRlcnM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaGVhZGVycyksIHt9LCB7CiAgICAgIGF1dGhvcml6YXRpb246IGdldFRva2VuKCkKICAgIH0pCiAgfTsKfSk7CnZhciBlcnJvckxpbmsgPSBvbkVycm9yKGZ1bmN0aW9uIChfcmVmMikgewogIHZhciBncmFwaFFMRXJyb3JzID0gX3JlZjIuZ3JhcGhRTEVycm9ycywKICAgICAgbmV0d29ya0Vycm9yID0gX3JlZjIubmV0d29ya0Vycm9yOwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgaWYgKGdyYXBoUUxFcnJvcnMpIGdyYXBoUUxFcnJvcnMubWFwKGZ1bmN0aW9uIChfcmVmMykgewogICAgICB2YXIgbWVzc2FnZSA9IF9yZWYzLm1lc3NhZ2UsCiAgICAgICAgICBsb2NhdGlvbnMgPSBfcmVmMy5sb2NhdGlvbnMsCiAgICAgICAgICBwYXRoID0gX3JlZjMucGF0aDsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCJbR3JhcGhRTCBlcnJvcl06IE1lc3NhZ2U6ICIuY29uY2F0KG1lc3NhZ2UsICIsIExvY2F0aW9uOiAiKS5jb25jYXQobG9jYXRpb25zLCAiLCBQYXRoOiAiKS5jb25jYXQocGF0aCkpOwogICAgfSk7CiAgICBpZiAobmV0d29ya0Vycm9yKSBjb25zb2xlLmxvZygiW05ldHdvcmsgZXJyb3JdOiAiLmNvbmNhdChuZXR3b3JrRXJyb3IpKTsKICB9Cn0pOwp2YXIgbGluayA9IGVycm9yTGluay5jb25jYXQoYXV0aExpbmspLmNvbmNhdChodHRwTGluayk7CmV4cG9ydCB2YXIgYXBvbGxvQ2xpZW50ID0gbmV3IEFwb2xsb0NsaWVudCh7CiAgbGluazogbGluaywKICBjYWNoZTogY2FjaGUsCiAgY29ubmVjdFRvRGV2VG9vbHM6IHRydWUKfSk7CmV4cG9ydCB2YXIgYXBvbGxvUHJvdmlkZXIgPSBuZXcgVnVlQXBvbGxvKHsKICBkZWZhdWx0Q2xpZW50OiBhcG9sbG9DbGllbnQKfSk7"},{"version":3,"sources":["/home/juan/webPj/pepepe/librosolo/src/apollo.js"],"names":["ApolloClient","InMemoryCache","createHttpLink","VueApollo","setContext","Vue","onError","use","cache","getToken","localStorage","getItem","serverUrl","process","env","NODE_ENV","wsServerUrl","substr","httpLink","uri","authLink","_","headers","authorization","errorLink","graphQLErrors","networkError","map","message","locations","path","console","log","link","concat","apolloClient","connectToDevTools","apolloProvider","defaultClient"],"mappings":";;;AAAA,SAASA,YAAT,QAA6B,eAA7B;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAOC,GAAP,MAAgB,KAAhB;AACA,SAASC,OAAT,QAAwB,2BAAxB;AAGAD,GAAG,CAACE,GAAJ,CAAQJ,SAAR;AAEA,IAAMK,KAAK,GAAG,IAAIP,aAAJ,EAAd;;AAGA,IAAIQ,QAAQ,GAAG,SAAXA,QAAW;AAAA,SAAMC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAN;AAAA,CAAf;;AAGA,OAAO,IAAMC,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACrB,gCADqB,GAErB,uBAFG;AAIP,OAAO,IAAMC,WAAW,GAAGH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACvB,WAAWH,SAAS,CAACK,MAAV,CAAiB,CAAjB,CAAX,GAAiC,iBADV,GAEvB,UAAUL,SAAS,CAACK,MAAV,CAAiB,CAAjB,CAAV,GAAgC,iBAF7B,C,CAIP;;AAGA,IAAMC,QAAQ,GAAGhB,cAAc,CAAC;AAC9BiB,EAAAA,GAAG,EAAEP,SAAS,GAAG;AADa,CAAD,CAA/B;AAIA,IAAMQ,QAAQ,GAAGhB,UAAU,CAAC,UAACiB,CAAD,QAAoB;AAAA,MAAdC,OAAc,QAAdA,OAAc;AAE9C,SAAO;AACLA,IAAAA,OAAO,kCACFA,OADE;AAELC,MAAAA,aAAa,EAAEd,QAAQ;AAFlB;AADF,GAAP;AAMD,CAR0B,CAA3B;AAUA,IAAMe,SAAS,GAAGlB,OAAO,CAAC,iBAAqC;AAAA,MAAlCmB,aAAkC,SAAlCA,aAAkC;AAAA,MAAnBC,YAAmB,SAAnBA,YAAmB;;AAC7D,MAAIb,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,QAAIU,aAAJ,EACEA,aAAa,CAACE,GAAd,CAAkB;AAAA,UAAGC,OAAH,SAAGA,OAAH;AAAA,UAAYC,SAAZ,SAAYA,SAAZ;AAAA,UAAuBC,IAAvB,SAAuBA,IAAvB;AAAA,aAChBC,OAAO,CAACC,GAAR,qCAC+BJ,OAD/B,yBACqDC,SADrD,qBACyEC,IADzE,EADgB;AAAA,KAAlB;AAMF,QAAIJ,YAAJ,EAAkBK,OAAO,CAACC,GAAR,4BAAgCN,YAAhC;AACnB;AAEF,CAZwB,CAAzB;AAcA,IAAMO,IAAI,GAAGT,SAAS,CAACU,MAAV,CAAiBd,QAAjB,EAA2Bc,MAA3B,CAAkChB,QAAlC,CAAb;AAGA,OAAO,IAAMiB,YAAY,GAAG,IAAInC,YAAJ,CAAiB;AAC3CiC,EAAAA,IAAI,EAAEA,IADqC;AAE3CzB,EAAAA,KAAK,EAALA,KAF2C;AAG3C4B,EAAAA,iBAAiB,EAAE;AAHwB,CAAjB,CAArB;AAMP,OAAO,IAAMC,cAAc,GAAG,IAAIlC,SAAJ,CAAc;AAC1CmC,EAAAA,aAAa,EAAEH;AAD2B,CAAd,CAAvB","sourcesContent":["import { ApolloClient } from \"apollo-client\"\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { createHttpLink } from \"apollo-link-http\"\nimport VueApollo from \"vue-apollo\";\nimport { setContext } from \"apollo-link-context\"\nimport Vue from 'vue'\nimport { onError } from '@apollo/client/link/error'\n\n\nVue.use(VueApollo);\n\nconst cache = new InMemoryCache();\n\n\nlet getToken = () => localStorage.getItem('token');\n\n\nexport const serverUrl = process.env.NODE_ENV === 'production'\n  ? 'https://pe-pe-pe.herokuapp.com'\n  : 'http://localhost:3000'\n\nexport const wsServerUrl = process.env.NODE_ENV === 'production'\n  ? 'wss://' + serverUrl.substr(7) + '/subscripciones'\n  : 'ws://' + serverUrl.substr(7) + '/subscripciones'\n\n//console.log(`Server url: ${serverUrl}`);\n\n\nconst httpLink = createHttpLink({\n  uri: serverUrl + \"/graphql\"\n});\n\nconst authLink = setContext((_, { headers }) => {\n\n  return {\n    headers: {\n      ...headers,\n      authorization: getToken()\n    }\n  }\n});\n\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (graphQLErrors)\n      graphQLErrors.map(({ message, locations, path }) =>\n        console.log(\n          `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        ),\n      )\n\n    if (networkError) console.log(`[Network error]: ${networkError}`)\n  }\n\n})\n\nconst link = errorLink.concat(authLink).concat(httpLink);\n\n\nexport const apolloClient = new ApolloClient({\n  link: link,\n  cache,\n  connectToDevTools: true,\n});\n\nexport const apolloProvider = new VueApollo({\n  defaultClient: apolloClient\n})"]}]}