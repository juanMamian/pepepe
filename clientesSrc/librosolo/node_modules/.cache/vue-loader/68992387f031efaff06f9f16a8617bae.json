{"remainingRequest":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/librosolo/src/components/Libro.vue?vue&type=style&index=0&id=1fef7e82&scoped=true&lang=css&","dependencies":[{"path":"/home/juan/webPj/pepepe/librosolo/src/components/Libro.vue","mtime":1620356337796},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2xpYnJvewogIG92ZXJmbG93OiBoaWRkZW47Cn0KI2NvbnRlbmVkb3JIb2phcyB7CiAgd2lkdGg6IDEzOHZoOwogIGhlaWdodDogOTJ2aDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIHBlcnNwZWN0aXZlOiA0MDAwcHg7Cgp9Ci5ob2phIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgbGVmdDogNTAlOwogIC8qIHdpZHRoOiA0NTBweDsKICBoZWlnaHQ6IDYwMHB4OyAqLwogIGhlaWdodDogOTJ2aDsKICB3aWR0aDogNjl2aDsKICBwZXJzcGVjdGl2ZS1vcmlnaW46IGxlZnQgYm90dG9tOwogIHRyYW5zZm9ybS1vcmlnaW46IDAlIDAlOwogIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjVzOwogIHRyYW5zZm9ybS1zdHlsZTogcHJlc2VydmUtM2Q7Cn0KLnRhcGFkYXsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQouZ2lyYWRhIHsKICB0cmFuc2Zvcm06IHJvdGF0ZVkoLTE4MGRlZyk7Cn0KLmhvamE6bm90KC5naXJhZGEpPi5yZXZlcnNvewogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9Ci5naXJhZGE+LnBhZ2luYTpub3QoLnJldmVyc28pewogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgoucmV2ZXJzbyB7CiAgdHJhbnNmb3JtOiByb3RhdGVZKDE4MGRlZyk7Cn0KLnBhZ2luYSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMHB4OwogIGxlZnQ6IDBweDsKICBiYWNrZmFjZS12aXNpYmlsaXR5OiBoaWRkZW47CiAgdHJhbnNmb3JtLXN0eWxlOiBwcmVzZXJ2ZS0zZDsKCn0KCg=="},{"version":3,"sources":["Libro.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Libro.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"libro\">\n    <div id=\"contenedorHojas\" v-if=\"libro.paginas\">\n      <div\n        class=\"hoja\"\n        :class=\"{ girada: numeroH - 1 < centroHojas, tapada: Math.abs((numeroH-1)-centroHojas)>=1 }\"\n        v-for=\"numeroH of Math.ceil(libro.paginas.length / 2)\"\n        :key=\"numeroH\"\n        :style=\"[\n          {\n            zIndex:\n              numeroH - 1 == hojaMovida\n                ? '0'\n                : -Math.abs(numeroH - 1 - hojaMovida),\n          },\n        ]\"\n      >\n        <pagina\n          :estaPagina=\"pagina\"\n          v-for=\"(pagina, index) of libro.paginas.slice(\n            (numeroH - 1) * 2,\n            (numeroH - 1) * 2 + 2\n          )\"\n          :key=\"pagina.id\"\n          :class=\"{ reverso: index % 2 > 0 }\"\n          :numPagina=\"index+((numeroH-1)*2)\"\n          :idLibro=\"idLibro\"\n          @mousedown.left.native=\"swipingPagina = true\"\n          @mouseup.left.native=\"endSwipe\"\n          @mousemove.native=\"\n            swipePagina($event, index % 2 > 0 ? 'atras' : 'adelante', index)\n          \"\n          @mouseleave.native=\"endSwipe\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { gql } from \"apollo-server-core\";\nimport Pagina from \"./Pagina.vue\";\nexport const fragmentoCuadroTexto = gql`\n  fragment fragCuadroTexto on CuadroTextoCuento {\n    id\n    texto\n    posicionZeta\n    posicion {\n      x\n      y\n    }\n    size {\n      x\n      y\n    }\n    audio {\n      tipoReproduccion\n    }\n    formato {\n      fontSize\n      colorLetra\n      tipoLetra\n      alineacion\n    }\n  }\n`;\n\nexport const fragmentoCuadroImagen = gql`\n  fragment fragCuadroImagen on CuadroImagenCuento {\n    id\n    sinArchivo\n    tipoActivacionSecundario\n    posicionZeta\n    posicion {\n      x\n      y\n    }\n    size {\n      x\n      y\n    }\n    audio {\n      tipoReproduccion\n    }\n  }\n`;\n\nconst fragmentoPagina = gql`\n  fragment fragPagina on PaginaCuento {\n    id\n    numPag\n    color\n    cuadrosTexto {\n      ...fragCuadroTexto\n    }\n    cuadrosImagen {\n      ...fragCuadroImagen\n    }\n  }\n  ${fragmentoCuadroTexto}\n  ${fragmentoCuadroImagen}\n`;\n\nconst QUERY_LIBRO = gql`\n  query($idLibro: ID!) {\n    libro(idLibro: $idLibro) {\n      id\n      idsEditores\n      titulo\n      paginas {\n        ...fragPagina\n      }\n      idForo\n    }\n  }\n  ${fragmentoPagina}\n`;\nexport default {\n  components: { Pagina },\n  name: \"Libro\",\n  apollo: {\n    libro: {\n      query: QUERY_LIBRO,\n      variables() {\n        return {\n          idLibro: this.idLibro,\n        };\n      },\n      skip() {\n        return this.idLibro == null;\n      },\n      fetchPolicy: \"cache-and-network\",\n    },\n  },\n  props: {\n    idLibro: String,\n  },\n  data() {\n    return {\n      libro: {\n        paginas: null,\n      },\n      hojaMovida: 0,\n      centroHojas: -0.5,\n\n      swipingPagina: false,\n      swipeAcumulado: 0,\n    };\n  },\n  methods: {\n    swipePagina(e, direccion) {\n      if (!this.swipingPagina) return;\n      if (\n        (e.movementX < 0 && direccion == \"adelante\") ||\n        (e.movementX > 0 && direccion == \"atras\")\n      ) {\n        this.swipeAcumulado += e.movementX;\n      }\n\n      // if(direccion=='adelante' && e)\n    },\n    endSwipe() {\n      if (Math.abs(this.swipeAcumulado) < 5) {\n        this.swipingPagina = false;\n        this.swipeAcumulado = 0;\n        return;\n      }\n      if (this.swipeAcumulado < 0) {\n        console.log(`Avanzar una hoja`);\n        this.navegarHojas(1);\n      } else {\n        console.log(`Retroceder una hoja`);\n        this.navegarHojas(-1);\n\n      }\n      this.swipingPagina = false;\n      this.swipeAcumulado = 0;\n    },\n    navegarHojas(num) {\n      this.centroHojas += num;\n      if(num<0){\n        this.hojaMovida=this.centroHojas+0.5;\n      }\n      else{\n        this.hojaMovida=this.centroHojas-0.5;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n#libro{\n  overflow: hidden;\n}\n#contenedorHojas {\n  width: 138vh;\n  height: 92vh;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  perspective: 4000px;\n\n}\n.hoja {\n  position: absolute;\n  left: 50%;\n  /* width: 450px;\n  height: 600px; */\n  height: 92vh;\n  width: 69vh;\n  perspective-origin: left bottom;\n  transform-origin: 0% 0%;\n  transition: transform 0.5s;\n  transform-style: preserve-3d;\n}\n.tapada{\n  pointer-events: none;\n}\n.girada {\n  transform: rotateY(-180deg);\n}\n.hoja:not(.girada)>.reverso{\n  pointer-events: none;\n}\n.girada>.pagina:not(.reverso){\n  pointer-events: none;\n}\n\n.reverso {\n  transform: rotateY(180deg);\n}\n.pagina {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  backface-visibility: hidden;\n  transform-style: preserve-3d;\n\n}\n\n</style>"]}]}