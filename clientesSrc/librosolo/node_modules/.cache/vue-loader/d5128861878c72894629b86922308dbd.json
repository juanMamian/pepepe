{"remainingRequest":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/librosolo/src/components/CuadroTexto.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/home/juan/webPj/pepepe/librosolo/src/components/CuadroTexto.vue","mtime":1620356337796},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY3VhZHJvVGV4dG8gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKfQoudGV4dG8gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDBweDsKICBsZWZ0OiAwcHg7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKfQoKLnRleHRvRHVtbXkgewogIHdpZHRoOiA5OSU7CiAgYm9yZGVyOiAxcHggc29saWQgcGluazsKICBvdmVyZmxvdy14OiBzY3JvbGw7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IC0xMDAlOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwogIHdoaXRlLXNwYWNlOiBwcmUtd3JhcDsKICB2aXNpYmlsaXR5OiBoaWRkZW47Cn0K"},{"version":3,"sources":["CuadroTexto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CuadroTexto.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"cuadroTexto\" :style=\"[estiloFormato, estiloLayout]\">\n    <div class=\"texto\" ref=\"texto\" :style=\"[estiloFontSize]\">\n      {{ esteCuadroTexto.texto }}\n    </div>\n    <div\n      class=\"textoDummy\"\n      :style=\"[estiloFormato, estiloDummy]\"\n      ref=\"textoDummy\"\n    >\n      {{ esteCuadroTexto.texto }}\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"CuadroTexto\",\n  props: {\n    esteCuadroTexto: Object,\n  },\n  data() {\n    return {\n      fontSizeDummy: 10,\n      fontSizeTexto: 10,\n    };\n  },\n  computed: {\n    estiloDummy() {\n      return {\n        fontSize: this.fontSizeDummy + \"px\",\n      };\n    },\n    estiloFontSize() {\n      return {\n        fontSize: this.fontSizeTexto + \"px\",\n      };\n    },\n    estiloFormato() {\n      return {\n        textAlign: this.esteCuadroTexto.formato.alineacion,\n        color: this.esteCuadroTexto.formato.colorLetra,\n        fontFamily:\n          this.esteCuadroTexto.formato.tipoLetra + \", 'Nunito', sans-serif\",\n      };\n    },\n    estiloLayout() {\n      return {\n        top: this.esteCuadroTexto.posicion.y + \"%\",\n        left: this.esteCuadroTexto.posicion.x + \"%\",\n\n        width: this.esteCuadroTexto.size.x + \"%\",\n        height: this.esteCuadroTexto.size.y + \"%\",\n\n        zIndex: this.esteCuadroTexto.posicionZeta,\n      };\n    },\n  },\n  methods: {\n    findFontSize() {\n      if (\n        !this.esteCuadroTexto ||\n        !this.esteCuadroTexto.texto ||\n        this.esteCuadroTexto.texto.length < 1\n      )\n        return;\n      let hTexto = this.$refs.texto.offsetHeight;\n      let hDummy = this.$refs.textoDummy.offsetHeight;\n      let wDummy = this.$refs.textoDummy.scrollWidth;\n      let wTexto = this.$refs.texto.offsetWidth;\n      // if (!confirm(\"continuar\")) {\n      //   return;\n      // }\n\n      if (hDummy >= hTexto || wDummy >= wTexto) {\n        console.log(`Reduciendo font size`);\n        this.fontSizeDummy = this.fontSizeDummy - 2;\n        this.$nextTick(() => {\n          let hTexto = this.$refs.texto.offsetHeight;\n          let hDummy = this.$refs.textoDummy.offsetHeight;\n          let wDummy = this.$refs.textoDummy.scrollWidth;\n          let wTexto = this.$refs.texto.offsetWidth;\n\n          if ((hDummy < hTexto && wDummy < wTexto) || this.fontSizeDummy < 5) {\n            this.fontSizeTexto = this.fontSizeDummy;\n            this.fontSizeInput = this.fontSizeDummy;\n            return;\n          } else {\n            this.findFontSize();\n          }\n        });\n      } else if (hDummy < hTexto && wDummy < wTexto) {\n        console.log(`Aumentando font size`);\n\n        this.fontSizeDummy = this.fontSizeDummy + 2;\n        this.$nextTick(() => {\n          let hTexto = this.$refs.texto.offsetHeight;\n          let hDummy = this.$refs.textoDummy.offsetHeight;\n          let wDummy = this.$refs.textoDummy.scrollWidth;\n          let wTexto = this.$refs.texto.offsetWidth;\n\n          if (\n            hDummy >= hTexto ||\n            wDummy >= wTexto ||\n            this.fontSizeDummy > 100\n          ) {\n            this.fontSizeDummy = this.fontSizeDummy - 2;\n\n            this.fontSizeTexto = this.fontSizeDummy;\n            this.fontSizeInput = this.fontSizeDummy;\n\n            return;\n          } else {\n            this.findFontSize();\n          }\n        });\n      }\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.findFontSize();\n    });\n  },\n};\n</script>\n\n<style>\n.cuadroTexto {\n  position: absolute;\n}\n.texto {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  white-space: pre-wrap;\n}\n\n.textoDummy {\n  width: 99%;\n  border: 1px solid pink;\n  overflow-x: scroll;\n  position: absolute;\n  left: -100%;\n  pointer-events: none;\n  white-space: pre-wrap;\n  visibility: hidden;\n}\n</style>"]}]}