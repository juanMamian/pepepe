{"remainingRequest":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/librosolo/src/components/CuadroTexto.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/librosolo/src/components/CuadroTexto.vue","mtime":1620356337796},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/librosolo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ3VhZHJvVGV4dG8iLAogIHByb3BzOiB7CiAgICBlc3RlQ3VhZHJvVGV4dG86IE9iamVjdCwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb250U2l6ZUR1bW15OiAxMCwKICAgICAgZm9udFNpemVUZXh0bzogMTAsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGVzdGlsb0R1bW15KCkgewogICAgICByZXR1cm4gewogICAgICAgIGZvbnRTaXplOiB0aGlzLmZvbnRTaXplRHVtbXkgKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIGVzdGlsb0ZvbnRTaXplKCkgewogICAgICByZXR1cm4gewogICAgICAgIGZvbnRTaXplOiB0aGlzLmZvbnRTaXplVGV4dG8gKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIGVzdGlsb0Zvcm1hdG8oKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdGV4dEFsaWduOiB0aGlzLmVzdGVDdWFkcm9UZXh0by5mb3JtYXRvLmFsaW5lYWNpb24sCiAgICAgICAgY29sb3I6IHRoaXMuZXN0ZUN1YWRyb1RleHRvLmZvcm1hdG8uY29sb3JMZXRyYSwKICAgICAgICBmb250RmFtaWx5OgogICAgICAgICAgdGhpcy5lc3RlQ3VhZHJvVGV4dG8uZm9ybWF0by50aXBvTGV0cmEgKyAiLCAnTnVuaXRvJywgc2Fucy1zZXJpZiIsCiAgICAgIH07CiAgICB9LAogICAgZXN0aWxvTGF5b3V0KCkgewogICAgICByZXR1cm4gewogICAgICAgIHRvcDogdGhpcy5lc3RlQ3VhZHJvVGV4dG8ucG9zaWNpb24ueSArICIlIiwKICAgICAgICBsZWZ0OiB0aGlzLmVzdGVDdWFkcm9UZXh0by5wb3NpY2lvbi54ICsgIiUiLAoKICAgICAgICB3aWR0aDogdGhpcy5lc3RlQ3VhZHJvVGV4dG8uc2l6ZS54ICsgIiUiLAogICAgICAgIGhlaWdodDogdGhpcy5lc3RlQ3VhZHJvVGV4dG8uc2l6ZS55ICsgIiUiLAoKICAgICAgICB6SW5kZXg6IHRoaXMuZXN0ZUN1YWRyb1RleHRvLnBvc2ljaW9uWmV0YSwKICAgICAgfTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBmaW5kRm9udFNpemUoKSB7CiAgICAgIGlmICgKICAgICAgICAhdGhpcy5lc3RlQ3VhZHJvVGV4dG8gfHwKICAgICAgICAhdGhpcy5lc3RlQ3VhZHJvVGV4dG8udGV4dG8gfHwKICAgICAgICB0aGlzLmVzdGVDdWFkcm9UZXh0by50ZXh0by5sZW5ndGggPCAxCiAgICAgICkKICAgICAgICByZXR1cm47CiAgICAgIGxldCBoVGV4dG8gPSB0aGlzLiRyZWZzLnRleHRvLm9mZnNldEhlaWdodDsKICAgICAgbGV0IGhEdW1teSA9IHRoaXMuJHJlZnMudGV4dG9EdW1teS5vZmZzZXRIZWlnaHQ7CiAgICAgIGxldCB3RHVtbXkgPSB0aGlzLiRyZWZzLnRleHRvRHVtbXkuc2Nyb2xsV2lkdGg7CiAgICAgIGxldCB3VGV4dG8gPSB0aGlzLiRyZWZzLnRleHRvLm9mZnNldFdpZHRoOwogICAgICAvLyBpZiAoIWNvbmZpcm0oImNvbnRpbnVhciIpKSB7CiAgICAgIC8vICAgcmV0dXJuOwogICAgICAvLyB9CgogICAgICBpZiAoaER1bW15ID49IGhUZXh0byB8fCB3RHVtbXkgPj0gd1RleHRvKSB7CiAgICAgICAgY29uc29sZS5sb2coYFJlZHVjaWVuZG8gZm9udCBzaXplYCk7CiAgICAgICAgdGhpcy5mb250U2l6ZUR1bW15ID0gdGhpcy5mb250U2l6ZUR1bW15IC0gMjsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICBsZXQgaFRleHRvID0gdGhpcy4kcmVmcy50ZXh0by5vZmZzZXRIZWlnaHQ7CiAgICAgICAgICBsZXQgaER1bW15ID0gdGhpcy4kcmVmcy50ZXh0b0R1bW15Lm9mZnNldEhlaWdodDsKICAgICAgICAgIGxldCB3RHVtbXkgPSB0aGlzLiRyZWZzLnRleHRvRHVtbXkuc2Nyb2xsV2lkdGg7CiAgICAgICAgICBsZXQgd1RleHRvID0gdGhpcy4kcmVmcy50ZXh0by5vZmZzZXRXaWR0aDsKCiAgICAgICAgICBpZiAoKGhEdW1teSA8IGhUZXh0byAmJiB3RHVtbXkgPCB3VGV4dG8pIHx8IHRoaXMuZm9udFNpemVEdW1teSA8IDUpIHsKICAgICAgICAgICAgdGhpcy5mb250U2l6ZVRleHRvID0gdGhpcy5mb250U2l6ZUR1bW15OwogICAgICAgICAgICB0aGlzLmZvbnRTaXplSW5wdXQgPSB0aGlzLmZvbnRTaXplRHVtbXk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZmluZEZvbnRTaXplKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAoaER1bW15IDwgaFRleHRvICYmIHdEdW1teSA8IHdUZXh0bykgewogICAgICAgIGNvbnNvbGUubG9nKGBBdW1lbnRhbmRvIGZvbnQgc2l6ZWApOwoKICAgICAgICB0aGlzLmZvbnRTaXplRHVtbXkgPSB0aGlzLmZvbnRTaXplRHVtbXkgKyAyOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIGxldCBoVGV4dG8gPSB0aGlzLiRyZWZzLnRleHRvLm9mZnNldEhlaWdodDsKICAgICAgICAgIGxldCBoRHVtbXkgPSB0aGlzLiRyZWZzLnRleHRvRHVtbXkub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgbGV0IHdEdW1teSA9IHRoaXMuJHJlZnMudGV4dG9EdW1teS5zY3JvbGxXaWR0aDsKICAgICAgICAgIGxldCB3VGV4dG8gPSB0aGlzLiRyZWZzLnRleHRvLm9mZnNldFdpZHRoOwoKICAgICAgICAgIGlmICgKICAgICAgICAgICAgaER1bW15ID49IGhUZXh0byB8fAogICAgICAgICAgICB3RHVtbXkgPj0gd1RleHRvIHx8CiAgICAgICAgICAgIHRoaXMuZm9udFNpemVEdW1teSA+IDEwMAogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuZm9udFNpemVEdW1teSA9IHRoaXMuZm9udFNpemVEdW1teSAtIDI7CgogICAgICAgICAgICB0aGlzLmZvbnRTaXplVGV4dG8gPSB0aGlzLmZvbnRTaXplRHVtbXk7CiAgICAgICAgICAgIHRoaXMuZm9udFNpemVJbnB1dCA9IHRoaXMuZm9udFNpemVEdW1teTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZmluZEZvbnRTaXplKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICB0aGlzLmZpbmRGb250U2l6ZSgpOwogICAgfSk7CiAgfSwKfTsK"},{"version":3,"sources":["CuadroTexto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CuadroTexto.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"cuadroTexto\" :style=\"[estiloFormato, estiloLayout]\">\n    <div class=\"texto\" ref=\"texto\" :style=\"[estiloFontSize]\">\n      {{ esteCuadroTexto.texto }}\n    </div>\n    <div\n      class=\"textoDummy\"\n      :style=\"[estiloFormato, estiloDummy]\"\n      ref=\"textoDummy\"\n    >\n      {{ esteCuadroTexto.texto }}\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"CuadroTexto\",\n  props: {\n    esteCuadroTexto: Object,\n  },\n  data() {\n    return {\n      fontSizeDummy: 10,\n      fontSizeTexto: 10,\n    };\n  },\n  computed: {\n    estiloDummy() {\n      return {\n        fontSize: this.fontSizeDummy + \"px\",\n      };\n    },\n    estiloFontSize() {\n      return {\n        fontSize: this.fontSizeTexto + \"px\",\n      };\n    },\n    estiloFormato() {\n      return {\n        textAlign: this.esteCuadroTexto.formato.alineacion,\n        color: this.esteCuadroTexto.formato.colorLetra,\n        fontFamily:\n          this.esteCuadroTexto.formato.tipoLetra + \", 'Nunito', sans-serif\",\n      };\n    },\n    estiloLayout() {\n      return {\n        top: this.esteCuadroTexto.posicion.y + \"%\",\n        left: this.esteCuadroTexto.posicion.x + \"%\",\n\n        width: this.esteCuadroTexto.size.x + \"%\",\n        height: this.esteCuadroTexto.size.y + \"%\",\n\n        zIndex: this.esteCuadroTexto.posicionZeta,\n      };\n    },\n  },\n  methods: {\n    findFontSize() {\n      if (\n        !this.esteCuadroTexto ||\n        !this.esteCuadroTexto.texto ||\n        this.esteCuadroTexto.texto.length < 1\n      )\n        return;\n      let hTexto = this.$refs.texto.offsetHeight;\n      let hDummy = this.$refs.textoDummy.offsetHeight;\n      let wDummy = this.$refs.textoDummy.scrollWidth;\n      let wTexto = this.$refs.texto.offsetWidth;\n      // if (!confirm(\"continuar\")) {\n      //   return;\n      // }\n\n      if (hDummy >= hTexto || wDummy >= wTexto) {\n        console.log(`Reduciendo font size`);\n        this.fontSizeDummy = this.fontSizeDummy - 2;\n        this.$nextTick(() => {\n          let hTexto = this.$refs.texto.offsetHeight;\n          let hDummy = this.$refs.textoDummy.offsetHeight;\n          let wDummy = this.$refs.textoDummy.scrollWidth;\n          let wTexto = this.$refs.texto.offsetWidth;\n\n          if ((hDummy < hTexto && wDummy < wTexto) || this.fontSizeDummy < 5) {\n            this.fontSizeTexto = this.fontSizeDummy;\n            this.fontSizeInput = this.fontSizeDummy;\n            return;\n          } else {\n            this.findFontSize();\n          }\n        });\n      } else if (hDummy < hTexto && wDummy < wTexto) {\n        console.log(`Aumentando font size`);\n\n        this.fontSizeDummy = this.fontSizeDummy + 2;\n        this.$nextTick(() => {\n          let hTexto = this.$refs.texto.offsetHeight;\n          let hDummy = this.$refs.textoDummy.offsetHeight;\n          let wDummy = this.$refs.textoDummy.scrollWidth;\n          let wTexto = this.$refs.texto.offsetWidth;\n\n          if (\n            hDummy >= hTexto ||\n            wDummy >= wTexto ||\n            this.fontSizeDummy > 100\n          ) {\n            this.fontSizeDummy = this.fontSizeDummy - 2;\n\n            this.fontSizeTexto = this.fontSizeDummy;\n            this.fontSizeInput = this.fontSizeDummy;\n\n            return;\n          } else {\n            this.findFontSize();\n          }\n        });\n      }\n    },\n  },\n  mounted() {\n    this.$nextTick(() => {\n      this.findFontSize();\n    });\n  },\n};\n</script>\n\n<style>\n.cuadroTexto {\n  position: absolute;\n}\n.texto {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  white-space: pre-wrap;\n}\n\n.textoDummy {\n  width: 99%;\n  border: 1px solid pink;\n  overflow-x: scroll;\n  position: absolute;\n  left: -100%;\n  pointer-events: none;\n  white-space: pre-wrap;\n  visibility: hidden;\n}\n</style>"]}]}