{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/libro/src/components/CuadroImagen.vue?vue&type=style&index=0&id=fb161856&scoped=true&lang=css&","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/components/CuadroImagen.vue","mtime":1617375533843},{"path":"/home/juan/webPj/pepepe/libro/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouY3VhZHJvSW1hZ2VuIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgYm9yZGVyOiAxcHggc29saWQgb3JhbmdlOwp9CgouaW1hZ2VuQ29udGVuaWRvIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7Cn0KI3Jlc2l6ZUhhbmRsZSB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMTAwJTsKICBsZWZ0OiAxMDAlOwoKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7CgogIGN1cnNvcjogcG9pbnRlcjsKICBib3JkZXI6IDFweCBzb2xpZCBwdXJwbGU7Cn0KI2JvbGl0YVJlc2l6ZUhhbmRsZSB7CiAgd2lkdGg6IDEwcHg7CiAgaGVpZ2h0OiAxMHB4OwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogIGJhY2tncm91bmQtY29sb3I6IGdyZWVuOwp9Ci5jb25BdWRpb3sKICBjdXJzb3I6cG9pbnRlcjsKfQo="},{"version":3,"sources":["CuadroImagen.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CuadroImagen.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"cuadroImagen\" :style=\"[estiloLayout]\" @click=\"playAudio\" :class=\"{conAudio:esteCuadroImagen.audio}\">\n    <img :src=\"urlImagen\" alt=\"ilustracion\" class=\"imagenContenido\" />\n    <div\n      id=\"resizeHandle\"\n      :style=\"[sizeResizeHandle]\"\n      @mousedown.left=\"iniciarResize\"\n      @mousemove=\"resize\"\n      @mouseup=\"finResize\"\n    >\n      <div id=\"bolitaResizeHandle\"></div>\n    </div>\n\n    <audio type=\"audio/ogg\" v-if=\"esteCuadroImagen.audio\" ref=\"audio\">\n      <source :src=\"urlAudio\" type=\"audio/ogg\" />\n    </audio>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"cuadroImagen\",\n  props: {\n    esteCuadroImagen: Object,\n    idLibro: String,\n    idPagina: String,\n    sizePagina:Object\n  },\n  data() {\n    return {\n      resizing: false,\n\n      posicion: {\n        x: null,\n        y: null,\n      },\n      size: {\n        x: null,\n        y: null,\n      },\n    };\n  },\n  computed: {\n    estiloLayout() {\n      return {\n        top: this.posicion.y + \"%\",\n        left: this.posicion.x + \"%\",\n\n        width: this.size.x + \"%\",\n        height: this.size.y + \"%\",\n      };\n    },\n    urlImagen() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/imagenCuento/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n    sizeResizeHandle() {\n      return {\n        width: this.resizing ? 200 + \"px\" : 10 + \"px\",\n        height: this.resizing ? 200 + \"px\" : 10 + \"px\",\n      };\n    },\n    urlAudio() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/audioImagen/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n  },\n  methods: {\n    playAudio(){\n      if(!this.esteCuadroImagen.audio)return;\n      this.$refs.audio.play();\n    },\n    iniciarResize() {\n      this.resizing = true;\n    },\n    resize(e) {\n      if (this.resizing) {\n\n        var cuadroPos = {\n          x: this.$el.getBoundingClientRect().left,\n          y: this.$el.getBoundingClientRect().top,\n        };\n\n        const nuevox = e.clientX - cuadroPos.x - 5;\n        const nuevoy = e.clientY - cuadroPos.y - 5;\n\n        \n        var nuevoxP = Math.floor((nuevox * 100) / this.sizePagina.x);\n        var nuevoyP = Math.floor((nuevoy * 100) / this.sizePagina.y);\n\n        if(this.posicion.x+nuevoxP>100)nuevoxP=Math.floor(100-this.posicion.x);\n        if(this.posicion.y+nuevoyP>100)nuevoyP=Math.floor(100-this.posicion.y);\n\n\n        this.$set(this.size, \"x\", nuevoxP);\n        this.$set(this.size, \"y\", nuevoyP);\n      }\n    },\n    finResize() {\n      this.resizing = false;\n    },\n  },\n  mounted() {\n    this.posicion = this.esteCuadroImagen.posicion;\n    this.size = this.esteCuadroImagen.size;    \n  },\n};\n</script>\n\n<style scoped>\n.cuadroImagen {\n  position: absolute;\n  border: 1px solid orange;\n}\n\n.imagenContenido {\n  width: 100%;\n  height: 100%;\n}\n#resizeHandle {\n  position: absolute;\n  top: 100%;\n  left: 100%;\n\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n\n  cursor: pointer;\n  border: 1px solid purple;\n}\n#bolitaResizeHandle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: green;\n}\n.conAudio{\n  cursor:pointer;\n}\n</style>"]}]}