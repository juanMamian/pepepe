{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/libro/src/components/CuadroImagen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/components/CuadroImagen.vue","mtime":1617375533843},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY3VhZHJvSW1hZ2VuIiwKICBwcm9wczogewogICAgZXN0ZUN1YWRyb0ltYWdlbjogT2JqZWN0LAogICAgaWRMaWJybzogU3RyaW5nLAogICAgaWRQYWdpbmE6IFN0cmluZywKICAgIHNpemVQYWdpbmE6T2JqZWN0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVzaXppbmc6IGZhbHNlLAoKICAgICAgcG9zaWNpb246IHsKICAgICAgICB4OiBudWxsLAogICAgICAgIHk6IG51bGwsCiAgICAgIH0sCiAgICAgIHNpemU6IHsKICAgICAgICB4OiBudWxsLAogICAgICAgIHk6IG51bGwsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGVzdGlsb0xheW91dCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3A6IHRoaXMucG9zaWNpb24ueSArICIlIiwKICAgICAgICBsZWZ0OiB0aGlzLnBvc2ljaW9uLnggKyAiJSIsCgogICAgICAgIHdpZHRoOiB0aGlzLnNpemUueCArICIlIiwKICAgICAgICBoZWlnaHQ6IHRoaXMuc2l6ZS55ICsgIiUiLAogICAgICB9OwogICAgfSwKICAgIHVybEltYWdlbigpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLnNlcnZlclVybCArCiAgICAgICAgIi9hcGlDdWVudG9zL2ltYWdlbkN1ZW50by8iICsKICAgICAgICB0aGlzLmlkTGlicm8gKwogICAgICAgICIvIiArCiAgICAgICAgdGhpcy5pZFBhZ2luYSArCiAgICAgICAgIi8iICsKICAgICAgICB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uaWQKICAgICAgKTsKICAgIH0sCiAgICBzaXplUmVzaXplSGFuZGxlKCkgewogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiB0aGlzLnJlc2l6aW5nID8gMjAwICsgInB4IiA6IDEwICsgInB4IiwKICAgICAgICBoZWlnaHQ6IHRoaXMucmVzaXppbmcgPyAyMDAgKyAicHgiIDogMTAgKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIHVybEF1ZGlvKCkgewogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuc2VydmVyVXJsICsKICAgICAgICAiL2FwaUN1ZW50b3MvYXVkaW9JbWFnZW4vIiArCiAgICAgICAgdGhpcy5pZExpYnJvICsKICAgICAgICAiLyIgKwogICAgICAgIHRoaXMuaWRQYWdpbmEgKwogICAgICAgICIvIiArCiAgICAgICAgdGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmlkCiAgICAgICk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgcGxheUF1ZGlvKCl7CiAgICAgIGlmKCF0aGlzLmVzdGVDdWFkcm9JbWFnZW4uYXVkaW8pcmV0dXJuOwogICAgICB0aGlzLiRyZWZzLmF1ZGlvLnBsYXkoKTsKICAgIH0sCiAgICBpbmljaWFyUmVzaXplKCkgewogICAgICB0aGlzLnJlc2l6aW5nID0gdHJ1ZTsKICAgIH0sCiAgICByZXNpemUoZSkgewogICAgICBpZiAodGhpcy5yZXNpemluZykgewoKICAgICAgICB2YXIgY3VhZHJvUG9zID0gewogICAgICAgICAgeDogdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCwKICAgICAgICAgIHk6IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCwKICAgICAgICB9OwoKICAgICAgICBjb25zdCBudWV2b3ggPSBlLmNsaWVudFggLSBjdWFkcm9Qb3MueCAtIDU7CiAgICAgICAgY29uc3QgbnVldm95ID0gZS5jbGllbnRZIC0gY3VhZHJvUG9zLnkgLSA1OwoKICAgICAgICAKICAgICAgICB2YXIgbnVldm94UCA9IE1hdGguZmxvb3IoKG51ZXZveCAqIDEwMCkgLyB0aGlzLnNpemVQYWdpbmEueCk7CiAgICAgICAgdmFyIG51ZXZveVAgPSBNYXRoLmZsb29yKChudWV2b3kgKiAxMDApIC8gdGhpcy5zaXplUGFnaW5hLnkpOwoKICAgICAgICBpZih0aGlzLnBvc2ljaW9uLngrbnVldm94UD4xMDApbnVldm94UD1NYXRoLmZsb29yKDEwMC10aGlzLnBvc2ljaW9uLngpOwogICAgICAgIGlmKHRoaXMucG9zaWNpb24ueStudWV2b3lQPjEwMCludWV2b3lQPU1hdGguZmxvb3IoMTAwLXRoaXMucG9zaWNpb24ueSk7CgoKICAgICAgICB0aGlzLiRzZXQodGhpcy5zaXplLCAieCIsIG51ZXZveFApOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnNpemUsICJ5IiwgbnVldm95UCk7CiAgICAgIH0KICAgIH0sCiAgICBmaW5SZXNpemUoKSB7CiAgICAgIHRoaXMucmVzaXppbmcgPSBmYWxzZTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5wb3NpY2lvbiA9IHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5wb3NpY2lvbjsKICAgIHRoaXMuc2l6ZSA9IHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5zaXplOyAgICAKICB9LAp9Owo="},{"version":3,"sources":["CuadroImagen.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CuadroImagen.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"cuadroImagen\" :style=\"[estiloLayout]\" @click=\"playAudio\" :class=\"{conAudio:esteCuadroImagen.audio}\">\n    <img :src=\"urlImagen\" alt=\"ilustracion\" class=\"imagenContenido\" />\n    <div\n      id=\"resizeHandle\"\n      :style=\"[sizeResizeHandle]\"\n      @mousedown.left=\"iniciarResize\"\n      @mousemove=\"resize\"\n      @mouseup=\"finResize\"\n    >\n      <div id=\"bolitaResizeHandle\"></div>\n    </div>\n\n    <audio type=\"audio/ogg\" v-if=\"esteCuadroImagen.audio\" ref=\"audio\">\n      <source :src=\"urlAudio\" type=\"audio/ogg\" />\n    </audio>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"cuadroImagen\",\n  props: {\n    esteCuadroImagen: Object,\n    idLibro: String,\n    idPagina: String,\n    sizePagina:Object\n  },\n  data() {\n    return {\n      resizing: false,\n\n      posicion: {\n        x: null,\n        y: null,\n      },\n      size: {\n        x: null,\n        y: null,\n      },\n    };\n  },\n  computed: {\n    estiloLayout() {\n      return {\n        top: this.posicion.y + \"%\",\n        left: this.posicion.x + \"%\",\n\n        width: this.size.x + \"%\",\n        height: this.size.y + \"%\",\n      };\n    },\n    urlImagen() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/imagenCuento/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n    sizeResizeHandle() {\n      return {\n        width: this.resizing ? 200 + \"px\" : 10 + \"px\",\n        height: this.resizing ? 200 + \"px\" : 10 + \"px\",\n      };\n    },\n    urlAudio() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/audioImagen/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n  },\n  methods: {\n    playAudio(){\n      if(!this.esteCuadroImagen.audio)return;\n      this.$refs.audio.play();\n    },\n    iniciarResize() {\n      this.resizing = true;\n    },\n    resize(e) {\n      if (this.resizing) {\n\n        var cuadroPos = {\n          x: this.$el.getBoundingClientRect().left,\n          y: this.$el.getBoundingClientRect().top,\n        };\n\n        const nuevox = e.clientX - cuadroPos.x - 5;\n        const nuevoy = e.clientY - cuadroPos.y - 5;\n\n        \n        var nuevoxP = Math.floor((nuevox * 100) / this.sizePagina.x);\n        var nuevoyP = Math.floor((nuevoy * 100) / this.sizePagina.y);\n\n        if(this.posicion.x+nuevoxP>100)nuevoxP=Math.floor(100-this.posicion.x);\n        if(this.posicion.y+nuevoyP>100)nuevoyP=Math.floor(100-this.posicion.y);\n\n\n        this.$set(this.size, \"x\", nuevoxP);\n        this.$set(this.size, \"y\", nuevoyP);\n      }\n    },\n    finResize() {\n      this.resizing = false;\n    },\n  },\n  mounted() {\n    this.posicion = this.esteCuadroImagen.posicion;\n    this.size = this.esteCuadroImagen.size;    \n  },\n};\n</script>\n\n<style scoped>\n.cuadroImagen {\n  position: absolute;\n  border: 1px solid orange;\n}\n\n.imagenContenido {\n  width: 100%;\n  height: 100%;\n}\n#resizeHandle {\n  position: absolute;\n  top: 100%;\n  left: 100%;\n\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n\n  cursor: pointer;\n  border: 1px solid purple;\n}\n#bolitaResizeHandle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: green;\n}\n.conAudio{\n  cursor:pointer;\n}\n</style>"]}]}