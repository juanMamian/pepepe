{"remainingRequest":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/clientesSrc/libro/src/components/CuadroImagen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/src/components/CuadroImagen.vue","mtime":1620421447186},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdxbCB9IGZyb20gImFwb2xsby1zZXJ2ZXItY29yZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCBkZWJvdW5jZSBmcm9tICJkZWJvdW5jZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY3VhZHJvSW1hZ2VuIiwKICBwcm9wczogewogICAgZXN0ZUN1YWRyb0ltYWdlbjogT2JqZWN0LAogICAgaWRMaWJybzogU3RyaW5nLAogICAgaWRQYWdpbmE6IFN0cmluZywKICAgIHNpemVQYWdpbmE6IE9iamVjdCwKICAgIHNlbGVjY2lvbmFkbzogQm9vbGVhbiwKICAgIGFyY2hpdm9DdWFkcm9JbWFnZW5QYWdpbmE6IE9iamVjdCwKICAgIHBhZ2luYVNlbGVjY2lvbmFkYTogQm9vbGVhbiwKICAgIHpCYXNlOk51bWJlciwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwb3NpY2lvblpldGE6MCwKICAgICAgcmVzaXppbmc6IGZhbHNlLAogICAgICBkcmFnZ2luZzogZmFsc2UsCiAgICAgIHBvc2ljaW9uOiB7CiAgICAgICAgeDogbnVsbCwKICAgICAgICB5OiBudWxsLAogICAgICB9LAogICAgICBzaXplOiB7CiAgICAgICAgeDogbnVsbCwKICAgICAgICB5OiBudWxsLAogICAgICB9LAogICAgICB1cGRhdGluZ0luZm86IGZhbHNlLAogICAgICB2ZXJzaW9uSW1hZ2VuOiAwLAogICAgICBpbWFnZW5Mb2FkZWQ6ZmFsc2UsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGVzdGlsb0xheW91dCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3A6IHRoaXMucG9zaWNpb24ueSArICIlIiwKICAgICAgICBsZWZ0OiB0aGlzLnBvc2ljaW9uLnggKyAiJSIsCgogICAgICAgIHdpZHRoOiB0aGlzLnNpemUueCArICIlIiwKICAgICAgICBoZWlnaHQ6IHRoaXMuc2l6ZS55ICsgIiUiLAoKICAgICAgICB6SW5kZXg6dGhpcy5zZWxlY2Npb25hZG8/dGhpcy56QmFzZSt0aGlzLnBvc2ljaW9uWmV0YSsxMDA6dGhpcy56QmFzZSt0aGlzLnBvc2ljaW9uWmV0YSwKCiAgICAgIH07CiAgICB9LAogICAgdXJsSW1hZ2VuKCkgewogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuc2VydmVyVXJsICsKICAgICAgICAiL2FwaUN1ZW50b3MvaW1hZ2VuQ3VlbnRvLyIgKwogICAgICAgIHRoaXMuaWRMaWJybyArCiAgICAgICAgIi8iICsKICAgICAgICB0aGlzLmlkUGFnaW5hICsKICAgICAgICAiLyIgKwogICAgICAgIHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5pZAogICAgICApOwogICAgfSwKICAgIHNpemVSZXNpemVIYW5kbGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IHRoaXMucmVzaXppbmcgPyAyMDAgKyAicHgiIDogMTAgKyAicHgiLAogICAgICAgIGhlaWdodDogdGhpcy5yZXNpemluZyA/IDIwMCArICJweCIgOiAxMCArICJweCIsCiAgICAgIH07CiAgICB9LAogICAgc2l6ZURyYWdIYW5kbGUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IHRoaXMuZHJhZ2dpbmcgPyAyMDAgKyAicHgiIDogMTAgKyAicHgiLAogICAgICAgIGhlaWdodDogdGhpcy5kcmFnZ2luZyA/IDIwMCArICJweCIgOiAxMCArICJweCIsCiAgICAgIH07CiAgICB9LAogICAgdXJsQXVkaW8oKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5zZXJ2ZXJVcmwgKwogICAgICAgICIvYXBpQ3VlbnRvcy9hdWRpb0ltYWdlbi8iICsKICAgICAgICB0aGlzLmlkTGlicm8gKwogICAgICAgICIvIiArCiAgICAgICAgdGhpcy5pZFBhZ2luYSArCiAgICAgICAgIi8iICsKICAgICAgICB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uaWQKICAgICAgKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBwbGF5QXVkaW8oKSB7CiAgICAgIGlmICghdGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmF1ZGlvKSByZXR1cm47CiAgICAgIHRoaXMuJHJlZnMuYXVkaW8ucGxheSgpOwogICAgfSwKICAgIGluaWNpYXJSZXNpemUoKSB7CiAgICAgIHRoaXMucmVzaXppbmcgPSB0cnVlOwogICAgfSwKICAgIHJlc2l6ZShlKSB7CiAgICAgIGlmICh0aGlzLnJlc2l6aW5nKSB7CiAgICAgICAgdmFyIGN1YWRyb1BvcyA9IHsKICAgICAgICAgIHg6IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQsCiAgICAgICAgICB5OiB0aGlzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsCiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgbnVldm94ID0gZS5jbGllbnRYIC0gY3VhZHJvUG9zLnggLSA1OwogICAgICAgIGNvbnN0IG51ZXZveSA9IGUuY2xpZW50WSAtIGN1YWRyb1Bvcy55IC0gNTsKCiAgICAgICAgdmFyIG51ZXZveFAgPSBNYXRoLmZsb29yKChudWV2b3ggKiAxMDApIC8gdGhpcy5zaXplUGFnaW5hLngpOwogICAgICAgIHZhciBudWV2b3lQID0gTWF0aC5mbG9vcigobnVldm95ICogMTAwKSAvIHRoaXMuc2l6ZVBhZ2luYS55KTsKCiAgICAgICAgaWYgKHRoaXMucG9zaWNpb24ueCArIG51ZXZveFAgPiAxMDApCiAgICAgICAgICBudWV2b3hQID0gTWF0aC5mbG9vcigxMDAgLSB0aGlzLnBvc2ljaW9uLngpOwogICAgICAgIGlmICh0aGlzLnBvc2ljaW9uLnkgKyBudWV2b3lQID4gMTAwKQogICAgICAgICAgbnVldm95UCA9IE1hdGguZmxvb3IoMTAwIC0gdGhpcy5wb3NpY2lvbi55KTsKCiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2l6ZSwgIngiLCBudWV2b3hQKTsKICAgICAgICB0aGlzLiRzZXQodGhpcy5zaXplLCAieSIsIG51ZXZveVApOwogICAgICB9CiAgICB9LAogICAgZmluUmVzaXplKCkgewogICAgICB0aGlzLnJlc2l6aW5nID0gZmFsc2U7CgogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsYAogICAgICAgICAgbXV0YXRpb24oCiAgICAgICAgICAgICRpZExpYnJvOiBJRCEKICAgICAgICAgICAgJGlkUGFnaW5hOiBJRCEKICAgICAgICAgICAgJGlkQ3VhZHJvSW1hZ2VuOiBJRCEKICAgICAgICAgICAgJG51ZXZvU2l6ZTogQ29vcmRzSW5wdXQhCiAgICAgICAgICApIHsKICAgICAgICAgICAgdXBkYXRlU2l6ZUN1YWRyb0ltYWdlbigKICAgICAgICAgICAgICBpZExpYnJvOiAkaWRMaWJybwogICAgICAgICAgICAgIGlkUGFnaW5hOiAkaWRQYWdpbmEKICAgICAgICAgICAgICBpZEN1YWRyb0ltYWdlbjogJGlkQ3VhZHJvSW1hZ2VuCiAgICAgICAgICAgICAgbnVldm9TaXplOiAkbnVldm9TaXplCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgc2l6ZSB7CiAgICAgICAgICAgICAgICB4CiAgICAgICAgICAgICAgICB5CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgYCwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkTGlicm86IHRoaXMuaWRMaWJybywKICAgICAgICAgIGlkUGFnaW5hOiB0aGlzLmlkUGFnaW5hLAogICAgICAgICAgaWRDdWFkcm9JbWFnZW46IHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5pZCwKICAgICAgICAgIG51ZXZvU2l6ZTogdGhpcy5zaXplLAogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSwKCiAgICBpbmljaWFyRHJhZygpIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IHRydWU7CiAgICB9LAogICAgZHJhZyhlKSB7CiAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSB7CiAgICAgICAgY29uc29sZS5sb2coYERyYWdnaW5nYCk7CiAgICAgICAgY29uc3QgZWxlbVBhZ2luYSA9IHRoaXMuJGVsLmNsb3Nlc3QoIi5wYWdpbmEiKTsKICAgICAgICBjb25zdCBwb3NQYWdpbmEgPSBlbGVtUGFnaW5hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHZhciBwb3NNb3VzZSA9IHsKICAgICAgICAgIHg6IGUuY2xpZW50WCAtIHBvc1BhZ2luYS5sZWZ0LAogICAgICAgICAgeTogZS5jbGllbnRZIC0gcG9zUGFnaW5hLnRvcCwKICAgICAgICB9OwogICAgICAgIHZhciBudWV2YVBvcyA9IHsKICAgICAgICAgIHg6IHBvc01vdXNlLnggLSB0aGlzLiRlbC5vZmZzZXRXaWR0aCAvIDIsCiAgICAgICAgICB5OiBwb3NNb3VzZS55ICsgMjAsCiAgICAgICAgfTsKCiAgICAgICAgaWYgKG51ZXZhUG9zLnggKyB0aGlzLiRlbC5vZmZzZXRXaWR0aCA+IGVsZW1QYWdpbmEub2Zmc2V0V2lkdGgpIHsKICAgICAgICAgIG51ZXZhUG9zLnggPSBlbGVtUGFnaW5hLm9mZnNldFdpZHRoIC0gdGhpcy4kZWwub2Zmc2V0V2lkdGg7CiAgICAgICAgfQogICAgICAgIGlmIChudWV2YVBvcy54IDwgMCkgewogICAgICAgICAgbnVldmFQb3MueCA9IDA7CiAgICAgICAgfQoKICAgICAgICBpZiAobnVldmFQb3MueSArIHRoaXMuJGVsLm9mZnNldEhlaWdodCA+IGVsZW1QYWdpbmEub2Zmc2V0SGVpZ2h0KSB7CiAgICAgICAgICBudWV2YVBvcy55ID0gZWxlbVBhZ2luYS5vZmZzZXRIZWlnaHQgLSB0aGlzLiRlbC5vZmZzZXRIZWlnaHQ7CiAgICAgICAgfQogICAgICAgIGlmIChudWV2YVBvcy55IDwgMCkgewogICAgICAgICAgbnVldmFQb3MueSA9IDA7CiAgICAgICAgfQoKICAgICAgICB2YXIgbnVldmFQb3NQID0gewogICAgICAgICAgeDogTWF0aC5yb3VuZCgobnVldmFQb3MueCAqIDEwMCkgLyBlbGVtUGFnaW5hLm9mZnNldFdpZHRoKSwKICAgICAgICAgIHk6IE1hdGgucm91bmQoKG51ZXZhUG9zLnkgKiAxMDApIC8gZWxlbVBhZ2luYS5vZmZzZXRIZWlnaHQpLAogICAgICAgIH07CgogICAgICAgIHRoaXMucG9zaWNpb24gPSBudWV2YVBvc1A7CiAgICAgIH0KICAgIH0sCiAgICBmaW5EcmFnKCkgewogICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICBtdXRhdGlvbigKICAgICAgICAgICAgJGlkTGlicm86IElEIQogICAgICAgICAgICAkaWRQYWdpbmE6IElEIQogICAgICAgICAgICAkaWRDdWFkcm9JbWFnZW46IElEIQogICAgICAgICAgICAkbnVldm9Qb3NpY2lvbjogQ29vcmRzSW5wdXQhCiAgICAgICAgICApIHsKICAgICAgICAgICAgdXBkYXRlUG9zaWNpb25DdWFkcm9JbWFnZW4oCiAgICAgICAgICAgICAgaWRMaWJybzogJGlkTGlicm8KICAgICAgICAgICAgICBpZFBhZ2luYTogJGlkUGFnaW5hCiAgICAgICAgICAgICAgaWRDdWFkcm9JbWFnZW46ICRpZEN1YWRyb0ltYWdlbgogICAgICAgICAgICAgIG51ZXZvUG9zaWNpb246ICRudWV2b1Bvc2ljaW9uCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgcG9zaWNpb24gewogICAgICAgICAgICAgICAgeAogICAgICAgICAgICAgICAgeQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIGAsCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZExpYnJvOiB0aGlzLmlkTGlicm8sCiAgICAgICAgICBpZFBhZ2luYTogdGhpcy5pZFBhZ2luYSwKICAgICAgICAgIGlkQ3VhZHJvSW1hZ2VuOiB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uaWQsCiAgICAgICAgICBudWV2b1Bvc2ljaW9uOiB0aGlzLnBvc2ljaW9uLAogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSwKCiAgICB1cGxvYWRBcmNoaXZvQ3VhZHJvSW1hZ2VuKCkgewogICAgICB2YXIgZGF0b3MgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgaWYgKCF0aGlzLiRyZWZzLmlucHV0QXJjaGl2b0ltYWdlbi52YWx1ZSkgewogICAgICAgIGNvbnNvbGUubG9nKGBObyBoYWLDrWEgYXJjaGl2byBzZWxlY2Npb25hZG9gKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZGF0b3MuYXBwZW5kKCJpZExpYnJvIiwgdGhpcy5pZExpYnJvKTsKICAgICAgZGF0b3MuYXBwZW5kKCJpZFBhZ2luYSIsIHRoaXMuaWRQYWdpbmEpOwogICAgICBkYXRvcy5hcHBlbmQoImlkQ3VhZHJvSW1hZ2VuIiwgdGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmlkKTsKICAgICAgZGF0b3MuYXBwZW5kKCJpbWFnZW4iLCB0aGlzLiRyZWZzLmlucHV0QXJjaGl2b0ltYWdlbi5maWxlc1swXSk7CgogICAgICBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiB0aGlzLnNlcnZlclVybCArICIvYXBpQ3VlbnRvcy9zdWJpckFyY2hpdm9DdWFkcm9JbWFnZW4iLAogICAgICAgIGRhdGE6IGRhdG9zLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsCiAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiwKICAgICAgICB9LAogICAgICB9KQogICAgICAgIC50aGVuKCh7IHJlcyB9KSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgUmVzdWx0YWRvIGRlIHVwbG9hZCBhcmNoaXZvOiAke3Jlc31gKTsKICAgICAgICAgIHRoaXMudmVyc2lvbkltYWdlbisrOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIHVwbG9hZGluZyBhcmNoaXZvIGRlIGN1YWRyb0ltYWdlbi4gRTogJHtlcnJvcn1gKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBndWFyZGFyUG9zaWNpb25aZXRhOiBkZWJvdW5jZShmdW5jdGlvbigpewogICAgICBpZih0aGlzLnBvc2ljaW9uWmV0YT09dGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLnBvc2ljaW9uWmV0YSlyZXR1cm47CiAgICAgIGNvbnNvbGUubG9nKGBHdWFyZGFuZG8gcG9zaWNpw7NuIHpldGFgKTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246Z3FsYAogICAgICAgICAgbXV0YXRpb24oJGlkTGlicm86SUQhLCAkaWRQYWdpbmE6SUQhLCAkaWRDdWFkcm9JbWFnZW46SUQhLCAkbnVldm9Qb3NpY2lvblo6SW50ISl7CiAgICAgICAgICAgIHNldFBvc2ljaW9uWkN1YWRyb0ltYWdlbihpZExpYnJvOiRpZExpYnJvLCBpZFBhZ2luYTokaWRQYWdpbmEsIGlkQ3VhZHJvSW1hZ2VuOiRpZEN1YWRyb0ltYWdlbiwgbnVldm9Qb3NpY2lvblo6JG51ZXZvUG9zaWNpb25aKXsKICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgIHBvc2ljaW9uWmV0YQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgYCwKICAgICAgICB2YXJpYWJsZXM6ewogICAgICAgICAgaWRMaWJybzp0aGlzLmlkTGlicm8sCiAgICAgICAgICBpZFBhZ2luYTp0aGlzLmlkUGFnaW5hLAogICAgICAgICAgaWRDdWFkcm9JbWFnZW46dGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmlkLAogICAgICAgICAgbnVldm9Qb3NpY2lvblo6dGhpcy5wb3NpY2lvblpldGEsCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sMzAwMCksCgogICAgZWxpbWluYXJzZSgpIHsKICAgICAgaWYgKAogICAgICAgICFjb25maXJtKAogICAgICAgICAgIkVsaW1pbmFuZG8gY3VhZHJvIGRlIGltYWdlbi4gRXN0YSBvcGVyYWNpw7NuIG5vIHNlIHB1ZWRlIGRlc2hhY2VyLiDCv0NvbnRpbnVhcj8iCiAgICAgICAgKQogICAgICApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy51cGRhdGluZ0luZm8gPSB0cnVlOwogICAgICBjb25zb2xlLmxvZyhgRWxpbWluYW5kbyB1biBjdWFkcm8gZGUgaW1hZ2VuYCk7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24oJGlkTGlicm86IElEISwgJGlkUGFnaW5hOiBJRCEsICRpZEN1YWRyb0ltYWdlbjogSUQhKSB7CiAgICAgICAgICAgICAgZWxpbWluYXJDdWFkcm9JbWFnZW5MaWJybygKICAgICAgICAgICAgICAgIGlkTGlicm86ICRpZExpYnJvCiAgICAgICAgICAgICAgICBpZFBhZ2luYTogJGlkUGFnaW5hCiAgICAgICAgICAgICAgICBpZEN1YWRyb0ltYWdlbjogJGlkQ3VhZHJvSW1hZ2VuCiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICBgLAogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIGlkTGlicm86IHRoaXMuaWRMaWJybywKICAgICAgICAgICAgaWRQYWdpbmE6IHRoaXMuaWRQYWdpbmEsCiAgICAgICAgICAgIGlkQ3VhZHJvSW1hZ2VuOiB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uaWQsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgZGF0YTogeyBlbGltaW5hckN1YWRyb0ltYWdlbkxpYnJvIH0gfSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYFJlc3VsdGFkbzogJHtlbGltaW5hckN1YWRyb0ltYWdlbkxpYnJvfWApOwogICAgICAgICAgaWYgKGVsaW1pbmFyQ3VhZHJvSW1hZ2VuTGlicm8pIHsKICAgICAgICAgICAgdGhpcy4kZW1pdCgibWVFbGltaW5lIik7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IuIEU6ICR7ZXJyb3J9YCk7CiAgICAgICAgICB0aGlzLnVwZGF0aW5nSW5mbyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICB9LAogIHdhdGNoOnsKICAgIHBvc2ljaW9uWmV0YSgpewogICAgICBjb25zb2xlLmxvZyhgQ2FtYmlvIGRlIHBvc2ljaW9uIHpldGFgKTsKICAgICAgdGhpcy5ndWFyZGFyUG9zaWNpb25aZXRhKCk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc29sZS5sb2coYE1vbnRhZG9gKTsKICAgIHRoaXMuJHNldCh0aGlzLnBvc2ljaW9uLCAieCIsIHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5wb3NpY2lvbi54KTsKICAgIHRoaXMuJHNldCh0aGlzLnBvc2ljaW9uLCAieSIsIHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5wb3NpY2lvbi55KTsKCiAgICB0aGlzLiRzZXQodGhpcy5zaXplLCAieCIsIHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5zaXplLngpOwogICAgdGhpcy4kc2V0KHRoaXMuc2l6ZSwgInkiLCB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uc2l6ZS55KTsKCiAgICB0aGlzLnBvc2ljaW9uWmV0YT10aGlzLmVzdGVDdWFkcm9JbWFnZW4ucG9zaWNpb25aZXRhOwoKICAgIGlmICh0aGlzLmVzdGVDdWFkcm9JbWFnZW4uc2luQXJjaGl2bykgewogICAgICBjb25zb2xlLmxvZyhgQWJyaWVuZG8gZWwgaW5wdXQgZGUgYXJjaGl2b2ApOwogICAgICB0aGlzLiRyZWZzLmlucHV0QXJjaGl2b0ltYWdlbi5jbGljaygpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["CuadroImagen.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CuadroImagen.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    class=\"cuadroImagen\"\n    :style=\"[estiloLayout]\"\n    @click=\"playAudio\"\n    :class=\"{\n      conAudio: esteCuadroImagen.audio,\n      deshabilitado: updatingInfo,\n      enPaginaSeleccionada: paginaSeleccionada,\n    }\"\n  >\n    <img\n      :src=\"urlImagen + '?v=' + versionImagen\"\n      alt=\"ilustracion\"\n      class=\"imagenContenido\"\n      @load=\"imagenLoaded=true\"\n    />\n\n    <img src=\"@/assets/iconos/loading.png\" alt=\"Cargando\" class=\"simboloLoading\" v-if=\"!imagenLoaded\">\n\n    <div id=\"zHandlers\" v-show=\"seleccionado\">\n      <div class=\"zHandler\" id=\"bSendBack\" title=\"Mover hacia atrás\" @click=\"posicionZeta=posicionZeta>0?posicionZeta-1:0\"></div>\n      <div class=\"zHandler\" id=\"bBringFront\" title=\"Mover hacia adelante\" @click=\"posicionZeta++\"></div>\n    </div>\n\n    <div\n      id=\"dragHandle\"\n      v-show=\"seleccionado\"\n      :style=\"sizeDragHandle\"\n      @mousedown.left.stop=\"iniciarDrag\"\n      @mousemove=\"drag\"\n      @mouseup=\"finDrag\"\n    >\n      <div id=\"bolitaDragHandle\" :class=\"{enDuda:posicionZeta!=esteCuadroImagen.posicionZeta}\" title=\"arrastrar\">{{posicionZeta}}</div>\n    </div>\n\n    <div\n      id=\"resizeHandle\"\n      :style=\"[sizeResizeHandle]\"\n      v-show=\"seleccionado\"\n      @mousedown.left=\"iniciarResize\"\n      @mousemove=\"resize\"\n      @mouseup=\"finResize\"\n    >\n      <div id=\"bolitaResizeHandle\"></div>\n    </div>\n\n    <img\n      src=\"@/assets/iconos/delete.png\"\n      alt=\"Eliminar\"\n      title=\"Eliminar cuadro de imagen\"\n      id=\"bEliminarCuadroImagen\"\n      v-show=\"seleccionado\"\n      @click=\"eliminarse\"\n    />\n\n    <input\n      type=\"file\"\n      id=\"inputArchivoImagen\"\n      style=\"display: none\"\n      ref=\"inputArchivoImagen\"\n      @change=\"uploadArchivoCuadroImagen\"\n    />\n\n    <audio type=\"audio/ogg\" v-if=\"esteCuadroImagen.audio\" ref=\"audio\">\n      <source :src=\"urlAudio\" type=\"audio/ogg\" />\n    </audio>\n  </div>\n</template>\n\n<script>\nimport { gql } from \"apollo-server-core\";\nimport axios from \"axios\";\nimport debounce from \"debounce\";\nexport default {\n  name: \"cuadroImagen\",\n  props: {\n    esteCuadroImagen: Object,\n    idLibro: String,\n    idPagina: String,\n    sizePagina: Object,\n    seleccionado: Boolean,\n    archivoCuadroImagenPagina: Object,\n    paginaSeleccionada: Boolean,\n    zBase:Number,\n  },\n  data() {\n    return {\n      posicionZeta:0,\n      resizing: false,\n      dragging: false,\n      posicion: {\n        x: null,\n        y: null,\n      },\n      size: {\n        x: null,\n        y: null,\n      },\n      updatingInfo: false,\n      versionImagen: 0,\n      imagenLoaded:false,\n    };\n  },\n  computed: {\n    estiloLayout() {\n      return {\n        top: this.posicion.y + \"%\",\n        left: this.posicion.x + \"%\",\n\n        width: this.size.x + \"%\",\n        height: this.size.y + \"%\",\n\n        zIndex:this.seleccionado?this.zBase+this.posicionZeta+100:this.zBase+this.posicionZeta,\n\n      };\n    },\n    urlImagen() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/imagenCuento/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n    sizeResizeHandle() {\n      return {\n        width: this.resizing ? 200 + \"px\" : 10 + \"px\",\n        height: this.resizing ? 200 + \"px\" : 10 + \"px\",\n      };\n    },\n    sizeDragHandle() {\n      return {\n        width: this.dragging ? 200 + \"px\" : 10 + \"px\",\n        height: this.dragging ? 200 + \"px\" : 10 + \"px\",\n      };\n    },\n    urlAudio() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/audioImagen/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n  },\n  methods: {\n    playAudio() {\n      if (!this.esteCuadroImagen.audio) return;\n      this.$refs.audio.play();\n    },\n    iniciarResize() {\n      this.resizing = true;\n    },\n    resize(e) {\n      if (this.resizing) {\n        var cuadroPos = {\n          x: this.$el.getBoundingClientRect().left,\n          y: this.$el.getBoundingClientRect().top,\n        };\n\n        const nuevox = e.clientX - cuadroPos.x - 5;\n        const nuevoy = e.clientY - cuadroPos.y - 5;\n\n        var nuevoxP = Math.floor((nuevox * 100) / this.sizePagina.x);\n        var nuevoyP = Math.floor((nuevoy * 100) / this.sizePagina.y);\n\n        if (this.posicion.x + nuevoxP > 100)\n          nuevoxP = Math.floor(100 - this.posicion.x);\n        if (this.posicion.y + nuevoyP > 100)\n          nuevoyP = Math.floor(100 - this.posicion.y);\n\n        this.$set(this.size, \"x\", nuevoxP);\n        this.$set(this.size, \"y\", nuevoyP);\n      }\n    },\n    finResize() {\n      this.resizing = false;\n\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation(\n            $idLibro: ID!\n            $idPagina: ID!\n            $idCuadroImagen: ID!\n            $nuevoSize: CoordsInput!\n          ) {\n            updateSizeCuadroImagen(\n              idLibro: $idLibro\n              idPagina: $idPagina\n              idCuadroImagen: $idCuadroImagen\n              nuevoSize: $nuevoSize\n            ) {\n              id\n              size {\n                x\n                y\n              }\n            }\n          }\n        `,\n        variables: {\n          idLibro: this.idLibro,\n          idPagina: this.idPagina,\n          idCuadroImagen: this.esteCuadroImagen.id,\n          nuevoSize: this.size,\n        },\n      });\n    },\n\n    iniciarDrag() {\n      this.dragging = true;\n    },\n    drag(e) {\n      if (this.dragging) {\n        console.log(`Dragging`);\n        const elemPagina = this.$el.closest(\".pagina\");\n        const posPagina = elemPagina.getBoundingClientRect();\n        var posMouse = {\n          x: e.clientX - posPagina.left,\n          y: e.clientY - posPagina.top,\n        };\n        var nuevaPos = {\n          x: posMouse.x - this.$el.offsetWidth / 2,\n          y: posMouse.y + 20,\n        };\n\n        if (nuevaPos.x + this.$el.offsetWidth > elemPagina.offsetWidth) {\n          nuevaPos.x = elemPagina.offsetWidth - this.$el.offsetWidth;\n        }\n        if (nuevaPos.x < 0) {\n          nuevaPos.x = 0;\n        }\n\n        if (nuevaPos.y + this.$el.offsetHeight > elemPagina.offsetHeight) {\n          nuevaPos.y = elemPagina.offsetHeight - this.$el.offsetHeight;\n        }\n        if (nuevaPos.y < 0) {\n          nuevaPos.y = 0;\n        }\n\n        var nuevaPosP = {\n          x: Math.round((nuevaPos.x * 100) / elemPagina.offsetWidth),\n          y: Math.round((nuevaPos.y * 100) / elemPagina.offsetHeight),\n        };\n\n        this.posicion = nuevaPosP;\n      }\n    },\n    finDrag() {\n      this.dragging = false;\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation(\n            $idLibro: ID!\n            $idPagina: ID!\n            $idCuadroImagen: ID!\n            $nuevoPosicion: CoordsInput!\n          ) {\n            updatePosicionCuadroImagen(\n              idLibro: $idLibro\n              idPagina: $idPagina\n              idCuadroImagen: $idCuadroImagen\n              nuevoPosicion: $nuevoPosicion\n            ) {\n              id\n              posicion {\n                x\n                y\n              }\n            }\n          }\n        `,\n        variables: {\n          idLibro: this.idLibro,\n          idPagina: this.idPagina,\n          idCuadroImagen: this.esteCuadroImagen.id,\n          nuevoPosicion: this.posicion,\n        },\n      });\n    },\n\n    uploadArchivoCuadroImagen() {\n      var datos = new FormData();\n      if (!this.$refs.inputArchivoImagen.value) {\n        console.log(`No había archivo seleccionado`);\n        return;\n      }\n      datos.append(\"idLibro\", this.idLibro);\n      datos.append(\"idPagina\", this.idPagina);\n      datos.append(\"idCuadroImagen\", this.esteCuadroImagen.id);\n      datos.append(\"imagen\", this.$refs.inputArchivoImagen.files[0]);\n\n      axios({\n        method: \"post\",\n        url: this.serverUrl + \"/apiCuentos/subirArchivoCuadroImagen\",\n        data: datos,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: \"Bearer \" + this.$store.state.token,\n        },\n      })\n        .then(({ res }) => {\n          console.log(`Resultado de upload archivo: ${res}`);\n          this.versionImagen++;\n        })\n        .catch((error) => {\n          console.log(`Error uploading archivo de cuadroImagen. E: ${error}`);\n        });\n    },\n    guardarPosicionZeta: debounce(function(){\n      if(this.posicionZeta==this.esteCuadroImagen.posicionZeta)return;\n      console.log(`Guardando posición zeta`);\n      this.$apollo.mutate({\n        mutation:gql`\n          mutation($idLibro:ID!, $idPagina:ID!, $idCuadroImagen:ID!, $nuevoPosicionZ:Int!){\n            setPosicionZCuadroImagen(idLibro:$idLibro, idPagina:$idPagina, idCuadroImagen:$idCuadroImagen, nuevoPosicionZ:$nuevoPosicionZ){\n              id\n              posicionZeta\n            }\n          }\n        `,\n        variables:{\n          idLibro:this.idLibro,\n          idPagina:this.idPagina,\n          idCuadroImagen:this.esteCuadroImagen.id,\n          nuevoPosicionZ:this.posicionZeta,\n        }\n      });\n    },3000),\n\n    eliminarse() {\n      if (\n        !confirm(\n          \"Eliminando cuadro de imagen. Esta operación no se puede deshacer. ¿Continuar?\"\n        )\n      ) {\n        return;\n      }\n      this.updatingInfo = true;\n      console.log(`Eliminando un cuadro de imagen`);\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation($idLibro: ID!, $idPagina: ID!, $idCuadroImagen: ID!) {\n              eliminarCuadroImagenLibro(\n                idLibro: $idLibro\n                idPagina: $idPagina\n                idCuadroImagen: $idCuadroImagen\n              )\n            }\n          `,\n          variables: {\n            idLibro: this.idLibro,\n            idPagina: this.idPagina,\n            idCuadroImagen: this.esteCuadroImagen.id,\n          },\n        })\n        .then(({ data: { eliminarCuadroImagenLibro } }) => {\n          console.log(`Resultado: ${eliminarCuadroImagenLibro}`);\n          if (eliminarCuadroImagenLibro) {\n            this.$emit(\"meElimine\");\n          }\n        })\n        .catch((error) => {\n          console.log(`Error. E: ${error}`);\n          this.updatingInfo = false;\n        });\n    },\n  },\n  watch:{\n    posicionZeta(){\n      console.log(`Cambio de posicion zeta`);\n      this.guardarPosicionZeta();\n    }\n  },\n  mounted() {\n    console.log(`Montado`);\n    this.$set(this.posicion, \"x\", this.esteCuadroImagen.posicion.x);\n    this.$set(this.posicion, \"y\", this.esteCuadroImagen.posicion.y);\n\n    this.$set(this.size, \"x\", this.esteCuadroImagen.size.x);\n    this.$set(this.size, \"y\", this.esteCuadroImagen.size.y);\n\n    this.posicionZeta=this.esteCuadroImagen.posicionZeta;\n\n    if (this.esteCuadroImagen.sinArchivo) {\n      console.log(`Abriendo el input de archivo`);\n      this.$refs.inputArchivoImagen.click();\n    }\n  },\n};\n</script>\n\n<style scoped>\n.cuadroImagen {\n  position: absolute;\n  border-width: 1px;\n  border-style: solid;\n}\n.cuadroImagen:not(.enPaginaSeleccionada) {\n  border-color: transparent;\n}\n.enPaginaSeleccionada {\n  border-color: purple;\n}\n.imagenContenido {\n  width: 100%;\n  height: 100%;\n  z-index: 0;\n}\n#resizeHandle {\n  position: absolute;\n  top: 100%;\n  left: 100%;\n\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n\n  cursor: pointer;\n  border: 1px solid purple;\n}\n#bolitaResizeHandle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: green;\n}\n\n#dragHandle {\n  position: absolute;\n  top: -20px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 50%;\n  cursor: pointer;\n  border: 1px solid purple;\n}\n#bolitaDragHandle {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: green;\n  text-align: center;\n}\n.conAudio {\n  cursor: pointer;\n}\n\n#bEliminarCuadroImagen {\n  width: 30px;\n  height: 30px;\n  padding: 5px;\n  border-radius: 50%;\n  cursor: pointer;\n  background-color: rgba(128, 0, 128, 0.212);\n  position: absolute;\n  top: -40px;\n  right: -35px;\n}\n#bEliminarCuadroImagen:hover {\n  background-color: rgba(128, 0, 128, 0.637);\n}\n\n#zHandlers{\n  position: absolute;\n  top:-33px;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: rgba(104, 7, 104, 0.534);\n  border-radius: 13px;\n  padding: 5px 10px;\n  display: grid;\n  grid-template-columns: 16px 30px 16px;\n}\n\n.zHandler{\n  border-radius: 50%;\n  width: 15px;\n  height: 15px;\n  cursor: pointer;    \n}\n#bSendBack{\n  background-color: rgba(8, 83, 8, 0.377);\n  grid-column: 1/2;\n}\n#bSendBack:hover{\n  background-color: rgba(8, 83, 8, 0.61); \n}\n#bBringFront{\n  background-color: rgb(8, 83, 8);\n  grid-column: 3/4;\n}\n#bBringFront:hover{\n  background-color: rgb(4, 56, 4);\n\n}\n.enDuda{\n  color: purple;\n}\n\n\n.simboloLoading{\n  width: 50px;\n  height: 50px;\n  \n  position: absolute;\n  top:50%;\n  left:50%;\n  transform: translate(-50% -50%);\n  z-index: -1;\n}\n</style>"]}]}