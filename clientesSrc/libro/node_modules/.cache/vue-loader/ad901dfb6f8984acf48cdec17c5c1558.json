{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/libro/src/components/foros/Respuesta.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/components/foros/Respuesta.vue","mtime":1621134760648},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgSW50ZXJwb2xhY2lvbiBmcm9tICIuL0ludGVycG9sYWNpb24udnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgSW50ZXJwb2xhY2lvbiB9LAogIG5hbWU6ICJSZXNwdWVzdGEiLAogIHByb3BzOiB7CiAgICBlc3RhUmVzcHVlc3RhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgIH0sCiAgICBpZENvbnZlcnNhY2lvbjogU3RyaW5nLAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZlY2hhRm9ybWF0ZWFkYTogZnVuY3Rpb24gKCkgewogICAgICBsZXQgbGFGZWNoYSA9IG5ldyBEYXRlKHRoaXMuZXN0YVJlc3B1ZXN0YS5mZWNoYSkudG9TdHJpbmcoKTsKICAgICAgbGV0IGluZGV4UGFyZW50ZXNpcyA9IGxhRmVjaGEuaW5kZXhPZigiKCIpOwogICAgICBsZXQgZmVjaGFDb3J0YSA9IGxhRmVjaGEuc3Vic3RyKDAsIGluZGV4UGFyZW50ZXNpcyk7CiAgICAgIGxldCBpbmRleEdNVCA9IGZlY2hhQ29ydGEuaW5kZXhPZigiR01UIik7CiAgICAgIGlmIChpbmRleEdNVCA+IC0xKSB7CiAgICAgICAgZmVjaGFDb3J0YSA9IGZlY2hhQ29ydGEuc3Vic3RyKDAsIGluZGV4R01UKTsKICAgICAgfQogICAgICByZXR1cm4gZmVjaGFDb3J0YTsKICAgIH0sCiAgICB1c3VhcmlvQXV0b3I6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMudXN1YXJpby5pZCA9PSB0aGlzLmVzdGFSZXNwdWVzdGEuaW5mb0F1dG9yLmlkKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGVtaXRpclNvbGljaXR1ZENpdGEoKXsKICAgICAgdmFyIHF1b3RlPXsKICAgICAgICBtZW5zYWplOiB0aGlzLmVzdGFSZXNwdWVzdGEubWVuc2FqZSwKICAgICAgICBpbnRlcnBvbGFjaW9uZXM6dGhpcy5lc3RhUmVzcHVlc3RhLmludGVycG9sYWNpb25lcywKICAgICAgICBpbmZvQXV0b3I6dGhpcy5lc3RhUmVzcHVlc3RhLmluZm9BdXRvciwKICAgICAgICBmZWNoYTp0aGlzLmVzdGFSZXNwdWVzdGEuZmVjaGEgCiAgICAgIH0KCiAgICAgIHF1b3RlLmludGVycG9sYWNpb25lcy5mb3JFYWNoKGludGVycG9sYWNpb249PnsKICAgICAgICBkZWxldGUgaW50ZXJwb2xhY2lvbi5fX3R5cGVuYW1lOwogICAgICB9KQogICAgICBkZWxldGUgcXVvdGUuaW5mb0F1dG9yLl9fdHlwZW5hbWU7CgogICAgICB0aGlzLiRlbWl0KCdtZVF1aWVyZW5DaXRhcicsIHF1b3RlKQogICAgfSwKICAgIGVsaW1pbmFyc2UoKSB7CiAgICAgIGxldCBkaXMgPSB0aGlzOwogICAgICBpZiAoIWNvbmZpcm0oIkVsaW1pbmFuZG8gcmVzcHVlc3RhIMK/Q29udGludWFyPyIpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICBtdXRhdGlvbigkaWRSZXNwdWVzdGE6IElEISwgJGlkQ29udmVyc2FjaW9uOiBJRCEpIHsKICAgICAgICAgICAgZWxpbWluYXJSZXNwdWVzdGEoCiAgICAgICAgICAgICAgaWRSZXNwdWVzdGE6ICRpZFJlc3B1ZXN0YQogICAgICAgICAgICAgIGlkQ29udmVyc2FjaW9uOiAkaWRDb252ZXJzYWNpb24KICAgICAgICAgICAgKQogICAgICAgICAgfQogICAgICAgIGAsCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZFJlc3B1ZXN0YTogdGhpcy5lc3RhUmVzcHVlc3RhLmlkLAogICAgICAgICAgaWRDb252ZXJzYWNpb246IHRoaXMuaWRDb252ZXJzYWNpb24sCiAgICAgICAgfSwKICAgICAgICB1cGRhdGUoc3RvcmUsIHsgZGF0YTogeyBlbGltaW5hclJlc3B1ZXN0YSB9IH0pIHsKICAgICAgICAgIGlmIChlbGltaW5hclJlc3B1ZXN0YSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgUmVzcHVlc3RhIGVsaW1pbmFkYWApOwogICAgICAgICAgICBkaXMuJGVtaXQoIm1lRWxpbWluZSIpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Respuesta.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Respuesta.vue","sourceRoot":"src/components/foros","sourcesContent":["<template>\n  <div class=\"respuesta\">\n    <div class=\"infoRespuesta\">{{ fechaFormateada }}</div>\n    <img\n      :src=\"\n        this.serverUrl +\n        '/api/usuarios/fotografias/' +\n        estaRespuesta.infoAutor.id\n      \"\n      :alt=\"estaRespuesta.infoAutor.nombre\"\n      class=\"caritaAutor\"\n    />\n    <div id=\"zonaCuerpoMensaje\">\n      <div class=\"mensajeRespuesta\">\n        {{ estaRespuesta.mensaje }}\n      </div>\n      <interpolacion\n        v-for=\"interpolacion of estaRespuesta.interpolaciones\"\n        :key=\"interpolacion.id\"\n        :estaInterpolacion=\"interpolacion\"\n      />\n    </div>\n\n    <div\n      id=\"archivo\"\n      v-if=\"\n        estaRespuesta.archivo && estaRespuesta.archivo.googleDriveDirectLink\n      \"\n    >\n      <a :href=\"estaRespuesta.archivo.googleDriveDirectLink\">\n        <img\n          src=\"@/assets/iconos/downloadFile.png\"\n          alt=\"Descargar archivo\"\n          id=\"imgDownloadArchivo\"\n        />\n      </a>\n    </div>\n\n    <div\n      class=\"enlacesAdjuntos\"\n      v-show=\"\n        estaRespuesta.enlaceAdjunto && estaRespuesta.enlaceAdjunto.length > 0\n      \"\n    >\n      <a\n        target=\"_blank\"\n        :href=\"enlace\"\n        :key=\"index\"\n        v-for=\"(enlace, index) of estaRespuesta.enlaceAdjunto\"\n      >\n        <div class=\"enlaceAdjunto\">\n          {{ enlace }}\n        </div>\n      </a>\n    </div>\n\n    <div class=\"controles\">\n      <img\n        src=\"@/assets/iconos/quote.png\"\n        alt=\"Cita\"\n        title=\"Citar esta respuesta\"\n        class=\"botonInsertar\"\n        @click=\"emitirSolicitudCita\"\n      />\n      <div\n        class=\"controlRespuesta\"\n        id=\"bEliminar\"\n        v-if=\"usuarioSuperadministrador\"\n        @click=\"eliminarse\"\n      >\n        Eliminar\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Interpolacion from \"./Interpolacion.vue\";\nexport default {\n  components: { Interpolacion },\n  name: \"Respuesta\",\n  props: {\n    estaRespuesta: {\n      type: Object,\n    },\n    idConversacion: String,\n  },\n  computed: {\n    fechaFormateada: function () {\n      let laFecha = new Date(this.estaRespuesta.fecha).toString();\n      let indexParentesis = laFecha.indexOf(\"(\");\n      let fechaCorta = laFecha.substr(0, indexParentesis);\n      let indexGMT = fechaCorta.indexOf(\"GMT\");\n      if (indexGMT > -1) {\n        fechaCorta = fechaCorta.substr(0, indexGMT);\n      }\n      return fechaCorta;\n    },\n    usuarioAutor: function () {\n      if (this.usuario.id == this.estaRespuesta.infoAutor.id) {\n        return true;\n      }\n      return false;\n    },\n  },\n  methods: {\n    emitirSolicitudCita(){\n      var quote={\n        mensaje: this.estaRespuesta.mensaje,\n        interpolaciones:this.estaRespuesta.interpolaciones,\n        infoAutor:this.estaRespuesta.infoAutor,\n        fecha:this.estaRespuesta.fecha \n      }\n\n      quote.interpolaciones.forEach(interpolacion=>{\n        delete interpolacion.__typename;\n      })\n      delete quote.infoAutor.__typename;\n\n      this.$emit('meQuierenCitar', quote)\n    },\n    eliminarse() {\n      let dis = this;\n      if (!confirm(\"Eliminando respuesta Â¿Continuar?\")) {\n        return;\n      }\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation($idRespuesta: ID!, $idConversacion: ID!) {\n            eliminarRespuesta(\n              idRespuesta: $idRespuesta\n              idConversacion: $idConversacion\n            )\n          }\n        `,\n        variables: {\n          idRespuesta: this.estaRespuesta.id,\n          idConversacion: this.idConversacion,\n        },\n        update(store, { data: { eliminarRespuesta } }) {\n          if (eliminarRespuesta) {\n            console.log(`Respuesta eliminada`);\n            dis.$emit(\"meElimine\");\n          }\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.respuesta {\n  background-color: rgb(255 205 164);\n\n  border-radius: 15px;\n  display: grid;\n  grid-template-areas:\n    \"info info info\"\n    \"autor mensaje adjunto\"\n    \"... enlaceAdjunto enlaceAdjunto\"\n    \"controles controles controles\";\n  grid-template-columns: 100px 1fr 60px;\n  grid-template-rows: 50px 1fr min-content 15px;\n  row-gap: 10px;\n  align-items: center;\n  justify-items: center;\n  padding: 10px;\n}\n.infoRespuesta {\n  font-size: 10px;\n  margin: 5px 5px;\n  color: gray;\n  grid-area: info;\n  width: 100%;\n}\n#zonaCuerpoMensaje {\n  grid-area: mensaje;\n  width: 100%;\n  padding: 10px;\n  height: 100%;\n}\n.mensajeRespuesta {\n  white-space: pre-wrap;\n  margin-bottom: 15px;\n  font-size: 20px;\n}\n.caritaAutor {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  grid-area: autor;\n  align-self: flex-start;\n}\n.controles {\n  grid-area: controles;\n  width: 100%;\n  display: flex;\n  flex-flow: row-reverse;\n  font-size: 13px;\n}\n.controlRespuesta {\n  padding: 3px;\n  cursor: pointer;\n}\n.controlRespuesta:hover {\n  background-color: red;\n}\n#archivo {\n  padding: 5px;\n}\n\n#imgDownloadArchivo {\n  grid-area: adjunto;\n  width: 45px;\n  height: 45px;\n  border-radius: 50%;\n  background-color: #4bb36b;\n}\n\n.enlacesAdjuntos {\n  grid-area: enlaceAdjunto;\n  justify-self: left;\n}\n.enlaceAdjunto {\n  font-style: italic;\n  font-size: 14px;\n  word-wrap: break-word;\n  border-radius: 15px;\n  background-color: rgba(129, 66, 129, 0.349);\n  padding: 3px 5px;\n  cursor: pointer;\n  max-width: 600px;\n  margin: 3px;\n}\n.enlaceAdjunto:hover {\n  background-color: rgba(129, 66, 129, 0.733);\n}\n.botonInsertar {\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n}\n.botonInsertar:hover {\n  background-color: gray;\n}\n</style>"]}]}