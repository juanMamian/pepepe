{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/libro/src/components/CuadroImagen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/components/CuadroImagen.vue","mtime":1617736335122},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdxbCB9IGZyb20gImFwb2xsby1zZXJ2ZXItY29yZSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiY3VhZHJvSW1hZ2VuIiwKICBwcm9wczogewogICAgZXN0ZUN1YWRyb0ltYWdlbjogT2JqZWN0LAogICAgaWRMaWJybzogU3RyaW5nLAogICAgaWRQYWdpbmE6IFN0cmluZywKICAgIHNpemVQYWdpbmE6IE9iamVjdCwKICAgIHNlbGVjY2lvbmFkbzogQm9vbGVhbiwKICAgIGFyY2hpdm9DdWFkcm9JbWFnZW5QYWdpbmE6IE9iamVjdCwKICAgIHBhZ2luYVNlbGVjY2lvbmFkYTogQm9vbGVhbiwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByZXNpemluZzogZmFsc2UsCiAgICAgIGRyYWdnaW5nOiBmYWxzZSwKICAgICAgcG9zaWNpb246IHsKICAgICAgICB4OiBudWxsLAogICAgICAgIHk6IG51bGwsCiAgICAgIH0sCiAgICAgIHNpemU6IHsKICAgICAgICB4OiBudWxsLAogICAgICAgIHk6IG51bGwsCiAgICAgIH0sCiAgICAgIHVwZGF0aW5nSW5mbzogZmFsc2UsCiAgICAgIHZlcnNpb25JbWFnZW46IDAsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGVzdGlsb0xheW91dCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3A6IHRoaXMucG9zaWNpb24ueSArICIlIiwKICAgICAgICBsZWZ0OiB0aGlzLnBvc2ljaW9uLnggKyAiJSIsCgogICAgICAgIHdpZHRoOiB0aGlzLnNpemUueCArICIlIiwKICAgICAgICBoZWlnaHQ6IHRoaXMuc2l6ZS55ICsgIiUiLAogICAgICB9OwogICAgfSwKICAgIHVybEltYWdlbigpIHsKICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLnNlcnZlclVybCArCiAgICAgICAgIi9hcGlDdWVudG9zL2ltYWdlbkN1ZW50by8iICsKICAgICAgICB0aGlzLmlkTGlicm8gKwogICAgICAgICIvIiArCiAgICAgICAgdGhpcy5pZFBhZ2luYSArCiAgICAgICAgIi8iICsKICAgICAgICB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uaWQKICAgICAgKTsKICAgIH0sCiAgICBzaXplUmVzaXplSGFuZGxlKCkgewogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiB0aGlzLnJlc2l6aW5nID8gMjAwICsgInB4IiA6IDEwICsgInB4IiwKICAgICAgICBoZWlnaHQ6IHRoaXMucmVzaXppbmcgPyAyMDAgKyAicHgiIDogMTAgKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIHNpemVEcmFnSGFuZGxlKCkgewogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiB0aGlzLmRyYWdnaW5nID8gMjAwICsgInB4IiA6IDEwICsgInB4IiwKICAgICAgICBoZWlnaHQ6IHRoaXMuZHJhZ2dpbmcgPyAyMDAgKyAicHgiIDogMTAgKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIHVybEF1ZGlvKCkgewogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMuc2VydmVyVXJsICsKICAgICAgICAiL2FwaUN1ZW50b3MvYXVkaW9JbWFnZW4vIiArCiAgICAgICAgdGhpcy5pZExpYnJvICsKICAgICAgICAiLyIgKwogICAgICAgIHRoaXMuaWRQYWdpbmEgKwogICAgICAgICIvIiArCiAgICAgICAgdGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmlkCiAgICAgICk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgcGxheUF1ZGlvKCkgewogICAgICBpZiAoIXRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5hdWRpbykgcmV0dXJuOwogICAgICB0aGlzLiRyZWZzLmF1ZGlvLnBsYXkoKTsKICAgIH0sCiAgICBpbmljaWFyUmVzaXplKCkgewogICAgICB0aGlzLnJlc2l6aW5nID0gdHJ1ZTsKICAgIH0sCiAgICByZXNpemUoZSkgewogICAgICBpZiAodGhpcy5yZXNpemluZykgewogICAgICAgIHZhciBjdWFkcm9Qb3MgPSB7CiAgICAgICAgICB4OiB0aGlzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LAogICAgICAgICAgeTogdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLAogICAgICAgIH07CgogICAgICAgIGNvbnN0IG51ZXZveCA9IGUuY2xpZW50WCAtIGN1YWRyb1Bvcy54IC0gNTsKICAgICAgICBjb25zdCBudWV2b3kgPSBlLmNsaWVudFkgLSBjdWFkcm9Qb3MueSAtIDU7CgogICAgICAgIHZhciBudWV2b3hQID0gTWF0aC5mbG9vcigobnVldm94ICogMTAwKSAvIHRoaXMuc2l6ZVBhZ2luYS54KTsKICAgICAgICB2YXIgbnVldm95UCA9IE1hdGguZmxvb3IoKG51ZXZveSAqIDEwMCkgLyB0aGlzLnNpemVQYWdpbmEueSk7CgogICAgICAgIGlmICh0aGlzLnBvc2ljaW9uLnggKyBudWV2b3hQID4gMTAwKQogICAgICAgICAgbnVldm94UCA9IE1hdGguZmxvb3IoMTAwIC0gdGhpcy5wb3NpY2lvbi54KTsKICAgICAgICBpZiAodGhpcy5wb3NpY2lvbi55ICsgbnVldm95UCA+IDEwMCkKICAgICAgICAgIG51ZXZveVAgPSBNYXRoLmZsb29yKDEwMCAtIHRoaXMucG9zaWNpb24ueSk7CgogICAgICAgIHRoaXMuJHNldCh0aGlzLnNpemUsICJ4IiwgbnVldm94UCk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2l6ZSwgInkiLCBudWV2b3lQKTsKICAgICAgfQogICAgfSwKICAgIGZpblJlc2l6ZSgpIHsKICAgICAgdGhpcy5yZXNpemluZyA9IGZhbHNlOwoKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgIG11dGF0aW9uKAogICAgICAgICAgICAkaWRMaWJybzogSUQhCiAgICAgICAgICAgICRpZFBhZ2luYTogSUQhCiAgICAgICAgICAgICRpZEN1YWRyb0ltYWdlbjogSUQhCiAgICAgICAgICAgICRudWV2b1NpemU6IENvb3Jkc0lucHV0IQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHVwZGF0ZVNpemVDdWFkcm9JbWFnZW4oCiAgICAgICAgICAgICAgaWRMaWJybzogJGlkTGlicm8KICAgICAgICAgICAgICBpZFBhZ2luYTogJGlkUGFnaW5hCiAgICAgICAgICAgICAgaWRDdWFkcm9JbWFnZW46ICRpZEN1YWRyb0ltYWdlbgogICAgICAgICAgICAgIG51ZXZvU2l6ZTogJG51ZXZvU2l6ZQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgIHNpemUgewogICAgICAgICAgICAgICAgeAogICAgICAgICAgICAgICAgeQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIGAsCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZExpYnJvOiB0aGlzLmlkTGlicm8sCiAgICAgICAgICBpZFBhZ2luYTogdGhpcy5pZFBhZ2luYSwKICAgICAgICAgIGlkQ3VhZHJvSW1hZ2VuOiB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uaWQsCiAgICAgICAgICBudWV2b1NpemU6IHRoaXMuc2l6ZSwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCgogICAgaW5pY2lhckRyYWcoKSB7CiAgICAgIHRoaXMuZHJhZ2dpbmcgPSB0cnVlOwogICAgfSwKICAgIGRyYWcoZSkgewogICAgICBpZiAodGhpcy5kcmFnZ2luZykgewogICAgICAgIGNvbnNvbGUubG9nKGBEcmFnZ2luZ2ApOwogICAgICAgIGNvbnN0IGVsZW1QYWdpbmEgPSB0aGlzLiRlbC5jbG9zZXN0KCIucGFnaW5hIik7CiAgICAgICAgY29uc3QgcG9zUGFnaW5hID0gZWxlbVBhZ2luYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgICB2YXIgcG9zTW91c2UgPSB7CiAgICAgICAgICB4OiBlLmNsaWVudFggLSBwb3NQYWdpbmEubGVmdCwKICAgICAgICAgIHk6IGUuY2xpZW50WSAtIHBvc1BhZ2luYS50b3AsCiAgICAgICAgfTsKICAgICAgICB2YXIgbnVldmFQb3MgPSB7CiAgICAgICAgICB4OiBwb3NNb3VzZS54IC0gdGhpcy4kZWwub2Zmc2V0V2lkdGggLyAyLAogICAgICAgICAgeTogcG9zTW91c2UueSArIDIwLAogICAgICAgIH07CgogICAgICAgIGlmIChudWV2YVBvcy54ICsgdGhpcy4kZWwub2Zmc2V0V2lkdGggPiBlbGVtUGFnaW5hLm9mZnNldFdpZHRoKSB7CiAgICAgICAgICBudWV2YVBvcy54ID0gZWxlbVBhZ2luYS5vZmZzZXRXaWR0aCAtIHRoaXMuJGVsLm9mZnNldFdpZHRoOwogICAgICAgIH0KICAgICAgICBpZiAobnVldmFQb3MueCA8IDApIHsKICAgICAgICAgIG51ZXZhUG9zLnggPSAwOwogICAgICAgIH0KCiAgICAgICAgaWYgKG51ZXZhUG9zLnkgKyB0aGlzLiRlbC5vZmZzZXRIZWlnaHQgPiBlbGVtUGFnaW5hLm9mZnNldEhlaWdodCkgewogICAgICAgICAgbnVldmFQb3MueSA9IGVsZW1QYWdpbmEub2Zmc2V0SGVpZ2h0IC0gdGhpcy4kZWwub2Zmc2V0SGVpZ2h0OwogICAgICAgIH0KICAgICAgICBpZiAobnVldmFQb3MueSA8IDApIHsKICAgICAgICAgIG51ZXZhUG9zLnkgPSAwOwogICAgICAgIH0KCiAgICAgICAgdmFyIG51ZXZhUG9zUCA9IHsKICAgICAgICAgIHg6IE1hdGgucm91bmQoKG51ZXZhUG9zLnggKiAxMDApIC8gZWxlbVBhZ2luYS5vZmZzZXRXaWR0aCksCiAgICAgICAgICB5OiBNYXRoLnJvdW5kKChudWV2YVBvcy55ICogMTAwKSAvIGVsZW1QYWdpbmEub2Zmc2V0SGVpZ2h0KSwKICAgICAgICB9OwoKICAgICAgICB0aGlzLnBvc2ljaW9uID0gbnVldmFQb3NQOwogICAgICB9CiAgICB9LAogICAgZmluRHJhZygpIHsKICAgICAgdGhpcy5kcmFnZ2luZyA9IGZhbHNlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsYAogICAgICAgICAgbXV0YXRpb24oCiAgICAgICAgICAgICRpZExpYnJvOiBJRCEKICAgICAgICAgICAgJGlkUGFnaW5hOiBJRCEKICAgICAgICAgICAgJGlkQ3VhZHJvSW1hZ2VuOiBJRCEKICAgICAgICAgICAgJG51ZXZvUG9zaWNpb246IENvb3Jkc0lucHV0IQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHVwZGF0ZVBvc2ljaW9uQ3VhZHJvSW1hZ2VuKAogICAgICAgICAgICAgIGlkTGlicm86ICRpZExpYnJvCiAgICAgICAgICAgICAgaWRQYWdpbmE6ICRpZFBhZ2luYQogICAgICAgICAgICAgIGlkQ3VhZHJvSW1hZ2VuOiAkaWRDdWFkcm9JbWFnZW4KICAgICAgICAgICAgICBudWV2b1Bvc2ljaW9uOiAkbnVldm9Qb3NpY2lvbgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgIHBvc2ljaW9uIHsKICAgICAgICAgICAgICAgIHgKICAgICAgICAgICAgICAgIHkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBgLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWRMaWJybzogdGhpcy5pZExpYnJvLAogICAgICAgICAgaWRQYWdpbmE6IHRoaXMuaWRQYWdpbmEsCiAgICAgICAgICBpZEN1YWRyb0ltYWdlbjogdGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmlkLAogICAgICAgICAgbnVldm9Qb3NpY2lvbjogdGhpcy5wb3NpY2lvbiwKICAgICAgICB9LAogICAgICB9KTsKICAgIH0sCgogICAgdXBsb2FkQXJjaGl2b0N1YWRyb0ltYWdlbigpIHsKICAgICAgdmFyIGRhdG9zID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGlmICghdGhpcy4kcmVmcy5pbnB1dEFyY2hpdm9JbWFnZW4udmFsdWUpIHsKICAgICAgICBjb25zb2xlLmxvZyhgTm8gaGFiw61hIGFyY2hpdm8gc2VsZWNjaW9uYWRvYCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGRhdG9zLmFwcGVuZCgiaWRMaWJybyIsIHRoaXMuaWRMaWJybyk7CiAgICAgIGRhdG9zLmFwcGVuZCgiaWRQYWdpbmEiLCB0aGlzLmlkUGFnaW5hKTsKICAgICAgZGF0b3MuYXBwZW5kKCJpZEN1YWRyb0ltYWdlbiIsIHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5pZCk7CiAgICAgIGRhdG9zLmFwcGVuZCgiaW1hZ2VuIiwgdGhpcy4kcmVmcy5pbnB1dEFyY2hpdm9JbWFnZW4uZmlsZXNbMF0pOwoKICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHVybDogdGhpcy5zZXJ2ZXJVcmwgKyAiL2FwaUN1ZW50b3Mvc3ViaXJBcmNoaXZvQ3VhZHJvSW1hZ2VuIiwKICAgICAgICBkYXRhOiBkYXRvcywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiLAogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4sCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbigoeyByZXMgfSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYFJlc3VsdGFkbyBkZSB1cGxvYWQgYXJjaGl2bzogJHtyZXN9YCk7CiAgICAgICAgICB0aGlzLnZlcnNpb25JbWFnZW4rKzsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciB1cGxvYWRpbmcgYXJjaGl2byBkZSBjdWFkcm9JbWFnZW4uIEU6ICR7ZXJyb3J9YCk7CiAgICAgICAgfSk7CiAgICB9LAoKICAgIGVsaW1pbmFyc2UoKSB7CiAgICAgIGlmICgKICAgICAgICAhY29uZmlybSgKICAgICAgICAgICJFbGltaW5hbmRvIGN1YWRybyBkZSBpbWFnZW4uIEVzdGEgb3BlcmFjacOzbiBubyBzZSBwdWVkZSBkZXNoYWNlci4gwr9Db250aW51YXI/IgogICAgICAgICkKICAgICAgKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMudXBkYXRpbmdJbmZvID0gdHJ1ZTsKICAgICAgY29uc29sZS5sb2coYEVsaW1pbmFuZG8gdW4gY3VhZHJvIGRlIGltYWdlbmApOwogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uKCRpZExpYnJvOiBJRCEsICRpZFBhZ2luYTogSUQhLCAkaWRDdWFkcm9JbWFnZW46IElEISkgewogICAgICAgICAgICAgIGVsaW1pbmFyQ3VhZHJvSW1hZ2VuTGlicm8oCiAgICAgICAgICAgICAgICBpZExpYnJvOiAkaWRMaWJybwogICAgICAgICAgICAgICAgaWRQYWdpbmE6ICRpZFBhZ2luYQogICAgICAgICAgICAgICAgaWRDdWFkcm9JbWFnZW46ICRpZEN1YWRyb0ltYWdlbgogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZExpYnJvOiB0aGlzLmlkTGlicm8sCiAgICAgICAgICAgIGlkUGFnaW5hOiB0aGlzLmlkUGFnaW5hLAogICAgICAgICAgICBpZEN1YWRyb0ltYWdlbjogdGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmlkLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGE6IHsgZWxpbWluYXJDdWFkcm9JbWFnZW5MaWJybyB9IH0pID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXN1bHRhZG86ICR7ZWxpbWluYXJDdWFkcm9JbWFnZW5MaWJyb31gKTsKICAgICAgICAgIGlmIChlbGltaW5hckN1YWRyb0ltYWdlbkxpYnJvKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoIm1lRWxpbWluZSIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yLiBFOiAke2Vycm9yfWApOwogICAgICAgICAgdGhpcy51cGRhdGluZ0luZm8gPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc29sZS5sb2coYE1vbnRhZG9gKTsKICAgIHRoaXMuJHNldCh0aGlzLnBvc2ljaW9uLCAieCIsIHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5wb3NpY2lvbi54KTsKICAgIHRoaXMuJHNldCh0aGlzLnBvc2ljaW9uLCAieSIsIHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5wb3NpY2lvbi55KTsKCiAgICB0aGlzLiRzZXQodGhpcy5zaXplLCAieCIsIHRoaXMuZXN0ZUN1YWRyb0ltYWdlbi5zaXplLngpOwogICAgdGhpcy4kc2V0KHRoaXMuc2l6ZSwgInkiLCB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uc2l6ZS55KTsKCiAgICBpZiAodGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLnNpbkFyY2hpdm8pIHsKICAgICAgY29uc29sZS5sb2coYEFicmllbmRvIGVsIGlucHV0IGRlIGFyY2hpdm9gKTsKICAgICAgdGhpcy4kcmVmcy5pbnB1dEFyY2hpdm9JbWFnZW4uY2xpY2soKTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["CuadroImagen.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CuadroImagen.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    class=\"cuadroImagen\"\n    :style=\"[estiloLayout]\"\n    @click=\"playAudio\"\n    :class=\"{\n      conAudio: esteCuadroImagen.audio,\n      deshabilitado: updatingInfo,\n      enPaginaSeleccionada: paginaSeleccionada,\n    }\"\n  >\n    <img\n      :src=\"urlImagen + '?v=' + versionImagen\"\n      alt=\"ilustracion\"\n      class=\"imagenContenido\"\n    />\n\n    <div\n      id=\"dragHandle\"\n      v-show=\"seleccionado\"\n      :style=\"sizeDragHandle\"\n      @mousedown.left.stop=\"iniciarDrag\"\n      @mousemove=\"drag\"\n      @mouseup=\"finDrag\"\n    >\n      <div id=\"bolitaDragHandle\"></div>\n    </div>\n\n    <div\n      id=\"resizeHandle\"\n      :style=\"[sizeResizeHandle]\"\n      v-show=\"seleccionado\"\n      @mousedown.left=\"iniciarResize\"\n      @mousemove=\"resize\"\n      @mouseup=\"finResize\"\n    >\n      <div id=\"bolitaResizeHandle\"></div>\n    </div>\n\n    <img\n      src=\"@/assets/iconos/delete.png\"\n      alt=\"Eliminar\"\n      title=\"Eliminar cuadro de imagen\"\n      id=\"bEliminarCuadroImagen\"\n      v-show=\"seleccionado\"\n      @click=\"eliminarse\"\n    />\n\n    <input\n      type=\"file\"\n      id=\"inputArchivoImagen\"\n      style=\"display: none\"\n      ref=\"inputArchivoImagen\"\n      @change=\"uploadArchivoCuadroImagen\"\n    />\n\n    <audio type=\"audio/ogg\" v-if=\"esteCuadroImagen.audio\" ref=\"audio\">\n      <source :src=\"urlAudio\" type=\"audio/ogg\" />\n    </audio>\n  </div>\n</template>\n\n<script>\nimport { gql } from \"apollo-server-core\";\nimport axios from \"axios\";\nexport default {\n  name: \"cuadroImagen\",\n  props: {\n    esteCuadroImagen: Object,\n    idLibro: String,\n    idPagina: String,\n    sizePagina: Object,\n    seleccionado: Boolean,\n    archivoCuadroImagenPagina: Object,\n    paginaSeleccionada: Boolean,\n  },\n  data() {\n    return {\n      resizing: false,\n      dragging: false,\n      posicion: {\n        x: null,\n        y: null,\n      },\n      size: {\n        x: null,\n        y: null,\n      },\n      updatingInfo: false,\n      versionImagen: 0,\n    };\n  },\n  computed: {\n    estiloLayout() {\n      return {\n        top: this.posicion.y + \"%\",\n        left: this.posicion.x + \"%\",\n\n        width: this.size.x + \"%\",\n        height: this.size.y + \"%\",\n      };\n    },\n    urlImagen() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/imagenCuento/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n    sizeResizeHandle() {\n      return {\n        width: this.resizing ? 200 + \"px\" : 10 + \"px\",\n        height: this.resizing ? 200 + \"px\" : 10 + \"px\",\n      };\n    },\n    sizeDragHandle() {\n      return {\n        width: this.dragging ? 200 + \"px\" : 10 + \"px\",\n        height: this.dragging ? 200 + \"px\" : 10 + \"px\",\n      };\n    },\n    urlAudio() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/audioImagen/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n  },\n  methods: {\n    playAudio() {\n      if (!this.esteCuadroImagen.audio) return;\n      this.$refs.audio.play();\n    },\n    iniciarResize() {\n      this.resizing = true;\n    },\n    resize(e) {\n      if (this.resizing) {\n        var cuadroPos = {\n          x: this.$el.getBoundingClientRect().left,\n          y: this.$el.getBoundingClientRect().top,\n        };\n\n        const nuevox = e.clientX - cuadroPos.x - 5;\n        const nuevoy = e.clientY - cuadroPos.y - 5;\n\n        var nuevoxP = Math.floor((nuevox * 100) / this.sizePagina.x);\n        var nuevoyP = Math.floor((nuevoy * 100) / this.sizePagina.y);\n\n        if (this.posicion.x + nuevoxP > 100)\n          nuevoxP = Math.floor(100 - this.posicion.x);\n        if (this.posicion.y + nuevoyP > 100)\n          nuevoyP = Math.floor(100 - this.posicion.y);\n\n        this.$set(this.size, \"x\", nuevoxP);\n        this.$set(this.size, \"y\", nuevoyP);\n      }\n    },\n    finResize() {\n      this.resizing = false;\n\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation(\n            $idLibro: ID!\n            $idPagina: ID!\n            $idCuadroImagen: ID!\n            $nuevoSize: CoordsInput!\n          ) {\n            updateSizeCuadroImagen(\n              idLibro: $idLibro\n              idPagina: $idPagina\n              idCuadroImagen: $idCuadroImagen\n              nuevoSize: $nuevoSize\n            ) {\n              id\n              size {\n                x\n                y\n              }\n            }\n          }\n        `,\n        variables: {\n          idLibro: this.idLibro,\n          idPagina: this.idPagina,\n          idCuadroImagen: this.esteCuadroImagen.id,\n          nuevoSize: this.size,\n        },\n      });\n    },\n\n    iniciarDrag() {\n      this.dragging = true;\n    },\n    drag(e) {\n      if (this.dragging) {\n        console.log(`Dragging`);\n        const elemPagina = this.$el.closest(\".pagina\");\n        const posPagina = elemPagina.getBoundingClientRect();\n        var posMouse = {\n          x: e.clientX - posPagina.left,\n          y: e.clientY - posPagina.top,\n        };\n        var nuevaPos = {\n          x: posMouse.x - this.$el.offsetWidth / 2,\n          y: posMouse.y + 20,\n        };\n\n        if (nuevaPos.x + this.$el.offsetWidth > elemPagina.offsetWidth) {\n          nuevaPos.x = elemPagina.offsetWidth - this.$el.offsetWidth;\n        }\n        if (nuevaPos.x < 0) {\n          nuevaPos.x = 0;\n        }\n\n        if (nuevaPos.y + this.$el.offsetHeight > elemPagina.offsetHeight) {\n          nuevaPos.y = elemPagina.offsetHeight - this.$el.offsetHeight;\n        }\n        if (nuevaPos.y < 0) {\n          nuevaPos.y = 0;\n        }\n\n        var nuevaPosP = {\n          x: Math.round((nuevaPos.x * 100) / elemPagina.offsetWidth),\n          y: Math.round((nuevaPos.y * 100) / elemPagina.offsetHeight),\n        };\n\n        this.posicion = nuevaPosP;\n      }\n    },\n    finDrag() {\n      this.dragging = false;\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation(\n            $idLibro: ID!\n            $idPagina: ID!\n            $idCuadroImagen: ID!\n            $nuevoPosicion: CoordsInput!\n          ) {\n            updatePosicionCuadroImagen(\n              idLibro: $idLibro\n              idPagina: $idPagina\n              idCuadroImagen: $idCuadroImagen\n              nuevoPosicion: $nuevoPosicion\n            ) {\n              id\n              posicion {\n                x\n                y\n              }\n            }\n          }\n        `,\n        variables: {\n          idLibro: this.idLibro,\n          idPagina: this.idPagina,\n          idCuadroImagen: this.esteCuadroImagen.id,\n          nuevoPosicion: this.posicion,\n        },\n      });\n    },\n\n    uploadArchivoCuadroImagen() {\n      var datos = new FormData();\n      if (!this.$refs.inputArchivoImagen.value) {\n        console.log(`No había archivo seleccionado`);\n        return;\n      }\n      datos.append(\"idLibro\", this.idLibro);\n      datos.append(\"idPagina\", this.idPagina);\n      datos.append(\"idCuadroImagen\", this.esteCuadroImagen.id);\n      datos.append(\"imagen\", this.$refs.inputArchivoImagen.files[0]);\n\n      axios({\n        method: \"post\",\n        url: this.serverUrl + \"/apiCuentos/subirArchivoCuadroImagen\",\n        data: datos,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: \"Bearer \" + this.$store.state.token,\n        },\n      })\n        .then(({ res }) => {\n          console.log(`Resultado de upload archivo: ${res}`);\n          this.versionImagen++;\n        })\n        .catch((error) => {\n          console.log(`Error uploading archivo de cuadroImagen. E: ${error}`);\n        });\n    },\n\n    eliminarse() {\n      if (\n        !confirm(\n          \"Eliminando cuadro de imagen. Esta operación no se puede deshacer. ¿Continuar?\"\n        )\n      ) {\n        return;\n      }\n      this.updatingInfo = true;\n      console.log(`Eliminando un cuadro de imagen`);\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation($idLibro: ID!, $idPagina: ID!, $idCuadroImagen: ID!) {\n              eliminarCuadroImagenLibro(\n                idLibro: $idLibro\n                idPagina: $idPagina\n                idCuadroImagen: $idCuadroImagen\n              )\n            }\n          `,\n          variables: {\n            idLibro: this.idLibro,\n            idPagina: this.idPagina,\n            idCuadroImagen: this.esteCuadroImagen.id,\n          },\n        })\n        .then(({ data: { eliminarCuadroImagenLibro } }) => {\n          console.log(`Resultado: ${eliminarCuadroImagenLibro}`);\n          if (eliminarCuadroImagenLibro) {\n            this.$emit(\"meElimine\");\n          }\n        })\n        .catch((error) => {\n          console.log(`Error. E: ${error}`);\n          this.updatingInfo = false;\n        });\n    },\n  },\n  mounted() {\n    console.log(`Montado`);\n    this.$set(this.posicion, \"x\", this.esteCuadroImagen.posicion.x);\n    this.$set(this.posicion, \"y\", this.esteCuadroImagen.posicion.y);\n\n    this.$set(this.size, \"x\", this.esteCuadroImagen.size.x);\n    this.$set(this.size, \"y\", this.esteCuadroImagen.size.y);\n\n    if (this.esteCuadroImagen.sinArchivo) {\n      console.log(`Abriendo el input de archivo`);\n      this.$refs.inputArchivoImagen.click();\n    }\n  },\n};\n</script>\n\n<style scoped>\n.cuadroImagen {\n  position: absolute;\n  border-width: 1px;\n  border-style: solid;\n}\n.cuadroImagen:not(.enPaginaSeleccionada) {\n  border-color: transparent;\n}\n.enPaginaSeleccionada {\n  border-color: purple;\n}\n.imagenContenido {\n  width: 100%;\n  height: 100%;\n}\n#resizeHandle {\n  position: absolute;\n  top: 100%;\n  left: 100%;\n\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n\n  cursor: pointer;\n  border: 1px solid purple;\n}\n#bolitaResizeHandle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: green;\n}\n\n#dragHandle {\n  position: absolute;\n  top: -20px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 50%;\n  cursor: pointer;\n  border: 1px solid purple;\n}\n#bolitaDragHandle {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: green;\n}\n.conAudio {\n  cursor: pointer;\n}\n\n#bEliminarCuadroImagen {\n  width: 30px;\n  height: 30px;\n  padding: 5px;\n  border-radius: 50%;\n  cursor: pointer;\n  background-color: rgba(128, 0, 128, 0.212);\n  position: absolute;\n  top: -40px;\n  right: -35px;\n}\n#bEliminarCuadroImagen:hover {\n  background-color: rgba(128, 0, 128, 0.637);\n}\n</style>"]}]}