{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/libro/src/components/Pagina.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/components/Pagina.vue","mtime":1617579055414},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdxbCB9IGZyb20gImFwb2xsby1zZXJ2ZXItY29yZSI7CmltcG9ydCBDdWFkcm9JbWFnZW4gZnJvbSAiLi9DdWFkcm9JbWFnZW4udnVlIjsKaW1wb3J0IEN1YWRyb1RleHRvIGZyb20gIi4vQ3VhZHJvVGV4dG8udnVlIjsKaW1wb3J0IEhlcnJhbWllbnRhc0VkaWNpb24gZnJvbSAiLi9IZXJyYW1pZW50YXNFZGljaW9uLnZ1ZSI7CmltcG9ydCB7IGZyYWdtZW50b0N1YWRyb0ltYWdlbiwgZnJhZ21lbnRvQ3VhZHJvVGV4dG8gfSBmcm9tICcuL0xpYnJvLnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBDdWFkcm9JbWFnZW4sIEN1YWRyb1RleHRvLCBIZXJyYW1pZW50YXNFZGljaW9uIH0sCiAgbmFtZTogIlBhZ2luYSIsCiAgcHJvcHM6IHsKICAgIGVzdGFQYWdpbmE6IE9iamVjdCwKICAgIHBhZ2luYURlcmVjaGE6IEJvb2xlYW4sCiAgICBwcmVwYXJhZGE6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgdmlzaWJsZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgfSwKICAgIGlkTGlicm86IFN0cmluZywKICAgIHNlbGVjY2lvbmFkYTogQm9vbGVhbiwKICAgIHNlZ3VuZG9QbGFubzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYW5jaG86IDQ1MCwKICAgICAgYWx0bzogNjAwLAogICAgICB1cGxvYWRpbmdJbmZvOiBmYWxzZSwKCiAgICAgIGNyZWFuZG9UZXh0bzogZmFsc2UsCiAgICAgIGNyZWFuZG9JbWFnZW46IGZhbHNlLAoKICAgICAgZGlidWphbmRvVGV4dG86IGZhbHNlLAogICAgICBkaWJ1amFuZG9JbWFnZW46IGZhbHNlLAoKICAgICAgcG9zRmFudGFzbWFUZXh0bzogewogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgfSwKICAgICAgc2l6ZUZhbnRhc21hVGV4dG86IHsKICAgICAgICB4OiAzMCwKICAgICAgICB5OiAzMCwKICAgICAgfSwKCiAgICAgIHBvc0ZhbnRhc21hSW1hZ2VuOiB7CiAgICAgICAgeDogMCwKICAgICAgICB5OiAwLAogICAgICB9LAogICAgICBzaXplRmFudGFzbWFJbWFnZW46IHsKICAgICAgICB4OiAzMCwKICAgICAgICB5OiAzMCwKICAgICAgfSwKCiAgICAgIGlkRWxlbWVudG9TZWxlY2Npb25hZG86bnVsbCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZXN0aWxvQ29sdW1uYSgpIHsKICAgICAgaWYgKHRoaXMucGFnaW5hRGVyZWNoYSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBncmlkQ29sdW1uOiAiMS8yIiwKICAgICAgICAgIGp1c3RpZnlTZWxmOiAicmlnaHQiLAogICAgICAgIH07CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAogICAgZXN0aWxvU2l6ZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogdGhpcy5hbmNobyArICJweCIsCiAgICAgICAgaGVpZ2h0OiB0aGlzLmFsdG8gKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIHNpemUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgeDogdGhpcy5hbmNobywKICAgICAgICB5OiB0aGlzLmFsdG8sCiAgICAgIH07CiAgICB9LAogICAgZXN0aWxvQXBhcmllbmNpYSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoaXMuZXN0YVBhZ2luYS5jb2xvciwKICAgICAgfTsKICAgIH0sCiAgICBlc3RpbG9MYXlvdXRGYW50YXNtYVRleHRvKCl7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9wOiB0aGlzLnBvc0ZhbnRhc21hVGV4dG8ueSsicHgiLAogICAgICAgIGxlZnQ6IHRoaXMucG9zRmFudGFzbWFUZXh0by54KyJweCIsCiAgICAgICAgd2lkdGg6IHRoaXMuc2l6ZUZhbnRhc21hVGV4dG8ueCsicHgiLAogICAgICAgIGhlaWdodDogdGhpcy5zaXplRmFudGFzbWFUZXh0by55KyJweCIKICAgICAgfQogICAgfSwKICAgIGVzdGlsb0xheW91dEZhbnRhc21hSW1hZ2VuKCl7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9wOiB0aGlzLnBvc0ZhbnRhc21hSW1hZ2VuLnkrInB4IiwKICAgICAgICBsZWZ0OiB0aGlzLnBvc0ZhbnRhc21hSW1hZ2VuLngrInB4IiwKICAgICAgICB3aWR0aDogdGhpcy5zaXplRmFudGFzbWFJbWFnZW4ueCsicHgiLAogICAgICAgIGhlaWdodDogdGhpcy5zaXplRmFudGFzbWFJbWFnZW4ueSsicHgiCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGVsaW1pbmFyc2UoKSB7CiAgICAgIGlmICgKICAgICAgICAhY29uZmlybSgKICAgICAgICAgICJFbGltaW5hbmRvIHDDoWdpbmEuIEVzdGEgb3BlcmFjacOzbiBubyBzZSBwdWVkZSBkZXNoYWNlci4gwr9Db250aW51YXI/IgogICAgICAgICkKICAgICAgKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMudXBsb2FkaW5nSW5mbyA9IHRydWU7CiAgICAgIGNvbnNvbGUubG9nKGBFbGltaW5hbmRvIHVuYSBww6FnaW5hYCk7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24oJGlkTGlicm86IElEISwgJGlkUGFnaW5hOiBJRCEpIHsKICAgICAgICAgICAgICBlbGltaW5hclBhZ2luYURlTGlicm8oaWRMaWJybzogJGlkTGlicm8sIGlkUGFnaW5hOiAkaWRQYWdpbmEpCiAgICAgICAgICAgIH0KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWRMaWJybzogdGhpcy5pZExpYnJvLAogICAgICAgICAgICBpZFBhZ2luYTogdGhpcy5lc3RhUGFnaW5hLmlkLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGE6IHsgZWxpbWluYXJQYWdpbmFEZUxpYnJvIH0gfSkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYFJlc3VsdGFkbzogJHtlbGltaW5hclBhZ2luYURlTGlicm99YCk7CiAgICAgICAgICBpZiAoZWxpbWluYXJQYWdpbmFEZUxpYnJvKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoIm1lRWxpbWluZSIpOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yLiBFOiAke2Vycm9yfWApOwogICAgICAgICAgdGhpcy51cGxvYWRpbmdJbmZvID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgZGVzYWN0aXZhckhlcnJhbWllbnRhcygpIHsKICAgICAgdGhpcy5jcmVhbmRvVGV4dG8gPSBmYWxzZTsKICAgICAgdGhpcy5jcmVhbmRvSW1hZ2VuID0gZmFsc2U7CiAgICB9LAogICAgYWNjaW9uQ3JlYXJFbGVtZW50byhlKSB7CiAgICAgIGNvbnN0IHBvc1BhZ2luYSA9IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBjb25zdCBwb3NDbGljayA9IHsKICAgICAgICB4OiBlLmNsaWVudFggLSBwb3NQYWdpbmEubGVmdCwKICAgICAgICB5OiBlLmNsaWVudFkgLSBwb3NQYWdpbmEudG9wLAogICAgICB9OwoKICAgICAgaWYgKHRoaXMuY3JlYW5kb1RleHRvKSB7CiAgICAgICAgdGhpcy5kaWJ1amFuZG9UZXh0byA9IHRydWU7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMucG9zRmFudGFzbWFUZXh0bywgIngiLCBNYXRoLmZsb29yKHBvc0NsaWNrLngpKTsKICAgICAgICB0aGlzLiRzZXQodGhpcy5wb3NGYW50YXNtYVRleHRvLCAieSIsIE1hdGguZmxvb3IocG9zQ2xpY2sueSkpOwoKICAgICAgICB0aGlzLiRzZXQodGhpcy5zaXplRmFudGFzbWFUZXh0bywgIngiLCAzMCk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2l6ZUZhbnRhc21hVGV4dG8sICJ5IiwgMzApOwoKICAgICAgfSBlbHNlIGlmICh0aGlzLmNyZWFuZG9JbWFnZW4pIHsKICAgICAgICB0aGlzLmRpYnVqYW5kb0ltYWdlbiA9IHRydWU7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMucG9zRmFudGFzbWFJbWFnZW4sICJ4IiwgTWF0aC5mbG9vcihwb3NDbGljay54KSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMucG9zRmFudGFzbWFJbWFnZW4sICJ5IiwgTWF0aC5mbG9vcihwb3NDbGljay55KSk7CgogICAgICAgIHRoaXMuJHNldCh0aGlzLnNpemVGYW50YXNtYUltYWdlbiwgIngiLCAzMCk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2l6ZUZhbnRhc21hSW1hZ2VuLCAieSIsIDMwKTsKICAgICAgfQogICAgfSwKICAgIHJlc2l6ZUZhbnRhc21hRWxlbWVudG8oZSkgewogICAgICBjb25zdCBwb3NQYWdpbmEgPSB0aGlzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgY29uc3QgcG9zQ2xpY2sgPSB7CiAgICAgICAgeDogZS5jbGllbnRYIC0gcG9zUGFnaW5hLmxlZnQsCiAgICAgICAgeTogZS5jbGllbnRZIC0gcG9zUGFnaW5hLnRvcCwKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLmRpYnVqYW5kb1RleHRvKSB7CiAgICAgICAgbGV0IHNpemVGYW50YXNtYSA9IHsKICAgICAgICAgIHg6IHBvc0NsaWNrLnggLSB0aGlzLnBvc0ZhbnRhc21hVGV4dG8ueCwKICAgICAgICAgIHk6IHBvc0NsaWNrLnkgLSB0aGlzLnBvc0ZhbnRhc21hVGV4dG8ueSwKICAgICAgICB9OwoKICAgICAgICBpZihzaXplRmFudGFzbWEueDwzMCl7CiAgICAgICAgICBzaXplRmFudGFzbWEueD0zMAogICAgICAgIH0KICAgICAgICBpZihzaXplRmFudGFzbWEueTwzMCl7CiAgICAgICAgICBzaXplRmFudGFzbWEueT0zMAogICAgICAgIH0KCiAgICAgICAgdGhpcy4kc2V0KHRoaXMuc2l6ZUZhbnRhc21hVGV4dG8sICJ4IiwgTWF0aC5mbG9vcihzaXplRmFudGFzbWEueCkpOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnNpemVGYW50YXNtYVRleHRvLCAieSIsIE1hdGguZmxvb3Ioc2l6ZUZhbnRhc21hLnkpKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZGlidWphbmRvSW1hZ2VuKSB7CiAgICAgICAgbGV0IHNpemVGYW50YXNtYSA9IHsKICAgICAgICAgIHg6IHBvc0NsaWNrLnggLSB0aGlzLnBvc0ZhbnRhc21hSW1hZ2VuLngsCiAgICAgICAgICB5OiBwb3NDbGljay55IC0gdGhpcy5wb3NGYW50YXNtYUltYWdlbi55LAogICAgICAgIH07CgogICAgICAgIGlmKHNpemVGYW50YXNtYS54PDMwKXsKICAgICAgICAgIHNpemVGYW50YXNtYS54PTMwCiAgICAgICAgfQogICAgICAgIGlmKHNpemVGYW50YXNtYS55PDMwKXsKICAgICAgICAgIHNpemVGYW50YXNtYS55PTMwCiAgICAgICAgfQoKICAgICAgICB0aGlzLiRzZXQodGhpcy5zaXplRmFudGFzbWFJbWFnZW4sICJ4IiwgTWF0aC5mbG9vcihzaXplRmFudGFzbWEueCkpOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnNpemVGYW50YXNtYUltYWdlbiwgInkiLCBNYXRoLmZsb29yKHNpemVGYW50YXNtYS55KSk7CiAgICAgIH0KICAgIH0sCiAgICBlbmREaWJ1amFuZG9FbGVtZW50bygpewogICAgICBpZih0aGlzLmRpYnVqYW5kb1RleHRvKXsKICAgICAgICBjb25zb2xlLmxvZyhgQ3JlYW5kbyBjdWFkcm9UZXh0b2ApOwogICAgICAgIHRoaXMuZGlidWphbmRvVGV4dG89ZmFsc2U7CiAgICAgICAgdGhpcy4kcmVmcy5oZXJyYW1pZW50YXNFZGljaW9uLnJlc2V0KCk7CiAgICAgICAgdGhpcy5jcmVhclRleHRvRnJvbUZhbnRhc21hKCk7CiAgICAgIH0KICAgICAgZWxzZSBpZih0aGlzLmRpYnVqYW5kb0ltYWdlbil7CiAgICAgICAgY29uc29sZS5sb2coYENyZWFuZG8gY3VhZHJvIGRlIGltw6FnZW5gKTsKICAgICAgICB0aGlzLmRpYnVqYW5kb0ltYWdlbj1mYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLmhlcnJhbWllbnRhc0VkaWNpb24ucmVzZXQoKTsKCiAgICAgICAgdGhpcy51cGxvYWRpbmdJbmZvPXRydWU7CgogICAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246Z3FsYAogICAgICAgICAgICBtdXRhdGlvbigkaWRMaWJybzpJRCEsICRpZFBhZ2luYTpJRCEpCiAgICAgICAgICBgLAogICAgICAgIH0pCgogICAgICAgIGF4aW9zKHsKICAgICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgICAgdXJsOiB0aGlzLnNlcnZlclVybCArICIvYXBpQ3VlbnRvcy9zdWJpckFyY2hpdm9DdWFkcm9JbWFnZW4iLAogICAgICAgICAgZGF0YTogZGF0b3MsCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIsCiAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuLAogICAgICAgICAgfSwKICAgICAgICB9KS50aGVuKCgpPT57CgogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuZGVzYWN0aXZhckhlcnJhbWllbnRhcygpOwogICAgfSwKICAgIGNyZWFyQ3VhZHJvSW1hZ2VuRnJvbUZhbnRhc21hKCl7CiAgICAgIHZhciBkYXRvc1Bvc2ljaW9uPXsKICAgICAgICB4Ok1hdGgucm91bmQodGhpcy5wb3NGYW50YXNtYVRleHRvLngqMTAwL3RoaXMuJGVsLm9mZnNldFdpZHRoKSwKICAgICAgICB5Ok1hdGgucm91bmQodGhpcy5wb3NGYW50YXNtYVRleHRvLnkqMTAwL3RoaXMuJGVsLm9mZnNldEhlaWdodCksCiAgICAgIH0KCiAgICAgIHZhciBkYXRvc1NpemU9ewogICAgICAgIHg6TWF0aC5yb3VuZCh0aGlzLnNpemVGYW50YXNtYVRleHRvLngqMTAwL3RoaXMuJGVsLm9mZnNldFdpZHRoKSwKICAgICAgICB5Ok1hdGgucm91bmQodGhpcy5zaXplRmFudGFzbWFUZXh0by55KjEwMC90aGlzLiRlbC5vZmZzZXRIZWlnaHQpLAogICAgICB9CgogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjpncWxgCiAgICAgICAgICBtdXRhdGlvbigkaWRMaWJybzpJRCEsICRpZFBhZ2luYTpJRCEsICRkYXRvc1Bvc2ljaW9uOkNvb3Jkc0lucHV0ISwgJGRhdG9zU2l6ZTpDb29yZHNJbnB1dCEpewogICAgICAgICAgICBjcmVhckN1YWRyb0ltYWdlblBhZ2luYUxpYnJvKGlkTGlicm86JGlkTGlicm8sIGlkUGFnaW5hOiRpZFBhZ2luYSwgZGF0b3NQb3NpY2lvbjokZGF0b3NQb3NpY2lvbiwgZGF0b3NTaXplOiRkYXRvc1NpemUpewogICAgICAgICAgICAgIC4uLmZyYWdDdWFkcm9JbWFnZW4KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgJHtmcmFnbWVudG9DdWFkcm9JbWFnZW59CiAgICAgICAgYCwKICAgICAgICB2YXJpYWJsZXM6ewogICAgICAgICAgaWRMaWJybzp0aGlzLmlkTGlicm8sCiAgICAgICAgICBpZFBhZ2luYTp0aGlzLmVzdGFQYWdpbmEuaWQsCiAgICAgICAgICBkYXRvc1Bvc2ljaW9uLAogICAgICAgICAgZGF0b3NTaXplLAogICAgICAgIH0KICAgICAgfSkudGhlbigoe2RhdGE6e2NyZWFyQ3VhZHJvSW1hZ2VuUGFnaW5hTGlicm99fSk9PnsKICAgICAgICB0aGlzLiRlbWl0KCJ0ZW5nb051ZXZvQ3VhZHJvSW1hZ2VuIiwgY3JlYXJDdWFkcm9JbWFnZW5QYWdpbmFMaWJybyk7CiAgICAgIH0pLmNhdGNoKChlcnJvcik9PnsKICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IuIEU6ICR7ZXJyb3J9YCk7CiAgICAgIH0pCiAgICB9LAogICAgY3JlYXJUZXh0b0Zyb21GYW50YXNtYSgpewogICAgICBjb25zb2xlLmxvZyhgRW52aWFuZG8gY29uICR7SlNPTi5zdHJpbmdpZnkodGhpcy5pZExpYnJvKX0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5lc3RhUGFnaW5hLmlkKX0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5wb3NGYW50YXNtYVRleHRvKX0sICR7SlNPTi5zdHJpbmdpZnkodGhpcy5zaXplRmFudGFzbWFUZXh0byl9YCk7CgogICAgICB2YXIgZGF0b3NQb3NpY2lvbj17CiAgICAgICAgeDpNYXRoLnJvdW5kKHRoaXMucG9zRmFudGFzbWFUZXh0by54KjEwMC90aGlzLiRlbC5vZmZzZXRXaWR0aCksCiAgICAgICAgeTpNYXRoLnJvdW5kKHRoaXMucG9zRmFudGFzbWFUZXh0by55KjEwMC90aGlzLiRlbC5vZmZzZXRIZWlnaHQpLAogICAgICB9CgogICAgICB2YXIgZGF0b3NTaXplPXsKICAgICAgICB4Ok1hdGgucm91bmQodGhpcy5zaXplRmFudGFzbWFUZXh0by54KjEwMC90aGlzLiRlbC5vZmZzZXRXaWR0aCksCiAgICAgICAgeTpNYXRoLnJvdW5kKHRoaXMuc2l6ZUZhbnRhc21hVGV4dG8ueSoxMDAvdGhpcy4kZWwub2Zmc2V0SGVpZ2h0KSwKICAgICAgfQoKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246Z3FsYAogICAgICAgICAgbXV0YXRpb24oJGlkTGlicm86SUQhLCAkaWRQYWdpbmE6IElEISwgJGRhdG9zUG9zaWNpb246Q29vcmRzSW5wdXQhLCAkZGF0b3NTaXplOkNvb3Jkc0lucHV0ISl7CiAgICAgICAgICAgIGNyZWFyQ3VhZHJvVGV4dG9QYWdpbmFMaWJybyhpZExpYnJvOiRpZExpYnJvLCBpZFBhZ2luYTokaWRQYWdpbmEsIGRhdG9zUG9zaWNpb246JGRhdG9zUG9zaWNpb24sIGRhdG9zU2l6ZTokZGF0b3NTaXplKXsKICAgICAgICAgICAgICAuLi5mcmFnQ3VhZHJvVGV4dG8KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgJHtmcmFnbWVudG9DdWFkcm9UZXh0b30KICAgICAgICBgLAogICAgICAgIHZhcmlhYmxlczp7CiAgICAgICAgICBpZExpYnJvOnRoaXMuaWRMaWJybywKICAgICAgICAgIGlkUGFnaW5hOnRoaXMuZXN0YVBhZ2luYS5pZCwKICAgICAgICAgIGRhdG9zUG9zaWNpb24sCiAgICAgICAgICBkYXRvc1NpemUKICAgICAgICB9LAogICAgICAgIGVycm9yUG9saWN5OiJhbGwiCiAgICAgIH0pLnRoZW4oKHtkYXRhOntjcmVhckN1YWRyb1RleHRvUGFnaW5hTGlicm99fSk9PnsKICAgICAgICB0aGlzLiRlbWl0KCJ0ZW5nb051ZXZvQ3VhZHJvVGV4dG8iLCBjcmVhckN1YWRyb1RleHRvUGFnaW5hTGlicm8pOwogICAgICB9KS5jYXRjaCgoZXJyb3IpPT57CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yLiBFOiAke2Vycm9yLm1lc3NhZ2V9YCk7CiAgICAgICAgY29uc29sZS5sb2coYEh1Ym8gJHtlcnJvci5ncmFwaFFMRXJyb3JzfSBlcnJvcmVzIGdyYXBocWxgKTsKICAgICAgfSkKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["Pagina.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Pagina.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    class=\"pagina\"\n    :style=\"[estiloColumna, estiloSize, estiloApariencia]\"\n    :class=\"{ seleccionada, deshabilitado: uploadingInfo, segundoPlano }\"\n    @mousedown.left.stop=\"accionCrearElemento\"\n    @mousemove=\"resizeFantasmaElemento\"\n    @mouseup=\"endDibujandoElemento\"\n    @click=\"idElementoSeleccionado=null\"\n  >\n    <div class=\"zonaControlesPagina\" v-show=\"seleccionada\">\n      <img\n        src=\"@/assets/iconos/delete.png\"\n        class=\"bControlesPagina bEliminarPagina\"\n        @click=\"eliminarse\"\n      />\n    </div>\n\n    <herramientas-edicion\n      v-show=\"seleccionada\"\n      ref=\"herramientasEdicion\"\n      @creacionTexto=\"\n        desactivarHerramientas();\n        creandoTexto = true;\n      \"\n      @creacionImagen=\"\n        desactivarHerramientas();\n        creandoImagen = true;\n      \"\n    />\n\n    <div id=\"fantasmaTexto\" class=\"fantasmaElemento\" :style=\"[estiloLayoutFantasmaTexto]\" v-show=\"dibujandoTexto\"></div>\n    <div id=\"fantasmaImagen\" class=\"fantasmaElemento\" :style=\"[estiloLayoutFantasmaImagen]\" v-show=\"dibujandoImagen\"></div>\n\n    <cuadro-imagen\n      v-for=\"cuadroImagen of estaPagina.cuadrosImagen\"\n      class=\"elementoPagina\"\n      :key=\"cuadroImagen.id\"\n      :esteCuadroImagen=\"cuadroImagen\"\n      :idLibro=\"idLibro\"\n      :idPagina=\"estaPagina.id\"\n      :sizePagina=\"size\"\n    />\n\n    <cuadro-texto\n      v-for=\"cuadroTexto of estaPagina.cuadrosTexto\"\n      class=\"elementoPagina\"\n      :class=\"{primerPlano:idElementoSeleccionado==cuadroTexto.id}\"\n      :key=\"cuadroTexto.id\"\n      :esteCuadroTexto=\"cuadroTexto\"\n      :idLibro=\"idLibro\"\n      :idPagina=\"estaPagina.id\"\n      :sizePagina=\"size\"\n      :seleccionado=\"idElementoSeleccionado==cuadroTexto.id\"\n      @click.native.stop=\"idElementoSeleccionado=cuadroTexto.id\"\n      @meElimine=\"$emit('elimineCuadroTexto', cuadroTexto.id)\"\n    />\n  </div>\n</template>\n\n<script>\nimport { gql } from \"apollo-server-core\";\nimport CuadroImagen from \"./CuadroImagen.vue\";\nimport CuadroTexto from \"./CuadroTexto.vue\";\nimport HerramientasEdicion from \"./HerramientasEdicion.vue\";\nimport { fragmentoCuadroImagen, fragmentoCuadroTexto } from './Libro.vue';\n\nexport default {\n  components: { CuadroImagen, CuadroTexto, HerramientasEdicion },\n  name: \"Pagina\",\n  props: {\n    estaPagina: Object,\n    paginaDerecha: Boolean,\n    preparada: {\n      type: Boolean,\n      default: false,\n    },\n    visible: {\n      type: Boolean,\n    },\n    idLibro: String,\n    seleccionada: Boolean,\n    segundoPlano: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  data() {\n    return {\n      ancho: 450,\n      alto: 600,\n      uploadingInfo: false,\n\n      creandoTexto: false,\n      creandoImagen: false,\n\n      dibujandoTexto: false,\n      dibujandoImagen: false,\n\n      posFantasmaTexto: {\n        x: 0,\n        y: 0,\n      },\n      sizeFantasmaTexto: {\n        x: 30,\n        y: 30,\n      },\n\n      posFantasmaImagen: {\n        x: 0,\n        y: 0,\n      },\n      sizeFantasmaImagen: {\n        x: 30,\n        y: 30,\n      },\n\n      idElementoSeleccionado:null,\n    };\n  },\n  computed: {\n    estiloColumna() {\n      if (this.paginaDerecha) {\n        return {\n          gridColumn: \"1/2\",\n          justifySelf: \"right\",\n        };\n      }\n      return null;\n    },\n    estiloSize() {\n      return {\n        width: this.ancho + \"px\",\n        height: this.alto + \"px\",\n      };\n    },\n    size() {\n      return {\n        x: this.ancho,\n        y: this.alto,\n      };\n    },\n    estiloApariencia() {\n      return {\n        backgroundColor: this.estaPagina.color,\n      };\n    },\n    estiloLayoutFantasmaTexto(){\n      return {\n        top: this.posFantasmaTexto.y+\"px\",\n        left: this.posFantasmaTexto.x+\"px\",\n        width: this.sizeFantasmaTexto.x+\"px\",\n        height: this.sizeFantasmaTexto.y+\"px\"\n      }\n    },\n    estiloLayoutFantasmaImagen(){\n      return {\n        top: this.posFantasmaImagen.y+\"px\",\n        left: this.posFantasmaImagen.x+\"px\",\n        width: this.sizeFantasmaImagen.x+\"px\",\n        height: this.sizeFantasmaImagen.y+\"px\"\n      }\n    }\n  },\n  methods: {\n    eliminarse() {\n      if (\n        !confirm(\n          \"Eliminando página. Esta operación no se puede deshacer. ¿Continuar?\"\n        )\n      ) {\n        return;\n      }\n      this.uploadingInfo = true;\n      console.log(`Eliminando una página`);\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation($idLibro: ID!, $idPagina: ID!) {\n              eliminarPaginaDeLibro(idLibro: $idLibro, idPagina: $idPagina)\n            }\n          `,\n          variables: {\n            idLibro: this.idLibro,\n            idPagina: this.estaPagina.id,\n          },\n        })\n        .then(({ data: { eliminarPaginaDeLibro } }) => {\n          console.log(`Resultado: ${eliminarPaginaDeLibro}`);\n          if (eliminarPaginaDeLibro) {\n            this.$emit(\"meElimine\");\n          }\n        })\n        .catch((error) => {\n          console.log(`Error. E: ${error}`);\n          this.uploadingInfo = false;\n        });\n    },\n    desactivarHerramientas() {\n      this.creandoTexto = false;\n      this.creandoImagen = false;\n    },\n    accionCrearElemento(e) {\n      const posPagina = this.$el.getBoundingClientRect();\n      const posClick = {\n        x: e.clientX - posPagina.left,\n        y: e.clientY - posPagina.top,\n      };\n\n      if (this.creandoTexto) {\n        this.dibujandoTexto = true;\n        this.$set(this.posFantasmaTexto, \"x\", Math.floor(posClick.x));\n        this.$set(this.posFantasmaTexto, \"y\", Math.floor(posClick.y));\n\n        this.$set(this.sizeFantasmaTexto, \"x\", 30);\n        this.$set(this.sizeFantasmaTexto, \"y\", 30);\n\n      } else if (this.creandoImagen) {\n        this.dibujandoImagen = true;\n        this.$set(this.posFantasmaImagen, \"x\", Math.floor(posClick.x));\n        this.$set(this.posFantasmaImagen, \"y\", Math.floor(posClick.y));\n\n        this.$set(this.sizeFantasmaImagen, \"x\", 30);\n        this.$set(this.sizeFantasmaImagen, \"y\", 30);\n      }\n    },\n    resizeFantasmaElemento(e) {\n      const posPagina = this.$el.getBoundingClientRect();\n      const posClick = {\n        x: e.clientX - posPagina.left,\n        y: e.clientY - posPagina.top,\n      };\n\n      if (this.dibujandoTexto) {\n        let sizeFantasma = {\n          x: posClick.x - this.posFantasmaTexto.x,\n          y: posClick.y - this.posFantasmaTexto.y,\n        };\n\n        if(sizeFantasma.x<30){\n          sizeFantasma.x=30\n        }\n        if(sizeFantasma.y<30){\n          sizeFantasma.y=30\n        }\n\n        this.$set(this.sizeFantasmaTexto, \"x\", Math.floor(sizeFantasma.x));\n        this.$set(this.sizeFantasmaTexto, \"y\", Math.floor(sizeFantasma.y));\n      }\n\n      if (this.dibujandoImagen) {\n        let sizeFantasma = {\n          x: posClick.x - this.posFantasmaImagen.x,\n          y: posClick.y - this.posFantasmaImagen.y,\n        };\n\n        if(sizeFantasma.x<30){\n          sizeFantasma.x=30\n        }\n        if(sizeFantasma.y<30){\n          sizeFantasma.y=30\n        }\n\n        this.$set(this.sizeFantasmaImagen, \"x\", Math.floor(sizeFantasma.x));\n        this.$set(this.sizeFantasmaImagen, \"y\", Math.floor(sizeFantasma.y));\n      }\n    },\n    endDibujandoElemento(){\n      if(this.dibujandoTexto){\n        console.log(`Creando cuadroTexto`);\n        this.dibujandoTexto=false;\n        this.$refs.herramientasEdicion.reset();\n        this.crearTextoFromFantasma();\n      }\n      else if(this.dibujandoImagen){\n        console.log(`Creando cuadro de imágen`);\n        this.dibujandoImagen=false;\n        this.$refs.herramientasEdicion.reset();\n\n        this.uploadingInfo=true;\n\n        this.$apollo.mutate({\n          mutation:gql`\n            mutation($idLibro:ID!, $idPagina:ID!)\n          `,\n        })\n\n        axios({\n          method: \"post\",\n          url: this.serverUrl + \"/apiCuentos/subirArchivoCuadroImagen\",\n          data: datos,\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n            Authorization: \"Bearer \" + this.$store.state.token,\n          },\n        }).then(()=>{\n\n        });\n      }\n      this.desactivarHerramientas();\n    },\n    crearCuadroImagenFromFantasma(){\n      var datosPosicion={\n        x:Math.round(this.posFantasmaTexto.x*100/this.$el.offsetWidth),\n        y:Math.round(this.posFantasmaTexto.y*100/this.$el.offsetHeight),\n      }\n\n      var datosSize={\n        x:Math.round(this.sizeFantasmaTexto.x*100/this.$el.offsetWidth),\n        y:Math.round(this.sizeFantasmaTexto.y*100/this.$el.offsetHeight),\n      }\n\n      this.$apollo.mutate({\n        mutation:gql`\n          mutation($idLibro:ID!, $idPagina:ID!, $datosPosicion:CoordsInput!, $datosSize:CoordsInput!){\n            crearCuadroImagenPaginaLibro(idLibro:$idLibro, idPagina:$idPagina, datosPosicion:$datosPosicion, datosSize:$datosSize){\n              ...fragCuadroImagen\n            }\n          }\n          ${fragmentoCuadroImagen}\n        `,\n        variables:{\n          idLibro:this.idLibro,\n          idPagina:this.estaPagina.id,\n          datosPosicion,\n          datosSize,\n        }\n      }).then(({data:{crearCuadroImagenPaginaLibro}})=>{\n        this.$emit(\"tengoNuevoCuadroImagen\", crearCuadroImagenPaginaLibro);\n      }).catch((error)=>{\n        console.log(`Error. E: ${error}`);\n      })\n    },\n    crearTextoFromFantasma(){\n      console.log(`Enviando con ${JSON.stringify(this.idLibro)}, ${JSON.stringify(this.estaPagina.id)}, ${JSON.stringify(this.posFantasmaTexto)}, ${JSON.stringify(this.sizeFantasmaTexto)}`);\n\n      var datosPosicion={\n        x:Math.round(this.posFantasmaTexto.x*100/this.$el.offsetWidth),\n        y:Math.round(this.posFantasmaTexto.y*100/this.$el.offsetHeight),\n      }\n\n      var datosSize={\n        x:Math.round(this.sizeFantasmaTexto.x*100/this.$el.offsetWidth),\n        y:Math.round(this.sizeFantasmaTexto.y*100/this.$el.offsetHeight),\n      }\n\n      this.$apollo.mutate({\n        mutation:gql`\n          mutation($idLibro:ID!, $idPagina: ID!, $datosPosicion:CoordsInput!, $datosSize:CoordsInput!){\n            crearCuadroTextoPaginaLibro(idLibro:$idLibro, idPagina:$idPagina, datosPosicion:$datosPosicion, datosSize:$datosSize){\n              ...fragCuadroTexto\n            }\n          }\n          ${fragmentoCuadroTexto}\n        `,\n        variables:{\n          idLibro:this.idLibro,\n          idPagina:this.estaPagina.id,\n          datosPosicion,\n          datosSize\n        },\n        errorPolicy:\"all\"\n      }).then(({data:{crearCuadroTextoPaginaLibro}})=>{\n        this.$emit(\"tengoNuevoCuadroTexto\", crearCuadroTextoPaginaLibro);\n      }).catch((error)=>{\n        console.log(`Error. E: ${error.message}`);\n        console.log(`Hubo ${error.graphQLErrors} errores graphql`);\n      })\n    }\n  },\n};\n</script>\n\n<style scoped>\n.pagina {\n  border: 2px solid black;\n  position: relative;\n  z-index: 0;\n  user-select: none;\n}\n\n.segundoPlano {\n  opacity: 0.3;\n}\n.elementoPagina{\n  z-index:100;\n}\n.primerPlano{\n  z-index: 500;\n}\n.seleccionada {\n  border-color: purple;\n}\n\n.zonaControlesPagina {\n  text-align: center;\n  padding: 10px;\n  position: absolute;\n  top: -60px;\n  left: 50%;\n  transform: translateX(-50%);\n}\n\n.bControlesPagina {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n\n  cursor: pointer;\n  display: inline-block;\n  background-color: rgb(255, 231, 255);\n}\n\n#herramientasEdicion {\n  position: absolute;\n  top: 150px;\n  left: -100px;\n}\n.fantasmaElemento{\n  position:absolute;\n  border:3px dotted purple;\n  border-radius: 5px;\n  background-color: rgba(128, 0, 128, 0.205);\n  box-sizing: border-box;\n}\n</style>"]}]}