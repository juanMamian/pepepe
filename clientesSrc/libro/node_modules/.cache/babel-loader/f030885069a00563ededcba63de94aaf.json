{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/libro/node_modules/eslint-loader/index.js??ref--13-0!/home/juan/webPj/pepepe/libro/src/apollo.js","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/apollo.js","mtime":1616795156474},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvanVhbi93ZWJQai9wZXBlcGUvbGlicm8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgeyBBcG9sbG9DbGllbnQgfSBmcm9tICJhcG9sbG8tY2xpZW50IjsKaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gImFwb2xsby1jYWNoZS1pbm1lbW9yeSI7CmltcG9ydCB7IGNyZWF0ZUh0dHBMaW5rIH0gZnJvbSAiYXBvbGxvLWxpbmstaHR0cCI7CmltcG9ydCBWdWVBcG9sbG8gZnJvbSAidnVlLWFwb2xsbyI7CmltcG9ydCB7IHR5cGVEZWZzLCByZXNvbHZlcnMgfSBmcm9tICIuL2Fwb2xsb1N0b3JlL1NjaGVtYSI7CmltcG9ydCB7IHNwbGl0IH0gZnJvbSAiYXBvbGxvLWxpbmsiOwppbXBvcnQgeyBXZWJTb2NrZXRMaW5rIH0gZnJvbSAiYXBvbGxvLWxpbmstd3MiOwppbXBvcnQgeyBnZXRNYWluRGVmaW5pdGlvbiB9IGZyb20gImFwb2xsby11dGlsaXRpZXMiOwppbXBvcnQgeyBzZXRDb250ZXh0IH0gZnJvbSAiYXBvbGxvLWxpbmstY29udGV4dCI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKVnVlLnVzZShWdWVBcG9sbG8pOwp2YXIgY2FjaGUgPSBuZXcgSW5NZW1vcnlDYWNoZSgpOwoKdmFyIGdldFRva2VuID0gZnVuY3Rpb24gZ2V0VG9rZW4oKSB7CiAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwp9OwoKZXhwb3J0IHZhciBzZXJ2ZXJVcmwgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gJ2h0dHBzOi8vcGUtcGUtcGUuaGVyb2t1YXBwLmNvbScgOiAnaHR0cDovL2xvY2FsaG9zdDozMDAwJzsKZXhwb3J0IHZhciB3c1NlcnZlclVybCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnd3NzOi8vJyArIHNlcnZlclVybC5zdWJzdHIoNykgKyAnL3N1YnNjcmlwY2lvbmVzJyA6ICd3czovLycgKyBzZXJ2ZXJVcmwuc3Vic3RyKDcpICsgJy9zdWJzY3JpcGNpb25lcyc7IC8vY29uc29sZS5sb2coYFNlcnZlciB1cmw6ICR7c2VydmVyVXJsfWApOwoKdmFyIGh0dHBMaW5rID0gY3JlYXRlSHR0cExpbmsoewogIHVyaTogc2VydmVyVXJsICsgIi9ncmFwaHFsIgp9KTsgLy9jb25zb2xlLmxvZyhgRGlyZWNjaW9uIHN1YnNjcmlwY2lvbmVzICR7d3NTZXJ2ZXJVcmx9YCk7Cgp2YXIgd3NMaW5rID0gbmV3IFdlYlNvY2tldExpbmsoewogIHVyaTogd3NTZXJ2ZXJVcmwsCiAgb3B0aW9uczogewogICAgcmVjb25uZWN0OiB0cnVlLAogICAgY29ubmVjdGlvblBhcmFtczogewogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdChnZXRUb2tlbigpKQogICAgICB9CiAgICB9CiAgfQp9KTsKdmFyIGF1dGhMaW5rID0gc2V0Q29udGV4dChmdW5jdGlvbiAoXywgX3JlZikgewogIHZhciBoZWFkZXJzID0gX3JlZi5oZWFkZXJzOwogIHJldHVybiB7CiAgICBoZWFkZXJzOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGhlYWRlcnMpLCB7fSwgewogICAgICBhdXRob3JpemF0aW9uOiBnZXRUb2tlbigpCiAgICB9KQogIH07Cn0pOwp2YXIgbGluayA9IGF1dGhMaW5rLmNvbmNhdChodHRwTGluayk7CnZhciBmaW5hbExpbmsgPSBzcGxpdCggLy8gc3BsaXQgYmFzZWQgb24gb3BlcmF0aW9uIHR5cGUKZnVuY3Rpb24gKF9yZWYyKSB7CiAgdmFyIHF1ZXJ5ID0gX3JlZjIucXVlcnk7CiAgdmFyIGRlZmluaXRpb24gPSBnZXRNYWluRGVmaW5pdGlvbihxdWVyeSk7CiAgcmV0dXJuIGRlZmluaXRpb24ua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nICYmIGRlZmluaXRpb24ub3BlcmF0aW9uID09PSAnc3Vic2NyaXB0aW9uJzsKfSwgd3NMaW5rLCBsaW5rKTsKZXhwb3J0IHZhciBhcG9sbG9DbGllbnQgPSBuZXcgQXBvbGxvQ2xpZW50KHsKICBsaW5rOiBmaW5hbExpbmssCiAgY2FjaGU6IGNhY2hlLAogIHR5cGVEZWZzOiB0eXBlRGVmcywKICByZXNvbHZlcnM6IHJlc29sdmVycywKICBjb25uZWN0VG9EZXZUb29sczogdHJ1ZQp9KTsKZXhwb3J0IHZhciBhcG9sbG9Qcm92aWRlciA9IG5ldyBWdWVBcG9sbG8oewogIGRlZmF1bHRDbGllbnQ6IGFwb2xsb0NsaWVudAp9KTs="},{"version":3,"sources":["/home/juan/webPj/pepepe/libro/src/apollo.js"],"names":["ApolloClient","InMemoryCache","createHttpLink","VueApollo","typeDefs","resolvers","split","WebSocketLink","getMainDefinition","setContext","Vue","use","cache","getToken","localStorage","getItem","serverUrl","process","env","NODE_ENV","wsServerUrl","substr","httpLink","uri","wsLink","options","reconnect","connectionParams","headers","Authorization","authLink","_","authorization","link","concat","finalLink","query","definition","kind","operation","apolloClient","connectToDevTools","apolloProvider","defaultClient"],"mappings":";;AAAA,SAAQA,YAAR,QAA2B,eAA3B;AACA,SAAQC,aAAR,QAA4B,uBAA5B;AACA,SAAQC,cAAR,QAA6B,kBAA7B;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAmC,sBAAnC;AACA,SAAQC,KAAR,QAAoB,aAApB;AACA,SAAQC,aAAR,QAA4B,gBAA5B;AACA,SAAQC,iBAAR,QAAgC,kBAAhC;AACC,SAAQC,UAAR,QAAyB,qBAAzB;AACD,OAAOC,GAAP,MAAgB,KAAhB;AAEAA,GAAG,CAACC,GAAJ,CAAQR,SAAR;AAEA,IAAMS,KAAK,GAAE,IAAIX,aAAJ,EAAb;;AAGA,IAAIY,QAAQ,GAAG,SAAXA,QAAW;AAAA,SAAKC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAL;AAAA,CAAf;;AAGA,OAAO,IAAMC,SAAS,GAACC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACrB,gCADqB,GAErB,uBAFK;AAIP,OAAO,IAAMC,WAAW,GAACH,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACvB,WAASH,SAAS,CAACK,MAAV,CAAiB,CAAjB,CAAT,GAA6B,iBADN,GAEvB,UAAQL,SAAS,CAACK,MAAV,CAAiB,CAAjB,CAAR,GAA4B,iBAFvB,C,CAIP;;AAGA,IAAMC,QAAQ,GAAGpB,cAAc,CAAC;AAC9BqB,EAAAA,GAAG,EAAEP,SAAS,GAAC;AADe,CAAD,CAA/B,C,CAIA;;AAEA,IAAMQ,MAAM,GAAG,IAAIjB,aAAJ,CAAkB;AAC/BgB,EAAAA,GAAG,EAAEH,WAD0B;AAE/BK,EAAAA,OAAO,EAAE;AACPC,IAAAA,SAAS,EAAE,IADJ;AAEPC,IAAAA,gBAAgB,EAAE;AAChBC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,mBAAYhB,QAAQ,EAApB;AADN;AADO;AAFX;AAFsB,CAAlB,CAAf;AAYA,IAAMiB,QAAQ,GAACrB,UAAU,CAAC,UAACsB,CAAD,QAAgB;AAAA,MAAXH,OAAW,QAAXA,OAAW;AAEtC,SAAO;AACHA,IAAAA,OAAO,kCACAA,OADA;AAEHI,MAAAA,aAAa,EAAEnB,QAAQ;AAFpB;AADJ,GAAP;AAMH,CARwB,CAAzB;AAUA,IAAMoB,IAAI,GAACH,QAAQ,CAACI,MAAT,CAAgBZ,QAAhB,CAAX;AAGA,IAAMa,SAAS,GAAG7B,KAAK,EACrB;AACA,iBAAe;AAAA,MAAZ8B,KAAY,SAAZA,KAAY;AACb,MAAMC,UAAU,GAAG7B,iBAAiB,CAAC4B,KAAD,CAApC;AACA,SAAOC,UAAU,CAACC,IAAX,KAAoB,qBAApB,IACLD,UAAU,CAACE,SAAX,KAAyB,cAD3B;AAED,CANoB,EAOrBf,MAPqB,EAQrBS,IARqB,CAAvB;AAWA,OAAO,IAAMO,YAAY,GAAC,IAAIxC,YAAJ,CAAiB;AACzCiC,EAAAA,IAAI,EAACE,SADoC;AAEzCvB,EAAAA,KAAK,EAALA,KAFyC;AAGzCR,EAAAA,QAAQ,EAARA,QAHyC;AAIzCC,EAAAA,SAAS,EAATA,SAJyC;AAKzCoC,EAAAA,iBAAiB,EAAC;AALuB,CAAjB,CAAnB;AAQP,OAAO,IAAMC,cAAc,GAAC,IAAIvC,SAAJ,CAAc;AACxCwC,EAAAA,aAAa,EAACH;AAD0B,CAAd,CAArB","sourcesContent":["import {ApolloClient} from \"apollo-client\"\nimport {InMemoryCache} from \"apollo-cache-inmemory\";\nimport {createHttpLink} from \"apollo-link-http\"\nimport VueApollo from \"vue-apollo\";\nimport { typeDefs, resolvers} from \"./apolloStore/Schema\"\nimport {split} from \"apollo-link\"\nimport {WebSocketLink} from \"apollo-link-ws\"\nimport {getMainDefinition} from \"apollo-utilities\"\n import {setContext} from \"apollo-link-context\"\nimport Vue from 'vue'\n\nVue.use(VueApollo);\n\nconst cache= new InMemoryCache();\n\n\nlet getToken = ()=> localStorage.getItem('token');\n\n\nexport const serverUrl=process.env.NODE_ENV === 'production'\n? 'https://pe-pe-pe.herokuapp.com'\n: 'http://localhost:3000'\n\nexport const wsServerUrl=process.env.NODE_ENV === 'production'\n? 'wss://'+serverUrl.substr(7)+'/subscripciones'\n: 'ws://'+serverUrl.substr(7)+'/subscripciones'\n\n//console.log(`Server url: ${serverUrl}`);\n\n\nconst httpLink = createHttpLink({\n  uri: serverUrl+\"/graphql\"\n});\n\n//console.log(`Direccion subscripciones ${wsServerUrl}`);\n\nconst wsLink = new WebSocketLink({\n  uri: wsServerUrl,\n  options: {\n    reconnect: true,\n    connectionParams: {\n      headers: {\n        Authorization: `Bearer ${getToken()}`\n      }\n    }\n  },\n})\n\nconst authLink=setContext((_, {headers})=>{\n    \n    return {\n        headers:{\n            ...headers,\n            authorization: getToken()\n        }\n    }\n});\n\nconst link=authLink.concat(httpLink);\n\n\nconst finalLink = split(\n  // split based on operation type\n  ({ query }) => {\n    const definition = getMainDefinition(query)\n    return definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n  },\n  wsLink,\n  link\n)\n\nexport const apolloClient=new ApolloClient({\n  link:finalLink,\n  cache,\n  typeDefs,\n  resolvers,\n  connectToDevTools:true,\n});\n\nexport const apolloProvider=new VueApollo({\n  defaultClient:apolloClient\n})"]}]}