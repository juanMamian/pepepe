{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/libro/src/components/IconoPersonaAutonomo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/components/IconoPersonaAutonomo.vue","mtime":1617665825185},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvanVhbi93ZWJQai9wZXBlcGUvbGlicm8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCI7Cgp2YXIgX3RlbXBsYXRlT2JqZWN0LCBfdGVtcGxhdGVPYmplY3QyOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgZ3FsIGZyb20gImdyYXBocWwtdGFnIjsKdmFyIFFVRVJZX1BFUlNPTkEgPSBncWwoX3RlbXBsYXRlT2JqZWN0IHx8IChfdGVtcGxhdGVPYmplY3QgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gIHF1ZXJ5KCRpZFVzdWFyaW86IElEISkge1xuICAgIHB1YmxpY1VzdWFyaW8oaWRVc3VhcmlvOiAkaWRVc3VhcmlvKSB7XG4gICAgICBpZFxuICAgICAgbm9tYnJlc1xuICAgICAgYXBlbGxpZG9zXG4gICAgICB1c2VybmFtZVxuICAgIH1cbiAgfVxuIl0pKSk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSWNvbm9QZXJzb25hQXV0b25vbW8iLAogIGFwb2xsbzogewogICAgZXN0YVBlcnNvbmE6IHsKICAgICAgcXVlcnk6IFFVRVJZX1BFUlNPTkEsCiAgICAgIHZhcmlhYmxlczogZnVuY3Rpb24gdmFyaWFibGVzKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBpZFVzdWFyaW86IHRoaXMuaWRQZXJzb25hCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoX3JlZikgewogICAgICAgIHZhciBwdWJsaWNVc3VhcmlvID0gX3JlZi5wdWJsaWNVc3VhcmlvOwogICAgICAgIHJldHVybiBwdWJsaWNVc3VhcmlvOwogICAgICB9LAogICAgICBza2lwOiBmdW5jdGlvbiBza2lwKCkgewogICAgICAgIHJldHVybiAhdGhpcy5pZFBlcnNvbmE7CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlc3RhUGVyc29uYTogewogICAgICAgIHBlcm1pc29zOiBbXQogICAgICB9LAogICAgICBudWV2b1Blcm1pc286IG51bGwsCiAgICAgIG1vdW50ZWQ6IGZhbHNlLAogICAgICBmb3RvZ3JhZmlhRW5hYmxlZDogZmFsc2UKICAgIH07CiAgfSwKICBwcm9wczogewogICAgaWRQZXJzb25hOiBTdHJpbmcsCiAgICBzZWxlY2Npb25hZG86IEJvb2xlYW4sCiAgICBtZW51Q29udGV4dHVhbDogQm9vbGVhbiwKICAgIG9wY2lvbmVzTWVudUN4OiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgc295WW86IGZ1bmN0aW9uIHNveVlvKCkgewogICAgICBpZiAodGhpcy5tb3VudGVkICYmIHRoaXMuaWRQZXJzb25hICYmIHRoaXMuJHN0b3JlLnN0YXRlLnVzdWFyaW8pIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXN1YXJpby5pZCA9PSB0aGlzLmlkUGVyc29uYSA/IHRydWUgOiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkUGVybWlzb3M6IGZ1bmN0aW9uIGFkZFBlcm1pc29zKCkgewogICAgICBjb25zb2xlLmxvZygiZW52aWFuZG8gIi5jb25jYXQodGhpcy5udWV2b1Blcm1pc28sICIgcGFyYSBlbCB1c3VhcmlvIGNvbiBpZCAiKS5jb25jYXQodGhpcy5pZFBlcnNvbmEpKTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QyIHx8IChfdGVtcGxhdGVPYmplY3QyID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24oJG51ZXZvUGVybWlzbzogU3RyaW5nISwgJGlkVXN1YXJpbzogSUQhKSB7XG4gICAgICAgICAgICAgIGFkZFBlcm1pc29Vc3VhcmlvKFxuICAgICAgICAgICAgICAgIG51ZXZvUGVybWlzbzogJG51ZXZvUGVybWlzb1xuICAgICAgICAgICAgICAgIGlkVXN1YXJpbzogJGlkVXN1YXJpb1xuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgIHBlcm1pc29zXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAiXSkpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIG51ZXZvUGVybWlzbzogdGhpcy5udWV2b1Blcm1pc28sCiAgICAgICAgICBpZFVzdWFyaW86IHRoaXMuaWRQZXJzb25hCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHt9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiZXJyb3I6ICIgKyBlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIGNvcGlhcklkOiBmdW5jdGlvbiBjb3BpYXJJZChlKSB7CiAgICAgIHZhciBzdHIgPSBlLnRhcmdldC5pbm5lclRleHQudHJpbSgpOwogICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICBlbC52YWx1ZSA9IHN0cjsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7CiAgICAgIGVsLnNlbGVjdCgpOwogICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgiY29weSIpOwogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTsKICAgIH0sCiAgICBmb3RvZ3JhZmlhQ2FyZ2FkYTogZnVuY3Rpb24gZm90b2dyYWZpYUNhcmdhZGEoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJGb3RvZ3JhZlx4RURhIGNhcmdhZGEiKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLm1vdW50ZWQgPSB0cnVlOwogIH0sCiAgYmVmb3JlUm91dGVVcGRhdGU6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlVXBkYXRlKCkgewogICAgY29uc29sZS5sb2coIkJlZm9yZSB1cGRhdGUiKTsKICB9Cn07"},{"version":3,"sources":["IconoPersonaAutonomo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,OAAA,GAAA,MAAA,aAAA;AAEA,IAAA,aAAA,GAAA,GAAA,qNAAA;AAWA,eAAA;AACA,EAAA,IAAA,EAAA,sBADA;AAEA,EAAA,MAAA,EAAA;AACA,IAAA,WAAA,EAAA;AACA,MAAA,KAAA,EAAA,aADA;AAEA,MAAA,SAFA,uBAEA;AACA,eAAA;AACA,UAAA,SAAA,EAAA,KAAA;AADA,SAAA;AAGA,OANA;AAOA,MAAA,MAPA,wBAOA;AAAA,YAAA,aAAA,QAAA,aAAA;AACA,eAAA,aAAA;AACA,OATA;AAUA,MAAA,IAVA,kBAUA;AACA,eAAA,CAAA,KAAA,SAAA;AACA;AAZA;AADA,GAFA;AAkBA,EAAA,IAlBA,kBAkBA;AACA,WAAA;AACA,MAAA,WAAA,EAAA;AACA,QAAA,QAAA,EAAA;AADA,OADA;AAIA,MAAA,YAAA,EAAA,IAJA;AAKA,MAAA,OAAA,EAAA,KALA;AAMA,MAAA,iBAAA,EAAA;AANA,KAAA;AAQA,GA3BA;AA4BA,EAAA,KAAA,EAAA;AACA,IAAA,SAAA,EAAA,MADA;AAEA,IAAA,YAAA,EAAA,OAFA;AAGA,IAAA,cAAA,EAAA,OAHA;AAIA,IAAA,cAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AAJA,GA5BA;AAoCA,EAAA,QAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,UAAA,KAAA,OAAA,IAAA,KAAA,SAAA,IAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA,EAAA;AACA,eAAA,KAAA,MAAA,CAAA,KAAA,CAAA,OAAA,CAAA,EAAA,IAAA,KAAA,SAAA,GAAA,IAAA,GAAA,KAAA;AACA;;AACA,aAAA,KAAA;AACA;AANA,GApCA;AA4CA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,MAAA,OAAA,CAAA,GAAA,oBACA,KAAA,YADA,qCACA,KAAA,SADA;AAGA,WAAA,OAAA,CACA,MADA,CACA;AACA,QAAA,QAAA,EAAA,GAAA,2WADA;AAYA,QAAA,SAAA,EAAA;AACA,UAAA,YAAA,EAAA,KAAA,YADA;AAEA,UAAA,SAAA,EAAA,KAAA;AAFA;AAZA,OADA,EAkBA,IAlBA,CAkBA,YAAA,CAAA,CAlBA,EAmBA,KAnBA,CAmBA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,YAAA,KAAA;AACA,OArBA;AAsBA,KA3BA;AA4BA,IAAA,QA5BA,oBA4BA,CA5BA,EA4BA;AACA,UAAA,GAAA,GAAA,CAAA,CAAA,MAAA,CAAA,SAAA,CAAA,IAAA,EAAA;AACA,UAAA,EAAA,GAAA,QAAA,CAAA,aAAA,CAAA,UAAA,CAAA;AACA,MAAA,EAAA,CAAA,KAAA,GAAA,GAAA;AACA,MAAA,QAAA,CAAA,IAAA,CAAA,WAAA,CAAA,EAAA;AACA,MAAA,EAAA,CAAA,MAAA;AACA,MAAA,QAAA,CAAA,WAAA,CAAA,MAAA;AACA,MAAA,QAAA,CAAA,IAAA,CAAA,WAAA,CAAA,EAAA;AACA,KApCA;AAqCA,IAAA,iBArCA,+BAqCA;AACA,MAAA,OAAA,CAAA,GAAA;AACA;AAvCA,GA5CA;AAqFA,EAAA,OArFA,qBAqFA;AACA,SAAA,OAAA,GAAA,IAAA;AACA,GAvFA;AAwFA,EAAA,iBAxFA,+BAwFA;AACA,IAAA,OAAA,CAAA,GAAA;AACA;AA1FA,CAAA","sourcesContent":["<template>\n  <div\n    class=\"iconoPersonaAutonomo\"\n    :class=\"{ yo: soyYo, seleccionado: seleccionado }\"\n  >\n    <img\n      class=\"fotografia\"\n      :src=\"this.serverUrl + '/api/usuarios/fotografias/' + idPersona\"\n      v-show=\"fotografiaEnabled\"\n      @load=\"fotografiaEnabled = true\"\n      alt=\"\"\n    />\n    <div id=\"contenedorAlertas\">\n      <slot name=\"alertas\"></slot>\n    </div>\n    <div class=\"nombres\" :class=\"{ nombreSeleccionado: seleccionado }\">\n      {{ estaPersona.nombres }}\n    </div>\n    <div id=\"menuCxPersona\" v-show=\"menuContextual\">\n      <div class=\"botonMenuCx\" @click.stop=\"copiarId\">{{ idPersona }}</div>\n      <div class=\"botonMenuCx\" v-if=\"usuarioSuperadministrador\">\n        {{ estaPersona.username }}\n      </div>\n      <input type=\"text\" v-model=\"nuevoPermiso\" placeholder=\"Nuevo permiso\" />\n      <div class=\"botonMenuCx\" @click.stop=\"addPermisos\">Dar permiso</div>\n      <div\n        class=\"botonMenuCx\"\n        :key=\"index\"\n        v-for=\"(opcionCx, index) of opcionesMenuCx\"\n        @click=\"$emit(opcionCx.evento)\"\n      >\n        {{ opcionCx.textoVisible }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\n\nconst QUERY_PERSONA = gql`\n  query($idUsuario: ID!) {\n    publicUsuario(idUsuario: $idUsuario) {\n      id\n      nombres\n      apellidos\n      username\n    }\n  }\n`;\n\nexport default {\n  name: \"IconoPersonaAutonomo\",\n  apollo: {\n    estaPersona: {\n      query: QUERY_PERSONA,\n      variables() {\n        return {\n          idUsuario: this.idPersona,\n        };\n      },\n      update({ publicUsuario }) {\n        return publicUsuario;\n      },\n      skip() {\n        return !this.idPersona;\n      },\n    },\n  },\n  data() {\n    return {\n      estaPersona: {\n        permisos: [],\n      },\n      nuevoPermiso: null,\n      mounted: false,\n      fotografiaEnabled: false,\n    };\n  },\n  props: {\n    idPersona: String,\n    seleccionado: Boolean,\n    menuContextual: Boolean,\n    opcionesMenuCx: {\n      type: Array,\n    },\n  },\n  computed: {\n    soyYo() {\n      if (this.mounted && this.idPersona && this.$store.state.usuario) {\n        return this.$store.state.usuario.id == this.idPersona ? true : false;\n      }\n      return false;\n    },\n  },\n  methods: {\n    addPermisos() {\n      console.log(\n        `enviando ${this.nuevoPermiso} para el usuario con id ${this.idPersona}`\n      );\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation($nuevoPermiso: String!, $idUsuario: ID!) {\n              addPermisoUsuario(\n                nuevoPermiso: $nuevoPermiso\n                idUsuario: $idUsuario\n              ) {\n                id\n                permisos\n              }\n            }\n          `,\n          variables: {\n            nuevoPermiso: this.nuevoPermiso,\n            idUsuario: this.idPersona,\n          },\n        })\n        .then(() => {})\n        .catch((error) => {\n          console.log(\"error: \" + error);\n        });\n    },\n    copiarId(e) {\n      let str = e.target.innerText.trim();\n      const el = document.createElement(\"textarea\");\n      el.value = str;\n      document.body.appendChild(el);\n      el.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(el);\n    },\n    fotografiaCargada() {\n      console.log(`Fotografía cargada`);\n    },\n  },\n  mounted() {\n    this.mounted = true;\n  },\n  beforeRouteUpdate() {\n    console.log(`Before update`);\n  },\n};\n</script>\n\n<style scoped>\n.iconoPersonaAutonomo {\n  cursor: pointer;\n  position: relative;\n  border-radius: 50%;\n  user-select: none;\n  width: 70px;\n  height: 70px;\n  border: 1px solid transparent;\n}\n.iconoPersonaAutonomo:hover {\n  border-color: purple;\n}\n\n.fotografia {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  position: absolute;\n  pointer-events: none;\n}\n.seleccionado {\n  border-color: purple;\n}\n#contenedorAlertas {\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n.yo {\n  border: 1px solid purple;\n}\n\n.nombres {\n  background-color: rgb(243, 216, 204);\n  position: absolute;\n  top: 105%;\n  left: 50%;\n  transform: translateX(-50%);\n  text-align: center;\n  border: 1px solid rgb(105, 24, 24);\n  padding: 3px 5px;\n  border-radius: 5px;\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2),\n    0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.nombreSeleccionado {\n  background-color: rgb(241, 175, 147);\n}\n\n.botonMenuCx {\n  cursor: pointer;\n  font-size: 14px;\n  padding: 3px 7px;\n}\n.seccionMenuCx {\n  font-size: 15px;\n  color: rgb(71, 71, 71);\n}\n.infoMenuCx {\n  font-size: 15px;\n  color: rgb(107, 107, 107);\n}\n.botonMenuCx:hover {\n  background-color: gray;\n}\n#menuCxPersona {\n  position: absolute;\n  top: 110%;\n  left: 110%;\n  min-width: 140px;\n\n  z-index: 10;\n  background-color: rgb(177, 177, 159);\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2),\n    0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n</style>"],"sourceRoot":"src/components"}]}