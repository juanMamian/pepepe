{"remainingRequest":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/thread-loader/dist/cjs.js!/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/clientesSrc/libro/src/components/foros/Respuesta.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/src/components/foros/Respuesta.vue","mtime":1621134760648},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/clientesSrc/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvanVhbi93ZWJQai9wZXBlcGUvY2xpZW50ZXNTcmMvbGlicm8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCI7Cgp2YXIgX3RlbXBsYXRlT2JqZWN0OwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CmltcG9ydCBJbnRlcnBvbGFjaW9uIGZyb20gIi4vSW50ZXJwb2xhY2lvbi52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgSW50ZXJwb2xhY2lvbjogSW50ZXJwb2xhY2lvbgogIH0sCiAgbmFtZTogIlJlc3B1ZXN0YSIsCiAgcHJvcHM6IHsKICAgIGVzdGFSZXNwdWVzdGE6IHsKICAgICAgdHlwZTogT2JqZWN0CiAgICB9LAogICAgaWRDb252ZXJzYWNpb246IFN0cmluZwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZlY2hhRm9ybWF0ZWFkYTogZnVuY3Rpb24gZmVjaGFGb3JtYXRlYWRhKCkgewogICAgICB2YXIgbGFGZWNoYSA9IG5ldyBEYXRlKHRoaXMuZXN0YVJlc3B1ZXN0YS5mZWNoYSkudG9TdHJpbmcoKTsKICAgICAgdmFyIGluZGV4UGFyZW50ZXNpcyA9IGxhRmVjaGEuaW5kZXhPZigiKCIpOwogICAgICB2YXIgZmVjaGFDb3J0YSA9IGxhRmVjaGEuc3Vic3RyKDAsIGluZGV4UGFyZW50ZXNpcyk7CiAgICAgIHZhciBpbmRleEdNVCA9IGZlY2hhQ29ydGEuaW5kZXhPZigiR01UIik7CgogICAgICBpZiAoaW5kZXhHTVQgPiAtMSkgewogICAgICAgIGZlY2hhQ29ydGEgPSBmZWNoYUNvcnRhLnN1YnN0cigwLCBpbmRleEdNVCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZWNoYUNvcnRhOwogICAgfSwKICAgIHVzdWFyaW9BdXRvcjogZnVuY3Rpb24gdXN1YXJpb0F1dG9yKCkgewogICAgICBpZiAodGhpcy51c3VhcmlvLmlkID09IHRoaXMuZXN0YVJlc3B1ZXN0YS5pbmZvQXV0b3IuaWQpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZW1pdGlyU29saWNpdHVkQ2l0YTogZnVuY3Rpb24gZW1pdGlyU29saWNpdHVkQ2l0YSgpIHsKICAgICAgdmFyIHF1b3RlID0gewogICAgICAgIG1lbnNhamU6IHRoaXMuZXN0YVJlc3B1ZXN0YS5tZW5zYWplLAogICAgICAgIGludGVycG9sYWNpb25lczogdGhpcy5lc3RhUmVzcHVlc3RhLmludGVycG9sYWNpb25lcywKICAgICAgICBpbmZvQXV0b3I6IHRoaXMuZXN0YVJlc3B1ZXN0YS5pbmZvQXV0b3IsCiAgICAgICAgZmVjaGE6IHRoaXMuZXN0YVJlc3B1ZXN0YS5mZWNoYQogICAgICB9OwogICAgICBxdW90ZS5pbnRlcnBvbGFjaW9uZXMuZm9yRWFjaChmdW5jdGlvbiAoaW50ZXJwb2xhY2lvbikgewogICAgICAgIGRlbGV0ZSBpbnRlcnBvbGFjaW9uLl9fdHlwZW5hbWU7CiAgICAgIH0pOwogICAgICBkZWxldGUgcXVvdGUuaW5mb0F1dG9yLl9fdHlwZW5hbWU7CiAgICAgIHRoaXMuJGVtaXQoJ21lUXVpZXJlbkNpdGFyJywgcXVvdGUpOwogICAgfSwKICAgIGVsaW1pbmFyc2U6IGZ1bmN0aW9uIGVsaW1pbmFyc2UoKSB7CiAgICAgIHZhciBkaXMgPSB0aGlzOwoKICAgICAgaWYgKCFjb25maXJtKCJFbGltaW5hbmRvIHJlc3B1ZXN0YSDCv0NvbnRpbnVhcj8iKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QgfHwgKF90ZW1wbGF0ZU9iamVjdCA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICBtdXRhdGlvbigkaWRSZXNwdWVzdGE6IElEISwgJGlkQ29udmVyc2FjaW9uOiBJRCEpIHtcbiAgICAgICAgICAgIGVsaW1pbmFyUmVzcHVlc3RhKFxuICAgICAgICAgICAgICBpZFJlc3B1ZXN0YTogJGlkUmVzcHVlc3RhXG4gICAgICAgICAgICAgIGlkQ29udmVyc2FjaW9uOiAkaWRDb252ZXJzYWNpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICJdKSkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWRSZXNwdWVzdGE6IHRoaXMuZXN0YVJlc3B1ZXN0YS5pZCwKICAgICAgICAgIGlkQ29udmVyc2FjaW9uOiB0aGlzLmlkQ29udmVyc2FjaW9uCiAgICAgICAgfSwKICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShzdG9yZSwgX3JlZikgewogICAgICAgICAgdmFyIGVsaW1pbmFyUmVzcHVlc3RhID0gX3JlZi5kYXRhLmVsaW1pbmFyUmVzcHVlc3RhOwoKICAgICAgICAgIGlmIChlbGltaW5hclJlc3B1ZXN0YSkgewogICAgICAgICAgICBjb25zb2xlLmxvZygiUmVzcHVlc3RhIGVsaW1pbmFkYSIpOwogICAgICAgICAgICBkaXMuJGVtaXQoIm1lRWxpbWluZSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Respuesta.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA,OAAA,GAAA,MAAA,aAAA;AACA,OAAA,aAAA,MAAA,qBAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,aAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,WAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,aAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA,KADA;AAIA,IAAA,cAAA,EAAA;AAJA,GAHA;AASA,EAAA,QAAA,EAAA;AACA,IAAA,eAAA,EAAA,2BAAA;AACA,UAAA,OAAA,GAAA,IAAA,IAAA,CAAA,KAAA,aAAA,CAAA,KAAA,EAAA,QAAA,EAAA;AACA,UAAA,eAAA,GAAA,OAAA,CAAA,OAAA,CAAA,GAAA,CAAA;AACA,UAAA,UAAA,GAAA,OAAA,CAAA,MAAA,CAAA,CAAA,EAAA,eAAA,CAAA;AACA,UAAA,QAAA,GAAA,UAAA,CAAA,OAAA,CAAA,KAAA,CAAA;;AACA,UAAA,QAAA,GAAA,CAAA,CAAA,EAAA;AACA,QAAA,UAAA,GAAA,UAAA,CAAA,MAAA,CAAA,CAAA,EAAA,QAAA,CAAA;AACA;;AACA,aAAA,UAAA;AACA,KAVA;AAWA,IAAA,YAAA,EAAA,wBAAA;AACA,UAAA,KAAA,OAAA,CAAA,EAAA,IAAA,KAAA,aAAA,CAAA,SAAA,CAAA,EAAA,EAAA;AACA,eAAA,IAAA;AACA;;AACA,aAAA,KAAA;AACA;AAhBA,GATA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,iCACA;AACA,UAAA,KAAA,GAAA;AACA,QAAA,OAAA,EAAA,KAAA,aAAA,CAAA,OADA;AAEA,QAAA,eAAA,EAAA,KAAA,aAAA,CAAA,eAFA;AAGA,QAAA,SAAA,EAAA,KAAA,aAAA,CAAA,SAHA;AAIA,QAAA,KAAA,EAAA,KAAA,aAAA,CAAA;AAJA,OAAA;AAOA,MAAA,KAAA,CAAA,eAAA,CAAA,OAAA,CAAA,UAAA,aAAA,EAAA;AACA,eAAA,aAAA,CAAA,UAAA;AACA,OAFA;AAGA,aAAA,KAAA,CAAA,SAAA,CAAA,UAAA;AAEA,WAAA,KAAA,CAAA,gBAAA,EAAA,KAAA;AACA,KAfA;AAgBA,IAAA,UAhBA,wBAgBA;AACA,UAAA,GAAA,GAAA,IAAA;;AACA,UAAA,CAAA,OAAA,CAAA,kCAAA,CAAA,EAAA;AACA;AACA;;AACA,WAAA,OAAA,CAAA,MAAA,CAAA;AACA,QAAA,QAAA,EAAA,GAAA,kSADA;AASA,QAAA,SAAA,EAAA;AACA,UAAA,WAAA,EAAA,KAAA,aAAA,CAAA,EADA;AAEA,UAAA,cAAA,EAAA,KAAA;AAFA,SATA;AAaA,QAAA,MAbA,kBAaA,KAbA,QAaA;AAAA,cAAA,iBAAA,QAAA,IAAA,CAAA,iBAAA;;AACA,cAAA,iBAAA,EAAA;AACA,YAAA,OAAA,CAAA,GAAA;AACA,YAAA,GAAA,CAAA,KAAA,CAAA,WAAA;AACA;AACA;AAlBA,OAAA;AAoBA;AAzCA;AA3BA,CAAA","sourcesContent":["<template>\n  <div class=\"respuesta\">\n    <div class=\"infoRespuesta\">{{ fechaFormateada }}</div>\n    <img\n      :src=\"\n        this.serverUrl +\n        '/api/usuarios/fotografias/' +\n        estaRespuesta.infoAutor.id\n      \"\n      :alt=\"estaRespuesta.infoAutor.nombre\"\n      class=\"caritaAutor\"\n    />\n    <div id=\"zonaCuerpoMensaje\">\n      <div class=\"mensajeRespuesta\">\n        {{ estaRespuesta.mensaje }}\n      </div>\n      <interpolacion\n        v-for=\"interpolacion of estaRespuesta.interpolaciones\"\n        :key=\"interpolacion.id\"\n        :estaInterpolacion=\"interpolacion\"\n      />\n    </div>\n\n    <div\n      id=\"archivo\"\n      v-if=\"\n        estaRespuesta.archivo && estaRespuesta.archivo.googleDriveDirectLink\n      \"\n    >\n      <a :href=\"estaRespuesta.archivo.googleDriveDirectLink\">\n        <img\n          src=\"@/assets/iconos/downloadFile.png\"\n          alt=\"Descargar archivo\"\n          id=\"imgDownloadArchivo\"\n        />\n      </a>\n    </div>\n\n    <div\n      class=\"enlacesAdjuntos\"\n      v-show=\"\n        estaRespuesta.enlaceAdjunto && estaRespuesta.enlaceAdjunto.length > 0\n      \"\n    >\n      <a\n        target=\"_blank\"\n        :href=\"enlace\"\n        :key=\"index\"\n        v-for=\"(enlace, index) of estaRespuesta.enlaceAdjunto\"\n      >\n        <div class=\"enlaceAdjunto\">\n          {{ enlace }}\n        </div>\n      </a>\n    </div>\n\n    <div class=\"controles\">\n      <img\n        src=\"@/assets/iconos/quote.png\"\n        alt=\"Cita\"\n        title=\"Citar esta respuesta\"\n        class=\"botonInsertar\"\n        @click=\"emitirSolicitudCita\"\n      />\n      <div\n        class=\"controlRespuesta\"\n        id=\"bEliminar\"\n        v-if=\"usuarioSuperadministrador\"\n        @click=\"eliminarse\"\n      >\n        Eliminar\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Interpolacion from \"./Interpolacion.vue\";\nexport default {\n  components: { Interpolacion },\n  name: \"Respuesta\",\n  props: {\n    estaRespuesta: {\n      type: Object,\n    },\n    idConversacion: String,\n  },\n  computed: {\n    fechaFormateada: function () {\n      let laFecha = new Date(this.estaRespuesta.fecha).toString();\n      let indexParentesis = laFecha.indexOf(\"(\");\n      let fechaCorta = laFecha.substr(0, indexParentesis);\n      let indexGMT = fechaCorta.indexOf(\"GMT\");\n      if (indexGMT > -1) {\n        fechaCorta = fechaCorta.substr(0, indexGMT);\n      }\n      return fechaCorta;\n    },\n    usuarioAutor: function () {\n      if (this.usuario.id == this.estaRespuesta.infoAutor.id) {\n        return true;\n      }\n      return false;\n    },\n  },\n  methods: {\n    emitirSolicitudCita(){\n      var quote={\n        mensaje: this.estaRespuesta.mensaje,\n        interpolaciones:this.estaRespuesta.interpolaciones,\n        infoAutor:this.estaRespuesta.infoAutor,\n        fecha:this.estaRespuesta.fecha \n      }\n\n      quote.interpolaciones.forEach(interpolacion=>{\n        delete interpolacion.__typename;\n      })\n      delete quote.infoAutor.__typename;\n\n      this.$emit('meQuierenCitar', quote)\n    },\n    eliminarse() {\n      let dis = this;\n      if (!confirm(\"Eliminando respuesta Â¿Continuar?\")) {\n        return;\n      }\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation($idRespuesta: ID!, $idConversacion: ID!) {\n            eliminarRespuesta(\n              idRespuesta: $idRespuesta\n              idConversacion: $idConversacion\n            )\n          }\n        `,\n        variables: {\n          idRespuesta: this.estaRespuesta.id,\n          idConversacion: this.idConversacion,\n        },\n        update(store, { data: { eliminarRespuesta } }) {\n          if (eliminarRespuesta) {\n            console.log(`Respuesta eliminada`);\n            dis.$emit(\"meElimine\");\n          }\n        },\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.respuesta {\n  background-color: rgb(255 205 164);\n\n  border-radius: 15px;\n  display: grid;\n  grid-template-areas:\n    \"info info info\"\n    \"autor mensaje adjunto\"\n    \"... enlaceAdjunto enlaceAdjunto\"\n    \"controles controles controles\";\n  grid-template-columns: 100px 1fr 60px;\n  grid-template-rows: 50px 1fr min-content 15px;\n  row-gap: 10px;\n  align-items: center;\n  justify-items: center;\n  padding: 10px;\n}\n.infoRespuesta {\n  font-size: 10px;\n  margin: 5px 5px;\n  color: gray;\n  grid-area: info;\n  width: 100%;\n}\n#zonaCuerpoMensaje {\n  grid-area: mensaje;\n  width: 100%;\n  padding: 10px;\n  height: 100%;\n}\n.mensajeRespuesta {\n  white-space: pre-wrap;\n  margin-bottom: 15px;\n  font-size: 20px;\n}\n.caritaAutor {\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n  grid-area: autor;\n  align-self: flex-start;\n}\n.controles {\n  grid-area: controles;\n  width: 100%;\n  display: flex;\n  flex-flow: row-reverse;\n  font-size: 13px;\n}\n.controlRespuesta {\n  padding: 3px;\n  cursor: pointer;\n}\n.controlRespuesta:hover {\n  background-color: red;\n}\n#archivo {\n  padding: 5px;\n}\n\n#imgDownloadArchivo {\n  grid-area: adjunto;\n  width: 45px;\n  height: 45px;\n  border-radius: 50%;\n  background-color: #4bb36b;\n}\n\n.enlacesAdjuntos {\n  grid-area: enlaceAdjunto;\n  justify-self: left;\n}\n.enlaceAdjunto {\n  font-style: italic;\n  font-size: 14px;\n  word-wrap: break-word;\n  border-radius: 15px;\n  background-color: rgba(129, 66, 129, 0.349);\n  padding: 3px 5px;\n  cursor: pointer;\n  max-width: 600px;\n  margin: 3px;\n}\n.enlaceAdjunto:hover {\n  background-color: rgba(129, 66, 129, 0.733);\n}\n.botonInsertar {\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n}\n.botonInsertar:hover {\n  background-color: gray;\n}\n</style>"],"sourceRoot":"src/components/foros"}]}