{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/thread-loader/dist/cjs.js!/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/libro/node_modules/eslint-loader/index.js??ref--13-0!/home/juan/webPj/pepepe/libro/src/apollo.js","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/apollo.js","mtime":1636400085375},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvanVhbi93ZWJQai9wZXBlcGUvbGlicm8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgeyBBcG9sbG9DbGllbnQgfSBmcm9tICJhcG9sbG8tY2xpZW50IjsKaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gImFwb2xsby1jYWNoZS1pbm1lbW9yeSI7CmltcG9ydCB7IGNyZWF0ZUh0dHBMaW5rIH0gZnJvbSAiYXBvbGxvLWxpbmstaHR0cCI7CmltcG9ydCBWdWVBcG9sbG8gZnJvbSAidnVlLWFwb2xsbyI7CmltcG9ydCB7IHR5cGVEZWZzLCByZXNvbHZlcnMgfSBmcm9tICIuL2Fwb2xsb1N0b3JlL1NjaGVtYSI7CmltcG9ydCB7IHNwbGl0IH0gZnJvbSAiYXBvbGxvLWxpbmsiOwppbXBvcnQgeyBXZWJTb2NrZXRMaW5rIH0gZnJvbSAiYXBvbGxvLWxpbmstd3MiOwppbXBvcnQgeyBnZXRNYWluRGVmaW5pdGlvbiB9IGZyb20gImFwb2xsby11dGlsaXRpZXMiOwppbXBvcnQgeyBzZXRDb250ZXh0IH0gZnJvbSAiYXBvbGxvLWxpbmstY29udGV4dCI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgb25FcnJvciB9IGZyb20gJ0BhcG9sbG8vY2xpZW50L2xpbmsvZXJyb3InOwpWdWUudXNlKFZ1ZUFwb2xsbyk7CnZhciBjYWNoZSA9IG5ldyBJbk1lbW9yeUNhY2hlKCk7Cgp2YXIgZ2V0VG9rZW4gPSBmdW5jdGlvbiBnZXRUb2tlbigpIHsKICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7Cn07CgpleHBvcnQgdmFyIHNlcnZlclVybCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnaHR0cHM6Ly9wZS1wZS1wZS5oZXJva3VhcHAuY29tJyA6ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnOwpleHBvcnQgdmFyIHdzU2VydmVyVXJsID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyA/ICd3c3M6Ly8nICsgc2VydmVyVXJsLnN1YnN0cig3KSArICcvc3Vic2NyaXBjaW9uZXMnIDogJ3dzOi8vJyArIHNlcnZlclVybC5zdWJzdHIoNykgKyAnL3N1YnNjcmlwY2lvbmVzJzsgLy9jb25zb2xlLmxvZyhgU2VydmVyIHVybDogJHtzZXJ2ZXJVcmx9YCk7Cgp2YXIgaHR0cExpbmsgPSBjcmVhdGVIdHRwTGluayh7CiAgdXJpOiBzZXJ2ZXJVcmwgKyAiL2dyYXBocWwiCn0pOyAvL2NvbnNvbGUubG9nKGBEaXJlY2Npb24gc3Vic2NyaXBjaW9uZXMgJHt3c1NlcnZlclVybH1gKTsKCnZhciB3c0xpbmsgPSBuZXcgV2ViU29ja2V0TGluayh7CiAgdXJpOiB3c1NlcnZlclVybCwKICBvcHRpb25zOiB7CiAgICByZWNvbm5lY3Q6IHRydWUsCiAgICBjb25uZWN0aW9uUGFyYW1zOiB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KGdldFRva2VuKCkpCiAgICAgIH0KICAgIH0KICB9Cn0pOwp2YXIgYXV0aExpbmsgPSBzZXRDb250ZXh0KGZ1bmN0aW9uIChfLCBfcmVmKSB7CiAgdmFyIGhlYWRlcnMgPSBfcmVmLmhlYWRlcnM7CiAgcmV0dXJuIHsKICAgIGhlYWRlcnM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaGVhZGVycyksIHt9LCB7CiAgICAgIGF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQoZ2V0VG9rZW4oKSkKICAgIH0pCiAgfTsKfSk7CnZhciBlcnJvckxpbmsgPSBvbkVycm9yKGZ1bmN0aW9uIChfcmVmMikgewogIHZhciBncmFwaFFMRXJyb3JzID0gX3JlZjIuZ3JhcGhRTEVycm9ycywKICAgICAgbmV0d29ya0Vycm9yID0gX3JlZjIubmV0d29ya0Vycm9yOwoKICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgewogICAgaWYgKGdyYXBoUUxFcnJvcnMpIGdyYXBoUUxFcnJvcnMubWFwKGZ1bmN0aW9uIChfcmVmMykgewogICAgICB2YXIgbWVzc2FnZSA9IF9yZWYzLm1lc3NhZ2UsCiAgICAgICAgICBsb2NhdGlvbnMgPSBfcmVmMy5sb2NhdGlvbnMsCiAgICAgICAgICBwYXRoID0gX3JlZjMucGF0aDsKICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCJbR3JhcGhRTCBlcnJvcl06IE1lc3NhZ2U6ICIuY29uY2F0KG1lc3NhZ2UsICIsIExvY2F0aW9uOiAiKS5jb25jYXQobG9jYXRpb25zLCAiLCBQYXRoOiAiKS5jb25jYXQocGF0aCkpOwogICAgfSk7CiAgICBpZiAobmV0d29ya0Vycm9yKSBjb25zb2xlLmxvZygiW05ldHdvcmsgZXJyb3JdOiAiLmNvbmNhdChuZXR3b3JrRXJyb3IpKTsKICB9Cn0pOwp2YXIgbGluayA9IGVycm9yTGluay5jb25jYXQoYXV0aExpbmspLmNvbmNhdChodHRwTGluayk7CnZhciBmaW5hbExpbmsgPSBzcGxpdCggLy8gc3BsaXQgYmFzZWQgb24gb3BlcmF0aW9uIHR5cGUKZnVuY3Rpb24gKF9yZWY0KSB7CiAgdmFyIHF1ZXJ5ID0gX3JlZjQucXVlcnk7CiAgdmFyIGRlZmluaXRpb24gPSBnZXRNYWluRGVmaW5pdGlvbihxdWVyeSk7CiAgcmV0dXJuIGRlZmluaXRpb24ua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nICYmIGRlZmluaXRpb24ub3BlcmF0aW9uID09PSAnc3Vic2NyaXB0aW9uJzsKfSwgd3NMaW5rLCBsaW5rKTsKZXhwb3J0IHZhciBhcG9sbG9DbGllbnQgPSBuZXcgQXBvbGxvQ2xpZW50KHsKICBsaW5rOiBmaW5hbExpbmssCiAgY2FjaGU6IGNhY2hlLAogIHR5cGVEZWZzOiB0eXBlRGVmcywKICByZXNvbHZlcnM6IHJlc29sdmVycywKICBjb25uZWN0VG9EZXZUb29sczogdHJ1ZQp9KTsKZXhwb3J0IHZhciBhcG9sbG9Qcm92aWRlciA9IG5ldyBWdWVBcG9sbG8oewogIGRlZmF1bHRDbGllbnQ6IGFwb2xsb0NsaWVudAp9KTs="},{"version":3,"sources":["/home/juan/webPj/pepepe/libro/src/apollo.js"],"names":["ApolloClient","InMemoryCache","createHttpLink","VueApollo","typeDefs","resolvers","split","WebSocketLink","getMainDefinition","setContext","Vue","onError","use","cache","getToken","localStorage","getItem","serverUrl","process","env","NODE_ENV","wsServerUrl","substr","httpLink","uri","wsLink","options","reconnect","connectionParams","headers","Authorization","authLink","_","authorization","errorLink","graphQLErrors","networkError","map","message","locations","path","console","log","link","concat","finalLink","query","definition","kind","operation","apolloClient","connectToDevTools","apolloProvider","defaultClient"],"mappings":"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","sourcesContent":["import { ApolloClient } from \"apollo-client\"\nimport { InMemoryCache } from \"apollo-cache-inmemory\";\nimport { createHttpLink } from \"apollo-link-http\"\nimport VueApollo from \"vue-apollo\";\nimport { typeDefs, resolvers } from \"./apolloStore/Schema\"\nimport { split } from \"apollo-link\"\nimport { WebSocketLink } from \"apollo-link-ws\"\nimport { getMainDefinition } from \"apollo-utilities\"\nimport { setContext } from \"apollo-link-context\"\nimport Vue from 'vue'\nimport { onError } from '@apollo/client/link/error'\n\n\nVue.use(VueApollo);\n\nconst cache = new InMemoryCache();\n\n\nlet getToken = () => localStorage.getItem('token');\n\n\nexport const serverUrl = process.env.NODE_ENV === 'production'\n  ? 'https://pe-pe-pe.herokuapp.com'\n  : 'http://localhost:3000'\n\nexport const wsServerUrl = process.env.NODE_ENV === 'production'\n  ? 'wss://' + serverUrl.substr(7) + '/subscripciones'\n  : 'ws://' + serverUrl.substr(7) + '/subscripciones'\n\n//console.log(`Server url: ${serverUrl}`);\n\n\nconst httpLink = createHttpLink({\n  uri: serverUrl + \"/graphql\"\n});\n\n//console.log(`Direccion subscripciones ${wsServerUrl}`);\n\nconst wsLink = new WebSocketLink({\n  uri: wsServerUrl,\n  options: {\n    reconnect: true,\n    connectionParams: {\n      headers: {\n        Authorization: `Bearer ${getToken()}`\n      }\n    }\n  },\n})\n\nconst authLink = setContext((_, { headers }) => {\n\n  return {\n    headers: {\n      ...headers,\n      authorization: `Bearer ${getToken()}`\n    }\n  }\n});\n\nconst errorLink = onError(({ graphQLErrors, networkError }) => {\n  if (process.env.NODE_ENV !== 'production') {\n    if (graphQLErrors)\n      graphQLErrors.map(({ message, locations, path }) =>\n        console.log(\n          `[GraphQL error]: Message: ${message}, Location: ${locations}, Path: ${path}`,\n        ),\n      )\n\n    if (networkError) console.log(`[Network error]: ${networkError}`)\n  }\n\n})\n\nconst link = errorLink.concat(authLink).concat(httpLink);\n\n\nconst finalLink = split(\n  // split based on operation type\n  ({ query }) => {\n    const definition = getMainDefinition(query)\n    return definition.kind === 'OperationDefinition' &&\n      definition.operation === 'subscription'\n  },\n  wsLink,\n  link\n)\n\nexport const apolloClient = new ApolloClient({\n  link: finalLink,\n  cache,\n  typeDefs,\n  resolvers,\n  connectToDevTools: true,\n});\n\nexport const apolloProvider = new VueApollo({\n  defaultClient: apolloClient\n})"]}]}