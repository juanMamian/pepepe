{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/libro/node_modules/eslint-loader/index.js??ref--13-0!/home/juan/webPj/pepepe/libro/src/store/index.js","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/store/index.js","mtime":1619027779808},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IFZ1ZXggZnJvbSAidnVleCI7ClZ1ZS51c2UoVnVleCk7CgpmdW5jdGlvbiBwYXJzZUp3dCh0b2tlbikgewogIHZhciBiYXNlNjRVcmwgPSB0b2tlbi5zcGxpdCgnLicpWzFdOwogIHZhciBiYXNlNjQgPSBiYXNlNjRVcmwucmVwbGFjZSgvLS9nLCAnKycpLnJlcGxhY2UoL18vZywgJy8nKTsKICB2YXIganNvblBheWxvYWQgPSBkZWNvZGVVUklDb21wb25lbnQoYXRvYihiYXNlNjQpLnNwbGl0KCcnKS5tYXAoZnVuY3Rpb24gKGMpIHsKICAgIHJldHVybiAnJScgKyAoJzAwJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTsKICB9KS5qb2luKCcnKSk7CiAgcmV0dXJuIEpTT04ucGFyc2UoanNvblBheWxvYWQpOwp9CgpleHBvcnQgZGVmYXVsdCBuZXcgVnVleC5TdG9yZSh7CiAgc3RhdGU6IHsKICAgIHRva2VuOiBudWxsLAogICAgdXN1YXJpbzogewogICAgICB1c2VybmFtZTogbnVsbCwKICAgICAgbm9tYnJlczogbnVsbCwKICAgICAgaWQ6IG51bGwsCiAgICAgIHBlcm1pc29zOiBbXSwKICAgICAgZm9yb3M6IFtdCiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihzdGF0ZSwgdG9rZW4pIHsKICAgICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICAgIH0sCiAgICBzZXRVc2VySW5mbzogZnVuY3Rpb24gc2V0VXNlckluZm8oc3RhdGUsIHRva2VuKSB7CiAgICAgIHZhciBkYXRvcyA9IHBhcnNlSnd0KHRva2VuKTsKICAgICAgc3RhdGUudXN1YXJpby51c2VybmFtZSA9IGRhdG9zLnVzZXJuYW1lLCBzdGF0ZS51c3VhcmlvLmlkID0gZGF0b3MuaWQ7CiAgICAgIHN0YXRlLnVzdWFyaW8ucGVybWlzb3MgPSBkYXRvcy5wZXJtaXNvczsKICAgIH0sCiAgICBkZXNsb2dlYXJzZTogZnVuY3Rpb24gZGVzbG9nZWFyc2Uoc3RhdGUpIHsKICAgICAgc3RhdGUudXN1YXJpby51c2VybmFtZSA9IG51bGw7CiAgICAgIHN0YXRlLnVzdWFyaW8uaWQgPSBudWxsOwogICAgICBzdGF0ZS50b2tlbiA9IG51bGw7CiAgICB9LAogICAgc2V0UmVzcHVlc3Rhc0xlaWRhc0NvbnZlcnNhY2lvblVzdWFyaW86IGZ1bmN0aW9uIHNldFJlc3B1ZXN0YXNMZWlkYXNDb252ZXJzYWNpb25Vc3VhcmlvKHN0YXRlLCBkYXRvcykgewogICAgICB2YXIgaW5mb0Zvcm8gPSBzdGF0ZS51c3VhcmlvLmZvcm9zLmZpbmQoZnVuY3Rpb24gKGYpIHsKICAgICAgICByZXR1cm4gZi5pZEZvcm8gPT0gZGF0b3MuaWRGb3JvOwogICAgICB9KTsKCiAgICAgIGlmICghaW5mb0Zvcm8pIHsKICAgICAgICB2YXIgbnVldm9JbmZvRm9ybyA9IHsKICAgICAgICAgIGlkRm9ybzogZGF0b3MuaWRGb3JvLAogICAgICAgICAgY29udmVyc2FjaW9uZXM6IFtdLAogICAgICAgICAgX190eXBlbmFtZTogIkluZm9Gb3Jvc1VzdWFyaW8iCiAgICAgICAgfTsKICAgICAgICBzdGF0ZS51c3VhcmlvLmZvcm9zLnB1c2gobnVldm9JbmZvRm9ybyk7CiAgICAgICAgaW5mb0Zvcm8gPSBzdGF0ZS51c3VhcmlvLmZvcm9zLmZpbmQoZnVuY3Rpb24gKGYpIHsKICAgICAgICAgIHJldHVybiBmLmlkRm9ybyA9PSBkYXRvcy5pZEZvcm87CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBpbmZvQ29udmVyc2FjaW9uID0gaW5mb0Zvcm8uY29udmVyc2FjaW9uZXMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgIHJldHVybiBjLmlkQ29udmVyc2FjaW9uID09IGRhdG9zLmlkQ29udmVyc2FjaW9uOwogICAgICB9KTsKCiAgICAgIGlmICghaW5mb0NvbnZlcnNhY2lvbikgewogICAgICAgIHZhciBudWV2b0luZm9Db252ZXJzYWNpb24gPSB7CiAgICAgICAgICBpZENvbnZlcnNhY2lvbjogZGF0b3MuaWRDb252ZXJzYWNpb24sCiAgICAgICAgICBfX3R5cGVuYW1lOiAiSW5mb0NvbnZlcnNhY2lvbmVzVXN1YXJpbyIKICAgICAgICB9OwogICAgICAgIGluZm9Gb3JvLmNvbnZlcnNhY2lvbmVzLnB1c2gobnVldm9JbmZvQ29udmVyc2FjaW9uKTsKICAgICAgICBpbmZvQ29udmVyc2FjaW9uID0gaW5mb0Zvcm8uY29udmVyc2FjaW9uZXMuZmluZChmdW5jdGlvbiAoYykgewogICAgICAgICAgcmV0dXJuIGMuaWRDb252ZXJzYWNpb24gPT0gZGF0b3MuaWRDb252ZXJzYWNpb247CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGluZm9Db252ZXJzYWNpb24ucmVzcHVlc3Rhc0xlaWRhcyA9IGRhdG9zLnJlc3B1ZXN0YXNMZWlkYXM7CiAgICAgIGNvbnNvbGUubG9nKCJFbiB2YXJpYWJsZSBJQzogIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoaW5mb0NvbnZlcnNhY2lvbikpKTsKICAgICAgY29uc29sZS5sb2coIkVuIHN0YXRlIElDOiAiLmNvbmNhdChKU09OLnN0cmluZ2lmeShzdGF0ZS51c3VhcmlvLmZvcm9zLmZpbmQoZnVuY3Rpb24gKGYpIHsKICAgICAgICByZXR1cm4gZi5pZEZvcm8gPT0gZGF0b3MuaWRGb3JvOwogICAgICB9KS5jb252ZXJzYWNpb25lcy5maW5kKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgcmV0dXJuIGMuaWRDb252ZXJzYWNpb24gPT0gZGF0b3MuaWRDb252ZXJzYWNpb247CiAgICAgIH0pKSkpOwogICAgfSwKICAgIHNldEluZm9Gb3Jvc1VzdWFyaW86IGZ1bmN0aW9uIHNldEluZm9Gb3Jvc1VzdWFyaW8oc3RhdGUsIGZvcm9zKSB7CiAgICAgIHN0YXRlLnVzdWFyaW8uZm9yb3MgPSBmb3JvczsKICAgIH0KICB9Cn0pOw=="},{"version":3,"sources":["/home/juan/webPj/pepepe/libro/src/store/index.js"],"names":["Vue","Vuex","use","parseJwt","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","JSON","parse","Store","state","usuario","username","nombres","id","permisos","foros","mutations","setToken","setUserInfo","datos","deslogearse","setRespuestasLeidasConversacionUsuario","infoForo","find","f","idForo","nuevoInfoForo","conversaciones","__typename","push","infoConversacion","idConversacion","nuevoInfoConversacion","respuestasLeidas","console","log","stringify","setInfoForosUsuario"],"mappings":"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","sourcesContent":["import Vue from \"vue\"\nimport Vuex from \"vuex\"\n\nVue.use(Vuex);\n\nfunction parseJwt(token) {\n    var base64Url = token.split('.')[1];\n    var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    var jsonPayload = decodeURIComponent(atob(base64).split('').map(function (c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n    }).join(''));\n\n    return JSON.parse(jsonPayload);\n}\n\nexport default new Vuex.Store({\n    state:{\n        token:null,\n        usuario:{\n            username:null,\n            nombres:null,\n            id:null,\n            permisos:[],\n            foros:[]\n        }\n    },\n    mutations:{\n        setToken(state, token){\n            state.token=token;\n        },\n        setUserInfo(state, token){\n            const datos=parseJwt(token);\n            \n            state.usuario.username=datos.username,\n            state.usuario.id=datos.id;\n            state.usuario.permisos=datos.permisos\n        },\n        deslogearse(state){\n            state.usuario.username=null;\n            state.usuario.id=null;\n\n            state.token=null;\n        },\n        setRespuestasLeidasConversacionUsuario(state, datos){\n            var infoForo=state.usuario.foros.find(f=>f.idForo==datos.idForo);\n            if(!infoForo){\n                var nuevoInfoForo={\n                    idForo:datos.idForo,\n                    conversaciones:[],\n                    __typename:\"InfoForosUsuario\"\n                };\n                state.usuario.foros.push(nuevoInfoForo);\n                infoForo=state.usuario.foros.find(f=>f.idForo==datos.idForo);\n            }\n            \n\n            var infoConversacion=infoForo.conversaciones.find(c=>c.idConversacion==datos.idConversacion);\n            if(!infoConversacion){\n                var nuevoInfoConversacion={\n                    idConversacion:datos.idConversacion,                    \n                    __typename:\"InfoConversacionesUsuario\"\n                }\n                infoForo.conversaciones.push(nuevoInfoConversacion);\n                infoConversacion=infoForo.conversaciones.find(c=>c.idConversacion==datos.idConversacion);\n            }\n            infoConversacion.respuestasLeidas=datos.respuestasLeidas;                        \n            console.log(`En variable IC: ${JSON.stringify(infoConversacion)}`);\n            console.log(`En state IC: ${JSON.stringify(state.usuario.foros.find(f=>f.idForo==datos.idForo).conversaciones.find(c=>c.idConversacion==datos.idConversacion))}`);\n        },\n        setInfoForosUsuario(state, foros){\n            state.usuario.foros=foros;\n        },\n    }\n});"]}]}