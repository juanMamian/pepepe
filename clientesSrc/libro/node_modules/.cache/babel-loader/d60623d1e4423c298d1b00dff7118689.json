{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/thread-loader/dist/cjs.js!/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/libro/src/components/LibrosPublicos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/components/LibrosPublicos.vue","mtime":1621177679639},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvanVhbi93ZWJQai9wZXBlcGUvbGlicm8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCI7Cgp2YXIgX3RlbXBsYXRlT2JqZWN0LCBfdGVtcGxhdGVPYmplY3QyOwoKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGdxbCB9IGZyb20gImFwb2xsby1zZXJ2ZXItY29yZSI7CmltcG9ydCBJY29ub1BlcnNvbmFBdXRvbm9tbyBmcm9tICIuL0ljb25vUGVyc29uYUF1dG9ub21vLnZ1ZSI7CnZhciBRVUVSWV9MSUJST1NfUFVCTElDT1MgPSBncWwoX3RlbXBsYXRlT2JqZWN0IHx8IChfdGVtcGxhdGVPYmplY3QgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gIHF1ZXJ5IHtcbiAgICBsaWJyb3NQdWJsaWNvcyB7XG4gICAgICBpZFxuICAgICAgdGl0dWxvXG4gICAgICBpZHNFZGl0b3Jlc1xuICAgIH1cbiAgfVxuIl0pKSk7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBJY29ub1BlcnNvbmFBdXRvbm9tbzogSWNvbm9QZXJzb25hQXV0b25vbW8KICB9LAogIG5hbWU6ICJMaWJyb3NQdWJsaWNvcyIsCiAgYXBvbGxvOiB7CiAgICBsaWJyb3NQdWJsaWNvczogewogICAgICBxdWVyeTogUVVFUllfTElCUk9TX1BVQkxJQ09TLAogICAgICBza2lwOiBmdW5jdGlvbiBza2lwKCkgewogICAgICAgIHJldHVybiAhdGhpcy51c3VhcmlvTG9nZWFkbzsKICAgICAgfQogICAgfQogIH0sCiAgcHJvcHM6IHsKICAgIGlkTGlicm9TZWxlY2Npb25hZG86IFN0cmluZywKICAgIFVSTExpYnJvc29sbzogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVzcGxlZ2FkbzogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzZWxlY2Npb25hckxpYnJvOiBmdW5jdGlvbiBzZWxlY2Npb25hckxpYnJvKGlkTGlicm8pIHsKICAgICAgdGhpcy4kZW1pdCgibGlicm9TZWxlY2Npb25hZG8iLCBpZExpYnJvKTsKICAgIH0sCiAgICByZW1vdmVyTGlicm9DYWNoZTogZnVuY3Rpb24gcmVtb3ZlckxpYnJvQ2FjaGUoaWRMaWJybykgewogICAgICB2YXIgc3RvcmUgPSB0aGlzLiRhcG9sbG8ucHJvdmlkZXIuZGVmYXVsdENsaWVudDsKICAgICAgdmFyIGNhY2hlID0gc3RvcmUucmVhZFF1ZXJ5KHsKICAgICAgICBxdWVyeTogUVVFUllfTElCUk9TX1BVQkxJQ09TCiAgICAgIH0pOwogICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKICAgICAgdmFyIGluZGV4TCA9IG51ZXZvQ2FjaGUubGlicm9zUHVibGljb3MuZmluZEluZGV4KGZ1bmN0aW9uIChsKSB7CiAgICAgICAgcmV0dXJuIGwuaWQgPT0gaWRMaWJybzsKICAgICAgfSk7CgogICAgICBpZiAoaW5kZXhMID4gLTEpIHsKICAgICAgICBudWV2b0NhY2hlLmxpYnJvc1B1YmxpY29zLnNwbGljZShpbmRleEwsIDEpOwogICAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgICAgcXVlcnk6IFFVRVJZX0xJQlJPU19QVUJMSUNPUywKICAgICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygiTGlicm8gbm8gZXN0YWJhIGVuIGNhY2hceEU5Iik7CiAgICAgIH0KICAgIH0sCiAgICBlbGltaW5hckxpYnJvOiBmdW5jdGlvbiBlbGltaW5hckxpYnJvKGlkTGlicm8pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghY29uZmlybSgiRWxpbWluYW5kbyB1biBsaWJyby4gwr9Db250aW51YXI/IikpIHJldHVybjsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QyIHx8IChfdGVtcGxhdGVPYmplY3QyID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24oJGlkTGlicm86IElEISkge1xuICAgICAgICAgICAgICBlbGltaW5hckxpYnJvKGlkTGlicm86ICRpZExpYnJvKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKSkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWRMaWJybzogaWRMaWJybwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBlbGltaW5hckxpYnJvID0gX3JlZi5kYXRhLmVsaW1pbmFyTGlicm87CgogICAgICAgIGlmIChlbGltaW5hckxpYnJvKSB7CiAgICAgICAgICBfdGhpcy4kZW1pdCgiZWxpbWluZVVuTGlicm8iLCBpZExpYnJvKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvci4gRTogIi5jb25jYXQoZXJyb3IpKTsKICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlTGlicm86IGZ1bmN0aW9uIHRvZ2dsZUxpYnJvKF9yZWYyKSB7CiAgICAgIHZhciBsaWJybyA9IF9yZWYyLmxpYnJvLAogICAgICAgICAgbnVldm9Fc3RhZG8gPSBfcmVmMi5udWV2b0VzdGFkbzsKICAgICAgdmFyIHB1YmxpY28gPSBudWV2b0VzdGFkbzsKICAgICAgY29uc29sZS5sb2coIlRvZ2dsaW5nIGxpYnJvIGVuIGxhIGxpc3RhIGRlIGxpYnJvcyBwdWJsaWNvcy4gRXN0YWRvOiAiLmNvbmNhdChwdWJsaWNvKSk7CiAgICAgIHZhciBzdG9yZSA9IHRoaXMuJGFwb2xsby5wcm92aWRlci5kZWZhdWx0Q2xpZW50OwogICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9MSUJST1NfUFVCTElDT1MKICAgICAgfSk7CiAgICAgIHZhciBudWV2b0NhY2hlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjYWNoZSkpOwoKICAgICAgaWYgKHB1YmxpY28pIHsKICAgICAgICBpZiAoIW51ZXZvQ2FjaGUubGlicm9zUHVibGljb3Muc29tZShmdW5jdGlvbiAocCkgewogICAgICAgICAgcmV0dXJuIHAuaWQgPT0gbGlicm8uaWQ7CiAgICAgICAgfSkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJQdXNoaW5nIGxpYnJvIGEgbGEgbGlzdGEgZGUgbGlicm9zIHBceEZBYmxpY29zIik7CiAgICAgICAgICBudWV2b0NhY2hlLmxpYnJvc1B1YmxpY29zLnB1c2gobGlicm8pOwogICAgICAgICAgc3RvcmUud3JpdGVRdWVyeSh7CiAgICAgICAgICAgIHF1ZXJ5OiBRVUVSWV9MSUJST1NfUFVCTElDT1MsCiAgICAgICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRWwgbGlicm8geWEgZXN0YWJhIGVuIGxhIGxpc3RhIGRlIGxpYnJvcyBwXHhGQWJsaWNvcyIpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgaW5kZXhQID0gbnVldm9DYWNoZS5saWJyb3NQdWJsaWNvcy5maW5kSW5kZXgoZnVuY3Rpb24gKHApIHsKICAgICAgICAgIHJldHVybiBwLmlkID09IGxpYnJvLmlkOwogICAgICAgIH0pOwoKICAgICAgICBpZiAoaW5kZXhQID4gLTEpIHsKICAgICAgICAgIG51ZXZvQ2FjaGUubGlicm9zUHVibGljb3Muc3BsaWNlKGluZGV4UCwgMSk7CiAgICAgICAgICBzdG9yZS53cml0ZVF1ZXJ5KHsKICAgICAgICAgICAgcXVlcnk6IFFVRVJZX0xJQlJPU19QVUJMSUNPUywKICAgICAgICAgICAgZGF0YTogbnVldm9DYWNoZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvcjogZnVuY3Rpb24gdXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvcigpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW8gfHwgIXRoaXMudXN1YXJpby5wZXJtaXNvcykgewogICAgICAgIGNvbnNvbGUubG9nKCJEYXRvcyBpbnN1ZmljaWVudGVzIHBhcmEgZGVjaWRpciBzaSB1c3VhcmlvIGVzIHNceEZBcGVyYWRtaW5pc3RyYWRvciIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMudXN1YXJpby5wZXJtaXNvcy5pbmNsdWRlcygic3VwZXJhZG1pbmlzdHJhZG9yIik7CiAgICB9LAogICAgbGlicm9zUG9yQXV0b3I6IGZ1bmN0aW9uIGxpYnJvc1BvckF1dG9yKCkgewogICAgICB2YXIgb2JqZXRvRmluYWwgPSB7fTsKCiAgICAgIGlmICghdGhpcy5saWJyb3NQdWJsaWNvcykgewogICAgICAgIHJldHVybiBvYmpldG9GaW5hbDsKICAgICAgfQoKICAgICAgdGhpcy5saWJyb3NQdWJsaWNvcy5mb3JFYWNoKGZ1bmN0aW9uIChsaWJybykgewogICAgICAgIHZhciBpZEF1dG9yID0gbGlicm8uaWRzRWRpdG9yZXNbMF07CgogICAgICAgIGlmICghb2JqZXRvRmluYWxbaWRBdXRvcl0pIHsKICAgICAgICAgIG9iamV0b0ZpbmFsW2lkQXV0b3JdID0gW2xpYnJvXTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb2JqZXRvRmluYWxbaWRBdXRvcl0ucHVzaChsaWJybyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIG9iamV0b0ZpbmFsOwogICAgfQogIH0KfTs="},{"version":3,"sources":["LibrosPublicos.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"librosPublicos\">\n    <h4\n      style=\"cursor: pointer\"\n      class=\"tituloZona\"\n      @click=\"desplegado = !desplegado\"\n    >\n      <div\n        class=\"trianguloBullet\"\n        :style=\"{ transform: desplegado ? 'rotateZ(90deg)' : 'rotateZ(0deg)' }\"\n      ></div>\n      Libros publicos\n    </h4>\n    <div id=\"controlesLibrosPublicos\"></div>\n    <img\n      src=\"@/assets/iconos/loading.png\"\n      alt=\"Cargando\"\n      class=\"simboloLoading\"\n      style=\"width: 20px; margin: 10px auto; display: block\"\n      v-show=\"desplegado && $apollo.queries.librosPublicos.loading\"\n    />\n\n    <div id=\"listaLibrosPublicos\" v-show=\"desplegado\">\n      <div\n        class=\"bloqueAutor\"\n        v-for=\"(listaLibros, idAutor) of librosPorAutor\"\n        :key=\"idAutor\"\n      >\n        <icono-persona-autonomo :idPersona=\"idAutor\" />\n        <br />\n        <br />\n        <br />\n        <div class=\"listaLibros\">\n          <div\n            class=\"portadaLibro\"\n            v-for=\"portada of listaLibros\"\n            :key=\"portada.id\"\n            @click=\"seleccionarLibro(portada.id)\"\n            :class=\"{ seleccionado: idLibroSeleccionado == portada.id }\"\n          >\n            <div class=\"nombreLibro\">\n              {{ portada.titulo }}\n            </div>\n            <div class=\"controlesLibro\" @click.stop=\"\">\n              <img\n                src=\"@/assets/iconos/delete.png\"\n                alt=\"Eliminar\"\n                title=\"Eliminar este libro\"\n                class=\"controlLibro\"\n                v-show=\"usuarioSuperadministrador\"\n                @click.stop=\"eliminarLibro(portada.id)\"\n              />\n              <a :href=\"URLLibrosolo + '?id=' + portada.id\" target=\"_blank\">\n                <img\n                  src=\"@/assets/iconos/libroAbierto.png\"\n                  class=\"controlLibro\"\n                  alt=\"Libro\"\n                  title=\"Ver libro\"\n                />\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { gql } from \"apollo-server-core\";\nimport IconoPersonaAutonomo from \"./IconoPersonaAutonomo.vue\";\n\nconst QUERY_LIBROS_PUBLICOS = gql`\n  query {\n    librosPublicos {\n      id\n      titulo\n      idsEditores\n    }\n  }\n`;\n\nexport default {\n  components: { IconoPersonaAutonomo },\n  name: \"LibrosPublicos\",\n  apollo: {\n    librosPublicos: {\n      query: QUERY_LIBROS_PUBLICOS,\n      skip() {\n        return !this.usuarioLogeado;\n      },\n    },\n  },\n  props: {\n    idLibroSeleccionado: String,\n    URLLibrosolo: String,\n  },\n  data() {\n    return {\n      desplegado: false,\n    };\n  },\n  methods: {\n    seleccionarLibro(idLibro) {\n      this.$emit(\"libroSeleccionado\", idLibro);\n    },\n    removerLibroCache(idLibro) {\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_LIBROS_PUBLICOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n\n      const indexL = nuevoCache.librosPublicos.findIndex(\n        (l) => l.id == idLibro\n      );\n      if (indexL > -1) {\n        nuevoCache.librosPublicos.splice(indexL, 1);\n        store.writeQuery({\n          query: QUERY_LIBROS_PUBLICOS,\n          data: nuevoCache,\n        });\n      } else {\n        console.log(`Libro no estaba en caché`);\n      }\n    },\n    eliminarLibro(idLibro) {\n      if (!confirm(\"Eliminando un libro. ¿Continuar?\")) return;\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation($idLibro: ID!) {\n              eliminarLibro(idLibro: $idLibro)\n            }\n          `,\n          variables: {\n            idLibro,\n          },\n        })\n        .then(({ data: { eliminarLibro } }) => {\n          if (eliminarLibro) {\n            this.$emit(\"elimineUnLibro\", idLibro);\n          }\n        })\n        .catch((error) => {\n          console.log(`Error. E: ${error}`);\n        });\n    },\n    toggleLibro({libro, nuevoEstado}){\n      const publico=nuevoEstado;\n      console.log(`Toggling libro en la lista de libros publicos. Estado: ${publico}`);\n      const store=this.$apollo.provider.defaultClient;\n      const cache=store.readQuery({\n        query: QUERY_LIBROS_PUBLICOS\n      });\n      var nuevoCache=JSON.parse(JSON.stringify(cache));\n\n      if(publico){          \n        if(!nuevoCache.librosPublicos.some(p=>p.id==libro.id)){\n          console.log(`Pushing libro a la lista de libros públicos`);\n          nuevoCache.librosPublicos.push(libro);\n          store.writeQuery({\n            query:QUERY_LIBROS_PUBLICOS,\n            data:nuevoCache\n          });\n        }\n        else{\n          console.log(`El libro ya estaba en la lista de libros públicos`);\n        }\n      }\n      else{\n        const indexP=nuevoCache.librosPublicos.findIndex(p=>p.id==libro.id)\n        if(indexP>-1){\n          nuevoCache.librosPublicos.splice(indexP, 1);\n          store.writeQuery({\n            query:QUERY_LIBROS_PUBLICOS,\n            data:nuevoCache\n          });\n        }\n      }\n    }\n  },\n  computed: {\n    usuarioSuperadministrador() {\n      if (!this.usuario || !this.usuario.permisos) {\n        console.log(\n          `Datos insuficientes para decidir si usuario es súperadministrador`\n        );\n        return false;\n      }\n      return this.usuario.permisos.includes(\"superadministrador\");\n    },\n    librosPorAutor() {\n      var objetoFinal = {};\n      if (!this.librosPublicos) {\n        return objetoFinal;\n      }\n      this.librosPublicos.forEach((libro) => {\n        let idAutor = libro.idsEditores[0];\n        if (!objetoFinal[idAutor]) {\n          objetoFinal[idAutor] = [libro];\n        } else {\n          objetoFinal[idAutor].push(libro);\n        }\n      });\n      return objetoFinal;\n    },\n  },\n};\n</script>\n\n<style scoped>\n</style>"],"sourceRoot":"src/components"}]}