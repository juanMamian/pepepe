{"remainingRequest":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js!/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/juan/webPj/pepepe/libro/src/components/CuadroImagen.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/juan/webPj/pepepe/libro/src/components/CuadroImagen.vue","mtime":1617375533843},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/juan/webPj/pepepe/libro/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJjdWFkcm9JbWFnZW4iLAogIHByb3BzOiB7CiAgICBlc3RlQ3VhZHJvSW1hZ2VuOiBPYmplY3QsCiAgICBpZExpYnJvOiBTdHJpbmcsCiAgICBpZFBhZ2luYTogU3RyaW5nLAogICAgc2l6ZVBhZ2luYTogT2JqZWN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVzaXppbmc6IGZhbHNlLAogICAgICBwb3NpY2lvbjogewogICAgICAgIHg6IG51bGwsCiAgICAgICAgeTogbnVsbAogICAgICB9LAogICAgICBzaXplOiB7CiAgICAgICAgeDogbnVsbCwKICAgICAgICB5OiBudWxsCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZXN0aWxvTGF5b3V0OiBmdW5jdGlvbiBlc3RpbG9MYXlvdXQoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9wOiB0aGlzLnBvc2ljaW9uLnkgKyAiJSIsCiAgICAgICAgbGVmdDogdGhpcy5wb3NpY2lvbi54ICsgIiUiLAogICAgICAgIHdpZHRoOiB0aGlzLnNpemUueCArICIlIiwKICAgICAgICBoZWlnaHQ6IHRoaXMuc2l6ZS55ICsgIiUiCiAgICAgIH07CiAgICB9LAogICAgdXJsSW1hZ2VuOiBmdW5jdGlvbiB1cmxJbWFnZW4oKSB7CiAgICAgIHJldHVybiB0aGlzLnNlcnZlclVybCArICIvYXBpQ3VlbnRvcy9pbWFnZW5DdWVudG8vIiArIHRoaXMuaWRMaWJybyArICIvIiArIHRoaXMuaWRQYWdpbmEgKyAiLyIgKyB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uaWQ7CiAgICB9LAogICAgc2l6ZVJlc2l6ZUhhbmRsZTogZnVuY3Rpb24gc2l6ZVJlc2l6ZUhhbmRsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogdGhpcy5yZXNpemluZyA/IDIwMCArICJweCIgOiAxMCArICJweCIsCiAgICAgICAgaGVpZ2h0OiB0aGlzLnJlc2l6aW5nID8gMjAwICsgInB4IiA6IDEwICsgInB4IgogICAgICB9OwogICAgfSwKICAgIHVybEF1ZGlvOiBmdW5jdGlvbiB1cmxBdWRpbygpIHsKICAgICAgcmV0dXJuIHRoaXMuc2VydmVyVXJsICsgIi9hcGlDdWVudG9zL2F1ZGlvSW1hZ2VuLyIgKyB0aGlzLmlkTGlicm8gKyAiLyIgKyB0aGlzLmlkUGFnaW5hICsgIi8iICsgdGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmlkOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgcGxheUF1ZGlvOiBmdW5jdGlvbiBwbGF5QXVkaW8oKSB7CiAgICAgIGlmICghdGhpcy5lc3RlQ3VhZHJvSW1hZ2VuLmF1ZGlvKSByZXR1cm47CiAgICAgIHRoaXMuJHJlZnMuYXVkaW8ucGxheSgpOwogICAgfSwKICAgIGluaWNpYXJSZXNpemU6IGZ1bmN0aW9uIGluaWNpYXJSZXNpemUoKSB7CiAgICAgIHRoaXMucmVzaXppbmcgPSB0cnVlOwogICAgfSwKICAgIHJlc2l6ZTogZnVuY3Rpb24gcmVzaXplKGUpIHsKICAgICAgaWYgKHRoaXMucmVzaXppbmcpIHsKICAgICAgICB2YXIgY3VhZHJvUG9zID0gewogICAgICAgICAgeDogdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCwKICAgICAgICAgIHk6IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcAogICAgICAgIH07CiAgICAgICAgdmFyIG51ZXZveCA9IGUuY2xpZW50WCAtIGN1YWRyb1Bvcy54IC0gNTsKICAgICAgICB2YXIgbnVldm95ID0gZS5jbGllbnRZIC0gY3VhZHJvUG9zLnkgLSA1OwogICAgICAgIHZhciBudWV2b3hQID0gTWF0aC5mbG9vcihudWV2b3ggKiAxMDAgLyB0aGlzLnNpemVQYWdpbmEueCk7CiAgICAgICAgdmFyIG51ZXZveVAgPSBNYXRoLmZsb29yKG51ZXZveSAqIDEwMCAvIHRoaXMuc2l6ZVBhZ2luYS55KTsKICAgICAgICBpZiAodGhpcy5wb3NpY2lvbi54ICsgbnVldm94UCA+IDEwMCkgbnVldm94UCA9IE1hdGguZmxvb3IoMTAwIC0gdGhpcy5wb3NpY2lvbi54KTsKICAgICAgICBpZiAodGhpcy5wb3NpY2lvbi55ICsgbnVldm95UCA+IDEwMCkgbnVldm95UCA9IE1hdGguZmxvb3IoMTAwIC0gdGhpcy5wb3NpY2lvbi55KTsKICAgICAgICB0aGlzLiRzZXQodGhpcy5zaXplLCAieCIsIG51ZXZveFApOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnNpemUsICJ5IiwgbnVldm95UCk7CiAgICAgIH0KICAgIH0sCiAgICBmaW5SZXNpemU6IGZ1bmN0aW9uIGZpblJlc2l6ZSgpIHsKICAgICAgdGhpcy5yZXNpemluZyA9IGZhbHNlOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMucG9zaWNpb24gPSB0aGlzLmVzdGVDdWFkcm9JbWFnZW4ucG9zaWNpb247CiAgICB0aGlzLnNpemUgPSB0aGlzLmVzdGVDdWFkcm9JbWFnZW4uc2l6ZTsKICB9Cn07"},{"version":3,"sources":["CuadroImagen.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"cuadroImagen\" :style=\"[estiloLayout]\" @click=\"playAudio\" :class=\"{conAudio:esteCuadroImagen.audio}\">\n    <img :src=\"urlImagen\" alt=\"ilustracion\" class=\"imagenContenido\" />\n    <div\n      id=\"resizeHandle\"\n      :style=\"[sizeResizeHandle]\"\n      @mousedown.left=\"iniciarResize\"\n      @mousemove=\"resize\"\n      @mouseup=\"finResize\"\n    >\n      <div id=\"bolitaResizeHandle\"></div>\n    </div>\n\n    <audio type=\"audio/ogg\" v-if=\"esteCuadroImagen.audio\" ref=\"audio\">\n      <source :src=\"urlAudio\" type=\"audio/ogg\" />\n    </audio>\n\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"cuadroImagen\",\n  props: {\n    esteCuadroImagen: Object,\n    idLibro: String,\n    idPagina: String,\n    sizePagina:Object\n  },\n  data() {\n    return {\n      resizing: false,\n\n      posicion: {\n        x: null,\n        y: null,\n      },\n      size: {\n        x: null,\n        y: null,\n      },\n    };\n  },\n  computed: {\n    estiloLayout() {\n      return {\n        top: this.posicion.y + \"%\",\n        left: this.posicion.x + \"%\",\n\n        width: this.size.x + \"%\",\n        height: this.size.y + \"%\",\n      };\n    },\n    urlImagen() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/imagenCuento/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n    sizeResizeHandle() {\n      return {\n        width: this.resizing ? 200 + \"px\" : 10 + \"px\",\n        height: this.resizing ? 200 + \"px\" : 10 + \"px\",\n      };\n    },\n    urlAudio() {\n      return (\n        this.serverUrl +\n        \"/apiCuentos/audioImagen/\" +\n        this.idLibro +\n        \"/\" +\n        this.idPagina +\n        \"/\" +\n        this.esteCuadroImagen.id\n      );\n    },\n  },\n  methods: {\n    playAudio(){\n      if(!this.esteCuadroImagen.audio)return;\n      this.$refs.audio.play();\n    },\n    iniciarResize() {\n      this.resizing = true;\n    },\n    resize(e) {\n      if (this.resizing) {\n\n        var cuadroPos = {\n          x: this.$el.getBoundingClientRect().left,\n          y: this.$el.getBoundingClientRect().top,\n        };\n\n        const nuevox = e.clientX - cuadroPos.x - 5;\n        const nuevoy = e.clientY - cuadroPos.y - 5;\n\n        \n        var nuevoxP = Math.floor((nuevox * 100) / this.sizePagina.x);\n        var nuevoyP = Math.floor((nuevoy * 100) / this.sizePagina.y);\n\n        if(this.posicion.x+nuevoxP>100)nuevoxP=Math.floor(100-this.posicion.x);\n        if(this.posicion.y+nuevoyP>100)nuevoyP=Math.floor(100-this.posicion.y);\n\n\n        this.$set(this.size, \"x\", nuevoxP);\n        this.$set(this.size, \"y\", nuevoyP);\n      }\n    },\n    finResize() {\n      this.resizing = false;\n    },\n  },\n  mounted() {\n    this.posicion = this.esteCuadroImagen.posicion;\n    this.size = this.esteCuadroImagen.size;    \n  },\n};\n</script>\n\n<style scoped>\n.cuadroImagen {\n  position: absolute;\n  border: 1px solid orange;\n}\n\n.imagenContenido {\n  width: 100%;\n  height: 100%;\n}\n#resizeHandle {\n  position: absolute;\n  top: 100%;\n  left: 100%;\n\n  border-radius: 50%;\n  transform: translate(-50%, -50%);\n\n  cursor: pointer;\n  border: 1px solid purple;\n}\n#bolitaResizeHandle {\n  width: 10px;\n  height: 10px;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  background-color: green;\n}\n.conAudio{\n  cursor:pointer;\n}\n</style>"],"sourceRoot":"src/components"}]}