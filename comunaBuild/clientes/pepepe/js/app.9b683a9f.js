(function(o){function e(e){for(var n,s,r=e[0],c=e[1],d=e[2],l=0,v=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&v.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(o[n]=c[n]);u&&u(e);while(v.length)v.shift()();return t.push.apply(t,d||[]),i()}function i(){for(var o,e=0;e<t.length;e++){for(var i=t[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(n=!1)}n&&(t.splice(e--,1),o=s(s.s=i[0]))}return o}var n={},a={app:0},t=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return o[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=o,s.c=n,s.d=function(o,e,i){s.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:i})},s.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,e){if(1&e&&(o=s(o)),8&e)return o;if(4&e&&"object"===typeof o&&o&&o.__esModule)return o;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var n in o)s.d(i,n,function(e){return o[e]}.bind(null,n));return i},s.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return s.d(e,"a",e),e},s.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},s.p="/pepepe/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var u=c;t.push([0,"chunk-vendors"]),i()})({0:function(o,e,i){o.exports=i("56d7")},"034e":function(o,e,i){"use strict";i("8996")},"034f":function(o,e,i){"use strict";i("85ec")},"054e":function(o,e,i){},"064c":function(o,e,i){"use strict";i("2938")},"08ec":function(o,e,i){"use strict";i("50d2")},"0a03":function(o,e,i){"use strict";i("df15")},"0d1e":function(o,e,i){"use strict";i("9754")},"0d50":function(o,e,i){"use strict";i("60ac")},"0e73":function(o,e,i){},1070:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAApVBMVEUAAADM28LI2L3h5tzj6d7R3srn7eTL2cPT38vW4s7g6uDF1bvH173C07fa4NTO3cTk7N7W4tPK2sDa5NTi7OLo8Oja5NXJ2b7M28LD1bfk7ODZ5dLY49DR38jd59fV4czT4MvP3sbP3cXK2r/H2LzW4s7S38rS38nQ3sfL2sHF1rna4tL////5+/j9/v3u8+v3+fXw9O31+PLy9u/7/Pr4+vfr8egF2h3MAAAALHRSTlMAcFEYHCQVFQUcDxkRDAh8ICBjJhEMAVc/KyjQx5XwrqiJg11Ku6Kcj2o4NHigeIkAAAKNSURBVGje3dl9U+IwEAbwR0opUKjg8S6e53nvV+RFuO//0W4SZXYYzG5owo74/COObX/QNLuGwDeDtMBBmmkDMZNkcKTZiyN8gpBWqNAIPyzie+xXJGYQEs60FU5pokpGOCGVH8ws4ND4KRCUITxSV5hbfQQnDygi0SbxX0RJ54yfg5IpGEAi/iG+Ej4/wgvT5ckBzTq0513ezWrD5FIuK5f3+OlCyKV8EP7SVxUzPqVflhWzOF4NUIuJicgJR/xb1enva+U6oyN9kltv42fA7fJV7oTbVXcgm6U567uX8dUcuiLk6OHNHcgSVrn3NdZ4IkQKIVibk79AyvWLUQ15Ve78DA4ZMAgpssEgXaQMslceJOMZPJLxCJ7NRa7dlZSMimNCypXjuN9kBCC8ckNGIIKNudQNY4QipIwZIxQhpfaWsUEUhAr55OCQRzIiIKRMQRmTEQ3B9lD5ZusuIiOlTU4GFfZoSPmaLkwm1KNiIHR+uV2Y65qWXTMv7P3bRUHIeAKs8m++fBmPpv0RByHDKCb7i+ekBCFk0JNMz+6UXvJILiBk2Mztb/uWPCGFRSYcQoYjY59S30IiIFtr8E1rzSNDZkxoosstPmDgyWDyqzQHC0jOIAtrCPlhFR6puxAyhNzbOepEOuzt2lGx4jO3SpUx2a2o7Eq5taNfMsiMWTpM4ZfP7qVDKq1P/gCnKNztGrmQ3WPNNw9HiOYSu62w+qXUz4dk0M0MZ0oC7QxxlgzEeRk/Iwh5r9/eJW8Vsg8Tna2Nhso0bCE8cs1KFYxoSiFumIano7AjlClU57bCplDxrnY9ejqdsKPSMAY67bWvs3XZ0+l57a7OfuJMaYs3KZT+NRimIxym793k/gPFdL6ma6aH6QAAAABJRU5ErkJggg=="},1414:function(o,e,i){"use strict";i("4d6f")},"148b":function(o,e,i){o.exports=i.p+"img/schedule.067d684e.png"},1490:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAABd1BMVEUAAAAAAAAAAAAICAgAAAABAQENDQ0iIiIDAwMQEBACAgIHBwcdHR0EBAQCAgIEBAQICAj///8CAgIVFRUODg4EBAQDAwMICAgNDQ0LCwsSEhIfHx9GRkYHBwcAAAAKCgoICAgWFhYUFBQhISEAAAABAQEBAQECAgIwMDAJCQlMTEwGBgYEBAQEBAQJCQkFBQUFBQULCwsLCwsICAgHBwcFBQUHBwcvLy8CAgICAgIfHx8GBgYGBgYHBwcDAwMHBwcLCwsKCgoEBATm5uYCAgIHBwcCAgIDAwMDAwMHBwcLCwsJCQkMDAwCAgIeHh4AAAAICAgAAAAKCgoMDAwBAQEtLS0HBwcICAhSUlJNTU0pKSnx8fEGBgYLCwseHh4rKysHBwcuLi4WFhYfHx8YGBgeHh4ODg4FBQUfHx8UFBQVFRUmJiZNTU0sLCx5eXkJCQkGBgYNDQ0dHR0jIyMkJCQjIyMYGBgdHR0LCwshISEwMDAAAAADAwN0HvTjAAAAe3RSTlMA/e8X+PEpB7kK4X4Fz7XzXAHmHgKwqTklGhEODfnLg1Y5Ihr79KqTe0s6E97SqKGLd3JhUEI2Ee3qz8uzpJeEZz0sAtnX1bObiHt0a2NL+vbPxb+soZ6TXlktBdjDqZxtYkA3MtLKxaxcQicgFAfYyLKrqaiRhnVsa18CwFyfAAAEr0lEQVRYw+2Xd3MSQRiHrwAeHUMQYgwtEsQESTcx3Zaqqcbee+/1uQ/vcSWEQLwdZUZnzPPX7t7yY8tb9pUOOOCAf5SjS2WvyUbsUCv0zm3j4BlshWCOGoGjLRBcAuX5ZYOvOvqDFgiegojZCAVg9ndVjr1yWqEJ6LeaGhSd4UNnuyVxOoqBNW2k3WzH+yBmDV+F22/MVvtQGGUhLqr3ch6DsZleYyHJfg+epDV+CZSZOcN0UtMeDDZvCOptYiJroyMRRYa2vPUhacjIXm2kVJYxeSKkeGMD0BbHAc+qaX1btj33PjUXdhyQ+2Yjgor520CPKo1qmJxfiKnOt3hs+qJl4VMpSe0BbuddBSvAVm/V4zLGUtKzHXXuFuq+lAZlpbO64C1g203Pp8O8vaTS+0wTz+gcKM5ZLTUCBberPgtySRJkSIazLnO6x+CpKqaXPw8Xj7nNyoCcCYno+bdl9Hvu0U8DZaTh4FS1c+9YzINcEYiQcwqU83UXNTBfDgTK8wO+urDWBn3GiDvLwMxOrz13KopN9FTOcnDbs3kuiTAMBJ3O6WAbVXSdKm3B086XQTh+WUTvUATKr+2OekQGus7cPXHiypkuDI6ozp2kQRNJMnNeuOes7wgQvXPS6p28E60qOmscAu+cu94bw+POx+3zC8roF66fc77dvHZBRw6226u/iLzoP/wrsc7cUHFTgSl7Jw/b4G1+108O529BW8726yIo65P9Wd9+h7fSZ528J1ZLJ9HrdUs4fD0Kp+xO1oNJ16K/qWDM/q6nU7b9ReHTuT1Z+iN47SX1RhT7F9+aCm4A4++m75W623cMo+vk3lknu2DZOSJfabkSLsBEU0EFvtSd8SScaZx2BhJ77da7n+CPulQahs+N0+5CuC7EjIKyn+D93X01gH6icdoJnUBdfEv+JUFry1f+cMvf6wYS+13KpNillGGsJ5h9FPdLwmYzPDC1v9ksYVIIOAHF54VnN/cY9h2I+uxD1ryYHB9qHvwXZBpcb+3a/q7nuFY02Oh61uxc5kg6YMyqhGrB4UJjcHhoB4dpGFtP9A+npF8Qivcb4atjd/i6drN5+Oq4hZzxS64kFVhxLMcMsB+cAPtszQqwtdddUjAFhDvrU8DjK0YKeNwFyDspoDMNEaE6Y2QVMu5JaglW5yQRRguwuRMG2x9VFGyUqUf1aTQrovdaA7luZmpwMhwIhBODqd9K9DMyLDZUBap6rNlTZCHkfoJjsNEr9FiqyMgrrtM0GB+VhEj1Qdjtnl+tWRsWYlbgwXksAJptat3BZX+zJ/HVXO1JrLgWVEWgp3qGoeQEpC91hxof7eND1T/q7QGK7mVZj1VWHF0ap8rF6VpZocaKdllRscuKRIdAoZcA5kuaWd+Yv9aOOo9bj9mvFT4J93LPUrQYGywZpVntpeBTQFYiI8PnZaNhrU+IuKUYGa0WjxkFhu26pVo8JqvF40J1+WwJl6PxbZ3xoLVR/zoMWMMDsO637mYlrSvTHZI4vrOqE6QnYcpqTu3KdyGjAP9N+iFstcJWbf+nZKGQffDixYNsAbItEPQV2CGaklrAjI7NalBqBf7ZCa/JhOFxBxzwf/ITtet+Hm159fEAAAAASUVORK5CYII="},1529:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAq1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0NbREAAAAOHRSTlMA/PjfBFv1CBQOp+va73fx47itclXLLefCvZ+ASEA7IgqIYhzVMhjHk1GYfSYfz7OETEU3EY1na8PO4aYAAARySURBVGje7VjZgqIwEDQYBRRQ8EBF8RxQ8T5G/v/LdjcNtMc4SotPaz0ZVCrpo7o7uQ8++OADgFI/tifayhzOlNybwOvrSgiomCM19w6ojh0i9Okilz3koBieg5Wa2ZOMyuElWCdzxyz8+N0SCwHFWtYkBoMXW7WRYenA4vez5fBa4G7j8C8ECg1gLGRL0hWbZ9MBLGd5sRzyN1jL7sWhZomjdDIlkTvipaYar0tvIFGES9iR36wzRF8TL/2O1828OInlZUnyVRWKtY3XMxAxyciSxBXpXu7F61qUkKvFO0lsOEqxnqW5bJGKibnG7rcwIDOyd3wNn4wb4knAuaooisozC+HQUhOOTRH03pivW35r3TG241eJ+BSkC2L4sK+ZUiiQSDKr+Jv9izR1cPRc/scY2EBxBaY5ywwShdVQU36ksXovnUS4oNIVxb4d3oXfzdHhCNtP+sLpq6v9M4aLlkvmGICFrAEKF4BVzXlgBFOzGhOVxhQC3DzbiPDp6QlHfuiKFOHq3tHCF/XMtc/K7SyJrXaXY5Tv1vBw8kXth8R7q/D3kxRz7C9+1BQscF4C+FBYvOElQSA4Z9eNAFjMJ2QLlvSSHGc/dBXy9V42jCrNqIYORhp0FdfYQ9wdOV3pJfD7IcpF83Av0tsHCslM5HsZ8sxrRP692zlppHpZkyDfsbbAuW6w1aMKSsARrKBCpFZB9q/fBN/RPZ+0cljvw/xP48kSKuiIQtLGzhfaYjQeAv3FSDMF/lVEAZD8lHKKTyfRhKcjIxSK7zlJ/jycClKIQnaFPm7nhZOgT4qoXIhdGdpZuk+cKIL8EJdXCFgUeARYWBdRhdvKrd9NFBxqhV9cyKB+a5SZDmck9yqYyHzKIDnhZAgVkra8ow3x2sUc2qvCy4AUUdDBrARrYTvne9EyKlvr5eVW2hB2lADGoafcjZa9fAhHU8+9PgcrNppEkn0VB1Gss2Ex4FiwNlIID9vGF6k0qmvY5DK2TCsEtxRwHzZ2fBOnTy9baO5C9EqcWOpSiGDrHqXKgxdKyW2BI8HZvIsSjfB35CsJu5u4eSpYOnLywDG1CjBj50efggDesMxY68wqXF3sTvOWnXTeXmoSzwSBRysMtsbpJlq50htOgEQK0sfYSYq15AG4a0Utf/qBaNlCLXmALzMymEqM4tB8lALYeev19EdpR1oiP/6tIVGPMqqAwZ4QwLEJP03vFbUTXQ01n9kQtb93V6CAT/QJikm+qvoW+5NOz4tdgXwVOcw9RlMDheDUClmSnxa7xpg6oLaUZ0wr7KV3CU6BSar/ywlcHqU9+WpvW4nmurvom92LYloapK9dDyepnd4ZnJt2tUw/a08ejQYGq7o4YpDmxwPk2JTfD6rEDU1wyil9eM2hfZB/u1awBphUsKGUCPCS5Y5LkhmMzyk3Bzhm2UbhDuZ/v69s4LNFHVZ2oK7SXZx/ixNZCsDVYEqwIL1E+mkIiOkoW6lJVqk1kh9ZWhLbTS+RWj4ltHrugw8++J/xByAHSgpZaDnVAAAAAElFTkSuQmCC"},"15fe":function(o,e,i){"use strict";i("befd")},1979:function(o,e,i){"use strict";i("2769")},"1d54":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAnFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4jUzeAAAAM3RSTlMA+xEW+PI/BSPvyIob4YV/XzwfAnZyZUeUVgnqwrdrNg7Tz7utb9vVv6SdmEwxKeWyjk9WFiZCAAAB0ElEQVRIx+2U2bKqMBBFu0kgcJhFQHGeZ8+w///frmKdstSEK+9nvVCws6pJuiv0xyOB00/6qaB3caMN44qcx8E7QmfH9XJP1o/D/0slNjDolSKjLPjZX1+OzULmA15e0S/T2AbnjcrFGHaIqtJffp3oynkGNDkJsKxIjUNc+KYa6wNcmnduY1iR2AJYL3su3RBrfFomZQevQ2IGfE0yujOR8E39YOSkFuBx9hj0YBvKRBhUVACrlx9mjPXKBj1Sayyyl2SEhX6uGD+UAs5rlMNWOsUBAooRKm3k6pQ+ZEY7jHSnD6T6PtoZ9RBpIgGU+iqsqHKU7vgNVVKgQ3ocsHYvQqJvULrwlDaYY29Qthjpg7ieC8fzNZNU6JVAIiYqsH0O9vCmpOcA+0yqFM+bZ0RkQAwwt16LhwinZOLIGFrPxhzSITM5MDs9disEF9REzpC+uA/XgSELEZ+bnPITkMtiIqbBZDViIHTIxyDxo5PRsXwbVxhXvGhKNKm/cJfM0nhxW+ONitthjIFNCHSpAeWmZeqq+30xU9aHxjHzjdCido4DDNs60a/DqzbOR+1I920nrh3BSKiVIxy0UajLYMAT1IKVvBhHaoWb9AX9ceEfSSU0mMLFKFUAAAAASUVORK5CYII="},"214a":function(o,e,i){},2191:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA9CAMAAADGfvrlAAAAtFBMVEUAAAAAAAACAgIAAAAAAAAAAAAGBgYAAAAAAAAAAAAFBQUAAAABAQEGBgYCAgIAAAAAAAAEBAQFBQUAAAAAAAABAQEDAwMCAgIAAAAAAAAAAAAFBQUAAAAGBgYAAAAAAAAAAAAAAAADAwMBAQEAAAABAQEBAQEBAQEBAQEDAwMBAQEAAAACAgIBAQECAgIAAAAAAAABAQEAAAAAAAABAQEBAQEBAQEDAwMAAAAAAAAAAAAAAAAAI6fdAAAAO3RSTlMABQvg9KseO8T3ho92RZ0X129r+9M/KzjxyZkU3Q/ov7ykMiHOtV5SJRqplEx/ZK6gconruWhZQwmCwUKZof4AAAMbSURBVEjHpZeJlqIwEEUDuNGiIiACoqIi4761S9vv//9rwgxYgqB4fMfjEnOTkKpUVViuxN7E7HbNWasvsLfUq7aXniENLGsgGUOn3WkVJfurum8hIctf/umx15prxxKAkjvcHZR2W/naeWo4lDzcT17NevrVgcFUaVTE28NXOsp2AMDeP519teWof+1GIEnorm0A0z/5+6tIgKHkrK6y5/j3OmfyWROw6mOWq9nhGxhlduhMAfvMnuqPB3idDHZIo+bL3AHDS7q1y1mnkmocbzbdVFPrwOnU3JMyUO+nOgYq4J5YSmvgaCYssQSa6X2c+PB9qGbaanXe936eto7t5MHosjs2Df3BtPMRoNw9sAGjEw/cinXSDXNW09u3hp94K2y4jdtCmtC1eNN3hhpJAlRVhxT/NhareDNKGImx9fj3aFSzBjlXMKrRbA7kIPLKBQbxKvbwg0aky78XKbBxjbpVXUz7/zemhCWLVIfDcnXAKA4qX5DP0Rq+OwTbX7n6JXgsYRE+qck/BXYb8amcW0cHg9CXN7q+IQ93yk/UXNERkbHnq97Bnd35z1PdeYqBrcBaBsoCe19NuBPWtaAkm09Knz2quk4eMA2lBgt0eZUMN6pF3Uh1XJPn34LG1hiYSVgqVTOXWU/GJIk3OFDnWTDfh/hdyIJ7PkZsAbufAZvLTWjGpcm7HZQMWPyFx46oiRnwCZ7IRA98iGrJrTzCwhQ1VsuG22GzWIMWwlIWXIbNjm/DNDM985sw/8+j3S4M026TnQvDZGfysMIweRj5dmGYfJtOVWGYThWd58IwnWeKJEVhiiRRDPt5A6YYRtGzMEzRk+J2UZjiNmWMwjBlDMpVYgrWIniTgilX0XddIyOoMk/JF/srXJ194Y445blc2II3JLPkY35mPws44RhCOOyccbX6vIurB+whPz9WBoGuX+dCQmJ1gVolqzKgmoR+GNPyvTwJ0vm+JhFzq6He2tWRlOydU9VQfh1mBnvlXlqjlarDPq8ASdX3as/Pq97P6+3PK/3Xd4x27/Pbzef3qs9vdK/vkmJuvfMXl9icGVrQDtsAAAAASUVORK5CYII="},"245b":function(o,e,i){"use strict";i("faf7")},"246b":function(o,e,i){},2750:function(o,e,i){},2769:function(o,e,i){},"27e2":function(o,e,i){"use strict";i("bb44")},"280a":function(o,e,i){},2938:function(o,e,i){},"2cfe":function(o,e,i){},3039:function(o,e,i){},3250:function(o,e,i){"use strict";i("62a4")},3348:function(o,e,i){o.exports=i.p+"img/nodoConocimientoDefault.af8a33a1.png"},"341b":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAC+lBMVEUAAAAAAAAAAABxcXEAAACZmZl5eXk6OjpQUFBLS0unp6cnJycLCwsBAQECAgItLS05OTlOTk5JSUk3NzdgYGBhYWFNTU10dHR/f3+oqKgSEhIyMjIAAAAWFhYQEBAhISEWFhYQEBAcHBwxMTFCQkIBAQEzMzM0NDRJSUkqKio8PDwODg49PT1HR0cAAABBQUFCQkIEBAQHBwdlZWU6OjpXV1dgYGAAAAB8fHwwMDCLi4tFRUU7OzsjIyMEBAQAAAAbGxsfHx8NDQ0CAgIQEBBfX18CAgIpKSkoKCgQEBA1NTUvLy9bW1spKSk4ODgdHR0FBQUtLS0nJycYGBgzMzNAQEAtLS0iIiJWVlYeHh41NTUqKiomJiZNTU0tLS1CQkIcHBxTU1NFRUUxMTExMTEmJiYNDQ0tLS1VVVUxMTFPT08dHR1CQkI3NzcfHx8WFhYjIyNSUlIdHR1bW1tFRUVoaGgvLy8AAAAdHR0AAABbW1tKSkoqKipRUVFcXFwaGhouLi5zc3M9PT1ra2tcXFwYGBhzc3MuLi5NTU0JCQlSUlI2NjYgICBxcXFaWloQEBA8PDw5OTmLi4sHBwcZGRkNDQ1gYGAlJSUuLi4QEBA9PT0bGxsAAAAsLCwgICAyMjInJycTExMGBgYKCgoWFhYgICA+Pj42NjZNTU0UFBQiIiI5OTkEBARRUVFJSUkPDw9aWlotLS04ODgUFBRBQUElJSUnJyc7OzsiIiIpKSlHR0dFRUUREREmJiYaGhocHBxTU1M4ODhAQEAdHR1LS0tWVlYyMjIDAwNAQEBPT09CQkI9PT1YWFgsLCwNDQ1ra2tEREQ1NTV9fX1lZWVMTEwAAAAjIyNLS0sNDQ19fX1NTU0ZGRkkJCQ3NzcZGRlCQkJDQ0NOTk4SEhJeXl4BAQEtLS1DQ0M6Ojp3d3ePj49OTk5paWlxcXFkZGQWFhaVlZVzc3MAAABzc3MVFRVQUFAAAAADAwMHBwceHh4kJCQgICAPDw8vLy8oKCh/JHwQAAAA9XRSTlMALoADyQwGkSgRBwb++vXn5bWMZR8bDg0IBf79/fz59evl4NzZ2Na1n5SAgHx7dm5nVk9NTUA+PiwlFhb++/r49/b08vDv6Ofj4uDf3dzZ2dnV1NPRzcjHxsLAwMC/vbmxrKqpop+enZGGgoKAgICAfHp1dGtnZmZhXFhXVVRSUlFMSUhEQT09PDk2Ly4rKyQgHREJ/Pn49vX08fHw6+vq6enp5uPh3tza19bU1NHR0c/LxcG+urm3t7Wwr62lpaKgoJ6Zl5aTkpGPiYmHhoB/fHtycnBuaGZmYVxaV1ZWVU1KSkhGQ0A4NjQ0JyMjIB8fHRUVCt1yxO0AAAQcSURBVGje7dljsNxQGAbgr9ji3tq2bdu2bdu2bdu2bdu2rXfrmbb7Je3OtCfJnrP509nnx/2T95t3JslJcvaSj4+Pz//udd/06Z+SfYZfCJoDLPq+8M/I+7I3KxwC7qIVSRbcuxWRdhbA3+I0DOLFjmN58G+FkgXyUsXb5RCrPNIrHXdywEjOoaQunfv1zpswQd2ASRIkzIk/Qqq39M4NXaz9dyMQi9Cr/kTo8mdW7OgfE5rPLblB97LJF2hmDFbqGJsQmsRZ/zo4qjo0M5VWTG39vB+lf0kBzQaFjo5gudMJApc+csCZQb6ktPYESSdMXInBkWnSa78LWH2DZb0NrK1kR5RiPF/SKDQ+HofKSpYMA3tomOoGllGuJKn2dDJOBUrAsaRSHYEW8PQ1k1xqjiWSeh4H48WeK7JJzu+TKxfCX6YkI1xqmwYTc7CjTEkLnm1pGgzHwVMyJQF5Nr1pMC0HmyuUBDAN3uJgFVtLunNwla0lPTi4UqHkvtVrElTh7kpmGkzJwYAyJQN4drtpcBcH2yus+Fimb4rJ/N6KLFMSNS4P9zPJ3YRL8UAkozFP1zKJbeZYQ5LyCOyxYSoTmORbPnJoHq9gFPIvxaHZJKkd2BGDTDOwFCSrDFxCPRAmbofkSPRI0iUpobUMFL3gv4OlIXk1wHL1pH+5/gVsLSkYPQWapBH/OphtDzSx+aCs7iGhKdI7Crn70CcONKHukZquMaBbGDSL/oiJEjxcUei+nidVXeGmZI0DqVKlSlK1uBN/nCZ1XT7BSIwM5A2Z4kGsdEbyikGNIFZziDcqsqwzPl3RtmRSrcjWIBTMfN7tr9TRswysCN1BoaMp3H1MVCdc505pOqUJ3zlcnUROuAsqW/FmI/6IvemMg9w5UlSfij9GynWMCY3fZh381049eMo40KWV6sgaF7roHSILQpFuFADr8Wvb5O8fyLMPonjQJYlgdPuddGXCjCMaV82JOZnJOr9F0KzoZxINXxQoP4Ao6vpf8Xxjre8Xd0BT6r15+tzVX39HfPTwQ/KEE6yBg6wKwBOtLF/0WGCHyboAHm64loHVJM9LWluMpwZbHdG+kuzfOD4hGEmUJLeWbsNp52WyryRKbE5X8HAvMEIriRrVz8/h8DMOt+XwR4sna9DWwGwpz80vVy5+/DBh4lcaaLQOy3K4kcULOB0C+QeT0CiwYVZfOULVSOgQJyqSNXUhNI+EynMivOU9jFBiEomYh+/fdxZLIhWGQKFXJNLf+tliL9o0rlcv7E9LeDJMlTUlChacVCLoaBJqxdHj5LEA1n+Y2MvRzLaWzOXdwBBbS/gTJZ/D1pIm2q8QtpaMrwqgWBb7Slifi6mDkEqJnYbzf9jOkp2CLMZPeZ+TrcZUAuL2Irs96Us+Pj7yfgCbknGGI9ttswAAAABJRU5ErkJggg=="},"373e":function(o,e,i){},3951:function(o,e,i){},"39c5":function(o,e,i){"use strict";i("8833")},"3a9d":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAeFBMVEUAAAAXEAoUDQhlRSs0JBYrHRJLMh9FLhxeQCcaEgtiQykyIhUlGQ85JhgsHhJTOCIpGxEgFg1ZPCU/KhpWOSN0TzF6UzQvIBNrSS14UjNPNSFjRClyTjF8VTVcPiZnRyxuSy93UTIDAgEKBwQRDAcPCgYIBQMGBAI5vVJyAAAAInRSTlMA/v6A/v79/aX+kP7+/f7d/v6+/c00Ef5iHfGLPQewd1IkgWmI6gAAAZ1JREFUaN7t1eluqzAQhuGxwxInmDVrl7N8A+b+7/AcqdCChJrUxZVazfNrBBIvBgtICCGEEOK7ecpSGtWlUtmB1pc6RYMccAyUtLq018O0Rx8XRe6Qh4v8YUT0n0V/GU61i6r05B1pen4ZGPZliHgRoAvfSI5hUK9vZbvk0Bhw4RmJMewAg4zedSyhr6EjdDRogkcoRRU+smUdPrLh9isinUS+IHKGCRdxw0apVTp+VvK1Iwd2NNfBjtfaTT2evCNHjZqmLhgPWJ6rTr4RylDRVImOlv8nJXlHCu4TelM7WFr1nYy3XtBo10JRgMjJoLPX8QmBLyEidKzQqygpHqxx0BtaOTJqOsCxA/hMFCAySGKjTZZeyTPi1Vzye91IxG6BeVo1Uugl59lKQpHIRPocPmI5Dh/JYcJHYiga/Y32U1ESIhJjrt0EiGyNmtmvvJJlEpGIRH5YJP9QpCUvEZjuVTtDXrYOj/evOic/Gpruk3D/i/wUDL2jO1hGTr4sA6xuaR1Qkb+D4R43uTaiT9k10S324ZmEEEIIIb6xf4x8QD01P3dKAAAAAElFTkSuQmCC"},"3ccd":function(o,e,i){"use strict";i("4daa")},"3e59":function(o,e,i){},"416c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAilBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAgMCAAAEAAEECAwCBAaOQb2zAAAAKHRSTlMA5Szs/fiNBQhrlqOyKOLaz10zGBHAoIcdC/XwrHC9fnVlSUM+xaXGergiigAAAYpJREFUWMPt10lvwjAQhmFDHFJIyEIWEpay089j8v//XksQUiqaSIaRysHvzZdHHo18sLDZ3r3jOQpP25TNSyIQQfolkzeLARDI3Xg84Hqh0XTiGdqbS9wKh0ygiyaKpkw7WVLjIch4wDJQ0BrkJJ7gae/gJ3nOBFPTARRqOak+ujMCh4PmhvGop70h2KQ6I/imYH+0SFhBTROPEySKh4IRJFqOBSeoZVByglqHB8EIklZzjxWkvBSMIOnlXnCC0O6YGaRoxgpCw89YQWgnYQbV15QVhHbnFStIOjywgtAIspdB0gDR/bXItTmo5MJtF282wfJ+kIVnDMp83G43EyJNWidzcCI4aoOeBS1oQQta8F3BdFv4vl8Ei+aTEvlNxfz4rFcVuCVxFXEvHr406mPu7klw5nSA4/cAq49jF7jOKuONZ+vVKnf/BmUcrEami9m6qt3D3xar1Mjzgt8C2mJ9uVxUNDUDP9HdFawH/w+qzpqRQzNQjKB6xLpGnpqBpR86PQ3yg7DZ2PsGboe3zkg4N3EAAAAASUVORK5CYII="},4213:function(o,e,i){},"42e8":function(o,e,i){},4312:function(o,e,i){},"469e":function(o,e,i){"use strict";i("6807")},4772:function(o,e,i){},"4a6c":function(o,e,i){},"4b91":function(o,e,i){},"4d6f":function(o,e,i){},"4daa":function(o,e,i){},"4db2":function(o,e,i){"use strict";i("4213")},"4e77":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAMAAAAPkIrYAAABjFBMVEUAAAA+MzgAAAAiHBwgGBg+OzsiIh4eGxlEPj8WFBMhHh0nIyRAPT1ORkYfGhYjHhwfGhoeGRgeGRkgGxkmHx8oIiMoJCQlIyEpJyUrJyQpKCkiICAqJiQwKyscFxggHR0dFxYhHhwhHBwgGxoeGxsmISEdGRkjHh4dGhkgHRweGhsjHR4mJCE+PTlST08rKCgbFhYjGRogGxocGBcgHhwpJiUiHRwiHxwgGRkYFBMkHx8uKCcfHBoqJycsKSkdGRchGx0hHx9fX18kHRsaFRQmISIlHx4cGBckHB4sJSYhHRwdGRkhHx0cFhgiIB8cGhoeGxkhFxYdFxQaFxYZFhYoJSYaFxQaFxQVERFXUFckGBoiGRggGRkiGhogGRcnGRsjFxgjGBciHBwjGxshHBolGRclGBkhGBolGxkmFxkjGhckGBUhGxgkGhUlFxUfGBkhFxggGBQlFxcjGhkfGhkfGxciGRYgGRYdFxUeGhMgGhslFxgiGxUiFxYdGRkhGhEfFxccGBMhFxElHR4/VDeRAAAAWnRSTlMABBD+/AoH/h7JokYZD/bx5uHcya1tZ2BSOzIpJB/7+ffr2NPMxKqnl5WOiII1Fhb9+PPx0c66sbGgjnVvW1dLPy0I+unh0MbFmYN9eXBqYFLo2Na1nldWOyk6oaQ9AAADUElEQVRYw+3VV1MaURTA8SUgEFAporRg75qYbm/pvdd7t/cGuyu9aEzyxXNXTSZPEW+cPGT2/8rwmzl7OAvh5eXl5fX/5evNF87FuZJLz04mnv41dOVSev5RfPjgILTxV07fpVdPppKjgiCIoepYFtvpCWcWl5P9FknaQFU7nepyH5YT7N15Pj1xo9qs0jZggSxLxWJgA8fJrkcm7lmKYDa/NmibHR14rSFr7PIZF9aXG5q9eU8URZ7nBdFsNKhrK+uPr3GSpC73nGVh+c35h/FhyzRNZPl5wRTpWGormgrsc1ItNNj9wjJPpxKjlEkqUFX1I0qwErPRvpcPSNvmoJnY7ca5U8g8W3nT7xeApOs6B9DWBDRiKzG3EwwvxPwKtG26utpzqrMU3ZiZ6O/ojkNT7raKbY0RBN7vv7+W9RE7KRJSQlmH9Kkj5l5EJm/4G1+bnXqdtqG7ekNiGPB9eHwBba3nxThNwzIA5bKZPGWLwcWRg5ZFIwtRkKQAsiRJBoFHz/Po48LadWhDCFmEiZEg8efCm5H4VafebB5RFPqOrqvXpgYLBGr7Ngl1eGIFhrp47rknA3fRszIViqLKFCVevz0YPlrs+n3yEMgsCgDAJfNd/TyXNlfjDZ5CCVZs5tXxunZnR0QFMIyGKJQd8XV7NdmFByPfeXJsJnOy+K2plkUqMqNpMnBDI3ZfOJ26ORc9ka48G/O7FtB+Wsn8GV8xP8fIRUb8vNhSFCCfUMKMD+99nH5YFUVBoCB6VDJgAWDt0SEsqncx1ux0dJWROY7d2+MMg1Na45dwqOh04Nu3L186KsPsGaVSyTBqNbLyHoe68K6xbyCryCCrdGzBSn8ay7po7ZdKxaKOLG3PzajR1ZsFPItEliFJrqW1223XCs0RuJZRQvetqqrWZjkUGvEjplV1nJqOjlmV2m0OutEDS7hW06lRVOCwXuPYY6oxR2BapuPogZXVqwc0hO6EkLyxjWlNmk797kI4uBir0CQLACQrt3oxrQGRnxj0oUsaeltBxw2AcnWewLX4VJQ46sO4SCqKYl3fxrVur/06va1bvEWSh5NLBGa//9tkpyuVSmjeR5xHu9OhVvwTcT59fjyMtnhOBV9mCC8vLy+vf9UP6nkGH0hHtzsAAAAASUVORK5CYII="},"4fac":function(o,e,i){},"4fc3":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAApVBMVEUAAAAFBQUKCgozMzMzMzMoKCgsLCw4ODgsLCwxMTEVFRUzMzM7Ozs2NjY0NDQzMzNMTEw1NTUlJSUxMTEvLy8xMTExMTEtLS0VFRUcHBwuLi4oKCgxMTEuLi4rKyswMDAwMDArKystLS0uLi4xMTEuLi4kJCQxMTEwMDArKysqKioxMTEuLi4rKys0NDQsLCwkJCQuLi4vLy8uLi42NjYwMDAzMzMGZa9aAAAANnRSTlMABgFL7bBzQ9VhGOAzJeq3Coku+Lr16sIMCZhO/JRC5qV2KBDKehnt2bqvoIRWPB8K0bWOjGo12immAAAA/ElEQVRIx+3Sy1LCMBiG4STUoiIeGmKVJG1paUXOnv77vzRjNlJy0AwLGKbvpjNf55ksEnSG4ZJfOes1FlHKnAohaHRrFgmWrgxRFfCTqG8sZepnHpM9sqKaTKv2nHHOE/V5AWCTtiESdKPn1vz0SimVBCWPYBg8t5NUbWNNDIMv/iLafAUTmGXBBMY4mLw1weTy+kSIvkon8T8YN6F1OTRbL8BNQAws5WAnvo5NiknsTlILmW6QJ1xYyN29j5DPcPLQkY4cQubBhHz8j4y2vwNnAGnlJQtF6p1hKwXQZdZ3F+cA70O0U7OcMRZ5Ymwgk72DN+uet36JUZfqG2Wjeg1GwVSoAAAAAElFTkSuQmCC"},5065:function(o,e,i){},"50d2":function(o,e,i){},"510b":function(o,e,i){},5132:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEoAAABKCAMAAAArDjJDAAAAYFBMVEUAAAAAAAAAAAAAAAAHBwcAAAA/Pz8AAAAODg4DAwMLCwsREREDAwMICAgEBAQEBAQBAQEFBQUBAQEBAQEGBgYODg4tLS0AAAARERECAgIGBgYGBgYAAAAPDw8AAAAAAAAR/1teAAAAH3RSTlMA3w7MH9gkF+OjYDG2cfTw6t+skEw1HATDv8XEmrKbvR44XgAAAWhJREFUWMPtmOtuhCAQhccLbQFd18vi3lre/y1rQJINHewQ1s2a+P06weQIhzEywM5OAFnzW5sRaG+8lhDm1Gc6gqw/QQBR6EgKASj1QUdzqNE5GadoL4Hk9LC6hhWLsOZhjX/z6t2zIxdS5YsoKfhRz/TgId3eVcMIBMahcvso/cy15V4CkfKuLX7yfJ5TCWTKeV7cG7/anAaIYLB5Xb3h1r5ghAhGu5TWG7apC4hC2Nwxq0ZCFLIJWjFl9IcBrMZwTxULWhW52Znz18S30yhns9N58Z+VpzGy3eqZsdOLgWBFhGhVGsBpFJpVeckmOqdRLpsuhve06oqJH6dROmKJ5gZwGuX1JfppAKdRiCVasQnuNEq16WJ4TytS7C8tBjIrfDjpn/M2i4GpOCvFlo5qdKvlo5oWcT8vYW0Dx1rqLxU91qYfttdoAdIbkxXapfQmbsXWMr3hTW/D17scSL+ySL9I2dnB+QUj1bS/3iEnGQAAAABJRU5ErkJggg=="},5224:function(o,e,i){},"53cb":function(o,e,i){"use strict";i("3e59")},5462:function(o,e,i){"use strict";i("54cd")},"54cd":function(o,e,i){},5542:function(o,e,i){"use strict";i("bac7")},"559e":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAqCAMAAAD26OlUAAAAtFBMVEUAAAAAAAAAAAAAAAAaGhoCAgIDAwMBAQEQEBAAAAABAQEBAQECAgIAAAABAQEBAQECAgIEBAQBAQEAAAAFBQUDAwMDAwMAAAAAAAACAgIDAwMFBQUGBgYAAAABAQEBAQEDAwMDAwMICAgJCQkMDAwBAQEBAQEBAQECAgIBAQECAgICAgICAgIGBgYGBgYNDQ0EBAQCAgIEBAQBAQEBAQEDAwMCAgIDAwMEBAQFBQUQEBAAAAAlv8O7AAAAO3RSTlMAvz/5B4MexQP7YBe0n+vmf03b2F0SC+DPqVlRLfbKo3lENiEP89PAu66Ja2dJOjIncUfthpmTjT4pJj+7kzoAAAIXSURBVDjLnZTnlrIwEIbHDaEI0lFAQFGkWrBty/3f16cU0Q3sd86+vybwnMnUwJ/FWGxZshbzOyVqOLN1RdHtDGviILa/2D5S7ESSEltBvn3Z92JePhPid9ezpgwztTz3PRZmuUdzZkCSgoUnsUVCAvMHxqsbRW2xDlWVjcq/pJqTZA49mickfy4AJtJ+IEGJ4O50JOkKBrRKybG1T7r9RhNtGd9s/VRbUwdtae7NGTfWFjnTyhijCUNzIzJrSGaCKiuS5JDu+JKQBxnKUgQA2mZBOSxFdtKRzGKjAcAHcul7J2xN1mm46APA4gyWjo/U5KiuGmtwFhxkh6e5mhw1VeMd+QAawjRXk2L56BzSYCuMKa7WsstxLGxhKcz7udFTt+bCErC/+y8HOx93HmnuxeNLjOKC5toYn7NmwDVors3akzO+qZZ5AFfv4/hM9sDi9HV9jALpAKZOc7DWOQsgR82mfSmkIikOTJTfU2+nR/PJnQyprbhNz66ax/Op2ZybnDVQOp2lqJ7wyiV/VbjJUpsC7RCN250pqn0rLR56VLQ7A6ERhzCoMDYefwthtB/i9iOh6E4qST/7uc+UqM+lx4Trf3s4gl8DV88ypiqzxvJZhR9yOcId1y/Y8fbJBUrlZUaMq+mJ9xdX9MyrQWaXr/6HCwc+kmMuTblYRn6AVzAkcadmgaEoRpCpOxF+FR+J399iRPXoHwT7P6mwTTR1AAAAAElFTkSuQmCC"},5622:function(o,e,i){"use strict";i("58b2")},"56bc":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAt1BMVEUAAABERERQUFBFRUVJSUlGRkYBAQFeXl4BAQEBAQEBAQEBAQECAgIgICABAQEBAQEBAQEjIyMMDAwCAgIBAQEFBQUBAQEFBQUGBgYGBgYTExMBAQEBAQEMDAwhISEBAQEFBQUDAwMBAQEODg4BAQEDAwMBAQEHBwcPDw8BAQEGBgYBAQEBAQEBAQEDAwMHBwcICAgJCQkBAQECAgIBAQEBAQEBAQEBAQEDAwMCAgICAgICAgICAgJoiDQeAAAAPXRSTlMABwUDDAr+CfX37dyFD7iBtA0lSt5P/E03Hwr5vCIU1zNZlynIeEU7HelU8tGnZT8tGM1r5J+Ri2DDo3GtqkNK9AAACJhJREFUWMOVWIlC4jAQbRKaAlKBZS3IJSAIeIB44LX//107My8HFt2jWp2+NslkMi8vScKXMbiDER8+vw4P36KuPqPNl5cu/YcV0XJB1JnpJEnTJNEpGVmK26QZGZlD5QGo+zYLqIEBVLzVymitlFGZSrTiH6UTlRJKl0MVmYySwTcj9MBwKoUYJQQVJqbCLVTos4pKkkrFJKqiCKU2lUfTf0GVi7vOlDHSFEHwj41UM6odmgIlzwnhB3HNFVIopFFhxl+k2rfLbeIz6q6rLnWo+gLVDk2VNIQKDcdWu3pi0VRQLp4lvigZ4rV4EZvB6xQx5KD6PhkOr3zPETda3NeMoiDQVHlUoya6jPYxREgpvn5Q4OPXaFIalPAaw5pwheIg8sEoBUO8hjfctkcZYZvL+HLwDz5qIzEMDmgYdCOVvkDTEko+xtc6k0FBO/wDD/lBQIfDVaDh0aOaC2kUIwPcQwscjnZ27ADc+hOqAooYSloGviEY4JsLXKYJlXx2LGQD/pULIbED33QyOTvrdM7ozxmMrhjdgF6lJb6BBB71iS3tEq7vb2vVGv36nyOjfi2ec+Oeb0hfTCIYFOEbcmvyZIvq91dhB9NUSQEw13FZZoPIZYHQVP5uH667natut3vVoZsMehCj07m6ntuLS7AQtOFcRj0peu9jCA4xMK2ut5q9V2CWcwAsvP9pn/sRZeOQhVzoKLF3c9twhEpLfMsqm8HgtZRBhGpP0iTEEAkKZjXtw0jmbLBQOxYK457txQigoLjAQlBXQ6g+8a33NNj0+/m43e+Px7jb41xen1/YmQkkSNqj3lVnksfJIfOJzW3IxXxr39mT09PTId9Dbzz32LFprTZlmoGky/1tvXrz1NrkYClqCIkd47K3X1wf7FbTrpd+ytDTW0sZNrB2MBuDhT6GGOUwbe6G9qTVOqWf1infLb6el9z8tGobfjzv57Z693g2bc5tsVAIsvYyGmZ4DsdZtbbpq/a4rfrjvK8omPwgzMpb9mHl+PZYDBY5o5Ohne+iFhrDv+Sa17d0RqMc9C3oDPTtkdLGcaJpn3pQppn9+SNQ91D1APy4sC9GxVqcoqLuywt71wbfGtbu7ytK96cX9uQHWKiD6rG+VaBv09pNJ+pbxqifThS7/3SPeaVprb19f9m36pYrPFQ9I7OO1hDHGYXpgG+aNVh5faNhKR7BN/KwavkqbqjLUQvLqrd6sLP2Ad9KLKQ+P+eSwg37czEbzt/eH5/tySiwMKieUiBXb108Rn3Lt5vmR3engxaqd+4A87JhT87T8W7cV03ykApDU45UbzqobwMLt+/1gno2fI3c/CjWEzGaVCGEhKsuqZ4oHHxsEP29HDMXqnWK1M0CHmqddKuDKX/HHo6ANmlQUN57mETNSu/ssO2cncxt7Xm6vN6v7c3Gd+H+yTZ9DC/BwuZxDKOSjd/sXR/6lr7YwaLN6OuTHe4UhGR1a2cYZYqcyLTEMIF/aUhsr2Q8yH3yRDKc6gbasNVryUO0qCg7JYZGGNtAHmLBmgXVgwScE0+UkYTf3gw2jinbdfHh1of50Lb6xBSpUPiDCsFCPznE9SRV2HAZ3qnWrh3646ddEMpdzk/taU4FJIZa1p7SZZ0Jl1VZ9dhDg34u68UiBbpcF5sEKHuYEyoVop9cYWmNnUETfMy1qN5qbk/PtQTixda3Sgk6ntu7lL/l7JNJVLpM/rlFSymxKea/cse3RWH3I0LbH2t7N64A3d3a/XFij0ozdhL0rd2yw7FL4vNf1p4uzjbvN/ai65ZzvLJYiM3VyGIJ1POZX1Y9vbcXKy8vk1+FLWoDa2+jGJ8RU8TZJsWwEhO7vJyDAzROH0V9KyYvLkeLOenaxX7LryGKC7ue8GvvoYKHxk8vSVn1rij7Duas0fZq+SPXQXbVnZ2Pv49hmLHjepK1nJrKoChhxYN1eiavtfajzGHDKKfIk7icC1uF/Jd9OMfaE1oIefFqMK0OXivpUR6OZJcK1cMo8/oQqrewN52oTK5mr0GkKSeXmTpkSiox9CoWYhhlsLe2DQORYpRfCem96r33oYUcQ+EbuAwW+sTGBhze5C3SbVQoPQIa1L32ClQqBBpnG/SSnXSKwp5Q4lSnblfXznP6zfs5/ue7ln3bQQsxH5KBtAn7QnT5UN/U/Yl9Vlh77odhBSbGsCgWLoUlhul3iW2wL8KCqd+ytysRsKuqLV/rpdLozIGmwFcNTcGgHG6fvPSayupF1l8turEQe7PEuzT5XvUQw6DLOMh4rQ1ImWUT0m+323nf3WRTNGapfAtdjqqnsOL0uoxBxDqmTcuXSWn/5lcOLPM7oMeqF/fLxqketm2ywNJho2Q8C+X1ZnBzJf6psurpkur50wWVvNaKx898U3H1RfuUBvgmfgF9OVS9g71eJkzRz3a96HSvu3J3aLsI41oM2km9jcHCTTH4aDN/lm92voLqhUMM2QkJoEmNbZW2ijW5q7ijUdh1L5UZyK+xG7e2aDLvS6rn19jnrfqfr+G9m5muHyzm88FsFc+bUKHGfChSPer1JpPesofbP0TjEiwll5Yv2Kc85tRTv7uKqvf3E4Ayqs1q293ejyMal3PQFH/IovHrDyzgPpIYSHytwNn42hzt9dJ/PFtBoe8OMdAwTgTZxukP2gfqOxBRsAFo7FpUve/Pp6Jb8XwqgRFRdOF4OYd2eVMV+AYWZoJGFkIYkBr+2zjK353xAYVhwMISGrzWn/KwVFRlcMurHj4s7dKiFuLbrKR68dAQLFShT+EUxaAL4L1HfSNAvzrEMGBhPN89RjFm0MIyCtXzp1w4y0SCuIGCMmOlAZRB9MdZCaNOCz8t59KvE/uvLPzyECNcRlqCAbeBll4Hxokdy3vV0+6QHgZuA+Nf0GggD3FOwH80DCMGNfb/qAsheh4MuWGU0KSE8gU0Pv8GGyebpsyFWVgAAAAASUVORK5CYII="},"56d7":function(o,e,i){"use strict";i.r(e);i("caad"),i("2532"),i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"navBar"}},[n("img",{attrs:{id:"botonDesplegarNav",src:i("de63"),alt:"Menu"},on:{click:function(e){o.mostrandoNav=!o.mostrandoNav}}}),n("div",{class:{enlacesOcultos:!o.mostrandoNav},attrs:{id:"botonesNavEnlaces"},on:{click:function(e){o.mostrandoNav=!1}}},[1==o.usuarioLogeado&&o.usuario.permisos&&o.usuario.permisos.includes("maestraVida")?n("router-link",{attrs:{to:"/actividadesVirtuales2021"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navActividadesVirtuales"}},[o._v(" Actividades virtuales ")])]):o._e(),1==o.usuarioLogeado&&o.usuario.permisos&&o.usuario.permisos.includes("maestraVida")?n("router-link",{attrs:{to:"/foros"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navActividadesVirtuales"}},[o._v(" Foros ")])]):o._e(),o.usuario&&o.usuario.permisos&&o.usuario.permisos.includes("maestraVida")?n("div",{staticClass:"bloqueBotones",attrs:{id:"bloqueProyectos"}},[1==o.usuarioLogeado?n("router-link",{attrs:{to:"/proyectos"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navProyectos"}},[o._v(" Grupos ")])]):o._e()],1):o._e(),n("div",{staticClass:"bloqueBotones",attrs:{id:"bloqueSolidaridad"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navAtlas"}},[o._v(" Solidaridad ")]),n("div",{staticClass:"contenedorHijos",attrs:{id:"enlacesHijosSolidaridad"}},[n("router-link",{attrs:{to:"/atlasSolidaridad"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro botonNavHijo",attrs:{id:"navAtlasSolidaridad"}},[o._v(" Atlas de solidaridad ")])])],1)]),n("div",{staticClass:"bloqueBotones",attrs:{id:"bloqueHerramientas"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navAtlas"}},[o._v(" Herramientas ")]),n("div",{staticClass:"contenedorHijos",attrs:{id:"enlacesHijosHerramientas"}},[n("router-link",{attrs:{to:"/atlas"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro botonNavHijo",attrs:{id:"navAtlas"}},[o._v(" Atlas de conocimientos ")])]),n("a",{directives:[{name:"show",rawName:"v-show",value:o.usuarioLogeado,expression:"usuarioLogeado"}],attrs:{target:"_blank",href:o.tallerCuentosUrl+"?t="+o.$store.state.token}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro botonNavHijo",attrs:{id:"navAtlas"}},[o._v(" Taller de creación de cuentos ")])])],1)]),o.usuarioAdministrador||o.usuarioSuperadministrador?n("router-link",{attrs:{to:"/personas"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navActividadesVirtuales"}},[o._v(" Personas ")])]):o._e(),o.usuarioSuperadministrador?n("router-link",{attrs:{to:"/registro",id:"navRegistro"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro"},[o._v(" Registrar usuario ")])]):o._e()],1),n("div",{attrs:{id:"botonesNavDerecha"}},[o.usuarioLogeado?n("div",{directives:[{name:"show",rawName:"v-show",value:o.yo.notificaciones.length>0||o.yo.notificacionesActividadForos.length>0,expression:"\n          yo.notificaciones.length > 0 ||\n          yo.notificacionesActividadForos.length > 0\n        "}],attrs:{id:"bloqueNotificaciones"}},[n("span",{attrs:{id:"numeroNotificaciones"}},[o._v(o._s(o.yo.notificaciones.length+o.yo.notificacionesActividadForos.length))]),n("img",{attrs:{src:i("d1f3"),alt:"Notificaciones",title:o.yo.notificaciones.length+"Notificaciones",id:"imagenCampanita"},on:{click:function(e){o.mostrandoNotificaciones=!o.mostrandoNotificaciones}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoNotificaciones,expression:"mostrandoNotificaciones"}],attrs:{id:"contenedorNotificaciones"}},[o._l(o.yo.notificacionesActividadForos,(function(o){return n("notificacion-actividad-foros",{key:o.id,attrs:{estaNotificacion:o}})})),o._l(o.notificacionesOrdenadas,(function(o){return n("notificacion",{key:o.id,attrs:{estaNotificacion:o}})}))],2)]):o._e(),o.logeado?[n("div",{staticClass:"botonNavBarra botonNav navLogin hoverNegro",attrs:{id:"navLogged"},on:{click:function(e){o.accionesLogeado=!o.accionesLogeado},mouseleave:function(e){o.accionesLogeado=!1}}},[o._v(" "+o._s(o.username)+" "),o.accionesLogeado?n("div",{attrs:{id:"botonesLogeado"}},[n("router-link",{attrs:{to:"/miperfil"}},[n("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"Perfil"}},[o._v("Perfil")])]),n("router-link",{attrs:{to:"/calendarioPersonal"}},[n("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"botonCalendarioPersonal"}},[o._v("Mi calendario")])]),n("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"desconexion"},on:{click:o.deslogeo}},[o._v(" Desconexion ")])],1):o._e()])]:[n("router-link",{staticClass:"botonNavBarra botonNav navLogin hoverNegro",attrs:{to:"/login",id:"navLogin"}},[n("div",[o._v("Login")])])]],2)]),n("router-view",{attrs:{id:"visorRouter"}},[o._v("asd")])],1)},t=[],s=(i("a15b"),i("d81d"),i("fb6a"),i("45fc"),i("d3b7"),i("ac1f"),i("25f0"),i("5319"),i("1276"),i("8785")),r=i("9530"),c=i.n(r),d=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("transition",{attrs:{name:"recogerseArriba"}},[i("div",{staticClass:"notificacion",on:{click:o.visitar}},[i("div",{attrs:{id:"info"}},[o._v(o._s(o.fechaFormateada))]),i("img",{attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaNotificacion.causante.id,alt:"",id:"caritaCausante"}}),i("div",{attrs:{id:"texto"},domProps:{innerHTML:o._s(o.mensaje)}})])])},u=[];i("c740"),i("c975"),i("a434");function l(){var o=Object(s["a"])(["\n          mutation ($idNotificacion: ID!) {\n            eliminarNotificacion(idNotificacion: $idNotificacion)\n          }\n        "]);return l=function(){return o},o}var v={name:"Notificacion",props:{estaNotificacion:{type:Object,default:function(){return{}}}},methods:{visitar:function(){var o=this,e="/";"actividadEstudiantil"==this.estaNotificacion.elementoTarget.tipo?e+="actividad/"+this.estaNotificacion.elementoTarget.id:"nodoAtlasSolidaridad"===this.estaNotificacion.elementoTarget.tipo&&(e+="atlasSolidaridad/"+this.estaNotificacion.elementoTarget.id),this.eliminarse(),this.$router.push(e).catch((function(e){console.log("Error de navegación: ".concat(e.message.substr(0,28))),"Avoided redundant navigation"==e.message.substr(0,28)&&(console.log("Refreshing"),"actividadEstudiantil"==o.estaNotificacion.elementoTarget.tipo?o.$store.commit("refreshActividadEspecifica"):"nodoAtlasSolidaridad"===o.estaNotificacion.elementoTarget.tipo&&o.$store.commit("refreshNodoVentanitaAtlasSolidaridad"))}))},eliminarse:function(){var o=this.estaNotificacion.id;console.log("Eliminandose: ".concat(o)),this.$apollo.mutate({mutation:c()(l()),variables:{idNotificacion:o},update:function(e,i){var n=i.data.eliminarNotificacion;if(n){var a=e.readQuery({query:j,variables:{idNotificacion:o}}),t=JSON.parse(JSON.stringify(a)),s=t.yo.notificaciones.findIndex((function(e){return e.id==o}));s>-1&&t.yo.notificaciones.splice(s,1),e.writeQuery({query:j,variables:{idNotificacion:o},data:t})}}})}},computed:{mensaje:function(){var o="";return"actividadEstudiantil"==this.estaNotificacion.elementoTarget.tipo?this.estaNotificacion.elementoTarget.nombre?o+="Tienes una nueva respuesta en la actividad <span style='color: white' class='textoTarget'>"+this.estaNotificacion.elementoTarget.nombre+"</span>":o+="Tienes una nueva respuesta en una actividad":o=this.estaNotificacion.texto,o},fechaFormateada:function(){var o=new Date(this.estaNotificacion.fecha).toString(),e=o.indexOf("("),i=o.substr(0,e),n=i.indexOf("GMT");return n>-1&&(i=i.substr(0,n)),i}}},p=v,m=(i("c8fe"),i("2877")),h=Object(m["a"])(p,d,u,!1,null,"30a1ea85",null),A=h.exports,b=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"notificacionActividadForos",on:{click:o.visitar}},[n("img",{attrs:{src:i("96cc"),alt:"Conversación",id:"iconoConversacion"}}),n("div",{attrs:{id:"texto"},domProps:{innerHTML:o._s(o.mensaje)}})])},f=[];function g(){var o=Object(s["a"])(["\n          mutation($idParent: ID!) {\n            eliminarNotificacionActividadForos(idParent: $idParent)\n          }\n        "]);return g=function(){return o},o}var N={name:"NotificacionActividadForos",props:{estaNotificacion:{type:Object,default:function(){return{}}}},methods:{visitar:function(){var o="/";if(o+=this.estaNotificacion.tipoParent+"/"+this.estaNotificacion.idParent,"libro"==this.estaNotificacion.tipoParent){console.log("Es el enlace a un libro");var e=this.tallerCuentosUrl+"?t="+this.$store.state.token+"&l="+this.estaNotificacion.idParent;console.log("Abriendo enlace: ".concat(e)),window.open(e,"_blank"),this.eliminarse()}else this.eliminarse(),this.$router.push(o).catch((function(o){console.log("Error de navegación: ".concat(o.message.substr(0,28))),"Avoided redundant navigation"==o.message.substr(0,28)&&console.log("Error por navegación")}))},eliminarse:function(){var o=this.estaNotificacion.idParent;console.log("Eliminandose: ".concat(o)),this.$apollo.mutate({mutation:c()(g()),variables:{idParent:o},update:function(e,i){var n=i.data.eliminarNotificacionActividadForos;if(n){var a=e.readQuery({query:j}),t=JSON.parse(JSON.stringify(a)),s=t.yo.notificacionesActividadForos.findIndex((function(e){return e.idParent==o}));s>-1&&t.yo.notificacionesActividadForos.splice(s,1),e.writeQuery({query:j,data:t})}}})}},computed:{mensaje:function(){var o=this.estaNotificacion.tipoParent;"nodoConocimiento"==o&&(o="nodo de conocimiento");var e="<span style='color:red'>"+o+"</span>",i="Hay nuevas respuestas en los foros del "+e+" "+this.estaNotificacion.nombreParent;return i},tallerCuentosUrl:function(){return"https://pe-pe-pe.herokuapp.com/tallerCuentos"}}},y=N,C=(i("8c38"),Object(m["a"])(y,b,f,!1,null,"140cdbe8",null)),E=C.exports;function w(){var o=Object(s["a"])(["\n          subscription {\n            nuevaNotificacion {\n              id\n              fecha\n              texto\n              elementoTarget {\n                tipo\n                id\n                nombre\n              }\n              causante {\n                id\n                tipo\n              }\n            }\n          }\n        "]);return w=function(){return o},o}function D(){var o=Object(s["a"])(["\n  query {\n    yo {\n      id\n      nombres\n      apellidos\n      notificaciones {\n        id\n        fecha\n        texto\n        elementoTarget {\n          tipo\n          id\n          nombre\n        }\n        causante {\n          id\n          tipo\n        }\n      }\n      notificacionesActividadForos {\n        idParent\n        tipoParent\n        numeroRespuestasNuevas\n        nombreParent\n      }\n      permisos\n      foros {\n        idForo\n        conversaciones {\n          idConversacion\n          respuestasLeidas\n        }\n      }\n    }\n  }\n"]);return D=function(){return o},o}var j=c()(D());function x(o){var e=o.split(".")[1],i=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(i).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}var P={name:"App",apollo:{yo:{query:j,fetchPolicy:"network-only",update:function(o){var e=o.yo;return this.$store.commit("setInfoForosUsuario",e.foros),e},skip:function(){return!this.usuarioLogeado},subscribeToMore:{document:c()(w()),updateQuery:function(o,e){var i=e.subscriptionData.data;return o.yo.notificaciones.some((function(o){return o.id==i.nuevaNotificacion.id}))||o.yo.notificaciones.push(i.nuevaNotificacion),o},skip:function(){return!this.usuarioLogeado}}}},components:{Notificacion:A,NotificacionActividadForos:E},data:function(){return{accionesLogeado:!1,mostrandoNotificaciones:!1,yo:{notificaciones:[],notificacionesActividadForos:[]},mostrandoNav:!1,navSeleccionado:"home"}},computed:{tallerCuentosUrl:function(){return"https://pe-pe-pe.herokuapp.com/tallerCuentos"},username:function(){return this.$store.state.usuario.username},logeado:function(){return void 0!=this.username&&null!=this.username&&this.username.length>2},colorBlancoAccionLogeado:function(){return this.accionesLogeado?{backgroundColor:"white"}:{}},notificacionesOrdenadas:function(){var o=JSON.parse(JSON.stringify(this.yo.notificaciones));return o.sort((function(o,e){return new Date(e.fecha)-new Date(o.fecha)}))}},methods:{deslogeo:function(){this.$store.commit("deslogearse"),this.$router.push("/login")}},mounted:function(){var o=localStorage.getItem("token");if(o){var e=x(o),i=parseInt(Date.now()/1e3);if(!e.version||e.version<1)return console.log("Versión de token caducada"),void this.$store.commit("deslogearse");i<e.exp||!e.exp?this.$store.commit("logearse",o):(console.log("Token expirado: exp: ".concat(e.exp)),this.$store.commit("deslogearse"))}else console.log("")}},S=P,R=(i("034f"),i("881d"),Object(m["a"])(S,a,t,!1,null,"07f23baa",null)),I=R.exports,T=(i("7db0"),i("2f62")),k=(i("99af"),i("5530")),O=i("957f"),M=i("30c8"),B=i("31a8"),F=i("365c"),$=i("4cc9"),Q=i("d2f5"),q=i("b070"),U=i("3161"),V=i("1ee4"),L=i("77fb");function G(){var o=Object(s["a"])(["\n    \n    enum TiposUsuario{\n        USUARIO,\n        ADMINISTRADOR,\n        SUPERADMINSTRADOR\n    }\n    \n    type Usuario{\n        username:String,\n        permisos: TiposUsuario\n     }\n\n    type Mutations{ \n        setUsuario(username: String, permisos: TiposUsuario):Usuario\n    }\n"]);return G=function(){return o},o}var K=c()(G()),Z={},z=new O["a"]({possibleTypes:L}),J=function(){return localStorage.getItem("token")},_="https://pe-pe-pe.herokuapp.com",H="wss://"+_.substr(7)+"/subscripciones",Y=new M["a"]({uri:_+"/graphql"}),X=new Q["a"]({uri:H,options:{reconnect:!0,connectionParams:{headers:{Authorization:"Bearer ".concat(J())}}}}),W=Object(U["a"])((function(o,e){var i=e.headers;return{headers:Object(k["a"])(Object(k["a"])({},i),{},{authorization:J()})}})),oo=Object(V["a"])((function(o){o.graphQLErrors,o.networkError})),eo=oo.concat(W).concat(Y),io=Object(B["a"])((function(o){var e=o.query,i=Object(q["e"])(e);return"OperationDefinition"===i.kind&&"subscription"===i.operation}),X,eo),no=new F["a"]({link:io,cache:z,typeDefs:K,resolvers:Z,connectToDevTools:!0}),ao=Object($["a"])({defaultClient:no});function to(o){var e=o.split(".")[1],i=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(i).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}n["a"].use(T["a"]);var so=new T["a"].Store({state:{usuario:{username:null,permisos:[],id:null,atlas:{centroVista:null,configuracion:{modo:"estudiante"}},foros:[]},token:null,refreshActividadEspecifica:0,refreshNodoVentanitaAtlasSolidaridad:0},mutations:{logearse:function(o,e){var i=to(e);o.token=e,o.usuario.username=i.username,o.usuario.permisos=i.permisos,o.usuario.id=i.id;var n=JSON.stringify(o.usuario);localStorage.setItem("pepepe_usuario",n),localStorage.setItem("token",e)},deslogearse:function(o){localStorage.clear(),o.usuario.username=null,o.usuario.permisos=null,o.usuario.id=null,o.token=null,no.cache.data.clear()},refreshActividadEspecifica:function(o){o.refreshActividadEspecifica++},refreshNodoVentanitaAtlasSolidaridad:function(o){o.refreshNodoVentanitaAtlasSolidaridad++},setCentroVistaAtlas:function(o,e){o.usuario.atlas.centroVista=e},setInfoForosUsuario:function(o,e){o.usuario.foros=e},setRespuestasLeidasConversacionUsuario:function(o,e){var i=JSON.parse(JSON.stringify(o.usuario)),n=i.foros.find((function(o){return o.idForo==e.idForo}));if(!n){var a={idForo:e.idForo,conversaciones:[],__typename:"InfoForosUsuario"};i.foros.push(a),n=i.foros.find((function(o){return o.idForo==e.idForo}))}var t=n.conversaciones.find((function(o){return o.idConversacion==e.idConversacion}));if(!t){var s={idConversacion:e.idConversacion,__typename:"InfoConversacionesUsuario"};n.conversaciones.push(s),t=n.conversaciones.find((function(o){return o.idConversacion==e.idConversacion}))}t.respuestasLeidas=e.respuestasLeidas,o.usuario=i}}}),ro=i("8c4f"),co=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"atlasConocimiento",on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),void(o.panningVista=!0))},mouseenter:function(e){o.hovered=!0},mouseleave:function(e){o.hovered=!1},click:function(e){o.idNodoMenuCx="-1",o.cerrarBusqueda++},mousemove:function(e){return o.panVista(e)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.clickFondoAtlas(e)},touchmove:function(e){return e.preventDefault(),e.stopPropagation(),o.movimientoMobile(e)},touchstart:o.iniciaMovimientoTouch,touchend:o.finTouch,contextmenu:function(e){return e.target!==e.currentTarget||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),o.abrirMenuContextual(e))}}},[i("transition",{attrs:{name:"fadeOut"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:o.showingZoomInfo,expression:"showingZoomInfo"}],attrs:{id:"infoZoom"}},[o._v("x"+o._s(o.factorZoom))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuContextual,expression:"mostrandoMenuContextual"}],style:[o.offsetMenuContextual],attrs:{id:"menuContextual"}},[i("div",{staticClass:"botonMenuContextual",attrs:{id:"botonCrearNuevoNodo"},on:{click:o.crearNodoEnMenuContextual}},[o._v(" Crear Nodo de conocimiento ")])]),o.usuarioSuperadministrador&&"juanMamian"==o.usuario.username?i("div",{style:[{backgroundColor:o.callingPosiciones?"green":"transparent"}],attrs:{id:"botonCallingPosiciones"},on:{click:function(e){e.stopPropagation(),o.callingPosiciones=!o.callingPosiciones}}}):o._e(),i("buscador-nodos-conocimiento",{ref:"buscadorNodos",attrs:{cerrarBusqueda:o.cerrarBusqueda},on:{nodoSeleccionado:o.centrarEnNodo}}),i("panel-conjuntos-nodos",{ref:"panelConjuntosNodos",attrs:{yo:o.yo,todosNodos:o.todosNodos,idNodoTarget:o.idNodoTarget},on:{targetSeleccionado:o.setNodoTargetCache,centrarEnNodo:function(e){o.centrarEnNodo(o.todosNodos.find((function(o){return o.id==e})))}}}),i("panel-configuracion-atlas",{ref:"panelConfiguracionAtlas",attrs:{yo:o.yo}}),o.todosNodos.length>1?i("canvases",{ref:"canvases",style:[o.offsetContenedorNodos],attrs:{todosNodos:o.todosNodos,nodoSeleccionado:o.nodoSeleccionado,idNodoTarget:o.idNodoTarget,idsNecesariosParaTarget:o.idsNecesariosParaTarget,centroVista:o.centroVista,callingPosiciones:o.callingPosiciones,factorZoom:o.factorZoom}}):o._e(),i("div",{style:[o.offsetContenedorNodos],attrs:{id:"contenedorNodos"}},o._l(o.todosNodos,(function(e){return i("nodo-conocimiento",{key:e.id,attrs:{nodoSeleccionado:o.nodoSeleccionado,todosNodos:o.todosNodos,idNodoMenuCx:o.idNodoMenuCx,usuarioAdministradorAtlas:o.usuarioAdministradorAtlas,yo:o.yo,esteNodo:e,centroVista:o.centroVista,esNodoObjetivo:o.idsNodosObjetivos.includes(e.id),esTarget:o.idNodoTarget==e.id,idsNodosAprendidos:o.idsNodosAprendidos,factorZoom:o.factorZoom,escondido:o.idNodoTarget&&!o.idsNecesariosParaTarget.includes(e.id)&&o.idNodoTarget!=e.id,callingPosiciones:o.callingPosiciones},on:{creacionVinculo:o.crearVinculo,eliminacionVinculo:o.eliminarVinculo,cambioDePosicionManual:o.cambiarCoordsManualesNodo,eliminar:o.eliminarNodo,cambieEstadoObjetivo:function(i){return o.setEstadoObjetivoNodoCache(i,e.id)},tengoNuevoValorAprendido:function(i){return o.setNodoAprendidoCache(i,e.id)}},nativeOn:{contextmenu:function(i){if(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)return null;i.stopPropagation(),i.preventDefault(),o.idNodoMenuCx=e.id},click:function(i){return i.stopPropagation(),o.seleccionNodo(e)}}})})),1),i("loading",{directives:[{name:"show",rawName:"v-show",value:!o.nodosDescargados,expression:"!nodosDescargados"}],attrs:{id:"simboloDescargandoNodos",texto:"descargando nodos de conocimiento"}})],1)},uo=[],lo=(i("4de4"),i("4160"),i("4057"),i("a9e3"),i("b680"),i("159b"),i("b85c")),vo=(i("96cf"),i("1da1")),po=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoConocimiento",class:{escondido:o.escondido},style:[o.estiloPosicion,o.estiloSize,o.estiloZeta],on:{mousedown:function(e){if(!e.ctrlKey)return null;e.stopPropagation(),o.arrastrandoNodo=!0},"!click":function(e){return e.ctrlKey?o.stopProp(e):null},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo,mouseleave:function(e){o.arrastrandoNodo=!1},dblclick:o.abrirPaginaNodo}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.arrastrandoNodo,expression:"arrastrandoNodo"}],attrs:{id:"zonaArrastre"}}),n("img",{ref:"iconoNodo",staticClass:"iconoNodo",class:{fantasmeado:o.usuarioLogeado&&!o.aprendible&&"estudiante"===o.yo.atlas.configuracion.modo&&!o.callingPosiciones,deNodoSeleccionado:o.seleccionado},attrs:{src:i("3348"),alt:""}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.nodoAprendido&&"estudiante"===o.yo.atlas.configuracion.modo,expression:"nodoAprendido && yo.atlas.configuracion.modo === 'estudiante'"}],staticClass:"imagenAprendido",style:[{width:parseInt(20*o.factorZoom)+"px",left:parseInt(-10*o.factorZoom)+"px",top:parseInt(-10*o.factorZoom)+"px"}],attrs:{src:i("f0d1"),alt:"Completado",title:"Aprendizaje de este tema completado"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.esTarget,expression:"esTarget"}],staticClass:"imagenTarget",attrs:{src:i("6ddb"),alt:"Objetivo"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"},on:{mousedown:function(o){o.stopPropagation()},mouseup:function(o){o.stopPropagation()}}},[n("div",{staticClass:"seccionMenuCx",on:{click:o.abrirPaginaNodo}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")]),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorAtlas?n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarEsteNodo(e)}}},[o._v(" Eliminar ")]):o._e(),o.usuarioSuperadministrador?n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(" "+o._s(o.esteNodo.id)+" ")]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.yo.atlas&&o.yo.atlas.colecciones&&o.yo.atlas.colecciones.length>0,expression:"yo.atlas && yo.atlas.colecciones && yo.atlas.colecciones.length>0"}],staticClass:"botonMenuCx selectorSubseccionMenuCx"},[o._v(" Colecciones "),n("div",{staticClass:"subseccionMenuCx"},o._l(o.yo.atlas.colecciones,(function(e){return n("div",{key:e.id,staticClass:"botonMenuCx",class:{enColeccion:e.idsNodos.includes(o.esteNodo.id),deshabilitado:o.enviandoQueryColecciones},on:{click:function(i){return i.stopPropagation(),o.toggleNodoEnColeccion(e.id)}}},[o._v(" "+o._s(e.nombre)+" ")])})),0)]),o.usuarioLogeado?n("div",{directives:[{name:"show",rawName:"v-show",value:o.aprendible,expression:"aprendible"}],staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.toggleAprendido(e)}}},[o._v(" "+o._s(o.nodoAprendido?"Desm":"M")+"arcar como aprendido ")]):o._e(),-1==o.nodoSeleccionado.id||o.nodoSeleccionado.id==o.esteNodo.id||1!=o.usuarioSuperadministrador&&1!=o.usuarioAdministradorAtlas?o._e():[n("div",{staticClass:"seccionMenuCx"},[o._v(o._s(o.nodoSeleccionado.nombre))]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.nodoSeleccionado,o.esteNodo)}}},[o._v(" Continua aquí ")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Continua desde aquí ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.esteNodo.vinculos.some((function(e){return e.idRef==o.nodoSeleccionado.id})),expression:"esteNodo.vinculos.some((v) => v.idRef == nodoSeleccionado.id)"}],staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Desconectar ")])]],2),n("div",{ref:"nombre",class:{nombreSeleccionado:o.seleccionado,nombreNodoAprendido:o.nodoAprendido&&"estudiante"===o.yo.atlas.configuracion.modo,nombreNodoOutreach:!o.aprendible&&!o.callingPosiciones&&"estudiante"===o.yo.atlas.configuracion.modo,nombreNodoAprendible:o.aprendible&&!o.nodoAprendido&&"estudiante"===o.yo.atlas.configuracion.modo,nombreNodoExperto:o.usuarioExpertoNodo&&"experto"===o.yo.atlas.configuracion.modo,nodoStuck:o.esteNodo.stuck&&o.callingPosiciones,deNodoSeleccionado:o.seleccionado},style:[o.estiloCartelNombre],attrs:{id:"nombre"}},[o._v(" "+o._s(o.callingPosiciones?o.esteNodo.puntaje:o.esteNodo.nombre)+" ")]),o.esteNodo&&o.esteNodo.descripcion?n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&!o.callingPosiciones&&o.mostrarDescripcion,expression:"seleccionado && !callingPosiciones && mostrarDescripcion"}],staticClass:"cuadritoDescripcionNodo"},[n("div",{staticClass:"descripcionNodo"},[o._v(o._s(o.esteNodo.descripcion))]),n("img",{staticClass:"botonAbrirNodo",attrs:{src:i("9d5e"),alt:"Ir",title:"Abrir este nodo"},on:{click:function(e){return e.stopPropagation(),o.abrirPaginaNodo(e)}}}),n("div",{staticClass:"botonEquis",attrs:{id:"botonCerrarDescripcion"},on:{click:function(e){e.stopPropagation(),o.mostrarDescripcion=!1},mousedown:function(o){o.stopPropagation()},mouseup:function(o){o.stopPropagation()}}},[n("div",{staticClass:"linea1"}),n("div",{staticClass:"linea2"})])]):o._e()])},mo=[];i("a623"),i("498a");function ho(){var o=Object(s["a"])(["\n          mutation($idNodo:ID!, $idColeccion:ID!, $idUsuario:ID!){\n            toggleNodoColeccionNodosAtlasConocimientoUsuario(idNodo: $idNodo, idColeccion:$idColeccion, idUsuario: $idUsuario){\n              id\n              idsNodos\n              nodos{\n                id\n                nombre\n              }\n            }\n          }\n        "]);return ho=function(){return o},o}function Ao(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevoEstadoAprendido: Boolean!) {\n              setNodoAtlasAprendidoUsuario(\n                idNodo: $idNodo\n                nuevoEstadoAprendido: $nuevoEstadoAprendido\n              )\n            }\n          "]);return Ao=function(){return o},o}var bo={name:"NodoConocimiento",data:function(){return{arrastrandoNodo:!1,nombreEditable:!1,nombreEditandose:!1,baseSize:{x:50,y:50},posicion:{x:0,y:0},estiloNombreBase:{minWidth:20,fontSize:12,minHeight:10,padding:5,borderRadius:4},mostrarDescripcion:!0,enviandoQueryColecciones:!1}},props:{esteNodo:{type:Object,required:!0},esNodoObjetivo:Boolean,esTarget:Boolean,yo:Object,escondido:Boolean,centroVista:Object,idNodoMenuCx:String,idsNodosAprendidos:Array,nodoSeleccionado:{type:Object,default:function(){return{id:"-1",nombre:"ninguno"}}},usuarioAdministradorAtlas:{type:Boolean,default:!1},callingPosiciones:Boolean,factorZoom:Number},computed:{menuCx:function(){return this.idNodoMenuCx==this.esteNodo.id},size:function(){var o=Object.assign({},this.baseSize);if(this.seleccionado){var e=this.baseSize.x,i=this.baseSize.y;o.x=Math.round(1.1*e),o.y=Math.round(1.1*i)}return Object(k["a"])({},o)},seleccionado:function(){var o=!1;return this.nodoSeleccionado.id==this.esteNodo.id&&(o=!0),o},estiloPosicion:function(){var o=Math.round((this.posicion.y-this.size.y/2)*this.factorZoom),e=Math.round((this.posicion.x-this.size.x/2)*this.factorZoom);return{top:o+"px",left:e+"px"}},estiloZeta:function(){var o=0;return(this.arrastrandoNodo||this.seleccionado)&&(o=10),this.menuCx&&(o=11),{zIndex:o}},estiloSize:function(){return{width:this.size.x*this.factorZoom+"px",height:this.size.y*this.factorZoom+"px"}},permisosUsuario:function(){return this.$store.state.usuario.permisos},aprendible:function(){var o=this,e=this.esteNodo.vinculos.filter((function(o){return"target"==o.rol})).map((function(o){return o.idRef}));return e.every((function(e){return o.idsNodosAprendidos.includes(e)}))||this.idsNodosAprendidos.includes(this.esteNodo.id)||!this.esteNodo.vinculos.some((function(o){return"target"==o.rol}))},fantasmeado:function(){var o=this;return!(this.esteNodo.vinculos.filter((function(o){return"target"==o.rol})).some((function(e){return o.idsNodosAprendidos.includes(e.idRef)}))||this.esteNodoAprendido||!this.esteNodo.vinculos.some((function(o){return"target"==o.rol})))},nodoAprendido:function(){return this.idsNodosAprendidos.includes(this.esteNodo.id)},estiloCartelNombre:function(){return{minWidth:parseInt(this.estiloNombreBase.minWidth*this.factorZoom)+"px",fontSize:parseInt(this.estiloNombreBase.fontSize*this.factorZoom)+"px",minHeight:parseInt(this.estiloNombreBase.minHeight*this.factorZoom)+"px",padding:parseInt(this.estiloNombreBase.padding*this.factorZoom)+"px",borderRadius:parseInt(this.estiloNombreBase.borderRadius*this.factorZoom)+"px"}},usuarioExpertoNodo:function(){return!(!this.usuario||!this.usuario.id)&&this.esteNodo.expertos.includes(this.usuario.id)}},methods:{toggleAprendido:function(){var o=this,e=!this.nodoAprendido;this.$apollo.mutate({mutation:c()(Ao()),variables:{idNodo:this.esteNodo.id,nuevoEstadoAprendido:e}}).then((function(i){var n=i.data.setNodoAtlasAprendidoUsuario;n&&o.$emit("tengoNuevoValorAprendido",e)}))},abrirPaginaNodo:function(){if(!this.aprendible&&!this.usuarioSuperadministrador&&"estudiante"===this.yo.atlas.configuracion.modo)return alert("¡Aún no puedes estudiar este nodo!");this.$router.push("/nodoConocimiento/"+this.esteNodo.id)},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},eliminarEsteNodo:function(){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?this.$emit("eliminar",this.esteNodo.id):console.log("No autorizado")},arrastrarNodo:function(o){if(this.arrastrandoNodo){var e=document.getElementById("contenedorNodos").getBoundingClientRect(),i=Math.round((o.clientY-e.top)/this.factorZoom),n=Math.round((o.clientX-e.left)/this.factorZoom);this.posicion.y=i,this.posicion.x=n}},guardarPosicion:function(){this.arrastrandoNodo&&(this.$emit("cambioDePosicionManual",this.esteNodo.id,{x:this.posicion.x,y:this.posicion.y}),this.arrastrandoNodo=!1)},crearVinculo:function(o,e,i){console.log("Creando vinculo entre ".concat(e," y ").concat(i)),this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?(console.log("creando un vinculo tipo ".concat(o," entre ").concat(e.nombre," y ").concat(i.nombre," ")),this.$emit("creacionVinculo",{tipo:o,idNodoFrom:e.id,idNodoTo:i.id})):console.log("No autorizado")},eliminarVinculo:function(o,e){console.log("Desconectando"),this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?this.$emit("eliminacionVinculo",{idNodoFrom:o.id,idNodoTo:e.id}):console.log("No autorizado")},stopProp:function(o){console.log("Stopping"),o.stopPropagation()},toggleNodoEnColeccion:function(o){var e=this;this.usuario&&this.usuario.id&&(this.enviandoQueryColecciones=!0,this.$apollo.mutate({mutation:c()(ho()),variables:{idNodo:this.esteNodo.id,idColeccion:o,idUsuario:this.usuario.id}}).then((function(){e.enviandoQueryColecciones=!1})).catch((function(){e.enviandoQueryColecciones=!1})))}},watch:{esteNodo:function(){this.posicion=Object(k["a"])({},this.esteNodo.coords)},seleccionado:function(o){o&&(this.mostrarDescripcion=!0)}},mounted:function(){this.posicion=Object(k["a"])({},this.esteNodo.coords)}},fo=bo,go=(i("7575"),Object(m["a"])(fo,po,mo,!1,null,"49ba5af6",null)),No=go.exports,yo=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"canvases"}},[i("canvas",{ref:"canvasTodosVinculos",staticClass:"canvas",style:[o.offsetCanvasTodosVinculos],attrs:{id:"canvasTodosVinculos"}}),i("canvas",{ref:"canvasVinculosSeleccionado",staticClass:"canvas",style:[o.offsetCanvasVinculosSeleccionado],attrs:{id:"canvasVinculosSeleccionado"}}),i("canvas",{directives:[{name:"show",rawName:"v-show",value:o.callingPosiciones,expression:"callingPosiciones"}],ref:"canvasPosiciones",staticClass:"canvas",style:[o.estiloPosicionRelativaCanvas,o.sizeCanvasTodosVinculos],attrs:{id:"canvasPosiciones"}})])},Co=[],Eo=(i("13d5"),i("b012")),wo={name:"Canvases",data:function(){return{montado:!1,lapiz:null,posicionCanvasTodosVinculos:{top:0,left:0},posicionCanvasActivo:{x:0,y:0}}},props:{nodoSeleccionado:{type:Object,default:function(){return{id:"-1",vinculos:[]}}},idsNecesariosParaTarget:Array,nodoRelevante:[Object],idNodoTarget:String,todosNodos:Array,centroVista:Object,actualizar:Number,callingPosiciones:Boolean,factorZoom:Number},methods:{crearImagenPosiciones:function(){var o=this;this.lapiz=this.$refs.canvasPosiciones.getContext("2d");var e=this.todosNodos;this.nodoSeleccionado&&this.nodoSeleccionado.id.length>4&&(e=[this.nodoSeleccionado]),e<=1||(this.lapiz.canvas.width=parseInt(this.sizeCanvasTodosVinculos.width),this.lapiz.canvas.height=parseInt(this.sizeCanvasTodosVinculos.height),this.lapiz.clearRect(0,0,this.lapiz.canvas.width,this.lapiz.canvas.height),this.lapiz.lineWidth=2,this.lapiz.beginPath(),e.forEach((function(e){o.lapiz.beginPath(),o.lapiz.strokeStyle=e.stuck?"red":"#9761d2",o.lapiz.moveTo(e.coords.x-o.posicionCanvasActivo.x,e.coords.y-o.posicionCanvasActivo.y),o.lapiz.lineTo(e.centroMasa.x-o.posicionCanvasActivo.x,e.centroMasa.y-o.posicionCanvasActivo.y),o.lapiz.arc(e.centroMasa.x-o.posicionCanvasActivo.x,e.centroMasa.y-o.posicionCanvasActivo.y,10,0,2*Math.PI),o.lapiz.stroke()})),this.lapiz.beginPath(),e.forEach((function(e){if(!e.stuck){o.lapiz.strokeStyle="blue";var i=e.coords.x-o.posicionCanvasActivo.x,n=e.coords.y-o.posicionCanvasActivo.y;o.lapiz.moveTo(i,n);var a=100*Math.cos(e.angulo),t=100*Math.sin(e.angulo);o.lapiz.lineTo(i+a,n+t)}})),this.lapiz.stroke())},crearImagenTodosVinculos:function(){var o=this,e=this.todosNodos;if(this.idNodoTarget&&(e=this.todosNodos.filter((function(e){return o.idsNecesariosParaTarget.includes(e.id)||e.id==o.idNodoTarget}))),!(e.length<=1)){var i=this.$refs.canvasTodosVinculos.getContext("2d");i.canvas.width=this.esquinasCanvasTodosVinculos.x2-this.esquinasCanvasTodosVinculos.x1,i.canvas.height=this.esquinasCanvasTodosVinculos.y2-this.esquinasCanvasTodosVinculos.y1;var n={x:this.esquinasCanvasTodosVinculos.x1,y:this.esquinasCanvasTodosVinculos.y1};i.lineWidth=1,i.clearRect(0,0,i.canvas.width,i.canvas.height),i.beginPath(),i.strokeStyle="#b3b3b3";var a,t=Object(lo["a"])(e);try{for(t.s();!(a=t.n()).done;){var s,r=a.value,c=Object(lo["a"])(r.vinculos);try{var d=function(){var a=s.value;if(!e.some((function(o){return o.id==a.idRef})))return"continue";"source"==a.rol&&o.dibujarLineaEntreNodos(r,e.find((function(o){return o.id==a.idRef})),i,n)};for(c.s();!(s=c.n()).done;)d()}catch(u){c.e(u)}finally{c.f()}}}catch(u){t.e(u)}finally{t.f()}i.stroke()}},crearImagenVinculosSeleccionado:function(){var o=this,e=this.todosNodos;if(this.idNodoTarget&&(e=this.todosNodos.filter((function(e){return o.idsNecesariosParaTarget.includes(e.id)||e.id==o.idNodoTarget}))),!(e<=1)){var i=this.$refs.canvasVinculosSeleccionado.getContext("2d");i.canvas.width=this.esquinasCanvasVinculosSeleccionado.x2-this.esquinasCanvasVinculosSeleccionado.x1,i.canvas.height=this.esquinasCanvasVinculosSeleccionado.y2-this.esquinasCanvasVinculosSeleccionado.y1;var n={x:this.esquinasCanvasVinculosSeleccionado.x1,y:this.esquinasCanvasVinculosSeleccionado.y1};if(i.clearRect(0,0,i.canvas.width,i.canvas.height),e.some((function(e){return e.id==o.nodoSeleccionado.id}))){i.beginPath(),i.lineWidth=2,i.strokeStyle="#008000";var a,t=Object(lo["a"])(this.nodoSeleccionado.vinculos);try{var s=function(){var t=a.value;if(!e.some((function(o){return o.id==t.idRef})))return console.log("ALERTA. Vinculo a ".concat(t.idRef," huerfano")),"continue";if("source"==t.rol){var s=e.find((function(o){return o.id==t.idRef}));o.dibujarLineaEntreNodos(o.nodoSeleccionado,s,i,n)}};for(t.s();!(a=t.n()).done;)s()}catch(u){t.e(u)}finally{t.f()}i.stroke(),i.beginPath(),i.strokeStyle="#b80e0e";var r,c=Object(lo["a"])(this.nodoSeleccionado.vinculos);try{var d=function(){var a=r.value;if(!e.some((function(o){return o.id==a.idRef})))return console.log("ALERTA. Vinculo a ".concat(a.idRef," huerfano")),"continue";if("target"==a.rol){var t=e.find((function(o){return o.id==a.idRef}));o.dibujarLineaEntreNodos(t,o.nodoSeleccionado,i,n)}};for(c.s();!(r=c.n()).done;)d()}catch(u){c.e(u)}finally{c.f()}i.stroke()}}},dibujarLineaEntreNodos:function(o,e,i,n){var a=Math.atan((e.coords.y-o.coords.y)/(e.coords.x-o.coords.x));e.coords.y-o.coords.y<0&&e.coords.x-o.coords.x<0&&(a+=Math.PI),e.coords.y-o.coords.y>0&&e.coords.x-o.coords.x<0&&(a+=Math.PI);var t={x:25*Math.cos(a),y:25*Math.sin(a)},s={x:(o.coords.x+t.x)*this.factorZoom-n.x,y:(o.coords.y+t.y)*this.factorZoom-n.y},r={x:(e.coords.x-t.x)*this.factorZoom-n.x,y:(e.coords.y-t.y)*this.factorZoom-n.y};i.moveTo(s.x,s.y),i.lineTo(r.x,r.y);var c={x:(r.x+s.x)/2,y:(r.y+s.y)/2},d=parseInt(7*this.factorZoom),u={x:c.x+d*Math.cos(a-3*Math.PI/4),y:c.y+d*Math.sin(a-3*Math.PI/4)},l={x:c.x+d*Math.cos(a+3*Math.PI/4),y:c.y+d*Math.sin(a+3*Math.PI/4)};i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y)},trazarVinculosDeNodoRecursivamente:function(o,e,i,n){var a=this;i--;var t,s=this.todosNodos.find((function(e){return e.id==o})),r=Object(lo["a"])(s.vinculos);try{var c=function(){var o=t.value;if(o.rol!=e)return"continue";var r=a.todosNodos.find((function(e){return e.id==o.idRef}));if(!r)return console.log("ALERTA. idRef del vinculo no estaba entre los nodos"),"continue";n.push(r.id),"target"==e?(a.dibujarLineaEntreNodos(r,s),n.push(r.id)):"source"==e&&a.dibujarLineaEntreNodos(s,r),i>0&&!n.some((function(o){return o==r.id}))&&(n=a.trazarVinculosDeNodoRecursivamente(r.id,e,i,n))};for(r.s();!(t=r.n()).done;)c()}catch(d){r.e(d)}finally{r.f()}return n},debTrazarVinculos:Eo((function(){this.crearImagenTodosVinculos()}),1e3)},computed:{esquinasCanvasTodosVinculos:function(){var o=this,e=this.todosNodos;if(this.idNodoTarget&&(e=this.todosNodos.filter((function(e){return o.idsNecesariosParaTarget.includes(e.id)||e.id==o.idNodoTarget}))),e.length<=1)return{x1:0,y1:0,x2:0,y2:0};var i={};return i.top=e.reduce((function(o,e){return e.coords.y>o?e.coords.y:o}),0),i.bot=e.reduce((function(o,e){return e.coords.y<o?e.coords.y:o}),0),i.left=e.reduce((function(o,e){return e.coords.x<o?e.coords.x:o}),0),i.right=e.reduce((function(o,e){return e.coords.x>o?e.coords.x:o}),0),{x1:i.left*this.factorZoom,y1:i.bot*this.factorZoom,x2:i.right*this.factorZoom,y2:i.top*this.factorZoom}},offsetCanvasTodosVinculos:function(){return{left:this.esquinasCanvasTodosVinculos.x1+"px",top:this.esquinasCanvasTodosVinculos.y1+"px",width:this.esquinasCanvasTodosVinculos.x2-this.esquinasCanvasTodosVinculos.x1+"px",height:this.esquinasCanvasTodosVinculos.y2-this.esquinasCanvasTodosVinculos.y1+"px"}},esquinasCanvasVinculosSeleccionado:function(){var o=this,e=this.todosNodos.filter((function(e){return e.id==o.nodoSeleccionado.id||e.vinculos.some((function(e){return e.idRef==o.nodoSeleccionado.id}))}));if(this.idNodoTarget&&(e=e.filter((function(e){return o.idsNecesariosParaTarget.includes(e.id)||e.id==o.idNodoTarget}))),e.length<=1)return{x1:0,y1:0,x2:0,y2:0};var i={};return i.top=e.reduce((function(o,e){return e.coords.y>o?e.coords.y:o}),0),i.bot=e.reduce((function(o,e){return e.coords.y<o?e.coords.y:o}),0),i.left=e.reduce((function(o,e){return e.coords.x<o?e.coords.x:o}),0),i.right=e.reduce((function(o,e){return e.coords.x>o?e.coords.x:o}),0),{x1:i.left*this.factorZoom,y1:i.bot*this.factorZoom,x2:i.right*this.factorZoom,y2:i.top*this.factorZoom}},offsetCanvasVinculosSeleccionado:function(){return{left:this.esquinasCanvasVinculosSeleccionado.x1+"px",top:this.esquinasCanvasVinculosSeleccionado.y1+"px",width:this.esquinasCanvasVinculosSeleccionado.x2-this.esquinasCanvasVinculosSeleccionado.x1+"px",height:this.esquinasCanvasVinculosSeleccionado.y2-this.esquinasCanvasVinculosSeleccionado.y1+"px"}},sizeCanvasTodosVinculos:function(){var o=this,e=this.todosNodos;if(this.idNodoTarget&&(e=this.todosNodos.filter((function(e){return o.idsNecesariosParaTarget.includes(e.id)||e.id==o.idNodoTarget}))),e.length<=1)return{width:"0px",height:"0px"};var i={};i.top=e.reduce((function(o,e){return e.coordsManuales.y>o?e.coordsManuales.y:o}),0),i.bot=e.reduce((function(o,e){return e.coordsManuales.y<o?e.coordsManuales.y:o}),0),i.left=e.reduce((function(o,e){return e.coordsManuales.x<o?e.coordsManuales.x:o}),0),i.right=e.reduce((function(o,e){return e.coordsManuales.x>o?e.coordsManuales.x:o}),0);var n=parseInt(i.right-i.left),a=parseInt(i.top-i.bot);return(n>5e3||a>5e3)&&console.log("ALERTA. Diagrama demasiado grande"),this.$set(this.posicionCanvasTodosVinculos,"y",i.bot),this.$set(this.posicionCanvasTodosVinculos,"x",i.left),{width:n+"px",height:a+"px"}},estiloPosicionRelativaCanvas:function(){var o=this.posicionCanvasTodosVinculos.y-this.centroVista.y,e=this.posicionCanvasTodosVinculos.x-this.centroVista.x;return{top:o+"px",left:e+"px"}}},watch:{todosNodos:function(){this.todosNodos.length<1||(this.crearImagenTodosVinculos(),this.callingPosiciones&&this.crearImagenPosiciones(),this.crearImagenVinculosSeleccionado())},nodoSeleccionado:function(){this.callingPosiciones||this.crearImagenVinculosSeleccionado(),this.callingPosiciones&&this.crearImagenPosiciones()},idNodoTarget:function(){console.log("Trazando todos vínculos teniendo en cuenta el target"),this.crearImagenTodosVinculos()},factorZoom:function(){this.debTrazarVinculos()}},mounted:function(){this.montado=!0,this.crearImagenTodosVinculos(),this.crearImagenPosiciones(),this.crearImagenVinculosSeleccionado()}},Do=wo,jo=(i("245b"),Object(m["a"])(Do,yo,Co,!1,null,"7a6ed22f",null)),xo=jo.exports,Po=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"buscadorNodosConocimiento"}},[n("img",{class:{opaco:!o.mostrandoInput},attrs:{src:i("1d54"),alt:"Lupa",title:"Buscar nodos de conocimiento",id:"imagenLupa"},on:{click:function(e){e.stopPropagation(),o.mostrandoInput=!0}}}),n("transition",{attrs:{name:"unfold"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.textoBusqueda,expression:"textoBusqueda"},{name:"show",rawName:"v-show",value:o.mostrandoInput,expression:"mostrandoInput"}],attrs:{type:"text",placeholder:"Buscar",id:"inputBuscador",autocomplete:"off"},domProps:{value:o.textoBusqueda},on:{click:function(o){o.stopPropagation()},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.buscarDatabase(e)},input:function(e){e.target.composing||(o.textoBusqueda=e.target.value)}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.esperandoResultados,expression:"esperandoResultados"}],attrs:{texto:"Buscando"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoLista,expression:"mostrandoLista"}],attrs:{id:"listaResultados"}},o._l(o.resultados,(function(e){return n("div",{key:e.id,staticClass:"resultado",on:{click:function(i){i.stopPropagation(),o.$emit("nodoSeleccionado",e),o.mostrandoInput=!1,o.mostrandoLista=!1}}},[o._v(" "+o._s(e.nombre)+" ")])})),0)],1)},So=[],Ro=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"loading"},[i("span",{staticClass:"textoLoading"},[o._v(o._s(o.texto))])])},Io=[],To={name:"Loading",props:{texto:{type:String,default:"Cargando..."}}},ko=To,Oo=(i("fc23"),Object(m["a"])(ko,Ro,Io,!1,null,"5ff6e04b",null)),Mo=Oo.exports;function Bo(){var o=Object(s["a"])(["\n            query($palabrasBuscadas: String!) {\n              busquedaAmplia(palabrasBuscadas: $palabrasBuscadas) {\n                id\n                nombre\n                resumen\n                coordsManuales {\n                  x\n                  y\n                }\n                coords{\n                  x\n                  y\n                }\n              }\n            }\n          "]);return Bo=function(){return o},o}var Fo={components:{Loading:Mo},name:"BuscadorNodosConocimiento",data:function(){return{textoBusqueda:"",cantidadPalabrasValidas:0,resultados:[],mostrandoInput:!1,mostrandoLista:!1,esperandoResultados:!1}},props:{cerrarBusqueda:Number},methods:{cerrar:function(){this.mostrandoInput=!1},buscarDatabase:function(){var o=this;console.log("******Descargando resultados de búsqueda"),this.esperandoResultados=!0,this.$apollo.query({query:c()(Bo()),variables:{palabrasBuscadas:this.textoBusqueda},fetchPolicy:"network-only"}).then((function(e){var i=e.data.busquedaAmplia;o.resultados=i,o.esperandoResultados=!1,o.mostrandoLista=!0})).catch((function(e){console.log("Error: ".concat(e)),o.esperandoResultados=!1}))}},watch:{textoBusqueda:function(){this.mostrandoLista=!1},cerrarBusqueda:function(){this.mostrandoInput=!1,this.mostrandoLista=!1}}},$o=Fo,Qo=(i("9887"),Object(m["a"])($o,Po,So,!1,null,"c7105d6e",null)),qo=Qo.exports,Uo=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{style:[o.offset],attrs:{id:"panelConjuntosNodos"},on:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},touchmove:function(o){o.stopPropagation()}}},[n("img",{attrs:{src:i("bd51"),alt:"Nodos de usuario",title:"Mis nodos",id:"grabber"},on:{click:function(e){e.stopPropagation(),o.abierto=!o.abierto}}}),n("div",{attrs:{id:"barraConjuntos"}},[o._l(o.conjuntos,(function(e){return n("div",{key:"selectorConjunto"+e.id,staticClass:"selectorConjunto",class:{seleccionado:e.id===o.idConjuntoSeleccionado},on:{click:function(i){return o.seleccionarColeccion(i,e.id)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombreColeccion||!e.editable||e.id!=o.idConjuntoSeleccionado,expression:"\n          !editandoNombreColeccion ||\n          !conjunto.editable ||\n          conjunto.id != idConjuntoSeleccionado\n        "}],staticClass:"nombreColeccion"},[o._v(" "+o._s(e.titulo)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:e.editable&&e.id===o.idConjuntoSeleccionado&&o.editandoNombreColeccion,expression:"\n          conjunto.editable &&\n          conjunto.id === idConjuntoSeleccionado &&\n          editandoNombreColeccion\n        "}],class:{deshabilitado:o.enviandoQueryColecciones},attrs:{type:"text",name:"nuevoNombreColeccion",id:"inputNombreColeccion"+e.id},on:{keypress:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"enter",13,i.key,"Enter")?null:o.guardarNuevoNombreColeccion(i,e.id)},blur:function(e){o.editandoNombreColeccion=!1}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombreColeccion&&e.editable&&e.id===o.idConjuntoSeleccionado,expression:"\n          !editandoNombreColeccion &&\n          conjunto.editable &&\n          conjunto.id === idConjuntoSeleccionado\n        "}],staticClass:"botonEliminarColeccion",attrs:{src:i("2191"),alt:"Eliminar",width:"20px",title:"Eliminar colección"},on:{click:function(i){return i.stopPropagation(),o.eliminarColeccion(e.id)}}})])})),n("div",{class:{deshabilitado:o.enviandoQueryColecciones},attrs:{id:"controlesConjuntos"}},[n("div",{staticClass:"botonControlesConjuntos",on:{click:o.crearNuevaColeccion}},[o._v("Nueva colección")])])],2),n("div",{style:[{visibility:null!=o.idNodoSeleccionado?"visible":"hidden"}],attrs:{id:"controlesListaNodos"}},[n("div",{staticClass:"controlListaNodos hoverGris",on:{click:function(e){return e.stopPropagation(),o.$emit("centrarEnNodo",o.idNodoSeleccionado)}}},[o._v(" Centrar ")]),n("img",{directives:[{name:"show",rawName:"v-show",value:1!=o.idConjuntoSeleccionado,expression:"idConjuntoSeleccionado != 1"}],staticClass:"controlListaNodos",class:{deshabilitado:o.enviandoQueryTarget},attrs:{src:i("6ddb"),alt:"Rastrear",title:"Rastrear nodo",id:"botonRastrearNodo"},on:{click:function(e){return e.stopPropagation(),o.toggleNodoTarget(o.idNodoSeleccionado)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.idNodoSeleccionado,expression:"idNodoSeleccionado"}],staticClass:"botonEliminarNodoColeccion",class:{deshabilitado:o.enviandoQueryNodosSeccion},attrs:{src:i("2191"),alt:"Eliminar"},on:{click:function(e){return e.stopPropagation(),o.eliminarNodoSeleccionadoSeccionSeleccionada(e)}}})]),o.conjuntoSeleccionado?n("div",{directives:[{name:"show",rawName:"v-show",value:o.abierto&&o.conjuntoSeleccionado,expression:"abierto && conjuntoSeleccionado"}],key:"listaNodos"+o.idConjuntoSeleccionado,attrs:{id:"listaNodosConjunto"},on:{click:function(e){if(e.target!==e.currentTarget)return null;e.stopPropagation(),o.idNodoSeleccionado=null}}},o._l(o.conjuntoSeleccionado.nodos,(function(e){return n("icono-nodo-conocimiento",{directives:[{name:"show",rawName:"v-show",value:o.conjuntoSeleccionado,expression:"conjuntoSeleccionado"}],key:e.id,attrs:{esteNodo:e,seleccionado:e.id===o.idNodoSeleccionado,esTarget:o.idNodoTarget===e.id},nativeOn:{click:function(i){i.stopPropagation(),o.idNodoSeleccionado=e.id},dblclick:function(i){return i.stopPropagation(),o.$emit("centrarEnNodo",e.id)}}})})),1):o._e(),o.conjuntoSeleccionado?n("div",{directives:[{name:"show",rawName:"v-show",value:"nodosConClaseDictada"===o.conjuntoSeleccionado.nombre,expression:"conjuntoSeleccionado.nombre === 'nodosConClaseDictada'"}],attrs:{id:"listaClasesNodo"}},o._l(o.clasesDictadasUsuario,(function(e){return n("div",{key:"infoClase"+e.id,staticClass:"infoClase",on:{click:function(i){return i.stopPropagation(),o.$emit("centrarEnNodo",e.idNodoParent)}}},[n("img",{staticClass:"iconoAbrirNodo",attrs:{src:i("3348"),alt:"Abrir nodo",title:"Abrir el nodo de conocimiento"},on:{click:function(i){return i.stopPropagation(),o.abrirPaginaNodo(e.idNodoParent)}}}),n("div",{staticClass:"nombreClase"},[o._v(o._s(e.nombre))]),n("div",{staticClass:"infoInteresados"},[n("div",{staticClass:"cantidadInteresados"},[o._v(o._s(e.interesados.length))]),n("img",{staticClass:"iconoInteresados",attrs:{src:i("1529"),alt:"Interesados",title:"Estudiantes interesados en esta clase"}})])])})),0):o._e()])},Vo=[],Lo=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"iconoNodoConocimiento"},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.esTarget,expression:"esTarget"}],staticClass:"imagenTarget",attrs:{src:i("6ddb"),alt:"Objetivo"}}),n("img",{ref:"iconoNodo",staticClass:"iconoNodo",attrs:{src:this.serverUrl+"/api/atlas/iconos/"+o.esteNodo.id,alt:""}}),n("div",{ref:"nombre",class:{seleccionado:o.seleccionado},attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")])])},Go=[],Ko={name:"IconoNodoConocimiento",data:function(){return{}},props:{esteNodo:Object,esTarget:Boolean,seleccionado:Boolean}},Zo=Ko,zo=(i("c8a3"),Object(m["a"])(Zo,Lo,Go,!1,null,"569edba3",null)),Jo=zo.exports;function _o(){var o=Object(s["a"])(["\n            mutation ($idColeccion: ID!, $idNodo: ID!) {\n              removeNodoColeccionNodosAtlasConocimientoUsuario(\n                idColeccion: $idColeccion\n                idNodo: $idNodo\n              ) {\n                id\n                idsNodos\n                nodos {\n                  id\n                  nombre\n                }\n              }\n            }\n          "]);return _o=function(){return o},o}function Ho(){var o=Object(s["a"])(["\n            mutation ($idColeccion: ID!) {\n              eliminarColeccionNodosAtlasConocimientoUsuario(\n                idColeccion: $idColeccion\n              ) {\n                id\n                atlas {\n                  colecciones {\n                    id\n                    idsNodos\n                    nodos {\n                      id\n                      nombre\n                    }\n                  }\n                }\n              }\n            }\n          "]);return Ho=function(){return o},o}function Yo(){var o=Object(s["a"])(["\n            mutation ($idColeccion: ID!, $nuevoNombre: String!) {\n              setNombreColeccionNodosAtlasConocimientoUsuario(\n                idColeccion: $idColeccion\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                atlas {\n                  colecciones {\n                    id\n                    nombre\n                    idsNodos\n                    nodos {\n                      id\n                      nombre\n                    }\n                  }\n                }\n              }\n            }\n          "]);return Yo=function(){return o},o}function Xo(){var o=Object(s["a"])(["\n            mutation {\n              crearColeccionNodosAtlasConocimientoUsuario {\n                id\n                atlas {\n                  colecciones {\n                    id\n                    nombre\n                    idsNodos\n                    nodos {\n                      id\n                      nombre\n                    }\n                  }\n                }\n              }\n            }\n          "]);return Xo=function(){return o},o}function Wo(){var o=Object(s["a"])(["\n            mutation {\n              nulificarNodoTargetUsuarioAtlas\n            }\n          "]);return Wo=function(){return o},o}function oe(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              setNodoAtlasTarget(idNodo: $idNodo)\n            }\n          "]);return oe=function(){return o},o}var ee=/[^ a-zA-ZÀ-ž0-9_():.,-]/,ie={components:{IconoNodoConocimiento:Jo},name:"PanelConjuntosNodos",props:{yo:Object,todosNodos:Array,idNodoTarget:String},data:function(){return{abierto:!1,idConjuntoSeleccionado:0,editandoNombreColeccion:!1,idNodoSeleccionado:null,enviandoQueryTarget:!1,enviandoQueryColecciones:!1,enviandoQueryNodosSeccion:!1}},methods:{toggleNodoTarget:function(o){var e=this;o&&(this.idNodoTarget!=o?(this.enviandoQueryTarget=!0,this.$apollo.mutate({mutation:c()(oe()),variables:{idNodo:o}}).then((function(i){var n=i.data.setNodoAtlasTarget;e.enviandoQueryTarget=!1,n&&e.$emit("targetSeleccionado",o)})).catch((function(o){e.enviandoQueryTarget=!1,console.log("Error: ".concat(o))}))):this.nulificarNodoTarget())},nulificarNodoTarget:function(){var o=this;this.enviandoQueryTarget=!0,this.$apollo.mutate({mutation:c()(Wo())}).then((function(){o.enviandoQueryTarget=!1,o.$emit("targetSeleccionado",null)})).catch((function(e){o.enviandoQueryTarget=!1,console.log("Error: ".concat(e))}))},abrirPaginaNodo:function(o){o&&this.$router.push("/nodoConocimiento/"+o)},crearNuevaColeccion:function(){var o=this;this.enviandoQueryColecciones=!0,this.$apollo.mutate({mutation:c()(Xo())}).then((function(){o.enviandoQueryColecciones=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryColecciones=!1}))},seleccionarColeccion:function(o,e){if(this.idConjuntoSeleccionado===e){var i=this.conjuntos.find((function(o){return o.id===e})).nombre;console.log("Seting value del input a ".concat(i)),this.editandoNombreColeccion=!0,document.getElementById("inputNombreColeccion"+e).value=i}else this.editandoNombreColeccion=!1;this.idConjuntoSeleccionado=e,this.idNodoSeleccionado=null},guardarNuevoNombreColeccion:function(o,e){var i=this,n=o.target.value;if(console.log("seting nombre de coleccion ".concat(e," con value: ").concat(n)),ee.test(n))return alert("¡El nombre contenía caracteres ilegales!"),!0;this.enviandoQueryColecciones=!0,this.$apollo.mutate({mutation:c()(Yo()),variables:{idColeccion:e,nuevoNombre:n}}).then((function(){i.enviandoQueryColecciones=!1,i.editandoNombreColeccion=!1})).catch((function(o){console.log("Error: ".concat(o)),i.enviandoQueryColecciones=!1}))},eliminarColeccion:function(o){var e=this;confirm("Confirmar eliminación de colección? (Esta acción no se puede deshacer)")&&(this.idConjuntoSeleccionado=null,this.enviandoQueryColecciones=!0,this.$apollo.mutate({mutation:c()(Ho()),variables:{idColeccion:o}}).then((function(){e.enviandoQueryColecciones=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoQueryColecciones=!1})))},eliminarNodoSeleccionadoSeccionSeleccionada:function(){var o=this;this.idConjuntoSeleccionado&&this.idNodoSeleccionado&&(this.enviandoQueryNodosSeccion=!0,this.$apollo.mutate({mutation:c()(_o()),variables:{idColeccion:this.idConjuntoSeleccionado,idNodo:this.idNodoSeleccionado}}).then((function(){o.enviandoQueryNodosSeccion=!1,o.idNodoSeleccionado=null})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryNodosSeccion=!1})))}},computed:{offset:function(){return this.abierto?{right:"0px"}:{left:"100%"}},idsNodosObjetivos:function(){return this.yo&&this.yo.atlas&&this.yo.atlas.datosNodos?this.yo.atlas.datosNodos.filter((function(o){return 1==o.objetivo})).map((function(o){return o.idNodo})):[]},nodosObjetivo:function(){var o=this;return this.yo?this.todosNodos.filter((function(e){return o.idsNodosObjetivos.includes(e.id)})):[]},nodosClasesDictadasUsuario:function(){var o=this;return this.usuario&&this.usuario.id?this.todosNodos.filter((function(e){return e.clases.some((function(e){return e.idExperto===o.usuario.id}))})):[]},clasesDictadasUsuario:function(){var o=this;if(this.usuario&&this.usuario.id){var e=[];return this.nodosClasesDictadasUsuario.forEach((function(i){e=e.concat(i.clases.filter((function(e){return e.idExperto===o.usuario.id})).map((function(o){return Object(k["a"])(Object(k["a"])({},o),{},{idNodoParent:i.id})})))})),e}},conjuntos:function(){return"experto"===this.yo.atlas.configuracion.modo?this.conjuntosUsuario.concat([{nombre:"nodosConClaseDictada",titulo:"Mis clases",id:1,nodos:[],modo:"experto"}]):this.conjuntosUsuario},conjuntoSeleccionado:function(){var o=this;return null===this.idConjuntoSeleccionado?null:this.conjuntos.find((function(e){return e.id===o.idConjuntoSeleccionado}))},nodoSeleccionado:function(){var o=this;return this.idNodoSeleccionado?this.todosNodos.find((function(e){return e.id===o.idNodoSeleccionado})):null},conjuntosUsuario:function(){if(!this.yo||!this.yo.atlas||!this.yo.atlas.colecciones)return[];var o=JSON.parse(JSON.stringify(this.yo.atlas.colecciones));return o.forEach((function(o){o.titulo=o.nombre,o.modo="estudiante",o.editable=!0,o.editandoNombre=!1})),o}},watch:{abierto:function(){this.idNodoSeleccionado=null}}},ne=ie,ae=(i("8aa8"),Object(m["a"])(ne,Uo,Vo,!1,null,"afd63bfc",null)),te=ae.exports,se=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{style:[o.offset],attrs:{id:"panelConfiguracionAtlas"},on:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()}}},[n("img",{attrs:{src:i("1490"),alt:"Configuración",title:"Configuración",id:"grabber"},on:{click:function(e){e.stopPropagation(),o.abierto=!o.abierto}}}),n("div",{attrs:{id:"configuracionesGenerales"}},[n("div",{staticClass:"configuracionGeneral"},[n("div",{staticClass:"labelConfiguracion"},[o._v("Modo")]),n("img",{staticClass:"iconoModo",class:{activo:"estudiante"===o.yo.atlas.configuracion.modo,deshabilitado:o.enviandoQueryModo},attrs:{src:i("8c7c"),alt:"Estudiante",title:"Cambiar a modo estudiante"},on:{click:function(e){return o.setModo("estudiante")}}}),n("img",{staticClass:"iconoModo",class:{activo:"experto"===o.yo.atlas.configuracion.modo,deshabilitado:o.enviandoQueryModo},attrs:{src:i("59a1"),alt:"Experto",title:"Cambiar a modo experto"},on:{click:function(e){return o.setModo("experto")}}})])])])},re=[];function ce(){var o=Object(s["a"])(["\n            mutation ($idUsuario: ID!, $nuevoModo: String!) {\n              setModoUsuarioAtlas(idUsuario: $idUsuario, nuevoModo: $nuevoModo){\n                  id\n                  atlas{\n                      configuracion{\n                          modo\n                      }                    \n                  }\n              }\n            }\n          "]);return ce=function(){return o},o}var de={name:"PanelConfiguracionAtlas",props:{yo:Object},data:function(){return{abierto:!1,enviandoQueryModo:!1}},computed:{offset:function(){return this.abierto?{right:"0px"}:{left:"100%"}}},methods:{setModo:function(o){var e=this;this.usuario&&this.usuario.id&&(this.enviandoQueryModo=!0,this.$apollo.mutate({mutation:c()(ce()),variables:{idUsuario:this.usuario.id,nuevoModo:o}}).then((function(){e.enviandoQueryModo=!1})).catch((function(o){e.enviandoQueryModo=!1,console.log("Error: ".concat(o))})))}}},ue=de,le=(i("ee96"),Object(m["a"])(ue,se,re,!1,null,"5c5d6168",null)),ve=le.exports;function pe(){var o=Object(s["a"])(["\n            mutation ($tipo: String!, $idNodoFrom: ID!, $idNodoTo: ID!) {\n              crearVinculo(\n                tipo: $tipo\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    rol\n                    tipo\n                  }\n                }\n              }\n            }\n          "]);return pe=function(){return o},o}function me(){var o=Object(s["a"])(["\n            mutation ($idNodoFrom: ID!, $idNodoTo: ID!) {\n              eliminarVinculoFromTo(\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    tipo\n                    rol\n                  }\n                }\n              }\n            }\n          "]);return me=function(){return o},o}function he(){var o=Object(s["a"])(["\n            query {\n              yo {\n                id\n                atlas {\n                  centroVista {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return he=function(){return o},o}function Ae(){var o=Object(s["a"])(["\n            mutation ($infoNodo: NodoConocimientoInput) {\n              crearNodo(infoNodo: $infoNodo) {\n                nombre\n                descripcion\n                id\n                expertos\n                clases {\n                  id\n                  nombre\n                  idExperto\n                  interesados\n                }\n                coordsManuales {\n                  x\n                  y\n                }\n                coords {\n                  x\n                  y\n                }\n                centroMasa {\n                  x\n                  y\n                }\n                angulo\n                stuck\n                puntaje\n                vinculos {\n                  idRef\n                  rol\n                  tipo\n                }\n              }\n            }\n          "]);return Ae=function(){return o},o}function be(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              eliminarNodo(idNodo: $idNodo)\n            }\n          "]);return be=function(){return o},o}function fe(){var o=Object(s["a"])(["\n            mutation ($idNodo: String, $coordsManuales: CoordsInput) {\n              setCoordsManuales(\n                idNodo: $idNodo\n                coordsManuales: $coordsManuales\n              ) {\n                modificados {\n                  id\n                  coordsManuales {\n                    x\n                    y\n                  }\n                  coords {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return fe=function(){return o},o}function ge(){var o=Object(s["a"])(["\n  query {\n    yo {\n      id\n      atlas {\n        datosNodos {\n          idNodo\n          objetivo\n          aprendido\n        }\n        configuracion {\n          modo\n        }\n        idNodoTarget\n        colecciones{\n          id\n          nombre\n          idsNodos\n          nodos{\n            id\n            nombre\n          }\n        }\n      }\n    }\n  }\n"]);return ge=function(){return o},o}function Ne(){var o=Object(s["a"])(["\n  query {\n    todosNodos {\n      id\n      nombre\n      descripcion\n      expertos\n      clases {\n        id\n        nombre\n        idExperto\n        interesados\n      }\n      coordsManuales {\n        x\n        y\n      }\n      coords {\n        x\n        y\n      }\n      centroMasa {\n        x\n        y\n      }\n      stuck\n      angulo\n      puntaje\n      vinculos {\n        idRef\n        rol\n        tipo\n      }\n    }\n  }\n"]);return Ne=function(){return o},o}var ye=i("b012"),Ce=c()(Ne()),Ee=c()(ge()),we={components:{NodoConocimiento:No,Canvases:xo,BuscadorNodosConocimiento:qo,Loading:Mo,PanelConjuntosNodos:te,PanelConfiguracionAtlas:ve},name:"AtlasConocimiento",apollo:{todosNodos:{query:Ce,result:function(){this.dibujarVinculosGrises()},pollInterval:function(){return this.callingPosiciones?5e3:null},update:function(o){var e=o.todosNodos;this.nodosDescargados=!0;var i=JSON.parse(JSON.stringify(e));return i.forEach((function(o){o.coordsManuales=o.coords})),e},fetchPolicy:"cache-and-network"},yo:{query:Ee,skip:function(){return!this.usuarioLogeado||this.todosNodos.length<1}}},data:function(){return{hovered:!1,todosNodos:[],nodosDescargados:!1,idNodoSeleccionado:"-1",idNodoMenuCx:"-1",idsNecesariosParaTarget:[],yo:{atlas:{datosNodos:[],configuracion:{modo:"estudiante"}}},centroVistaDecimal:{x:218,y:39},showingZoomInfo:!1,zoom:80,minZoom:20,maxZoom:200,pinching:!1,lastPinchDistance:0,actualizarTrazos:0,panningVista:!1,vistaPanned:!1,nodosConectadosAlSeleccionado:{listaCompleta:[],listaPorNiveles:[]},profundidadNodosConectadosAlSeleccionado:1,actualizarVinculosGrises:0,ultimoTouchX:0,ultimoTouchY:0,cerrarBusqueda:0,callingPosiciones:!1,mostrandoMenuContextual:!1,offsetMenuContextual:{top:"0px",left:"0px"}}},computed:{idsNodosObjetivos:function(){return this.yo&&this.yo.atlas&&this.yo.atlas.datosNodos?this.yo.atlas.datosNodos.filter((function(o){return 1==o.objetivo})).map((function(o){return o.idNodo})):[]},nodosObjetivo:function(){var o=this;return this.todosNodos?this.todosNodos.filter((function(e){return o.idsNodosObjetivos.includes(e.id)})):[]},nodoSeleccionado:function(){var o=this;if(!this.todosNodos)return console.log("NO HAY NODOS"),!1;if(this.todosNodos.some((function(e){return e.id==o.idNodoSeleccionado}))){var e=this.todosNodos.findIndex((function(e){return e.id==o.idNodoSeleccionado}));return this.todosNodos[e]}return{id:"-1",vinculos:[]}},idUsuario:function(){return this.$store.state.usuario.id},usuarioAdministradorAtlas:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("atlasAdministrador")},idNodoTarget:function(){return this.yo&&this.yo.atlas?this.yo.atlas.idNodoTarget:null},idsNodosAprendidos:function(){return this.yo.atlas.datosNodos.filter((function(o){return 1==o.aprendido})).map((function(o){return o.idNodo}))},centroVista:function(){return{x:Math.round(this.centroVistaDecimal.x),y:Math.round(this.centroVistaDecimal.y)}},factorZoom:function(){return Number((this.zoom/100).toFixed(2))},offsetContenedorNodos:function(){return{left:-this.centroVista.x*this.factorZoom+"px",top:-this.centroVista.y*this.factorZoom+"px"}}},methods:{abrirMenuContextual:function(o){var e=this.$el.getBoundingClientRect(),i=Math.round(o.pageY-e.top),n=Math.round(o.pageX-e.left);this.$set(this.offsetMenuContextual,"top",i+"px"),this.$set(this.offsetMenuContextual,"left",n+"px"),this.mostrandoMenuContextual=!0},crearNodoEnMenuContextual:function(){var o=document.getElementById("contenedorNodos").getBoundingClientRect();console.log("Offset menú cx: ".concat(this.offsetMenuContextual.top)),console.log("Offset menú cx: ".concat(parseInt(this.offsetMenuContextual.top)));var e={x:parseInt((parseInt(this.offsetMenuContextual.left)-o.left)/this.factorZoom),y:parseInt((parseInt(this.offsetMenuContextual.top)-o.top)/this.factorZoom)};console.log("Creando nuevo nodo en ".concat(JSON.stringify(e))),this.crearNodo(e)},encontrarNodosNecesariosDeNodo:function(o,e){var i=this,n=this.todosNodos.find((function(e){return e.id==o}));if(!n)return e;var a=n.vinculos.filter((function(o){return"target"==o.rol})).map((function(o){return o.idRef}));return a.forEach((function(o){e.includes(o)||(e.push(o),e=i.encontrarNodosNecesariosDeNodo(o,e))})),e},clickFondoAtlas:function(){console.log("Click en el fondo del atlas"),this.vistaPanned||(this.idNodoSeleccionado="-1"),this.panningVista=!1,this.vistaPanned=!1,this.$refs.panelConjuntosNodos.abierto=!1,this.$refs.panelConfiguracionAtlas.abierto=!1,this.mostrandoMenuContextual=!1},setEstadoObjetivoNodoCache:function(o,e){console.log("Seting en cache al nodo ".concat(e," con estado objetivo: ").concat(o));var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:Ee}),a=JSON.parse(JSON.stringify(n)),t=a.yo.atlas.datosNodos.findIndex((function(o){return o.idNodo==e}));t>-1?a.yo.atlas.datosNodos[t].objetivo=o:(console.log("No estaba en caché. Pushing"),a.yo.atlas.datosNodos.push({__typename:"DatoNodoUsuario",idNodo:e,objetivo:o,aprendido:!1})),i.writeQuery({query:Ee,data:a})},setNodoAprendidoCache:function(o,e){console.log("Seting en cache al nodo ".concat(e," con estado aprendido: ").concat(o));var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:Ee}),a=JSON.parse(JSON.stringify(n)),t=a.yo.atlas.datosNodos.findIndex((function(o){return o.idNodo==e}));t>-1?a.yo.atlas.datosNodos[t].aprendido=o:(console.log("No estaba en caché. Pushing"),a.yo.atlas.datosNodos.push({__typename:"DatoNodoUsuario",idNodo:e,objetivo:!1,aprendido:o})),i.writeQuery({query:Ee,data:a})},setNodoTargetCache:function(o){console.log("Seting en cache al nodo ".concat(o," como target"));var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Ee}),n=JSON.parse(JSON.stringify(i));n.yo.atlas.idNodoTarget=o,e.writeQuery({query:Ee,data:n})},centrarEnNodo:function(o){this.$set(this.centroVistaDecimal,"x",o.coords.x-this.$el.offsetWidth/(2*this.factorZoom)),this.$set(this.centroVistaDecimal,"y",o.coords.y-this.$el.offsetHeight/(2*this.factorZoom)),this.seleccionNodo(o)},iniciaMovimientoTouch:function(o){if(2===o.touches.length){var e=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY);return this.lastPinchDistance=e,void(this.pinching=!0)}this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY},movimientoMobile:function(o){if(this.pinching){var e=this.$el,i=e.getBoundingClientRect(),n={x:Math.round(i.width/2/this.factorZoom)+this.centroVista.x,y:Math.round(i.height/2/this.factorZoom)+this.centroVista.y},a={x:(n.x-this.centroVistaDecimal.x)/(i.width/this.factorZoom),y:(n.y-this.centroVistaDecimal.y)/(i.height/this.factorZoom)},t=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY),s=t-this.lastPinchDistance;return s*=.5,this.zoomVista(s),this.lastPinchDistance=t,this.$set(this.centroVistaDecimal,"x",n.x-i.width/this.factorZoom*a.x),void this.$set(this.centroVistaDecimal,"y",n.y-i.height/this.factorZoom*a.y)}var r=o.changedTouches[0].clientX-this.ultimoTouchX,c=o.changedTouches[0].clientY-this.ultimoTouchY;this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY,this.desplazarVista(r,c)},finTouch:function(){this.pinching=!1},cambiarCoordsManualesNodo:function(o,e){var i=this;this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?(this.todosNodos[this.todosNodos.findIndex((function(e){return e.id==o}))].coords=e,this.$apollo.mutate({mutation:c()(fe()),variables:{idNodo:o,coordsManuales:e}}).then((function(){i.$refs.canvases.crearImagenTodosVinculos()})).catch((function(o){console.log("Error: ".concat(o))}))):console.log("No autorizado")},eliminarNodo:function(o){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?confirm("¿Seguro de que quieres eliminar este nodo?")&&(console.log("enviando mutacion de eliminar nodo"),this.$apollo.mutate({mutation:c()(be()),variables:{idNodo:o},update:function(e,i){var n=i.data.eliminarNodo;if(n){var a=e.readQuery({query:Ce}),t=JSON.parse(JSON.stringify(a)),s=t.todosNodos.findIndex((function(e){return e.id==o}));s>-1?(t.todosNodos.splice(s,1),e.writeQuery({query:Ce,data:t})):console.log("El nodo no estaba presente")}else console.log("Nodo no fue eliminado")}}).then((function(o){console.log("quitando el objeto del array. ".concat(o))}))):console.log("No autorizado")},crearNodo:function(o){var e=this;if(this.usuarioSuperadministrador||this.usuarioAdministradorAtlas){console.log("enviando una mutación de crear nodo");var i={coordsManuales:{x:o.x,y:o.y},coords:{x:o.x,y:o.y}};console.log("en las coordenadas: ".concat(o.x,", ").concat(o.y," ")),this.$apollo.mutate({mutation:c()(Ae()),variables:{infoNodo:i}}).then((function(o){var i=o.data.crearNodo;console.log("Creado ".concat(i.id));var n=e.$apollo.provider.defaultClient,a=n.readQuery({query:Ce}),t=JSON.parse(JSON.stringify(a)),s=t.todosNodos,r=s.findIndex((function(o){return o.id===i.id}));r>-1?console.log("El nodo ya estaba en caché"):(s.push(i),n.writeQuery({query:Ce,data:t}))})).catch((function(o){console.log("Error. E: ".concat(o))}))}else console.log("Error usuario no autorizado")},descargarCentroVista:function(){var o=this;this.$apollo.query({query:c()(he()),variables:{idUsuario:this.$store.state.usuario.id},fetchPolicy:"network-only"}).then((function(e){var i=e.data.yo,n=i.atlas.centroVista;o.$set(o.centroVista,"x",n.x),o.$set(o.centroVista,"y",n.y),o.$store.commit("setCentroVistaAtlas",n)})).catch((function(o){console.log("error fetching centro vista: ".concat(o))}))},desplazarVista:function(o,e){this.$set(this.centroVistaDecimal,"x",Math.round(this.centroVistaDecimal.x-o/this.factorZoom)),this.$set(this.centroVistaDecimal,"y",Math.round(this.centroVistaDecimal.y-e/this.factorZoom)),this.actualizarTrazos++},panVista:function(o){this.panningVista&&(this.desplazarVista(o.movementX,o.movementY),o.preventDefault(),this.vistaPanned=!0)},seleccionNodo:function(o){var e=this;if(this.idNodoSeleccionado=o.id,!this.todosNodos.some((function(o){return o.id==e.idNodoSeleccionado})))return console.log("No encontrado"),null;var i=parseInt(this.profundidadNodosConectadosAlSeleccionado),n=[],a=this.idNodoSeleccionado,t=[a];if(i>0){for(var s=0;s<i;s++)n[s]=[];var r=this.encontrarNodosConectadosRecursivamente(a,["target","source"],["continuacion"],t,n,0,i);t=r.listaCompleta,n=r.listaPorNiveles}this.nodosConectadosAlSeleccionado={listaCompleta:t,listaPorNiveles:n}},eliminarVinculo:function(o){var e=this;return Object(vo["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.usuarioSuperadministrador||e.usuarioAdministradorAtlas){i.next=3;break}return console.log("No autorizado"),i.abrupt("return");case 3:return console.log("eliminando un vinculo entre ".concat(o.idNodoFrom," y ").concat(o.idNodoTo," ")),i.next=6,e.$apollo.mutate({mutation:c()(me()),variables:{idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 6:case"end":return i.stop()}}),i)})))()},dibujarVinculosGrises:function(){this.actualizarVinculosGrises++},crearVinculo:function(o){var e=this;return Object(vo["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.usuarioSuperadministrador||e.usuarioAdministradorAtlas){i.next=3;break}return console.log("No autorizado"),i.abrupt("return");case 3:return console.log("creando un vinculo ".concat(JSON.stringify(o)," ")),i.next=6,e.$apollo.mutate({mutation:c()(pe()),variables:{tipo:"continuacion",idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 6:case"end":return i.stop()}}),i)})))()},encontrarNodosConectadosRecursivamente:function(o,e,i,n,a,t,s){var r,c=this,d=this.todosNodos.find((function(e){return e.id==o})),u=Object(lo["a"])(d.vinculos);try{var l=function(){var o=r.value;if(c.todosNodos.some((function(e){return e.id==o.idRef}))&&e.some((function(e){return e==o.rol}))&&i.some((function(e){return e==o.tipo}))&&!n.some((function(e){return e==o.idRef}))){if(a[t].push(o.idRef),n.push(o.idRef),t+1<s){var d=c.encontrarNodosConectadosRecursivamente(o.idRef,e,i,n,a,t+1,s);n=d.listaCompleta,a=d.listaPorNiveles}}else console.log("No")};for(u.s();!(r=u.n()).done;)l()}catch(v){u.e(v)}finally{u.f()}return{listaCompleta:n,listaPorNiveles:a}},zoomVista:function(o){var e=this.zoom+o;e<this.minZoom?this.zoom=this.minZoom:e>this.maxZoom?this.zoom=this.maxZoom:this.zoom=e},zoomWheel:function(o){if(this.hovered&&o.ctrlKey){o.preventDefault();var e=this.$el,i=e.getBoundingClientRect(),n={x:Math.round((o.clientX-i.left)/this.factorZoom)+this.centroVista.x,y:Math.round((o.clientY-i.top)/this.factorZoom)+this.centroVista.y},a={x:(n.x-this.centroVistaDecimal.x)/(i.width/this.factorZoom),y:(n.y-this.centroVistaDecimal.y)/(i.height/this.factorZoom)},t=.2;this.zoomVista(-Math.round(o.deltaY*t),{x:n.x,y:n.y}),this.$set(this.centroVistaDecimal,"x",n.x-i.width/this.factorZoom*a.x),this.$set(this.centroVistaDecimal,"y",n.y-i.height/this.factorZoom*a.y)}},hideZoomInfo:ye((function(){this.showingZoomInfo=!1}),1e3)},watch:{nodoSeleccionado:function(){this.actualizarTrazos++},route:function(o){console.log("cambio de navegación a ".concat(o.path))},idNodoTarget:function(o){o?(console.log("iniciando busqueda de requeridos de nodo ".concat(o)),this.idsNecesariosParaTarget=this.encontrarNodosNecesariosDeNodo(o,[])):this.idsNecesariosParaTarget=[]},zoom:function(){this.showingZoomInfo=!0,this.hideZoomInfo()}},mounted:function(){screen.width<600&&(this.zoom=70)},created:function(){window.addEventListener("wheel",this.zoomWheel,{passive:!1})},removed:function(){window.removeEventListener("wheel",this.zoomWheel)}},De=we,je=(i("a90e"),Object(m["a"])(De,co,uo,!1,null,"39061435",null)),xe=je.exports,Pe=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"loginArea"}},[i("div",{attrs:{id:"ventanaCentral"}},[i("form",[i("p",{attrs:{id:"tituloVentana"}},[o._v("Iniciar sesion")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.username,expression:"username"}],staticClass:"inputs",style:o.colorUsername,attrs:{type:"text",name:"username",placeholder:"Nombre de usuario"},domProps:{value:o.username},on:{input:[function(e){e.target.composing||(o.username=e.target.value)},function(e){o.loginFail=!1}]}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.password,expression:"password"}],staticClass:"inputs",style:o.colorPassword,attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:o.password},on:{input:[function(e){e.target.composing||(o.password=e.target.value)},function(e){o.loginFail=!1}]}}),i("br"),i("br"),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoDatos,expression:"enviandoDatos"}],attrs:{texto:"Conectando..."}}),i("button",{staticClass:"botonEnviar",class:{loginFail:o.loginFail,desaparecido:o.enviandoDatos},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),o.iniciarSesion(e)}}},[o._v(" "+o._s(o.loginFail?o.loginFailMsg:"Conectarse")+" ")])],1)])])},Se=[],Re=i("bc3a"),Ie=i.n(Re),Te=/[^a-zA-Z0-9_ñÑ]/g,ke=/[^a-zA-Z0-9ñÑ*@_-]/g,Oe=6,Me=4,Be={name:"LoginArea",components:{Loading:Mo},data:function(){return{username:"",password:"",loginFail:!1,loginFailMsg:"",enviandoDatos:!1}},computed:{usuarioConectado:function(){return null!=this.$store.state.usuario.username},nombreUsuario:function(){return this.$store.state.usuario.username},colorUsername:function(){return{color:Te.test(this.username)||this.username.length<Me?"red":"black"}},colorPassword:function(){return{color:ke.test(this.password)||this.password.length<Oe?"red":"black"}}},methods:{iniciarSesion:function(){console.log("Iniciando login");var o=this;Te.test(this.username)||ke.test(this.password)||this.password.length<Oe||this.username.length<Me||(this.enviandoDatos=!0,Ie.a.post(this.serverUrl+"/api/usuarios/login",{username:this.username,password:this.password}).then((function(e){console.log("Logeado"),e.data.username==o.username&&(o.$store.commit("logearse",e.data.token),window.location.href=o.clienteUrl,o.enviandoDatos=!1)})).catch((function(e){if(o.enviandoDatos=!1,o.$store.commit("deslogearse"),e.response&&e.response.data.error){if("badLogin"==e.response.data.error)return o.loginFail=!0,void(o.loginFailMsg="Datos inválidos");"sebastian"==e.response.data.error&&console.log("Usuario bloqueado temporalmente")}e.response&&e.response.data.msjUsuario&&alert(e.response.data.msjUsuario),console.log("error: ".concat(e))})))},deslogearse:function(){this.$store.commit("deslogearse"),window.location.href=this.clienteUrl}}},Fe=Be,$e=(i("b662"),Object(m["a"])(Fe,Pe,Se,!1,null,"47c86b38",null)),Qe=$e.exports,qe=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"perfilPersonal"},[n("div",{attrs:{id:"categorias"}},[n("div",{staticClass:"categorias",on:{click:function(e){o.seccion="categorias"}}},[o._v(" Datos personales ")]),n("div",{staticClass:"categorias",on:{click:function(e){o.seccion="contacto"}}},[o._v(" Información de contacto ")]),n("div",{staticClass:"categorias",on:{click:function(e){o.seccion="conocimientos"}}},[o._v(" Conocimientos ")])]),n("div",{attrs:{id:"contenidos"}},[n("div",{staticClass:"contenidos editables",attrs:{id:"datosPersonales"}},[n("img",{staticClass:"botonEditar hoverGris",attrs:{src:i("559e")},on:{click:function(e){o.editandoDatosPersonales=!o.editandoDatosPersonales}}}),n("div",{attrs:{id:"fotografia"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.subiendoNuevaFotoPersonal,expression:"subiendoNuevaFotoPersonal"}],attrs:{texto:"Enviando fotografía..."}}),n("img",{class:{deshabilitada:o.subiendoNuevaFotoPersonal},attrs:{id:"laFotografia",title:"Cambiar fotografia",src:o.serverUrl+"/api/usuarios/fotografias/"+o.yo.id+"?"+o.refreshImg,alt:""},on:{click:o.seleccionarFoto}}),n("input",{ref:"inputNuevaFoto",attrs:{type:"file",id:"inputNuevaFoto"},on:{change:o.subirNuevaFoto}})],1),n("div",{attrs:{id:"textosDatosPersonales"}},[o.editandoDatosPersonales?[n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.nombres,expression:"edicionDatosPersonales.nombres"}],attrs:{disabled:"",type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.edicionDatosPersonales.nombres},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"nombres",e.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.apellidos,expression:"edicionDatosPersonales.apellidos"}],attrs:{disabled:"",type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.edicionDatosPersonales.apellidos},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"apellidos",e.target.value)}}}),n("br"),n("br"),n("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.fechaNacimiento,expression:"edicionDatosPersonales.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.edicionDatosPersonales.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"fechaNacimiento",e.target.value)}}}),n("br"),n("button",{on:{click:o.enviarDatosPersonales}},[o._v("Enviar")])]:[n("div",{staticClass:"nombreApellido",attrs:{id:"miNombre"}},[o._v(o._s(o.yo.nombres))]),n("div",{staticClass:"nombreApellido",attrs:{id:"miApellido"}},[o._v(o._s(o.yo.apellidos))]),n("br"),n("div",{attrs:{id:"miEdad"}},[o._v(o._s(o.yo.edad)+" años")])]],2)]),n("div",{staticClass:"contenidos editables",attrs:{id:"informacionContacto"}},[n("img",{staticClass:"botonEditar",attrs:{src:i("559e")},on:{click:function(e){o.editandoDatosContacto=!o.editandoDatosContacto}}}),o.editandoDatosContacto?[n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.lugarResidencia,expression:"edicionDatosContacto.lugarResidencia"}],attrs:{type:"text",placeholder:"Residencia"},domProps:{value:o.edicionDatosContacto.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"lugarResidencia",e.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.email,expression:"edicionDatosContacto.email"}],attrs:{type:"email",placeholder:"Correo electronico"},domProps:{value:o.edicionDatosContacto.email},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"email",e.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.numeroTel,expression:"edicionDatosContacto.numeroTel"}],attrs:{type:"text",placeholder:"Número telefónico"},domProps:{value:o.edicionDatosContacto.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"numeroTel",e.target.value)}}}),n("br"),n("button",{on:{click:o.enviarDatosContacto}},[o._v("Enviar")])]:[n("div",{staticClass:"infoContacto",attrs:{id:"miResidencia"}},[o._v("Residencia: "+o._s(o.yo.lugarResidencia))]),n("div",{staticClass:"infoContacto",attrs:{id:"miEmail"}},[o._v("Correo electrónico: "+o._s(o.yo.email))]),n("div",{staticClass:"infoContacto",attrs:{id:"miTelefono"}},[o._v("Mi número telefónico: "+o._s(o.yo.numeroTel))])]],2),o.usuarioLogeado?n("div",{staticClass:"contenidos editables",attrs:{id:"informacionPassword"}},[n("div",{staticClass:"zonaBotonEditar"},[o._v(" Cambiar contraseña "),n("img",{staticClass:"botonEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarPassword",title:o.editandoDatosPassword?"Volver":"Cambiar contraseña"},on:{click:function(e){o.editandoDatosPassword=!o.editandoDatosPassword,o.resetearCamposPassword}}})]),o.editandoDatosPassword?n("form",{attrs:{id:"zonaInputsNuevoPassword"}},[n("label",{attrs:{for:"viejoPassword"}},[o._v("Escribe tu contraseña actual: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.viejoPassword,expression:"edicionDatosPassword.viejoPassword"}],staticClass:"inputsNuevoPassword",attrs:{name:"viejoPassword",type:"password",placeholder:"Contraseña actual"},domProps:{value:o.edicionDatosPassword.viejoPassword},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPassword,"viejoPassword",e.target.value)}}}),n("label",{attrs:{for:"nuevoPassword"}},[o._v("Escribe tu nueva contraseña: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.nuevoPassword,expression:"edicionDatosPassword.nuevoPassword"}],staticClass:"inputsNuevoPassword",attrs:{name:"nuevoPassword",type:"password",placeholder:"Nueva contraseña"},domProps:{value:o.edicionDatosPassword.nuevoPassword},on:{input:[function(e){e.target.composing||o.$set(o.edicionDatosPassword,"nuevoPassword",e.target.value)},o.compararNuevoPassConfirmacion]}}),n("label",{attrs:{for:"nuevoPasswordConfirmacion"}},[o._v("Confirma tu nueva contraseña: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.nuevoPasswordConfirmacion,expression:"edicionDatosPassword.nuevoPasswordConfirmacion"}],staticClass:"inputsNuevoPassword",class:{enRojo:!o.nuevoPasswordConfirmado},attrs:{name:"nuevoPasswordConfirmacion",type:"password",placeholder:"Nueva contraseña"},domProps:{value:o.edicionDatosPassword.nuevoPasswordConfirmacion},on:{input:[function(e){e.target.composing||o.$set(o.edicionDatosPassword,"nuevoPasswordConfirmacion",e.target.value)},o.compararNuevoPassConfirmacion]}}),n("button",{attrs:{disabled:!o.nuevoPasswordConfirmado},on:{click:function(e){return e.preventDefault(),o.enviarDatosPassword(e)}}},[o._v(" Enviar ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.resultadoEdicionPassword,expression:"resultadoEdicionPassword"}],attrs:{id:"resultadoEdicionPassword"}},[o._v(" "+o._s(this.resultadoEdicionPassword)+" ")])]):void 0,n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoDatosPassword,expression:"enviandoDatosPassword"}],attrs:{texto:"Enviando..."}})],2):o._e()])])},Ue=[],Ve=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,Le=/[^ a-zA-ZÀ-žñÑ]/g,Ge=/[^0-9+-]/g,Ke=/\S+@\S+\.\S+/,Ze=/[12][90][0-9][0-9]-[01][0-9]-[0-3][0-9]/,ze=/[^a-zA-Z0-9ñÑ*@_-]/g,Je=function(o){var e=[];for(var i in o){if(!o[i])return e.push("Falta ".concat(i)),e;o[i]=o[i].trim(),"nombres"==i?(o.nombres.length<2&&e.push("Tu nombre es muy corto"),Le.test(o.nombres)&&e.push("Tu nombre contiene caracteres no permitidos")):"apellidos"==i?(o.apellidos.length<2&&e.push("Tu apellido es muy corto"),Le.test(o.apellidos)&&e.push("Tu apellido contiene caracteres no permitidos")):"fechaNacimiento"==i?Ze.test(o.fechaNacimiento)||e.push("Tu fecha de nacimiento es incorrecta"):"email"==i?o.email.length>0&&!Ke.test(o.email)&&e.push("Tu e-mail no es válido"):"numeroTel"==i?Ge.test(o.numeroTel)&&e.push("Tu número telefónico no es válido"):"lugarResidencia"==i?(o.lugarResidencia.length<2&&e.push("Tu lugar de residencia es muy corto"),Ve.test(o.lugarResidencia)&&e.push("Tu lugar de residencia contiene caracteres no permitidos")):"username"==i?(o.username.length<4&&e.push("Tu nombre de usuario es muy corto"),Ve.test(o.username)&&e.push("Tu nombre de usuario contiene caracteres no permitidos")):"password"==i?((o.password.length<6||o.password.length>32)&&e.push("Tu contraseña debe contener entre 6 y 32 caracteres"),ze.test(o.password)&&e.push("Tu password contiene caracteres no permitidos")):e.push("El dato ".concat(i," no tenía lógica de validación. Informa al administrador del sistema por favor"))}return e};function _e(){var o=Object(s["a"])(["\n              mutation($nuevosDatos: DatosEditablesUsuario) {\n                editarDatosUsuario(nuevosDatos: $nuevosDatos) {\n                  id\n                  ...DatosContacto\n                }\n              }\n              ","\n            "]);return _e=function(){return o},o}function He(){var o=Object(s["a"])(["\n              mutation($nuevosDatos: DatosEditablesUsuario) {\n                editarDatosUsuario(nuevosDatos: $nuevosDatos) {\n                  id\n                  ...DatosPersonales\n                }\n              }\n              ","\n            "]);return He=function(){return o},o}function Ye(){var o=Object(s["a"])(["\n        query {\n          yo {\n            id\n            nombres\n            apellidos\n            fechaNacimiento\n            edad\n            lugarResidencia\n            numeroTel\n            email\n            username\n            nodosConocimiento {\n              nodoConocimiento {\n                id\n                nombre\n              }\n            }\n          }\n        }\n      "]);return Ye=function(){return o},o}function Xe(){var o=Object(s["a"])(["\n  fragment DatosContacto on Usuario {\n    lugarResidencia\n    email\n    numeroTel\n  }\n"]);return Xe=function(){return o},o}function We(){var o=Object(s["a"])(["\n  fragment DatosPersonales on Usuario {\n    nombres\n    apellidos\n    fechaNacimiento\n    edad\n  }\n"]);return We=function(){return o},o}var oi=c()(We()),ei=c()(Xe()),ii={name:"PerfilPersonal",components:{Loading:Mo},apollo:{yo:{query:c()(Ye()),fetchPolicy:"network-only",skip:function(){return!this.usuarioLogeado}}},data:function(){return{yo:{id:null,nombres:null,apellidos:null,fechaNacimiento:null,email:null,edad:null,fotografia:null,lugarResidencia:null,username:null,misNodos:[],grupoEstudiantil:""},edicionDatosPassword:{viejoPassword:"",nuevoPassword:"",nuevoPasswordConfirmacion:""},subiendoNuevaFotoPersonal:!1,editandoDatosPersonales:!1,editandoDatosContacto:!1,editandoDatosPassword:!1,nuevoPasswordConfirmado:!1,enviandoDatosPassword:!1,resultadoEdicionPassword:null,refreshImg:0}},computed:{edicionDatosPersonales:function(){return{nombres:this.yo.nombres,apellidos:this.yo.apellidos,fechaNacimiento:this.yo.fechaNacimiento.substr(0,10)}},edicionDatosContacto:function(){return{lugarResidencia:this.yo.lugarResidencia,email:this.yo.email,numeroTel:this.yo.numeroTel}}},methods:{subirNuevaFoto:function(){var o=this,e=this.$refs.inputNuevaFoto,i=new FormData,n=e.files[0],a=n["type"],t=["image/jpeg","image/png"];t.includes(a)?(i.append("nuevaFoto",n),o.subiendoNuevaFotoPersonal=!0,Ie()({method:"post",url:this.serverUrl+"/api/usuarios/updateFoto",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data;o.subiendoNuevaFotoPersonal=!1,console.log("respuesta: ".concat(JSON.stringify(i))),"ok"==i.resultado&&o.refreshImg++})).catch((function(e){o.subiendoNuevaFotoPersonal=!1,console.log("Error subiendo foto. E: ".concat(e))}))):console.log("Archivo ilegal")},enviarDatosPersonales:function(){var o=this;console.log("Enviando nuevos datos personales");var e=Je(this.edicionDatosPersonales);e.length<1?this.$apollo.mutate({mutation:c()(He(),oi),variables:{nuevosDatos:this.edicionDatosPersonales}}).then((function(){console.log("Datos correctamente editados"),o.editandoDatosPersonales=!1})).catch((function(o){console.log("Error: ".concat(o))})):console.log("Errores: ".concat(e))},enviarDatosContacto:function(){var o=new Object;for(var e in this.edicionDatosContacto)console.log("".concat(e," vale ").concat(this.edicionDatosContacto[e])),null!=this.edicionDatosContacto[e]&&void 0!=this.edicionDatosContacto[e]&&""!=this.edicionDatosContacto[e]&&(o[e]=this.edicionDatosContacto[e]);var i=this;console.log("Enviando nuevos datos contacto: ".concat(JSON.stringify(o)));var n=Je(o);n.length<1?this.$apollo.mutate({mutation:c()(_e(),ei),variables:{nuevosDatos:o}}).then((function(){console.log("Datos correctamente editados"),i.editandoDatosContacto=!1})).catch((function(o){console.log("Error: ".concat(o))})):console.log("Errores: ".concat(n))},resetearCamposPassword:function(){this.$set(this.edicionDatosPassword,"viejoPassword",""),this.$set(this.edicionDatosPassword,"nuevoPassword",""),this.$set(this.edicionDatosPassword,"nuevoPasswordConfirmacion",""),this.resultadoEdicionPassword=null},enviarDatosPassword:function(){var o=this;if(console.log("Iniciando envio de nuevo password"),this.nuevoPasswordConfirmado){var e=this,i=this.edicionDatosPassword;for(var n in this.edicionDatosPassword)if(!this.edicionDatosPassword[n])return void alert("Te faltó introducir un campo");if(i.nuevoPassword==i.nuevoPasswordConfirmacion){this.resultadoEdicionPassword=null;var a=Je({password:i.viejoPassword}).concat(Je({password:i.nuevoPassword}));a.length>0&&alert(a[0]),e.enviandoDatosPassword=!0,Ie()({method:"post",url:this.serverUrl+"/api/usuarios/updatePassword",data:i,headers:{Authorization:"Bearer "+this.$store.state.token}}).then((function(i){var n=i.data;e.enviandoDatosPassword=!1,console.log("Contraseña cambiada"),"ok"==n.resultado&&(o.resetearCamposPassword(),n.msjUsuario&&(o.resultadoEdicionPassword=n.msjUsuario))})).catch((function(i){e.enviandoDatosPassword=!1,console.log("Error subiendo nuevo password. E: ".concat(i)),i.response&&(o.resultadoEdicionPassword=i.response.msjUsuario)}))}else alert("Debes confirmar correctamente la nueva contraseña")}else console.log("Nuevo password no confirmado")},compararNuevoPassConfirmacion:function(){this.edicionDatosPassword.nuevoPassword==this.edicionDatosPassword.nuevoPasswordConfirmacion?this.nuevoPasswordConfirmado=!0:this.nuevoPasswordConfirmado=!1},seleccionarFoto:function(){this.$refs.inputNuevaFoto.click()}}},ni=ii,ai=(i("d74c"),Object(m["a"])(ni,qe,Ue,!1,null,"c281a86e",null)),ti=ai.exports,si=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"visorNodoConocimiento"},[n("div",{attrs:{id:"layout"}},[n("div",{attrs:{id:"zonaNombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExperto||o.usuarioSuperadministrador||o.usuarioAdministradorAtlas,expression:"\n          usuarioExperto ||\n          usuarioSuperadministrador ||\n          usuarioAdministradorAtlas\n        "}],staticClass:"controlesZona"},[n("img",{staticClass:"bEditar botonesControlesZona",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del nodo"},on:{click:o.toggleEditandoNombre}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar botonesControlesZona",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:o.guardarNuevoNombre}})]),n("p",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre&&!o.$apollo.queries.esteNodo.loading,expression:"!editandoNombre && !$apollo.queries.esteNodo.loading"}],attrs:{id:"nombre"}},[o._v(o._s(o.esteNodo.nombre))]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.esteNodo.loading,expression:"$apollo.queries.esteNodo.loading"}],attrs:{id:"loadingInfoNodo",texto:"Cargando información..."}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text",id:"inputNuevoNombre"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}})],1),n("img",{attrs:{src:i("de63"),id:"bAbrirBarraLateral"},on:{click:function(e){o.mostrandoBarraLateral=!o.mostrandoBarraLateral}}}),n("div",{class:{barraLateralInvisible:!o.mostrandoBarraLateral},attrs:{id:"barraLateral"},on:{click:function(e){o.mostrandoBarraLateral=!1}}},[o._l(o.seccionesOrganizadas,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:"seccionBasica4"!=e.id||o.usuarioSuperadministrador||o.usuarioAdministradorAtlas,expression:"\n          seccion.id != 'seccionBasica4' ||\n          usuarioSuperadministrador ||\n          usuarioAdministradorAtlas\n        "}],key:e.id,staticClass:"selectorSeccion",class:{selectorSeleccionado:e.id==o.idSeccionSeleccionada,selectorSeccionBasica:e.seccionBasica,seccionFuncional:e.seccionBasica&&"seccionBasica1"!=e.id},on:{click:function(i){o.idSeccionSeleccionada=e.id}}},[o._v(" "+o._s(e.texto)+" "),n("img",{directives:[{name:"show",rawName:"v-show",value:"expertos"===e.nombre&&o.esteNodo.clases&&o.esteNodo.clases.length>0,expression:"\n            seccion.nombre === 'expertos' &&\n            esteNodo.clases &&\n            esteNodo.clases.length > 0\n          "}],staticClass:"anuncioSelectorSeccion",attrs:{src:i("59a1"),alt:"Clases",title:"Hay clases ofrecidas acerca de este tema"}}),o.usuarioSuperadministrador||o.usuarioAdministradorAtlas||o.usuarioExperto?n("div",{staticClass:"controlesSeccion",class:{deshabilitado:e.editandose}},[n("div",{staticClass:"bControlesSeccion",on:{click:function(i){return i.stopPropagation(),o.moverSeccion(e.id,"bajar")}}},[n("div",{staticClass:"bSubirBajar"})]),n("div",{staticClass:"bControlesSeccion",on:{click:function(i){return i.stopPropagation(),o.moverSeccion(e.id,"subir")}}},[n("div",{staticClass:"bSubirBajar bSubir",staticStyle:{transform:"rotateZ(180deg)","transform-origin":"center center"}})]),o.usuarioSuperadministrador||o.usuarioAdministradorAtlas||o.usuarioExperto?n("img",{staticClass:"bEliminarSeccion bControlesSeccion",attrs:{src:i("2191"),alt:"Eliminar",title:"Eliminar esta seccion"},on:{click:function(i){return o.eliminarSeccion(e.id)}}}):o._e()]):o._e()])})),o.usuarioSuperadministrador||o.usuarioAdministradorAtlas||o.usuarioExperto?n("div",{staticClass:"botonZonaCrearSeccion",attrs:{id:"bAddSeccion"},on:{click:function(e){o.creandoNuevaSeccion=!o.creandoNuevaSeccion,o.nombreNuevaSeccion=null}}},[o._v(" "+o._s(o.creandoNuevaSeccion?"Cancelar":"Crear sección")+" ")]):o._e(),o.usuarioSuperadministrador||o.usuarioAdministradorAtlas||o.usuarioExperto?n("div",{directives:[{name:"show",rawName:"v-show",value:o.creandoNuevaSeccion,expression:"creandoNuevaSeccion"}],attrs:{id:"creadorSeccion"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nombreNuevaSeccion,expression:"nombreNuevaSeccion"}],class:{letrasRojas:o.nombreNuevaSeccionIlegal},staticStyle:{"font-size":"16px"},attrs:{type:"text",max:"30",placeholder:"Nombre"},domProps:{value:o.nombreNuevaSeccion},on:{input:function(e){e.target.composing||(o.nombreNuevaSeccion=e.target.value)}}}),n("div",{staticClass:"botonZonaCrearSeccion",class:{deshabilitado:o.nombreNuevaSeccionIlegal},attrs:{id:"bCrearNuevaSeccion"},on:{click:o.crearNuevaSeccion}},[o._v(" Crear ")])]):o._e()],2),n("div",{attrs:{id:"contenedorSecciones"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"seccionBasica1"==o.idSeccionSeleccionada,expression:"idSeccionSeleccionada == 'seccionBasica1'"}],staticClass:"seccionPrimerNivel",attrs:{id:"seccionDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExperto||o.usuarioSuperadministrador||o.usuarioAdministradorAtlas,expression:"\n            usuarioExperto ||\n            usuarioSuperadministrador ||\n            usuarioAdministradorAtlas\n          "}],staticClass:"controlesZona"},[n("img",{staticClass:"bEditar botonesControlesZona",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar Descripción del nodo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n              editandoDescripcion == true && nuevoDescripcionIlegal == false\n            "}],staticClass:"bGuardar botonesControlesZona",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteNodo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion",placeholder:"¡Escribe una descripción acerca de este tema!"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),o._l(o.esteNodo.secciones,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:o.idSeccionSeleccionada==e.id,expression:"idSeccionSeleccionada == seccion.id"}],key:e.id,staticClass:"seccionPrimerNivel seccionContenidoExterno",class:"seccion"+e.nombre},[1==o.usuarioExperto||1==o.usuarioAdministradorAtlas||1==o.usuarioSuperadministrador?n("div",{staticClass:"barraControlesContenidosExternos"},[n("img",{staticClass:"bEditar botonesEditarContenidosExternos",attrs:{src:i("559e"),alt:"Editar",id:"bEditarSeccion"+e.nombre,title:"Seleccionar archivos de contenido"},on:{click:function(e){e.stopPropagation(),o.editandoArchivosContenidos=!o.editandoArchivosContenidos}}})]):o._e(),n("iframe",{directives:[{name:"show",rawName:"v-show",value:!o.editandoArchivosContenidos,expression:"!editandoArchivosContenidos"}],ref:"contenidoExterno"+e.id,refInFor:!0,attrs:{id:"visorContenido",src:o.direccionNodo+"/"+e.id+"/"}}),1==o.usuarioExperto||1==o.usuarioAdministradorAtlas||1==o.usuarioSuperadministrador?n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoArchivosContenidos,expression:"editandoArchivosContenidos"}],staticClass:"cuadroCargaArchivos"},[o._l(e.archivos,(function(i,a){return n("div",{key:a,staticClass:"archivoExistente",class:{deshabilitado:i.enviandoInfo}},[n("div",{staticClass:"botonMarcarPrimario",class:{rojo:i.primario},on:{click:function(n){return o.marcarPrimario(i,e.id)}}}),o._v(" "+o._s(i.nombre)+" "),n("span",{staticClass:"botonBorrarArchivoExistente",on:{click:function(n){return o.borrarArchivoExistenteSeccionNodo(i,e.id)}}},[o._v("Borrar")])])})),n("input",{staticClass:"inputArchivoContenido",attrs:{type:"file"},on:{change:function(i){return o.subirArchivoContenido(i,e)}}})],2):o._e()])})),n("div",{directives:[{name:"show",rawName:"v-show",value:"seccionBasica2"==o.idSeccionSeleccionada,expression:"idSeccionSeleccionada == 'seccionBasica2'"}],staticClass:"seccionPrimerNivel",attrs:{id:"seccionExpertos"}},[n("div",{staticClass:"controlesZona",attrs:{id:"controlesExpertos"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryExpertos,expression:"enviandoQueryExpertos"}],attrs:{texto:"Esperando..."}}),1!=o.usuarioLogeado||o.usuarioExperto||1!=o.usuarioSuperadministrador&&1!=o.usuarioAdministradorAtlas&&0!=o.esteNodo.expertos.length?o._e():n("div",{staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},attrs:{id:"asumirExperto"},on:{click:o.asumirComoExperto}},[o._v(" Asumir ")]),o.usuarioLogeado&&!o.usuarioExperto&&!o.usuarioPosibleExperto&&o.esteNodo.expertos.length>0?n("div",{staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},attrs:{id:"botonAddExperto"},on:{click:o.entrarListaPosiblesExpertos}},[o._v(" Quiero aportar como experto ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioExperto&&1!=o.usuarioPosibleExperto?o._e():n("div",{staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},on:{click:o.abandonarListaExpertos}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioExperto||1==o.usuarioSuperadministrador?n("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idExpertoSeleccionado&&0==o.expertoSeleccionadoEstaAceptado,expression:"\n              idExpertoSeleccionado != null &&\n              expertoSeleccionadoEstaAceptado == false\n            "}],staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},on:{click:function(e){return o.aceptarExperto(o.idExpertoSeleccionado)}}},[o._v(" Aceptar como experto ")]):o._e(),1==o.usuarioLogeado&&1==o.usuarioExperto?n("div",{staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},on:{click:function(e){return o.ofrecerClase()}}},[o._v(" Ofrezco una clase ")]):o._e()],1),n("div",{attrs:{id:"listaExpertos"}},[o._l(o.esteNodo.expertos,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idExpertoSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idExpertoSeleccionado=e,o.expertoSeleccionadoEstaAceptado=!0}},scopedSlots:o._u([{key:"alertas",fn:function(){return[n("img",{directives:[{name:"show",rawName:"v-show",value:o.esteNodo.clases.some((function(o){return o.idExperto===e})),expression:"\n                  esteNodo.clases.some((c) => c.idExperto === idPersona)\n                "}],staticClass:"iconoExpertoConClase",staticStyle:{width:"20px"},attrs:{src:i("59a1"),alt:"Clase"}})]},proxy:!0}],null,!0)})})),o._l(o.esteNodo.posiblesExpertos,(function(e){return n("icono-persona-autonomo",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExperto||o.usuario&&o.usuario.id&&o.usuario.id===e,expression:"\n              usuarioExperto ||\n              (usuario && usuario.id && usuario.id === idPersona)\n            "}],key:e,staticClass:"personaPosibleExperto",attrs:{idPersona:e,seleccionado:o.idExpertoSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idExpertoSeleccionado=e,o.expertoSeleccionadoEstaAceptado=!1},dblclick:function(i){return i.shiftKey?o.aceptarExperto(e):null}}})}))],2),n("div",{attrs:{id:"zonaClases"}},[n("div",{attrs:{id:"listaClases"}},o._l(o.esteNodo.clases,(function(e){return n("clase-nodo",{key:e.id,attrs:{usuarioExperto:o.usuarioExperto,idNodo:o.esteNodo.id,estaClase:e},on:{meElimine:function(i){return o.eliminarClaseCache(e.id)}}})})),1)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"seccionBasica3"==o.idSeccionSeleccionada,expression:"idSeccionSeleccionada == 'seccionBasica3'"}],ref:"zonaForos",staticClass:"seccionPrimerNivel",attrs:{id:"seccionForos"}},[o.usuarioExperto?n("div",{staticClass:"nombreForo"},[o._v("Foro expertos")]):o._e(),o.usuarioExperto?n("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteNodo.idForoExpertos}}):o._e(),o.usuarioExperto?n("br"):o._e(),n("div",{staticClass:"nombreForo"},[o._v("Foro público")]),n("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteNodo.idForoPublico}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"seccionBasica4"==o.idSeccionSeleccionada&&(o.usuarioSuperadministrador||o.usuarioAdministradorAtlas),expression:"\n          idSeccionSeleccionada == 'seccionBasica4' &&\n          (usuarioSuperadministrador || usuarioAdministradorAtlas)\n        "}],staticClass:"seccionPrimerNivel",attrs:{id:"seccionKeywords"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExperto||o.usuarioSuperadministrador||o.usuarioAdministradorAtlas,expression:"\n            usuarioExperto ||\n            usuarioSuperadministrador ||\n            usuarioAdministradorAtlas\n          "}],staticClass:"controlesZona"},[n("img",{staticClass:"bEditar botonesControlesZona",attrs:{src:i("559e"),alt:"Editar",id:"bEditarKeywords",title:"Editar keywords del nodo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoKeywords(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoKeywords&&0==o.nuevoKeywordsIlegal,expression:"editandoKeywords == true && nuevoKeywordsIlegal == false"}],staticClass:"bGuardar botonesControlesZona",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoKeywords"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoKeywords(e)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoKeywords,expression:"!editandoKeywords"}],ref:"keywords",attrs:{id:"keywords"}},[o._v(" "+o._s(o.esteNodo.keywords)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoKeywords,expression:"nuevoKeywords"},{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],ref:"inputNuevoKeywords",class:{letrasRojas:o.nuevoKeywordsIlegal},attrs:{id:"inputNuevoKeywords",placeholder:"Escribe las palabras clave para encontrar este nodo"},domProps:{value:o.nuevoKeywords},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),o.guardarNuevoKeywords(e))},input:function(e){e.target.composing||(o.nuevoKeywords=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoKeywords,expression:"enviandoNuevoKeywords"}],attrs:{texto:"Enviando..."}})],1)],2)])])},ri=[],ci=i("2909"),di=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"iconoPersonaAutonomo",class:{yo:o.soyYo}},[i("img",{directives:[{name:"show",rawName:"v-show",value:o.fotografiaEnabled,expression:"fotografiaEnabled"}],staticClass:"fotografia",style:[o.offsetFoto],attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.idPersona,alt:"Usuario"},on:{load:function(e){o.fotografiaEnabled=!0}}}),i("div",{attrs:{id:"contenedorAlertas"}},[o._t("alertas")],2),i("div",{staticClass:"nombres",class:{nombreSeleccionado:o.seleccionado},style:[{fontSize:o.basicFontSizeNombre*o.factor+"px"}]},[o._v(" "+o._s(o.estaPersona.nombres)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.menuContextual,expression:"menuContextual"}],attrs:{id:"menuCxPersona"}},[i("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(o._s(o.idPersona))]),o.usuarioSuperadministrador?i("div",{staticClass:"botonMenuCx"},[o._v(" "+o._s(o.estaPersona.username)+" ")]):o._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoPermiso,expression:"nuevoPermiso"}],attrs:{type:"text",placeholder:"Nuevo permiso"},domProps:{value:o.nuevoPermiso},on:{input:function(e){e.target.composing||(o.nuevoPermiso=e.target.value)}}}),i("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.addPermisos(e)}}},[o._v("Dar permiso")]),o._l(o.opcionesMenuCx,(function(e,n){return i("div",{key:n,staticClass:"botonMenuCx",on:{click:function(i){return o.$emit(e.evento)}}},[o._v(" "+o._s(e.textoVisible)+" ")])}))],2)])},ui=[];function li(){var o=Object(s["a"])(["\n  fragment fragConversacion on Conversacion{\n    id\n    titulo    \n    estado\n    acceso   \n    cantidadRespuestas\n    infoUltimaRespuesta{\n      fecha      \n    }\n  }\n"]);return li=function(){return o},o}function vi(){var o=Object(s["a"])(["\n  fragment fragRespuesta on RespuestaConversacionForo{\n    id\n    fecha\n    mensaje\n    interpolaciones{\n      ...fragInterpolacion\n      quote{\n        ...fragQuote\n        interpolaciones{\n          ...fragInterpolacion\n          quote{\n            ...fragQuote\n            interpolaciones{\n              ...fragInterpolacion\n              quote{\n                ...fragQuote\n                interpolaciones{\n                  ...fragInterpolacion\n                  quote{\n                    ...fragQuote\n                    interpolaciones{\n                      ...fragInterpolacion\n                      quote{\n                        ...fragQuote\n                        interpolaciones{\n                          ...fragInterpolacion\n                          quote{\n                            ...fragQuote\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    enlaceAdjunto\n    infoAutor{\n      id\n      nombres\n      apellidos\n      username\n    }\n    archivo{\n      googleDriveDirectLink\n    }\n  }\n  ",", \n  ","\n"]);return vi=function(){return o},o}function pi(){var o=Object(s["a"])(["\n  fragment fragInterpolacion on Interpolacion{\n    tipo\n    enlaceIframe\n    mensaje    \n  }\n"]);return pi=function(){return o},o}function mi(){var o=Object(s["a"])(["\n  fragment fragQuote on Quote{\n    mensaje    \n    infoAutor{\n      id\n      nombres\n      apellidos\n      username\n    }\n    fecha\n  }\n"]);return mi=function(){return o},o}function hi(){var o=Object(s["a"])(["\n  fragment fragProyecto on Proyecto{\n    id\n    nombre\n    descripcion\n    idForo\n    responsables\n    participantes\n    posiblesResponsables    \n    objetivos {\n      ...fragObjetivoProyecto\n    }\n    trabajos {\n      ...fragTrabajoProyecto\n    }\n  }  \n  ","\n  ","\n"]);return hi=function(){return o},o}function Ai(){var o=Object(s["a"])(["\n  fragment fragObjetivoProyecto on ObjetivoDeProyecto{\n    id\n    nombre\n    descripcion\n    estadoDesarrollo\n    vinculos{\n      idRef\n      tipo\n      tipoRef\n    }\n    coords{\n      x\n      y\n    }\n  }\n"]);return Ai=function(){return o},o}function bi(){var o=Object(s["a"])(["\n  fragment fragTrabajoProyecto on TrabajoDeProyecto{\n    id\n      nombre\n      descripcion\n      estadoDesarrollo\n      vinculos{\n        idRef\n        tipo\n        tipoRef\n      }\n      coords{\n        x\n        y\n      }\n  }\n"]);return bi=function(){return o},o}function fi(){var o=Object(s["a"])(["\nfragment fragServicioProyecto on ServicioProyecto{\n  id\n  nombre\n  descripcion\n  listaPeticiones{\n    idBeneficiario\n  }\n}\n"]);return fi=function(){return o},o}function gi(){var o=Object(s["a"])(["\n  fragment fragBienProyecto on BienProyecto{\n    id\n      nombre\n      descripcion\n      unidad\n      cantidad\n      fechaCierre\n      fechaReparticion\n      instruccionesRecibir\n      listaPeticiones{\n        idBeneficiario\n        cantidadSolicitada\n        cantidadAsignada\n      }\n  }\n"]);return gi=function(){return o},o}function Ni(){var o=Object(s["a"])(["\nfragment fragActividad on ActividadGrupoEstudiantil {\n  id\n  nombre\n  fechaUpload\n  hayGuia\n  infoCreador{\n    ...fragMinimoPersona\n  }\n  desarrollos {\n    ...fragDesarrollo \n  }\n}\n","\n"]);return Ni=function(){return o},o}function yi(){var o=Object(s["a"])(["\nfragment fragDesarrollo on DesarrolloActividadGrupoEstudiantil{\n    id\n    estado\n    leidoPorProfe\n    infoEstudiante{\n      ...fragMinimoPersona\n    }\n    participaciones {\n      ...fragParticipacion\n    }\n}\n","\n"]);return yi=function(){return o},o}function Ci(){var o=Object(s["a"])(["\n  fragment fragParticipacion on ParticipacionActividadGrupoEstudiantil{\n    id\n      fechaUpload\n      archivo {\n        extension\n        nombre\n        googleDriveDirectLink,        \n      }\n      comentario\n      enlaceAdjunto\n      infoAutor{\n        ...fragMinimoPersona\n      }\n  }\n  ","\n"]);return Ci=function(){return o},o}function Ei(){var o=Object(s["a"])(["\nfragment fragMinimoPersona on PublicUsuario {\n  id\n  nombres\n  apellidos\n  username\n}\n"]);return Ei=function(){return o},o}function wi(){var o=Object(s["a"])(["\nfragment fragResponsables on PublicUsuario {\n  id\n  username\n  nombres\n  apellidos\n  email\n  permisos\n  numeroTel\n  lugarResidencia\n}\n"]);return wi=function(){return o},o}function Di(){var o=Object(s["a"])(["\n  fragment fragEvento on EventoCalendario{\n    id\n    nombre\n    descripcion\n    horarioInicio\n    horarioFinal\n    responsables  \n    participantes\n    origen\n    idOrigen    \n  }\n"]);return Di=function(){return o},o}var ji=c()(Di()),xi=c()(wi()),Pi=c()(Ei()),Si=c()(Ci(),Pi),Ri=c()(yi(),Si),Ii=c()(Ni(),Ri),Ti=(c()(gi()),c()(fi()),c()(bi())),ki=c()(Ai()),Oi=c()(hi(),Ti,ki),Mi=c()(mi()),Bi=c()(pi()),Fi=c()(vi(),Mi,Bi),$i=c()(li());function Qi(){var o=Object(s["a"])(["\n            mutation($nuevoPermiso: String!, $idUsuario: ID!) {\n              addPermisoUsuario(\n                nuevoPermiso: $nuevoPermiso\n                idUsuario: $idUsuario\n              ) {\n                id\n                permisos\n              }\n            }\n          "]);return Qi=function(){return o},o}function qi(){var o=Object(s["a"])(["\n  query($idUsuario: ID!) {\n    publicUsuario(idUsuario: $idUsuario) {\n      ...fragMinimoPersona\n    }\n  }\n  ","\n"]);return qi=function(){return o},o}var Ui=c()(qi(),Pi),Vi={name:"IconoPersonaAutonomo",apollo:{estaPersona:{query:Ui,variables:function(){return{idUsuario:this.idPersona}},update:function(o){var e=o.publicUsuario;return e},skip:function(){return!this.idPersona}}},data:function(){return{estaPersona:{permisos:[]},nuevoPermiso:null,mounted:!1,fotografiaEnabled:!1,basicWidthFoto:70,basicFontSizeNombre:15}},props:{idPersona:String,seleccionado:Boolean,menuContextual:Boolean,factorEscala:{type:String,default:"1"},opcionesMenuCx:{type:Array}},computed:{soyYo:function(){return!!(this.mounted&&this.idPersona&&this.$store.state.usuario)&&this.$store.state.usuario.id==this.idPersona},offsetFoto:function(){return{width:this.basicWidthFoto*this.factor+"px",height:this.basicWidthFoto*this.factor+"px"}},factor:function(){return Number(this.factorEscala)}},methods:{addPermisos:function(){console.log("enviando ".concat(this.nuevoPermiso," para el usuario con id ").concat(this.idPersona)),this.$apollo.mutate({mutation:c()(Qi()),variables:{nuevoPermiso:this.nuevoPermiso,idUsuario:this.idPersona}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},fotografiaCargada:function(){console.log("Fotografía cargada")}},mounted:function(){this.mounted=!0},beforeRouteUpdate:function(){console.log("Before update")}},Li=Vi,Gi=(i("469e"),Object(m["a"])(Li,di,ui,!1,null,"b74fcfc4",null)),Ki=Gi.exports,Zi=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"foro"},[i("div",{staticClass:"barraSuperiorForo"},[i("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idConversacionSeleccionada,expression:"idConversacionSeleccionada === null"}],attrs:{id:"anuncio"}},[o._v(" Conversaciones ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idConversacionSeleccionada,expression:"idConversacionSeleccionada != null"}],attrs:{id:"bRegresarConversaciones"},on:{click:function(e){o.idConversacionSeleccionada=null,o.$apollo.queries.numPaginas.refetch()}}},[o._v(" Volver a conversaciones ")]),i("div",{attrs:{id:"controlesForo"}},[o.usuarioLogeado&&("publico"==o.esteForo.acceso||1==o.usuarioMiembro)&&o.esteForo.id?i("div",{directives:[{name:"show",rawName:"v-show",value:!o.conversacionAbierta,expression:"!conversacionAbierta"}],staticClass:"controlesForo botonesControles",attrs:{id:"bCrearConversacion"},on:{click:function(e){o.creandoConversacion=!o.creandoConversacion}}},[o._v(" "+o._s(o.creandoConversacion?"Cancelar":"Crear conversación")+" ")]):o._e()])]),i("div",{staticClass:"zonaConversaciones"},[o.usuarioLogeado&&("publico"==o.esteForo.acceso||1==o.usuarioMiembro)&&o.esteForo.id?i("div",{directives:[{name:"show",rawName:"v-show",value:o.creandoConversacion,expression:"creandoConversacion"}],attrs:{id:"zonaCrearConversacion"}},[i("center",[i("h3",[o._v("Creando conversación")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.tituloNuevaConversacion,expression:"tituloNuevaConversacion"}],class:{letrasRojas:o.tituloNuevaConversacionIlegal},attrs:{type:"text",id:"inputTituloNuevaConversacion",placeholder:"Titulo de la nueva conversación"},domProps:{value:o.tituloNuevaConversacion},on:{input:function(e){e.target.composing||(o.tituloNuevaConversacion=e.target.value)}}}),i("cuadro-responder",{class:{deshabilitado:o.tituloNuevaConversacionIlegal},attrs:{idForo:o.esteForo.id,parent:o.parent,tituloNuevaConversacion:o.tituloNuevaConversacion},on:{hiceConversacion:function(e){return o.addConversacion(e)}}})],1):o._e(),o.numPaginas&&!o.conversacionAbierta?i("div",{staticClass:"zonaSelectorPagina"},o._l(o.numPaginas,(function(e){return i("div",{key:e,staticClass:"selectorPagina",class:{selectorSeleccionado:e==o.numPaginaSeleccionada},on:{click:function(i){o.numPaginaSeleccionada=e}}},[o._v(" "+o._s(e)+" ")])})),0):o._e(),o.numPaginas?i("div",{staticClass:"zonaPaginasConversaciones"},[o._l(o.numPaginas,(function(o){return i("div",{key:o,staticClass:"paginaConversaciones"})})),o._l(o.conversacionesPorPagina[o.numPaginaSeleccionada],(function(e){return i("conversacion",{directives:[{name:"show",rawName:"v-show",value:o.idConversacionSeleccionada==e.id||!o.conversacionAbierta,expression:"\n          idConversacionSeleccionada == conversacion.id ||\n          !conversacionAbierta\n        "}],key:e.id,attrs:{estaConversacion:e,seleccionado:o.idConversacionSeleccionada==e.id,usuarioMiembro:o.usuarioMiembro,idForo:o.idForo,parent:o.parent},on:{meAbrieron:function(i){return o.setTodaConversacionLeida(e.id)},meElimine:o.refreshPagina,respuestaPublicada:function(i){return o.setTodaConversacionLeida(e.id,e.cantidadRespuestas)}},nativeOn:{click:function(i){o.idConversacionSeleccionada=e.id}}})}))],2):o._e()])])},zi=[],Ji=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"conversacion",class:{seleccionado:o.seleccionado,deshabilitado:o.seleccionado&&o.loading,conRespuestasNoLeidas:o.estaConversacion.cantidadRespuestas>o.cantidadRespuestasLeidasUsuario}},[n("div",{staticClass:"infoConversacion"},[o._v(" "+o._s(o.estaConversacion.cantidadRespuestas)+" publicacion"+o._s(o.estaConversacion.cantidadRespuestas>1?"es":"")+". Última publicación en "+o._s(o.fechaFormateada)+" ")]),n("div",{staticClass:"tituloConversacion"},[n("img",{staticClass:"imagenConversacion",attrs:{src:i("96cc"),alt:"Conversacion"}}),o._v(" "+o._s(o.estaConversacion.titulo)+" "),n("span",{staticClass:"datosConversacion"},[n("span",{directives:[{name:"show",rawName:"v-show",value:o.estaConversacion.cantidadRespuestas>o.cantidadRespuestasLeidasUsuario,expression:"\n          estaConversacion.cantidadRespuestas >\n          cantidadRespuestasLeidasUsuario\n        "}],staticClass:"dato datoRespuestasNoLeidas",attrs:{title:"Respuestas nuevas en esta conversación"}},[o._v(" "+o._s(o.estaConversacion.cantidadRespuestas-o.cantidadRespuestasLeidasUsuario)+" ")])])]),o.numPaginas>0?n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"zonaSelectorPaginas"},o._l(o.numPaginas,(function(e){return n("div",{key:e,staticClass:"selectorPagina",class:{selectorSeleccionado:e==o.numPaginaSeleccionada},on:{click:function(i){o.numPaginaSeleccionada=e}}},[o._v(" "+o._s(e)+" ")])})),0):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"zonaRespuestas"},[n("div",{staticClass:"zonaPaginas"},o._l(o.numPaginas,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:o.numPaginaSeleccionada==e,expression:"numPaginaSeleccionada == index"}],key:"pagina"+e,staticClass:"pagina"},o._l(o.respuestasPorPagina[e],(function(i){return n("respuesta",{key:i.id,attrs:{idConversacion:o.estaConversacion.id,estaRespuesta:i},on:{meQuierenCitar:o.citarRespuesta,meElimine:function(n){return o.updateRespuestaEliminada(i.id,e)}}})})),1)})),0),o.usuarioLogeado&&("publico"==o.estaConversacion.acceso||1==o.usuarioMiembro)&&o.estaConversacion.id?n("cuadro-responder",{ref:"cuadroResponder",attrs:{parent:o.parent,idConversacion:o.estaConversacion.id},on:{hiceRespuesta:function(e){return o.addRespuesta(e)}}}):o._e()],1),n("div",{staticClass:"controlesConversacion"})])},_i=[],Hi=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"cuadroResponder"},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.idConversacion,expression:"idConversacion"}],attrs:{id:"barraSuperior"}},[n("img",{attrs:{src:i("1070"),alt:"Contestar",title:"Contestar en esta conversación",id:"imgMensaje"},on:{click:o.toggleCuadroAbierto}}),n("span",{attrs:{id:"tituloCuadro"}},[o._v("Envía una respuesta")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"zonaMensaje"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.mensaje,expression:"mensaje"}],ref:"inputMensaje",class:{letrasRojas:o.mensajeIlegal},attrs:{name:"inputMensaje",id:"inputMensaje",rows:"2"},domProps:{value:o.mensaje},on:{input:[function(e){e.target.composing||(o.mensaje=e.target.value)},o.checkHeight]}}),o._l(o.interpolaciones,(function(e,i){return n("creador-interpolacion",{key:i,ref:"creadoresInterpolacion",refInFor:!0,attrs:{estaInterpolacion:e},on:{eliminarse:function(e){return o.eliminarInterpolacion(e,i)},enlaceIframeSet:function(e){return o.setEnlaceIframeInterpolacion(e,i)}}})}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"zonaInsertar"}},[n("img",{staticClass:"bInsertar",attrs:{src:i("b4de"),alt:"Video",title:"Insertar un enlace a un video"},on:{click:function(e){return o.insertarCreadorInterpolacion("video")}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"adjuntarArchivo"}},[n("input",{ref:"inputArchivoAdjunto",attrs:{type:"file",id:"inputArchivoAdjunto"},on:{change:o.actualizarNombreDeArchivo}}),n("img",{attrs:{src:i("3a9d"),alt:"Ajuntar archivo",id:"imgAdjuntar",title:"adjuntar un archivo"},on:{click:o.abrirSelectorDeArchivos}}),n("br"),n("div",{directives:[{name:"show",rawName:"v-show",value:o.nombreArchivoSeleccionado,expression:"nombreArchivoSeleccionado"}],attrs:{id:"nombreArchivoSeleccionado"}},[o._v(" "+o._s(o.nombreArchivoSeleccionado)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],staticClass:"bloqueAdjuntar",attrs:{id:"bloqueAdjuntarEnlace"}},[n("div",{attrs:{id:"zonaIntroducirEnlace"}},[n("img",{attrs:{src:i("dffa"),alt:"Ajuntar enlace",id:"imgAdjuntarEnlace",title:"adjuntar un enlace"},on:{click:function(e){o.introduciendoEnlace=!0}}}),n("input",{directives:[{name:"show",rawName:"v-show",value:!0===o.introduciendoEnlace,expression:"introduciendoEnlace === true"},{name:"model",rawName:"v-model",value:o.enlaceAdjuntable,expression:"enlaceAdjuntable"}],staticClass:"inputAdjuntarEnlace",attrs:{type:"text",placeholder:"escribe o pega el enlace"},domProps:{value:o.enlaceAdjuntable},on:{input:function(e){e.target.composing||(o.enlaceAdjuntable=e.target.value)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.introduciendoEnlace&&!o.enlaceAdjuntableIlegal,expression:"introduciendoEnlace && !enlaceAdjuntableIlegal"}],attrs:{src:i("f0d1"),alt:"Confirmar",id:"bAceptarAdjuntarEnlace"},on:{click:function(e){e.stopPropagation(),o.enlaceAdjunto.push(o.enlaceAdjuntable),o.enlaceAdjuntable=null,o.introduciendoEnlace=!1}}})]),o._l(o.enlaceAdjunto,(function(e,i){return n("div",{key:i,staticClass:"enlaceAdjuntado"},[n("div",{attrs:{id:"nombreEnlaceAdjuntado"}},[n("span",[o._v(o._s(e))])]),n("div",{attrs:{id:"bCancelarEnlaceAdjunto"},on:{click:function(e){return e.stopPropagation(),o.enlaceAdjunto.splice(i,1)}}},[o._m(0,!0)])])}))],2),n("img",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto&&!o.enviandoRespuesta,expression:"cuadroAbierto && !enviandoRespuesta"}],class:{deshabilitado:o.mensajeIlegal},attrs:{src:i("4e77"),alt:"Enviar",title:"Enviar respuesta",id:"bEnviar"},on:{click:o.evaluarAdjunto}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoRespuesta,expression:"enviandoRespuesta"}],attrs:{texto:"Enviando respuesta..."}})],1)},Yi=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"linea1"},[i("div",{staticClass:"linea2"})])}],Xi=(i("b0c0"),function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"creadorInterpolacion"},[n("div",{staticClass:"bEliminarInterpolacion bolitaX",on:{click:function(e){return o.$emit("eliminarse",o.mensaje)}}},[n("div",{staticClass:"rayaX1"}),n("div",{staticClass:"rayaX2"})]),"video"==o.estaInterpolacion.tipo?n("div",{attrs:{id:"bloqueIframe"}},["video"==o.estaInterpolacion.tipo?n("iframe",{directives:[{name:"show",rawName:"v-show",value:o.estaInterpolacion.enlaceIframe,expression:"estaInterpolacion.enlaceIframe"}],attrs:{id:"elIframe",src:o.estaInterpolacion.enlaceIframe,frameborder:"0"}}):o._e(),n("div",{attrs:{id:"zonaInputEnlace"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.enlaceIframe,expression:"enlaceIframe"}],attrs:{type:"text",id:"inputEnlace",placeholder:"Introduce el enlace"},domProps:{value:o.enlaceIframe},on:{input:[function(e){e.target.composing||(o.enlaceIframe=e.target.value)},function(e){o.enlaceAceptado=!1}],keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.setEnlaceIframe(e)},paste:o.onPasteEnlace}}),n("img",{staticClass:"bAceptar",staticStyle:{cursor:"pointer"},style:[{backgroundColor:o.enlaceAceptado?"green":""}],attrs:{src:i("f0d1"),width:"17px",alt:"Ok",title:"Aceptar"},on:{click:o.setEnlaceIframe}})])]):o._e(),"quote"==o.estaInterpolacion.tipo?n("div",{attrs:{id:"bloqueQuote"}},[n("div",{attrs:{id:"infoQuote"}},[o._v(" "+o._s(o.estaInterpolacion.quote.infoAutor.nombres)+" escribio: ")]),n("div",{attrs:{id:"quote"}},[o._v(" "+o._s(o.estaInterpolacion.quote.mensaje)+" "),o._l(o.estaInterpolacion.quote.interpolaciones,(function(o){return n("interpolacion",{key:o.id,attrs:{estaInterpolacion:o}})}))],2)]):o._e(),n("div",{attrs:{id:"zonaMensaje"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.mensaje,expression:"mensaje"}],ref:"inputMensaje",class:{letrasRojas:o.mensajeIlegal},attrs:{name:"inputMensaje",id:"inputMensaje"},domProps:{value:o.mensaje},on:{input:[function(e){e.target.composing||(o.mensaje=e.target.value)},o.checkHeight]}})])])}),Wi=[],on=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"interpolacion"},["video"==o.estaInterpolacion.tipo?i("div",{attrs:{id:"bloqueIframe"}},[i("iframe",{directives:[{name:"show",rawName:"v-show",value:o.estaInterpolacion.enlaceIframe,expression:"estaInterpolacion.enlaceIframe"}],ref:"elIframe",style:[o.altoIframe],attrs:{id:"elIframe",src:o.estaInterpolacion.enlaceIframe,frameborder:"0"}})]):o._e(),"quote"==o.estaInterpolacion.tipo?i("div",{attrs:{id:"bloqueQuote"}},[i("div",{attrs:{id:"infoQuote"}},[o._v(" "+o._s(o.estaInterpolacion.quote.infoAutor.nombres)+" escribio: ")]),i("div",{staticClass:"quote"},[o._v(" "+o._s(o.estaInterpolacion.quote.mensaje)+" "),o._l(o.estaInterpolacion.quote.interpolaciones,(function(o){return i("interpolacion",{key:o.id,attrs:{estaInterpolacion:o}})}))],2)]):o._e(),i("div",{attrs:{id:"bloqueMensaje"}},[i("div",{attrs:{id:"elMensaje"}},[o._v(" "+o._s(o.estaInterpolacion.mensaje)+" ")])])])},en=[],nn={name:"Interpolacion",props:{estaInterpolacion:Object},data:function(){return{altoIframe:{height:"200px"}}},mounted:function(){"video"==this.estaInterpolacion.tipo&&this.$set(this.altoIframe,"height",this.$refs.elIframe.offsetWidth/1.77+"px")}},an=nn,tn=(i("6a63"),Object(m["a"])(an,on,en,!1,null,"4df81ef6",null)),sn=tn.exports,rn=/[^\n\r a-zA-ZÀ-ž0-9_()":;.,+¡!¿?@=-]/,cn={components:{Interpolacion:sn},name:"CreadorInterpolacion",props:{estaInterpolacion:Object},data:function(){return{mensaje:null,enlaceIframe:null,enlaceIframeSet:null,enlaceAceptado:!1}},methods:{onPasteEnlace:function(){this.enlaceAceptado=!1,console.log("Paste")},setEnlaceIframe:function(){if(this.enlaceIframe&&"https://"==this.enlaceIframe.substr(0,8)){if("youtube.com/watch"==this.enlaceIframe.substr(12,17)&&(this.enlaceIframe=this.enlaceIframe.substr(0,24)+"embed/"+this.enlaceIframe.substr(32)),"https://www.youtube.com/"!=this.enlaceIframe.substr(0,24))return console.log("Enlace no válido"),void this.enlaceIframe.alert("Enlace no válido");this.enlaceIframeSet=this.enlaceIframe,this.$emit("enlaceIframeSet",this.enlaceIframeSet),this.enlaceAceptado=!0}},checkHeight:function(){while(this.$refs.inputMensaje.scrollHeight>this.$refs.inputMensaje.offsetHeight)this.$refs.inputMensaje.rows++},addToMensaje:function(o){var e=this;o&&(this.mensaje+="\n\n"+o,this.$nextTick((function(){e.checkHeight()})))},temp:function(){console.log("1")}},computed:{mensajeIlegal:function(){return!this.mensaje||this.mensaje.length<1||!!rn.test(this.mensaje)}}},dn=cn,un=(i("95b0"),Object(m["a"])(dn,Xi,Wi,!1,null,"1244a928",null)),ln=un.exports;function vn(){var o=Object(s["a"])(["\n            mutation(\n              $idConversacion: ID!\n              $nuevaRespuesta: InputNuevaRespuesta\n              $parent: InputParent\n            ) {\n              postRespuestaConversacion(\n                idConversacion: $idConversacion\n                nuevaRespuesta: $nuevaRespuesta\n                parent: $parent\n              ) {\n                ...fragRespuesta\n              }\n            }\n            ","\n          "]);return vn=function(){return o},o}function pn(){var o=Object(s["a"])(["\n            mutation(\n              $idForo: ID!\n              $input: InputIniciarConversacion\n              $parent: InputParent\n            ) {\n              iniciarConversacionConPrimerMensajeForo(\n                idForo: $idForo\n                input: $input\n                parent: $parent\n              ) {\n                ...fragConversacion\n              }\n            }\n            ","\n          "]);return pn=function(){return o},o}var mn=/[^\n\r a-zA-ZÀ-ž0-9_()":;.,+¡!¿?@=-]/,hn={components:{Loading:Mo,CreadorInterpolacion:ln},name:"CuadroResponder",props:{tituloNuevaConversacion:String,idConversacion:String,idForo:String,parent:Object},data:function(){return{mensaje:null,cuadroAbierto:!1,enviandoRespuesta:!1,nombreArchivoSeleccionado:null,introduciendoEnlace:!1,enlaceAdjuntable:null,enlaceAdjunto:[],interpolaciones:[]}},methods:{evaluarAdjunto:function(){var o=this;if(!this.mensajeIlegal){this.enviandoRespuesta=!0;var e=this.$refs.inputArchivoAdjunto,i=new FormData;if(this.setInterpolacionesData(),e.value){var n=e.files[0],a=n["type"];console.log("subiendo un ".concat(a)),i.append("archivoAdjunto",n);var t=this;Ie()({method:"post",url:this.serverUrl+"/api/foros/adjuntarArchivoParaRespuesta",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data.infoArchivo,n={infoArchivo:{idGoogleDrive:i.idGoogleDrive,googleDriveDirectLink:i.googleDriveDirectLink,extension:i.extensionDeArchivo,nombre:i.extensionDeArchivo},mensaje:t.mensaje,interpolaciones:o.interpolaciones};o.enlaceAdjunto&&o.enlaceAdjunto.length>0&&(n.enlaceAdjunto=o.enlaceAdjunto),o.idConversacion?o.enviarNuevaRespuesta(n):o.crearConversacionConRespuesta(n)})).catch((function(e){o.enviandoRespuesta=!1,console.log("Errores: ".concat(e)),e.response&&e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))}else{var s={infoArchivo:null,mensaje:this.mensaje,interpolaciones:this.interpolaciones};this.enlaceAdjunto&&this.enlaceAdjunto.length>0&&(s.enlaceAdjunto=this.enlaceAdjunto),this.idConversacion?this.enviarNuevaRespuesta(s):this.crearConversacionConRespuesta(s)}}},crearConversacionConRespuesta:function(o){var e=this;if(this.tituloNuevaConversacion){var i={titulo:this.tituloNuevaConversacion,primeraRespuesta:o};this.enviandoRespuesta=!0;var n=this;this.$apollo.mutate({mutation:c()(pn(),$i),variables:{idForo:n.idForo,input:i,parent:n.parent}}).then((function(o){var i=o.data.iniciarConversacionConPrimerMensajeForo;n.enviandoRespuesta=!1,n.$emit("hiceConversacion",i),e.reset()})).catch((function(o){n.enviandoRespuesta=!1,console.log("Error. E: ".concat(o))}))}},enviarNuevaRespuesta:function(o){var e=this;if(!this.mensajeIlegal){var i=this;this.enviandoRespuesta=!0,this.$apollo.mutate({mutation:c()(vn(),Fi),variables:{idConversacion:i.idConversacion,nuevaRespuesta:o,parent:i.parent}}).then((function(o){var n=o.data.postRespuestaConversacion;i.enviandoRespuesta=!1,e.$emit("hiceRespuesta",n),e.cerrarse()})).catch((function(o){i.enviandoRespuesta=!1,console.log("Error. E: ".concat(o))}))}},toggleCuadroAbierto:function(){this.cuadroAbierto=!this.cuadroAbierto},cerrarse:function(){this.reset(),this.cuadroAbierto=!1},actualizarNombreDeArchivo:function(){if(!this.$refs.inputArchivoAdjunto.value)return console.log("Nullificando el nombre de archivo seleccionado"),void(this.nombreArchivoSeleccionado=null);this.nombreArchivoSeleccionado=this.$refs.inputArchivoAdjunto.files[0].name},abrirSelectorDeArchivos:function(){this.$refs.inputArchivoAdjunto.click()},reset:function(){this.nombreArchivoSeleccionado=null,this.$refs.inputArchivoAdjunto.value=null,this.mensaje=null,this.interpolaciones=[],this.enlaceAdjuntable=null,this.enlaceAdjunto=[]},interpolarQuote:function(o){var e=this,i={tipo:"quote",quote:o};this.interpolaciones.push(i),this.cuadroAbierto||(this.cuadroAbierto=!0),this.$nextTick((function(){e.$el.scrollIntoView({behavior:"smooth"})}))},insertarCreadorInterpolacion:function(o){var e={tipo:o};this.interpolaciones.push(e)},checkHeight:function(){console.log("El textarea tiene un height de ".concat(this.$refs.inputMensaje.offsetHeight," pero un scroll height de ").concat(this.$refs.inputMensaje.scrollHeight));while(this.$refs.inputMensaje.scrollHeight>this.$refs.inputMensaje.offsetHeight)this.$refs.inputMensaje.rows++},eliminarInterpolacion:function(o,e){var i=this;o&&(0==e?this.mensaje?(this.mensaje+="\n\n"+o,this.$nextTick((function(){i.checkHeight()}))):this.mensaje=o:(console.log("añadiendo el mensaje ".concat(o," al creador de interpolacion ").concat(e-1)),this.$refs.creadoresInterpolacion[e-1].addToMensaje(o))),this.interpolaciones.splice(e,1)},setEnlaceIframeInterpolacion:function(o,e){console.log("Seting enlace iframe en el array de interpolaciones"),this.$set(this.interpolaciones[e],"enlaceIframe",o)},retirarTypeName:function(o){var e=this;return console.log("Retirando typenames"),o.forEach((function(o){delete o.__typename,o.quote&&(delete o.quote.__typename,o.quote.infoAutor&&delete o.quote.infoAutor.__typename,o.quote.interpolaciones&&(o.quote.interpolaciones=e.retirarTypeName(o.quote.interpolaciones)))})),o},setInterpolacionesData:function(){var o=this;this.interpolaciones.forEach((function(e,i){e.mensaje=o.$refs.creadoresInterpolacion[i].mensaje})),this.interpolaciones=this.retirarTypeName(this.interpolaciones)}},computed:{mensajeIlegal:function(){var o=this.mensaje?this.mensaje:"";return this.interpolaciones.forEach((function(e){e.mensaje&&(o+=e.mensaje)})),!!mn.test(o)},enlaceAdjuntableIlegal:function(){return!this.enlaceAdjuntable||("https://"!=this.enlaceAdjuntable.substr(0,8)?(console.log("El inicio ".concat(this.enlaceAdjuntable.substr(0,8)," difiere del esperado")),!0):this.enlaceAdjuntable.length<7)}},mounted:function(){console.log("Revisando si hay idConversacion"),this.idConversacion||(this.cuadroAbierto=!0)}},An=hn,bn=(i("8b1d"),Object(m["a"])(An,Hi,Yi,!1,null,"1cc9b412",null)),fn=bn.exports,gn=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"respuesta"},[n("div",{staticClass:"infoRespuesta"},[o._v(o._s(o.fechaFormateada))]),n("img",{staticClass:"caritaAutor",attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaRespuesta.infoAutor.id,alt:o.estaRespuesta.infoAutor.nombre}}),n("div",{attrs:{id:"zonaCuerpoMensaje"}},[n("div",{staticClass:"mensajeRespuesta"},[o._v(" "+o._s(o.estaRespuesta.mensaje)+" ")]),o._l(o.estaRespuesta.interpolaciones,(function(o){return n("interpolacion",{key:o.id,attrs:{estaInterpolacion:o}})}))],2),o.estaRespuesta.archivo&&o.estaRespuesta.archivo.googleDriveDirectLink?n("div",{attrs:{id:"archivo"}},[n("a",{attrs:{href:o.estaRespuesta.archivo.googleDriveDirectLink}},[n("img",{attrs:{src:i("60ee"),alt:"Descargar archivo",id:"imgDownloadArchivo"}})])]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.estaRespuesta.enlaceAdjunto&&o.estaRespuesta.enlaceAdjunto.length>0,expression:"\n      estaRespuesta.enlaceAdjunto && estaRespuesta.enlaceAdjunto.length > 0\n    "}],staticClass:"enlacesAdjuntos"},o._l(o.estaRespuesta.enlaceAdjunto,(function(e,i){return n("a",{key:i,attrs:{target:"_blank",href:e}},[n("div",{staticClass:"enlaceAdjunto"},[o._v(" "+o._s(e)+" ")])])})),0),n("div",{staticClass:"controles"},[n("img",{staticClass:"botonInsertar",attrs:{src:i("eaba"),alt:"Cita",title:"Citar esta respuesta"},on:{click:o.emitirSolicitudCita}}),o.usuarioSuperadministrador?n("div",{staticClass:"controlRespuesta",attrs:{id:"bEliminar"},on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])])},Nn=[];function yn(){var o=Object(s["a"])(["\n          mutation($idRespuesta: ID!, $idConversacion: ID!) {\n            eliminarRespuesta(\n              idRespuesta: $idRespuesta\n              idConversacion: $idConversacion\n            )\n          }\n        "]);return yn=function(){return o},o}var Cn={components:{Interpolacion:sn},name:"Respuesta",props:{estaRespuesta:{type:Object},idConversacion:String},computed:{fechaFormateada:function(){var o=new Date(this.estaRespuesta.fecha).toString(),e=o.indexOf("("),i=o.substr(0,e),n=i.indexOf("GMT");return n>-1&&(i=i.substr(0,n)),i},usuarioAutor:function(){return this.usuario.id==this.estaRespuesta.infoAutor.id}},methods:{emitirSolicitudCita:function(){var o={mensaje:this.estaRespuesta.mensaje,interpolaciones:this.estaRespuesta.interpolaciones,infoAutor:this.estaRespuesta.infoAutor,fecha:this.estaRespuesta.fecha};o.interpolaciones.forEach((function(o){delete o.__typename})),delete o.infoAutor.__typename,this.$emit("meQuierenCitar",o)},eliminarse:function(){var o=this;confirm("Eliminando respuesta ¿Continuar?")&&this.$apollo.mutate({mutation:c()(yn()),variables:{idRespuesta:this.estaRespuesta.id,idConversacion:this.idConversacion},update:function(e,i){var n=i.data.eliminarRespuesta;n&&(console.log("Respuesta eliminada"),o.$emit("meElimine"))}})}}},En=Cn,wn=(i("3ccd"),Object(m["a"])(En,gn,Nn,!1,null,"02ceacf0",null)),Dn=wn.exports;function jn(){var o=Object(s["a"])(["\n  query($idConversacion: ID!, $pagina: Int!) {\n    respuestasPaginaDeConversacion(\n      idConversacion: $idConversacion\n      pagina: $pagina\n    ) {\n      pagina\n      numPaginas\n      respuestas {\n        ...fragRespuesta\n      }\n    }\n  }\n  ","\n"]);return jn=function(){return o},o}var xn=c()(jn(),Fi),Pn={components:{Respuesta:Dn,CuadroResponder:fn},name:"Conversacion",apollo:{numPaginas:{query:xn,variables:function(){return{idConversacion:this.estaConversacion.id,pagina:this.numPaginaSeleccionada}},update:function(o){var e=o.respuestasPaginaDeConversacion,i=e.pagina,n=e.numPaginas,a=e.respuestas;return this.$set(this.respuestasPorPagina,i,a),this.numPaginaSeleccionada!=i&&(this.numPaginaSeleccionada=i),this.loading=!1,n},skip:function(){return!this.seleccionado},fetchPolicy:"no-cache"}},data:function(){return{numPaginas:0,numPaginaSeleccionada:0,respuestasPorPagina:{},loading:!0}},props:{estaConversacion:{type:Object,default:function(){return{respuestas:[]}}},idForo:String,parent:Object,seleccionado:Boolean,usuarioMiembro:{type:Boolean,default:!1}},methods:{addRespuesta:function(o){var e=this.numPaginas;(this.respuestasPorPagina[e].length>=5||e<1)&&(e++,this.respuestasPorPagina[e]||this.$set(this.respuestasPorPagina,e,[])),this.respuestasPorPagina[e].push(o),this.$refs.cuadroResponder.cerrarse(),this.numPaginaSeleccionada!=e&&(this.numPaginaSeleccionada=e),console.log("Emitiendo 'respuesta publicada'"),this.$emit("respuestaPublicada")},updateRespuestaEliminada:function(o,e){console.log("Respuesta ".concat(o," eliminada de la pagina ").concat(e)),1==this.numPaginas&&this.respuestasPorPagina[1].length<2?(console.log("Era la ultima respuesta"),this.$emit("meElimine")):(console.log("Refreshing respuestas pagina"),this.$apollo.queries.numPaginas.refresh())},citarRespuesta:function(o){this.$refs.cuadroResponder.interpolarQuote(o)}},computed:{cantidadRespuestasLeidasUsuario:function(){var o=this;if(this.usuario&&this.usuario.foros){var e=this.usuario.foros.find((function(e){return e.idForo==o.idForo}));if(!e)return 0;var i=e.conversaciones.find((function(e){return e.idConversacion==o.estaConversacion.id}));return i?i.respuestasLeidas:0}return 0},fechaFormateada:function(){if(!this.estaConversacion.infoUltimaRespuesta||!this.estaConversacion.infoUltimaRespuesta.fecha)return"Fecha desconocida";var o=new Date(this.estaConversacion.infoUltimaRespuesta.fecha).toString(),e=o.indexOf("("),i=o.substr(0,e),n=i.indexOf("GMT");return n>-1&&(i=i.substr(0,n)),i}},watch:{seleccionado:function(o,e){o&&!e&&this.$emit("meAbrieron")}}},Sn=Pn,Rn=(i("906a"),Object(m["a"])(Sn,Ji,_i,!1,null,"9e3ce0f2",null)),In=Rn.exports;function Tn(){var o=Object(s["a"])(["\n              mutation(\n                $idUsuario: ID!\n                $idForo: ID!\n                $idConversacion: ID!\n                $cantidadRespuestasLeidas: Int!\n              ) {\n                setCantidadRespuestasConversacionLeidasPorUsuario(\n                  idUsuario: $idUsuario\n                  idForo: $idForo\n                  idConversacion: $idConversacion\n                  cantidadRespuestasLeidas: $cantidadRespuestasLeidas\n                )\n              }\n            "]);return Tn=function(){return o},o}function kn(){var o=Object(s["a"])(["\n              mutation($idUsuario: ID!, $idForo: ID!, $idConversacion: ID!) {\n                setTodasRespuestasConversacionLeidasPorUsuario(\n                  idUsuario: $idUsuario\n                  idForo: $idForo\n                  idConversacion: $idConversacion\n                )\n              }\n            "]);return kn=function(){return o},o}function On(){var o=Object(s["a"])(["\n  query($idForo: ID!, $pagina: Int!) {\n    conversacionesPaginaForo(idForo: $idForo, pagina: $pagina) {\n      pagina\n      numPaginas\n      conversaciones {\n        ...fragConversacion\n      }\n    }\n  }\n  ","\n"]);return On=function(){return o},o}function Mn(){var o=Object(s["a"])(["\n  query($idForo: ID!) {\n    foro(idForo: $idForo) {\n      id\n      acceso\n      miembros\n    }\n  }\n"]);return Mn=function(){return o},o}var Bn=/[^ a-zA-ZÀ-ž0-9_():.,-¡!¿?]/,Fn=c()(Mn()),$n=c()(On(),$i),Qn={components:{Conversacion:In,CuadroResponder:fn},name:"Foro",apollo:{esteForo:{query:Fn,variables:function(){return{idForo:this.idForo}},fetchPolicy:"cache-and-network",update:function(o){return o.foro},skip:function(){return!this.idForo}},numPaginas:{query:$n,variables:function(){return{idForo:this.idForo,pagina:this.numPaginaSeleccionada}},fetchPolicy:"no-cache",skip:function(){return!this.idForo},update:function(o){var e=o.conversacionesPaginaForo,i=e.conversaciones,n=e.pagina,a=e.numPaginas;return this.numPaginaSeleccionada!=n&&(this.numPaginaSeleccionada=n),this.$set(this.conversacionesPorPagina,n,i),a}}},props:{idForo:String,parent:Object},data:function(){return{esteForo:{miembros:[],conversaciones:[]},idConversacionSeleccionada:null,creandoConversacion:!1,numPaginaSeleccionada:0,conversacionesPorPagina:{},tituloNuevaConversacion:null}},methods:{addConversacion:function(o){this.creandoConversacion=!1,this.setTodaConversacionLeida(o.id),this.tituloNuevaConversacion=null,this.numPaginaSeleccionada=1,this.$apollo.queries.numPaginas.refetch()},refreshPagina:function(){this.idConversacionSeleccionada=null,this.$apollo.queries.numPaginas.refresh()},setTodaConversacionLeida:function(o){var e=this;this.usuario&&this.usuario.id&&(console.log("Setting toda conversación leida"),this.$apollo.mutate({mutation:c()(kn()),variables:{idUsuario:this.usuario.id,idForo:this.idForo,idConversacion:o}}).then((function(i){var n=i.data.setTodasRespuestasConversacionLeidasPorUsuario;console.log("Resultado: ".concat(n)),e.$store.commit("setRespuestasLeidasConversacionUsuario",{idForo:e.idForo,idConversacion:o,respuestasLeidas:n})})).catch((function(o){console.log("Error. E: ".concat(o))})))},setConversacionLeida:function(o,e){var i=this;this.usuario&&this.usuario.id&&(console.log("Setting conversación leida"),this.$apollo.mutate({mutation:c()(Tn()),variables:{idUsuario:this.usuario.id,idForo:this.idForo,idConversacion:o,cantidadRespuestasLeidas:parseInt(e)}}).then((function(n){var a=n.data.setCantidadRespuestasConversacionLeidasPorUsuario;console.log("Resultado: ".concat(a)),a&&i.$store.commit("setRespuestasLeidasConversacionUsuario",{idForo:i.idForo,idConversacion:o,respuestasLeidas:e})})).catch((function(o){console.log("Error. E: ".concat(o))})))}},computed:{usuarioMiembro:function(){return"publico"==this.esteForo.acceso||!("privado"!=this.esteForo.acceso||!this.esteForo.miembros.includes(this.$store.state.usuario.id))},conversacionAbierta:function(){return this.idConversacionSeleccionada},tituloNuevaConversacionIlegal:function(){return!this.tituloNuevaConversacion||this.tituloNuevaConversacion.length<1||!!Bn.test(this.tituloNuevaConversacion)}}},qn=Qn,Un=(i("96fc"),Object(m["a"])(qn,Zi,zi,!1,null,"bfb90dd8",null)),Vn=Un.exports,Ln=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"claseNodo"},[n("div",{class:{interesado:o.usuarioInteresado},attrs:{id:"filaPrincipal"}},[n("div",{attrs:{id:"nombre"}},[o._v(" "+o._s(o.estaClase.nombre)+" ")]),n("div",{attrs:{id:"controles"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExpertoClase,expression:"usuarioExpertoClase"}],attrs:{src:i("148b"),alt:"Programar",title:o.programandoClase?"Cancelar":"Programar clase",id:"botonProgramar"},on:{click:function(e){e.stopPropagation(),o.programandoClase=!o.programandoClase}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!o.usuarioExpertoClase,expression:"!usuarioExpertoClase"}],staticClass:"control",class:{deshabilitado:o.enviandoQueryInteres,interesado:o.usuarioInteresado},staticStyle:{width:"30px"},attrs:{title:o.usuarioInteresado?"Ya no me interesa":"Me interesa",src:i("1529"),id:"botonInteresarse"},on:{click:function(e){return e.stopPropagation(),o.toggleInteresarse(e)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExpertoClase,expression:"usuarioExpertoClase"}],staticClass:"botonEquis",attrs:{id:"botonEliminar"},on:{click:o.eliminarse}},[n("div",{staticClass:"linea1"}),n("div",{staticClass:"linea2"})])])]),n("calendario",{directives:[{name:"show",rawName:"v-show",value:o.programandoClase,expression:"programandoClase"}],attrs:{configCalendario:{tipo:"claseNodoConocimiento",id:o.estaClase.id,idNodo:o.idNodo,laClase:o.estaClase}}})],1)},Gn=[],Kn=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"calendario",class:{deshabilitado:o.enviandoQueryCrearEvento||o.$apollo.queries.eventosOrigen.loading||o.$apollo.queries.eventosUsuario.loading||o.$apollo.queries.eventosCruceClub.loading||o.$apollo.queries.eventosCruceClaseNodoConocimiento.loading},on:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(o.idEventoSeleccionado=null,void(o.idEventoAbierto=null))},mouseenter:function(e){o.hoveringCalendario=!0},mouseleave:function(e){o.hoveringCalendario=!1},touchstart:o.inicioTouch,touchmove:o.movimientoTouch,touchend:o.endTouch}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.eventosOrigen.loading||o.$apollo.queries.eventosUsuario.loading||o.$apollo.queries.eventosCruceClub.loading||o.$apollo.queries.eventosCruceClaseNodoConocimiento.loading,expression:"$apollo.queries.eventosOrigen.loading ||\n      $apollo.queries.eventosUsuario.loading ||\n      $apollo.queries.eventosCruceClub.loading ||\n      $apollo.queries.eventosCruceClaseNodoConocimiento.loading"}],attrs:{id:"avisoLoadingCalendario",texto:"Cargando información..."}}),i("div",{attrs:{id:"controles"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"personal"!=o.configCalendario.tipo&&!o.creacionEventosDisallowed,expression:"configCalendario.tipo != 'personal' && !creacionEventosDisallowed"}],staticClass:"control",attrs:{id:"botonCrearEvento"},on:{click:function(e){o.seleccionandoPlaceNuevoEvento=!o.seleccionandoPlaceNuevoEvento,o.minutoInicialFantasmaNuevoEvento=null}}},[o._v(" "+o._s(o.seleccionandoPlaceNuevoEvento?"Cancelar":"claseNodoConocimiento"===o.configCalendario.tipo?"Programar clase":"Crear evento")+" ")])]),o.eventoAbierto?i("ventana-evento-calendario",{key:o.idEventoAbierto,attrs:{esteEvento:o.eventoAbierto}}):o._e(),i("div",{attrs:{id:"graficoDias"}},[i("div",{attrs:{id:"filaTiempo"}},[i("div",{attrs:{id:"contenedorMarcas"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.moviendoTiempos=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.moviendoTiempos=!1)},mouseleave:function(e){o.moviendoTiempos=!1}}},[o._l(o.horasVisibles,(function(e){return i("div",{key:"marcaHora"+e,staticClass:"marcaTiempo",style:[{left:(60*e-o.minutoInicial)*o.widthHoraPx/60+"px"}]},[o._v(" "+o._s(e)+" ")])})),i("div",{directives:[{name:"show",rawName:"v-show",value:o.tiempoInicioMarcado,expression:"tiempoInicioMarcado"}],style:[{left:(o.tiempoInicioMarcado-o.minutoInicial)*o.widthHoraPx/60+"px"}],attrs:{id:"marcaTiempoInicialEvento"}},[o._v(" "+o._s(o.tiempoInicioMarcado%60>0?o.tiempoInicioMarcado%60:o.tiempoInicioMarcado/60)+" "),o.montado?i("div",{staticClass:"lineaReferencia",style:[{height:o.$el.offsetHeight+"px"}]}):o._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.tiempoFinalMarcado,expression:"tiempoFinalMarcado"}],style:[{left:(o.tiempoFinalMarcado-o.minutoInicial)*o.widthHoraPx/60+"px"}],attrs:{id:"marcaTiempoFinalEvento"}},[o._v(" "+o._s(o.tiempoFinalMarcado%60>0?o.tiempoFinalMarcado%60:o.tiempoFinalMarcado/60)+" "),o.montado?i("div",{staticClass:"lineaReferencia",style:[{height:o.$el.offsetHeight+"px"}]}):o._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionandoPlaceNuevoEvento&&null!=o.minutoInicialFantasmaNuevoEvento,expression:"\n            seleccionandoPlaceNuevoEvento &&\n            minutoInicialFantasmaNuevoEvento != null\n          "}],style:[{left:(o.minutoInicialFantasmaNuevoEvento-o.minutoInicial)*o.widthHoraPx/60+"px"}],attrs:{id:"marcaTiempoInicialNuevoEvento"}},[o._v(" "+o._s(o.horaFormateadaInicialFantasmaNuevoEvento)+" "),o.montado?i("div",{staticClass:"lineaReferencia",style:[{height:o.$el.offsetHeight+"px"}]}):o._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionandoPlaceNuevoEvento&&null!=o.minutoFinalFantasmaNuevoEvento,expression:"\n            seleccionandoPlaceNuevoEvento &&\n            minutoFinalFantasmaNuevoEvento != null\n          "}],style:[{left:(o.minutoFinalFantasmaNuevoEvento-o.minutoInicial)*o.widthHoraPx/60+"px"}],attrs:{id:"marcaTiempoFinalNuevoEvento"}},[o._v(" "+o._s(o.horaFormateadaFinalFantasmaNuevoEvento)+" "),o.montado?i("div",{staticClass:"lineaReferencia",style:[{height:o.$el.offsetHeight+"px"}]}):o._e()])],2)]),o._l(o.diasVisibles,(function(e){return i("div",{key:"dia"+e.date,staticClass:"filaDia",class:{diaHoy:e.hoy}},[i("div",{staticClass:"zonaInfoDia",class:{diaHoy:e.hoy}},[i("div",{staticClass:"diaMes"},[i("div",{staticClass:"numeroDiaMes"},[o._v(o._s(e.diaMes))])]),i("div",{staticClass:"diaSemana"},[o._v(o._s(o.numsDiasSemana[e.diaSemana]))])]),o.eventosCruzados?i("div",{staticClass:"zonaEventos",on:{mousemove:o.setMinutoInicialFantasmaNuevoEvento,click:function(i){"claseNodoConocimiento"===o.configCalendario.tipo?o.crearClaseNodoConocimiento(e):o.crearNuevoEventoEnHorario(e)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionandoPlaceNuevoEvento,expression:"seleccionandoPlaceNuevoEvento"}],staticClass:"fantasmaNuevoEvento",style:[o.offsetFantasmaNuevoEvento]}),o._l(o.getEventosDia(e),(function(n){return i("evento-calendario",{key:n.id,ref:"eventos",refInFor:!0,attrs:{esteEvento:n,idEventoAbierto:o.idEventoAbierto,primerMinutoMediaHora:o.primerMinutoMediaHora,minutoInicial:o.minutoInicial,milisDia:e.milis,widthHoraPx:o.widthHoraPx,seleccionado:o.idEventoSeleccionado===n.id,nivel:n.idOrigen===o.configCalendario.id?"primario":"secundario"},on:{meElimine:o.eliminarEventoDeCache,marcarInicio:function(e){o.tiempoInicioMarcado=e},marcarFinal:function(e){o.tiempoFinalMarcado=e},desmarcarInicio:function(e){o.tiempoInicioMarcado=null},desmarcarFinal:function(e){o.tiempoFinalMarcado=null},abrirEsteEvento:function(e){o.idEventoAbierto=n.id}},nativeOn:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),void(o.idEventoSeleccionado=n.id))},dblclick:function(e){o.idEventoAbierto=n.id}}})})),o._l(o.getEventosCruzadosDia(e),(function(e){return i("evento-calendario-cruzado",{key:"eventoCruzado"+e.id,attrs:{esteEvento:e,idEventoAbierto:o.idEventoAbierto,minutoInicial:o.minutoInicial,widthHoraPx:o.widthHoraPx,seleccionado:o.idEventoSeleccionado===e.id},on:{abrirEsteEvento:function(i){o.idEventoAbierto=e.id}},nativeOn:{mouseup:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.stopPropagation(),void(o.idEventoSeleccionado=e.id))},dblclick:function(i){o.idEventoAbierto=e.id}}})}))],2):o._e()])}))],2)],1)},Zn=[],zn=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"eventoCalendario",class:{seleccionado:o.seleccionado,inmovible:o.enviandoQueryTotal||o.enviandoTiempos,primario:"primario"===o.nivel,secundario:"secundario"===o.nivel,participando:o.usuarioParticipanteEvento},style:[o.offset],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.grabbing=!!o.usuarioResponsableEvento)},mousemove:o.desplazar,"!mouseup":function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(o.grabDesplazamiento=0,o.grabbing=!1,void o.soltarTodo())},touchend:function(e){o.grabbingMinutosFinalMobile=!1,o.grabbingMinutosInicioMobile=!1}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{src:i("666f"),alt:"Maximizar",id:"botonAbrirEvento"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),o.$emit("abrirEsteEvento"))}}}),n("div",{attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteEvento.nombre)+" ")]),o.usuarioResponsableEvento?n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&"primario"===o.nivel&&!o.grabbing&&!o.grabbingMinutosInicio&&!o.grabbingMinutosFinal,expression:"\n      seleccionado &&\n      nivel === 'primario' &&\n      !grabbing &&\n      !grabbingMinutosInicio &&\n      !grabbingMinutosFinal\n    "}],staticClass:"botonEquis",attrs:{id:"botonEliminarEvento"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},click:function(e){return e.stopPropagation(),o.eliminarse(e)}}},[n("div",{staticClass:"linea1"}),n("div",{staticClass:"linea2"})]):o._e(),o.usuarioResponsableEvento?n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&"primario"===o.nivel,expression:"seleccionado && nivel === 'primario'"}],staticClass:"agarraderoTiempo",style:[{backgroundColor:o.grabbingMinutosInicio?"red":"#9c4471"}],attrs:{id:"agarraderoInicio"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),void(o.grabbingMinutosInicio=!0))},touchstart:function(e){return e.stopPropagation(),o.setAgarraderoTiempoMobile("inicio")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"inicio"===o.agarraderoTiempoSelectedMobile,expression:"agarraderoTiempoSelectedMobile === 'inicio'"}],staticClass:"bloqueMovedorTiempoMobile",class:{deshabilitado:o.enviandoTiempos},on:{dblclick:function(o){o.stopPropagation()}}},[n("div",{staticClass:"movedorTiempoAdelante movedorTiempo",on:{click:function(e){e.stopPropagation(),o.minutosInicioDesplazadoTentativo+=5}}}),n("div",{staticClass:"movedorTiempoAtras movedorTiempo",on:{click:function(e){e.stopPropagation(),o.minutosInicioDesplazadoTentativo-=5}}})])]):o._e(),o.usuarioResponsableEvento?n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&"primario"===o.nivel,expression:"seleccionado && nivel === 'primario'"}],staticClass:"agarraderoTiempo",style:[{backgroundColor:o.grabbingMinutosFinal?"red":"#9c4471"}],attrs:{id:"agarraderoFinal"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),void(o.grabbingMinutosFinal=!0))},click:function(o){o.stopPropagation()},touchstart:function(e){return e.stopPropagation(),o.setAgarraderoTiempoMobile("final")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"final"===o.agarraderoTiempoSelectedMobile,expression:"agarraderoTiempoSelectedMobile === 'final'"}],staticClass:"bloqueMovedorTiempoMobile",class:{deshabilitado:o.enviandoTiempos},on:{dblclick:function(o){o.stopPropagation()}}},[n("div",{staticClass:"movedorTiempoAdelante movedorTiempo",on:{click:function(e){e.stopPropagation(),o.minutosFinalDesplazadoTentativo+=5}}}),n("div",{staticClass:"movedorTiempoAtras movedorTiempo",on:{click:function(e){e.stopPropagation(),o.minutosFinalDesplazadoTentativo-=5}}})])]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.grabbing,expression:"grabbing"}],attrs:{id:"zonaArrastre"}})])},Jn=[];function _n(){var o=Object(s["a"])(["\n            mutation ($idEvento: ID!) {\n              eliminarEventoCalendario(idEvento: $idEvento)\n            }\n          "]);return _n=function(){return o},o}function Hn(){var o=Object(s["a"])(["\n            mutation (\n              $idEvento: ID!\n              $nuevoHorarioInicio: Date!\n              $nuevoHorarioFinal: Date!\n            ) {\n              setHorariosEvento(\n                idEvento: $idEvento\n                nuevoHorarioInicio: $nuevoHorarioInicio\n                nuevoHorarioFinal: $nuevoHorarioFinal\n              ) {\n                id\n                horarioInicio\n                horarioFinal\n              }\n            }\n          "]);return Hn=function(){return o},o}function Yn(){var o=Object(s["a"])(["\n            mutation (\n              $idEvento: ID!\n              $nuevoHorarioInicio: Date!\n              $nuevoHorarioFinal: Date!\n            ) {\n              setHorariosEvento(\n                idEvento: $idEvento\n                nuevoHorarioInicio: $nuevoHorarioInicio\n                nuevoHorarioFinal: $nuevoHorarioFinal\n              ) {\n                id\n                horarioInicio\n                horarioFinal\n              }\n            }\n          "]);return Yn=function(){return o},o}var Xn=i("b012"),Wn={name:"EventoCalendario",props:{esteEvento:Object,widthHoraPx:Number,primerMinutoMediaHora:Number,minutoInicial:Number,milisDia:Number,seleccionado:Boolean,idEventoAbierto:String,nivel:String},data:function(){return{grabbing:!1,grabDesplazamiento:0,grabbingMinutosInicio:!1,grabbingMinutosFinal:!1,grabbingMinutosInicioMobile:!1,grabbingMinutosFinalMobile:!1,minutosInicioDesplazadoTentativo:0,minutosFinalDesplazadoTentativo:0,enviandoTiempos:!1,enviandoQueryTotal:!1,agarraderoTiempoSelectedMobile:null,ultimoTouchX:0}},methods:{desplazarMinutos:function(o){var e=this,i=6e4,n=o*i;this.enviandoTiempos=!0,this.$apollo.mutate({mutation:c()(Yn()),variables:{idEvento:this.esteEvento.id,nuevoHorarioInicio:new Date(this.milisDia+6e4*this.actualMinutosInicio+n),nuevoHorarioFinal:new Date(this.milisDia+6e4*this.actualMinutosFinal+n)}}).then((function(){e.enviandoTiempos=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoTiempos=!1}))},desplazar:function(o){if(this.grabbing&&!this.enviandoTiempos&&"primario"==this.nivel&&(this.grabDesplazamiento++,!(this.grabDesplazamiento<8))){var e=this.$el.closest(".zonaEventos"),i=e.getBoundingClientRect(),n=o.clientX-i.left,a=60*n/this.widthHoraPx;this.minutosInicioDesplazadoTentativo=this.minutoInicial+a-this.duracionMinutos/2,this.minutosFinalDesplazadoTentativo=this.minutosInicioDesplazadoTentativo+this.duracionMinutos}},modificarMinutos:function(o){if(!this.enviandoTiempos&&!this.enviandoQueryTotal){var e=this.$el.closest(".zonaEventos"),i=e.getBoundingClientRect(),n=0;if(this.grabbingMinutosInicio||this.grabbingMinutosFinal){n=o.clientX-i.left;var a=60*n/this.widthHoraPx;(this.grabbingMinutosInicio||this.grabbingMinutosInicioMobile)&&(this.minutosInicioDesplazadoTentativo=this.minutoInicial+a),(this.grabbingMinutosFinal||this.grabbingMinutosFinalMobile)&&(this.minutosFinalDesplazadoTentativo=this.minutoInicial+a)}}},resetVariablesEditarTiempos:function(){this.minutosInicioDesplazadoTentativo=this.actualMinutosInicio,this.minutosFinalDesplazadoTentativo=this.actualMinutosFinal},guardarTiempos:function(o){var e=this;this.minutosInicioDesplazado===this.actualMinutosInicio&&this.minutosFinalDesplazado===this.actualMinutosFinal||this.enviandoTiempos||(console.log("Guardando nuevos tiempos"),o&&o.stopPropagation(),this.enviandoTiempos=!0,this.$apollo.mutate({mutation:c()(Hn()),variables:{idEvento:this.esteEvento.id,nuevoHorarioInicio:new Date(6e4*this.minutosInicioDesplazado+this.milisDia),nuevoHorarioFinal:new Date(6e4*this.minutosFinalDesplazado+this.milisDia)}}).then((function(){e.enviandoTiempos=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoTiempos=!1})))},debGuardarTiempos:Xn((function(){this.guardarTiempos()}),3e3),eliminarse:function(){var o=this;console.log("Eliminando"),confirm("¿Confirmar la eliminación del evento? (Esta acción no se puede deshacer)")&&(this.enviandoQueryTotal=!0,this.$emit("desmarcarInicio"),this.$emit("desmarcarFinal"),this.$apollo.mutate({mutation:c()(_n()),variables:{idEvento:this.esteEvento.id}}).then((function(e){var i=e.data.eliminarEventoCalendario;o.enviandoQueryTotal=!1,i&&o.$emit("meElimine",o.esteEvento.id)})).catch((function(e){console.log("Error eliminando evento: ".concat(e)),o.enviandoQueryTotal=!1})))},teclaPresionada:function(o){if(this.seleccionado&&!this.enviandoTiempos&&!this.enviandoQueryTotal&&!this.idEventoAbierto){var e=[37,38,39,40];if(e.includes(o.which)){o.stopPropagation(),o.preventDefault();var i=1440;switch(o.which){case 37:this.desplazarMinutos(-30);break;case 38:this.desplazarMinutos(-i);break;case 39:this.desplazarMinutos(30);break;case 40:this.desplazarMinutos(i);break}}}},soltarTodo:function(o){this.grabbingMinutosInicio=!1,this.grabbingMinutosFinal=!1,this.minutosInicioDesplazado==this.actualMinutosInicio&&this.minutosFinalDesplazado==this.actualMinutosFinal||(null===this.agarraderoTiempoSelectedMobile?(console.log("Guardando tiempos directamente"),this.guardarTiempos(o)):(console.log("Debounce guardar tiempos"),this.debGuardarTiempos()))},setAgarraderoTiempoMobile:function(o){this.agarraderoTiempoSelectedMobile=o}},computed:{minutosInicioDesplazado:function(){var o=Math.round(this.minutosInicioDesplazadoTentativo/5),e=5*o;return e<0&&(e=0),e>1410&&(e=1410),e},minutosFinalDesplazado:function(){var o=Math.round(this.minutosFinalDesplazadoTentativo/5),e=5*o;return e<0&&(e=0),e>1410&&(e=1410),e},duracionMinutos:function(){return this.actualMinutosFinal-this.actualMinutosInicio},offset:function(){return{width:(this.minutosFinalDesplazado-this.minutosInicioDesplazado)*this.widthHoraPx/60+"px",left:(this.minutosInicioDesplazado-this.minutoInicial)*(this.widthHoraPx/60)+"px"}},actualMinutosInicio:function(){var o=new Date(this.esteEvento.horarioInicio);return 60*o.getHours()+o.getMinutes()},actualMinutosFinal:function(){var o=new Date(this.esteEvento.horarioFinal);return 60*o.getHours()+o.getMinutes()},deltaTiempoInicio:function(){return this.actualMinutosInicio-this.minutosInicioDesplazado},deltaTiempoFinal:function(){return this.actualMinutosFinal-this.minutosFinalDesplazado},usuarioResponsableEvento:function(){return!(!this.usuario||!this.usuario.id)&&this.esteEvento.responsables.includes(this.usuario.id)},usuarioParticipanteEvento:function(){return!(!this.usuario||!this.usuario.id)&&this.esteEvento.participantes.includes(this.usuario.id)}},watch:{esteEvento:function(){this.resetVariablesEditarTiempos()},seleccionado:function(o){this.agarraderoTiempoSelectedMobile=null,o?(window.addEventListener("keydown",this.teclaPresionada),this.$emit("marcarInicio",this.minutosInicioDesplazado),this.$emit("marcarFinal",this.minutosFinalDesplazado),document.getElementById("graficoDias").addEventListener("mouseup",this.soltarTodo),document.getElementById("graficoDias").addEventListener("mousemove",this.modificarMinutos)):(this.soltarTodo(),this.$emit("desmarcarInicio"),this.$emit("desmarcarFinal"),window.removeEventListener("keydown",this.teclaPresionada),window.removeEventListener("mouseup",this.soltarTodo),document.getElementById("graficoDias").removeEventListener("mousemove",this.modificarMinutos),document.getElementById("graficoDias").removeEventListener("mouseup",this.soltarTodo))},deltaTiempoInicio:function(){(this.grabbingMinutosInicio||this.grabbing||null!=this.agarraderoTiempoSelectedMobile)&&this.$emit("marcarInicio",this.minutosInicioDesplazado)},deltaTiempoFinal:function(){(this.grabbingMinutosFinal||this.grabbing||null!=this.agarraderoTiempoSelectedMobile)&&this.$emit("marcarFinal",this.minutosFinalDesplazado)}},mounted:function(){this.resetVariablesEditarTiempos(),this.seleccionado&&(window.addEventListener("keydown",this.teclaPresionada),window.addEventListener("mouseup",this.soltarTodo),document.getElementById("graficoDias").addEventListener("mousemove",this.modificarMinutos))},beforeDestroy:function(){window.removeEventListener("keydown",this.teclaPresionada),window.removeEventListener("mouseup",this.soltarTodo),document.getElementById("graficoDias").removeEventListener("mousemove",this.modificarMinutos)}},oa=Wn,ea=(i("a0a5"),Object(m["a"])(oa,zn,Jn,!1,null,"05a871e7",null)),ia=ea.exports,na=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanaEventoCalendario",on:{click:function(o){o.stopPropagation()},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()}}},[o.infoEvento?n("div",{attrs:{id:"zonaParent"}},[n("div",{attrs:{id:"nombreParent"}},[o._v(" "+o._s(o.infoEvento.tipoParent)+": "+o._s(o.infoEvento.nombreParent)+" ")])]):o._e(),n("div",{attrs:{id:"zonaConfirmarAsistencia"}},[n("img",{staticClass:"botonConfirmacionAsistencia",class:{asistenciaConfirmada:o.usuarioParticipanteEvento,deshabilitado:o.enviandoQueryAsistencia},attrs:{src:i("341b"),id:"botonConfirmarAsistencia",title:o.usuarioParticipanteEvento?"Cancelar asistencia":"Confirmar asistencia"},on:{click:function(e){return e.stopPropagation(),o.toggleAsistencia(e)}}})]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaNombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableEvento,expression:"usuarioResponsableEvento"}],staticClass:"controlesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarNombre",title:"Editar nombre del evento"},on:{click:o.toggleEditandoNombre}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:o.guardarNuevoNombre}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteEvento.nombre)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],class:{letrasRojas:o.nuevoNombreIlegal},attrs:{id:"inputNuevoNombre",rows:"2"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[o._m(0),o.usuarioResponsableEvento?n("div",{staticClass:"controlesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrDescripcion",title:"Editar descripcion del evento"},on:{click:o.toggleEditandoDescripcion}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n          editandoDescripcion == true && nuevoDescripcionIlegal == false\n        "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:o.guardarNuevoDescripcion}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteEvento.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaParticipantes"}},[o._m(1),n("div",{attrs:{id:"listaParticipantes"},on:{click:function(e){o.idParticipanteSeleccionado=null}}},o._l(o.esteEvento.participantes,(function(e){return n("icono-persona-autonomo",{key:"participante"+e,attrs:{idPersona:e,factorEscala:"0.7",seleccionado:o.idParticipanteSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idParticipanteSeleccionado=e,o.participanteSeleccionadoEstaAceptado=!0}}})})),1)])])},aa=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraSuperiorZona"},[i("div",{staticClass:"nombreZona"},[o._v("Detalles")])])},function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraSuperiorZona"},[i("div",{staticClass:"nombreZona"},[o._v("Participantes")])])}];function ta(){var o=Object(s["a"])(["\n            mutation (\n              $idEvento: ID!\n              $idUsuario: ID!\n              $nuevoAsistencia: Boolean!\n            ) {\n              setAsistenciaUsuarioEventoCalendario(\n                idEvento: $idEvento\n                idUsuario: $idUsuario\n                nuevoAsistencia: $nuevoAsistencia\n              ) {\n                id\n                participantes\n              }\n            }\n          "]);return ta=function(){return o},o}function sa(){var o=Object(s["a"])(["\n            mutation ($idEvento: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionEventoCalendario(\n                idEvento: $idEvento\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return sa=function(){return o},o}function ra(){var o=Object(s["a"])(["\n            mutation ($idEvento: ID!, $nuevoNombre: String!) {\n              editarNombreEventoCalendario(\n                idEvento: $idEvento\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return ra=function(){return o},o}function ca(){var o=Object(s["a"])(["\n  query ($idEvento: ID!) {\n    infoAdicionalEvento(idEvento: $idEvento) {\n      id\n      participantes {\n        id\n        nombres\n        apellidos\n      }\n      nombreParent\n      tipoParent\n    }\n  }\n"]);return ca=function(){return o},o}var da=/[^ a-zA-ZÀ-ž0-9_():.,-]/,ua=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,la=c()(ca()),va={components:{Loading:Mo,iconoPersonaAutonomo:Ki},apollo:{infoEvento:{query:la,variables:function(){return{idEvento:this.esteEvento.id}},update:function(o){return o.infoAdicionalEvento},skip:function(){return!this.esteEvento||!this.esteEvento.id}}},name:"VentanaEventoCalendario",props:{esteEvento:Object},data:function(){return{nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,enviandoQueryAsistencia:!1,idParticipanteSeleccionado:null}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteEvento.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(ra()),variables:{idEvento:this.esteEvento.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteEvento.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(sa()),variables:{idEvento:this.esteEvento.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteEvento.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteEvento.descripcion},toggleAsistencia:function(){var o=this;this.usuario&&this.usuario.id&&(this.enviandoQueryAsistencia=!0,console.log("Toggling asistencia"),this.$apollo.mutate({mutation:c()(ta()),variables:{idEvento:this.esteEvento.id,idUsuario:this.usuario.id,nuevoAsistencia:!this.usuarioParticipanteEvento}}).then((function(){o.enviandoQueryAsistencia=!1})).catch((function(e){console.log("Error toggling asistencia: ".concat(e)),o.enviandoQueryAsistencia=!1})))}},computed:{usuarioResponsableEvento:function(){return!(!this.usuario||!this.usuario.id)&&this.esteEvento.responsables.includes(this.usuario.id)},nuevoNombreIlegal:function(){return!this.nuevoNombre||this.nuevoNombre.length<1||!!da.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!ua.test(this.nuevoDescripcion)},usuarioParticipanteEvento:function(){return!(!this.usuario||!this.usuario.id)&&this.esteEvento.participantes.includes(this.usuario.id)}}},pa=va,ma=(i("6f65"),Object(m["a"])(pa,na,aa,!1,null,"350fed19",null)),ha=ma.exports,Aa=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"eventoCalendarioCruzado",style:[o.offset]},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{src:i("666f"),alt:"Maximizar",id:"botonAbrirEvento"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),o.$emit("abrirEsteEvento"))}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{id:"nombre"}},[o._v(o._s(o.esteEvento.nombre))])])},ba=[],fa={name:"EventoCalendarioCruzado",props:{esteEvento:Object,minutoInicial:Number,widthHoraPx:Number,seleccionado:Boolean},computed:{offset:function(){return{width:(this.actualMinutosFinal-this.actualMinutosInicio)*this.widthHoraPx/60+"px",left:(this.actualMinutosInicio-this.minutoInicial)*(this.widthHoraPx/60)+"px"}},actualMinutosInicio:function(){var o=new Date(this.esteEvento.horarioInicio);return 60*o.getHours()+o.getMinutes()},actualMinutosFinal:function(){var o=new Date(this.esteEvento.horarioFinal);return 60*o.getHours()+o.getMinutes()},duracionMinutos:function(){return this.actualMinutosFinal-this.actualMinutosInicio}}},ga=fa,Na=(i("3250"),Object(m["a"])(ga,Aa,ba,!1,null,"87857b5a",null)),ya=Na.exports;function Ca(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idClase: ID!\n              $horarioInicio: Date!\n              $horarioFinal: Date!\n              $nombre: String!\n              $descripcion: String\n            ) {\n              crearClaseNodoConocimientoCalendario(\n                idNodo: $idNodo\n                idClase: $idClase\n                horarioInicio: $horarioInicio\n                horarioFinal: $horarioFinal\n                nombre: $nombre\n                descripcion: $descripcion\n              ) {\n                ...fragEvento\n              }\n            }\n            ","\n          "]);return Ca=function(){return o},o}function Ea(){var o=Object(s["a"])(["\n            mutation (\n              $origen: String!\n              $idOrigen: ID!\n              $horarioInicio: Date!\n              $horarioFinal: Date!\n            ) {\n              crearEventoProyectoCalendario(\n                origen: $origen\n                idOrigen: $idOrigen\n                horarioInicio: $horarioInicio\n                horarioFinal: $horarioFinal\n              ) {\n                ...fragEvento\n              }\n            }\n            ","\n          "]);return Ea=function(){return o},o}function wa(){var o=Object(s["a"])(["\n  query ($idClase: ID!, $idNodo: ID!) {\n    eventosCruceNuevaClaseNodoConocimiento(idClase: $idClase, idNodo: $idNodo) {\n      ...fragEvento\n    }\n  }\n  ","\n"]);return wa=function(){return o},o}function Da(){var o=Object(s["a"])(["\n  query ($idClub: ID!) {\n    eventosCruceNuevoEventoClub(idClub: $idClub) {\n      ...fragEvento\n    }\n  }\n  ","\n"]);return Da=function(){return o},o}function ja(){var o=Object(s["a"])(["\n  query ($idUsuario: ID!) {\n    eventosUsuario(idUsuario: $idUsuario) {\n      ...fragEvento\n    }\n  }\n  ","\n"]);return ja=function(){return o},o}function xa(){var o=Object(s["a"])(["\n  query ($origen: String!, $idOrigen: ID!) {\n    eventosSegunOrigen(origen: $origen, idOrigen: $idOrigen) {\n      ...fragEvento\n    }\n  }\n  ","\n"]);return xa=function(){return o},o}var Pa=c()(xa(),ji),Sa=c()(ja(),ji),Ra=c()(Da(),ji),Ia=c()(wa(),ji),Ta={components:{EventoCalendario:ia,VentanaEventoCalendario:ha,EventoCalendarioCruzado:ya,Loading:Mo},name:"Calendario",apollo:{eventosOrigen:{query:Pa,variables:function(){return{origen:this.configCalendario.tipo,idOrigen:this.configCalendario.id}},update:function(o){return o.eventosSegunOrigen},skip:function(){var o=["club","claseNodoConocimiento"];return!this.configCalendario||!this.configCalendario.tipo||!o.includes(this.configCalendario.tipo)},fetchPolicy:"network-only"},eventosUsuario:{query:Sa,variables:function(){return console.log("Preparando query eventosUsuario con idUsuario ".concat(this.usuario.id)),{idUsuario:this.usuario.id}},skip:function(){var o=!this.usuario||!this.usuario.id||"personal"!=this.configCalendario.tipo;return o},fetchPolicy:"network-only"},eventosCruceClub:{query:Ra,variables:function(){return{idClub:this.configCalendario.id}},update:function(o){return o.eventosCruceNuevoEventoClub},skip:function(){var o="club"!=this.configCalendario.tipo;return o},fetchPolicy:"network-only"},eventosCruceClaseNodoConocimiento:{query:Ia,variables:function(){return{idClase:this.configCalendario.id,idNodo:this.configCalendario.idNodo}},update:function(o){return o.eventosCruceNuevaClaseNodoConocimiento},skip:function(){var o="claseNodoConocimiento"!=this.configCalendario.tipo;return o},fetchPolicy:"network-only"}},props:{configCalendario:Object,creacionEventosDisallowed:Boolean},data:function(){var o=new Date(Date.now());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),{enviandoQueryCrearEvento:!1,hoveringCalendario:!1,eventosOrigen:[],eventosUsuario:[],eventosCruceClub:[],numsDiasSemana:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],diaCentral:o.getTime(),minutoInicial:480,montado:!1,moviendoTiempos:!1,seleccionandoPlaceNuevoEvento:!1,minutoInicialFantasmaNuevoEvento:null,duracionFantasmaNuevoEvento:60,tiempoInicioMarcado:null,tiempoFinalMarcado:null,ultimoTouchX:0,ultimoTouchY:0,lastPinchDistance:0,pinching:!1,idEventoSeleccionado:null,idEventoAbierto:null,zoom:100,maxZoom:140,minZoom:35}},computed:{factorZoom:function(){return Number((this.zoom/100).toFixed(2))},widthHoraPx:function(){return Math.round(100*this.factorZoom)},diasVisibles:function(){for(var o=[],e=-5;e<=5;e++){var i=this.diaCentral+864e5*e;o.push(i)}var n=new Date(Date.now()),a=o.map((function(o){var e=new Date(o),i=!1;return n.getMonth()===e.getMonth()&&n.getDate()===e.getDate()&&n.getFullYear()===e.getFullYear()&&(i=!0),{date:e,milis:o,diaSemana:e.getDay(),diaMes:e.getDate(),hoy:i}}));return a},horasVisibles:function(){if(this.montado){var o=Math.ceil(document.getElementById("filaTiempo").offsetWidth/this.widthHoraPx),e=Math.ceil(this.minutoInicial/60);e<0&&(e=0);for(var i=[],n=0;n<=o;n++){var a=e+n;a<=24&&i.push(a)}return i}},primerMinutoMediaHora:function(){var o=this.minutoInicial%30,e=30-o;return this.minutoInicial+e},offsetFantasmaNuevoEvento:function(){return{left:Math.round((this.minutoInicialFantasmaNuevoEvento-this.minutoInicial)*this.widthHoraPx/60)+"px",width:this.duracionFantasmaNuevoEvento*this.widthHoraPx/60+"px"}},horaFormateadaInicialFantasmaNuevoEvento:function(){var o=Math.floor(this.minutoInicialFantasmaNuevoEvento/60),e=this.minutoInicialFantasmaNuevoEvento-60*o,i=o;return e>0&&(i+=":"+e),i},minutoFinalFantasmaNuevoEvento:function(){return null==this.minutoInicialFantasmaNuevoEvento?null:this.minutoInicialFantasmaNuevoEvento+this.duracionFantasmaNuevoEvento},horaFormateadaFinalFantasmaNuevoEvento:function(){var o=Math.floor(this.minutoFinalFantasmaNuevoEvento/60),e=this.minutoFinalFantasmaNuevoEvento-60*o,i=o;return e>0&&(i+=":"+e),i},eventosOrigenConDia:function(){return this.eventosOrigen.map((function(o){var e=new Date(o.horarioInicio),i=e.getDate(),n=e.getMonth(),a=e.getFullYear();return o.dia=i,o.mes=n,o.año=a,o}))},eventoSeleccionado:function(){var o=this;return this.idEventoSeleccionado?this.eventosOrigen.find((function(e){return e.id===o.idEventoSeleccionado})):null},todosEventos:function(){return this.eventosOrigen.concat(this.eventosUsuario)},eventoAbierto:function(){var o=this;return this.idEventoAbierto?this.todosEventos.concat(this.eventosCruzados).find((function(e){return e.id===o.idEventoAbierto})):null},eventosCruzados:function(){return"club"===this.configCalendario.tipo?this.eventosCruceClub:"claseNodoConocimiento"===this.configCalendario.tipo?this.eventosCruceClaseNodoConocimiento:[]}},methods:{setMinutoInicialFantasmaNuevoEvento:function(o){if(this.seleccionandoPlaceNuevoEvento){var e=o.target,i=e.getBoundingClientRect(),n=o.clientX-i.left,a=n-this.widthHoraPx/2,t=Math.round(60*a/this.widthHoraPx),s=t+this.minutoInicial-this.primerMinutoMediaHora,r=Math.round(s/30);this.minutoInicialFantasmaNuevoEvento=this.primerMinutoMediaHora+30*r}},crearNuevoEventoEnHorario:function(o){var e=this;if(this.seleccionandoPlaceNuevoEvento){var i=new Date(o.milis+6e4*this.minutoInicialFantasmaNuevoEvento),n=new Date(o.milis);console.log("Creando evento con horario de inicio: ".concat(i.getHours(),"h")),console.log("Minuto inicial fantasma: ".concat(this.minutoInicialFantasmaNuevoEvento)),console.log("dateDia: ".concat(n)),this.enviandoQueryCrearEvento=!0,this.$apollo.mutate({mutation:c()(Ea(),ji),variables:{origen:this.configCalendario.tipo,idOrigen:this.configCalendario.id,horarioInicio:o.milis+6e4*this.minutoInicialFantasmaNuevoEvento,horarioFinal:o.milis+6e4*this.minutoFinalFantasmaNuevoEvento}}).then((function(o){var i=o.data.crearEventoProyectoCalendario;e.seleccionandoPlaceNuevoEvento=!1,e.enviandoQueryCrearEvento=!1;var n=e.$apollo.provider.defaultClient,a=n.readQuery({query:Pa,variables:{origen:e.configCalendario.tipo,idOrigen:e.configCalendario.id}}),t=JSON.parse(JSON.stringify(a)),s=t.eventosSegunOrigen.findIndex((function(o){return o.id==i.id}));s>-1?console.log("El evento ya estaba en caché"):(t.eventosSegunOrigen.push(i),n.writeQuery({query:Pa,variables:{origen:e.configCalendario.tipo,idOrigen:e.configCalendario.id},data:t}),e.$nextTick((function(){e.idEventoSeleccionado=i.id})))})).catch((function(o){console.log("Error. E: ".concat(o)),e.seleccionandoPlaceNuevoEvento=!1,e.enviandoQueryCrearEvento=!1}))}},crearClaseNodoConocimiento:function(o){var e=this;this.seleccionandoPlaceNuevoEvento&&(console.log("1"),console.log("Creando clase ".concat(this.configCalendario.laClase.nombre)),console.log("2"),this.$apollo.mutate({mutation:c()(Ca(),ji),variables:{idNodo:this.configCalendario.idNodo,idClase:this.configCalendario.laClase.id,horarioInicio:o.milis+6e4*this.minutoInicialFantasmaNuevoEvento,horarioFinal:o.milis+6e4*this.minutoFinalFantasmaNuevoEvento,datosEvento:this.posibleEventoNuevo,nombre:this.configCalendario.laClase.nombre,descripcion:this.configCalendario.laClase.descripcion||"Descripción"}}).then((function(o){var i=o.data.crearClaseNodoConocimientoCalendario;e.seleccionandoPlaceNuevoEvento=!1;var n=e.$apollo.provider.defaultClient,a=n.readQuery({query:Pa,variables:{origen:e.configCalendario.tipo,idOrigen:e.configCalendario.id}}),t=JSON.parse(JSON.stringify(a)),s=t.eventosSegunOrigen.findIndex((function(o){return o.id==i.id}));s>-1?console.log("El evento ya estaba en caché"):(t.eventosSegunOrigen.push(i),n.writeQuery({query:Pa,variables:{origen:e.configCalendario.tipo,idOrigen:e.configCalendario.id},data:t}),e.$nextTick((function(){e.idEventoSeleccionado=i.id})))})).catch((function(o){console.log("Error. E: ".concat(o)),e.seleccionandoPlaceNuevoEvento=!1})))},moverTiempos:function(o){this.moviendoTiempos&&(this.minutoInicial-=o.movementX,this.minutoInicial<0&&(this.minutoInicial=0),this.minutoInicial>1380&&(this.minutoInicial=1380))},getEventosDia:function(o){return this.todosEventos.filter((function(e){var i=new Date(e.horarioInicio),n=o.date;return i.getFullYear()===n.getFullYear()&&i.getMonth()===n.getMonth()&&i.getDate()===n.getDate()}))},getEventosCruzadosDia:function(o){return this.eventosCruzados.filter((function(e){var i=new Date(e.horarioInicio),n=o.date;return i.getFullYear()===n.getFullYear()&&i.getMonth()===n.getMonth()&&i.getDate()===n.getDate()}))},eliminarEventoDeCache:function(o){var e=this.$apollo.provider.defaultClient,i=null,n=null;if(console.log("Eliminando de cache el evento ".concat(o)),"club"===this.configCalendario.tipo||"claseNodoConocimiento"===this.configCalendario.tipo){var a=e.readQuery({query:Pa,variables:{origen:this.configCalendario.tipo,idOrigen:this.configCalendario.id}});i=JSON.parse(JSON.stringify(a)),n=i.eventosSegunOrigen}var t=n.findIndex((function(e){return e.id===o}));t>-1?(console.log("Evento en posicion ".concat(t)),n.splice(t,1),"club"!==this.configCalendario.tipo&&"claseNodoConocimiento"!==this.configCalendario.tipo||e.writeQuery({query:Pa,variables:{origen:this.configCalendario.tipo,idOrigen:this.configCalendario.id},data:i})):console.log("El evento no estaba en cache")},moverDias:function(o){if(this.hoveringCalendario&&(o.ctrlKey||o.shiftKey)){o.preventDefault();var e=30;o.deltaY>0&&(o.shiftKey?(this.minutoInicial+=e,this.minutoInicial<0&&(this.minutoInicial=0),this.minutoInicial>1380&&(this.minutoInicial=1380)):o.ctrlKey&&(this.diaCentral+=864e5)),o.deltaY<0&&(o.shiftKey?(this.minutoInicial-=e,this.minutoInicial<0&&(this.minutoInicial=0),this.minutoInicial>1380&&(this.minutoInicial=1380)):o.ctrlKey&&(this.diaCentral-=864e5))}},inicioTouch:function(o){if(2===o.touches.length){var e=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY);return this.lastPinchDistance=e,void(this.pinching=!0)}this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY},movimientoTouch:function(o){if(this.pinching){console.log("Pinching");var e=parseInt(document.getElementById("contenedorMarcas").offsetLeft);console.log("El ancho de la fecha es: ".concat(e));var i={x:(o.touches[0].pageX+o.touches[1].pageX)/2};if(i.x<e)return;var n=this.minutoInicial+60*i.x/this.widthHoraPx,a=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY),t=a-this.lastPinchDistance;return t*=.5,o.preventDefault(),this.zoomVista(Math.round(t),n),void(this.lastPinchDistance=a)}var s=o.changedTouches[0].clientX-this.ultimoTouchX,r=o.changedTouches[0].clientY-this.ultimoTouchY;this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY,Math.abs(s)>Math.abs(r)&&(o.preventDefault(),this.minutoInicial-=Math.round(s/this.factorZoom),this.minutoInicial<0&&(this.minutoInicial=0),this.minutoInicial>1380&&(this.minutoInicial=1380))},endTouch:function(){this.pinching=!1},zoomVista:function(o,e){var i=this;e<this.minutoInicial&&(e=this.minutoInicial),e>1440&&(e=1440);var n={x:(e-this.minutoInicial)*this.widthHoraPx/60},a=this.zoom+o;a>this.maxZoom&&(a=this.maxZoom),a<this.minZoom&&(a=this.minZoom),this.zoom=a,this.$nextTick((function(){var o=e-60*n.x/i.widthHoraPx;i.minutoInicial=Math.round(o),i.minutoInicial<0&&(i.minutoInicial=0),i.minutoInicial>1380&&(i.minutoInicial=1380)}))}},mounted:function(){this.montado=!0,window.addEventListener("wheel",this.moverDias,{passive:!1})},beforeDestroy:function(){window.removeEventListener("wheel",this.moverDias,{passive:!1})}},ka=Ta,Oa=(i("39c5"),Object(m["a"])(ka,Kn,Zn,!1,null,"763226df",null)),Ma=Oa.exports;function Ba(){var o=Object(s["a"])(["\n                    mutation($idNodo: ID!, $idClase: ID!, $idUsuario:ID!){\n                        eliminarUsuarioInteresadosClaseNodoConocimiento(idNodo: $idNodo, idClase: $idClase, idUsuario: $idUsuario){\n                            id\n                            interesados\n                     }\n                    }\n                "]);return Ba=function(){return o},o}function Fa(){var o=Object(s["a"])(["\n                    mutation($idNodo: ID!, $idClase: ID!, $idUsuario:ID!){\n                        addUsuarioInteresadosClaseNodoConocimiento(idNodo: $idNodo, idClase: $idClase, idUsuario: $idUsuario){\n                            id\n                            interesados\n                        }\n                    }\n                "]);return Fa=function(){return o},o}function $a(){var o=Object(s["a"])(["\n                    mutation($idNodo: ID!, $idClase: ID!){\n                        eliminarClaseNodoConocimiento(idNodo: $idNodo, idClase: $idClase)\n                    }\n                "]);return $a=function(){return o},o}var Qa={components:{Calendario:Ma},name:"ClaseNodo",props:{estaClase:Object,idNodo:String,usuarioExperto:Boolean},data:function(){return{enviandoQueryInteres:!1,programandoClase:!1}},methods:{eliminarse:function(){var o=this;confirm("¿Confirmar la eliminación de esta clase? (Esta acción no puede deshacerse)")&&this.$apollo.mutate({mutation:c()($a()),variables:{idNodo:this.idNodo,idClase:this.estaClase.id}}).then((function(e){var i=e.data.eliminarClaseNodoConocimiento;i&&o.$emit("meElimine")})).catch((function(o){console.log("Error: ".concat(o))}))},toggleInteresarse:function(){this.usuarioInteresado?this.desinteresarse():this.interesarse()},interesarse:function(){var o=this;this.usuario&&this.usuario.id&&(console.log("Interesandose"),this.enviandoQueryInteres=!0,this.$apollo.mutate({mutation:c()(Fa()),variables:{idNodo:this.idNodo,idClase:this.estaClase.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryInteres=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryInteres=!1})))},desinteresarse:function(){var o=this;this.usuario&&this.usuario.id&&(this.enviandoQueryInteres=!0,this.$apollo.mutate({mutation:c()(Ba()),variables:{idNodo:this.idNodo,idClase:this.estaClase.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryInteres=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryInteres=!1})))}},computed:{usuarioInteresado:function(){return!(!this.usuario||!this.usuario.id)&&this.estaClase.interesados.includes(this.usuario.id)},usuarioExpertoClase:function(){return!(!this.usuario||!this.usuario.id)&&this.estaClase.idExperto===this.usuario.id}}},qa=Qa,Ua=(i("53cb"),Object(m["a"])(qa,Ln,Gn,!1,null,"7d2e27d2",null)),Va=Ua.exports;function La(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idExperto: ID!) {\n              crearClaseNodoConocimiento(\n                idNodo: $idNodo\n                idExperto: $idExperto\n              ) {\n                id\n                nombre\n                idExperto\n                descripcion\n                interesados\n              }\n            }\n          "]);return La=function(){return o},o}function Ga(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idSeccion: ID!, $movimiento: Int!) {\n              moverSeccionNodoConocimiento(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                movimiento: $movimiento\n              )\n            }\n          "]);return Ga=function(){return o},o}function Ka(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idSeccion: ID!) {\n              eliminarSeccionNodoConocimiento(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n              )\n            }\n          "]);return Ka=function(){return o},o}function Za(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nombreNuevaSeccion: String!) {\n              crearNuevaSeccionNodoConocimiento(\n                idNodo: $idNodo\n                nombreNuevaSeccion: $nombreNuevaSeccion\n              ) {\n                id\n                nombre\n                archivos {\n                  nombre\n                  primario\n                }\n                tipoPrimario\n              }\n            }\n          "]);return Za=function(){return o},o}function za(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idSeccion: ID!, $nombreArchivo: String!) {\n              marcarPrimarioArchivoSeccionNodo(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                nombreArchivo: $nombreArchivo\n              )\n            }\n          "]);return za=function(){return o},o}function Ja(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idSeccion: ID!, $nombreArchivo: String!) {\n              eliminarArchivoSeccionNodo(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                nombreArchivo: $nombreArchivo\n              )\n            }\n          "]);return Ja=function(){return o},o}function _a(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevoNombre: String!) {\n              editarNombreNodo(idNodo: $idNodo, nuevoNombre: $nuevoNombre) {\n                modificados {\n                  id\n                  nombre\n                }\n              }\n            }\n          "]);return _a=function(){return o},o}function Ha(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idUsuario: ID!) {\n              addExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                expertos\n                posiblesExpertos\n              }\n            }\n          "]);return Ha=function(){return o},o}function Ya(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idUsuario: ID!) {\n              addPosibleExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                posiblesExpertos\n              }\n            }\n          "]);return Ya=function(){return o},o}function Xa(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idUsuario: ID!) {\n              addExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                expertos\n                posiblesExpertos\n              }\n            }\n          "]);return Xa=function(){return o},o}function Wa(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idUsuario: ID!) {\n              removeExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                expertos\n                posiblesExpertos\n              }\n            }\n          "]);return Wa=function(){return o},o}function ot(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevoKeywords: String!) {\n              editarKeywordsNodoConocimiento(\n                idNodo: $idNodo\n                nuevoKeywords: $nuevoKeywords\n              ) {\n                id\n                keywords\n              }\n            }\n          "]);return ot=function(){return o},o}function et(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionNodoConocimiento(\n                idNodo: $idNodo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return et=function(){return o},o}function it(){var o=Object(s["a"])(["\n  query ($idNodo: ID!) {\n    nodo(idNodo: $idNodo) {\n      nombre\n      id\n      descripcion\n      clases {\n        id\n        nombre\n        idExperto\n        descripcion\n        interesados\n      }\n      keywords\n      expertos\n      posiblesExpertos\n      clases {\n        id\n      }\n      idForoPublico\n      idForoExpertos\n      secciones {\n        id\n        nombre\n        archivos {\n          nombre\n          primario\n        }\n        tipoPrimario\n      }\n      vinculos {\n        idRef\n        rol\n        tipo\n      }\n    }\n  }\n"]);return it=function(){return o},o}var nt=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?"@=-]/,at=/[^ a-zA-ZÀ-ž0-9_():.,-]/,tt=/[^ a-zA-ZÀ-ž0-9_():.,-]/,st=/[^ a-zA-Z0-9]/,rt=c()(it()),ct={components:{Loading:Mo,IconoPersonaAutonomo:Ki,Foro:Vn,ClaseNodo:Va},name:"VisorNodoConocimiento",apollo:{esteNodo:{query:rt,variables:function(){return{idNodo:this.$route.params.idNodo}},update:function(o){var e=o.nodo,i=JSON.parse(JSON.stringify(e));return i.secciones.forEach((function(o){o.subiendoArchivo=!1,o.editandose=!1,o.texto=o.nombre,o.archivos.forEach((function(o){o.enviandoInfo=!1}))})),i}}},data:function(){return{esteNodo:{expertos:[],posiblesExpertos:[],secciones:[],clases:[]},seccionesBasicas:[{nombre:"descripcion",texto:"Descripción",id:"seccionBasica1",seccionBasica:!0},{nombre:"expertos",texto:"Expertos",id:"seccionBasica2",seccionBasica:!0},{nombre:"foros",texto:"Foros",id:"seccionBasica3",seccionBasica:!0},{nombre:"keywords",texto:"Palabras clave",id:"seccionBasica4",seccionBasica:!0}],indexInicioContenidos:1,seccionesContenidos:[{nombre:"explicacion",texto:"Explicación",editandose:!1,subiendoArchivo:!1}],idSeccionSeleccionada:"seccionBasica1",nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:null,editandoDescripcion:!1,enviandoNuevoDescripcion:!1,nuevoKeywords:null,editandoKeywords:!1,enviandoNuevoKeywords:!1,idExpertoSeleccionado:null,expertoSeleccionadoEstaAceptado:!1,enviandoQueryExpertos:!1,editandoArchivosContenidos:!1,versionExplicacionRef:0,nombreNuevaSeccion:"",creandoNuevaSeccion:!1,mostrandoBarraLateral:!1}},computed:{seccionesOrganizadas:function(){var o=[this.seccionesBasicas[0]].concat(Object(ci["a"])(this.esteNodo.secciones),Object(ci["a"])(this.seccionesBasicas.slice(1)));return o},direccionNodo:function(){return this.serverUrl+"/assetsAtlas/contenidosNodos/"+this.$route.params.idNodo},usuarioExperto:function(){return!!this.esteNodo.expertos&&!!this.esteNodo.expertos.includes(this.usuario.id)},usuarioPosibleExperto:function(){return!!this.esteNodo.posiblesExpertos&&!!this.esteNodo.posiblesExpertos.includes(this.usuario.id)},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!at.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!nt.test(this.nuevoDescripcion)},nuevoKeywordsIlegal:function(){return!this.nuevoKeywords||this.nuevoKeywords.length<1||!!st.test(this.nuevoKeywords)},infoAsParent:function(){return{id:this.esteNodo.id,tipo:"nodoConocimiento",nombre:this.esteNodo.nombre}},usuarioAdministradorAtlas:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("atlasAdministrador")},nombreNuevaSeccionIlegal:function(){return!this.nombreNuevaSeccion||this.nombreNuevaSeccion.length<1||!!tt.test(this.nombreNuevaSeccion)}},methods:{toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteNodo.descripcion},toggleEditandoKeywords:function(){this.$refs.inputNuevoKeywords.style.height=this.$refs.keywords.offsetHeight+"px",this.editandoKeywords=!this.editandoKeywords,this.nuevoKeywords=this.esteNodo.keywords},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteNodo.nombre},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("Descripción ilegal"):this.nuevoDescripcion!=this.esteNodo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(et()),variables:{idNodo:this.esteNodo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){var i=e.graphQLErrors;o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(i))}))):this.editandoDescripcion=!1},guardarNuevoKeywords:function(){var o=this;this.nuevoKeywordsIlegal?console.log("Keywords ilegal"):this.nuevoKeywords!=this.esteNodo.keywords?(console.log("guardando nuevo keywords"),this.enviandoNuevoKeywords=!0,this.$apollo.mutate({mutation:c()(ot()),variables:{idNodo:this.esteNodo.id,nuevoKeywords:this.nuevoKeywords}}).then((function(){o.enviandoNuevoKeywords=!1,o.editandoKeywords=!1})).catch((function(e){var i=e.graphQLErrors;o.enviandoNuevoKeywords=!1,console.log("Error. E :".concat(i))}))):this.editandoKeywords=!1},abandonarListaExpertos:function(){var o=this;console.log("Abandonando la responsabilidad en este nodo"),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:c()(Wa()),variables:{idNodo:this.esteNodo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryExpertos=!1})).catch((function(e){o.enviandoQueryExpertos=!1,console.log("error: "+e)}))},aceptarExperto:function(o){var e=this;console.log("aceptando como experto al usuario ".concat(o)),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:c()(Xa()),variables:{idNodo:this.esteNodo.id,idUsuario:o}}).then((function(){e.enviandoQueryExpertos=!1,e.expertoSeleccionadoEstaAceptado=!0})).catch((function(o){e.enviandoQueryExpertos=!1,console.log("error: "+o)}))},entrarListaPosiblesExpertos:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles expertos del nodo con id ".concat(this.esteNodo.id)),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:c()(Ya()),variables:{idNodo:this.esteNodo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryExpertos=!1})).catch((function(e){o.enviandoQueryExpertos=!1,console.log("error: "+e)}))},asumirComoExperto:function(){var o=this;console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de expertos del nodo con id ").concat(this.esteNodo.id)),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:c()(Ha()),variables:{idNodo:this.esteNodo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryExpertos=!1})).catch((function(e){o.enviandoQueryExpertos=!1,console.log("error: "+e)}))},guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteNodo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(_a()),variables:{idNodo:this.esteNodo.id,nuevoNombre:this.nuevoNombre}}).then((function(e){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(e)," ")),o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},subirArchivoContenido:function(o,e){var i=this,n=o.target,a=new FormData,t=n.files[0];a.append("nuevoArchivo",t),a.append("idNodo",this.esteNodo.id),a.append("idSeccion",e.id),e.subiendoArchivo=!0,Ie()({method:"post",url:this.serverUrl+"/api/atlas/subirArchivoContenidoSeccionNodo",data:a,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(o){var n=o.data.infoArchivo;e.subiendoArchivo=!1;var a=i.$apollo.provider.defaultClient,t=a.readQuery({query:rt,variables:{idNodo:i.$route.params.idNodo}}),s=JSON.parse(JSON.stringify(t)),r=s.nodo.secciones.find((function(o){return o.id==e.id}));r.archivos.push(n),a.writeQuery({query:rt,variables:{idNodo:i.$route.params.idNodo},data:s})})).catch((function(o){e.subiendoArchivo=!1,console.log("Error subiendo archivo. E: ".concat(o))}))},borrarArchivoExistenteSeccionNodo:function(o,e){var i=o.nombre;if(confirm("Borrando archivo ¿Continuar?")){var n=this;o.enviandoInfo=!0,this.$apollo.mutate({mutation:c()(Ja()),variables:{idNodo:this.$route.params.idNodo,idSeccion:e,nombreArchivo:i},update:function(a,t){var s=t.data.eliminarArchivoSeccionNodo;if(o.enviandoInfo=!1,s){var r=a.readQuery({query:rt,variables:{idNodo:n.$route.params.idNodo}}),c=JSON.parse(JSON.stringify(r)),d=c.nodo.secciones.find((function(o){return o.id==e}));if(d){var u=d.archivos.findIndex((function(o){return o.nombre==i}));u>-1?(d.archivos.splice(u,1),a.writeQuery({query:rt,variables:{idNodo:n.$route.params.idNodo},data:c})):console.log("Archivo no encontrado")}else console.log("Seccion no encontrada")}else console.log("Archivo no eliminado")}}).then((function(){})).catch((function(e){o.enviandoInfo=!1,console.log("Error. E: ".concat(e))}))}else console.log("Cancelado")},marcarPrimario:function(o,e){var i=o.nombre;console.log("Marcando ".concat(i," como primario en la sección ").concat(e));var n=this;o.enviandoInfo=!0,this.$apollo.mutate({mutation:c()(za()),variables:{idNodo:this.$route.params.idNodo,idSeccion:e,nombreArchivo:i},update:function(a,t){var s=t.data.marcarPrimarioArchivoSeccionNodo;if(o.enviandoInfo=!1,s){var r=a.readQuery({query:rt,variables:{idNodo:n.$route.params.idNodo}}),c=JSON.parse(JSON.stringify(r)),d=c.nodo.secciones.find((function(o){return o.id==e}));d?(d.archivos.forEach((function(o){o.primario=o.nombre==i})),a.writeQuery({query:rt,variables:{idNodo:n.$route.params.idNodo},data:c})):console.log("Seccion no encontrada")}else console.log("Archivo no marcado")}}).then((function(){})).catch((function(e){o.enviandoInfo=!1,console.log("Error. E: ".concat(e))}))},crearNuevaSeccion:function(){var o=this;console.log("Creando nueva sección con nombre ".concat(this.nombreNuevaSeccion));var e=this;this.$apollo.mutate({mutation:c()(Za()),variables:{idNodo:this.esteNodo.id,nombreNuevaSeccion:this.nombreNuevaSeccion}}).then((function(i){var n=i.data.crearNuevaSeccionNodoConocimiento;console.log("Seccion creada: ".concat(JSON.stringify(n)));var a=e.$apollo.provider.defaultClient,t=a.readQuery({query:rt,variables:{idNodo:e.esteNodo.id}}),s=JSON.parse(JSON.stringify(t));s.nodo.secciones.push(n),a.writeQuery({query:rt,variables:{idNodo:e.esteNodo.id},data:s}),o.creandoNuevaSeccion=!1,o.nombreNuevaSeccion=null})).catch((function(o){console.log("Error. E: ".concat(o))}))},eliminarSeccion:function(o){if(confirm("Eliminando esta sección con todos sus contenidos. ¿Continuar?")){var e=this.esteNodo.secciones.find((function(e){return e.id==o}));e.editandose=!0,console.log("Enviando mutación de eliminar seccion ".concat(o));var i=this;this.$apollo.mutate({mutation:c()(Ka()),variables:{idNodo:this.esteNodo.id,idSeccion:o}}).then((function(n){var a=n.data.eliminarSeccionNodoConocimiento;if(console.log("resultado: ".concat(a)),e.editandose=!1,a){var t=i.$apollo.provider.defaultClient,s=t.readQuery({query:rt,variables:{idNodo:i.esteNodo.id}}),r=JSON.parse(JSON.stringify(s)),c=r.nodo.secciones.findIndex((function(e){return e.id==o}));c>-1?(r.nodo.secciones.splice(c,1),t.writeQuery({query:rt,variables:{idNodo:i.esteNodo.id},data:r})):console.log("Seccion no encontrada")}})).catch((function(o){e.editandose=!1,console.log("Error: E: ".concat(o))}))}},moverSeccion:function(o,e){var i=this,n=this.esteNodo.secciones.findIndex((function(e){return e.id==o}));if(!(n<0||"subir"==e&&0==n||"bajar"==e&&n==this.esteNodo.secciones.length-1)){var a=this.esteNodo.secciones.find((function(e){return e.id==o}));this.$set(a,"editandose",!0);var t=0;"subir"==e&&(t=-1),"bajar"==e&&(t=1),this.$apollo.mutate({mutation:c()(Ga()),variables:{idNodo:this.esteNodo.id,idSeccion:o,movimiento:t}}).then((function(e){var n=e.data.moverSeccionNodoConocimiento;if(a.editandose=!1,n){var s=i.$apollo.provider.defaultClient,r=s.readQuery({query:rt,variables:{idNodo:i.esteNodo.id}}),c=JSON.parse(JSON.stringify(r)),d=c.nodo.secciones.findIndex((function(e){return e.id==o}));d>-1&&(c.nodo.secciones.splice(d+t,0,c.nodo.secciones.splice(d,1)[0]),s.writeQuery({query:rt,variables:{idNodo:i.esteNodo.id},data:c}))}})).catch((function(){a.editandose=!1,console.log("Error moviendo sección")}))}},ofrecerClase:function(){var o=this;console.log("Ofreciendo clase"),this.usuario&&this.usuario.id&&this.$apollo.mutate({mutation:c()(La()),variables:{idNodo:this.esteNodo.id,idExperto:this.usuario.id}}).then((function(e){var i=e.data.crearClaseNodoConocimiento,n=o.$apollo.provider.defaultClient,a=n.readQuery({query:rt,variables:{idNodo:o.$route.params.idNodo}}),t=JSON.parse(JSON.stringify(a)),s=t.nodo.clases.findIndex((function(o){return o.id===i.id}));s>-1&&t.nodo.clases.splice(s,1),t.nodo.clases.push(i),n.writeQuery({query:rt,variables:{idNodo:o.$route.params.idNodo},data:t})}))},eliminarClaseCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:rt,variables:{idNodo:this.$route.params.idNodo}}),n=JSON.parse(JSON.stringify(i)),a=n.nodo.clases.findIndex((function(e){return e.id===o}));a>-1?n.nodo.clases.splice(a,1):console.log("La clase que se iba a eliminar no estaba en el caché"),e.writeQuery({query:rt,variables:{idNodo:this.$route.params.idNodo},data:n})}}},dt=ct,ut=(i("27e2"),Object(m["a"])(dt,si,ri,!1,null,"4a1b6529",null)),lt=ut.exports,vt=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"proyectos"}},[i("center",[i("h3",[o._v("Grupos")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!o.loading,expression:"!loading"}],attrs:{id:"controles"}},[o.usuarioLogeado?i("div",{staticClass:"controles hoverGris",attrs:{id:"crearProyecto"},on:{click:o.crearNuevoProyecto}},[o._v(" Crear nuevo grupo ")]):o._e(),o.usuarioSuperadministrador&&o.proyectos.some((function(e){return e.id==o.idProyectoSeleccionado}))?i("div",{staticClass:"controles hoverGris",attrs:{id:"bEliminarProyecto"},on:{click:function(e){return o.eliminarProyecto(o.idProyectoSeleccionado)}}},[o._v(" Eliminar grupo ")]):o._e()]),i("div",{attrs:{id:"listaProyectos"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idProyectoSeleccionado=null}}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loading,expression:"loading"}],attrs:{texto:"Cargando lista de grupos..."}}),o._l(o.proyectosOrdenadosSegunUsuario,(function(e){return i("icono-proyecto",{key:e.id,attrs:{esteProyecto:e,seleccionado:o.idProyectoSeleccionado==e.id},nativeOn:{click:function(i){o.idProyectoSeleccionado=e.id}}})}))],2)],1)},pt=[],mt=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"iconoProyecto",class:{proyectoPropio:o.usuarioResponsableProyecto,seleccionado:o.seleccionado},on:{dblclick:o.navegarAlProyecto}},[n("p",{ref:"nombre",attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteProyecto.nombre)+" ")]),n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{src:i("4e77"),alt:"entrar",title:"Entrar a este proyecto",id:"bEntrarProyecto"},on:{click:function(e){return e.stopPropagation(),o.navegarAlProyecto(e)}}})])},ht=[],At={name:"IconoProyecto",props:{esteProyecto:Object,seleccionado:Boolean},data:function(){return{nombreEditandose:!1}},computed:{usuarioResponsableProyecto:function(){return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.includes(this.usuario.id)}},methods:{navegarAlProyecto:function(){this.$router.push("/proyecto/"+this.esteProyecto.id)}}},bt=At,ft=(i("6332"),Object(m["a"])(bt,mt,ht,!1,null,"71c5f02f",null)),gt=ft.exports;function Nt(){var o=Object(s["a"])(["\n          mutation($idProyecto:ID!){\n            eliminarProyecto(idProyecto: $idProyecto)\n          }\n        "]);return Nt=function(){return o},o}function yt(){var o=Object(s["a"])(["\n          mutation{\n            crearProyecto{\n              id\n              nombre\n              responsables              \n            }\n          }\n        "]);return yt=function(){return o},o}function Ct(){var o=Object(s["a"])(["\nquery {\n    proyectos {\n      id\n      nombre\n      responsables\n    }\n  }\n"]);return Ct=function(){return o},o}var Et=c()(Ct()),wt={components:{IconoProyecto:gt,Loading:Mo},name:"Proyectos",apollo:{proyectos:{query:Et,fetchPolicy:"cache-and-network",update:function(o){var e=this,i=o.proyectos,n=JSON.parse(JSON.stringify(i));return n.sort((function(o,i){var n=0;return o.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&n--,i.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&n++,e.loading=!1,n}))}}},data:function(){return{proyectos:[],idProyectoSeleccionado:null,loading:!0}},methods:{crearNuevoProyecto:function(){var o=this;console.log("Creando nuevo proyecto"),this.$apollo.mutate({mutation:c()(yt())}).then((function(e){var i=e.data.crearProyecto;o.$router.push("/proyecto/"+i.id)})).catch((function(o){console.log("Error: ".concat(o.errors))}))},eliminarProyecto:function(o){confirm("¿Confirmar la eliminación del grupo? (Esta acción no se puede deshacer)")&&(console.log("Eliminando proyecto ".concat(o)),this.$apollo.mutate({mutation:c()(Nt()),variables:{idProyecto:o},update:function(e,i){var n=i.data.eliminarProyecto;if(console.log("Actualizando cache"),n){var a=e.readQuery({query:Et}),t=JSON.parse(JSON.stringify(a)),s=t.proyectos.findIndex((function(e){return e.id==o}));s>-1?(t.proyectos.splice(s,1),e.writeQuery({query:Et,data:t}),console.log("Caché actualizado")):console.log("No existía ese proyecto en el cache")}}}).then((function(){})).catch((function(o){console.log("Error. E:".concat(o))})))}},computed:{username:function(){return this.$store.state.usuario.username},proyectosOrdenadosSegunUsuario:function(){var o=this;return this.usuario&&this.usuario.id?Object(ci["a"])(this.proyectos).sort((function(e,i){var n=0;return e.responsables.includes(o.usuario.id)&&n--,i.responsables.includes(o.usuario.id)&&n++,n})):this.proyectos}}},Dt=wt,jt=(i("fcf2"),Object(m["a"])(Dt,vt,pt,!1,null,"7daebf4c",null)),xt=jt.exports,Pt=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"proyecto"},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.loading,expression:"loading"}],attrs:{texto:"Cargando grupo..."}}),o.loading?o._e():[n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaNombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del proyecto"},on:{click:o.toggleEditandoNombre}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:o.guardarNuevoNombre}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombreProyecto"}},[o._v(" "+o._s(o.esteProyecto.nombre)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text",id:"inputNuevoNombre"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),n("img",{attrs:{src:i("c51c"),alt:"Enlace al foro",id:"enlaceForo",title:"Ir al foro de este proyecto"},on:{click:o.navegarAlForo}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoDescripcion=!o.mostrandoDescripcion}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoDescripcion?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Descripcion ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoDescripcion,expression:"mostrandoDescripcion"}]},[o.usuarioResponsableProyecto?n("div",{staticClass:"controlesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrDescripcion",title:"Editar descripcion del proyecto"},on:{click:o.toggleEditandoDescripcion}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n              editandoDescripcion == true && nuevoDescripcionIlegal == false\n            "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:o.guardarNuevoDescripcion}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteProyecto.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1)]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoResponsables=!o.mostrandoResponsables}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoResponsables?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" "+o._s(1===o.esteProyecto.responsables.length?"Coordinador":"Coordinadores")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoResponsables,expression:"mostrandoResponsables"}]},[n("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.esteProyecto.responsables.length<1?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),1==o.usuarioLogeado&&o.usuarioResponsableProyecto&&o.responsablesSolicitados<1?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"solicitarResponsable"},on:{click:function(e){return o.setResponsablesSolicitados(1)}}},[o._v(" Solicitar responsable ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsableProyecto&&!o.usuarioPosibleResponsableProyecto&&o.esteProyecto.responsables.length>0?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsableProyecto&&1!=o.usuarioPosibleResponsableProyecto?o._e():n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioResponsableProyecto?n("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idResponsableSeleccionado&&0==o.responsableSeleccionadoEstaAceptado,expression:"\n              idResponsableSeleccionado != null &&\n              responsableSeleccionadoEstaAceptado == false\n            "}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}},[o._v(" Aceptar como responsable ")]):o._e()],1),n("div",{attrs:{id:"listaResponsables"}},[o._l(o.esteProyecto.responsables,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!0}}})})),o._l(o.esteProyecto.posiblesResponsables,(function(e){return n("icono-persona-autonomo",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto||o.usuario&&o.usuario.id&&o.usuario.id===e,expression:"\n              usuarioResponsableProyecto ||\n              (usuario && usuario.id && usuario.id === idPersona)\n            "}],key:e,staticClass:"personaPosibleResponsable",attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!1},dblclick:function(i){return i.shiftKey?o.aceptarResponsable(e):null}}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:o.responsablesSolicitados>0,expression:"responsablesSolicitados > 0"}],staticClass:"iconoResponsablesSolicitados"},[n("img",{staticClass:"imagenResponsablesSolicitados",attrs:{src:i("5e1a"),alt:"Usuario solicitado",title:"Personas adicionales solicitadas"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.responsablesSolicitados,expression:"responsablesSolicitados"}],style:[{backgroundColor:o.esteProyecto.responsablesSolicitados!=o.responsablesSolicitados?"orange":"white"}],attrs:{type:"number",id:"inputResponsablesSolicitados",readonly:!o.usuarioResponsableProyecto},domProps:{value:o.responsablesSolicitados},on:{input:function(e){e.target.composing||(o.responsablesSolicitados=e.target.value)}}})])],2)])]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaParticipantes"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoParticipantes=!o.mostrandoParticipantes}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoParticipantes?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" "+o._s(1===o.esteProyecto.participantes.length?"Participante":"Participantes")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoParticipantes,expression:"mostrandoParticipantes"}]},[n("div",{staticClass:"controlesZona",attrs:{id:"controlesParticipantes"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryParticipantes,expression:"enviandoQueryParticipantes"}],attrs:{texto:"Esperando..."}}),1!=o.usuarioLogeado||o.usuarioParticipanteProyecto||o.usuarioResponsableProyecto?o._e():n("div",{staticClass:"controlesParticipantes hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryParticipantes},on:{click:function(e){return o.entrarListaParticipantes()}}},[o._v(" Participar ")]),1==o.usuarioLogeado&&o.usuarioParticipanteProyecto?n("div",{staticClass:"controlesParticipantes hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryParticipantes},on:{click:function(e){return o.abandonarListaParticipantes()}}},[o._v(" Abandonar ")]):o._e()],1),n("div",{attrs:{id:"listaParticipantes"}},o._l(o.esteProyecto.participantes,(function(e){return n("icono-persona-autonomo",{key:"participante"+e,attrs:{idPersona:e,seleccionado:o.idParticipanteSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idParticipanteSeleccionado=e,o.participanteSeleccionadoEstaAceptado=!0}}})})),1)])]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaEventos"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoEventos=!o.mostrandoEventos}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoEventos?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Eventos ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoEventos,expression:"mostrandoEventos"}]},[n("div",{staticClass:"controlesZona",attrs:{id:"controlesEventos"}}),n("calendario",{key:"calendario"+o.versionCalendario,attrs:{configCalendario:{tipo:"club",id:o.esteProyecto.id},creacionEventosDisallowed:!o.usuarioResponsableProyecto}})],1)]),n("div",{ref:"zonaDiagramaFlujo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaDiagramaFlujo"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoDiagramaFlujo=!o.mostrandoDiagramaFlujo}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoDiagramaFlujo?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Diagrama de flujo ")])]),n("div",{staticClass:"controlesZona",attrs:{id:"controlesObjetivos"}}),o.mostrandoDiagramaFlujo?n("diagrama-flujo",{attrs:{idProyecto:o.esteProyecto.id,objetivos:o.esteProyecto.objetivos,trabajos:o.esteProyecto.trabajos,usuarioResponsableProyecto:o.usuarioResponsableProyecto,activo:null==o.idNodoAbierto,deshabilitar:o.realizandoOperacionDiagrama},on:{crearTrabajoEnPosicion:o.crearNuevoTrabajo,crearObjetivoEnPosicion:o.crearNuevoObjetivo,nodoAbierto:o.abrirNodo},nativeOn:{click:function(e){o.idNodoAbierto=null}}}):o._e()],1),n("div",{ref:"zonaForo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaForo"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoForo=!o.mostrandoForo}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoForo?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" foro ")])]),o.usuarioResponsableProyecto||o.usuarioParticipanteProyecto?n("foro",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoForo,expression:"mostrandoForo"}],attrs:{parent:o.infoAsParent,idForo:o.esteProyecto.idForo}}):o._e()],1)]],2)},St=[],Rt=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"diagramaFlujo",class:{deshabilitado:o.deshabilitar},style:[o.opacidad,{backgroundColor:o.hovered?"rgb(225, 229, 241)":"white"}],attrs:{id:"diagramaFlujo"},on:{mouseenter:function(e){o.hovered=!0},mouseleave:function(e){o.hovered=!1},contextmenu:function(e){return e.target!==e.currentTarget?null:(e.preventDefault(),o.abrirMenuCx(e))},mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.target!==e.currentTarget?null:void(o.panningVista=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.target!==e.currentTarget?null:o.mouseUpFondo(e)},mousemove:o.panVista}},[i("canvas-diagrama-flujo",{style:[o.posicionCanvasFlechas],attrs:{todosNodos:o.todosNodos,factorZoom:o.factorZoom}}),i("div",{attrs:{id:"contenedorNodos"}},[o._l(o.trabajos,(function(e){return i("nodo-trabajo",{key:e.id,attrs:{esteTrabajo:e,idProyecto:o.idProyecto,usuarioResponsableProyecto:o.usuarioResponsableProyecto,seleccionado:o.idNodoSeleccionado==e.id,posDummy:o.posDummy,menuCx:o.idNodoClickDerecho===e.id,idNodoSeleccionado:o.idNodoSeleccionado,centroVista:o.centroVista,factorZoom:Number(o.factorZoom.toFixed(2))},on:{meAbrieron:function(i){return o.$emit("nodoAbierto",e.id)},miInfo:function(i){return o.actualizarInfoTrabajos(e.id,i)},crearRequerimento:function(e){return o.crearRequerimento("trabajo",e)},eliminarVinculo:function(e){return o.eliminarVinculo("trabajo",e)}},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id,o.tipoNodoSeleccionado="trabajo"},dblclick:function(i){o.idNodoPaVentanita=e.id},contextmenu:function(i){i.preventDefault(),o.idNodoClickDerecho=e.id}}})})),o._l(o.objetivos,(function(e){return i("nodo-objetivo",{key:e.id,attrs:{idProyecto:o.idProyecto,esteObjetivo:e,usuarioResponsableProyecto:o.usuarioResponsableProyecto,seleccionado:o.idNodoSeleccionado==e.id,idNodoSeleccionado:o.idNodoSeleccionado,posDummy:o.posDummy,menuCx:o.idNodoClickDerecho===e.id,centroVista:o.centroVista,factorZoom:o.factorZoom},on:{meAbrieron:function(i){return o.$emit("nodoAbierto",e.id)},crearRequerimento:function(e){return o.crearRequerimento("objetivo",e)},eliminarVinculo:function(e){return o.eliminarVinculo("objetivo",e)}},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id,o.tipoNodoSeleccionado="objetivo"},dblclick:function(i){o.idNodoPaVentanita=e.id},contextmenu:function(i){i.preventDefault(),i.stopPropagation(),o.idNodoClickDerecho=e.id}}})}))],2),o.idNodoPaVentanita&&o.objetivoEnVentanita?i("ventanita-objetivo",{key:"ventanita"+o.objetivoEnVentanita.id,staticClass:"ventanitaNodo",attrs:{usuarioResponsableProyecto:o.usuarioResponsableProyecto,esteObjetivo:o.objetivoEnVentanita,idProyecto:o.idProyecto}}):o._e(),o.idNodoPaVentanita&&o.trabajoEnVentanita?i("ventanita-trabajo",{key:"ventanita"+o.trabajoEnVentanita.id,staticClass:"ventanitaNodo",attrs:{usuarioResponsableProyecto:o.usuarioResponsableProyecto,esteTrabajo:o.trabajoEnVentanita,idProyecto:o.idProyecto}}):o._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuCx,expression:"mostrandoMenuCx"}],style:o.posMenuCx,attrs:{id:"menuCx"}},[i("div",{staticClass:"itemMenuCx",on:{click:o.crearTrabajoAqui}},[o._v("Crear trabajo aquí")]),i("div",{staticClass:"itemMenuCx",on:{click:o.crearObjetivoAqui}},[o._v(" Crear objetivo aquí ")])])],1)},It=[],Tt=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"canvasDiagramaFlujo"}},[i("canvas",{ref:"canvasTodosVinculos",staticClass:"canvas",style:[o.offsetCanvasTodosVinculos],attrs:{id:"canvasTodosVinculos"}}),i("canvas",{ref:"canvasVinculosSeleccionado",staticClass:"canvas",style:[o.sizeCanvasTodosVinculos],attrs:{id:"canvasVinculosSeleccionado"}})])},kt=[],Ot={name:"CanvasDiagramaFlujo",props:{todosNodos:Array,factorZoom:Number,nodoSeleccionado:{type:Object,default:function(){return{}}}},data:function(){return{sizeCanvasTodosVinculos:{width:0,height:0}}},methods:{crearImagenTodosVinculos:function(){var o=this;if(console.log("Creando imagen todos vínculos"),!(this.todosNodos.length<=1)){var e=this.$refs.canvasTodosVinculos.getContext("2d"),i={x:this.esquinasCanvasTodosVinculos.x1,y:this.esquinasCanvasTodosVinculos.y1};e.canvas.width=this.esquinasCanvasTodosVinculos.x2-this.esquinasCanvasTodosVinculos.x1,e.canvas.height=this.esquinasCanvasTodosVinculos.y2-this.esquinasCanvasTodosVinculos.y1,e.lineWidth=1,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.strokeStyle="#b3b3b3";var n,a=Object(lo["a"])(this.todosNodos);try{for(a.s();!(n=a.n()).done;){var t,s=n.value,r=Object(lo["a"])(s.vinculos);try{var c=function(){var n=t.value;if(!o.todosNodos.some((function(o){return o.id==n.idRef})))return"continue";o.dibujarLineaEntreNodos(o.todosNodos.find((function(o){return o.id==n.idRef})),s,e,i)};for(r.s();!(t=r.n()).done;)c()}catch(d){r.e(d)}finally{r.f()}}}catch(d){a.e(d)}finally{a.f()}e.stroke()}},crearImagenVinculosSeleccionado:function(){var o=this;if(this.lapiz=this.$refs.canvasVinculosSeleccionado.getContext("2d"),this.lapiz.clearRect(0,0,this.lapiz.canvas.width,this.lapiz.canvas.height),this.todosNodos.some((function(e){return e.id==o.nodoSeleccionado.id}))){this.lapiz.beginPath(),this.lapiz.lineWidth=2,this.lapiz.strokeStyle="#008000";var e,i=Object(lo["a"])(this.nodoSeleccionado.vinculos);try{var n=function(){var i=e.value;if(!o.todosNodos.some((function(o){return o.id==i.idRef})))return console.log("ALERTA. Vinculo a ".concat(i.idRef," huerfano")),"continue";var n=o.todosNodos.find((function(o){return o.id==i.idRef}));o.dibujarLineaEntreNodos(n,o.nodoSeleccionado)};for(i.s();!(e=i.n()).done;)n()}catch(a){i.e(a)}finally{i.f()}this.lapiz.stroke()}},dibujarLineaEntreNodos:function(o,e,i,n){var a={x:o.coords.x*this.factorZoom-n.x,y:o.coords.y*this.factorZoom-n.y},t={x:e.coords.x*this.factorZoom-n.x,y:e.coords.y*this.factorZoom-n.y},s=t.y-a.y,r=Math.round(.5*s),c={x:a.x,y:a.y+r},d={x:t.x,y:t.y-r};i.moveTo(a.x,a.y),i.lineTo(c.x,c.y),i.lineTo(d.x,d.y),i.lineTo(t.x,t.y)}},computed:{esquinasCanvasTodosVinculos:function(){var o=this.todosNodos;if(o.length<=1)return{x1:0,y1:0,x2:0,y2:0};var e={};return e.top=o.reduce((function(o,e){return e.coords.y>o?e.coords.y:o}),0),e.bot=o.reduce((function(o,e){return e.coords.y<o?e.coords.y:o}),0),e.left=o.reduce((function(o,e){return e.coords.x<o?e.coords.x:o}),0),e.right=o.reduce((function(o,e){return e.coords.x>o?e.coords.x:o}),0),{x1:e.left*this.factorZoom,y1:e.bot*this.factorZoom,x2:(e.right+2)*this.factorZoom,y2:(e.top+2)*this.factorZoom}},offsetCanvasTodosVinculos:function(){return{left:this.esquinasCanvasTodosVinculos.x1+"px",top:this.esquinasCanvasTodosVinculos.y1+"px",width:this.esquinasCanvasTodosVinculos.x2-this.esquinasCanvasTodosVinculos.x1+"px",height:this.esquinasCanvasTodosVinculos.y2-this.esquinasCanvasTodosVinculos.y1+"px"}}},watch:{todosNodos:function(){this.todosNodos.length<1||(this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado())},nodoSeleccionado:function(){this.crearImagenVinculosSeleccionado()},factorZoom:function(){this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()}},mounted:function(){this.montado=!0,this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()}},Mt=Ot,Bt=(i("0d50"),Object(m["a"])(Mt,Tt,kt,!1,null,"b4555e88",null)),Ft=Bt.exports,$t=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoObjetivo",class:{seleccionado:o.seleccionado},style:[o.estiloPosicion,o.estiloZeta,o.estiloSize],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.agarrado=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"bAbrirNodo",attrs:{src:i("666f"),alt:"abrir",title:"Ampliar información"},on:{click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),o.$emit("meAbrieron"))}}}),n("div",{staticClass:"zonaNombre"},[n("div",{attrs:{id:"nombre",draggable:"false"}},[n("img",{staticClass:"iconoObjetivo",class:{iconoCompletado:"cumplido"===o.esteObjetivo.estado},style:{width:Math.round(17*o.factorZoom)+"px"},attrs:{src:i("713c"),alt:"",draggable:"false"}}),o._v(o._s(o.esteObjetivo.nombre)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[null==o.idNodoSeleccionado||o.idNodoSeleccionado==o.esteObjetivo.id||1!=o.usuarioSuperadministrador&&!o.usuarioResponsableProyecto?o._e():[n("div",{staticClass:"seccionMenuCx"},[o._v("El elemento seleccionado...")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearRequerimento(o.idNodoSeleccionado,o.esteObjetivo.id)}}},[o._v(" Requiere este elemento ")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.idNodoSeleccionado,o.esteObjetivo.id)}}},[o._v(" Desconectar ")])]],2)])},Qt=[];function qt(){var o=Object(s["a"])(["\n            mutation(\n              $idObjetivo: ID!\n              $idProyecto: ID!\n              $nuevaPosicion: CoordsInput\n            ) {\n              setPosicionObjetivoProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevaPosicion: $nuevaPosicion\n              ) {\n                id\n                coords{\n                  x\n                  y                  \n                }\n              }\n            }\n          "]);return qt=function(){return o},o}var Ut={name:"NodoObjetivo",props:{esteObjetivo:Object,idProyecto:String,usuarioResponsableProyecto:Boolean,seleccionado:Boolean,idNodoSeleccionado:String,posDummy:Object,menuCx:Boolean,centroVista:Object,factorZoom:Number},data:function(){return{agarrado:!1,arrastrandoNodo:0,umbralArrastreNodo:10,posicion:{x:0,y:0},montado:!1,widthBase:150,heightBase:100}},methods:{arrastrarNodo:function(o){if(this.agarrado&&(!1!==this.usuarioResponsableProyecto||!1!==this.usuarioSuperadministrador)&&(this.arrastrandoNodo=this.arrastrandoNodo+Math.abs(o.movementX)+Math.abs(o.movementY),!(this.arrastrandoNodo<this.umbralArrastreNodo))){var e=this.$parent.$el,i=e.getBoundingClientRect(),n=Math.round((o.clientY-i.top)/this.factorZoom+this.centroVista.y),a=Math.round((o.clientX-i.left)/this.factorZoom+this.centroVista.x),t=25,s=15;a-=a%t,n-=n%s,this.$set(this.posicion,"x",a),this.$set(this.posicion,"y",n)}},guardarPosicion:function(){this.arrastrandoNodo<this.umbralArrastreNodo?this.agarrado=!1:(this.arrastrandoNodo=0,this.agarrado=!1,this.$apollo.mutate({mutation:c()(qt()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id,nuevaPosicion:this.posicion}}).then((function(){console.log("Posición guardada")})).catch((function(o){console.log("Error. E: ".concat(o))})))},crearRequerimento:function(o,e){console.log("Se fijara que ".concat(o," requiere a ").concat(e)),this.$emit("crearRequerimento",{idNodoRequiere:o,idNodoRequerido:e})},eliminarVinculo:function(o,e){console.log("Se fijara que ".concat(o," ya no requiere a ").concat(e)),this.$emit("eliminarVinculo",{idNodoRequiere:o,idNodoRequerido:e})}},computed:{estiloPosicion:function(){return this.montado?{top:(this.posicion.y-this.centroVista.y)*this.factorZoom-this.$el.offsetHeight/2+"px",left:(this.posicion.x-this.centroVista.x)*this.factorZoom-this.$el.offsetWidth/2+"px"}:{top:"0px",left:"0px"}},estiloZeta:function(){var o=0;return(this.arrastrandoNodo>this.umbralArrastreNodo||this.seleccionado)&&(o=100),this.menuCx&&(o=200),{zIndex:o}},estiloSize:function(){return{width:Math.round(this.widthBase*this.factorZoom)+"px",height:Math.round(this.heightBase*this.factorZoom)+"px",fontSize:Math.round(14*this.factorZoom)+"px",padding:Math.round(5*this.factorZoom)+"px"}}},watch:{esteObjetivo:function(){console.log("Seteando posicion from network"),this.$set(this.posicion,"x",this.esteObjetivo.coords.x),this.$set(this.posicion,"y",this.esteObjetivo.coords.y)}},mounted:function(){this.montado=!0,this.$set(this.posicion,"x",this.esteObjetivo.coords.x),this.$set(this.posicion,"y",this.esteObjetivo.coords.y)}},Vt=Ut,Lt=(i("b81f"),Object(m["a"])(Vt,$t,Qt,!1,null,"ba6a15a8",null)),Gt=Lt.exports,Kt=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoTrabajo",class:{seleccionado:o.seleccionado},style:[o.estiloPosicion,o.estiloZeta,o.estiloSize],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.agarrado=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"bAbrirNodo",attrs:{src:i("666f"),alt:"abrir",title:"Ampliar información"},on:{click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),o.$emit("meAbrieron"))}}}),n("div",{staticClass:"zonaNombre"},[n("div",{attrs:{id:"nombre"}},[n("img",{staticClass:"iconoTrabajo",class:{iconoCompletado:"completado"===o.esteTrabajo.estadoDesarrollo},style:{width:Math.round(17*o.factorZoom)+"px"},attrs:{src:i("e463"),alt:"",draggable:"false"}}),o._v(" "+o._s(o.esteTrabajo.nombre)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[null==o.idNodoSeleccionado||o.idNodoSeleccionado==o.esteTrabajo.id||1!=o.usuarioSuperadministrador&&!o.usuarioResponsableProyecto?o._e():[n("div",{staticClass:"seccionMenuCx"},[o._v("El elemento seleccionado...")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearRequerimento(o.idNodoSeleccionado,o.esteTrabajo.id)}}},[o._v(" Requiere este elemento ")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.idNodoSeleccionado,o.esteTrabajo.id)}}},[o._v(" Desconectar ")])]],2)])},Zt=[];function zt(){var o=Object(s["a"])(["\n            mutation(\n              $idTrabajo: ID!\n              $idProyecto: ID!\n              $nuevaPosicion: CoordsInput\n            ) {\n              setPosicionTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevaPosicion: $nuevaPosicion\n              ) {\n                id\n                coords {                  \n                  x\n                  y                  \n                }\n              }\n            }\n          "]);return zt=function(){return o},o}var Jt={name:"NodoTrabajo",data:function(){return{agarrado:!1,arrastrandoNodo:0,umbralArrastreNodo:10,posicion:{x:0,y:0},montado:!1,widthBase:150,heightBase:100}},props:{esteTrabajo:Object,idProyecto:String,idNodoSeleccionado:String,usuarioResponsableProyecto:Boolean,seleccionado:Boolean,posDummy:Object,menuCx:Boolean,centroVista:Object,factorZoom:Number},methods:{arrastrarNodo:function(o){if(this.agarrado&&(!1!==this.usuarioResponsableProyecto||!1!==this.usuarioSuperadministrador)&&(this.arrastrandoNodo=this.arrastrandoNodo+Math.abs(o.movementX)+Math.abs(o.movementY),!(this.arrastrandoNodo<this.umbralArrastreNodo))){var e=this.$parent.$el,i=e.getBoundingClientRect(),n=Math.round((o.clientY-i.top)/this.factorZoom+this.centroVista.y),a=Math.round((o.clientX-i.left)/this.factorZoom+this.centroVista.x),t=25,s=15;a-=a%t,n-=n%s,this.$set(this.posicion,"x",a),this.$set(this.posicion,"y",n)}},guardarPosicion:function(){var o=this;this.arrastrandoNodo<this.umbralArrastreNodo?this.agarrado=!1:(this.arrastrandoNodo=0,this.agarrado=!1,this.$apollo.mutate({mutation:c()(zt()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id,nuevaPosicion:this.posicion}}).then((function(){console.log("Posición guardada"),o.emitirMiInfo()})).catch((function(o){console.log("Error. E: ".concat(o))})))},emitirMiInfo:function(){var o={id:this.esteTrabajo.id,posicion:this.esteTrabajo.coords,vinculos:this.esteTrabajo.vinculos};this.$emit("miInfo",o)},crearRequerimento:function(o,e){console.log("Se fijara que ".concat(o," requiere a ").concat(e)),this.$emit("crearRequerimento",{idNodoRequiere:o,idNodoRequerido:e})},eliminarVinculo:function(o,e){console.log("Se fijara que ".concat(o," ya no requiere a ").concat(e)),this.$emit("eliminarVinculo",{idNodoRequiere:o,idNodoRequerido:e})}},computed:{estiloPosicion:function(){return this.montado?{top:(this.posicion.y-this.centroVista.y)*this.factorZoom-this.$el.offsetHeight/2+"px",left:(this.posicion.x-this.centroVista.x)*this.factorZoom-this.$el.offsetWidth/2+"px"}:{top:"0px",left:"0px"}},estiloZeta:function(){var o=0;return 1!=this.arrastrandoNodo&&1!=this.seleccionado||(o=100),this.menuCx&&(o=200),{zIndex:o}},estiloSize:function(){return{width:Math.round(this.widthBase*this.factorZoom)+"px",height:Math.round(this.heightBase*this.factorZoom)+"px",fontSize:Math.round(14*this.factorZoom)+"px",padding:Math.round(5*this.factorZoom)+"px"}}},watch:{esteTrabajo:function(){this.$set(this.posicion,"x",this.esteTrabajo.coords.x),this.$set(this.posicion,"y",this.esteTrabajo.coords.y)}},mounted:function(){this.montado=!0,this.$set(this.posicion,"x",this.esteTrabajo.coords.x),this.$set(this.posicion,"y",this.esteTrabajo.coords.y)}},_t=Jt,Ht=(i("1414"),Object(m["a"])(_t,Kt,Zt,!1,null,"81dfd8d2",null)),Yt=Ht.exports,Xt=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanitaObjetivo",class:{seleccionado:o.seleccionado}},[n("div",{staticClass:"zonaPrimerNivel",class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[n("div",{attrs:{id:"nombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"elPropioNombre"}},[o._v(" "+o._s(o.esteObjetivo.nombre)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),o.usuarioResponsableProyecto?n("div",{staticClass:"controlesLateralesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})]):o._e()]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),n("img",{class:{iconoCompletado:"cumplido"===o.esteObjetivo.estado,deshabilitado:o.togglingEstado},attrs:{src:i("713c"),alt:"",id:"imagenIcono"},on:{click:function(e){o.usuarioResponsableProyecto&&o.toggleEstadoObjetivo()}}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona"},[n("span",{staticClass:"nombreZona"},[o._v("Descripcion")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteObjetivo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{attrs:{id:"controlesObjetivo"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto||o.usuarioSuperadministrador,expression:"usuarioResponsableProyecto || usuarioSuperadministrador"}],staticClass:"controlesObjetivo hoverGris bEliminar",on:{click:o.eliminarse}},[o._v(" Eliminar ")])])])},Wt=[];function os(){var o=Object(s["a"])(["\n          mutation($idProyecto:ID!, $idObjetivo:ID!, $nuevoEstado:String!){\n            setEstadoObjetivoProyecto(idProyecto:$idProyecto, idObjetivo:$idObjetivo, nuevoEstado:$nuevoEstado){\n              id\n              estado\n            }\n          }\n        "]);return os=function(){return o},o}function es(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idObjetivo: ID!) {\n              eliminarObjetivoDeProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n              )\n            }\n          "]);return es=function(){return o},o}function is(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionObjetivoProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return is=function(){return o},o}function ns(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevoNombre: String!\n            ) {\n              editarNombreObjetivoProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return ns=function(){return o},o}var as=/[^ a-zA-ZÀ-ž0-9_():.,-]/,ts=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,ss={name:"VentanitaObjetivo",components:{Loading:Mo},data:function(){return{deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,togglingEstado:!1}},props:{idProyecto:String,esteObjetivo:Object,seleccionado:Boolean,usuarioResponsableProyecto:Boolean},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!as.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return this.nuevoDescripcion.length<1||!!ts.test(this.nuevoDescripcion)}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteObjetivo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(ns()),variables:{idObjetivo:this.esteObjetivo.id,idProyecto:this.idProyecto,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteObjetivo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(is()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteObjetivo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteObjetivo.descripcion},eliminarse:function(){var o=this;console.log("Objetivo eliminandose"),confirm("¿Seguro de eliminar este objetivo?")&&(this.deshabilitado=!0,this.$apollo.mutate({mutation:c()(es()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id}}).then((function(e){var i=e.data.eliminarObjetivoDeProyecto;o.deshabilitado=!1,console.log("Resultado: ".concat(i)),o.$emit("meElimine")})).catch((function(e){o.deshabilitado=!1,console.log("Error. E: ".concat(e))})))},toggleEstadoObjetivo:function(){var o=this,e="noCumplido";"noCumplido"===this.esteObjetivo.estado&&(e="cumplido"),this.togglingEstado=!0,this.$apollo.mutate({mutation:c()(os()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id,nuevoEstado:e}}).then((function(){o.togglingEstado=!1,console.log("toggled")})).catch((function(e){o.togglingEstado=!1,console.log("Error: E:".concat(e))}))}}},rs=ss,cs=(i("aaf2"),Object(m["a"])(rs,Xt,Wt,!1,null,"0d4091b8",null)),ds=cs.exports,us=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanitaTrabajo"},[n("img",{class:{iconoCompletado:"completado"===o.esteTrabajo.estadoDesarrollo,deshabilitado:o.togglingEstado},attrs:{src:i("e463"),alt:"",id:"imagenIcono"},on:{click:function(e){o.usuarioResponsableProyecto&&o.toggleEstadoTrabajo()}}}),n("div",{class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[n("div",{attrs:{id:"nombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"elPropioNombre"}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),o.usuarioResponsableProyecto?n("div",{staticClass:"controlesLateralesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})]):o._e()]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona"},[n("span",{staticClass:"nombreZona"},[o._v("Descripcion")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaNodosConocimiento"}},[n("div",{staticClass:"nombreZona"},[o._v("Nodos de conocimiento involucrados")]),n("div",{staticClass:"controlesZona",attrs:{id:"controlesNodosConocimiento"}},[1==o.usuarioResponsableProyecto?n("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Añadir ")]):o._e(),1==o.usuarioResponsableProyecto&&null!=o.idNodoSeleccionado&&o.esteTrabajo.nodosConocimiento.some((function(e){return e.id==o.idNodoSeleccionado}))?n("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Remover ")]):o._e()]),n("div",{attrs:{id:"listaNodosConocimiento"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idNodoSeleccionado=null}}},[o._l(o.esteTrabajo.nodosConocimiento,(function(e){return n("icono-nodo-conocimiento",{key:e.id,attrs:{esteNodo:e},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id}}})})),n("buscador-nodos-conocimiento")],2)])])},ls=[];function vs(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoEstado: String!) {\n              setEstadoTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoEstado: $nuevoEstado\n              ) {\n                id\n                estadoDesarrollo\n              }\n            }\n          "]);return vs=function(){return o},o}function ps(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!) {\n              eliminarTrabajoDeProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n              )\n            }\n          "]);return ps=function(){return o},o}function ms(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return ms=function(){return o},o}function hs(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return hs=function(){return o},o}function As(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevoKeywords: String!\n            ) {\n              editarKeywordsTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoKeywords: $nuevoKeywords\n              ) {\n                id\n                keywords\n              }\n            }\n          "]);return As=function(){return o},o}function bs(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return bs=function(){return o},o}function fs(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoNombre: String!) {\n              editarNombreTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return fs=function(){return o},o}var gs=/[^ a-zA-ZÀ-ž0-9_():.,-]/,Ns=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,ys=/[^ a-zA-Zñ,]/,Cs={name:"VentanitaTrabajo",components:{BuscadorNodosConocimiento:qo,Loading:Mo,IconoPersonaAutonomo:Ki},data:function(){return{idNodoSeleccionado:null,deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,nuevoKeywords:"palabras clave",editandoKeywords:!1,enviandoNuevoKeywords:!1,togglingEstado:!1}},props:{idProyecto:String,seleccionado:Boolean,usuarioResponsableProyecto:{type:Boolean,defaul:!1},idTrabajo:String,esteTrabajo:Object},computed:{usuarioResponsableTrabajo:function(){return this.esteTrabajo.responsables.includes(this.usuario.id)},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!gs.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return this.nuevoDescripcion.length<1||!!Ns.test(this.nuevoDescripcion)},nuevoKeywordsIlegal:function(){return this.nuevoKeywords.length<1||!!ys.test(this.nuevoKeywords)},infoAsParent:function(){return{id:this.esteTrabajo.id,tipo:"trabajo",nombre:this.esteTrabajo.nombre}}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteTrabajo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(fs()),variables:{idTrabajo:this.esteTrabajo.id,idProyecto:this.idProyecto,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteTrabajo.descripcion?(console.log("guardando nuevo descripcion en proyecto con id ".concat(this.idProyecto)),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(bs()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},guardarNuevoKeywords:function(){var o=this;this.nuevoKeywordsIlegal?console.log("No enviado"):this.nuevoKeywords!=this.esteTrabajo.keywords?(console.log("guardando nuevo keywords"),this.enviandoNuevoKeywords=!0,this.$apollo.mutate({mutation:c()(As()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id,nuevoKeywords:this.nuevoKeywords}}).then((function(){o.enviandoNuevoKeywords=!1,o.editandoKeywords=!1})).catch((function(e){o.enviandoNuevoKeywords=!1,console.log("Error. E :".concat(e))}))):this.editandoKeywords=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteTrabajo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteTrabajo.descripcion},toggleEditandoKeywords:function(){this.$refs.inputNuevoKeywords.style.height=this.$refs.keywords.offsetHeight+"px",this.editandoKeywords=!this.editandoKeywords,this.nuevoKeywords=this.esteTrabajo.keywords},asumirComoResponsable:function(){console.log("enviando id ".concat(this.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id," en el proyecto con id ").concat(this.idProyecto)),this.$apollo.mutate({mutation:c()(hs()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},abandonarListaResponsables:function(){console.log("Abandonando este trabajo"),this.$apollo.mutate({mutation:c()(ms()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},eliminarse:function(){var o=this;console.log("Trabajo eliminandose"),confirm("¿Seguro de eliminar este trabajo?")&&(this.deshabilitado=!0,this.$apollo.mutate({mutation:c()(ps()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id}}).then((function(e){var i=e.data.eliminarTrabajoDeProyecto;o.deshabilitado=!1,console.log("Resultado: ".concat(i)),o.$emit("meElimine")})).catch((function(e){o.deshabilitado=!1,console.log("Error. E: ".concat(e))})))},navegarAlTrabajo:function(){this.$router.push("/trabajo/"+this.idTrabajo)},toggleEstadoTrabajo:function(){var o=this,e="noCompletado";"noCompletado"===this.esteTrabajo.estadoDesarrollo&&(e="completado"),this.togglingEstado=!0,this.$apollo.mutate({mutation:c()(vs()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id,nuevoEstado:e}}).then((function(){o.togglingEstado=!1,console.log("toggled")})).catch((function(e){o.togglingEstado=!1,console.log("Error: E:".concat(e))}))}}},Es=Cs,ws=(i("ef69"),Object(m["a"])(Es,us,ls,!1,null,"f6f3cf26",null)),Ds=ws.exports;function js(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idNodoRequiere: ID!\n              $idNodoRequerido: ID!\n              $tipoNodoRequiere: String!\n              $tipoNodoRequerido: String!\n            ) {\n              desvincularNodosProyecto(\n                idProyecto: $idProyecto\n                idNodoRequiere: $idNodoRequiere\n                idNodoRequerido: $idNodoRequerido\n                tipoNodoRequiere: $tipoNodoRequiere\n                tipoNodoRequerido: $tipoNodoRequerido\n              ) {\n                nodo {\n                  ... on ObjetivoDeProyecto {\n                    id\n                    vinculos {\n                      idRef\n                      tipoRef\n                      tipo\n                    }\n                  }\n                  ... on TrabajoDeProyecto {\n                    id\n                    vinculos {\n                      idRef\n                      tipoRef\n                      tipo\n                    }\n                  }\n                }\n              }\n            }\n          "]);return js=function(){return o},o}function xs(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idNodoRequiere: ID!\n              $idNodoRequerido: ID!\n              $tipoNodoRequiere: String!\n              $tipoNodoRequerido: String!\n            ) {\n              crearRequerimentoEntreNodosProyecto(\n                idProyecto: $idProyecto\n                idNodoRequiere: $idNodoRequiere\n                idNodoRequerido: $idNodoRequerido\n                tipoNodoRequiere: $tipoNodoRequiere\n                tipoNodoRequerido: $tipoNodoRequerido\n              ) {\n                nodo {\n                  ... on ObjetivoDeProyecto {\n                    id\n                    vinculos {\n                      idRef\n                      tipoRef\n                      tipo\n                    }\n                  }\n                  ... on TrabajoDeProyecto {\n                    id\n                    vinculos {\n                      idRef\n                      tipoRef\n                      tipo\n                    }\n                  }\n                }\n              }\n            }\n          "]);return xs=function(){return o},o}var Ps={components:{NodoObjetivo:Gt,NodoTrabajo:Yt,CanvasDiagramaFlujo:Ft,VentanitaObjetivo:ds,VentanitaTrabajo:Ds},name:"DiagramaFlujo",props:{trabajos:Array,objetivos:Array,idProyecto:String,usuarioResponsableProyecto:Boolean,activo:Boolean,deshabilitar:{type:Boolean,default:!1}},data:function(){return{posicionMenuCx:{x:0,y:0},mostrandoMenuCx:!1,idNodoSeleccionado:null,idNodoPaVentanita:null,tipoNodoSeleccionado:null,posDummy:{x:300,y:300},infoTrabajos:[],idNodoClickDerecho:null,centroVistaDecimal:{x:0,y:0},hovered:!1,zoom:100,maxZoom:200,minZoom:50}},computed:{posMenuCx:function(){return{top:this.posicionMenuCx.y+"px",left:this.posicionMenuCx.x+"px"}},opacidad:function(){return{opacity:this.activo?1:.4}},infoObjetivos:function(){return this.objetivos.map((function(o){return{id:o.id,posicion:o.coords,vinculos:o.vinculos}}))},posicionCanvasFlechas:function(){return{top:Math.round(-this.centroVista.y*this.factorZoom)+"px",left:Math.round(-this.centroVista.x*this.factorZoom)+"px"}},centroVista:function(){return{x:Math.round(this.centroVistaDecimal.x),y:Math.round(this.centroVistaDecimal.y)}},factorZoom:function(){return Number((this.zoom/100).toFixed(2))},todosNodos:function(){return this.objetivos.concat(this.trabajos)},objetivoEnVentanita:function(){var o=this;return this.idNodoPaVentanita?this.objetivos.find((function(e){return e.id==o.idNodoPaVentanita})):null},trabajoEnVentanita:function(){var o=this;return this.idNodoPaVentanita?this.trabajos.find((function(e){return e.id==o.idNodoPaVentanita})):null},nodoSeleccionado:function(){var o=this;return this.todosNodos.find((function(e){return e.id===o.idNodoSeleccionado}))}},methods:{abrirMenuCx:function(o){var e=this.$el,i=e.getBoundingClientRect();this.$set(this.posicionMenuCx,"x",Math.round(o.clientX-i.left+e.scrollLeft)),this.$set(this.posicionMenuCx,"y",Math.round(o.clientY-i.top+e.scrollTop)),this.mostrandoMenuCx=!0},crearTrabajoAqui:function(o){var e={x:0,y:0},i=this.$el,n=i.getBoundingClientRect();e.x=Math.round((o.clientX-n.left)/this.factorZoom+this.centroVista.x),e.y=Math.round((o.clientY-n.top)/this.factorZoom+this.centroVista.y),this.mostrandoMenuCx=!1,this.$emit("crearTrabajoEnPosicion",e)},crearObjetivoAqui:function(o){var e={x:0,y:0},i=this.$el,n=i.getBoundingClientRect();e.x=Math.round(o.clientX+this.centroVista.x-n.left),e.y=Math.round(o.clientY+this.centroVista.y-n.top),this.mostrandoMenuCx=!1,this.$emit("crearObjetivoEnPosicion",e)},actualizarInfoTrabajos:function(o,e){var i=this.infoTrabajos.findIndex((function(e){return e.id===o}));i>-1&&this.infoTrabajos.splice(i,1),this.infoTrabajos.push(e)},crearRequerimento:function(o,e){var i=e.idNodoRequiere,n=e.idNodoRequerido;console.log("Preparando mutación para setear que ".concat(i," requiere a ").concat(n," de tipo ").concat(o));var a=this.tipoNodoSeleccionado;this.$apollo.mutate({mutation:c()(xs()),variables:{idProyecto:this.idProyecto,idNodoRequiere:i,idNodoRequerido:n,tipoNodoRequiere:a,tipoNodoRequerido:o}}).then((function(o){var e=o.data.crearRequerimentoEntreNodosProyecto;console.log("Requerimento creado: ".concat(JSON.stringify(e)))})).catch((function(o){console.log("Error",o.message)}))},eliminarVinculo:function(o,e){var i=e.idNodoRequiere,n=e.idNodoRequerido;console.log("Preparando mutación para setear que ".concat(i," ya no está vinculado a ").concat(n," de tipo ").concat(o));var a=this.tipoNodoSeleccionado;this.$apollo.mutate({mutation:c()(js()),variables:{idProyecto:this.idProyecto,idNodoRequiere:i,idNodoRequerido:n,tipoNodoRequiere:a,tipoNodoRequerido:o}}).then((function(){console.log("Vinculo eliminado")})).catch((function(o){console.log("Error",o.message)}))},desplazarVista:function(o,e){this.$set(this.centroVistaDecimal,"x",this.centroVistaDecimal.x-o),this.$set(this.centroVistaDecimal,"y",this.centroVistaDecimal.y-e)},panVista:function(o){this.panningVista&&(this.desplazarVista(o.movementX/this.factorZoom,o.movementY/this.factorZoom),o.preventDefault(),this.vistaPanned=!0)},mouseUpFondo:function(){this.vistaPanned||(this.idNodoSeleccionado=null,this.idNodoPaVentanita=null,this.mostrandoMenuCx=!1,this.idNodoClickDerecho=null),this.vistaPanned=!1,this.panningVista=!1},zoomVista:function(o){if(this.hovered&&o.ctrlKey){o.preventDefault();var e=this.$el,i=e.getBoundingClientRect(),n={x:(o.clientX-i.left)/i.width,y:(o.clientY-i.top)/i.height},a={x:Math.round((o.clientX-i.left)/this.factorZoom)+this.centroVista.x,y:Math.round((o.clientY-i.top)/this.factorZoom)+this.centroVista.y},t=.2,s=this.zoom-Math.round(o.deltaY*t);s<this.minZoom?this.zoom=this.minZoom:s>this.maxZoom?this.zoom=this.maxZoom:this.zoom=s,this.$set(this.centroVistaDecimal,"x",a.x-i.width/this.factorZoom*n.x),this.$set(this.centroVistaDecimal,"y",a.y-i.height/this.factorZoom*n.y)}}},mount:function(){this.$set(this.sizeDiagrama,"w",this.$$parent.$refs.zonaDiagramaFlujo.offsetWidth),this.$set(this.sizeDiagrama,"h",this.$$parent.$refs.zonaDiagramaFlujo.offsetHeight)},created:function(){window.addEventListener("wheel",this.zoomVista,{passive:!1})},removed:function(){window.removeEventListener("wheel",this.zoomVista)}},Ss=Ps,Rs=(i("a09f"),Object(m["a"])(Ss,Rt,It,!1,null,"e9d97e16",null)),Is=Rs.exports,Ts=i("b012"),ks=i.n(Ts);function Os(){var o=Object(s["a"])(["\n            mutation (\n              $idProyecto: ID!\n              $nuevoCantidadResponsablesSolicitados: Int!\n            ) {\n              setResponsablesSolicitadosProyecto(\n                idProyecto: $idProyecto\n                nuevoCantidadResponsablesSolicitados: $nuevoCantidadResponsablesSolicitados\n              ) {\n                id\n                responsablesSolicitados\n              }\n            }\n          "]);return Os=function(){return o},o}function Ms(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $posicion: CoordsInput) {\n              crearObjetivoEnProyecto(\n                idProyecto: $idProyecto\n                posicion: $posicion\n              ) {\n                ...fragObjetivoProyecto\n              }\n            }\n            ","\n          "]);return Ms=function(){return o},o}function Bs(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $posicion: CoordsInput) {\n              crearTrabajoEnProyecto(\n                idProyecto: $idProyecto\n                posicion: $posicion\n              ) {\n                ...fragTrabajoProyecto\n              }\n            }\n            ","\n          "]);return Bs=function(){return o},o}function Fs(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              removeParticipanteProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                participantes\n              }\n            }\n          "]);return Fs=function(){return o},o}function $s(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              addParticipanteProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                participantes\n              }\n            }\n          "]);return $s=function(){return o},o}function Qs(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Qs=function(){return o},o}function qs(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              addPosibleResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                posiblesResponsables\n              }\n            }\n          "]);return qs=function(){return o},o}function Us(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                responsablesSolicitados\n              }\n            }\n          "]);return Us=function(){return o},o}function Vs(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              removeResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Vs=function(){return o},o}function Ls(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionProyecto(\n                idProyecto: $idProyecto\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return Ls=function(){return o},o}function Gs(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $nuevoNombre: String!) {\n              editarNombreProyecto(\n                idProyecto: $idProyecto\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Gs=function(){return o},o}function Ks(){var o=Object(s["a"])(["\n  query ($idProyecto: ID!) {\n    proyecto(idProyecto: $idProyecto) {\n      ...fragProyecto\n    }\n  }\n  ","\n"]);return Ks=function(){return o},o}var Zs=c()(Ks(),Oi),zs=/[^ a-zA-ZÀ-ž0-9_():.,-]/,Js=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,_s={components:{Loading:Mo,Foro:Vn,IconoPersonaAutonomo:Ki,DiagramaFlujo:Is,Calendario:Ma},name:"proyecto",apollo:{esteProyecto:{query:Zs,variables:function(){return{idProyecto:this.$route.params.idProyecto}},update:function(o){return this.loading=!1,this.responsablesSolicitados=o.proyecto.responsablesSolicitados,o.proyecto},fetchPolicy:"network-only"}},data:function(){return{loading:!0,esteProyecto:{responsables:[],posiblesResponsables:[],participantes:[],trabajos:[],objetivos:[]},responsablesSolicitados:0,idResponsableSeleccionado:null,idParticipanteSeleccionado:null,responsableSeleccionadoEstaAceptado:!1,creandoTrabajo:!1,creandoObjetivo:!1,idTrabajoSeleccionado:null,idObjetivoSeleccionado:null,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,enviandoQueryResponsables:!1,enviandoQueryBienesServicios:!1,enviandoQueryParticipantes:!1,enviandoQueryEventos:!1,idNodoAbierto:null,mostrandoDescripcion:!0,mostrandoResponsables:!0,mostrandoParticipantes:!0,mostrandoEventos:!0,mostrandoDiagramaFlujo:!1,mostrandoForo:!0,mostrandoBienesServicios:!1,administrandoBienesServicios:!1,versionCalendario:0}},computed:{usuarioResponsableProyecto:function(){return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.includes(this.$store.state.usuario.id)},usuarioParticipanteProyecto:function(){return!!this.esteProyecto.participantes&&!!this.esteProyecto.participantes.includes(this.$store.state.usuario.id)},usuarioPosibleResponsableProyecto:function(){return!!this.esteProyecto.posiblesResponsables&&!!this.esteProyecto.posiblesResponsables.includes(this.usuario.id)},permisosEdicion:function(){return!(!this.usuarioResponsableProyecto&&"superadministrador"!=this.$store.state.usuario.permisos)},nuevoNombreIlegal:function(){return!this.nuevoNombre||this.nuevoNombre.length<1||!!zs.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!Js.test(this.nuevoDescripcion)},infoAsParent:function(){return{id:this.esteProyecto.id,tipo:"proyecto",nombre:this.esteProyecto.nombre}},realizandoOperacionDiagrama:function(){return this.creandoTrabajo||this.creandoObjetivo}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteProyecto.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(Gs()),variables:{idProyecto:this.esteProyecto.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteProyecto.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(Ls()),variables:{idProyecto:this.esteProyecto.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteProyecto.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteProyecto.descripcion},abandonarListaResponsables:function(){var o=this;console.log("Abandonando la responsabilidad en este proyecto"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Vs()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},aceptarResponsable:function(o){var e=this;console.log("aceptando como responsable al usuario ".concat(o)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Us()),variables:{idProyecto:this.esteProyecto.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1,e.responsableSeleccionadoEstaAceptado=!0,e.versionCalendario++})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))},entrarListaPosiblesResponsables:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles responsables del proyecto con id ".concat(this.esteProyecto.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(qs()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},asumirComoResponsable:function(){var o=this;console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del proyecto con id ").concat(this.esteProyecto.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Qs()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},entrarListaParticipantes:function(){var o=this;console.log("Enviando peticion de entrar a la lista de participantes del proyecto con id ".concat(this.esteProyecto.id)),this.enviandoQueryParticipantes=!0,this.$apollo.mutate({mutation:c()($s()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryParticipantes=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryParticipantes=!1,console.log("error: "+e)}))},abandonarListaParticipantes:function(){var o=this;console.log("Abandonando la participación en este proyecto"),this.enviandoQueryParticipantes=!0,this.$apollo.mutate({mutation:c()(Fs()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryParticipantes=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryParticipantes=!1,console.log("error: "+e)}))},crearNuevoTrabajo:function(o){var e=this;console.log("enviando mutacion de crear nuevo trabajo"),this.creandoTrabajo=!0,this.$apollo.mutate({mutation:c()(Bs(),Ti),variables:{idProyecto:this.esteProyecto.id,posicion:o},update:function(o,i){var n=i.data.crearTrabajoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(n)));var a=n;try{var t=o.readQuery({query:Zs,variables:{idProyecto:e.esteProyecto.id}});console.log("Trabajos en cache: ".concat(t.proyecto.trabajos.length));var s=JSON.parse(JSON.stringify(t));s.proyecto.trabajos.push(a),o.writeQuery({query:Zs,variables:{idProyecto:e.esteProyecto.id},data:s}),console.log("cache actualizado"),console.log("Trabajos en cache: ".concat(s.proyecto.trabajos.length))}catch(V){return void console.log("Error actualizando cache: ".concat(V))}}}).then((function(){e.creandoTrabajo=!1})).catch((function(o){e.creandoTrabajo=!1,console.log("error: ".concat(o))}))},crearNuevoObjetivo:function(o){var e=this;console.log("enviando mutacion de crear nuevo objetivo"),this.creandoObjetivo=!0,this.$apollo.mutate({mutation:c()(Ms(),ki),variables:{idProyecto:this.esteProyecto.id,posicion:o},update:function(o,i){var n=i.data.crearObjetivoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(JSON.stringify(n))));var a=n;try{var t=o.readQuery({query:Zs,variables:{idProyecto:e.esteProyecto.id}}),s=JSON.parse(JSON.stringify(t));s.proyecto.objetivos.push(a),o.writeQuery({query:Zs,variables:{idProyecto:e.esteProyecto.id},data:s}),console.log("cache actualizado")}catch(V){return void console.log("Error actualizando cache: ".concat(V))}}}).then((function(o){console.log("respuesta. ".concat(o)),e.creandoObjetivo=!1})).catch((function(o){e.creandoObjetivo=!1,console.log("error: ".concat(o))}))},eliminarTrabajoDeCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Zs,variables:{idProyecto:this.esteProyecto.id}}),n=JSON.parse(JSON.stringify(i)),a=n.proyecto.trabajos.indexOf(o);a>-1?n.proyecto.idsTrabajos.splice(a,1):console.log("El trabajo no existía en el proyecto"),e.writeQuery({query:Zs,variables:{idProyecto:this.esteProyecto.id},data:n})},eliminarObjetivoDeCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Zs,variables:{idProyecto:this.esteProyecto.id}}),n=JSON.parse(JSON.stringify(i)),a=n.proyecto.objetivos.findIndex((function(e){return e.id==o}));a>-1?n.proyecto.objetivos.splice(a,1):console.log("El objetivo no existía en el proyecto"),e.writeQuery({query:Zs,variables:{idProyecto:this.esteProyecto.id},data:n})},navegarAlForo:function(){console.log("Navegando al foro de este proyecto"),this.$refs.zonaForo.scrollIntoView()},abrirNodo:function(o){console.log("Abriendo nodo ".concat(o)),this.idNodoAbierto=o},debounceSetResponsablesSolicitados:ks()((function(){this.setResponsablesSolicitados(parseInt(this.responsablesSolicitados))}),2e3),setResponsablesSolicitados:function(o){o<0&&(o=0),this.$apollo.mutate({mutation:c()(Os()),variables:{idProyecto:this.esteProyecto.id,nuevoCantidadResponsablesSolicitados:o}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))}},watch:{responsablesSolicitados:function(o){o!==this.esteProyecto.responsablesSolicitados&&(console.log("Cambio en responsables solicitados"),this.debounceSetResponsablesSolicitados())}}},Hs=_s,Ys=(i("ea8b"),Object(m["a"])(Hs,Pt,St,!1,null,"73860f95",null)),Xs=Ys.exports,Ws=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"registro"},[i("form",[i("div",{attrs:{id:"zonaDatosPersonales"}},[i("h3",[o._v("Información Personal")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.nombres,expression:"datosRegistro.nombres"}],attrs:{type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.datosRegistro.nombres},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"nombres",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.apellidos,expression:"datosRegistro.apellidos"}],attrs:{type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.datosRegistro.apellidos},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"apellidos",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.fechaNacimiento,expression:"datosRegistro.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.datosRegistro.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"fechaNacimiento",e.target.value)}}}),i("br")]),i("div",{attrs:{id:"zonaContacto"}},[i("h3",[o._v("Datos de contacto")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.email,expression:"datosRegistro.email"}],attrs:{type:"email",placeholder:"Correo electrónico"},domProps:{value:o.datosRegistro.email},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"email",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"numeroTel"}},[o._v("Número telefónico")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.numeroTel,expression:"datosRegistro.numeroTel"}],attrs:{type:"text",name:"numeroTel"},domProps:{value:o.datosRegistro.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"numeroTel",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"lugarResidencia"}},[o._v("Lugar de residencia")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.lugarResidencia,expression:"datosRegistro.lugarResidencia"}],attrs:{type:"text",placeholder:"Lugar de residencia"},domProps:{value:o.datosRegistro.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"lugarResidencia",e.target.value)}}})]),i("div",{attrs:{id:"zonaLogin"}},[i("h3",[o._v("Datos de login")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.username,expression:"datosRegistro.username"}],attrs:{type:"text",placeholder:"nombre de usuario",name:"username"},domProps:{value:o.datosRegistro.username},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"username",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.password,expression:"datosRegistro.password"}],attrs:{type:"password",placeholder:"password",name:"password"},domProps:{value:o.datosRegistro.password},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"password",e.target.value)}}}),i("br")]),i("button",{on:{click:function(e){return e.preventDefault(),o.enviarRegistro(e)}}},[o._v("Enviar")])])])},or=[],er={name:"Registro",data:function(){return{datosRegistro:{nombres:null,apellidos:null,fechaNacimiento:null,email:null,numeroTel:null,lugarResidencia:null,username:null,password:null},camposObligatorios:["nombres","apellidos","username","password"]}},methods:{enviarRegistro:function(){var o=new Object;for(var e in this.datosRegistro)this.datosRegistro[e]?o[e]=this.datosRegistro[e]:console.log("campo ".concat(e," vacio"));this.camposObligatorios.forEach((function(e){o[e]||console.log("Faltaba el campo ".concat(e))}));var i=this,n=Je(o);n.length<1?Ie.a.post(this.serverUrl+"/api/usuarios/registro",{usuario:o}).then((function(o){console.log("respuesta: ".concat(JSON.stringify(o.data))),o.data.registro&&(console.log("Registro ok"),i.$router.push("/login"))})).catch((function(o){console.log("error: ".concat(o))})):console.log("Errores: ".concat(n))},alertar:function(o){console.log(o)}}},ir=er,nr=(i("8ee4"),Object(m["a"])(ir,Ws,or,!1,null,"40e8f437",null)),ar=nr.exports,tr=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"actividadesProfes"},[i("div",{attrs:{id:"layout"}},[i("div",{staticClass:"barraSeleccion",attrs:{id:"barraGrupos"}},[o.usuarioProfe||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")?i("div",{staticClass:"selectoresActividadesByGrupo paraProfes"},[i("div",{staticClass:"categoriaSelectores"},[o._v("Grupos")]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.cargandoGruposEstudiantiles,expression:"cargandoGruposEstudiantiles"}],attrs:{texto:"Cargando grupos..."}}),o._l(o.gruposEstudiantiles,(function(e){return i("div",{key:e.id,staticClass:"selectorGrupoEstudiantil selectorBarra",class:{selectorSeleccionado:o.idGrupoEstudiantilSeleccionado==e.id},on:{click:function(i){o.abrirGrupoEstudiantil(e.id),o.idGrupoEstudiantilSeleccionado=e.id}}},[o._v(" "+o._s(e.nombre)+" "),i("div",{attrs:{id:"alertasGrupo"}})])}))],2):o._e(),o.usuarioLogeado?i("div",{staticClass:"selectoresActividadesByProfe paraEstudiantes"},[i("div",{staticClass:"categoriaSelectores"},[o._v("Profes")]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.cargandoProfes,expression:"cargandoProfes"}],attrs:{texto:"Cargando profes..."}}),o._l(o.profes,(function(e){return i("div",{key:e.id,staticClass:"selectorActividadesProfe selectorBarra",class:{selectorSeleccionado:o.idProfeSeleccionado==e.id},on:{click:function(i){o.abrirActividadesProfe(e.id),o.idProfeSeleccionado=e.id}}},[o._v(" "+o._s(e.nombres)+" ")])}))],2):o._e()]),i("router-view",{key:o.$route.fullPath})],1)])},sr=[];function rr(){var o=Object(s["a"])(["\n        query {\n          usuariosProfe {\n            ...fragResponsables\n          }\n        }\n        ","\n      "]);return rr=function(){return o},o}function cr(){var o=Object(s["a"])(["\n        query {\n          gruposEstudiantiles {\n            id\n            nombre\n          }\n        }\n      "]);return cr=function(){return o},o}var dr={components:{Loading:Mo},name:"ActividadesEstudiantiles",apollo:{gruposEstudiantiles:{query:c()(cr()),update:function(o){var e=o.gruposEstudiantiles;return this.cargandoGruposEstudiantiles=!1,e}},profes:{query:c()(rr(),xi),update:function(o){var e=o.usuariosProfe;return this.cargandoProfes=!1,e}}},data:function(){return{gruposEstudiantiles:[],idGrupoEstudiantilSeleccionado:null,idProfeSeleccionado:null,outletDeshabilitado:!1,cargandoGruposEstudiantiles:!0,cargandoProfes:!0}},computed:{usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")}},methods:{abrirGrupoEstudiantil:function(o){this.$router.push("/actividadesVirtuales2021/grupoEstudiantil/"+o)},abrirActividadesProfe:function(o){this.$router.push("/actividadesVirtuales2021/actividadesProfes/"+o)},navegacionCompleta:function(){console.log("Navacion completada")}}},ur=dr,lr=(i("cb60"),Object(m["a"])(ur,tr,sr,!1,null,"0ef7c45d",null)),vr=lr.exports,pr=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"personas"},[n("div",{attrs:{id:"controlesPersonas"}},[n("div",{staticClass:"controlPersonas"},[o.usuarioSuperadministrador?n("div",{attrs:{id:"zonaPermisos"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.permisoInput,expression:"permisoInput"}],attrs:{type:"text",id:"inputPermiso"},domProps:{value:o.permisoInput},on:{input:function(e){e.target.composing||(o.permisoInput=e.target.value)}}}),n("img",{staticClass:"botonPermisos",attrs:{src:i("9d5e"),alt:"AsignarTodos",title:"Asignar permiso a todos",width:"20px",id:"botonAsignarPermisoTodos"},on:{click:o.asignarPermisoTodos}}),n("img",{staticClass:"botonPermisos",attrs:{src:i("9b5f"),alt:"RetirarTodos",title:"Retirar permiso a todos",width:"20px",id:"botonRetirarPermisoTodos"}})]):o._e()])]),n("div",{attrs:{id:"listaPersonas"},on:{click:function(e){o.idPersonaMenuCx=null}}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingPersonas,expression:"loadingPersonas"}],attrs:{texto:"Cargando lista de personas..."}}),o._l(o.personas,(function(e){return n("icono-persona",{key:e.id,attrs:{estaPersona:e,seleccionado:o.idPersonaSeleccionada==e.id,opcionesMenuCx:o.opcionesEspecialesPersona,menuContextual:o.idPersonaMenuCx==e.id},on:{eliminandoseDeDatabase:function(i){return o.eliminarPersonaDeDatabase(e.id)},reseteandoPass:function(i){return o.resetearPassUsuario(e.id)}},nativeOn:{contextmenu:function(i){i.stopPropagation(),i.preventDefault(),o.idPersonaMenuCx=e.id},click:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:void(o.idPersonaSeleccionada=e.id)}}})}))],2)])},mr=[],hr=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"iconoPersona",class:{yo:o.soyYo,seleccionado:o.seleccionado}},[i("img",{directives:[{name:"show",rawName:"v-show",value:o.fotografiaEnabled,expression:"fotografiaEnabled"}],staticClass:"fotografia",attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaPersona.id,alt:""},on:{load:function(e){o.fotografiaEnabled=!0}}}),i("div",{attrs:{id:"contenedorAlertas"}},[o._t("alertas")],2),i("div",{staticClass:"nombres",class:{nombreSeleccionado:o.seleccionado}},[o._v(" "+o._s(o.estaPersona.nombres)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.menuContextual,expression:"menuContextual"}],attrs:{id:"menuCxPersona"}},[i("div",{staticClass:"botonMenuCx"},[o._v(o._s(o.estaPersona.username))]),i("div",{staticClass:"botonMenuCx",on:{click:o.copiarId}},[o._v(o._s(o.estaPersona.id))]),o.usuarioSuperadministrador?i("div",{staticClass:"botonMenuCx"},[o._v(" "+o._s(o.estaPersona.username)+" ")]):o._e(),i("div",{staticClass:"botonMenuCx"},[o._v(" Permisos "),i("div",{attrs:{id:"listaPermisos"}},o._l(o.permisosPosibles,(function(e,n){return i("div",{key:"permiso"+o.estaPersona.id+n,staticClass:"elementoListaPermisos",class:{permisoActivo:o.estaPersona.permisos&&o.estaPersona.permisos.includes(e)},on:{click:function(i){return i.stopPropagation(),o.togglePermiso(e,o.estaPersona.id)}}},[o._v(" "+o._s(e)+" ")])})),0)]),o._l(o.opcionesMenuCx,(function(e,n){return i("div",{key:n,staticClass:"botonMenuCx",on:{click:function(i){return o.$emit(e.evento)}}},[o._v(" "+o._s(e.textoVisible)+" ")])}))],2)])},Ar=[];function br(){var o=Object(s["a"])(["\n          mutation($permiso:String!, $idUsuario:ID!){\n            togglePermisoUsuario(permiso: $permiso, idUsuario: $idUsuario){\n              id\n              permisos\n            }\n          }\n        "]);return br=function(){return o},o}function fr(){var o=Object(s["a"])(["\n            mutation ($nuevoPermiso: String!, $idUsuario: ID!) {\n              addPermisoUsuario(\n                nuevoPermiso: $nuevoPermiso\n                idUsuario: $idUsuario\n              ) {\n                id\n                permisos\n              }\n            }\n          "]);return fr=function(){return o},o}var gr={name:"IconoPersona",data:function(){return{nuevoPermiso:null,mounted:!1,fotografiaEnabled:!1,permisosPosibles:["usuario","administrador","atlasAdministrador","superadministrador","actividadesEstudiantiles-profe","actividadesEstudiantiles-administrador","actividadesEstudiantiles-guia","visitante","maestraVida","maestraVida-estudiante","maestraVida-profesor","maestraVida-acompañante","comunere"]}},props:{estaPersona:{type:Object,default:function(){return{id:"-1"}}},seleccionado:Boolean,menuContextual:Boolean,opcionesMenuCx:{type:Array}},computed:{soyYo:function(){return!!(this.mounted&&this.estaPersona&&this.$store.state.usuario)&&this.$store.state.usuario.id==this.estaPersona.id}},methods:{addPermisos:function(){console.log("enviando ".concat(this.nuevoPermiso," para el usuario con id ").concat(this.estaPersona.id)),this.$apollo.mutate({mutation:c()(fr()),variables:{nuevoPermiso:this.nuevoPermiso,idUsuario:this.estaPersona.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},fotografiaCargada:function(){console.log("Fotografía cargada")},togglePermiso:function(o,e){this.$apollo.mutate({mutation:c()(br()),variables:{permiso:o,idUsuario:e}})}},mounted:function(){this.mounted=!0},beforeRouteUpdate:function(){console.log("Before update")}},Nr=gr,yr=(i("1979"),Object(m["a"])(Nr,hr,Ar,!1,null,"114cb39a",null)),Cr=yr.exports;function Er(){var o=Object(s["a"])(["\n          mutation($nuevoPermiso: String!){\n            asignarPermisoTodosUsuarios(nuevoPermiso: $nuevoPermiso)\n          }\n        "]);return Er=function(){return o},o}function wr(){var o=Object(s["a"])(["\n            mutation($idUsuario: ID!) {\n              eliminarUsuario(idUsuario: $idUsuario)\n            }\n          "]);return wr=function(){return o},o}function Dr(){var o=Object(s["a"])(["\n  query {\n    todosUsuarios {\n      ...fragResponsables\n    }\n  }\n  ","\n"]);return Dr=function(){return o},o}var jr=/[^ a-zA-Z-]/,xr=c()(Dr(),xi),Pr={name:"Personas",components:{IconoPersona:Cr,Loading:Mo},apollo:{personas:{query:xr,update:function(o){var e=o.todosUsuarios;return this.loadingPersonas=!1,e}}},data:function(){return{personas:[],idPersonaMenuCx:null,idPersonaSeleccionada:null,loadingPersonas:!0,permisoInput:""}},methods:{copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},eliminarPersonaDeDatabase:function(o){confirm("¿Seguro de eliminar a este individuo?")&&console.log("Se eliminara una persona con id ".concat(o," de la base de datos")),this.$apollo.mutate({mutation:c()(wr()),variables:{idUsuario:o},update:function(e,i){var n=i.data.eliminarUsuario;if(console.log("Data: ".concat(n)),n)try{var a=e.readQuery({query:xr,variables:{idUsuario:o}});console.log("cache: ".concat(a));var t=a.todosUsuarios.findIndex((function(e){return e.id==o}));t>-1&&a.todosUsuarios.splice(t,1),console.log("cache: ".concat(a)),e.writeQuery({query:xr,variables:{idUsuario:o},data:a})}catch(V){console.log("Error actualizando cache. E:".concat(V))}}}).then((function(o){console.log("Res: ".concat(JSON.stringify(o))),o.data&&console.log("Usuario eliminado exitosamente")})).catch((function(o){console.log("Error eliminando usuario: E: ".concat(o))}))},resetearPassUsuario:function(o){console.log("Evento de resetear pass de ".concat(o));var e={idUsuario:o};Ie()({method:"post",url:this.serverUrl+"/api/usuarios/resetearPassUsuario",data:e,headers:{Authorization:"Bearer "+this.$store.state.token}}).then((function(o){var e=o.data;console.log("Respuesta: ".concat(e))})).catch((function(o){console.log("Error reseteando password. E:".concat(o))}))},asignarPermisoTodos:function(){var o=this;this.permisoIlegal?console.log("No enviado"):confirm("¿Asignar este permiso a todas las personas?")&&this.$apollo.mutate({mutation:c()(Er()),variables:{nuevoPermiso:this.permisoInput}}).then((function(){alert("Permiso "+o.permisoInput+" asignado para todos los usuarios")}))}},computed:{opcionesEspecialesPersona:function(){var o=[];return this.usuarioSuperadministrador&&(o=o.concat([{textoVisible:"Eliminar de la base de datos",evento:"eliminandoseDeDatabase"},{textoVisible:"resetear contraseña (123456)",evento:"reseteandoPass"}])),o},permisoIlegal:function(){return this.permisoInput.length<1||!!jr.test(this.permisoInput)}}},Sr=Pr,Rr=(i("eeff"),Object(m["a"])(Sr,pr,mr,!1,null,"336d3859",null)),Ir=Rr.exports,Tr=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"grupoEstudiantil",class:{deshabilitada:o.ventanaDeshabilitada}},[i("div",{staticClass:"nombreGrupo"},[o._v(o._s(o.esteGrupo.nombre))]),i("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaEstudiantes"}},[i("div",{staticClass:"nombreZona"},[o._v("Estudiantes")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesEstudiantes"}},[1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("input",{directives:[{name:"model",rawName:"v-model",value:o.idEstudianteAñadir,expression:"idEstudianteAñadir"}],ref:"idEstudianteAñadir",attrs:{type:"text",placeholder:"id de estudiante"},domProps:{value:o.idEstudianteAñadir},on:{input:function(e){e.target.composing||(o.idEstudianteAñadir=e.target.value)}}}):o._e(),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("div",{staticClass:"controlesEstudiantes hoverGris botonesControles",on:{click:o.addEstudianteGrupo}},[o._v(" Añadir estudiante ")]):o._e(),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("div",{staticClass:"controlesEstudiantes hoverGris botonesControles",class:{desactivado:null==o.idEstudianteSeleccionado},on:{click:function(e){return o.removeEstudianteGrupo(o.idEstudianteSeleccionado)}}},[o._v(" Retirar estudiante ")]):o._e()]),i("div",{attrs:{id:"listaEstudiantes"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idEstudianteSeleccionado=null}}},o._l(o.esteGrupo.estudiantes,(function(e){return i("icono-persona",{key:e.id,attrs:{estaPersona:e,seleccionado:o.idEstudianteSeleccionado==e.id},nativeOn:{click:function(i){o.idEstudianteSeleccionado=e.id}},scopedSlots:o._u([{key:"alertas",fn:function(){},proxy:!0}],null,!0)})})),1)]),i("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaActividades"}},[i("div",{staticClass:"nombreZona"},[o._v("Actividades")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesActividades"}},[o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")?i("div",{directives:[{name:"show",rawName:"v-show",value:!o.loadingMisActividadesCreadas,expression:"!loadingMisActividadesCreadas"}],staticClass:"controlesActividades botonesControles hoverGris",on:{click:function(e){o.verTodasActividades=!o.verTodasActividades,o.activarTodasActividades=!0}}},[o._v(" "+o._s(1==o.verTodasActividades?"Ver sólo mis actividades":"Ver todas las actividades")+" ")]):o._e(),o.usuarioProfe?i("div",{directives:[{name:"show",rawName:"v-show",value:!o.loadingMisActividadesCreadas,expression:"!loadingMisActividadesCreadas"}],staticClass:"controlesActividades botonesControles hoverGris",class:{deshabilitado:o.creandoActividad},on:{click:o.crearNuevaActividad}},[o._v(" Crear actividad ")]):o._e(),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingMisActividadesCreadas,expression:"loadingMisActividadesCreadas"}],attrs:{texto:"cargandoActividades..."}})],1),o.loadingMisActividadesCreadas?o._e():i("div",{directives:[{name:"show",rawName:"v-show",value:!o.verTodasActividades,expression:"!verTodasActividades"}],staticClass:"listaActividades",attrs:{id:"listaMisActividades"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idActividadSeleccionada=null}}},[o._l(o.misActividadesCreadas.actividades,(function(e){return i("actividad",{key:e.id,attrs:{idActividad:e.id,seleccionada:o.idActividadSeleccionada==e.id,idGrupo:o.esteGrupo.id,idEstudianteSeleccionadoGrupo:o.idEstudianteSeleccionado},on:{clickTrianguloSeleccion:function(i){o.idActividadSeleccionada==e.id?o.idActividadSeleccionada=null:o.idActividadSeleccionada=e.id},meElimine:o.eliminarActividadCache},nativeOn:{click:function(i){o.idActividadSeleccionada!=e.id&&(o.idActividadSeleccionada=e.id)}}})})),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingMasMisActividades,expression:"loadingMasMisActividades"}],attrs:{texto:"Cargando más actividades"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:o.misActividadesCreadas.hayMas&&!o.loadingMasMisActividades,expression:"misActividadesCreadas.hayMas && !loadingMasMisActividades"}],staticClass:"bCargarMas",attrs:{id:"finMisActividades"},on:{click:o.getMoreMisActividades}},[o._v(" Más... ")])],2),o.loadingTodasActividades?o._e():i("div",{directives:[{name:"show",rawName:"v-show",value:1==o.verTodasActividades&&(1==o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")),expression:"\n        verTodasActividades == true &&\n        (usuarioAdministradorActividadesEstudiantiles == true ||\n          $store.state.usuario.permisos.includes(\n            'actividadesEstudiantiles-guia'\n          ) ||\n          $store.state.usuario.permisos.includes(\n            'actividadesEstudiantiles-profe'\n          ))\n      "}],staticClass:"listaActividades",attrs:{id:"listaTodasActividades"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idActividadSeleccionada=null}}},[o._l(o.todasActividades.actividades,(function(e){return i("actividad",{key:e.id,attrs:{idActividad:e.id,seleccionada:o.idActividadSeleccionada==e.id,idGrupo:o.esteGrupo.id,idEstudianteSeleccionadoGrupo:o.idEstudianteSeleccionado},on:{clickTrianguloSeleccion:function(i){o.idActividadSeleccionada==e.id?o.idActividadSeleccionada=null:o.idActividadSeleccionada=e.id},meElimine:o.eliminarActividadCache},nativeOn:{click:function(i){o.idActividadSeleccionada!=e.id&&(o.idActividadSeleccionada=e.id)}}})})),i("div",{directives:[{name:"show",rawName:"v-show",value:o.todasActividades.hayMas&&!o.loadingMasTodasActividades,expression:"todasActividades.hayMas && !loadingMasTodasActividades"}],staticClass:"bCargarMas",attrs:{id:"finTodasActividades"},on:{click:o.getMoreTodasActividades}},[o._v(" Más... ")]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingMasTodasActividades,expression:"loadingMasTodasActividades"}],attrs:{texto:"Cargando más actividades"}})],2)])])},kr=[],Or=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"actividad",class:{seleccionada:o.seleccionada,completada:o.usuarioCompletoActividad,deshabilitado:o.actividadDeshabilitada}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.seleccionada,expression:"!seleccionada"}],staticClass:"infoFecha"},[o._v(o._s(o.fechaFormateada))]),o.usuarioCreadorActividad||o.usuarioProfe?n("div",{attrs:{id:"contenedorAvancesGrupo"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.estadoAvanceGrupo.numCompletados>0,expression:"estadoAvanceGrupo.numCompletados > 0"}],staticClass:"indicadorAvance"},[n("div",{staticClass:"numeroIndicadorAvance"},[o._v(" "+o._s(o.estadoAvanceGrupo.numCompletados)+" ")]),n("img",{staticClass:"imagenAvancesGrupo",attrs:{src:i("8c7c"),alt:"Estudiantes que completaron",id:"imagenEstudianteCompletado",title:"Estudiantes que completaron la actividad"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.estadoAvanceGrupo.numDesarrollando>0,expression:"estadoAvanceGrupo.numDesarrollando > 0"}],staticClass:"indicadorAvance"},[n("div",{staticClass:"numeroIndicadorAvance"},[o._v(" "+o._s(o.estadoAvanceGrupo.numDesarrollando)+" ")]),n("img",{staticClass:"imagenAvancesGrupo",attrs:{src:i("8c7c"),alt:"Estudiantes desarrollando",id:"imagenEstudianteDesarrollando",title:"Estudiantes desarrollando actividad"}})]),o._t("avancesGrupo")],2):o._e(),n("div",{attrs:{id:"contenedorAlertas"}},[o.actividadConNuevasRespuestasParaProfe?n("img",{staticClass:"alertas alertaNuevoMensaje",attrs:{src:i("1070"),title:"Nuevo(s) mensaje(s)"}}):o._e(),o.usuarioCompletoActividad||"completado"==o.estadoEstudianteSeleccionado?n("img",{staticClass:"alertas alertaActividadCompletada",attrs:{src:i("f0d1"),title:"¡Actividad completada!"}}):o._e(),"desarrollando"==o.estadoEstudianteSeleccionado?n("img",{staticClass:"alertas alertaActividadEnCurso",attrs:{src:i("d30f"),title:"¡Actividad en curso!"}}):o._e()]),n("div",{class:{arrowDown:o.seleccionada},attrs:{id:"triangulito"},on:{click:function(e){return e.stopPropagation(),o.$emit("clickTrianguloSeleccion")}}}),n("div",{attrs:{id:"zonaNombre"},on:{mouseover:function(e){o.botonesNombre=!0},mouseout:function(e){o.botonesNombre=!1}}},[n("span",{ref:"nombre",staticClass:"nombreZona",class:{enEdicion:o.nombreEditandose},attrs:{id:"nombre"}},[o._v(" "+o._s(o.estaActividad.nombre)+" "),o.usuarioCreadorActividad?n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],attrs:{src:i("559e"),alt:"Editar nombre",title:"Editar nombre",id:"botonEditarNombre"},on:{click:o.iniciarEdicionNombre}}):o._e()]),o.usuarioCreadorActividad?n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Guardando nombre..."}}):o._e(),o.usuarioCreadorActividad?n("div",{directives:[{name:"show",rawName:"v-show",value:1==o.nombreEditandose&&1==o.seleccionada,expression:"nombreEditandose == true && seleccionada == true"}],attrs:{id:"zonaNuevoNombre"}},[n("label",{staticStyle:{"font-style":"italic"},attrs:{for:"inputNuevoNombre"}},[o._v("Nuevo nombre: ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"}],ref:"inputNuevoNombre",staticClass:"nuevoNombreActividad",attrs:{name:"inputNuevoNombre",type:"text"},domProps:{value:o.nuevoNombre},on:{keydown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.cancelarEdicionNombre(e)},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNombre(e)},blur:o.guardarNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}})]):o._e()],1),1==o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")?n("span",{attrs:{id:"nombreCreador"}},[o._v(o._s(o.estaActividad.infoCreador.nombres))]):o._e(),n("br"),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],staticClass:"zona",attrs:{id:"zonaGuia"}},[n("div",{staticClass:"nombreZona",class:{nombreHayGuia:o.estaActividad.hayGuia,nombreNoHayGuia:!o.estaActividad.hayGuia},attrs:{id:"nombreZonaGuia"}},[o._v(" Guía ")]),o.usuarioCreadorActividad?n("input",{ref:"inputNuevaGuia",attrs:{type:"file",id:"inputNuevaGuia",accept:"application/pdf"},on:{change:o.subirNuevaGuia}}):o._e(),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.uploadingGuia,expression:"uploadingGuia"}],attrs:{texto:"Subiendo archivo..."}}),o.estaActividad.hayGuia.length>5?n("div",{attrs:{id:"descargarGuia"}},[n("a",{attrs:{href:o.estaActividad.hayGuia,download:o.estaActividad.nombre+"-Guia"}},[n("img",{attrs:{src:i("608c"),alt:"Descargar guia",id:"botonDescargarGuia"}})])]):o._e()],1),o.usuarioCreadorActividad||o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")?n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],staticClass:"zona",attrs:{id:"zonaParticipantes"}},[n("div",{staticClass:"nombreZona"},[o._v("Participantes")]),n("div",{staticClass:"controlesZona",attrs:{id:"controlesParticipantes"}}),n("div",{attrs:{id:"listaParticipantes"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idParticipanteSeleccionado=null}}},o._l(o.estaActividad.desarrollos,(function(e){return n("icono-persona",{key:e.infoEstudiante.id,attrs:{estaPersona:e.infoEstudiante,seleccionado:o.idEstudianteSeleccionado==e.infoEstudiante.id},nativeOn:{click:function(i){o.idEstudianteSeleccionado=e.infoEstudiante.id,o.marcarComoLeido(e.infoEstudiante.id)}},scopedSlots:o._u([{key:"alertas",fn:function(){return[o.idsEstudiantesConNuevaRespuestaParaProfe.includes(e.infoEstudiante.id)?n("img",{staticClass:"alertas alertaNuevoMensaje",attrs:{src:i("1070"),title:"Nuevo mensaje"}}):o._e(),"completado"==e.estado?n("img",{staticClass:"alertas alertaEstudianteCompletoDesarrollo",attrs:{src:i("f0d1"),title:"Completó esta actividad"}}):o._e()]},proxy:!0}],null,!0)})})),1)]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada&&(null!=o.idEstudianteSeleccionado||!o.usuarioCreadorActividad),expression:"\n      seleccionada &&\n      (idEstudianteSeleccionado != null || !usuarioCreadorActividad)\n    "}],staticClass:"zona",attrs:{id:"zonaDesarrollos"}},[o.usuarioCreadorActividad||o.usuarioTieneDesarrollo||o.idEstudianteSeleccionado!=this.$store.state.usuario.id?o._e():n("div",{staticClass:"desarrollo",attrs:{id:"miNuevoDesarrollo"}},[n("mi-participacion",{attrs:{idActividad:o.estaActividad.id,idGrupo:o.idGrupo,nuevoDesarrollo:!0,idDesarrollo:"0",participacionEstudiante:!0},on:{hiceDesarrollo:o.addDesarrolloCreado}})],1),n("div",{attrs:{id:"desarrollosEstudiantes"}},o._l(o.estaActividad.desarrollos,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:o.idEstudianteSeleccionado==e.infoEstudiante.id,expression:"idEstudianteSeleccionado == desarrollo.infoEstudiante.id"}],key:e.id,staticClass:"desarrollo"},[o._v(" "+o._s(e.infoEstudiante.nombres)+" "),o._l(e.participaciones,(function(i,a){return n("participacion-estudiante",{key:i.id,attrs:{indice:a,idEstudianteDesarrollo:e.infoEstudiante.id,estaParticipacion:i},on:{eliminandose:function(n){return o.eliminarParticipacion(i.id,e.id)}}})})),"completado"==e.estado?n("div",{staticClass:"anuncioActividadCompletada"},[o._v(" ¡Actividad completada! ")]):o._e(),"completado"==e.estado||!o.usuarioCreadorActividad&&e.infoEstudiante.id!=o.$store.state.usuario.id?o._e():n("mi-participacion",{attrs:{idGrupo:o.idGrupo,idActividad:o.estaActividad.id,idDesarrollo:e.id,participacionEstudiante:e.infoEstudiante.id==o.$store.state.usuario.id,nuevoDesarrollo:!1},on:{hiceRespuesta:function(i){return o.addRespuestaCreada(i,e.id)}}}),o.usuarioCreadorActividad?n("div",{attrs:{id:"toggleDesarrolloCompletado"}},[n("img",{class:{completado:"completado"==e.estado},attrs:{id:"botonToggleDesarrolloCompletado",src:i("f0d1"),alt:"Marcar como completado",title:"Marcar como completado"},on:{click:function(i){return o.toggleDesarrolloCompletado(e.id,e.estado)}}})]):o._e()],2)})),0)]),n("div",{directives:[{name:"show",rawName:"v-show",value:1==o.seleccionada,expression:"seleccionada == true"}],attrs:{id:"controlesActividad"}},[o.usuarioCreadorActividad||o.usuarioAdministradorActividadesEstudiantiles?n("div",{staticClass:"controlesActividad",attrs:{id:"botonEliminarActividad"},on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])])},Mr=[],Br=i("19de"),Fr=i.n(Br),$r=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"miParticipacion",class:{participacionPropia:o.participacionEstudiante,participacionOtro:!o.participacionEstudiante}},[n("div",{attrs:{id:"titulo"}},[o._v(" Responder "),n("img",{attrs:{src:i("1070"),alt:"Enviar respuesta",id:"iconoMensaje",title:o.cuadroAbierto?"cerrar":"abrir"},on:{click:o.abrirCerrar}}),n("br")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.mensaje,expression:"mensaje"},{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],ref:"mensaje",class:{mensajePropio:o.participacionEstudiante,mensajeOtro:!o.participacionEstudiante,letrasRojas:o.mensajeIlegal},attrs:{name:"mensaje",id:"mensaje",cols:"30",rows:"10",placeholder:"Escribe un mensaje"},domProps:{value:o.mensaje},on:{input:function(e){e.target.composing||(o.mensaje=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],staticClass:"bloqueAdjuntar",attrs:{id:"bloqueAdjuntarArchivo"}},[n("input",{ref:"inputArchivoAdjunto",attrs:{type:"file",id:"inputArchivoAdjunto"},on:{change:o.actualizarNombreDeArchivo}}),n("img",{attrs:{src:i("3a9d"),alt:"Ajuntar archivo",id:"imgAdjuntar",title:"adjuntar un archivo"},on:{click:o.abrirSelectorDeArchivos}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.nombreArchivoSeleccionado,expression:"nombreArchivoSeleccionado"}],attrs:{id:"nombreArchivoSeleccionado"}},[n("span",[o._v(o._s(o.nombreArchivoSeleccionado))])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],staticClass:"bloqueAdjuntar",attrs:{id:"bloqueAdjuntarArchivo"}},[n("img",{attrs:{src:i("dffa"),alt:"Ajuntar enlace",id:"imgAdjuntarEnlace",title:"adjuntar un enlace"},on:{click:function(e){o.introduciendoEnlace=!0}}}),n("input",{directives:[{name:"show",rawName:"v-show",value:!0===o.introduciendoEnlace,expression:"introduciendoEnlace === true"},{name:"model",rawName:"v-model",value:o.enlaceAdjuntable,expression:"enlaceAdjuntable"}],staticClass:"inputAdjuntarEnlace",attrs:{type:"text",placeholder:"escribe o pega el enlace"},domProps:{value:o.enlaceAdjuntable},on:{input:function(e){e.target.composing||(o.enlaceAdjuntable=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.enlaceAdjunto&&!o.introduciendoEnlace,expression:"enlaceAdjunto && !introduciendoEnlace"}],attrs:{id:"nombreEnlaceAdjuntado"}},[n("span",[o._v(o._s(o.enlaceAdjunto))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.enlaceAdjunto,expression:"enlaceAdjunto"}],attrs:{id:"bCancelarEnlaceAdjunto"},on:{click:function(e){e.stopPropagation(),o.enlaceAdjunto=null,o.enlaceAdjuntable=null}}},[o._m(0)]),n("img",{directives:[{name:"show",rawName:"v-show",value:o.introduciendoEnlace&&!o.enlaceAdjuntableIlegal,expression:"introduciendoEnlace && !enlaceAdjuntableIlegal"}],attrs:{src:i("f0d1"),alt:"enviar",id:"bAceptarAdjuntarEnlace"},on:{click:function(e){e.stopPropagation(),o.enlaceAdjunto=o.enlaceAdjuntable,o.introduciendoEnlace=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoRespuesta,expression:"enviandoRespuesta"}],attrs:{texto:"Enviando respuesta..."}}),n("br"),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],class:{deshabilitado:o.mensajeIlegal},attrs:{id:"enviar"}},[n("img",{class:{deshabilitado:o.enviandoRespuesta},attrs:{src:i("4e77"),alt:"Enviar respuesta",id:"imgEnviar",title:"Enviar"},on:{click:o.evaluarAdjunto}})])],1)},Qr=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"linea1"},[i("div",{staticClass:"linea2"})])}];function qr(){var o=Object(s["a"])(["\n            mutation(\n              $idGrupo: ID\n              $idActividad: ID\n              $idDesarrollo: ID\n              $nuevaRespuesta: InputNuevaRespuestaActividadEstudiantil\n              $nuevoDesarrollo: Boolean\n            ) {\n              publicarRespuestaActividadEstudiantil(\n                idGrupo: $idGrupo\n                idActividad: $idActividad\n                idDesarrollo: $idDesarrollo\n                nuevaRespuesta: $nuevaRespuesta\n                nuevoDesarrollo: $nuevoDesarrollo\n              ) {\n                nuevaRespuesta {\n                  ...fragParticipacion\n                }\n                nuevoDesarrollo {\n                  ...fragDesarrollo\n                }\n              }\n            }\n            ","\n          "]);return qr=function(){return o},o}var Ur=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@*="-]/,Vr={name:"MiParticipacion",components:{Loading:Mo},data:function(){return{mensaje:"",nombreArchivoSeleccionado:null,cuadroAbierto:!1,enviandoRespuesta:!1,introduciendoEnlace:!1,enlaceAdjuntable:null,enlaceAdjunto:null}},props:{idActividad:String,idGrupo:String,participacionEstudiante:{type:Boolean,default:!1},idDesarrollo:String,nuevoDesarrollo:Boolean},methods:{abrirSelectorDeArchivos:function(){this.$refs.inputArchivoAdjunto.click()},evaluarAdjunto:function(){var o=this;if(!this.mensajeIlegal){this.enviandoRespuesta=!0;var e=this.$refs.inputArchivoAdjunto,i=new FormData;if(e.value){var n=e.files[0],a=n["type"];console.log("subiendo un ".concat(a)),i.append("archivoAdjunto",n);var t=this;Ie()({method:"post",url:this.serverUrl+"/api/actividadesProfes/adjuntarArchivoParaRespuestaActividadEstudiantil",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data.infoArchivo,n={infoArchivo:{idGoogleDrive:i.idGoogleDrive,googleDriveDirectLink:i.googleDriveDirectLink,extension:i.extensionDeArchivo,nombre:i.extensionDeArchivo},mensaje:t.mensaje};o.enlaceAdjunto&&(console.log("Con enlace adjunto ".concat(o.enlaceAdjunto)),n.enlaceAdjunto=[o.enlaceAdjunto]),o.enviarNuevaRespuesta(n)})).catch((function(e){o.enviandoRespuesta=!1,console.log("Errores: ".concat(e)),e.response&&e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))}else{console.log("El input de archivo adjunto estaba vacio");var s={infoArchivo:{idGoogleDrive:"",googleDriveDirectLink:"",extension:"",nombre:""},mensaje:this.mensaje};this.enlaceAdjunto&&(console.log("Con enlace adjunto ".concat(this.enlaceAdjunto)),s.enlaceAdjunto=[this.enlaceAdjunto]),this.enviarNuevaRespuesta(s)}}},enviarNuevaRespuesta:function(o){var e=this;this.$apollo.mutate({mutation:c()(qr(),Ri),variables:{idGrupo:this.idGrupo,idActividad:this.idActividad,idDesarrollo:this.idDesarrollo,nuevaRespuesta:o,nuevoDesarrollo:this.nuevoDesarrollo}}).then((function(o){var i=o.data.publicarRespuestaActividadEstudiantil,n=i.nuevaRespuesta,a=i.nuevoDesarrollo;e.enviandoRespuesta=!1,console.log("Respuesta publicada"),a?e.$emit("hiceDesarrollo",a):e.$emit("hiceRespuesta",n),e.mensaje="",e.$refs.inputArchivoAdjunto.value=null,e.nombreArchivoSeleccionado=null,e.enlaceAdjunto=null,e.enlaceAdjuntable=null})).catch((function(o){e.enviandoRespuesta=!1,console.log("Error publicando respuesta. E: ".concat(JSON.stringify(o.errors)))}))},actualizarNombreDeArchivo:function(){if(!this.$refs.inputArchivoAdjunto.value)return console.log("Nullificando el nombre de archivo seleccionado"),void(this.nombreArchivoSeleccionado=null);this.nombreArchivoSeleccionado=this.$refs.inputArchivoAdjunto.files[0].name},abrirCerrar:function(){this.cuadroAbierto?(this.mensaje="",this.$refs.inputArchivoAdjunto.value=null,this.nombreArchivoSeleccionado=null,this.cuadroAbierto=!1,this.enlaceAdjunto=null,this.enlaceAdjuntable=null):this.cuadroAbierto=!0}},computed:{mensajeIlegal:function(){return this.mensaje.length<1||!!Ur.test(this.mensaje)},enlaceAdjuntableIlegal:function(){return!this.enlaceAdjuntable||("https://"!=this.enlaceAdjuntable.substr(0,8)?(console.log("El inicio ".concat(this.enlaceAdjuntable.substr(0,8)," difiere del esperado")),!0):this.enlaceAdjuntable.length<7)}}},Lr=Vr,Gr=(i("5ce8"),Object(m["a"])(Lr,$r,Qr,!1,null,"1d31084e",null)),Kr=Gr.exports,Zr=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"participacionEstudiante",class:{participacionPropia:o.participacionDelPropioEstudiante,participacionOtro:!o.participacionDelPropioEstudiante}},[n("div",{attrs:{id:"autorParticipacion"}},[o._v(" "+o._s(o.estaParticipacion.infoAutor.nombres)+" "+o._s(o.estaParticipacion.infoAutor.apellidos)+" - "+o._s(o.fechaFormateada)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.estaParticipacion.comentario,expression:"estaParticipacion.comentario"}],class:{comentarioPropio:o.participacionDelPropioEstudiante,comentarioOtro:!o.participacionDelPropioEstudiante},attrs:{disabled:"",id:"comentario"},domProps:{value:o.estaParticipacion.comentario},on:{input:function(e){e.target.composing||o.$set(o.estaParticipacion,"comentario",e.target.value)}}}),n("div",{attrs:{id:"archivo"}},[n("a",{attrs:{href:o.estaParticipacion.archivo.googleDriveDirectLink}},[o.estaParticipacion.archivo&&o.estaParticipacion.archivo.googleDriveDirectLink?n("img",{attrs:{src:i("60ee"),alt:"Descargar archivo",id:"imgDownloadArchivo"}}):o._e()])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.estaParticipacion.enlaceAdjunto&&o.estaParticipacion.enlaceAdjunto.length>0,expression:"\n      estaParticipacion.enlaceAdjunto &&\n      estaParticipacion.enlaceAdjunto.length > 0\n    "}],staticClass:"enlacesAdjuntos"},o._l(o.estaParticipacion.enlaceAdjunto,(function(e,i){return n("a",{key:i,attrs:{target:"_blank",href:e}},o._l(o.estaParticipacion.enlaceAdjunto,(function(e,i){return n("div",{key:i,staticClass:"enlaceAdjunto"},[o._v(" "+o._s(e)+" ")])})),0)})),0),1==o.usuarioAdministradorActividadesEstudiantiles||o.usuarioSuperadministrador?n("div",{attrs:{id:"controlesParticipacion"}},[n("div",{staticClass:"controlesParticipacion hoverGris",attrs:{id:"bEliminarParticipacion"},on:{click:o.eliminarse}},[o._v(" Eliminar ")])]):o._e()])},zr=[],Jr={name:"ParticipacionEstudiante",props:{estaParticipacion:{type:Object},indice:Number,idEstudianteDesarrollo:String},methods:{descargarArchivo:function(){var o=this,e=this.estaParticipacion.archivo.accesible;console.log("solicitando archivo a ".concat(e)),Ie()({method:"get",url:e,responseType:"blob"}).then((function(e){console.log("Respuesta: ".concat(JSON.stringify(e))),Fr()(e.data,parseInt(o.indice)+1+" - Respuesta_"+o.estaParticipacion.infoAutor.nombres+"."+o.estaParticipacion.archivo.extension)})).catch((function(o){console.log("Error: ".concat(JSON.stringify(o))),alert("Archivo no encontrado")}))},eliminarse:function(){confirm("¿Seguro de que quieres eliminar este mensaje?")&&this.$emit("eliminandose",this.estaParticipacion.id)}},computed:{participacionDelPropioEstudiante:function(){return this.idEstudianteDesarrollo==this.estaParticipacion.infoAutor.id},fechaFormateada:function(){return new Date(this.estaParticipacion.fechaUpload)}}},_r=Jr,Hr=(i("8edf"),Object(m["a"])(_r,Zr,zr,!1,null,"3c2163ce",null)),Yr=Hr.exports;function Xr(){var o=Object(s["a"])(["\n            mutation($idDesarrollo: ID!, $idActividad: ID!, $idGrupo: ID!) {\n              setLeidoPorProfeDesarrolloEstudiantil(\n                idDesarrollo: $idDesarrollo\n                idActividad: $idActividad\n                idGrupo: $idGrupo\n                nuevoLeidoPorProfe: true\n              ) {\n                id\n                leidoPorProfe\n              }\n            }\n          "]);return Xr=function(){return o},o}function Wr(){var o=Object(s["a"])(["\n            mutation(\n              $idDesarrollo: ID!\n              $idActividad: ID!\n              $idGrupo: ID!\n              $nuevoEstado: String\n            ) {\n              setEstadoDesarrolloActividadEstudiantil(\n                idDesarrollo: $idDesarrollo\n                nuevoEstado: $nuevoEstado\n                idActividad: $idActividad\n                idGrupo: $idGrupo\n              ) {\n                id\n                estado\n              }\n            }\n          "]);return Wr=function(){return o},o}function oc(){var o=Object(s["a"])(["\n            mutation(\n              $idParticipacion: ID!\n              $idDesarrollo: ID!\n              $idActividad: ID!\n              $idGrupo: ID!\n            ) {\n              eliminarParticipacionActividadEstudiantil(\n                idParticipacion: $idParticipacion\n                idDesarrollo: $idDesarrollo\n                idActividad: $idActividad\n                idGrupo: $idGrupo\n              )\n            }\n          "]);return oc=function(){return o},o}function ec(){var o=Object(s["a"])(["\n            mutation($idActividad: ID!, $nuevoNombre: String!, $idGrupo: ID!) {\n              cambiarNombreActividadEstudiantil(\n                idGrupo: $idGrupo\n                idActividad: $idActividad\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return ec=function(){return o},o}function ic(){var o=Object(s["a"])(["\n              mutation($idActividad: ID!, $idGrupo: ID!) {\n                eliminarActividadDeGrupoEstudiantil(\n                  idGrupo: $idGrupo\n                  idActividad: $idActividad\n                )\n              }\n            "]);return ic=function(){return o},o}function nc(){var o=Object(s["a"])(["\n  query($idGrupo: ID!, $idActividad: ID!) {\n    actividadDeGrupoEstudiantil(idGrupo: $idGrupo, idActividad: $idActividad) {\n      ...fragActividad\n    }\n  }\n  ","\n"]);return nc=function(){return o},o}var ac=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,tc=c()(nc(),Ii),sc={components:{MiParticipacion:Kr,ParticipacionEstudiante:Yr,IconoPersona:Cr,Loading:Mo},apollo:{estaActividad:{query:tc,variables:function(){return{idGrupo:this.idGrupo,idActividad:this.idActividad}},update:function(o){var e=o.actividadDeGrupoEstudiantil;return this.loadingActividad=!1,e},skip:function(){return!this.idGrupo||!this.idActividad},fetchPolicy:"cache-and-network"}},name:"Actividad",data:function(){return{actividadDeshabilitada:!1,estaActividad:{hayGuia:"",infoCreador:{},desarrollos:[]},nombreEditandose:!1,idEstudianteSeleccionado:this.$store.state.usuario.id,uploadingGuia:!1,nuevoNombre:"",botonesNombre:!1,enviandoNuevoNombre:!1,loadingActividad:!0}},props:{seleccionada:Boolean,idActividad:String,idGrupo:String,idEstudianteSeleccionadoGrupo:String},methods:{eliminarse:function(){var o=this;if(confirm("Eliminando actividad completa. ¿Continuar?")){var e=this;this.actividadDeshabilitada=!0,this.$apollo.mutate({mutation:c()(ic()),variables:{idActividad:this.idActividad,idGrupo:this.idGrupo}}).then((function(o){var i=o.data.eliminarActividadDeGrupoEstudiantil;console.log("Actividad eliminada: ".concat(i)),e.$router.go()})).catch((function(e){o.actividadDeshabilitada=!1,console.log("error: "+e)}))}},guardarNombre:function(){var o=this;return Object(vo["a"])(regeneratorRuntime.mark((function e(){var i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.enviandoNuevoNombre=!0,i=o.nuevoNombre.trim(),n=o.estaActividad.id,o.nombreEditandose&&i!=o.estaActividad.nombre){e.next=7;break}return o.nombreEditandose=!1,o.enviandoNuevoNombre=!1,e.abrupt("return");case 7:o.nombreEditandose=!1,i=i.replace(ac,""),i=i.replace(/\s\s+/g," "),o.enviandoNuevoNombre=!0,o.$apollo.mutate({mutation:c()(ec()),variables:{idActividad:n,idGrupo:o.idGrupo,nuevoNombre:i}}).then((function(){o.enviandoNuevoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("error: ".concat(e))}));case 12:case"end":return e.stop()}}),e)})))()},iniciarEdicionNombre:function(){var o=this;this.usuarioCreadorActividad&&this.seleccionada&&(this.nuevoNombre=this.estaActividad.nombre,this.nombreEditandose=!0,this.$nextTick((function(){o.$refs.inputNuevoNombre.focus()})))},cancelarEdicionNombre:function(){this.nombreEditandose=!1,this.$refs.inputNuevoNombre.blur()},seleccionarGuia:function(){this.$refs.inputNuevaGuia.click()},subirNuevaGuia:function(){var o=this;this.uploadingGuia=!0;var e=this.$refs.inputNuevaGuia,i=new FormData,n=e.files[0];i.append("nuevaGuia",n),i.append("idActividad",this.estaActividad.id),i.append("idGrupo",this.idGrupo),Ie()({method:"post",url:this.serverUrl+"/api/actividadesProfes/updateGuia",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data.enlace;o.uploadingGuia=!1,console.log("Enlace: ".concat(i)),o.estaActividad.hayGuia=i})).catch((function(e){o.uploadingGuia=!1,console.log("Errores: ".concat(e)),e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))},descargarGuia:function(){var o=this,e=this.serverUrl+"/api/actividadesProfes/guia/"+this.idGrupo+"/"+this.estaActividad.infoCreador.id+"/"+this.estaActividad.id+"/";Ie()({method:"get",url:e,responseType:"blob"}).then((function(e){Fr()(e.data,o.estaActividad.nombre+"-Guia.pdf")})).catch((function(o){console.log("Error: ".concat(JSON.stringify(o))),alert("Archivo no encontrado")}))},eliminarParticipacion:function(o,e){var i=this;this.$apollo.mutate({mutation:c()(oc()),variables:{idParticipacion:o,idDesarrollo:e,idActividad:this.idActividad,idGrupo:this.idGrupo},update:function(n,a){var t=a.data.eliminarParticipacionActividadEstudiantil;if(t){console.log("Retirando participacion");var s=n.readQuery({query:tc,variables:{idGrupo:i.idGrupo,idActividad:i.idActividad}}),r=JSON.parse(JSON.stringify(s)),c=r.actividadDeGrupoEstudiantil.desarrollos.find((function(o){return o.id==e}));if(c){var d=c.participaciones.findIndex((function(e){return e.id==o}));if(d>-1){if(c.participaciones.splice(d,1),c.participaciones.length<1){console.log("Desarrollo quedó vacío");var u=r.actividadDeGrupoEstudiantil.desarrollos.findIndex((function(o){return o.id==e}));u>-1&&r.actividadDeGrupoEstudiantil.desarrollos.splice(u,1),console.log("Desarrollo no encontrado")}n.writeQuery({query:tc,variables:{idGrupo:i.idGrupo,idActividad:i.idActividad},data:r}),console.log("Participacion retirada")}else console.log("Esa respuesta ni estaba")}else console.log("Ese desarrollo no estaba")}else console.log("No se eliminó")}}).then((function(){})).catch((function(o){console.log("errores: "+o)}))},toggleDesarrolloCompletado:function(o,e){var i="completado"==e?"desarrollando":"completado";this.$apollo.mutate({mutation:c()(Wr()),variables:{idDesarrollo:o,nuevoEstado:i,idActividad:this.idActividad,idGrupo:this.idGrupo}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))},marcarComoLeido:function(o){if(this.$store.state.usuario.id==this.estaActividad.infoCreador.id){var e=this.estaActividad.desarrollos.find((function(e){return e.infoEstudiante.id==o})).id;this.$apollo.mutate({mutation:c()(Xr()),variables:{idDesarrollo:e,idActividad:this.idActividad,idGrupo:this.idGrupo}})}},addDesarrolloCreado:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:tc,variables:{idGrupo:this.idGrupo,idActividad:this.idActividad}}),n=JSON.parse(JSON.stringify(i));n.actividadDeGrupoEstudiantil.desarrollos.some((function(e){return e.id==o.id}))?console.log("Ese desarrollo ya estaba"):n.actividadDeGrupoEstudiantil.desarrollos.push(o),e.writeQuery({query:tc,variables:{idGrupo:this.idGrupo,idActividad:this.idActividad},data:n}),console.log("Nuevo desarrollo añadido")},addRespuestaCreada:function(o,e){var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:tc,variables:{idGrupo:this.idGrupo,idActividad:this.idActividad}}),a=JSON.parse(JSON.stringify(n)),t=a.actividadDeGrupoEstudiantil.desarrollos.find((function(o){return o.id==e}));t?t.participaciones.some((function(e){return e.id==o.id}))?console.log("Una respuesta con ese id ya estaba"):(t.participaciones.push(o),i.writeQuery({query:tc,variables:{idGrupo:this.idGrupo,idActividad:this.idActividad},data:a}),console.log("Nueva respuesta añadida")):console.log("Ese desarrollo no estaba")},refresh:function(){this.$apollo.queries.estaActividad.refetch()}},computed:{usuarioCreadorActividad:function(){return this.$store.state.usuario.id==this.estaActividad.infoCreador.id},usuarioTieneDesarrollo:function(){var o=this;return!(this.estaActividad.desarrollos.length<1)&&this.estaActividad.desarrollos.some((function(e){return e.infoEstudiante.id==o.$store.state.usuario.id}))},usuarioCompletoActividad:function(){var o=this;if(this.usuarioTieneDesarrollo){var e=this.estaActividad.desarrollos.find((function(e){return e.infoEstudiante.id==o.$store.state.usuario.id}));if("completado"==e.estado)return!0}return!1},usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")},idsDesarrollosConNuevaRespuestaParaProfe:function(){var o=this.estaActividad.desarrollos.filter((function(o){return 0==o.leidoPorProfe}));return this.usuarioCreadorActividad?o.map((function(o){return o.id})):[]},idsEstudiantesConNuevaRespuestaParaProfe:function(){var o=this.estaActividad.desarrollos.filter((function(o){return 0==o.leidoPorProfe}));return this.usuarioCreadorActividad?o.map((function(o){return o.infoEstudiante.id})):[]},actividadConNuevasRespuestasParaProfe:function(){return this.idsDesarrollosConNuevaRespuestaParaProfe.length>0},estadoAvanceGrupo:function(){var o={numCompletados:0,numDesarrollando:0};return this.estaActividad.desarrollos?(o.numCompletados=this.estaActividad.desarrollos.filter((function(o){return"completado"==o.estado})).length,o.numDesarrollando=this.estaActividad.desarrollos.filter((function(o){return"desarrollando"==o.estado})).length,o):o},estadoEstudianteSeleccionado:function(){var o=this;if(!this.idEstudianteSeleccionadoGrupo)return"noIniciado";var e=this.estaActividad.desarrollos.find((function(e){return e.infoEstudiante.id==o.idEstudianteSeleccionadoGrupo}));return e?e.estado:"noIniciado"},fechaFormateada:function(){var o=new Date(this.estaActividad.fechaUpload).toString(),e=o.indexOf("("),i=o.substr(0,e),n=i.indexOf("GMT");return n>-1&&(i=i.substr(0,n)),i}},watch:{usuarioLogeado:function(){this.idEstudianteSeleccionado=this.$store.state.usuario.id},seleccionada:function(o){o&&this.$apollo.queries.estaActividad.refetch()}}},rc=sc,cc=(i("f40e"),Object(m["a"])(rc,Or,Mr,!1,null,"144404c4",null)),dc=cc.exports;function uc(){var o=Object(s["a"])(["\n            mutation($idGrupo: ID!) {\n              crearActividadEnGrupoEstudiantil(idGrupo: $idGrupo) {\n                ...fragActividad\n              }\n            }\n            ","\n          "]);return uc=function(){return o},o}function lc(){var o=Object(s["a"])(["\n            mutation($idGrupo: ID!, $idEstudiante: ID!) {\n              removeEstudianteGrupoEstudiantil(\n                idGrupo: $idGrupo\n                idEstudiante: $idEstudiante\n              ) {\n                id\n                estudiantes {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return lc=function(){return o},o}function vc(){var o=Object(s["a"])(["\n            mutation($idGrupoEstudiantil: ID!, $idEstudiante: ID!) {\n              addEstudianteGrupoEstudiantil(\n                idGrupoEstudiantil: $idGrupoEstudiantil\n                idEstudiante: $idEstudiante\n              ) {\n                id\n                estudiantes {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return vc=function(){return o},o}function pc(){var o=Object(s["a"])(["\n  query($idGrupo: ID!) {\n    grupoEstudiantil(idGrupo: $idGrupo) {\n      id\n      nombre\n      estudiantes {\n        ...fragResponsables\n      }\n    }\n  }\n  ","\n"]);return pc=function(){return o},o}function mc(){var o=Object(s["a"])(["\n  query($idGrupo: ID!, $pagina: Int!) {\n    misActividadesCreadasGrupoEstudiantil(idGrupo: $idGrupo, pagina: $pagina) {\n      hayMas\n      actividades {\n        id\n        nombre\n      }\n    }\n  }\n"]);return mc=function(){return o},o}function hc(){var o=Object(s["a"])(["\n  query($idGrupo: ID!, $pagina: Int!) {\n    todasActividadesGrupoEstudiantil(idGrupo: $idGrupo, pagina: $pagina) {\n      hayMas\n      actividades {\n        id\n        nombre\n      }\n    }\n  }\n"]);return hc=function(){return o},o}var Ac=c()(hc()),bc=c()(mc()),fc=c()(pc(),xi),gc={name:"ActividadesDeGrupo",apollo:{esteGrupo:{query:fc,variables:function(){return{idGrupo:this.$route.params.idGrupo}},update:function(o){var e=o.grupoEstudiantil;return this.ventanaDeshabilitada=!1,e},fetchPolicy:"network-only"},misActividadesCreadas:{query:bc,variables:function(){return{idGrupo:this.$route.params.idGrupo,pagina:0}},update:function(o){var e=o.misActividadesCreadasGrupoEstudiantil;return this.loadingMasMisActividades=!1,this.loadingMisActividadesCreadas=!1,this.ventanaDeshabilitada=!1,e}},todasActividades:{query:Ac,variables:function(){return{idGrupo:this.$route.params.idGrupo,pagina:0}},update:function(o){var e=o.todasActividadesGrupoEstudiantil;return this.loadingMasTodasActividades=!1,this.loadingTodasActividades=!1,this.hayMasTodasActividades=e.hayMas,e}}},components:{IconoPersona:Cr,Actividad:dc,Loading:Mo},data:function(){return{"idEstudianteAñadir":null,idEstudianteSeleccionado:null,idActividadSeleccionada:null,esteGrupo:{estudiantes:[],actividades:[]},activarTodasActividades:!1,verTodasActividades:!1,ventanaDeshabilitada:!0,misActividadesCreadas:[],todasActividades:[],paginaMisActividades:0,paginaTodasActividades:0,sizePaginaActividades:5,hayMasMisActividades:!0,hayMasTodasActividades:!0,loadingMisActividadesCreadas:!0,loadingTodasActividades:!0,loadingMasMisActividades:!0,loadingMasTodasActividades:!0,creandoActividad:!1}},computed:{usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")},actividadesOrdenadas:function(){var o=this.esteGrupo.actividades;return o.sort((function(o,e){return new Date(e.fechaUpload)-new Date(o.fechaUpload)})),o}},methods:{addEstudianteGrupo:function(){console.log("añadiendo usuario a un grupo estudiantil"),this.$apollo.mutate({mutation:c()(vc(),xi),variables:{idGrupoEstudiantil:this.esteGrupo.id,idEstudiante:this.idEstudianteAñadir}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},removeEstudianteGrupo:function(o){console.log("Retirando el estudiante con id ".concat(o," del grupo con id ").concat(this.esteGrupo.id)),this.$apollo.mutate({mutation:c()(lc(),xi),variables:{idGrupo:this.esteGrupo.id,idEstudiante:o}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},crearNuevaActividad:function(){var o=this;console.log("enviando mutacion de crear nueva actividad"),this.creandoActividad=!0,this.$apollo.mutate({mutation:c()(uc(),Ii),variables:{idGrupo:this.esteGrupo.id},update:function(e,i){var n=i.data.crearActividadEnGrupoEstudiantil;console.log("respuesta: ".concat(JSON.stringify(n)));var a=n;try{var t=e.readQuery({query:bc,variables:{idGrupo:o.$route.params.idGrupo,pagina:0}});console.log("Cache: ".concat(JSON.stringify(t)));var s=JSON.parse(JSON.stringify(t));s.misActividadesCreadasGrupoEstudiantil.actividades.unshift(a),console.log("Unshifted Cache: ".concat(JSON.stringify(s))),s.misActividadesCreadasGrupoEstudiantil.actividades&&s.misActividadesCreadasGrupoEstudiantil.actividades.length>o.sizePaginaActividades&&s.misActividadesCreadasGrupoEstudiantil.actividades.pop(),console.log("Popped Cache: ".concat(JSON.stringify(s))),e.writeQuery({query:bc,variables:{idGrupo:o.$route.params.idGrupo,pagina:0},data:s}),console.log("cache actualizado")}catch(V){return void console.log("Error actualizando cache: ".concat(V))}}}).then((function(e){o.creandoActividad=!1,console.log("resp. ".concat(e))})).catch((function(e){o.creandoActividad=!1,console.log("error: ".concat(e))}))},eliminarActividadCache:function(o){console.log("Evento de eliminar actividad ".concat(o))},getMoreMisActividades:function(){var o=this;this.paginaMisActividades++,console.log("Fetching more"),this.loadingMasMisActividades=!0,this.$apollo.queries.misActividadesCreadas.fetchMore({variables:{pagina:this.paginaMisActividades,idGrupo:this.$route.params.idGrupo},updateQuery:function(e,i){var n=i.fetchMoreResult,a=n.misActividadesCreadasGrupoEstudiantil.actividades,t=n.misActividadesCreadasGrupoEstudiantil.hayMas;return o.hayMasMisActividades=t,{misActividadesCreadasGrupoEstudiantil:{__typename:e.misActividadesCreadasGrupoEstudiantil.__typename,actividades:[].concat(Object(ci["a"])(e.misActividadesCreadasGrupoEstudiantil.actividades),Object(ci["a"])(a)),hayMas:t}}}}).then((function(){o.loadingMasMisActividades=!1})).catch((function(e){o.loadingMasMisActividades=!1,console.log("Error en fetchMore: E: ".concat(e))}))},getMoreTodasActividades:function(){var o=this;this.paginaTodasActividades++,console.log("Fetching more todasActividades"),this.loadingMasTodasActividades=!0,this.$apollo.queries.todasActividades.fetchMore({variables:{pagina:this.paginaTodasActividades,idGrupo:this.$route.params.idGrupo},updateQuery:function(e,i){var n=i.fetchMoreResult,a=n.todasActividadesGrupoEstudiantil.actividades,t=n.todasActividadesGrupoEstudiantil.hayMas;return o.hayMasTodasActividades=t,{todasActividadesGrupoEstudiantil:{__typename:e.todasActividadesGrupoEstudiantil.__typename,actividades:[].concat(Object(ci["a"])(e.todasActividadesGrupoEstudiantil.actividades),Object(ci["a"])(a)),hayMas:t}}}}).then((function(){o.loadingMasTodasActividades=!1})).catch((function(e){o.loadingMasTodasActividades=!1,console.log("Error en fetchMore: E: ".concat(e))}))},addDesarrolloActividad:function(o,e){console.log("En la actividad ".concat(e," se añadirá un desarrollo: ").concat(o))}},beforeRouteUpdate:function(o,e,i){console.log("Saliendo de ".concat(e.name," hacia ").concat(o.name," ")),"ActividadesDeGrupo"!=e.name&&"ActividadesDeProfe"!=e.name||(this.ventanaDeshabilitada=!0),i()}},Nc=gc,yc=(i("d70e"),Object(m["a"])(Nc,Tr,kr,!1,null,"0438ff20",null)),Cc=yc.exports,Ec=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"actividadesDeProfe",class:{deshabilitada:o.ventanaDeshabilitada}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.ventanaDeshabilitada,expression:"ventanaDeshabilitada"}]}),i("icono-persona",{directives:[{name:"show",rawName:"v-show",value:!o.ventanaDeshabilitada,expression:"!ventanaDeshabilitada"}],attrs:{estaPersona:o.esteProfe}}),i("div",{attrs:{id:"listaActividades"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idActividadSeleccionada=null}}},o._l(o.actividadesOrdenadas,(function(e){return i("actividad",{key:e.id,attrs:{idActividad:e.id,idGrupo:e.idGrupo,seleccionada:o.idActividadSeleccionada==e.id},on:{clickTrianguloSeleccion:function(i){o.idActividadSeleccionada==e.id?o.idActividadSeleccionada=null:o.idActividadSeleccionada=e.id}},nativeOn:{click:function(i){o.idActividadSeleccionada!=e.id&&(o.idActividadSeleccionada=e.id)}}})})),1)],1)},wc=[];function Dc(){var o=Object(s["a"])(["\n        query($idProfe: ID!) {\n          publicUsuario(idUsuario: $idProfe) {\n            ...fragResponsables\n          }\n        }\n        ","\n      "]);return Dc=function(){return o},o}function jc(){var o=Object(s["a"])(["\n  query($idProfe: ID!) {\n    misActividadesEstudiantilesDeProfe(idProfe: $idProfe) {\n      id\n      nombre\n      idGrupo\n    }\n  }\n"]);return jc=function(){return o},o}var xc=c()(jc()),Pc={name:"ActividadesDeProfe",components:{IconoPersona:Cr,Actividad:dc,Loading:Mo},apollo:{esteProfe:{query:c()(Dc(),xi),variables:function(){return{idProfe:this.$route.params.idProfe}},update:function(o){var e=o.publicUsuario;return e}},actividades:{query:xc,variables:function(){return{idProfe:this.$route.params.idProfe}},update:function(o){var e=o.misActividadesEstudiantilesDeProfe;return this.ventanaDeshabilitada=!1,e},fetchPolicy:"cache-and-network"}},data:function(){return{idActividadSeleccionada:null,actividades:[],ventanaDeshabilitada:!0}},computed:{actividadesParaMiGrupo:function(){return console.log(""),!1},actividadesOrdenadas:function(){var o=JSON.parse(JSON.stringify(this.actividades));return o.sort((function(o,e){return new Date(e.fechaUpload)-new Date(o.fechaUpload)})),o}},methods:{eliminarParticipacionDeCache:function(o){var e=o.idParticipacion,i=o.idDesarrollo,n=o.idActividad;console.log("Eliminando participacion ".concat(e," del desarrollo ").concat(i," de la actividad ").concat(n," de cache"));var a=this.$apollo.provider.defaultClient,t=a.readQuery({query:xc,variables:{idProfe:this.$route.params.idProfe}});console.log("data: ".concat(JSON.stringify(t.misActividadesEstudiantilesDeProfe).length));var s=t.misActividadesEstudiantilesDeProfe.find((function(o){return o.id==n})).desarrollos.find((function(o){return o.id==i})),r=s.participaciones.findIndex((function(o){return o.id==e}));if(s.participaciones.splice(r,1),console.log("data: ".concat(JSON.stringify(t.misActividadesEstudiantilesDeProfe).length)),s.participaciones.length<1){console.log("Este desarrollo se quedó sin participaciones");var c=t.misActividadesEstudiantilesDeProfe.find((function(o){return o.id==n})),d=c.desarrollos.findIndex((function(o){return o.id==i}));c.desarrollos.splice(d,1)}a.writeQuery({query:xc,variables:{idProfe:this.$route.params.idProfe},data:t})},addDesarrolloActividad:function(o,e){console.log("En la actividad ".concat(e," se añadirá un desarrollo: ").concat(JSON.stringify(o)))},addRespuestaActividad:function(o,e){var i=o.nuevaRespuesta,n=o.idDesarrollo;console.log("Adding nueva respuesta ".concat(JSON.stringify(i)," al desarrollo ").concat(n," de la actividad ").concat(e));var a=this.$apollo.provider.defaultClient,t=a.readQuery({query:xc,variables:{idProfe:this.$route.params.idProfe}}),s=t.misActividadesEstudiantilesDeProfe,r=s.find((function(o){return o.id==e}));if(r){var c=r.desarrollos.find((function(o){return o.id==n}));c?(c.participaciones.some((function(o){return o.id==i.id}))||(c.participaciones.push(i),console.log("Nueva respuesta insertada")),a.writeQuery({query:xc,variables:{idProfe:this.$route.params.idProfe},data:t})):console.log("No existía el desarollo")}else console.log("No existía la actividad")}},beforeRouteUpdate:function(o,e,i){console.log("Saliendo de ".concat(e.name," hacia ").concat(o.name," ")),"ActividadesDeGrupo"!=e.name&&"ActividadesDeProfe"!=e.name||(this.ventanaDeshabilitada=!0,this.esteProfe.nombre="Profe"),i()}},Sc=Pc,Rc=(i("c4aa"),Object(m["a"])(Sc,Ec,wc,!1,null,"618957ec",null)),Ic=Rc.exports,Tc=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"portadaActividadesEstudiantiles"},[i("div",{attrs:{id:"cuadroCentro"}},[i("center",[i("h3",{attrs:{id:"titulo"}},[o._v("¡Hola!")])]),i("p",[o._v("Selecciona uno de tus profes para ver las actividades que te ha enviado")])],1)])},kc=[],Oc={name:"PortadaActividadesEstudiantiles",data:function(){var o="Escoje una";return{mensaje:o}}},Mc=Oc,Bc=(i("064c"),Object(m["a"])(Mc,Tc,kc,!1,null,"b57d0b6e",null)),Fc=Bc.exports,$c=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"actividadEspecifica"},[o.actividadLoaded?i("icono-persona",{attrs:{estaPersona:o.laActividad.infoCreador}}):o._e(),i("loading",{directives:[{name:"show",rawName:"v-show",value:!o.actividadLoaded,expression:"!actividadLoaded"}],attrs:{texto:"Cargando..."}}),o.actividadLoaded?i("actividad",{ref:"laActividad",attrs:{estaActividad:o.laActividad,seleccionada:o.seleccionarActividad&&o.actividadLoaded,idActividad:o.laActividad.id,idGrupo:o.laActividad.idGrupo},on:{participacionEliminada:o.eliminarParticipacionDeCache},nativeOn:{click:function(e){if(e.target!==e.currentTarget)return null;o.seleccionarActividad=!o.seleccionarActividad}}}):o._e()],1)},Qc=[];function qc(){var o=Object(s["a"])(["\n  query($idActividad: ID!) {\n    actividadEstudiantil(idActividad: $idActividad) {\n      id\n      nombre\n      idGrupo\n      infoCreador{\n        id\n        nombres\n        apellidos\n        username\n      }\n    }\n  }\n"]);return qc=function(){return o},o}var Uc=c()(qc()),Vc={components:{Actividad:dc,Loading:Mo,IconoPersona:Cr},name:"ActividadEspecifica",apollo:{laActividad:{query:Uc,variables:function(){return{idActividad:this.$route.params.idActividad}},fetchPolicy:"network-only",update:function(o){var e=o.actividadEstudiantil;return this.seleccionarActividad=!0,this.actividadLoaded=!0,e}}},data:function(){return{actividadLoaded:!1,seleccionarActividad:!1}},methods:{eliminarParticipacionDeCache:function(o){var e=o.idParticipacion,i=o.idDesarrollo,n=o.idActividad;if(console.log("Eliminando participacion ".concat(e," del desarrollo ").concat(i," de la actividad ").concat(n," de cache")),n==this.laActividad.id){var a=this.$apollo.provider.defaultClient,t=a.readQuery({query:Uc,variables:{idActividad:n}});console.log("data: ".concat(JSON.stringify(t.actividadEstudiantil).length));var s=t.actividadEstudiantil.desarrollos.find((function(o){return o.id==i}));if(s){var r=s.participaciones.findIndex((function(o){return o.id==e}));if(r>-1){if(s.participaciones.splice(r,1),console.log("data: ".concat(JSON.stringify(t.actividadEstudiantil).length)),s.participaciones.length<1){console.log("Este desarrollo se quedó sin participaciones");var c=t.actividadEstudiantil,d=c.desarrollos.findIndex((function(o){return o.id==i}));c.desarrollos.splice(d,1)}a.writeQuery({query:Uc,variables:{idActividad:n},data:t})}}else console.log("Desarrollo desconocido")}else console.log("No correspondía a esta actividad")}},computed:{refresh:function(){return this.$store.state.refreshActividadEspecifica}},watch:{refresh:function(){this.$refs.laActividad.refresh()}}},Lc=Vc,Gc=(i("e559"),Object(m["a"])(Lc,$c,Qc,!1,null,"4d579d68",null)),Kc=Gc.exports,Zc=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"home"},[i("div",{staticClass:"anuncio"},[i("center",[i("h3",[o._v("!Bienvenidos y bienvenidas a la plataforma Pepepe!")])])],1)])},zc=[],Jc={name:"Home"},_c=Jc,Hc=(i("8b71"),Object(m["a"])(_c,Zc,zc,!1,null,null,null)),Yc=Hc.exports,Xc=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"trabajo"},[n("div",{staticClass:"bordeAbajo",attrs:{id:"zonaNombre"}},[n("div",{staticClass:"barraSuperiorZona"}),n("div",{attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),n("img",{attrs:{src:i("e463"),alt:"",id:"imagenIcono"}})]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[o._m(0),n("div",{ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")])]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaEnlaces"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoEnlaces=!o.mostrandoEnlaces}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoEnlaces?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Enlaces ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoEnlaces,expression:"mostrandoEnlaces"}]},[n("div",{staticClass:"controlesZona",class:{deshabilitado:o.enviandoQueryEnlaces},attrs:{id:"controlesEnlaces"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryEnlaces,expression:"enviandoQueryEnlaces"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.usuarioResponsable?n("div",{staticClass:"controlesEnlaces hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryEnlaces},attrs:{id:"botonCrearEnlace"},on:{click:o.crearNuevoEnlace}},[o._v(" Crear enlace ")]):o._e()],1),n("div",{attrs:{id:"listaEnlaces"}},o._l(o.esteTrabajo.enlaces,(function(e){return n("enlace-nodo-solidaridad",{key:e.id,attrs:{esteEnlace:e,idNodo:o.esteTrabajo.id,tipoNodo:"trabajo"},on:{meElimine:function(i){return o.eliminarEnlaceCache(e.id)}}})})),1)])]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoResponsables=!o.mostrandoResponsables}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoResponsables?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Responsable"+o._s(1===o.esteTrabajo.responsables.length?"":"s")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoResponsables,expression:"mostrandoResponsables"}]},[n("div",{staticClass:"controlesZona",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"controlesResponsables"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.esteTrabajo.responsables.length<1?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),1==o.usuarioLogeado&&o.usuarioResponsable&&o.responsablesSolicitados<1?n("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idResponsableSeleccionado,expression:"idResponsableSeleccionado===null"}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"solicitarResponsable"},on:{click:function(e){return o.setResponsablesSolicitados(1)}}},[o._v(" Solicitar responsable ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsable&&!o.usuarioPosibleResponsableTrabajo&&o.esteTrabajo.responsables.length>0?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsable&&1!=o.usuarioPosibleResponsableTrabajo?o._e():n("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idResponsableSeleccionado,expression:"idResponsableSeleccionado===null"}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioResponsable?n("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idResponsableSeleccionado&&0==o.responsableSeleccionadoEstaAceptado,expression:"\n            idResponsableSeleccionado != null &&\n            responsableSeleccionadoEstaAceptado == false\n          "}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}},[o._v(" Aceptar como responsable ")]):o._e()],1),n("div",{attrs:{id:"listaResponsables"},on:{click:function(e){e.stopPropagation(),o.idResponsableSeleccionado=null}}},[o._l(o.esteTrabajo.responsables,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e}}})})),o._l(o.esteTrabajo.posiblesResponsables,(function(e){return n("icono-persona-autonomo",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable||o.usuario&&o.usuario.id&&o.usuario.id===e,expression:"\n            usuarioResponsable ||\n            (usuario && usuario.id && usuario.id === idPersona)\n          "}],key:e,staticClass:"personaPosibleResponsable",attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e},dblclick:function(i){return i.shiftKey?o.aceptarResponsable(e):null}}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:o.responsablesSolicitados>0,expression:"responsablesSolicitados > 0"}],staticClass:"iconoResponsablesSolicitados"},[n("img",{staticClass:"imagenResponsablesSolicitados",attrs:{src:i("5e1a"),alt:"Usuario solicitado",title:"Personas adicionales solicitadas"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.responsablesSolicitados,expression:"responsablesSolicitados"}],style:[{backgroundColor:o.esteTrabajo.responsablesSolicitados!=o.responsablesSolicitados?"orange":"white"}],attrs:{type:"number",id:"inputResponsablesSolicitados",readonly:!o.usuarioResponsable},domProps:{value:o.responsablesSolicitados},on:{input:function(e){e.target.composing||(o.responsablesSolicitados=e.target.value)}}})])],2)])]),n("div",{ref:"zonaMateriales",staticClass:"zonaPrimerNivel",attrs:{id:"zonaMateriales"},on:{click:function(e){e.stopPropagation(),o.idMaterialSeleccionado=null}}},[o._m(1),n("div",{staticClass:"controlesZona",attrs:{id:"controlesMateriales"}},[o.usuarioResponsable?n("div",{staticClass:"controlesMateriales botonesControles hoverGris",class:{deshabilitado:o.enviandoQueryGestionMateriales},on:{click:o.crearNuevoMaterial}},[o._v(" Añadir material ")]):o._e(),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryGestionMateriales,expression:"enviandoQueryGestionMateriales"}],attrs:{texto:"Esperando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.esteTrabajo.materiales.length>0,expression:"esteTrabajo.materiales.length > 0"}],attrs:{id:"listaMateriales"}},o._l(o.esteTrabajo.materiales,(function(e){return n("material-trabajo",{key:e.id,attrs:{esteMaterial:e,seleccionado:e.id==o.idMaterialSeleccionado,usuarioResponsable:o.usuarioResponsable,idTrabajo:o.esteTrabajo.id},on:{meElimine:function(i){return o.eliminarMaterialDeCache(e.id)}},nativeOn:{click:function(i){i.stopPropagation(),o.idMaterialSeleccionado=e.id}}})})),1)]),o.esteTrabajo.idForoResponsables&&o.usuarioResponsable?n("div",{ref:"zonaForo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaForo"}},[o._m(2),n("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteTrabajo.idForoResponsables}})],1):o._e(),n("div",{attrs:{id:"controlesTrabajo"}})])},Wc=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraSuperiorZona"},[i("span",{staticClass:"nombreZona"},[o._v("Descripcion")])])},function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraSuperiorZona"},[i("div",{staticClass:"nombreZona"},[o._v("Materiales")])])},function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraSuperiorZona"},[i("div",{staticClass:"nombreZona"},[o._v("foro")])])}],od=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"materialTrabajo",class:{deshabilitado:o.deshabilitado,seleccionado:o.seleccionado}},[n("div",{staticClass:"campoPrimerNivel",attrs:{id:"campoNombre"}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombreMaterial"}},[o._v(" "+o._s(o.esteMaterial.nombre)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable&&o.seleccionado,expression:"usuarioResponsable && seleccionado"}],staticClass:"controlesCampo",attrs:{id:"controlesCampoNombre"}},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del material"},on:{click:o.toggleEditandoNombre}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:o.guardarNuevoNombre}})]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}})],1),n("div",{staticClass:"campoPrimerNivel",attrs:{id:"campoCantidades"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoCantidadDisponible,expression:"nuevoCantidadDisponible"},{name:"show",rawName:"v-show",value:o.editandoCantidades,expression:"editandoCantidades"}],ref:"inputNuevoCantidadDisponible",staticClass:"inputsCantidad",attrs:{type:"number",min:"0",id:"inputNuevoCantidadDisponible"},domProps:{value:o.nuevoCantidadDisponible},on:{input:function(e){e.target.composing||(o.nuevoCantidadDisponible=e.target.value)}}}),n("span",{directives:[{name:"show",rawName:"v-show",value:!o.editandoCantidades,expression:"!editandoCantidades"}],staticClass:"campoCantidad"},[o._v(" "+o._s(o.esteMaterial.cantidadDisponible)+" ")]),o._v(" / "),n("span",{directives:[{name:"show",rawName:"v-show",value:!o.editandoCantidades,expression:"!editandoCantidades"}],staticClass:"campoCantidad"},[o._v(" "+o._s(o.esteMaterial.cantidadNecesaria)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoCantidadNecesaria,expression:"nuevoCantidadNecesaria"},{name:"show",rawName:"v-show",value:o.editandoCantidades,expression:"editandoCantidades"}],ref:"inputNuevoCantidadNecesaria",staticClass:"inputsCantidad",attrs:{type:"number",min:"1",id:"inputNuevoCantidadNecesaria"},domProps:{value:o.nuevoCantidadNecesaria},on:{input:function(e){e.target.composing||(o.nuevoCantidadNecesaria=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable&&o.seleccionado,expression:"usuarioResponsable && seleccionado"}],staticClass:"controlesCampo",attrs:{id:"controlesCampoCantidades"}},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrCantidades",title:"Editar cantidades del material"},on:{click:o.toggleEditandoCantidades}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoCantidades&&0==o.nuevoCantidadesIlegal,expression:"editandoCantidades == true && nuevoCantidadesIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoCantidades"},on:{click:o.guardarNuevoCantidades}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"campoPrimerNivel",attrs:{id:"campoDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable,expression:"usuarioResponsable"}],staticClass:"controlesCampo"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrDescripcion",title:"Editar descripcion del material"},on:{click:o.toggleEditandoDescripcion}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n          editandoDescripcion == true && nuevoDescripcionIlegal == false\n        "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:o.guardarNuevoDescripcion}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteMaterial.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&o.usuarioResponsable,expression:"seleccionado && usuarioResponsable"}],attrs:{id:"bEliminar"},on:{click:o.eliminarse}},[o._v(" Eliminar ")])])},ed=[];function id(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idMaterial: ID!) {\n              eliminarMaterialDeTrabajoSolidaridad(\n                idTrabajo: $idTrabajo\n                idMaterial: $idMaterial\n              )\n            }\n          "]);return id=function(){return o},o}function nd(){var o=Object(s["a"])(["\n            mutation(\n              $idTrabajo: ID!\n              $idMaterial: ID!\n              $nuevoCantidadNecesaria: Int!\n              $nuevoCantidadDisponible: Int!\n            ) {\n              editarCantidadesMaterialTrabajo(\n                idTrabajo: $idTrabajo\n                idMaterial: $idMaterial\n                nuevoCantidadNecesaria: $nuevoCantidadNecesaria\n                nuevoCantidadDisponible: $nuevoCantidadDisponible\n              ) {\n                id\n                cantidadNecesaria\n                cantidadDisponible\n              }\n            }\n          "]);return nd=function(){return o},o}function ad(){var o=Object(s["a"])(["\n            mutation(\n              $idTrabajo: ID!\n              $idMaterial: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionMaterialTrabajo(\n                idTrabajo: $idTrabajo\n                idMaterial: $idMaterial\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return ad=function(){return o},o}function td(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idMaterial: ID!, $nuevoNombre: String!) {\n              editarNombreMaterialTrabajo(\n                idTrabajo: $idTrabajo\n                idMaterial: $idMaterial\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return td=function(){return o},o}var sd=/[^ a-zA-ZÀ-ž0-9_():.,-]/,rd=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,cd={name:"MaterialTrabajo",components:{Loading:Mo},props:{usuarioResponsable:Boolean,seleccionado:Boolean,idTrabajo:String,esteMaterial:Object},data:function(){return{deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,nuevoCantidadNecesaria:1,nuevoCantidadDisponible:0,editandoCantidades:!1,enviandoNuevoCantidades:!1}},computed:{nuevoNombreIlegal:function(){return!this.nuevoNombre||this.nuevoNombre.length<1||!!sd.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!rd.test(this.nuevoDescripcion)},nuevoCantidadesIlegal:function(){return this.nuevoCantidadNecesaria<0||this.nuevoCantidadDisponible<0}},methods:{toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteMaterial.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteMaterial.descripcion},toggleEditandoCantidades:function(){this.editandoCantidades=!this.editandoCantidades,this.nuevoCantidadNecesaria=this.esteMaterial.cantidadNecesaria,this.nuevoCantidadDisponible=this.esteMaterial.cantidadDisponible},guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteMaterial.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(td()),variables:{idMaterial:this.esteMaterial.id,idTrabajo:this.idTrabajo,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteMaterial.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(ad()),variables:{idTrabajo:this.idTrabajo,idMaterial:this.esteMaterial.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},guardarNuevoCantidades:function(){var o=this;this.nuevoCantidadNecesaria!=this.esteMaterial.cantidadNecesaria||this.nuevoCantidadDisponible!=this.esteMaterial.cantidadDisponible?(console.log("guardando nuevo cantidades"),this.enviandoNuevoCantidades=!0,this.$apollo.mutate({mutation:c()(nd()),variables:{idTrabajo:this.idTrabajo,idMaterial:this.esteMaterial.id,nuevoCantidadNecesaria:parseInt(this.nuevoCantidadNecesaria),nuevoCantidadDisponible:parseInt(this.nuevoCantidadDisponible)}}).then((function(){o.enviandoNuevoCantidades=!1,o.editandoCantidades=!1})).catch((function(e){o.enviandoNuevoCantidades=!1,console.log("Error. E :".concat(e))}))):this.editandoCantidades=!1},eliminarse:function(){var o=this;console.log("Material eliminandose"),confirm("¿Seguro de eliminar este material?")&&(this.deshabilitado=!0,this.$apollo.mutate({mutation:c()(id()),variables:{idTrabajo:this.idTrabajo,idMaterial:this.esteMaterial.id}}).then((function(e){var i=e.data.eliminarMaterialDeTrabajoSolidaridad;o.deshabilitado=!1,console.log("Resultado: ".concat(i)),o.$emit("meElimine")})).catch((function(e){o.deshabilitado=!1,console.log("Error. E: ".concat(e))})))}},watch:{seleccionado:function(){0==this.seleccionado&&(this.editandoDescripcion=!1,this.editandoNombre=!1,this.editandoCantidades=!1)}}},dd=cd,ud=(i("c9a3"),Object(m["a"])(dd,od,ed,!1,null,"7b91b9d0",null)),ld=ud.exports,vd=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"enlaceNodoSolidaridad",class:{deshabilitado:o.enviandoQueryGlobal}},[n("div",{attrs:{id:"lineaPrincipal"}},[n("a",{attrs:{href:o.esteEnlace.link,target:"blank"}},[n("img",{attrs:{src:i("83e2"),alt:"Abrir",title:"Abrir enlace",id:"botonAbrirEnlace"}})]),n("img",{attrs:{src:i("5e1f"),alt:"Descripcion",title:o.mostrarDescripcion?"Ocultar descripción":"MostrarDescripción",id:"botonMostrarDescripcion"},on:{click:function(e){o.mostrarDescripcion=!o.mostrarDescripcion}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],class:{deshabilitado:o.enviandoNuevoNombre},attrs:{id:"nombre"},on:{click:o.iniciarEdicionNombre}},[o._v(" "+o._s(o.esteEnlace.nombre)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNuevoNombre",class:{deshabilitado:o.enviandoNuevoNombre},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},blur:function(e){o.editandoNombre=!1},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("img",{attrs:{src:i("2191"),alt:"Eliminar",title:"Eliminar enlace",id:"botonEliminar"},on:{click:o.eliminarse}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrarDescripcion,expression:"mostrarDescripcion"}],class:{deshabilitado:o.enviandoNuevoDescripcion},attrs:{id:"campoDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoLink,expression:"!editandoLink"}],class:{deshabilitado:o.enviandoNuevoLink},attrs:{id:"link"},on:{click:o.iniciarEdicionLink}},[o._v(" "+o._s(o.esteEnlace.link)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoLink,expression:"nuevoLink"},{name:"show",rawName:"v-show",value:o.editandoLink,expression:"editandoLink"}],ref:"inputNuevoLink",staticClass:"inputNuevoLink",class:{deshabilitado:o.enviandoNuevoLink},attrs:{id:"inputNuevoLink",type:"text"},domProps:{value:o.nuevoLink},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoLink(e)},blur:function(e){o.editandoLink=!1},input:function(e){e.target.composing||(o.nuevoLink=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],staticClass:"campoDescripcion",attrs:{id:"descripcion"},on:{click:o.iniciarEdicionDescripcion}},[o._v(" "+o._s(o.esteEnlace.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"campoDescripcion",class:{deshabilitado:o.enviandoNuevoDescripcion},attrs:{id:"inputNuevaDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),n("div",{attrs:{id:"controlesEditarDescripcion"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],attrs:{src:i("4fc3"),width:"25px",alt:"Guardar",id:"botonGuardarDescripcion",title:"Guardar descripción"},on:{click:o.guardarNuevoDescripcion}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],attrs:{src:i("9b5f"),alt:"Cancelar",title:"Cancelar cambios",width:"25px",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})])])])},pd=[];i("9911");function md(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $tipoNodo: String!\n              $idEnlace: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionEnlaceNodoSolidaridad(\n                idNodo: $idNodo\n                tipoNodo: $tipoNodo\n                idEnlace: $idEnlace\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return md=function(){return o},o}function hd(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $tipoNodo: String!\n              $idEnlace: ID!\n              $nuevoLink: String!\n            ) {\n              editarLinkEnlaceNodoSolidaridad(\n                idNodo: $idNodo\n                tipoNodo: $tipoNodo\n                idEnlace: $idEnlace\n                nuevoLink: $nuevoLink\n              ) {\n                id\n                link\n              }\n            }\n          "]);return hd=function(){return o},o}function Ad(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $tipoNodo: String!\n              $idEnlace: ID!\n              $nuevoNombre: String!\n            ) {\n              editarNombreEnlaceNodoSolidaridad(\n                idNodo: $idNodo\n                tipoNodo: $tipoNodo\n                idEnlace: $idEnlace\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Ad=function(){return o},o}function bd(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idEnlace: ID!, $tipoNodo: String!) {\n              eliminarEnlaceNodoSolidaridad(\n                idNodo: $idNodo\n                idEnlace: $idEnlace\n                tipoNodo: $tipoNodo\n              )\n            }\n          "]);return bd=function(){return o},o}var fd=/[^ a-zA-ZÀ-ž0-9_():.,-]/,gd=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,Nd={name:"EnlaceNodoSolidaridad",props:{esteEnlace:Object,idNodo:String,tipoNodo:String},data:function(){return{mostrarDescripcion:!1,enviandoQueryGlobal:!1,nuevoNombre:"",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Descripción",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,nuevoLink:"",editandoLink:!1,enviandoNuevoLink:!1}},methods:{eliminarse:function(){var o=this;confirm("¿Eliminar enlace? (Esta operación no puede deshacerese")&&(this.enviandoQueryGlobal=!0,this.$apollo.mutate({mutation:c()(bd()),variables:{idNodo:this.idNodo,idEnlace:this.esteEnlace.id,tipoNodo:this.tipoNodo}}).then((function(e){var i=e.data.eliminarEnlaceNodoSolidaridad;i&&o.$emit("meElimine"),o.enviandoQueryGlobal=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryGlobal=!1})))},iniciarEdicionNombre:function(){var o=this;this.editandoNombre=!0,this.nuevoNombre=this.esteEnlace.nombre,this.$nextTick((function(){o.$refs.inputNuevoNombre.focus()}))},guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteEnlace.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(Ad()),variables:{idNodo:this.idNodo,idEnlace:this.esteEnlace.id,nuevoNombre:this.nuevoNombre,tipoNodo:this.tipoNodo}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},iniciarEdicionLink:function(){var o=this;this.editandoLink=!0,this.nuevoLink=this.esteEnlace.link,this.$nextTick((function(){o.$refs.inputNuevoLink.focus()}))},guardarNuevoLink:function(){var o=this;this.nuevoLinkIlegal?console.log("No enviado"):this.nuevoLink!=this.esteEnlace.link?(console.log("guardando nuevo link"),this.enviandoNuevoLink=!0,this.$apollo.mutate({mutation:c()(hd()),variables:{idNodo:this.idNodo,idEnlace:this.esteEnlace.id,nuevoLink:this.nuevoLink,tipoNodo:this.tipoNodo}}).then((function(){o.enviandoNuevoLink=!1,o.editandoLink=!1})).catch((function(e){o.enviandoNuevoLink=!1,console.log("Error. E :".concat(e))}))):this.editandoLink=!1},iniciarEdicionDescripcion:function(){var o=this;this.editandoDescripcion=!0,this.nuevoDescripcion=this.esteEnlace.descripcion,this.$nextTick((function(){o.$refs.inputNuevoDescripcion.focus()}))},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteEnlace.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(md()),variables:{idNodo:this.idNodo,idEnlace:this.esteEnlace.id,nuevoDescripcion:this.nuevoDescripcion,tipoNodo:this.tipoNodo}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1}},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!fd.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!gd.test(this.nuevoDescripcion)},nuevoLinkIlegal:function(){return!1}}},yd=Nd,Cd=(i("5542"),Object(m["a"])(yd,vd,pd,!1,null,"3cdb00a1",null)),Ed=Cd.exports;function wd(){var o=Object(s["a"])(["\n        mutation($idNodo: ID!){\n          setNodoSolidaridadAsCoordsVistaUsuario(idNodo: $idNodo)\n        }\n      "]);return wd=function(){return o},o}function Dd(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $tipoNodo: String!) {\n              crearEnlaceNodoSolidaridad(idNodo: $idNodo, tipoNodo: $tipoNodo) {\n                id\n                nombre\n                descripcion\n                link\n                tipo\n              }\n            }\n          "]);return Dd=function(){return o},o}function jd(){var o=Object(s["a"])(["\n            mutation (\n              $idTrabajo: ID!\n              $nuevoCantidadResponsablesSolicitados: Int!\n            ) {\n              setResponsablesSolicitadosTrabajo(\n                idTrabajo: $idTrabajo\n                nuevoCantidadResponsablesSolicitados: $nuevoCantidadResponsablesSolicitados\n              ) {\n                id\n                responsablesSolicitados\n              }\n            }\n          "]);return jd=function(){return o},o}function xd(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!) {\n              crearMaterialEnTrabajoSolidaridad(                \n                idTrabajo: $idTrabajo\n              ) {\n                id\n                nombre\n                descripcion\n                cantidadNecesaria\n                cantidadDisponible\n              }\n            }\n          "]);return xd=function(){return o},o}function Pd(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                responsablesSolicitados\n              }\n            }\n          "]);return Pd=function(){return o},o}function Sd(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Sd=function(){return o},o}function Rd(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $idUsuario: ID!) {\n              addPosibleResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                posiblesResponsables\n              }\n            }\n          "]);return Rd=function(){return o},o}function Id(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Id=function(){return o},o}function Td(){var o=Object(s["a"])(["\n  query ($idTrabajo: ID!) {\n    trabajo(idTrabajo: $idTrabajo) {\n      id\n      nombre\n      descripcion\n       enlaces {\n        id\n        nombre\n        descripcion\n        link\n        tipo\n      }\n      idForoResponsables\n      responsables\n      posiblesResponsables\n      responsablesSolicitados\n      nodoParent{\n        idNodo\n        tipo\n      }      \n      materiales {\n        id\n        nombre\n        descripcion\n        cantidadNecesaria\n        cantidadDisponible\n      }\n    }\n  }\n"]);return Td=function(){return o},o}var kd=c()(Td()),Od={name:"Trabajo",components:{Foro:Vn,IconoPersonaAutonomo:Ki,MaterialTrabajo:ld,Loading:Mo,EnlaceNodoSolidaridad:Ed},apollo:{esteTrabajo:{query:kd,variables:function(){return{idTrabajo:this.$route.params.idTrabajo}},update:function(o){var e=o.trabajo;return this.responsablesSolicitados=e.responsablesSolicitados,e},skip:function(){return!this.$route.params.idTrabajo}}},data:function(){return{esteTrabajo:{responsables:[],materiales:[],enlaces:[]},responsablesSolicitados:0,idResponsableSeleccionado:null,idNodoSeleccionado:null,deshabilitado:!1,idMaterialSeleccionado:null,creandoMaterial:!1,enviandoQueryResponsables:!1,mostrandoResponsables:!0,enviandoQueryEnlaces:!1,mostrandoEnlaces:!0,enviandoQueryGestionMateriales:!1}},computed:{usuarioResponsable:function(){return this.esteTrabajo.responsables.includes(this.usuario.id)},infoAsParent:function(){return{id:this.esteTrabajo.id,tipo:"trabajo",nombre:this.esteTrabajo.nombre}},usuarioPosibleResponsableTrabajo:function(){return!!this.esteTrabajo.posiblesResponsables&&!!this.esteTrabajo.posiblesResponsables.includes(this.usuario.id)},responsableSeleccionadoEstaAceptado:function(){return this.esteTrabajo.responsables.includes(this.idResponsableSeleccionado)}},methods:{asumirComoResponsable:function(){var o=this;console.log("enviando id ".concat(this.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id," en el proyecto con id ").concat(this.idEsteProyecto)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Id()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},entrarListaPosiblesResponsables:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles responsables del trabajo con id ".concat(this.esteTrabajo.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Rd()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},abandonarListaResponsables:function(){var o=this;console.log("Abandonando este trabajo"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Sd()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},aceptarResponsable:function(o){var e=this;console.log("aceptando como responsable al usuario ".concat(o)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Pd()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))},crearNuevoMaterial:function(){var o=this;console.log("enviando mutacion de crear nuevo material"),this.creandoMaterial=!0,this.enviandoQueryGestionMateriales=!0,this.$apollo.mutate({mutation:c()(xd()),variables:{idTrabajo:this.esteTrabajo.id},update:function(e,i){var n=i.data.crearMaterialEnTrabajoSolidaridad,a=n;try{var t=e.readQuery({query:kd,variables:{idTrabajo:o.esteTrabajo.id}}),s=JSON.parse(JSON.stringify(t));s.trabajo.materiales.push(a),e.writeQuery({query:kd,variables:{idTrabajo:o.esteTrabajo.id},data:s}),console.log("cache actualizado")}catch(V){return void console.log("Error actualizando cache: ".concat(V))}}}).then((function(e){console.log("respuesta. ".concat(e)),o.creandoMaterial=!1,o.enviandoQueryGestionMateriales=!1})).catch((function(e){o.creandoMaterial=!1,console.log("error: ".concat(e)),o.enviandoQueryGestionMateriales=!1}))},eliminarMaterialDeCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:kd,variables:{idTrabajo:this.esteTrabajo.id}}),n=JSON.parse(JSON.stringify(i)),a=n.trabajo.materiales.findIndex((function(e){return e.id==o}));a>-1?n.trabajo.materiales.splice(a,1):console.log("El material no existía en el trabajo"),e.writeQuery({query:kd,variables:{idTrabajo:this.esteTrabajo.id},data:n})},debounceSetResponsablesSolicitados:ks()((function(){this.setResponsablesSolicitados(parseInt(this.responsablesSolicitados))}),2e3),setResponsablesSolicitados:function(o){o<0&&(o=0),this.$apollo.mutate({mutation:c()(jd()),variables:{idTrabajo:this.esteTrabajo.id,nuevoCantidadResponsablesSolicitados:o}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))},crearNuevoEnlace:function(){var o=this;this.enviandoQueryEnlaces=!0,this.$apollo.mutate({mutation:c()(Dd()),variables:{idNodo:this.esteTrabajo.id,tipoNodo:"trabajo"}}).then((function(e){var i=e.data.crearEnlaceNodoSolidaridad,n=o.$apollo.provider.defaultClient,a=n.readQuery({query:kd,variables:{idTrabajo:o.esteTrabajo.id}}),t=JSON.parse(JSON.stringify(a)),s=t.trabajo.enlaces.findIndex((function(o){return o.id===i.id}));s>-1?console.log("El enlace ya estaba en el caché"):t.trabajo.enlaces.push(i),n.writeQuery({query:kd,variables:{idTrabajo:o.esteTrabajo.id},data:t}),o.enviandoQueryEnlaces=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryEnlaces=!1}))},eliminarEnlaceCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:kd,variables:{idTrabajo:this.esteTrabajo.id}}),n=JSON.parse(JSON.stringify(i)),a=n.trabajo.enlaces.findIndex((function(e){return e.id===o}));a>-1?n.trabajo.enlaces.splice(a,1):console.log("El enlace no estaba en el caché"),e.writeQuery({query:kd,variables:{idTrabajo:this.esteTrabajo.id},data:n}),this.enviandoQueryEnlaces=!1}},watch:{responsablesSolicitados:function(o){o!==this.esteTrabajo.responsablesSolicitados&&(console.log("Cambio en responsables solicitados"),this.debounceSetResponsablesSolicitados())}},mounted:function(){this.$apollo.mutate({mutation:c()(wd()),variables:{idNodo:this.$route.params.idTrabajo}})}},Md=Od,Bd=(i("0d1e"),Object(m["a"])(Md,Xc,Wc,!1,null,"1d25718f",null)),Fd=Bd.exports,$d=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"objetivo"},[n("div",{staticClass:"bordeAbajo",attrs:{id:"zonaNombre"}},[n("div",{staticClass:"barraSuperiorZona"}),n("div",{attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteObjetivo.nombre)+" ")]),n("img",{attrs:{src:i("416c"),alt:"",id:"imagenIcono"}})]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[o._m(0),n("div",{ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteObjetivo.descripcion)+" ")])]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaEnlaces"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoEnlaces=!o.mostrandoEnlaces}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoEnlaces?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Enlaces ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoEnlaces,expression:"mostrandoEnlaces"}]},[n("div",{staticClass:"controlesZona",class:{deshabilitado:o.enviandoQueryEnlaces},attrs:{id:"controlesEnlaces"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryEnlaces,expression:"enviandoQueryEnlaces"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.usuarioResponsable?n("div",{staticClass:"controlesEnlaces hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryEnlaces},attrs:{id:"botonCrearEnlace"},on:{click:o.crearNuevoEnlace}},[o._v(" Crear enlace ")]):o._e()],1),n("div",{attrs:{id:"listaEnlaces"}},o._l(o.esteObjetivo.enlaces,(function(e){return n("enlace-nodo-solidaridad",{key:e.id,attrs:{esteEnlace:e,idNodo:o.esteObjetivo.id,tipoNodo:"objetivo"},on:{meElimine:function(i){return o.eliminarEnlaceCache(e.id)}}})})),1)])]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoResponsables=!o.mostrandoResponsables}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoResponsables?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Responsable"+o._s(1===o.esteObjetivo.responsables.length?"":"s")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoResponsables,expression:"mostrandoResponsables"}]},[n("div",{staticClass:"controlesZona",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"controlesResponsables"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.esteObjetivo.responsables.length<1?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),1==o.usuarioLogeado&&o.usuarioResponsable&&o.responsablesSolicitados<1?n("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idResponsableSeleccionado,expression:"idResponsableSeleccionado === null"}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"solicitarResponsable"},on:{click:function(e){return o.setResponsablesSolicitados(1)}}},[o._v(" Solicitar responsable ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsable&&!o.usuarioPosibleResponsableObjetivo&&o.esteObjetivo.responsables.length>0?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsable&&1!=o.usuarioPosibleResponsableObjetivo?o._e():n("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idResponsableSeleccionado,expression:"idResponsableSeleccionado === null"}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioResponsable?n("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idResponsableSeleccionado&&0==o.responsableSeleccionadoEstaAceptado,expression:"\n            idResponsableSeleccionado != null &&\n            responsableSeleccionadoEstaAceptado == false\n          "}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}},[o._v(" Aceptar como responsable ")]):o._e()],1),n("div",{attrs:{id:"listaResponsables"},on:{click:function(e){e.stopPropagation(),o.idResponsableSeleccionado=null}}},[o._l(o.esteObjetivo.responsables,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e}}})})),o._l(o.esteObjetivo.posiblesResponsables,(function(e){return n("icono-persona-autonomo",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable||o.usuario&&o.usuario.id&&o.usuario.id===e,expression:"\n            usuarioResponsable ||\n            (usuario && usuario.id && usuario.id === idPersona)\n          "}],key:e,staticClass:"personaPosibleResponsable",attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e},dblclick:function(i){return i.shiftKey?o.aceptarResponsable(e):null}}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:o.responsablesSolicitados>0,expression:"responsablesSolicitados > 0"}],staticClass:"iconoResponsablesSolicitados"},[n("img",{staticClass:"imagenResponsablesSolicitados",attrs:{src:i("5e1a"),alt:"Usuario solicitado",title:"Personas adicionales solicitadas"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.responsablesSolicitados,expression:"responsablesSolicitados"}],style:[{backgroundColor:o.esteObjetivo.responsablesSolicitados!=o.responsablesSolicitados?"orange":"white"}],attrs:{type:"number",id:"inputResponsablesSolicitados",readonly:!o.usuarioResponsable},domProps:{value:o.responsablesSolicitados},on:{input:function(e){e.target.composing||(o.responsablesSolicitados=e.target.value)}}})])],2)])]),o.esteObjetivo.idForoResponsables&&o.usuarioResponsable?n("div",{ref:"zonaForo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaForo"}},[o._m(1),n("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteObjetivo.idForoResponsables}})],1):o._e(),n("div",{attrs:{id:"controlesObjetivo"}})])},Qd=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraSuperiorZona"},[i("span",{staticClass:"nombreZona"},[o._v("Descripcion")])])},function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraSuperiorZona"},[i("div",{staticClass:"nombreZona"},[o._v("foro")])])}];function qd(){var o=Object(s["a"])(["\n        mutation ($idNodo: ID!) {\n          setNodoSolidaridadAsCoordsVistaUsuario(idNodo: $idNodo)\n        }\n      "]);return qd=function(){return o},o}function Ud(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $tipoNodo: String!) {\n              crearEnlaceNodoSolidaridad(idNodo: $idNodo, tipoNodo: $tipoNodo) {\n                id\n                nombre\n                descripcion\n                link\n                tipo\n              }\n            }\n          "]);return Ud=function(){return o},o}function Vd(){var o=Object(s["a"])(["\n            mutation (\n              $idObjetivo: ID!\n              $nuevoCantidadResponsablesSolicitados: Int!\n            ) {\n              setResponsablesSolicitadosObjetivo(\n                idObjetivo: $idObjetivo\n                nuevoCantidadResponsablesSolicitados: $nuevoCantidadResponsablesSolicitados\n              ) {\n                id\n                responsablesSolicitados\n              }\n            }\n          "]);return Vd=function(){return o},o}function Ld(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $idUsuario: ID!) {\n              addResponsableObjetivo(\n                idObjetivo: $idObjetivo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                responsablesSolicitados\n              }\n            }\n          "]);return Ld=function(){return o},o}function Gd(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $idUsuario: ID!) {\n              removeResponsableObjetivo(\n                idObjetivo: $idObjetivo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Gd=function(){return o},o}function Kd(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $idUsuario: ID!) {\n              addPosibleResponsableObjetivo(\n                idObjetivo: $idObjetivo\n                idUsuario: $idUsuario\n              ) {\n                id\n                posiblesResponsables\n              }\n            }\n          "]);return Kd=function(){return o},o}function Zd(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $idUsuario: ID!) {\n              addResponsableObjetivo(\n                idObjetivo: $idObjetivo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Zd=function(){return o},o}function zd(){var o=Object(s["a"])(["\n  query ($idObjetivo: ID!) {\n    objetivo(idObjetivo: $idObjetivo) {\n      id\n      nombre\n      descripcion\n      idForoResponsables\n      responsables\n      posiblesResponsables\n      responsablesSolicitados\n      enlaces {\n        id\n        nombre\n        descripcion\n        link\n        tipo\n      }\n      nodoParent {\n        idNodo\n        tipo\n      }\n    }\n  }\n"]);return zd=function(){return o},o}var Jd=c()(zd()),_d={name:"Objetivo",components:{Foro:Vn,IconoPersonaAutonomo:Ki,Loading:Mo,EnlaceNodoSolidaridad:Ed},apollo:{esteObjetivo:{query:Jd,variables:function(){return{idObjetivo:this.$route.params.idObjetivo}},update:function(o){var e=o.objetivo;return this.responsablesSolicitados=e.responsablesSolicitados,e},skip:function(){return!this.$route.params.idObjetivo}}},data:function(){return{esteObjetivo:{responsables:[],materiales:[],enlaces:[]},responsablesSolicitados:0,idResponsableSeleccionado:null,idNodoSeleccionado:null,deshabilitado:!1,idMaterialSeleccionado:null,creandoMaterial:!1,enviandoQueryResponsables:!1,mostrandoResponsables:!0,enviandoQueryEnlaces:!1,mostrandoEnlaces:!0}},computed:{usuarioResponsable:function(){return this.esteObjetivo.responsables.includes(this.usuario.id)},infoAsParent:function(){return{id:this.esteObjetivo.id,tipo:"objetivo",nombre:this.esteObjetivo.nombre}},usuarioPosibleResponsableObjetivo:function(){return!!this.esteObjetivo.posiblesResponsables&&!!this.esteObjetivo.posiblesResponsables.includes(this.usuario.id)},responsableSeleccionadoEstaAceptado:function(){return this.esteObjetivo.responsables.includes(this.idResponsableSeleccionado)}},methods:{asumirComoResponsable:function(){var o=this;console.log("enviando id ".concat(this.usuario.id," para la lista de responsables del objetivo con id ").concat(this.esteObjetivo.id," en el proyecto con id ").concat(this.idEsteProyecto)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Zd()),variables:{idObjetivo:this.esteObjetivo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},entrarListaPosiblesResponsables:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles responsables del objetivo con id ".concat(this.esteObjetivo.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Kd()),variables:{idObjetivo:this.esteObjetivo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},abandonarListaResponsables:function(){var o=this;console.log("Abandonando este objetivo"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Gd()),variables:{idObjetivo:this.esteObjetivo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},aceptarResponsable:function(o){var e=this;console.log("aceptando como responsable al usuario ".concat(o)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Ld()),variables:{idObjetivo:this.esteObjetivo.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))},debounceSetResponsablesSolicitados:ks()((function(){this.setResponsablesSolicitados(parseInt(this.responsablesSolicitados))}),2e3),setResponsablesSolicitados:function(o){o<0&&(o=0),this.$apollo.mutate({mutation:c()(Vd()),variables:{idObjetivo:this.esteObjetivo.id,nuevoCantidadResponsablesSolicitados:o}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))},crearNuevoEnlace:function(){var o=this;this.enviandoQueryEnlaces=!0,this.$apollo.mutate({mutation:c()(Ud()),variables:{idNodo:this.esteObjetivo.id,tipoNodo:"objetivo"}}).then((function(e){var i=e.data.crearEnlaceNodoSolidaridad,n=o.$apollo.provider.defaultClient,a=n.readQuery({query:Jd,variables:{idObjetivo:o.esteObjetivo.id}}),t=JSON.parse(JSON.stringify(a)),s=t.objetivo.enlaces.findIndex((function(o){return o.id===i.id}));s>-1?console.log("El enlace ya estaba en el caché"):t.objetivo.enlaces.push(i),n.writeQuery({query:Jd,variables:{idObjetivo:o.esteObjetivo.id},data:t}),o.enviandoQueryEnlaces=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryEnlaces=!1}))},eliminarEnlaceCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Jd,variables:{idObjetivo:this.esteObjetivo.id}}),n=JSON.parse(JSON.stringify(i)),a=n.objetivo.enlaces.findIndex((function(e){return e.id===o}));a>-1?n.objetivo.enlaces.splice(a,1):console.log("El enlace no estaba en el caché"),e.writeQuery({query:Jd,variables:{idObjetivo:this.esteObjetivo.id},data:n}),this.enviandoQueryEnlaces=!1}},watch:{responsablesSolicitados:function(o){o!==this.esteObjetivo.responsablesSolicitados&&(console.log("Cambio en responsables solicitados"),this.debounceSetResponsablesSolicitados())}},mounted:function(){this.$apollo.mutate({mutation:c()(qd()),variables:{idNodo:this.$route.params.idObjetivo}})}},Hd=_d,Yd=(i("db58"),Object(m["a"])(Hd,$d,Qd,!1,null,"735a68ad",null)),Xd=Yd.exports,Wd=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"buscadorTrabajos"},[n("div",{attrs:{id:"zonaCuadroBusqueda"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.textoBusqueda,expression:"textoBusqueda"}],attrs:{type:"text",id:"inputBusqueda",placeholder:"Buscar trabajo"},domProps:{value:o.textoBusqueda},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.buscarTrabajosDB(e)},input:function(e){e.target.composing||(o.textoBusqueda=e.target.value)}}}),n("img",{staticClass:"boton",class:{deshabilitado:!o.textoBusqueda},attrs:{src:i("1d54"),alt:"Buscar",id:"bBuscar",title:"Buscar trabajo"},on:{click:function(e){return e.stopPropagation(),o.buscarTrabajosDB(e)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.viendoBusqueda,expression:"viendoBusqueda"}],attrs:{id:"textoBuscado"}},[o._v(" "+o._s(o.textoBuscado)+" "),n("div",{staticClass:"bCancelar",on:{click:function(e){e.stopPropagation(),o.viendoBusqueda=!1,o.anuncioTrabajosBuscados=null}}},[o._m(0)])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.anuncioTrabajosBuscados,expression:"anuncioTrabajosBuscados"}],attrs:{id:"anuncioTrabajosBuscados"}},[o._v(" "+o._s(o.anuncioTrabajosBuscados)+" ")]),n("div",{ref:"zonaListaTrabajos",attrs:{id:"zonaListaTrabajos"},on:{scroll:function(e){return o.setPosicionIconoTrabajo()},click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.target!==e.currentTarget?null:void(o.idTrabajoSeleccionado=null)}}},[o.usuarioLogeado?n("div",{directives:[{name:"show",rawName:"v-show",value:!1===o.viendoBusqueda,expression:"viendoBusqueda === false"}],staticClass:"listaTrabajos",class:{opaco:null!=o.idTrabajoSeleccionado},attrs:{id:"listaMisTrabajos"},on:{click:function(e){o.idTrabajoSeleccionado=null}}},o._l(o.misTrabajos,(function(e){return n("div",{key:"nombreMT-"+e.id,staticClass:"nombreTrabajo",on:{dblclick:function(i){i.stopPropagation(),o.idTrabajoSeleccionado=e.id,o.setPosicionIconoTrabajo()}}},[n("img",{staticClass:"simboloTrabajo simboloMiTrabajo",attrs:{src:i("e463"),alt:"",title:"Haces parte de este trabajo"}}),o._v(" "+o._s(e.nombre)+" "),n("img",{staticClass:"iconoAbrirTrabajo",attrs:{src:i("9d5e"),alt:""},on:{click:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.stopPropagation(),o.idTrabajoSeleccionado=e.id,void o.setPosicionIconoTrabajo())}}})])})),0):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!1===o.viendoBusqueda,expression:"viendoBusqueda === false"}],staticClass:"listaTrabajos",class:{opaco:null!=o.idTrabajoSeleccionado},attrs:{id:"listaTodosTrabajos"},on:{click:function(e){o.idTrabajoSeleccionado=null}}},[o._l(o.todosTrabajos.infoTrabajos,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:!o.usuarioLogeado||!o.misTrabajos.some((function(o){return o.id===e.id})),expression:"\n          !usuarioLogeado || !misTrabajos.some((t) => t.id === infoTrabajo.id)\n        "}],key:"nombreT-"+e.id,staticClass:"nombreTrabajo",on:{dblclick:function(i){i.stopPropagation(),o.idTrabajoSeleccionado=e.id,o.setPosicionIconoTrabajo()}}},[n("img",{staticClass:"simboloTrabajo",attrs:{src:i("e463"),alt:""}}),o._v(" "+o._s(e.nombre)+" "),n("img",{staticClass:"iconoAbrirTrabajo",attrs:{src:i("9d5e"),alt:""},on:{click:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.stopPropagation(),o.idTrabajoSeleccionado=e.id,void o.setPosicionIconoTrabajo())}}})])})),n("div",{directives:[{name:"show",rawName:"v-show",value:o.todosTrabajos.hayMas,expression:"todosTrabajos.hayMas"}],attrs:{id:"bCargarMasTodosTrabajos"}},[o._v("Más")])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:!0===o.viendoBusqueda,expression:"viendoBusqueda === true"}],staticClass:"listaTrabajos",class:{opaco:null!=o.idTrabajoSeleccionado},attrs:{id:"listaTrabajosBuscados"},on:{click:function(e){o.idTrabajoSeleccionado=null}}},o._l(o.trabajosBuscados,(function(e){return n("div",{key:"nombreTB-"+e.id,staticClass:"nombreTrabajo"},[n("img",{staticClass:"simboloTrabajo",attrs:{src:i("e463"),alt:""}}),o._v(" "+o._s(e.nombre)+" "),n("img",{staticClass:"iconoAbrirTrabajo",attrs:{src:i("9d5e"),alt:""},on:{click:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.stopPropagation(),o.idTrabajoSeleccionado=e.id,void o.setPosicionIconoTrabajo())}}})])})),0),o._l(o.trabajosSeleccionables,(function(e){return n("icono-trabajo",{directives:[{name:"show",rawName:"v-show",value:o.idTrabajoSeleccionado===e.id,expression:"idTrabajoSeleccionado === infoTrabajo.id"}],key:e.id,style:o.posicionIconoTrabajo,attrs:{idTrabajo:e.id}})}))],2)])},ou=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"linea1"},[i("div",{staticClass:"linea2"})])}],eu=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"iconoTrabajo"},[n("img",{class:{iconoCompletado:"completado"===o.esteTrabajo.estadoDesarrollo,deshabilitado:o.togglingEstado},attrs:{src:i("e463"),alt:"",id:"imagenIcono"},on:{click:function(e){o.usuarioResponsableProyecto&&o.toggleEstadoTrabajo()}}}),n("div",{class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[n("div",{attrs:{id:"nombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"elPropioNombre"}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),o.usuarioResponsableProyecto?n("div",{staticClass:"controlesLateralesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})]):o._e()]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona"},[n("span",{staticClass:"nombreZona"},[o._v("Descripcion")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaKeywords"}},[n("div",{staticClass:"barraSuperiorZona"},[n("span",{staticClass:"nombreZona"},[o._v("Palabras clave")]),n("div",{staticClass:"controlesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarKeywords",title:"Editar palabras clave del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoKeywords(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoKeywords&&0==o.nuevoKeywordsIlegal,expression:"editandoKeywords == true && nuevoKeywordsIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoKeywords"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoKeywords(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoKeywords,expression:"!editandoKeywords"}],ref:"keywords",attrs:{id:"keywords"}},[o._v(" "+o._s(o.esteTrabajo.keywords)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoKeywords,expression:"nuevoKeywords"},{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],ref:"inputNuevoKeywords",class:{letrasRojas:o.nuevoKeywordsIlegal},attrs:{id:"inputNuevoKeywords"},domProps:{value:o.nuevoKeywords},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoKeywords(e))},input:function(e){e.target.composing||(o.nuevoKeywords=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoKeywords,expression:"enviandoNuevoKeywords"}],attrs:{texto:"Enviando..."}})],1),n("img",{staticClass:"botonIr",attrs:{src:i("83e2"),title:"Abrir la página de este trabajo"},on:{click:o.navegarAlTrabajo}}),n("div",{attrs:{id:"controlesTrabajo"}},[1==o.usuarioResponsableProyecto?n("div",{staticClass:"controlesTrabajo hoverGris bEliminar",on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])])},iu=[];function nu(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoEstado: String!) {\n              setEstadoTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoEstado: $nuevoEstado\n              ) {\n                id\n                estadoDesarrollo\n              }\n            }\n          "]);return nu=function(){return o},o}function au(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!) {\n              eliminarTrabajoDeProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n              )\n            }\n          "]);return au=function(){return o},o}function tu(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return tu=function(){return o},o}function su(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return su=function(){return o},o}function ru(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevoKeywords: String!\n            ) {\n              editarKeywordsTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoKeywords: $nuevoKeywords\n              ) {\n                id\n                keywords\n              }\n            }\n          "]);return ru=function(){return o},o}function cu(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return cu=function(){return o},o}function du(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoNombre: String!) {\n              editarNombreTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return du=function(){return o},o}function uu(){var o=Object(s["a"])(["\n  query($idTrabajo: ID!) {\n    trabajo(idTrabajo: $idTrabajo) {\n      id\n      nombre\n      descripcion\n      responsables\n      keywords\n      idProyectoParent\n      estadoDesarrollo\n    }\n  }\n"]);return uu=function(){return o},o}var lu=/[^ a-zA-ZÀ-ž0-9_():.,-]/,vu=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,pu=/[^ a-zA-Zñ,]/,mu=c()(uu()),hu={name:"IconoTrabajo",components:{Loading:Mo,IconoPersonaAutonomo:Ki},apollo:{esteTrabajo:{query:mu,variables:function(){return{idTrabajo:this.idTrabajo}},update:function(o){var e=o.trabajo;return e.keywords||(e.keywords=""),e},skip:function(){return!this.idTrabajo}}},data:function(){return{esteTrabajo:{responsables:[]},idNodoSeleccionado:null,deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,nuevoKeywords:"palabras clave",editandoKeywords:!1,enviandoNuevoKeywords:!1,togglingEstado:!1}},props:{idProyecto:String,seleccionado:Boolean,usuarioResponsableProyecto:{type:Boolean,defaul:!1},idTrabajo:String},computed:{usuarioResponsableTrabajo:function(){return this.esteTrabajo.responsables.includes(this.usuario.id)},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!lu.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return this.nuevoDescripcion.length<1||!!vu.test(this.nuevoDescripcion)},nuevoKeywordsIlegal:function(){return this.nuevoKeywords.length<1||!!pu.test(this.nuevoKeywords)},infoAsParent:function(){return{id:this.esteTrabajo.id,tipo:"trabajo",nombre:this.esteTrabajo.nombre}}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteTrabajo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(du()),variables:{idTrabajo:this.esteTrabajo.id,idProyecto:this.esteTrabajo.idProyectoParent,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteTrabajo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(cu()),variables:{idProyecto:this.esteTrabajo.idProyectoParent,idTrabajo:this.esteTrabajo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},guardarNuevoKeywords:function(){var o=this;this.nuevoKeywordsIlegal?console.log("No enviado"):this.nuevoKeywords!=this.esteTrabajo.keywords?(console.log("guardando nuevo keywords"),this.enviandoNuevoKeywords=!0,this.$apollo.mutate({mutation:c()(ru()),variables:{idProyecto:this.esteTrabajo.idProyectoParent,idTrabajo:this.esteTrabajo.id,nuevoKeywords:this.nuevoKeywords}}).then((function(){o.enviandoNuevoKeywords=!1,o.editandoKeywords=!1})).catch((function(e){o.enviandoNuevoKeywords=!1,console.log("Error. E :".concat(e))}))):this.editandoKeywords=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteTrabajo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteTrabajo.descripcion},toggleEditandoKeywords:function(){this.$refs.inputNuevoKeywords.style.height=this.$refs.keywords.offsetHeight+"px",this.editandoKeywords=!this.editandoKeywords,this.nuevoKeywords=this.esteTrabajo.keywords},asumirComoResponsable:function(){console.log("enviando id ".concat(this.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id," en el proyecto con id ").concat(this.esteTrabajo.idProyectoParent)),this.$apollo.mutate({mutation:c()(su()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},abandonarListaResponsables:function(){console.log("Abandonando este trabajo"),this.$apollo.mutate({mutation:c()(tu()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},eliminarse:function(){var o=this;console.log("Trabajo eliminandose"),confirm("¿Seguro de eliminar este trabajo?")&&(this.deshabilitado=!0,this.$apollo.mutate({mutation:c()(au()),variables:{idProyecto:this.esteTrabajo.idProyectoParent,idTrabajo:this.esteTrabajo.id}}).then((function(e){var i=e.data.eliminarTrabajoDeProyecto;o.deshabilitado=!1,console.log("Resultado: ".concat(i)),o.$emit("meElimine")})).catch((function(e){o.deshabilitado=!1,console.log("Error. E: ".concat(e))})))},navegarAlTrabajo:function(){this.$router.push("/trabajo/"+this.idTrabajo)},toggleEstadoTrabajo:function(){var o=this,e="noCompletado";"noCompletado"===this.esteTrabajo.estadoDesarrollo&&(e="completado"),this.togglingEstado=!0,this.$apollo.mutate({mutation:c()(nu()),variables:{idProyecto:this.esteTrabajo.idProyectoParent,idTrabajo:this.esteTrabajo.id,nuevoEstado:e}}).then((function(){o.togglingEstado=!1,console.log("toggled")})).catch((function(e){o.togglingEstado=!1,console.log("Error: E:".concat(e))}))}}},Au=hu,bu=(i("ac84"),Object(m["a"])(Au,eu,iu,!1,null,"895ff24c",null)),fu=bu.exports;function gu(){var o=Object(s["a"])(["\n  query($idUsuario: ID!) {\n    trabajosDeProyectoDeUsuario(idUsuario: $idUsuario) {\n      id\n      nombre\n    }\n  }\n"]);return gu=function(){return o},o}function Nu(){var o=Object(s["a"])(["\n  query($textoBusqueda: String!) {\n    busquedaTrabajosProyectos(textoBusqueda: $textoBusqueda) {\n      id\n      nombre\n    }\n  }\n"]);return Nu=function(){return o},o}function yu(){var o=Object(s["a"])(["\n  query($pagina: Int!) {\n    listaTodosTrabajosProyectos(pagina: $pagina) {\n      hayMas\n      infoTrabajos {\n        id\n        nombre\n      }\n    }\n  }\n"]);return yu=function(){return o},o}var Cu=c()(yu()),Eu=c()(Nu()),wu=c()(gu()),Du={components:{IconoTrabajo:fu},name:"BuscadorTrabajos",apollo:{todosTrabajos:{query:Cu,variables:{pagina:0},update:function(o){var e=o.listaTodosTrabajosProyectos;return e}},misTrabajos:{query:wu,variables:function(){return{idUsuario:this.usuario.id}},update:function(o){var e=o.trabajosDeProyectoDeUsuario;return e},skip:function(){return!this.usuarioLogeado}}},data:function(){return{todosTrabajos:{hayMas:!0,infoTrabajos:[]},misTrabajos:[],trabajosBuscados:[],textoBusqueda:null,textoBuscado:null,paginaTodosTrabajos:0,loadingMasTodosTrabajos:!1,hayMasTodosTrabajos:!0,idTrabajoSeleccionado:null,posicionIconoTrabajo:{top:"0px"},viendoBusqueda:!1,buscando:!1,anuncioTrabajosBuscados:null}},methods:{getMoreTodasActividades:function(){var o=this;this.paginaTodosTrabajos++,console.log("Fetching more todosTrabajos"),this.loadingMasTodosTrabajos=!0,this.$apollo.queries.todosTrabajos.fetchMore({variables:{pagina:this.paginaTodosTrabajos},updateQuery:function(e,i){var n=i.fetchMoreResult,a=n.listaTodosTrabajosProyectos.infoTrabajos,t=n.listaTodosTrabajosProyectos.hayMas;return o.hayMasTodosTrabajos=t,{listaTodosTrabajosProyectos:{__typename:e.listaTodosTrabajosProyectos.__typename,infoTrabajos:[].concat(Object(ci["a"])(e.listaTodosTrabajosProyectos.infoTrabajos),Object(ci["a"])(a)),hayMas:t}}}}).then((function(){o.loadingMasTodasActividades=!1})).catch((function(e){o.loadingMasTodasActividades=!1,console.log("Error en fetchMore: E: ".concat(e))}))},setPosicionIconoTrabajo:function(){var o=this.$refs.zonaListaTrabajos.scrollTop;this.$set(this.posicionIconoTrabajo,"top",o+"px")},buscarTrabajosDB:function(){var o=this;!this.textoBusqueda||this.textoBusqueda.length<1||(this.anuncioTrabajosBuscados="Buscando...",console.log("Refetching búsqueda"),this.$apollo.query({query:Eu,variables:{textoBusqueda:this.textoBusqueda},error:function(o){console.log("Error: ".concat(o))}}).then((function(e){var i=e.data.busquedaTrabajosProyectos;i.length<1?o.anuncioTrabajosBuscados="¡No se encontraron trabajos!":o.anuncioTrabajosBuscados=null,o.textoBuscado=o.textoBusqueda,o.trabajosBuscados=i,o.viendoBusqueda=!0})).catch((function(e){o.anuncioTrabajosBuscados="¡Ocurrió un error con tu búsqueda!",console.log("Error. E: ".concat(e))})))}},computed:{trabajosSeleccionables:function(){var o=this.todosTrabajos.infoTrabajos.map((function(o){return o.id})),e=this.misTrabajos.map((function(o){return o.id}));return[].concat(Object(ci["a"])(this.todosTrabajos.infoTrabajos),Object(ci["a"])(this.misTrabajos.filter((function(e){return!o.includes(e.id)}))),Object(ci["a"])(this.trabajosBuscados.filter((function(i){return!o.includes(i.id)&&!e.includes(i.id)}))))}}},ju=Du,xu=(i("0a03"),Object(m["a"])(ju,Wd,ou,!1,null,"681a1fab",null)),Pu=xu.exports,Su=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"todosMateriales",on:{click:function(e){o.idMaterialSeleccionado=null,o.idTrabajoVisible=null}}},[n("div",{attrs:{id:"listaMateriales"}},[o._l(o.proyectos,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:e.materiales&&e.materiales.length>0,expression:"proyecto.materiales && proyecto.materiales.length>0"}],key:e.id,staticClass:"bloqueProyecto"},[n("div",{staticClass:"nombreProyecto"},[o._v(o._s(e.nombre))]),o._l(e.materiales,(function(e){return n("div",{key:e.id,staticClass:"filaMaterial"},[n("material-trabajo",{attrs:{seleccionado:o.idMaterialSeleccionado==e.id,usuarioResponsableTrabajo:!1,esteMaterial:e},nativeOn:{click:function(i){i.stopPropagation(),o.idMaterialSeleccionado=e.id,o.idTrabajoVisible=null}}}),n("div",{staticClass:"bloqueOpcionesMaterial"},[n("img",{staticClass:"opcionMaterial",attrs:{src:i("e463"),alt:"abrir página"},on:{click:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.stopPropagation(),void(o.idTrabajoVisible=e.idTrabajoParent))}}})])],1)}))],2)})),n("icono-trabajo",{directives:[{name:"show",rawName:"v-show",value:null!=o.idTrabajoVisible,expression:"idTrabajoVisible != null"}],attrs:{id:"trabajoVisible",idTrabajo:o.idTrabajoVisible},nativeOn:{click:function(o){o.stopPropagation()}}})],2)])},Ru=[];function Iu(){var o=Object(s["a"])(["\n  query {\n    proyectos {\n      id\n      nombre\n      materiales {\n        id\n        nombre\n        descripcion\n        cantidadNecesaria\n        cantidadDisponible\n        idTrabajoParent\n      }\n    }\n  }\n"]);return Iu=function(){return o},o}var Tu=c()(Iu()),ku={components:{MaterialTrabajo:ld,IconoTrabajo:fu},name:"todosMateriales",apollo:{proyectos:{query:Tu}},data:function(){return{proyectos:[],idMaterialSeleccionado:null,idTrabajoVisible:null}}},Ou=ku,Mu=(i("8ed4"),Object(m["a"])(Ou,Su,Ru,!1,null,"b3524468",null)),Bu=Mu.exports,Fu=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"forosGenerales"},[i("br"),i("div",{attrs:{id:"anuncioBienvenida"}},[i("center",[i("h3",[o._v(" ¡Bienvenides a los foros generales! ")])]),o._v(" En esta sección podemos crear conversaciones de temas generales y compartir opiniones entre todos. ")],1),i("br"),i("foro",{attrs:{idForo:"6091672b943ffd1da10e832a",parent:o.parent}})],1)},$u=[],Qu={components:{Foro:Vn},name:"ForosGenerales",data:function(){return{parent:{tipo:"forosGenerales",nombre:"offTopic",id:"89a7fbe0-acf8-11eb-8529-0242ac130003"}}}},qu=Qu,Uu=(i("5622"),Object(m["a"])(qu,Fu,$u,!1,null,"b2a21e52",null)),Vu=Uu.exports,Lu=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"atlasProyectos",on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||e.target!==e.currentTarget?null:(e.stopPropagation(),void(o.panningVista=!0))},mouseenter:function(e){o.hovered=!0},mouseleave:function(e){o.hovered=!1},contextmenu:function(e){return e.target!==e.currentTarget||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),o.abrirMenuContextual(e))},mousemove:o.panVista,mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.clickFondoAtlas(e)},touchmove:function(e){return e.preventDefault(),e.stopPropagation(),o.movimientoMobile(e)},touchstart:o.iniciaMovimientoTouch,touchend:o.finTouch}},[o.usuarioSuperadministrador&&"juanMamian"==o.usuario.username?i("div",{style:[{backgroundColor:o.callingPosiciones?"green":"transparent"}],attrs:{id:"botonCallingPosiciones"},on:{click:function(e){e.stopPropagation(),o.callingPosiciones=!o.callingPosiciones}}}):o._e(),i("transition",{attrs:{name:"fadeOut"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:o.showingZoomInfo,expression:"showingZoomInfo"}],attrs:{id:"infoZoom"}},[o._v("x"+o._s(o.factorZoom))])]),i("listas",{ref:"listas",attrs:{todosNodos:o.todosNodos,cerrar:o.cerrarListas},on:{centrarEnNodo:o.centrarEnNodoById}}),o.usuario&&o.usuario.id?i("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuContextual,expression:"mostrandoMenuContextual"}],class:{deshabilitado:o.enviandoQueryNodos},style:[o.offsetMenuContextual],attrs:{id:"menuContextual"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador||null!=o.nodoSeleccionado&&o.nodoSeleccionado.responsables.includes(o.usuario.id),expression:"usuarioSuperadministrador || (nodoSeleccionado!=null && nodoSeleccionado.responsables.includes(usuario.id))"}],staticClass:"botonMenuContextual",attrs:{id:"botonCrearObjetivo"},on:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},click:function(e){return e.stopPropagation(),o.crearNodoEnMenuContextual("objetivo")}}},[o._v(" Crear objetivo "+o._s(null!=o.idNodoSeleccionado&&null!=o.nodoSeleccionado&&(o.nodoSeleccionado.responsables.includes(o.usuario.id)||o.usuarioSuperadministrador)?"conectado":"")+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador||null!=o.nodoSeleccionado&&o.nodoSeleccionado.responsables.includes(o.usuario.id),expression:"usuarioSuperadministrador || (nodoSeleccionado!=null && nodoSeleccionado.responsables.includes(usuario.id))"}],staticClass:"botonMenuContextual",attrs:{id:"botonCrearObjetivo"},on:{click:function(e){return e.stopPropagation(),o.crearNodoEnMenuContextual("trabajo")},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()}}},[o._v(" Crear trabajo "+o._s(null!=o.idNodoSeleccionado&&null!=o.nodoSeleccionado&&(o.nodoSeleccionado.responsables.includes(o.usuario.id)||o.usuarioSuperadministrador)?"conectado":"")+" ")])]):o._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador,expression:"usuarioSuperadministrador"}],attrs:{id:"centroVista"}}),i("div",{style:[o.posContenedores],attrs:{id:"contenedorCanvasNodos"}},o._l(o.nodosConRequerimentos,(function(e){return i("canvas-enlaces-nodo",{key:e.id,attrs:{yo:o.yo,esteNodo:e,todosNodos:o.todosNodos,factorZoom:o.factorZoom,nodoSeleccionado:o.nodoSeleccionado,redibujarEnlaces:o.redibujarEnlacesNodos,idsNodosVisibles:o.idsNodosVisibles}})})),1),i("div",{style:[o.posContenedores],attrs:{id:"contenedorNodos"}},[i("transition-group",{attrs:{name:"fade",tag:"div"}},o._l(o.todosNodos,(function(e){return i("nodo",{directives:[{name:"show",rawName:"v-show",value:o.idsNodosVisibles.includes(e.id),expression:"idsNodosVisibles.includes(nodo.id)"}],key:e.id,attrs:{yo:o.yo,esteNodo:e,idNodoSeleccionado:o.idNodoSeleccionado,nodoSeleccionado:o.nodoSeleccionado,idsNodosPlegados:o.idsNodosPlegados,menuCx:o.idNodoMenuCx&&o.idNodoMenuCx==e.id,factorZoom:o.factorZoom,callingPosiciones:o.callingPosiciones,usuarioAdministradorNodoSeleccionado:o.usuarioAdministradorNodoSeleccionado,usuarioResponsableNodoSeleccionado:o.usuarioResponsableNodoSeleccionado,transparentoso:o.idNodoSeleccionado&&o.idNodoSeleccionado!=e.id&&!o.idsNodosRequeridosSeleccionado.includes(e.id)&&!o.idsNodosRequierenSeleccionado.includes(e.id),childSeleccionado:o.nodosChildrenSeleccionado.includes(e.id),parentDeSeleccionado:o.idNodoParentNodoSeleccionado===e.id},on:{meMovi:function(e){o.redibujarEnlacesNodos++},meAbrieron:function(i){o.idNodoPaVentanita=e.id},meElimine:function(i){return o.eliminarNodoCache(e.id)}},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id},contextmenu:function(i){if(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)return null;i.stopPropagation(),i.preventDefault(),o.idNodoMenuCx=e.id},dblclick:function(i){o.idNodoPaVentanita=e.id}}})})),1),i("div",{directives:[{name:"show",rawName:"v-show",value:"juanMamian"==o.usuario.username,expression:"usuario.username == 'juanMamian'"}],style:[{left:o.centroDescarga.x*o.factorZoom+"px",top:o.centroDescarga.y*o.factorZoom+"px",width:20*o.factorZoom+"px",height:20*o.factorZoom+"px"}],attrs:{id:"indicadorCentroDescarga"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:"juanMamian"==o.usuario.username,expression:"usuario.username == 'juanMamian'"}],style:[{left:o.centroVista.x*o.factorZoom+"px",top:o.centroVista.y*o.factorZoom+"px",width:20*o.factorZoom+"px",height:20*o.factorZoom+"px"}],attrs:{id:"indicadorCentroVista"}})],1),o.idNodoPaVentanita&&o.objetivoEnVentanita&&!o.callingPosiciones?i("ventanita-objetivo",{key:o.objetivoEnVentanita.id,staticClass:"ventanitaNodo",attrs:{esteObjetivo:o.objetivoEnVentanita},on:{navegarAlNodo:o.navegarPaginaNodo}}):o._e(),o.idNodoPaVentanita&&o.trabajoEnVentanita&&!o.callingPosiciones?i("ventanita-trabajo",{key:o.trabajoEnVentanita.id,staticClass:"ventanitaNodo",attrs:{esteTrabajo:o.trabajoEnVentanita},on:{navegarAlNodo:o.navegarPaginaNodo}}):o._e(),i("panel-control-nodos",{attrs:{todosNodos:o.todosNodos,mostrandoTrabajos:o.mostrandoTrabajos,mostrandoObjetivos:o.mostrandoObjetivos,idsNodosVisibles:o.idsNodosVisibles},on:{centrarEnNodo:o.centrarEnNodoById,setMostrandoTrabajos:function(e){o.mostrandoTrabajos=e},setMostrandoObjetivos:function(e){o.mostrandoObjetivos=e}}}),i("transition",{attrs:{name:"fadeOutLento"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:o.showingNombreNodoEmergente,expression:"showingNombreNodoEmergente"}],attrs:{id:"nombreNodoEmergente"}},[o._v(" "+o._s(o.nodoSeleccionado?o.nodoSeleccionado.nombre:"")+" ")])]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.todosNodos.loading||!o.coordsInicialesSetted,expression:"$apollo.queries.todosNodos.loading || !coordsInicialesSetted"}],attrs:{id:"loadingNodos",texto:"Descargando información..."}})],1)},Gu=[],Ku=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanitaObjetivo",class:{seleccionado:o.seleccionado},on:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},touchmove:function(o){o.stopPropagation()}}},[n("div",{staticClass:"zonaPrimerNivel",class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[n("div",{attrs:{id:"nombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"elPropioNombre"}},[o._v(" "+o._s(o.esteObjetivo.nombre)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{cols:"30",rows:"2"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),o.usuarioAdministrador?n("div",{staticClass:"controlesLateralesZona",class:{deshabilitado:o.enviandoNuevoNombre}},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})]):o._e()]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),n("img",{class:{iconoCompletado:"completado"===o.esteObjetivo.estadoDesarrollo,deshabilitado:o.togglingEstado},attrs:{src:i("713c"),alt:"",id:"imagenIcono"},on:{click:function(e){o.usuarioAdministrador&&o.toggleEstadoObjetivo()}}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoDescripcion=!o.mostrandoDescripcion}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoDescripcion?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Descripción ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador&&o.mostrandoDescripcion,expression:"usuarioAdministrador && mostrandoDescripcion"}],staticClass:"controlesZona",class:{deshabilitado:o.enviandoNuevoDescripcion}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador,expression:"usuarioAdministrador"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoDescripcion,expression:"mostrandoDescripcion"}]},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteObjetivo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1)]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoResponsables=!o.mostrandoResponsables}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoResponsables?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Responsable"+o._s(1===o.esteObjetivo.responsables.length?"":"s")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoResponsables,expression:"mostrandoResponsables"}]},[n("div",{staticClass:"controlesZona",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"controlesResponsables"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.esteObjetivo.responsables.length<1?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),1==o.usuarioLogeado&&o.usuarioResponsable&&o.responsablesSolicitados<1?n("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idResponsableSeleccionado,expression:"idResponsableSeleccionado===null"}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"solicitarResponsable"},on:{click:function(e){return o.setResponsablesSolicitados(1)}}},[o._v(" Solicitar responsable ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsable&&!o.usuarioPosibleResponsableObjetivo&&o.esteObjetivo.responsables.length>0?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsable&&1!=o.usuarioPosibleResponsableObjetivo?o._e():n("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idResponsableSeleccionado,expression:"idResponsableSeleccionado===null"}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioResponsable?n("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idResponsableSeleccionado&&0==o.responsableSeleccionadoEstaAceptado,expression:"\n            idResponsableSeleccionado != null &&\n            responsableSeleccionadoEstaAceptado == false\n          "}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}},[o._v(" Aceptar como responsable ")]):o._e()],1),n("div",{attrs:{id:"listaResponsables"},on:{click:function(e){e.stopPropagation(),o.idResponsableSeleccionado=null}}},[o._l(o.esteObjetivo.responsables,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!0}}})})),o._l(o.esteObjetivo.posiblesResponsables,(function(e){return n("icono-persona-autonomo",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable||o.usuario&&o.usuario.id&&o.usuario.id===e,expression:"\n            usuarioResponsable ||\n            (usuario && usuario.id && usuario.id === idPersona)\n          "}],key:e,staticClass:"personaPosibleResponsable",attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!1},dblclick:function(i){return i.shiftKey?o.aceptarResponsable(e):null}}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:o.responsablesSolicitados>0,expression:"responsablesSolicitados > 0"}],staticClass:"iconoResponsablesSolicitados"},[n("img",{staticClass:"imagenResponsablesSolicitados",attrs:{src:i("5e1a"),alt:"Usuario solicitado",title:"Personas adicionales solicitadas"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.responsablesSolicitados,expression:"responsablesSolicitados"}],style:[{backgroundColor:o.esteObjetivo.responsablesSolicitados!=o.responsablesSolicitados?"orange":"white"}],attrs:{type:"number",id:"inputResponsablesSolicitados",readonly:!o.usuarioResponsable},domProps:{value:o.responsablesSolicitados},on:{input:function(e){e.target.composing||(o.responsablesSolicitados=e.target.value)}}})])],2)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador,expression:"usuarioAdministrador"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaKeywords"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoKeywords=!o.mostrandoKeywords}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoKeywords?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Palabras clave ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador&&o.mostrandoKeywords,expression:"usuarioAdministrador && mostrandoKeywords"}],staticClass:"controlesZona",class:{deshabilitado:o.enviandoNuevoKeywords}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador,expression:"usuarioAdministrador"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarKeywords",title:"Editar keywords del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoKeywords(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoKeywords&&0==o.nuevoKeywordsIlegal,expression:"\n            editandoKeywords == true && nuevoKeywordsIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoKeywords"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoKeywords(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoKeywords,expression:"mostrandoKeywords"}]},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoKeywords,expression:"!editandoKeywords"}],ref:"keywords",attrs:{id:"keywords"}},[o._v(" "+o._s(o.esteObjetivo.keywords)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoKeywords,expression:"nuevoKeywords"},{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],ref:"inputNuevoKeywords",class:{letrasRojas:o.nuevoKeywordsIlegal},attrs:{id:"inputNuevoKeywords"},domProps:{value:o.nuevoKeywords},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.preventDefault(),o.guardarNuevoKeywords(e))},input:function(e){e.target.composing||(o.nuevoKeywords=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1)]),n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable||o.usuarioSuperadministrador,expression:"usuarioResponsable || usuarioSuperadministrador"}],staticClass:"botonIr",attrs:{src:i("83e2"),title:"Abrir la página de este trabajo"},on:{click:function(e){return e.stopPropagation(),o.navegarAlObjetivo(e)}}}),n("div",{attrs:{id:"controlesObjetivo"}})])},Zu=[];function zu(){var o=Object(s["a"])(["\n            mutation (\n              $idObjetivo: ID!\n              $nuevoCantidadResponsablesSolicitados: Int!\n            ) {\n              setResponsablesSolicitadosObjetivo(\n                idObjetivo: $idObjetivo\n                nuevoCantidadResponsablesSolicitados: $nuevoCantidadResponsablesSolicitados\n              ) {\n                id\n                responsablesSolicitados\n              }\n            }\n          "]);return zu=function(){return o},o}function Ju(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $idUsuario: ID!) {\n              addResponsableObjetivo(\n                idObjetivo: $idObjetivo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                administradores\n              }\n            }\n          "]);return Ju=function(){return o},o}function _u(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $idUsuario: ID!) {\n              addResponsableObjetivo(\n                idObjetivo: $idObjetivo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                responsablesSolicitados\n                administradores\n              }\n            }\n          "]);return _u=function(){return o},o}function Hu(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $idUsuario: ID!) {\n              removeResponsableObjetivo(\n                idObjetivo: $idObjetivo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                administradores\n              }\n            }\n          "]);return Hu=function(){return o},o}function Yu(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $idUsuario: ID!) {\n              addPosibleResponsableObjetivo(\n                idObjetivo: $idObjetivo\n                idUsuario: $idUsuario\n              ) {\n                id\n                posiblesResponsables\n              }\n            }\n          "]);return Yu=function(){return o},o}function Xu(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $nuevoEstado: String!) {\n              setEstadoObjetivo(\n                idObjetivo: $idObjetivo\n                nuevoEstado: $nuevoEstado\n              ) {\n                id\n                estadoDesarrollo\n              }\n            }\n          "]);return Xu=function(){return o},o}function Wu(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $nuevoKeywords: String!) {\n              editarKeywordsObjetivo(\n                idObjetivo: $idObjetivo\n                nuevoKeywords: $nuevoKeywords\n              ) {\n                id\n                keywords\n              }\n            }\n          "]);return Wu=function(){return o},o}function ol(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionObjetivo(\n                idObjetivo: $idObjetivo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return ol=function(){return o},o}function el(){var o=Object(s["a"])(["\n            mutation ($idObjetivo: ID!, $nuevoNombre: String!) {\n              editarNombreObjetivo(\n                idObjetivo: $idObjetivo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return el=function(){return o},o}var il=/[^ a-zA-ZÀ-ž0-9_():.,-]/,nl=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,al=/[^ a-zA-Z0-9]/,tl={name:"VentanitaObjetivo",components:{Loading:Mo,IconoPersonaAutonomo:Ki},data:function(){return{deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,mostrandoDescripcion:!0,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,mostrandoKeywords:!1,nuevoKeywords:null,editandoKeywords:!1,enviandoNuevoKeywords:!1,togglingEstado:!1,mostrandoResponsables:!1,responsablesSolicitados:0,idPosibleResponsableSeleccionado:null,idResponsableSeleccionado:null,responsableSeleccionadoEstaAceptado:!1,enviandoQueryResponsables:!1}},props:{idObjetivo:String,esteObjetivo:Object,seleccionado:Boolean},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!il.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!nl.test(this.nuevoDescripcion)},nuevoKeywordsIlegal:function(){return!this.nuevoKeywords||this.nuevoKeywords.length<1||!!al.test(this.nuevoKeywords)},usuarioResponsable:function(){return!(!this.usuario||!this.usuario.id)&&this.esteObjetivo.responsables.includes(this.usuario.id)},usuarioAdministrador:function(){return!(!this.usuario||!this.usuario.id)&&this.esteObjetivo.administradores.includes(this.usuario.id)},usuarioPosibleResponsableObjetivo:function(){return!!this.esteObjetivo.posiblesResponsables&&!!this.esteObjetivo.posiblesResponsables.includes(this.usuario.id)}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteObjetivo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(el()),variables:{idObjetivo:this.esteObjetivo.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteObjetivo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(ol()),variables:{idObjetivo:this.esteObjetivo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},guardarNuevoKeywords:function(){var o=this;this.nuevoKeywordsIlegal?console.log("Keywords ilegal"):this.nuevoKeywords!=this.esteObjetivo.keywords?(console.log("guardando nuevo keywords"),this.enviandoNuevoKeywords=!0,this.$apollo.mutate({mutation:c()(Wu()),variables:{idObjetivo:this.esteObjetivo.id,nuevoKeywords:this.nuevoKeywords}}).then((function(){o.enviandoNuevoKeywords=!1,o.editandoKeywords=!1})).catch((function(e){var i=e.graphQLErrors;o.enviandoNuevoKeywords=!1,console.log("Error. E :".concat(i))}))):this.editandoKeywords=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteObjetivo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteObjetivo.descripcion},toggleEditandoKeywords:function(){this.$refs.inputNuevoKeywords.style.height=this.$refs.keywords.offsetHeight+"px",this.editandoKeywords=!this.editandoKeywords,this.nuevoKeywords=this.esteObjetivo.keywords},toggleEstadoObjetivo:function(){var o=this,e="noCompletado";"noCompletado"===this.esteObjetivo.estadoDesarrollo&&(e="completado"),this.togglingEstado=!0,this.$apollo.mutate({mutation:c()(Xu()),variables:{idObjetivo:this.esteObjetivo.id,nuevoEstado:e}}).then((function(){o.togglingEstado=!1,console.log("toggled")})).catch((function(e){o.togglingEstado=!1,console.log("Error: E:".concat(e))}))},entrarListaPosiblesResponsables:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles responsables del objetivo con id ".concat(this.esteObjetivo.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Yu()),variables:{idObjetivo:this.esteObjetivo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},abandonarListaResponsables:function(){var o=this;console.log("Abandonando la responsabilidad en este objetivo"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Hu()),variables:{idObjetivo:this.esteObjetivo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},aceptarResponsable:function(o){var e=this;console.log("aceptando como responsable al usuario ".concat(o)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(_u()),variables:{idObjetivo:this.esteObjetivo.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1,e.responsableSeleccionadoEstaAceptado=!0,e.versionCalendario++})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))},asumirComoResponsable:function(){var o=this;console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del objetivo con id ").concat(this.esteObjetivo.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Ju()),variables:{idObjetivo:this.esteObjetivo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},debounceSetResponsablesSolicitados:ks()((function(){this.setResponsablesSolicitados(parseInt(this.responsablesSolicitados))}),2e3),setResponsablesSolicitados:function(o){var e=this;o<0&&(o=0),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(zu()),variables:{idObjetivo:this.esteObjetivo.id,nuevoCantidadResponsablesSolicitados:o}}).then((function(o){var i=o.data.setResponsablesSolicitadosObjetivo;e.responsablesSolicitados=i.responsablesSolicitados,e.enviandoQueryResponsables=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoQueryResponsables=!1}))},navegarAlObjetivo:function(){this.$emit("navegarAlNodo","/objetivo/"+this.esteObjetivo.id)}},watch:{responsablesSolicitados:function(o){o!==this.esteObjetivo.responsablesSolicitados&&(console.log("Cambio en responsables solicitados"),o<1?this.setResponsablesSolicitados(parseInt(o)):this.debounceSetResponsablesSolicitados())}},mounted:function(){this.responsablesSolicitados=this.esteObjetivo.responsablesSolicitados}},sl=tl,rl=(i("ca75"),Object(m["a"])(sl,Ku,Zu,!1,null,"1cc1286e",null)),cl=rl.exports,dl=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanitaTrabajo",class:{seleccionado:o.seleccionado},on:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()}}},[n("div",{staticClass:"zonaPrimerNivel",class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[n("div",{attrs:{id:"nombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"elPropioNombre"}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{cols:"30",rows:"2"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),o.usuarioAdministrador||o.usuarioSuperadministrador?n("div",{staticClass:"controlesLateralesZona",class:{deshabilitado:o.enviandoNuevoNombre}},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})]):o._e()]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),n("img",{class:{iconoCompletado:"completado"===o.esteTrabajo.estadoDesarrollo,deshabilitado:o.togglingEstado},attrs:{src:i("713c"),alt:"",id:"imagenIcono"},on:{click:function(e){o.usuarioAdministrador&&o.toggleEstadoTrabajo()}}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoDescripcion=!o.mostrandoDescripcion}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoDescripcion?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Descripción ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:(o.usuarioAdministrador||o.usuarioSuperadministrador)&&o.mostrandoDescripcion,expression:"(usuarioAdministrador || usuarioSuperadministrador) && mostrandoDescripcion"}],staticClass:"controlesZona",class:{deshabilitado:o.enviandoNuevoDescripcion}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador,expression:"usuarioAdministrador"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoDescripcion,expression:"mostrandoDescripcion"}]},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1)]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoResponsables=!o.mostrandoResponsables}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoResponsables?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Responsable"+o._s(1===o.esteTrabajo.responsables.length?"":"s")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoResponsables,expression:"mostrandoResponsables"}]},[n("div",{staticClass:"controlesZona",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"controlesResponsables"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.esteTrabajo.responsables.length<1?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),1==o.usuarioLogeado&&o.usuarioResponsable&&o.responsablesSolicitados<1?n("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idResponsableSeleccionado,expression:"idResponsableSeleccionado===null"}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"solicitarResponsable"},on:{click:function(e){return o.setResponsablesSolicitados(1)}}},[o._v(" Solicitar responsable ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsable&&!o.usuarioPosibleResponsableTrabajo&&o.esteTrabajo.responsables.length>0?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsable&&1!=o.usuarioPosibleResponsableTrabajo?o._e():n("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idResponsableSeleccionado,expression:"idResponsableSeleccionado===null"}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioResponsable?n("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idResponsableSeleccionado&&0==o.responsableSeleccionadoEstaAceptado,expression:"\n            idResponsableSeleccionado != null &&\n            responsableSeleccionadoEstaAceptado == false\n          "}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}},[o._v(" Aceptar como responsable ")]):o._e()],1),n("div",{attrs:{id:"listaResponsables"},on:{click:function(e){e.stopPropagation(),o.idResponsableSeleccionado=null}}},[o._l(o.esteTrabajo.responsables,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!0}}})})),o._l(o.esteTrabajo.posiblesResponsables,(function(e){return n("icono-persona-autonomo",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable||o.usuario&&o.usuario.id&&o.usuario.id===e,expression:"\n            usuarioResponsable ||\n            (usuario && usuario.id && usuario.id === idPersona)\n          "}],key:e,staticClass:"personaPosibleResponsable",attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!1},dblclick:function(i){return i.shiftKey?o.aceptarResponsable(e):null}}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:o.responsablesSolicitados>0,expression:"responsablesSolicitados > 0"}],staticClass:"iconoResponsablesSolicitados"},[n("img",{staticClass:"imagenResponsablesSolicitados",attrs:{src:i("5e1a"),alt:"Usuario solicitado",title:"Personas adicionales solicitadas"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.responsablesSolicitados,expression:"responsablesSolicitados"}],style:[{backgroundColor:o.esteTrabajo.responsablesSolicitados!=o.responsablesSolicitados?"orange":"white"}],attrs:{type:"number",id:"inputResponsablesSolicitados",readonly:!o.usuarioResponsable},domProps:{value:o.responsablesSolicitados},on:{input:function(e){e.target.composing||(o.responsablesSolicitados=e.target.value)}}})])],2)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador,expression:"usuarioAdministrador"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaKeywords"}},[n("div",{staticClass:"barraSuperiorZona",on:{click:function(e){o.mostrandoKeywords=!o.mostrandoKeywords}}},[n("div",{staticClass:"nombreZona"},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoKeywords?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Palabras clave ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador&&o.mostrandoKeywords,expression:"usuarioAdministrador && mostrandoKeywords"}],staticClass:"controlesZona",class:{deshabilitado:o.enviandoNuevoKeywords}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador,expression:"usuarioAdministrador"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarKeywords",title:"Editar keywords del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoKeywords(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoKeywords&&0==o.nuevoKeywordsIlegal,expression:"editandoKeywords == true && nuevoKeywordsIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoKeywords"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoKeywords(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoKeywords,expression:"mostrandoKeywords"}]},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoKeywords,expression:"!editandoKeywords"}],ref:"keywords",attrs:{id:"keywords"}},[o._v(" "+o._s(o.esteTrabajo.keywords)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoKeywords,expression:"nuevoKeywords"},{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],ref:"inputNuevoKeywords",class:{letrasRojas:o.nuevoKeywordsIlegal},attrs:{id:"inputNuevoKeywords"},domProps:{value:o.nuevoKeywords},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.stopPropagation(),e.preventDefault(),o.guardarNuevoKeywords(e))},input:function(e){e.target.composing||(o.nuevoKeywords=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1)]),n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsable||o.usuarioSuperadministrador,expression:"usuarioResponsable || usuarioSuperadministrador"}],staticClass:"botonIr",attrs:{src:i("83e2"),title:"Abrir la página de este trabajo"},on:{click:function(e){return e.stopPropagation(),o.navegarAlTrabajo(e)}}}),n("div",{attrs:{id:"controlesTrabajo"}})])},ul=[];function ll(){var o=Object(s["a"])(["\n            mutation (\n              $idTrabajo: ID!\n              $nuevoCantidadResponsablesSolicitados: Int!\n            ) {\n              setResponsablesSolicitadosTrabajo(\n                idTrabajo: $idTrabajo\n                nuevoCantidadResponsablesSolicitados: $nuevoCantidadResponsablesSolicitados\n              ) {\n                id\n                responsablesSolicitados\n              }\n            }\n          "]);return ll=function(){return o},o}function vl(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                administradores\n              }\n            }\n          "]);return vl=function(){return o},o}function pl(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                responsablesSolicitados\n                administradores\n              }\n            }\n          "]);return pl=function(){return o},o}function ml(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                administradores\n              }\n            }\n          "]);return ml=function(){return o},o}function hl(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $idUsuario: ID!) {\n              addPosibleResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                posiblesResponsables\n              }\n            }\n          "]);return hl=function(){return o},o}function Al(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $nuevoEstado: String!) {\n              setEstadoTrabajo(\n                idTrabajo: $idTrabajo\n                nuevoEstado: $nuevoEstado\n              ) {\n                id\n                estadoDesarrollo\n              }\n            }\n          "]);return Al=function(){return o},o}function bl(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $nuevoKeywords: String!) {\n              editarKeywordsTrabajo(\n                idTrabajo: $idTrabajo\n                nuevoKeywords: $nuevoKeywords\n              ) {\n                id\n                keywords\n              }\n            }\n          "]);return bl=function(){return o},o}function fl(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionTrabajo(\n                idTrabajo: $idTrabajo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return fl=function(){return o},o}function gl(){var o=Object(s["a"])(["\n            mutation ($idTrabajo: ID!, $nuevoNombre: String!) {\n              editarNombreTrabajo(\n                idTrabajo: $idTrabajo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return gl=function(){return o},o}var Nl=/[^ a-zA-ZÀ-ž0-9_():.,-]/,yl=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,Cl=/[^ a-zA-Z0-9]/,El={name:"VentanitaTrabajo",components:{Loading:Mo,IconoPersonaAutonomo:Ki},data:function(){return{deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,mostrandoDescripcion:!0,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,mostrandoKeywords:!1,nuevoKeywords:null,editandoKeywords:!1,enviandoNuevoKeywords:!1,togglingEstado:!1,mostrandoResponsables:!1,responsablesSolicitados:0,idPosibleResponsableSeleccionado:null,idResponsableSeleccionado:null,responsableSeleccionadoEstaAceptado:!1,enviandoQueryResponsables:!1}},props:{idTrabajo:String,esteTrabajo:Object,seleccionado:Boolean},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!Nl.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!yl.test(this.nuevoDescripcion)},nuevoKeywordsIlegal:function(){return!this.nuevoKeywords||this.nuevoKeywords.length<1||!!Cl.test(this.nuevoKeywords)},usuarioResponsable:function(){return!(!this.usuario||!this.usuario.id)&&this.esteTrabajo.responsables.includes(this.usuario.id)},usuarioAdministrador:function(){return!(!this.usuario||!this.usuario.id)&&this.esteTrabajo.administradores.includes(this.usuario.id)},usuarioPosibleResponsableTrabajo:function(){return!!this.esteTrabajo.posiblesResponsables&&!!this.esteTrabajo.posiblesResponsables.includes(this.usuario.id)}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteTrabajo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(gl()),variables:{idTrabajo:this.esteTrabajo.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteTrabajo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(fl()),variables:{idTrabajo:this.esteTrabajo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},guardarNuevoKeywords:function(){var o=this;this.nuevoKeywordsIlegal?console.log("Keywords ilegal"):this.nuevoKeywords!=this.esteTrabajo.keywords?(console.log("guardando nuevo keywords"),this.enviandoNuevoKeywords=!0,this.$apollo.mutate({mutation:c()(bl()),variables:{idTrabajo:this.esteTrabajo.id,nuevoKeywords:this.nuevoKeywords}}).then((function(){o.enviandoNuevoKeywords=!1,o.editandoKeywords=!1})).catch((function(e){var i=e.graphQLErrors;o.enviandoNuevoKeywords=!1,console.log("Error. E :".concat(i))}))):this.editandoKeywords=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteTrabajo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteTrabajo.descripcion},toggleEditandoKeywords:function(){this.$refs.inputNuevoKeywords.style.height=this.$refs.keywords.offsetHeight+"px",this.editandoKeywords=!this.editandoKeywords,this.nuevoKeywords=this.esteTrabajo.keywords},toggleEstadoTrabajo:function(){var o=this,e="noCompletado";"noCompletado"===this.esteTrabajo.estadoDesarrollo&&(e="completado"),this.togglingEstado=!0,this.$apollo.mutate({mutation:c()(Al()),variables:{idTrabajo:this.esteTrabajo.id,nuevoEstado:e}}).then((function(){o.togglingEstado=!1,console.log("toggled")})).catch((function(e){o.togglingEstado=!1,console.log("Error: E:".concat(e))}))},entrarListaPosiblesResponsables:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles responsables del trabajo con id ".concat(this.esteTrabajo.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(hl()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},abandonarListaResponsables:function(){var o=this;console.log("Abandonando la responsabilidad en este trabajo"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(ml()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},aceptarResponsable:function(o){var e=this;console.log("aceptando como responsable al usuario ".concat(o)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(pl()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1,e.responsableSeleccionadoEstaAceptado=!0,e.versionCalendario++})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))},asumirComoResponsable:function(){var o=this;console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(vl()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},debounceSetResponsablesSolicitados:ks()((function(){this.setResponsablesSolicitados(parseInt(this.responsablesSolicitados))}),2e3),setResponsablesSolicitados:function(o){var e=this;o<0&&(o=0),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(ll()),variables:{idTrabajo:this.esteTrabajo.id,nuevoCantidadResponsablesSolicitados:o}}).then((function(o){var i=o.data.setResponsablesSolicitadosTrabajo;e.enviandoQueryResponsables=!1,e.responsablesSolicitados=i.responsablesSolicitados})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoQueryResponsables=!1}))},navegarAlTrabajo:function(){this.$emit("navegarAlNodo","/trabajo/"+this.esteTrabajo.id)}},watch:{responsablesSolicitados:function(o){o!==this.esteTrabajo.responsablesSolicitados&&(console.log("Cambio en responsables solicitados"),o<1?this.setResponsablesSolicitados(parseInt(o)):this.debounceSetResponsablesSolicitados())}},mounted:function(){this.responsablesSolicitados=this.esteTrabajo.responsablesSolicitados}},wl=El,Dl=(i("ab96"),Object(m["a"])(wl,dl,ul,!1,null,"bd1cfa88",null)),jl=Dl.exports,xl=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodo",class:{seleccionado:o.seleccionado,deshabilitado:o.enviandoQueryGeneral},style:[o.estiloPosicion,o.estiloZeta,o.estiloSize,{transition:o.callingPosiciones?"left 5s":""}],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.agarrado=!o.callingPosiciones)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.agarrado,expression:"agarrado"}],attrs:{id:"zonaArrastre"}}),n("div",{style:[o.estiloColor],attrs:{id:"bolita"}},["Objetivo"===o.esteNodo.__typename?n("img",{staticClass:"iconoFondo",class:{transparentoso:o.transparentoso},attrs:{src:i("416c"),alt:"Nodo"}}):n("img",{staticClass:"iconoFondo",class:{transparentoso:o.transparentoso},attrs:{src:i("e463"),alt:"Nodo"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.parentDeSeleccionado,expression:"parentDeSeleccionado"}],staticClass:"aureola",attrs:{id:"aureolaParentSeleccionado"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.plegado,expression:"plegado"}],attrs:{src:i("a8e5"),alt:"Plegado",title:"Este nodo ha sido plegado",id:"iconoPlegado"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"bAbrirNodo",attrs:{src:i("666f"),alt:"abrir",title:"Ampliar información"},on:{click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),o.$emit("meAbrieron"))},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()}}}),n("div",{class:{transparentoso:o.transparentoso},style:[o.estiloCartelNombre,o.colorCartelNombre],attrs:{id:"zonaNombre"}},[n("div",{attrs:{id:"nombre",draggable:"false"}},[o._v(" "+o._s(o.callingPosiciones?o.esteNodo.peso.toFixed(2):o.esteNodo.nombre)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuario&&o.usuario.id,expression:"usuario && usuario.id"}],staticClass:"botonMenuCx",class:{deshabilitado:o.enviandoQueryPlegar},on:{click:function(e){return e.stopPropagation(),o.togglePlegar(e)},mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()}}},[o._v(" "+o._s(o.plegado?"Desplegar":"Plegar")+" ")]),null!=o.idNodoSeleccionado&&o.idNodoSeleccionado!=o.esteNodo.id?[n("div",{staticClass:"seccionMenuCx"},[o._v("El elemento seleccionado...")]),n("div",{directives:[{name:"show",rawName:"v-show",value:(o.usuarioResponsableNodoSeleccionado||o.usuarioSuperadministrador)&&!o.requeridoPorSeleccionado,expression:"\n          (usuarioResponsableNodoSeleccionado || usuarioSuperadministrador) &&\n          !requeridoPorSeleccionado\n        "}],staticClass:"botonMenuCx",on:{mouseup:function(o){o.stopPropagation()},mousedown:function(o){o.stopPropagation()},click:function(e){return e.stopPropagation(),o.crearRequerimento(o.idNodoSeleccionado,o.esteNodo.id)}}},[o._v(" Requiere este elemento ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador&&o.requeridoPorSeleccionado&&!o.childSeleccionado,expression:"\n          usuarioSuperadministrador &&\n          requeridoPorSeleccionado &&\n          !childSeleccionado\n        "}],staticClass:"botonMenuCx",on:{mouseup:function(o){o.stopPropagation()},mousedown:function(o){o.stopPropagation()},click:function(e){return e.stopPropagation(),o.crearParenting(o.idNodoSeleccionado,o.esteNodo.id)}}},[o._v(" Se adueña de este elemento ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.requeridoPorSeleccionado,expression:"requeridoPorSeleccionado"}],staticClass:"botonMenuCx",class:{deshabilitado:!o.usuarioResponsableNodoSeleccionado&&!o.usuarioSuperadministrador},on:{mouseup:function(o){o.stopPropagation()},mousedown:function(o){o.stopPropagation()},click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.idNodoSeleccionado,o.esteNodo.id)}}},[o._v(" Desconectar ")])]:o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador||o.usuarioAdministrador,expression:"usuarioSuperadministrador || usuarioAdministrador"}],staticClass:"botonMenuCx",class:{deshabilitado:(o.autoadministrado&&o.esteNodo.administradores.length>1&&!o.usuarioSuperadministrador||!o.usuarioResponsable&&o.esteNodo.responsables.length>0)&&!o.usuarioSuperadministrador},on:{click:o.eliminarse}},[o._v(" Eliminar ")])],2)])},Pl=[];function Sl(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              setPlegarNodoSolidaridadUsuario(\n                idNodo: $idNodo                \n              ) {\n                id\n                atlasSolidaridad{\n                  idsNodosPlegados\n                }\n              }\n            }\n          "]);return Sl=function(){return o},o}function Rl(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $tipo: String!) {\n              eliminarNodoSolidaridad(idNodo: $idNodo, tipo: $tipo)\n            }\n          "]);return Rl=function(){return o},o}function Il(){var o=Object(s["a"])(["\n          mutation ($idUnNodo: ID!, $idOtroNodo: ID!) {\n            desvincularNodosSolidaridad(\n              idUnNodo: $idUnNodo\n              idOtroNodo: $idOtroNodo\n            ) {\n              __typename\n              ... on Trabajo {\n                id\n                vinculos {\n                  idRef\n                  tipo\n                  tipoRef\n                }\n                administradores\n                nodoParent {\n                  idNodo\n                  tipo\n                }\n              }\n              ... on Objetivo {\n                id\n                vinculos {\n                  idRef\n                  tipo\n                  tipoRef\n                }\n                administradores\n                nodoParent {\n                  idNodo\n                  tipo\n                }\n              }\n            }\n          }\n        "]);return Il=function(){return o},o}function Tl(){var o=Object(s["a"])(["\n          mutation ($idNodoRequiriente: ID!, $idNodoRequerido: ID!) {\n            crearParentingEntreNodosSolidaridad(\n              idNodoRequiriente: $idNodoRequiriente\n              idNodoRequerido: $idNodoRequerido\n            ) {\n              __typename\n              ... on Trabajo {\n                id\n                vinculos {\n                  idRef\n                  tipo\n                  tipoRef\n                }\n                administradores\n                nodoParent {\n                  idNodo\n                  tipo\n                }\n              }\n              ... on Objetivo {\n                id\n                vinculos {\n                  idRef\n                  tipo\n                  tipoRef\n                }\n                administradores\n                nodoParent {\n                  idNodo\n                  tipo\n                }\n              }\n            }\n          }\n        "]);return Tl=function(){return o},o}function kl(){var o=Object(s["a"])(["\n          mutation ($idNodoRequiriente: ID!, $idNodoRequerido: ID!) {\n            crearRequerimentoEntreNodosSolidaridad(\n              idNodoRequiriente: $idNodoRequiriente\n              idNodoRequerido: $idNodoRequerido\n            ) {\n              __typename\n              ... on Trabajo {\n                id\n                vinculos {\n                  idRef\n                  tipo\n                  tipoRef\n                }\n                administradores\n                nodoParent {\n                  idNodo\n                  tipo\n                }\n              }\n              ... on Objetivo {\n                id\n                vinculos {\n                  idRef\n                  tipo\n                  tipoRef\n                }\n                administradores\n                nodoParent {\n                  idNodo\n                  tipo\n                }\n              }\n            }\n          }\n        "]);return kl=function(){return o},o}function Ol(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevaPosicion: CoordsInput) {\n              setPosicionNodoSolidaridad(\n                idNodo: $idNodo\n                nuevaPosicion: $nuevaPosicion\n              ) {\n                __typename\n                ... on Trabajo {\n                  id\n                  coords {\n                    x\n                    y\n                  }\n                }\n                ... on Objetivo {\n                  id\n                  coords {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return Ol=function(){return o},o}var Ml={name:"nodo",props:{esteNodo:Object,idNodoSeleccionado:String,nodoSeleccionado:Object,menuCx:Boolean,factorZoom:Number,callingPosiciones:Boolean,transparentoso:Boolean,usuarioAdministradorNodoSeleccionado:Boolean,usuarioResponsableNodoSeleccionado:Boolean,childSeleccionado:Boolean,parentDeSeleccionado:Boolean,idsNodosPlegados:Array},data:function(){return{estiloNombreBase:{minWidth:80,fontSize:12,minHeight:15,padding:10,borderRadius:10},agarrado:!1,arrastrandoNodo:0,umbralArrastreNodo:10,posicion:{x:0,y:0},montado:!1,widthBase:150,heightBase:100,size:{x:40,y:40},enviandoQueryGeneral:!1,enviandoQueryPlegar:!1}},methods:{arrastrarNodo:function(o){if(this.agarrado&&(!1!==this.usuarioAdministrador||!1!==this.usuarioSuperadministrador)&&(this.arrastrandoNodo=this.arrastrandoNodo+Math.abs(o.movementX)+Math.abs(o.movementY),!(this.arrastrandoNodo<this.umbralArrastreNodo))){var e=document.getElementById("contenedorNodos"),i=e.getBoundingClientRect(),n=Math.round((o.clientY-i.top)/this.factorZoom),a=Math.round((o.clientX-i.left)/this.factorZoom),t=25,s=15;a-=a%t,n-=n%s,this.$set(this.posicion,"x",a),this.$set(this.posicion,"y",n)}},guardarPosicion:function(){var o=this;this.arrastrandoNodo<this.umbralArrastreNodo?this.agarrado=!1:this.usuarioAdministrador||this.usuarioSuperadministrador?(this.arrastrandoNodo=0,this.agarrado=!1,this.$apollo.mutate({mutation:c()(Ol()),variables:{idNodo:this.esteNodo.id,nuevaPosicion:this.posicion}}).then((function(){console.log("Posición guardada"),o.$emit("meMovi")})).catch((function(o){console.log("Error. E: ".concat(o))}))):this.agarrado=!1},crearRequerimento:function(o,e){console.log("Se fijara que ".concat(o," requiere a ").concat(e)),this.$apollo.mutate({mutation:c()(kl()),variables:{idNodoRequiriente:o,idNodoRequerido:e}})},crearParenting:function(o,e){console.log("Se fijara que ".concat(o," es parent de ").concat(e)),this.$apollo.mutate({mutation:c()(Tl()),variables:{idNodoRequiriente:o,idNodoRequerido:e}})},eliminarVinculo:function(o,e){console.log("Se desconectará el nodo ".concat(o," del nodo ").concat(e)),this.$apollo.mutate({mutation:c()(Il()),variables:{idUnNodo:o,idOtroNodo:e}})},eliminarse:function(){var o=this;if(this.usuarioSuperadministrador||this.usuarioAdministrador){this.enviandoQueryGeneral=!0;var e=this;this.$apollo.mutate({mutation:c()(Rl()),variables:{idNodo:this.esteNodo.id,tipo:this.esteNodo.__typename.toLowerCase()}}).then((function(){e.enviandoQueryGeneral=!1,o.$emit("meElimine")})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoQueryGeneral=!1}))}else console.log("No autorizado")},togglePlegar:function(){var o=this;this.enviandoQueryPlegar=!0,this.$apollo.mutate({mutation:c()(Sl()),variables:{idNodo:this.esteNodo.id}}).then((function(){o.enviandoQueryPlegar=!1,console.log("toggled")})).catch((function(e){o.enviandoQueryPlegar=!1,console.log("Error: E:".concat(e))}))}},computed:{estiloPosicion:function(){return this.montado?{left:(this.posicion.x-this.size.x/2)*this.factorZoom+"px",top:(this.posicion.y-this.size.y/2)*this.factorZoom+"px"}:{top:"0px",left:"0px"}},estiloZeta:function(){var o=0;return(this.arrastrandoNodo>this.umbralArrastreNodo||this.seleccionado)&&(o=100),this.menuCx&&(o=200),{zIndex:o}},estiloSize:function(){return{width:Math.round(this.size.x*this.factorZoom)+"px",height:Math.round(this.size.y*this.factorZoom)+"px",fontSize:Math.round(14*this.factorZoom)+"px",padding:Math.round(5*this.factorZoom)+"px"}},seleccionado:function(){return this.idNodoSeleccionado&&this.idNodoSeleccionado==this.esteNodo.id},usuarioResponsable:function(){return!(!this.usuario||!this.usuario.id)&&this.esteNodo.responsables.includes(this.usuario.id)},usuarioAdministrador:function(){return!(!this.usuario||!this.usuario.id)&&this.esteNodo.administradores.includes(this.usuario.id)},estiloCartelNombre:function(){return{minWidth:parseInt(this.estiloNombreBase.minWidth*this.factorZoom)+"px",fontSize:parseInt(this.estiloNombreBase.fontSize*this.factorZoom)+"px",minHeight:parseInt(this.estiloNombreBase.minHeight*this.factorZoom)+"px",padding:parseInt(this.estiloNombreBase.padding*this.factorZoom)+"px",borderRadius:parseInt(this.estiloNombreBase.borderRadius*this.factorZoom)+"px"}},colorCartelNombre:function(){var o="white";return this.esteNodo.responsables&&this.esteNodo.responsables.length>0&&(o="#f0ee6e"),"completado"===this.esteNodo.estadoDesarrollo&&(o="rgb(86, 176, 54)"),this.usuarioResponsable&&(o="rgb(166 137 193)"),{backgroundColor:o}},autoadministrado:function(){return!this.esteNodo.nodoParent||!this.esteNodo.nodoParent.idNodo},conectadoAlSeleccionado:function(){var o=this;return!!this.nodoSeleccionado&&(!!this.esteNodo.vinculos.some((function(e){return e.idRef===o.idNodoSeleccionado}))||!!this.nodoSeleccionado.vinculos.some((function(e){return e.idRef===o.esteNodo.id})))},requeridoPorSeleccionado:function(){var o=this;return!!this.nodoSeleccionado&&!!this.nodoSeleccionado.vinculos.some((function(e){return e.idRef===o.esteNodo.id}))},huerfano:function(){return 0===this.esteNodo.responsables.length&&0===this.esteNodo.administradores.length},estiloColor:function(){var o="rgba(105, 199, 199, 0.9)";return this.seleccionado&&(o="rgb(193 72 139)"),{backgroundColor:o}},plegado:function(){return this.idsNodosPlegados.includes(this.esteNodo.id)}},watch:{esteNodo:function(){this.$set(this.posicion,"x",this.esteNodo.coords.x),this.$set(this.posicion,"y",this.esteNodo.coords.y)}},mounted:function(){this.montado=!0,this.$set(this.posicion,"x",this.esteNodo.coords.x),this.$set(this.posicion,"y",this.esteNodo.coords.y)}},Bl=Ml,Fl=(i("5462"),Object(m["a"])(Bl,xl,Pl,!1,null,"1940a744",null)),$l=Fl.exports,Ql=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:o.nodoVisible,expression:"nodoVisible"}],attrs:{id:"canvasEnlacesNodo"}},[i("transition",{attrs:{name:"fade"}},[i("canvas",{directives:[{name:"show",rawName:"v-show",value:!o.seleccionado,expression:"!seleccionado"}],ref:"enlacesGrises",staticClass:"enlacesGrises enlaces",style:[o.offset]})]),i("transition",{attrs:{name:"fade"}},[i("canvas",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],ref:"enlacesRequeridos",staticClass:"enlacesRequeridos enlaces",style:[o.offset]})]),i("transition",{attrs:{name:"fade"}},[i("canvas",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&!o.plegado,expression:"seleccionado && !plegado"}],ref:"enlacesChildren",staticClass:"enlacesChildren enlaces",style:[o.offset]})]),i("transition",{attrs:{name:"fade"}},[i("canvas",{directives:[{name:"show",rawName:"v-show",value:o.requiereSeleccionado,expression:"requiereSeleccionado"}],ref:"enlacesSeleccionado",staticClass:"enlacesSeleccionado enlaces",style:[o.offsetSeleccionado]})])],1)},ql=[],Ul={name:"CanvasEnlacesNodo",props:{yo:Object,esteNodo:Object,todosNodos:Array,factorZoom:Number,nodoSeleccionado:Object,childSeleccionado:Boolean,idsNodosVisibles:Array,redibujarEnlaces:{type:Number,default:0}},data:function(){return{esquinasSeleccionado:{x1:0,x2:0,y1:0,y2:0},posicionSeleccionado:{x:0,y:0}}},methods:{setEsquinasSeleccionado:function(){var o=this;this.requiereSeleccionado||(this.esquinasSeleccionado={x1:0,x2:0,y1:0,y2:0});var e=[this.todosNodos.find((function(e){return e.id===o.esteNodo.id})),this.todosNodos.find((function(e){return e.id===o.nodoSeleccionado.id}))],i=e.reduce((function(o,e){return e.coords.x<o?e.coords.x:o}),this.esteNodo.coords.x),n=e.reduce((function(o,e){return e.coords.x>o?e.coords.x:o}),this.esteNodo.coords.x),a=e.reduce((function(o,e){return e.coords.y<o?e.coords.y:o}),this.esteNodo.coords.y),t=e.reduce((function(o,e){return e.coords.y>o?e.coords.y:o}),this.esteNodo.coords.y);this.esquinasSeleccionado={x1:i,x2:n,y1:a,y2:t}},setPosicionSeleccionado:function(){this.posicionSeleccionado={x:this.esquinasSeleccionado.x1,y:this.esquinasSeleccionado.y1}},trazarVinculosGrises:function(){var o=this;if(this.nodoVisible){var e=this.$refs.enlacesGrises.getContext("2d");e.canvas.width=(this.esquinas.x2-this.esquinas.x1)*this.factorZoom,e.canvas.height=(this.esquinas.y2-this.esquinas.y1)*this.factorZoom,e.lineWidth=2,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.strokeStyle="#b3b3b3",this.nodosRequeridos.forEach((function(i){o.idsNodosVisibles.includes(i.id)&&o.dibujarLineaEntreNodos(i,o.esteNodo,e,o.posicion)})),e.stroke()}},trazarVinculosRequeridos:function(){var o=this;if(this.nodoVisible){var e=this.$refs.enlacesRequeridos.getContext("2d");e.canvas.width=(this.esquinas.x2-this.esquinas.x1)*this.factorZoom,e.canvas.height=(this.esquinas.y2-this.esquinas.y1)*this.factorZoom,e.lineWidth=2,e.clearRect(0,0,e.canvas.width,e.canvas.height),this.nodosRequeridos.forEach((function(i){!o.idsNodosVisibles.includes(i.id)||i.nodoParent&&i.nodoParent.idNodo===o.esteNodo.id||(e.beginPath(),i.nodoParent&&i.nodoParent.idNodo===o.esteNodo.id?e.strokeStyle="#d55f18":e.strokeStyle="#d09a83",o.dibujarLineaEntreNodos(i,o.esteNodo,e,o.posicion),e.stroke())}))}},trazarVinculosChildren:function(){var o=this;if(this.nodoVisible){var e=this.$refs.enlacesChildren.getContext("2d");e.canvas.width=(this.esquinas.x2-this.esquinas.x1)*this.factorZoom,e.canvas.height=(this.esquinas.y2-this.esquinas.y1)*this.factorZoom,e.lineWidth=2,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.strokeStyle="#d55f18",this.nodosChildren.forEach((function(i){o.idsNodosVisibles.includes(i.id)&&o.dibujarLineaEntreNodos(i,o.esteNodo,e,o.posicion)})),e.stroke()}},trazarVinculosSeleccionado:function(){var o=this;if(this.nodoVisible){this.setEsquinasSeleccionado(),this.setPosicionSeleccionado();var e=this.$refs.enlacesSeleccionado.getContext("2d");e.canvas.width=(this.esquinasSeleccionado.x2-this.esquinasSeleccionado.x1)*this.factorZoom,e.canvas.height=(this.esquinasSeleccionado.y2-this.esquinasSeleccionado.y1)*this.factorZoom,e.lineWidth=2,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.strokeStyle="#1e4bbf",[this.nodoSeleccionado].forEach((function(i){o.dibujarLineaEntreNodos(i,o.esteNodo,e,o.posicionSeleccionado)})),e.stroke()}},dibujarLineaEntreNodos:function(o,e,i,n){var a=Math.atan((e.coords.y-o.coords.y)/(e.coords.x-o.coords.x));e.coords.y-o.coords.y<0&&e.coords.x-o.coords.x<0&&(a+=Math.PI),e.coords.y-o.coords.y>0&&e.coords.x-o.coords.x<0&&(a+=Math.PI);var t={x:Math.round(20*Math.cos(a)),y:Math.round(20*Math.sin(a))},s={x:Math.round((o.coords.x+t.x)*this.factorZoom-n.x*this.factorZoom),y:Math.round((o.coords.y+t.y)*this.factorZoom-n.y*this.factorZoom)},r={x:Math.round((e.coords.x-t.x)*this.factorZoom-n.x*this.factorZoom),y:Math.round((e.coords.y-t.y)*this.factorZoom-n.y*this.factorZoom)};i.moveTo(s.x,s.y),i.lineTo(r.x,r.y);var c={x:Math.round((r.x+s.x)/2),y:Math.round((r.y+s.y)/2)},d=Math.round(7*this.factorZoom),u={x:Math.round(c.x+d*Math.cos(a-3*Math.PI/4)),y:Math.round(c.y+d*Math.sin(a-3*Math.PI/4))},l={x:Math.round(c.x+d*Math.cos(a+3*Math.PI/4)),y:Math.round(c.y+d*Math.sin(a+3*Math.PI/4))};i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y)}},computed:{posNodo:function(){return this.esteNodo.coords},idsNodosRequeridos:function(){return this.esteNodo.vinculos.filter((function(o){return"requiere"===o.tipo})).map((function(o){return o.idRef}))},nodosRequeridos:function(){var o=this;return this.todosNodos.filter((function(e){return o.idsNodosRequeridos.includes(e.id)}))},nodosChildren:function(){var o=this;return this.todosNodos.filter((function(e){return o.idsNodosRequeridos.includes(e.id)&&e.nodoParent&&e.nodoParent.idNodo===o.esteNodo.id}))},cantidadNodosRequeridos:function(){return this.nodosRequeridos.length},esquinas:function(){var o=this,e=this.todosNodos.filter((function(e){return(o.idsNodosRequeridos.includes(e.id)||e.id===o.esteNodo.id)&&o.idsNodosVisibles.includes(e.id)})),i=e.reduce((function(o,e){return e.coords.x<o?e.coords.x:o}),this.esteNodo.coords.x),n=e.reduce((function(o,e){return e.coords.x>o?e.coords.x:o}),this.esteNodo.coords.x),a=e.reduce((function(o,e){return e.coords.y<o?e.coords.y:o}),this.esteNodo.coords.y),t=e.reduce((function(o,e){return e.coords.y>o?e.coords.y:o}),this.esteNodo.coords.y);return{x1:i,x2:n,y1:a,y2:t}},posicion:function(){return{x:this.esquinas.x1,y:this.esquinas.y1}},offset:function(){return{left:this.esquinas.x1*this.factorZoom+"px",top:this.esquinas.y1*this.factorZoom+"px",width:(this.esquinas.x2-this.esquinas.x1)*this.factorZoom+"px",height:(this.esquinas.y2-this.esquinas.y1)*this.factorZoom+"px"}},apariencia:function(){return this.nodoSeleccionado&&this.nodoSeleccionado.id===this.esteNodo.id?{backgroundColor:"rgba(128, 255, 0, 0.39)"}:{backgroundColor:"rgba(128, 255, 0, 0)"}},seleccionado:function(){return!!this.nodoSeleccionado&&this.nodoSeleccionado.id===this.esteNodo.id},plegado:function(){return!!(this.usuario&&this.usuario.id&&this.yo&&this.yo.atlasSolidaridad&&this.yo.atlasSolidaridad.idsNodosPlegados)&&this.yo.atlasSolidaridad.idsNodosPlegados.includes(this.esteNodo.id)},nodoVisible:function(){return this.idsNodosVisibles.includes(this.esteNodo.id)},requiereSeleccionado:function(){var o=this;return!!this.nodoSeleccionado&&this.esteNodo.vinculos.some((function(e){return"requiere"===e.tipo&&e.idRef===o.nodoSeleccionado.id}))},offsetSeleccionado:function(){return{left:this.esquinasSeleccionado.x1*this.factorZoom+"px",top:this.esquinasSeleccionado.y1*this.factorZoom+"px",width:(this.esquinasSeleccionado.x2-this.esquinasSeleccionado.x1)*this.factorZoom+"px",height:(this.esquinasSeleccionado.y2-this.esquinasSeleccionado.y1)*this.factorZoom+"px"}}},mounted:function(){this.trazarVinculosGrises(),this.trazarVinculosRequeridos(),this.trazarVinculosChildren()},watch:{redibujarEnlaces:function(){this.trazarVinculosGrises(),this.trazarVinculosRequeridos()},cantidadNodosRequeridos:function(){this.trazarVinculosGrises(),this.trazarVinculosRequeridos()},posNodo:function(){this.trazarVinculosGrises(),this.trazarVinculosRequeridos(),this.trazarVinculosChildren()},esquinas:function(){this.trazarVinculosGrises(),this.trazarVinculosRequeridos(),this.trazarVinculosChildren()},plegado:function(){this.trazarVinculosGrises(),this.trazarVinculosRequeridos()},nodoSeleccionado:function(){this.requiereSeleccionado&&this.trazarVinculosSeleccionado()}}},Vl=Ul,Ll=(i("803f"),Object(m["a"])(Vl,Ql,ql,!1,null,"77327cb7",null)),Gl=Ll.exports,Kl=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"panelControlNodos"},on:{mousedown:function(o){o.stopPropagation()},mouseup:function(o){o.stopPropagation()}}},[n("div",{attrs:{id:"botonIterateNodosUsuario"},on:{click:o.tabNodoUsuario}}),n("img",{staticClass:"botonControl",style:{opacity:o.mostrandoTrabajos?"1":"0.5"},attrs:{src:i("e463"),alt:"Trabajos",title:o.mostrandoTrabajos?"Ocultar trabajos":"Ver trabajos",id:"botonToggleTrabajos"},on:{click:function(e){return o.$emit("setMostrandoTrabajos",!o.mostrandoTrabajos)}}}),n("img",{staticClass:"botonControl",style:{opacity:o.mostrandoObjetivos?"1":"0.5"},attrs:{src:i("416c"),alt:"Objetivos",title:o.mostrandoObjetivos?"Ocultar objetivos":"Ver objetivos",id:"botonToggleObjetivos"},on:{click:function(e){return o.$emit("setMostrandoObjetivos",!o.mostrandoObjetivos)}}})])},Zl=[],zl={name:"PanelControlNodos",props:{todosNodos:Array,mostrandoTrabajos:Boolean,mostrandoObjetivos:Boolean,idsNodosVisibles:Array},data:function(){return{idCurrentNodoUsuario:null}},methods:{tabNodoUsuario:function(){var o=this;if(this.nodosUsuario&&!(this.nodosUsuario.length<1)){var e=0;if(this.idCurrentNodoUsuario){var i=this.nodosUsuario.findIndex((function(e){return e.id===o.idCurrentNodoUsuario}));i>-1&&(e=i+1)}e>=this.nodosUsuario.length&&(e=0),this.idCurrentNodoUsuario=this.nodosUsuario[e].id}}},computed:{nodosUsuario:function(){var o=this;return this.usuario&&this.usuario.id?this.todosNodos.filter((function(e){return e.responsables&&e.responsables.includes(o.usuario.id)&&o.idsNodosVisibles.includes(e.id)})):[]}},watch:{idCurrentNodoUsuario:function(){this.$emit("centrarEnNodo",this.idCurrentNodoUsuario)}}},Jl=zl,_l=(i("08ec"),Object(m["a"])(Jl,Kl,Zl,!1,null,"5fe4866f",null)),Hl=_l.exports,Yl=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"listas"},on:{mouseup:function(o){o.stopPropagation()},mousedown:function(o){o.stopPropagation()},touchmove:function(o){o.stopPropagation()},touchstart:function(o){o.stopPropagation()},touchend:function(o){o.stopPropagation()}}},[n("div",{attrs:{id:"barraSelectoresListas"}},[n("img",{staticClass:"selectorLista",class:{selectorSeleccionado:"nodos"===o.listaSeleccionada&&o.abierta},attrs:{src:i("5132"),title:"Todos los nodos",alt:"Nodos",id:"selectorListaNodos"},on:{click:function(e){o.abierta=!0,o.listaSeleccionada="nodos"}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.abierta,expression:"abierta"}],staticClass:"selectorLista",class:{selectorSeleccionado:"materiales"===o.listaSeleccionada},attrs:{src:i("56bc"),title:"Todos los materiales",alt:"Materiales",id:"selectorListaMateriales"},on:{click:function(e){o.listaSeleccionada="materiales"}}})]),n("div",{attrs:{id:"zonaListas"},on:{click:function(e){if(e.target!==e.currentTarget)return null;e.stopPropagation(),o.idNodoSeleccionado=null}}},[n("lista-nodos",{directives:[{name:"show",rawName:"v-show",value:"nodos"===o.listaSeleccionada&&o.abierta,expression:"listaSeleccionada === 'nodos' && abierta"}],staticClass:"lista",attrs:{todosNodos:o.todosNodos,idNodoSeleccionado:o.idNodoSeleccionado},on:{centrarEnNodo:function(e){return o.$emit("centrarEnNodo",e)},nodoSeleccionado:function(e){o.idNodoSeleccionado=e===o.idNodoSeleccionado?null:e}},nativeOn:{click:function(e){if(e.target!==e.currentTarget)return null;o.idNodoSeleccionado=null}}}),n("span",{directives:[{name:"show",rawName:"v-show",value:o.abierta,expression:"abierta"}],attrs:{id:"tituloListaMateriales"}},[o._v("Materiales "+o._s(o.nodoSeleccionado?" relevantes para el nodo "+o.nodoSeleccionado.nombre:""))]),n("lista-materiales",{directives:[{name:"show",rawName:"v-show",value:"materiales"===o.listaSeleccionada&&o.abierta,expression:"listaSeleccionada === 'materiales' && abierta"}],attrs:{idNodoSeleccionado:o.idNodoSeleccionado,descendientesNodoSeleccionado:o.descendientesNodoSeleccionado},on:{centrarEnNodo:function(e){return o.$emit("centrarEnNodo",e)}}})],1)])},Xl=[],Wl=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"listaMateriales"}},o._l(o.todosMateriales,(function(e){return i("info-material",{directives:[{name:"show",rawName:"v-show",value:!o.idNodoSeleccionado||o.idNodoSeleccionado===e.idTrabajoParent||o.descendientesNodoSeleccionado.includes(e.idTrabajoParent),expression:"!idNodoSeleccionado || idNodoSeleccionado===material.idTrabajoParent || descendientesNodoSeleccionado.includes(material.idTrabajoParent)"}],key:e.id,attrs:{esteMaterial:e},on:{centrarEnNodo:function(e){return o.$emit("centrarEnNodo",e)}}})})),1)},ov=[],ev=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"infoMaterial"},[n("div",{attrs:{id:"barraPrincipal"}},[n("div",{staticClass:"nombreMaterial"},[o._v(" "+o._s(o.esteMaterial.nombre)+" ")]),n("div",{staticClass:"botonesDerecha"},[n("img",{staticClass:"botonResponsablesTrabajoParent botonDerecha",attrs:{src:i("c597"),alt:"Materiales",title:"Responsables"},on:{click:function(e){e.stopPropagation(),o.mostrandoResponsables=!o.mostrandoResponsables}}}),o.esteMaterial.idTrabajoParent?n("img",{staticClass:"botonNodo botonDerecha",attrs:{src:i("9d5e"),alt:"Trabajo de orígen"},on:{click:function(e){return e.stopPropagation(),o.$emit("centrarEnNodo",o.esteMaterial.idTrabajoParent)}}}):o._e()])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoResponsables,expression:"mostrandoResponsables"}],attrs:{id:"listaResponsables"},on:{click:function(e){e.stopPropagation(),o.idResponsableSeleccionado=null}}},o._l(o.idsResponsablesNodoOrigen,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e,factorEscala:"0.7"},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e}}})})),1)])},iv=[];function nv(){var o=Object(s["a"])(["\n    query($idTrabajo:ID!){\n        trabajo(idTrabajo:$idTrabajo){\n            id\n            responsables\n        }\n    }\n"]);return nv=function(){return o},o}var av=c()(nv()),tv={components:{IconoPersonaAutonomo:Ki},name:"InfoMaterial",apollo:{idsResponsablesNodoOrigen:{query:av,variables:function(){return{idTrabajo:this.esteMaterial.idTrabajoParent}},update:function(o){return o.trabajo.responsables},skip:function(){return!this.mostrandoResponsables}}},props:{esteMaterial:Object},data:function(){return{mostrandoResponsables:!1,idResponsableSeleccionado:null,idsResponsablesNodoOrigen:[]}}},sv=tv,rv=(i("83b0"),Object(m["a"])(sv,ev,iv,!1,null,"e962994e",null)),cv=rv.exports;function dv(){var o=Object(s["a"])(["\n  query {\n    todosMateriales {\n      id\n      nombre\n      descripcion\n      cantidadNecesaria\n      cantidadDisponible\n      idTrabajoParent\n    }\n  }\n"]);return dv=function(){return o},o}var uv=c()(dv()),lv={components:{InfoMaterial:cv},name:"ListaMateriales",apollo:{todosMateriales:{query:uv}},props:{idNodoSeleccionado:String,descendientesNodoSeleccionado:Array,cerrarVentana:Number},data:function(){return{todosMateriales:[]}}},vv=lv,pv=(i("6e2c"),Object(m["a"])(vv,Wl,ov,!1,null,"4b61e0af",null)),mv=pv.exports,hv=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"listaNodos"},on:{mouseup:function(o){o.stopPropagation()},mousedown:function(o){o.stopPropagation()},touchmove:function(o){o.stopPropagation()},touchstart:function(o){o.stopPropagation()},touchend:function(o){o.stopPropagation()}}},[n("div",{attrs:{id:"zonaBuscar"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.busqueda,expression:"busqueda"}],attrs:{type:"text"},domProps:{value:o.busqueda},on:{input:function(e){e.target.composing||(o.busqueda=e.target.value)}}}),n("img",{attrs:{src:i("1d54"),id:"botonBuscar",alt:"Buscar",width:"20px"}})]),n("div",{attrs:{id:"laListaNodos"}},o._l(o.nodosPrimerNivel,(function(e){return n("nodo-vista-lista",{key:e.id,ref:"nodosEnLista",refInFor:!0,attrs:{esteNodo:e,busqueda:o.busqueda,idNodoSeleccionado:o.idNodoSeleccionado},on:{centrarEnNodo:function(e){return o.$emit("centrarEnNodo",e)},nodoSeleccionado:function(e){return o.$emit("nodoSeleccionado",e)}}})})),1)])},Av=[],bv=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoVistaLista"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.busqueda||o.busqueda.length<2||o.buscado||o.childrenBuscados,expression:"!busqueda || busqueda.length<2 || buscado || childrenBuscados"}],staticClass:"elementoLista"},[n("div",{staticClass:"zonaNombre",class:{seleccionado:o.seleccionado},style:[o.colorNombre],on:{click:function(e){o.mostrandoChildren=!o.mostrandoChildren,o.$emit("nodoSeleccionado",o.esteNodo.id)}}},[o.esteNodo.children&&o.esteNodo.children.length>0?n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoChildren||o.childrenBuscados?"rotateZ(90deg)":"rotateZ(0deg)"}}):o._e(),o._v(" "+o._s(o.esteNodo.nombre)+" "),n("div",{attrs:{id:"botonesRight"}},[n("img",{staticClass:"botonRight",attrs:{src:i("9d5e"),alt:"Centrar",id:"botonCentrarNodo"},on:{click:function(e){return e.stopPropagation(),o.emitirCentrarNodo(e)}}})])]),o.esteNodo.children&&o.esteNodo.children.length>0?n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoChildren||o.childrenBuscados,expression:"mostrandoChildren || childrenBuscados"}],attrs:{id:"sublista"}},[n("div",{attrs:{id:"lineaLista"}}),o._l(o.esteNodo.children,(function(e){return n("nodo-vista-lista",{key:e.id,ref:"nodosChildren",refInFor:!0,attrs:{esteNodo:e,busqueda:o.busqueda,idNodoSeleccionado:o.idNodoSeleccionado},on:{centrarEnNodo:function(e){return o.$emit("centrarEnNodo",e)},nodoSeleccionado:function(e){return o.$emit("nodoSeleccionado",e)}}})}))],2):o._e()])])},fv=[],gv=(i("4d63"),i("466d"),{name:"NodoVistaLista",props:{esteNodo:Object,busqueda:String,idNodoSeleccionado:String},data:function(){return{mostrandoChildren:!1}},methods:{emitirCentrarNodo:function(){this.$emit("centrarEnNodo",this.esteNodo.id)},desplegarIfTargetChild:function(o){var e=this,i=!1;return(this.$refs.nodosChildren||[]).forEach((function(n){(n.desplegarIfTargetChild(o)||n.esteNodo.id===o)&&(e.mostrandoChildren=!0,i=!0)})),i}},computed:{palabrasBuscadas:function(){if(!this.busqueda||this.busqueda.length<2)return[];var o=this.busqueda.trim();return o=o.normalize("NFD").replace(/(?:[\^`\xA8\xAF\xB4\xB7\xB8\u02B0-\u034E\u0350-\u0357\u035D-\u0362\u0374\u0375\u037A\u0384\u0385\u0483-\u0487\u0559\u0591-\u05A1\u05A3-\u05BD\u05BF\u05C1\u05C2\u05C4\u064B-\u0652\u0657\u0658\u06DF\u06E0\u06E5\u06E6\u06EA-\u06EC\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F5\u0818\u0819\u08E3-\u08FE\u093C\u094D\u0951-\u0954\u0971\u09BC\u09CD\u0A3C\u0A4D\u0ABC\u0ACD\u0AFD-\u0AFF\u0B3C\u0B4D\u0B55\u0BCD\u0C4D\u0CBC\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E47-\u0E4C\u0E4E\u0EBA\u0EC8-\u0ECC\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F82-\u0F84\u0F86\u0F87\u0FC6\u1037\u1039\u103A\u1063\u1064\u1069-\u106D\u1087-\u108D\u108F\u109A\u109B\u135D-\u135F\u17C9-\u17D3\u17DD\u1939-\u193B\u1A75-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B34\u1B44\u1B6B-\u1B73\u1BAA\u1BAB\u1C36\u1C37\u1C78-\u1C7D\u1CD0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1D2C-\u1D6A\u1DC4-\u1DCF\u1DF5-\u1DF9\u1DFD-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2CEF-\u2CF1\u2E2F\u302A-\u302F\u3099-\u309C\u30FC\uA66F\uA67C\uA67D\uA67F\uA69C\uA69D\uA6F0\uA6F1\uA700-\uA721\uA788-\uA78A\uA7F8\uA7F9\uA8C4\uA8E0-\uA8F1\uA92B-\uA92E\uA953\uA9B3\uA9C0\uA9E5\uAA7B-\uAA7D\uAABF-\uAAC2\uAAF6\uAB5B-\uAB5F\uAB69-\uAB6B\uABEC\uABED\uFB1E\uFE20-\uFE2F\uFF3E\uFF40\uFF70\uFF9E\uFF9F\uFFE3]|\uD800\uDEE0|\uD802[\uDEE5\uDEE6]|\uD803[\uDD22-\uDD27\uDF46-\uDF50]|\uD804[\uDCB9\uDCBA\uDD33\uDD34\uDD73\uDDC0\uDDCA-\uDDCC\uDE35\uDE36\uDEE9\uDEEA\uDF3C\uDF4D\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC42\uDC46\uDCC2\uDCC3\uDDBF\uDDC0\uDE3F\uDEB6\uDEB7\uDF2B]|\uD806[\uDC39\uDC3A\uDD3D\uDD3E\uDD43\uDDE0\uDE34\uDE47\uDE99]|\uD807[\uDC3F\uDD42\uDD44\uDD45\uDD97]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF9F\uDFF0\uDFF1]|\uD834[\uDD67-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uD838[\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD46\uDD48-\uDD4A])/g,""),o=o.replace(/\s\s+/g," "),o.match(/\b(\w+)\b/g)},textoRelevanteBusqueda:function(){var o=this.esteNodo.nombre+" "+this.esteNodo.descripcion+" "+this.esteNodo.keywords;return o=o.trim(),o=o.replace(/\s\s+/gi," "),o=o.normalize("NFD").replace(/(?:[\^`\xA8\xAF\xB4\xB7\xB8\u02B0-\u034E\u0350-\u0357\u035D-\u0362\u0374\u0375\u037A\u0384\u0385\u0483-\u0487\u0559\u0591-\u05A1\u05A3-\u05BD\u05BF\u05C1\u05C2\u05C4\u064B-\u0652\u0657\u0658\u06DF\u06E0\u06E5\u06E6\u06EA-\u06EC\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F5\u0818\u0819\u08E3-\u08FE\u093C\u094D\u0951-\u0954\u0971\u09BC\u09CD\u0A3C\u0A4D\u0ABC\u0ACD\u0AFD-\u0AFF\u0B3C\u0B4D\u0B55\u0BCD\u0C4D\u0CBC\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E47-\u0E4C\u0E4E\u0EBA\u0EC8-\u0ECC\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F82-\u0F84\u0F86\u0F87\u0FC6\u1037\u1039\u103A\u1063\u1064\u1069-\u106D\u1087-\u108D\u108F\u109A\u109B\u135D-\u135F\u17C9-\u17D3\u17DD\u1939-\u193B\u1A75-\u1A7C\u1A7F\u1AB0-\u1ABD\u1B34\u1B44\u1B6B-\u1B73\u1BAA\u1BAB\u1C36\u1C37\u1C78-\u1C7D\u1CD0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1D2C-\u1D6A\u1DC4-\u1DCF\u1DF5-\u1DF9\u1DFD-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2CEF-\u2CF1\u2E2F\u302A-\u302F\u3099-\u309C\u30FC\uA66F\uA67C\uA67D\uA67F\uA69C\uA69D\uA6F0\uA6F1\uA700-\uA721\uA788-\uA78A\uA7F8\uA7F9\uA8C4\uA8E0-\uA8F1\uA92B-\uA92E\uA953\uA9B3\uA9C0\uA9E5\uAA7B-\uAA7D\uAABF-\uAAC2\uAAF6\uAB5B-\uAB5F\uAB69-\uAB6B\uABEC\uABED\uFB1E\uFE20-\uFE2F\uFF3E\uFF40\uFF70\uFF9E\uFF9F\uFFE3]|\uD800\uDEE0|\uD802[\uDEE5\uDEE6]|\uD803[\uDD22-\uDD27\uDF46-\uDF50]|\uD804[\uDCB9\uDCBA\uDD33\uDD34\uDD73\uDDC0\uDDCA-\uDDCC\uDE35\uDE36\uDEE9\uDEEA\uDF3C\uDF4D\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC42\uDC46\uDCC2\uDCC3\uDDBF\uDDC0\uDE3F\uDEB6\uDEB7\uDF2B]|\uD806[\uDC39\uDC3A\uDD3D\uDD3E\uDD43\uDDE0\uDE34\uDE47\uDE99]|\uD807[\uDC3F\uDD42\uDD44\uDD45\uDD97]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF8F-\uDF9F\uDFF0\uDFF1]|\uD834[\uDD67-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD]|\uD838[\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD46\uDD48-\uDD4A])/g,""),o},matchBusqueda:function(){var o=this,e=0;return this.palabrasBuscadas.forEach((function(i){var n=new RegExp(i,"gi"),a=(o.textoRelevanteBusqueda.match(n)||[]).length;e+=a})),e},buscado:function(){return this.matchBusqueda>0},colorNombre:function(){return this.buscado?{backgroundColor:"tomato"}:{}},childrenBuscados:function(){return!(!this.busqueda||this.busqueda.trim()<2)&&(!!this.$refs.nodosChildren&&this.$refs.nodosChildren.some((function(o){return o.buscado||o.childrenBuscados})))},seleccionado:function(){return this.idNodoSeleccionado&&this.esteNodo.id===this.idNodoSeleccionado}}}),Nv=gv,yv=(i("15fe"),Object(m["a"])(Nv,bv,fv,!1,null,"b52062f0",null)),Cv=yv.exports,Ev={components:{NodoVistaLista:Cv},name:"ListaNodos",props:{idNodoSeleccionado:String,todosNodos:Array},data:function(){return{busqueda:null}},methods:{guardarChildren:function(o){o.children=this.nodosTodos.filter((function(e){return e.nodoParent&&e.nodoParent.id===o.id}))},desplegarCascadaHaciaNodo:function(o){this.$refs.nodosEnLista.forEach((function(e){e.desplegarIfTargetChild(o)}))}},computed:{nodosTodos:function(){return JSON.parse(JSON.stringify(this.todosNodos))},nodosPrimerNivel:function(){return this.nodosNested.filter((function(o){return!o.nodoParent||!o.nodoParent.idNodo}))},nodosNested:function(){var o=this;return this.nodosTodos.map((function(e){return e.children=o.nodosTodos.filter((function(o){return o.nodoParent&&o.nodoParent.idNodo===e.id})),e}))}},watch:{idNodoSeleccionado:function(){!this.idNodoSeleccionado||!this.busqueda||this.busqueda.length<2||(this.desplegarCascadaHaciaNodo(this.idNodoSeleccionado),this.busqueda=null)}}},wv=Ev,Dv=(i("de33"),Object(m["a"])(wv,hv,Av,!1,null,"4c490b7d",null)),jv=Dv.exports,xv={components:{ListaNodos:jv,ListaMateriales:mv},name:"Listas",props:{todosNodos:Array,cerrar:{type:Number,default:0}},data:function(){return{abierta:!1,listaSeleccionada:null,idNodoSeleccionado:null}},computed:{nodoSeleccionado:function(){var o=this;return this.idNodoSeleccionado?this.todosNodos.find((function(e){return e.id===o.idNodoSeleccionado})):null},descendientesNodoSeleccionado:function(){if(!this.nodoSeleccionado)return null;var o=5,e=0,i=[this.nodoSeleccionado.id],n=[];while(i.length>0&&e<o){e++;var a=this.todosNodos.filter((function(o){return i.includes(o.id)})),t=[];a.forEach((function(o){o.vinculos.filter((function(o){return"requiere"===o.tipo})).map((function(o){return o.idRef})).forEach((function(o){var e=t.indexOf(o);-1===e&&t.push(o)}))})),n=n.concat(t),i=t}return n}},watch:{cerrar:function(){this.abierta=!1}}},Pv=xv,Sv=(i("034e"),Object(m["a"])(Pv,Yl,Xl,!1,null,"5210588e",null)),Rv=Sv.exports;function Iv(){var o=Object(s["a"])(["\n            mutation (\n              $infoNodo: NodoSolidaridadInput!\n              $idNodoRequiriente: ID!\n            ) {\n              crearNodoSolidaridadRequerido(\n                infoNodo: $infoNodo\n                idNodoRequiriente: $idNodoRequiriente\n              ) {\n                __typename\n                ... on Trabajo {\n                  id\n                  nombre\n                  descripcion\n                  responsables\n                  posiblesResponsables\n                  responsablesSolicitados\n                  administradores\n                  keywords\n                  nodoParent {\n                    idNodo\n                    tipo\n                  }\n                  coords {\n                    x\n                    y\n                  }\n                  estadoDesarrollo\n                  vinculos {\n                    idRef\n                    tipo\n                    tipoRef\n                  }\n                  stuck\n                  angulo\n                  centroMasa {\n                    x\n                    y\n                  }\n                  puntaje\n                  nivel\n                  turnoNivel\n                  peso\n                }\n                ... on Objetivo {\n                  id\n                  nombre\n                  descripcion\n                  responsables\n                  posiblesResponsables\n                  responsablesSolicitados\n                  administradores\n                  keywords\n                  nodoParent {\n                    idNodo\n                    tipo\n                  }\n                  coords {\n                    x\n                    y\n                  }\n                  estadoDesarrollo\n                  vinculos {\n                    idRef\n                    tipo\n                    tipoRef\n                  }\n                  stuck\n                  angulo\n                  centroMasa {\n                    x\n                    y\n                  }\n                  puntaje\n                  nivel\n                  turnoNivel\n                  peso\n                }\n              }\n            }\n          "]);return Iv=function(){return o},o}function Tv(){var o=Object(s["a"])(["\n            mutation ($infoNodo: NodoSolidaridadInput!) {\n              crearNodoSolidaridad(infoNodo: $infoNodo) {\n                __typename\n                ... on Trabajo {\n                  id\n                  nombre\n                  descripcion\n                  responsables\n                  posiblesResponsables\n                  responsablesSolicitados\n                  administradores\n                  keywords\n                  nodoParent {\n                    idNodo\n                    tipo\n                  }\n                  coords {\n                    x\n                    y\n                  }\n                  estadoDesarrollo\n                  vinculos {\n                    idRef\n                    tipo\n                    tipoRef\n                  }\n                  stuck\n                  angulo\n                  centroMasa {\n                    x\n                    y\n                  }\n                  puntaje\n                  nivel\n                  turnoNivel\n                  peso\n                }\n                ... on Objetivo {\n                  id\n                  nombre\n                  descripcion\n                  responsables\n                  posiblesResponsables\n                  responsablesSolicitados\n                  administradores\n                  keywords\n                  nodoParent {\n                    idNodo\n                    tipo\n                  }\n                  coords {\n                    x\n                    y\n                  }\n                  estadoDesarrollo\n                  vinculos {\n                    idRef\n                    tipo\n                    tipoRef\n                  }\n                  stuck\n                  angulo\n                  centroMasa {\n                    x\n                    y\n                  }\n                  puntaje\n                  nivel\n                  turnoNivel\n                  peso\n                }\n              }\n            }\n          "]);return Tv=function(){return o},o}function kv(){var o=Object(s["a"])(["\n            mutation ($coords: CoordsInput!) {\n              setCoordsVistaAtlasSolidaridadUsuario(coords: $coords)\n            }\n          "]);return kv=function(){return o},o}function Ov(){var o=Object(s["a"])(["\n          subscription ($centro: CoordsInput!, $radio: Int!) {\n            nodoEditado(centro: $centro, radio: $radio) {\n              __typename\n              ... on Trabajo {\n                id\n                nombre\n                descripcion\n                responsables\n                posiblesResponsables\n                responsablesSolicitados\n                administradores\n                keywords\n                nodoParent {\n                  idNodo\n                  tipo\n                }\n                coords {\n                  x\n                  y\n                }\n                estadoDesarrollo\n                vinculos {\n                  idRef\n                  tipo\n                  tipoRef\n                }\n                stuck\n                angulo\n                centroMasa {\n                  x\n                  y\n                }\n                puntaje\n                nivel\n                turnoNivel\n                peso\n              }\n              ... on Objetivo {\n                id\n                nombre\n                descripcion\n                responsables\n                posiblesResponsables\n                responsablesSolicitados\n                administradores\n                keywords\n                nodoParent {\n                  idNodo\n                  tipo\n                }\n                coords {\n                  x\n                  y\n                }\n                estadoDesarrollo\n                vinculos {\n                  idRef\n                  tipo\n                  tipoRef\n                }\n                stuck\n                angulo\n                centroMasa {\n                  x\n                  y\n                }\n                puntaje\n                nivel\n                turnoNivel\n                peso\n              }\n            }\n          }\n        "]);return Ov=function(){return o},o}function Mv(){var o=Object(s["a"])(["\n  query {\n    yo {\n      id\n      atlasSolidaridad {\n        coordsVista {\n          x\n          y\n        }\n        idsNodosPlegados\n      }\n    }\n  }\n"]);return Mv=function(){return o},o}function Bv(){var o=Object(s["a"])(["\n  query {\n    todosNodosSolidaridad {\n      __typename\n      ... on Trabajo {\n        id\n        nombre\n        descripcion\n        responsables\n        posiblesResponsables\n        responsablesSolicitados\n        administradores\n        keywords\n        nodoParent {\n          idNodo\n          tipo\n        }\n        coords {\n          x\n          y\n        }\n        estadoDesarrollo\n        vinculos {\n          idRef\n          tipo\n          tipoRef\n        }\n        stuck\n        angulo\n        centroMasa {\n          x\n          y\n        }\n        puntaje\n        nivel\n        turnoNivel\n        peso\n      }\n      ... on Objetivo {\n        id\n        nombre\n        descripcion\n        responsables\n        posiblesResponsables\n        responsablesSolicitados\n        administradores\n        keywords\n        nodoParent {\n          idNodo\n          tipo\n        }\n        coords {\n          x\n          y\n        }\n        estadoDesarrollo\n        vinculos {\n          idRef\n          tipo\n          tipoRef\n        }\n        stuck\n        angulo\n        centroMasa {\n          x\n          y\n        }\n        puntaje\n        nivel\n        turnoNivel\n        peso\n      }\n    }\n  }\n"]);return Bv=function(){return o},o}var Fv=c()(Bv()),$v=c()(Mv()),Qv={components:{VentanitaObjetivo:cl,VentanitaTrabajo:jl,Loading:Mo,Nodo:$l,CanvasEnlacesNodo:Gl,PanelControlNodos:Hl,Listas:Rv},name:"AtlasProyectos",apollo:{todosNodos:{query:Fv,update:function(o){var e=o.todosNodosSolidaridad;return this.descargasTodosNodos++,e},skip:function(){return!this.radioDescarga||!this.coordsInicialesSetted},subscribeToMore:{document:c()(Ov()),variables:function(){return{centro:{x:0,y:0},radio:0}},updateQuery:function(o,e){var i=e.subscriptionData.data,n=o.todosNodosSolidaridad.findIndex((function(o){return o.id==i.nodoEditado.id}));return n>-1&&o.todosNodosSolidaridad.splice(n,1),o.todosNodosSolidaridad.push(i.nodoEditado),o}}},yo:{query:$v,update:function(o){var e=o.yo;return this.calcularEsquinaVista(e.atlasSolidaridad.coordsVista),this.coordsInicialesSetted=!0,e},skip:function(){return!this.usuarioLogeado||!this.montado},fetchPolicy:"network-only"}},data:function(){return{montado:!1,mostrandoMenuContextual:!1,posMenuContextual:{top:0,left:0},esquinaVistaDecimal:{x:0,y:0},centroDescarga:{x:0,y:0},radioDescarga:null,sizeAtlas:{x:0,y:0,diagonal:0},panningVista:!1,vistaPanned:!1,hovered:!1,idNodoSeleccionado:null,idNodoPaVentanita:null,idNodoMenuCx:null,zoom:80,minZoom:30,maxZoom:100,showingZoomInfo:!1,infoPosZoom:null,pinching:!1,lastPinchDistance:0,descargasTodosNodos:0,todosNodos:[],enviandoQueryNodos:!1,callingPosiciones:!1,cerrarBusqueda:0,cerrarMateriales:0,cerrarListas:0,redibujarEnlacesNodos:0,enviandoCoordsVistaUsuario:!1,coordsInicialesSetted:!1,esquinaVistaCalculada:!1,mostrandoTrabajos:!0,mostrandoObjetivos:!0,showingNombreNodoEmergente:!1}},methods:{calcularEsquinaVista:function(o){this.esquinaVistaCalculada||(this.$set(this.esquinaVistaDecimal,"x",Math.round(o.x-this.sizeAtlas.x/(2*this.factorZoom))),this.$set(this.esquinaVistaDecimal,"y",Math.round(o.y-this.sizeAtlas.y/(2*this.factorZoom))),this.esquinaVistaCalculada=!0)},abrirMenuContextual:function(o){var e=this.$el.getBoundingClientRect(),i=Math.round(o.pageY-e.top),n=Math.round(o.pageX-e.left);this.$set(this.posMenuContextual,"y",i),this.$set(this.posMenuContextual,"x",n),this.mostrandoMenuContextual=!0},uploadVistaActual:ks()((function(){var o=this;this.enviandoCoordsVistaUsuario=!0,console.log("Uploading vista de usuario"),this.$apollo.mutate({mutation:c()(kv()),variables:{coords:{x:Math.round(this.esquinaVistaDecimal.x+this.sizeAtlas.x/(2*this.factorZoom)),y:Math.round(this.esquinaVistaDecimal.y+this.sizeAtlas.y/(2*this.factorZoom))}}}).then((function(){o.enviandoCoordsVistaUsuario=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoCoordsVistaUsuario=!1}))}),3e3),desplazarVista:function(o,e){this.$set(this.esquinaVistaDecimal,"x",this.esquinaVistaDecimal.x-o),this.$set(this.esquinaVistaDecimal,"y",this.esquinaVistaDecimal.y-e),this.uploadVistaActual()},panVista:function(o){this.panningVista&&(this.desplazarVista(o.movementX/this.factorZoom,o.movementY/this.factorZoom),o.preventDefault(),this.vistaPanned=!0)},clickFondoAtlas:function(){this.vistaPanned||(this.idNodoSeleccionado=null,this.idNodoPaVentanita=null),this.panningVista=!1,this.vistaPanned=!1,this.mostrandoMenuContextual=!1,this.idNodoMenuCx=null,this.cerrarBusqueda++,this.cerrarListas++},movimientoMobile:function(o){if(this.pinching){var e=this.$el,i=e.getBoundingClientRect(),n={x:(o.touches[0].pageX-i.left+(o.touches[1].pageX-i.left))/2,y:(o.touches[0].pageY-i.top+(o.touches[1].pageY-i.top))/2},a={x:Math.round(n.x/this.factorZoom+this.esquinaVistaDecimal.x),y:Math.round(n.y/this.factorZoom+this.esquinaVistaDecimal.y)},t=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY),s=t-this.lastPinchDistance;return s*=.3,this.zoomVista(s,a),void(this.lastPinchDistance=t)}var r=Math.round((o.changedTouches[0].clientX-this.ultimoTouchX)/this.factorZoom),c=Math.round((o.changedTouches[0].clientY-this.ultimoTouchY)/this.factorZoom);this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY,this.desplazarVista(r,c)},iniciaMovimientoTouch:function(o){if(2===o.touches.length){var e=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY);return this.lastPinchDistance=e,void(this.pinching=!0)}this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY},finTouch:function(){this.pinching=!1},zoomVista:function(o,e){var i=this.zoom,n=Math.round(this.zoom+o);n<this.minZoom?this.zoom=this.minZoom:n>this.maxZoom?this.zoom=this.maxZoom:this.zoom=n;var a={x:e.x-this.esquinaVistaDecimal.x,y:e.y-this.esquinaVistaDecimal.y},t=i/this.zoom;this.$set(this.esquinaVistaDecimal,"x",e.x-t*a.x),this.$set(this.esquinaVistaDecimal,"y",e.y-t*a.y)},zoomWheel:function(o){if(this.hovered&&o.ctrlKey){o.preventDefault();var e=document.getElementById("contenedorNodos"),i=e.getBoundingClientRect(),n={x:Math.round((o.clientX-i.left)/this.factorZoom),y:Math.round((o.clientY-i.top)/this.factorZoom)},a=.2;this.zoomVista(-Math.round(o.deltaY*a),n)}},eliminarNodoCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Fv}),n=JSON.parse(JSON.stringify(i)),a=n.todosNodosSolidaridad.findIndex((function(e){return e.id==o}));a>-1?(n.todosNodosSolidaridad.splice(a,1),e.writeQuery({query:Fv,data:n})):console.log("El nodo no estaba presente")},crearNodoEnMenuContextual:function(o){var e=document.getElementById("contenedorNodos").getBoundingClientRect(),i={x:parseInt((parseInt(this.posMenuContextual.x)-e.left)/this.factorZoom),y:parseInt((parseInt(this.posMenuContextual.y)-e.top)/this.factorZoom)};console.log("Creando nuevo nodo en ".concat(JSON.stringify(i))),this.nodoSeleccionado&&(this.nodoSeleccionado.responsables.includes(this.usuario.id)||this.usuarioSuperadministrador)?this.crearNodoConectado(i,o,this.idNodoSeleccionado):this.crearNodo(i,o)},crearNodo:function(o,e){var i=this;if(this.usuario&&this.usuario.id){console.log("enviando una mutación de crear nodo"),this.enviandoQueryNodos=!0;var n={coords:{x:o.x,y:o.y},tipo:e};console.log("en las coordenadas: ".concat(o.x,", ").concat(o.y)),this.$apollo.mutate({mutation:c()(Tv()),variables:{infoNodo:n}}).then((function(o){var e=o.data.crearNodoSolidaridad;console.log("Creado ".concat(e.id));var n=i.$apollo.provider.defaultClient,a=n.readQuery({query:Fv,variables:{centro:{x:i.centroDescarga.x,y:i.centroDescarga.y},radio:i.radioDescarga}}),t=JSON.parse(JSON.stringify(a)),s=t.todosNodosSolidaridad,r=s.findIndex((function(o){return o.id===e.id}));r>-1?console.log("El nodo ya estaba en caché"):(s.push(e),n.writeQuery({query:Fv,variables:{centro:{x:i.centroDescarga.x,y:i.centroDescarga.y},radio:i.radioDescarga},data:t})),i.idNodoPaVentanita=e.id,i.enviandoQueryNodos=!1,i.mostrandoMenuContextual=!1})).catch((function(o){i.enviandoQueryNodos=!1,console.log("Error. E: ".concat(o))}))}else console.log("Error usuario no logeado")},crearNodoConectado:function(o,e,i){var n=this;if(this.usuario&&this.usuario.id){console.log("enviando una mutación de crear nodo"),this.enviandoQueryNodos=!0;var a={coords:{x:o.x,y:o.y},tipo:e};console.log("en las coordenadas: ".concat(o.x,", ").concat(o.y)),this.$apollo.mutate({mutation:c()(Iv()),variables:{infoNodo:a,idNodoRequiriente:i}}).then((function(o){var e=o.data.crearNodoSolidaridadRequerido,i=e[0];console.log("Creado ".concat(i.id));var a=n.$apollo.provider.defaultClient,t=a.readQuery({query:Fv,variables:{centro:{x:n.centroDescarga.x,y:n.centroDescarga.y},radio:n.radioDescarga}}),s=JSON.parse(JSON.stringify(t)),r=s.todosNodosSolidaridad,c=r.findIndex((function(o){return o.id===i.id}));c>-1?console.log("El nodo ya estaba en caché"):(r.push(i),a.writeQuery({query:Fv,variables:{centro:{x:n.centroDescarga.x,y:n.centroDescarga.y},radio:n.radioDescarga},data:s})),n.idNodoPaVentanita=i.id,n.enviandoQueryNodos=!1,n.mostrandoMenuContextual=!1})).catch((function(o){n.enviandoQueryNodos=!1,console.log("Error. E: ".concat(o))}))}else console.log("Error usuario no logeado")},centrarEnNodo:function(o){var e=this.$el,i=e.getBoundingClientRect();this.$set(this.esquinaVistaDecimal,"x",o.coords.x-i.width/(2*this.factorZoom)),this.$set(this.esquinaVistaDecimal,"y",o.coords.y-i.height/(2*this.factorZoom)),this.idNodoSeleccionado=o.id},centrarEnNodoById:function(o){var e=this.$el,i=e.getBoundingClientRect(),n=this.todosNodos.find((function(e){return e.id===o}));this.$set(this.esquinaVistaDecimal,"x",n.coords.x-i.width/(2*this.factorZoom)),this.$set(this.esquinaVistaDecimal,"y",n.coords.y-i.height/(2*this.factorZoom)),this.idNodoSeleccionado=o},navegarPaginaNodo:function(o){console.log("Navegando a nodo con dirección ".concat(o)),this.idNodoPaVentanita=null,this.$router.push(o)},hideNombreNodoEmergente:ks()((function(){this.showingNombreNodoEmergente=!1}),4e3),hideZoomInfo:ks()((function(){this.showingZoomInfo=!1}),1e3)},computed:{refreshNodoVentanita:function(){return this.$store.state.refreshNodoVentanitaAtlasSolidaridad},offsetMenuContextual:function(){return{top:this.posMenuContextual.y+"px",left:this.posMenuContextual.x+"px"}},factorZoom:function(){return Number((this.zoom/100).toFixed(2))},esquinaVista:function(){return{x:Math.round(this.esquinaVistaDecimal.x),y:Math.round(this.esquinaVistaDecimal.y)}},centroVista:function(){return{x:this.esquinaVista.x+this.sizeAtlas.x/this.factorZoom/2,y:this.esquinaVista.y+this.sizeAtlas.y/this.factorZoom/2}},posContenedores:function(){return{left:-this.esquinaVista.x*this.factorZoom+"px",top:-this.esquinaVista.y*this.factorZoom+"px"}},posCuadroDescarga:function(){var o=this.centroDescarga.x-this.radioDescarga-this.esquinaVista.x,e=this.centroDescarga.y-this.radioDescarga-this.esquinaVista.y;return{left:o*this.factorZoom+"px",top:e*this.factorZoom+"px"}},objetivoSeleccionado:function(){var o=this;return this.idNodoSeleccionado?this.objetivos.find((function(e){return e.id==o.idNodoSeleccionado})):null},trabajoSeleccionado:function(){var o=this;return this.idNodoSeleccionado?this.trabajos.find((function(e){return e.id==o.idNodoSeleccionado})):null},objetivoEnVentanita:function(){var o=this;return this.idNodoPaVentanita?this.objetivos.find((function(e){return e.id==o.idNodoPaVentanita})):null},trabajoEnVentanita:function(){var o=this;return this.idNodoPaVentanita?this.trabajos.find((function(e){return e.id==o.idNodoPaVentanita})):null},nodoSeleccionado:function(){var o=this;return this.todosNodos.find((function(e){return e.id===o.idNodoSeleccionado}))},idNodoParentNodoSeleccionado:function(){var o=this;if(!this.nodoSeleccionado||!this.nodoSeleccionado.nodoParent)return null;var e=this.todosNodos.find((function(e){return e.id===o.nodoSeleccionado.nodoParent.idNodo}));return e?e.id:null},usuarioAdministradorNodoSeleccionado:function(){return!(!this.usuario||!this.usuario.id)&&(!!this.nodoSeleccionado&&this.nodoSeleccionado.administradores.includes(this.usuario.id))},usuarioResponsableNodoSeleccionado:function(){return!(!this.usuario||!this.usuario.id)&&(!!this.nodoSeleccionado&&this.nodoSeleccionado.responsables.includes(this.usuario.id))},nodosRequierenSeleccionado:function(){var o=this;return this.idNodoSeleccionado?this.todosNodos.filter((function(e){return e.vinculos.filter((function(o){return"requiere"==o.tipo})).map((function(o){return o.idRef})).includes(o.idNodoSeleccionado)})):[]},nodosRequeridosSeleccionado:function(){if(!this.idNodoSeleccionado||!this.nodoSeleccionado)return[];var o=this.nodoSeleccionado.vinculos.filter((function(o){return"requiere"==o.tipo})).map((function(o){return o.idRef}));return this.todosNodos.filter((function(e){return o.includes(e.id)}))},nodosChildrenSeleccionado:function(){var o=this;return this.nodoSeleccionado?this.todosNodos.filter((function(e){return e.nodoParent&&e.nodoParent.idNodo===o.idNodoSeleccionado})).map((function(o){return o.id})):[]},idsNodosRequierenSeleccionado:function(){return this.nodosRequierenSeleccionado.map((function(o){return o.id}))},idsNodosRequeridosSeleccionado:function(){return this.nodosRequeridosSeleccionado.map((function(o){return o.id}))},idsNodosPlegados:function(){return this.yo?this.yo.atlasSolidaridad.idsNodosPlegados:[]},idsNodosSubplegados:function(){var o=[],e=this.idsNodosPlegados;while(e.length>0)e=this.todosNodos.filter((function(o){return o.nodoParent&&e.includes(o.nodoParent.idNodo)})).map((function(o){return o.id})),o=o.concat(e);return o},idsNodosVisibles:function(){var o=this;return this.todosNodos.filter((function(e){return!("Trabajo"===e.__typename&&!o.mostrandoTrabajos)&&(!("Objetivo"===e.__typename&&!o.mostrandoObjetivos)&&(!e.nodoParent||!o.idsNodosPlegados.includes(e.nodoParent.idNodo)&&!o.idsNodosSubplegados.includes(e.nodoParent.idNodo)))})).map((function(o){return o.id}))},trabajos:function(){return this.todosNodos.filter((function(o){return"Trabajo"===o.__typename}))},objetivos:function(){return this.todosNodos.filter((function(o){return"Objetivo"===o.__typename}))},nodosConRequerimentos:function(){return this.todosNodos.filter((function(o){return o.vinculos.filter((function(o){return"requiere"===o.tipo})).length>0}))}},watch:{callingPosiciones:function(o){o?this.$apollo.queries.todosNodos.startPolling(5e3):this.$apollo.queries.todosNodos.stopPolling()},centroVista:function(o){var e=Math.hypot(this.centroDescarga.x-o.x,this.centroDescarga.y-o.y);this.radioDescarga-e<this.sizeAtlas.diagonal/this.factorZoom/2&&(this.radioDescarga=Math.ceil(2*Math.max(this.sizeAtlas.x,this.sizeAtlas.y)/this.factorZoom),this.$set(this.centroDescarga,"x",Math.round(this.centroVista.x)),this.$set(this.centroDescarga,"y",Math.round(this.centroVista.y)))},idNodoSeleccionado:function(o){o?this.zoom<65&&(this.showingNombreNodoEmergente=!0,this.hideNombreNodoEmergente()):(this.idNodoPaVentanita=null,this.showingNombreNodoEmergente=!1)},zoom:function(){this.showingZoomInfo=!0,this.hideZoomInfo()},descargasTodosNodos:function(o){var e=this.$route.params.nv;1===o&&e&&(console.log("Centrando en nodo "+e),this.centrarEnNodoById(e),this.idNodoPaVentanita=e)},refreshNodoVentanita:function(){var o=this.$route.params.nv;o&&(console.log("Centrando en nodo "+o),this.centrarEnNodoById(o),this.idNodoPaVentanita=o)}},mounted:function(){var o=this.$el.getBoundingClientRect();this.$set(this.sizeAtlas,"x",o.width),this.$set(this.sizeAtlas,"y",o.height),this.$set(this.sizeAtlas,"diagonal",Math.hypot(this.sizeAtlas.x,this.sizeAtlas.y)),this.radioDescarga=Math.ceil(2*Math.max(this.sizeAtlas.x,this.sizeAtlas.y)/this.factorZoom),this.montado=!0},created:function(){window.addEventListener("wheel",this.zoomWheel,{passive:!1})},removed:function(){window.removeEventListener("wheel",this.zoomWheel)},beforeRouteLeave:function(o,e,i){return console.log("Hacia: ".concat(o)),this.$refs.listas.abierta?(this.$refs.listas.abierta=!1,i(!1)):this.idNodoPaVentanita?(this.idNodoPaVentanita=null,i(!1)):void i()}},qv=Qv,Uv=(i("4db2"),Object(m["a"])(qv,Lu,Gu,!1,null,"127ac88c",null)),Vv=Uv.exports,Lv=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"calendarioPersonal"},[i("br"),i("div",{attrs:{id:"titulo"}},[o._v("Mi Calendario")]),i("calendario",{attrs:{configCalendario:{tipo:"personal"}}})],1)},Gv=[],Kv={components:{Calendario:Ma},name:"CalendarioPersonal"},Zv=Kv,zv=(i("f793"),Object(m["a"])(Zv,Lv,Gv,!1,null,"d4d20f26",null)),Jv=zv.exports;n["a"].use(ro["a"]);var _v=[{path:"/home",name:"home",component:Yc},{path:"/atlas",name:"atlas",component:xe},{path:"/login",name:"loginArea",component:Qe,beforeEnter:function(o,e,i){null!=so.state.usuario.id?i("/miperfil"):i()}},{path:"/miperfil",name:"perfilPersonal",component:ti,beforeEnter:function(o,e,i){null!=so.state.usuario.id?i():i("/login")}},{path:"/calendarioPersonal",component:Jv},{path:"/atlasSolidaridad/:nv",component:Vv},{path:"/atlasSolidaridad",component:Vv},{path:"/trabajos",component:Pu},{path:"/foros",component:Vu},{path:"/materiales",component:Bu},{path:"/nodoConocimiento/:idNodo",component:lt},{path:"/proyectos",name:"proyectos",component:xt},{path:"/proyecto/:idProyecto",name:"verProyecto",component:Xs},{path:"/trabajo/:idTrabajo",name:"verTrabajo",component:Fd},{path:"/objetivo/:idObjetivo",name:"verObjetivo",component:Xd},{path:"/registro",name:"registro",component:ar},{path:"/actividadesVirtuales2021",component:vr,children:[{path:"grupoEstudiantil/:idGrupo",component:Cc,name:"ActividadesDeGrupo"},{path:"actividadesProfes/:idProfe",component:Ic,name:"ActividadesDeProfe"},{path:"",component:Fc}]},{path:"/actividad/:idActividad",name:"actividadEspecifica",component:Kc},{path:"/personas",name:"personas",component:Ir},{path:"/",redirect:"/home"}],Hv=new ro["a"]({routes:_v}),Yv=i("522d"),Xv=_+"/pepepe";n["a"].mixin({data:function(){return{serverUrl:_,clienteUrl:Xv}},computed:{authHeader:function(){var o=localStorage.getItem("sesionUsuario");return o?(o=JSON.parse(o),o.token?(console.log("introduciendo header: ".concat(o.token)),{Authorization:"Bearer "+o.token}):null):null},usuario:function(){return this.$store.state.usuario},usuarioLogeado:function(){return!!this.$store.state.token},usuarioAdministrador:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("administrador")},usuarioSuperadministrador:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("superadministrador")},usuarioAdministradorActividadesEstudiantiles:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-administrador")},usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")}}}),n["a"].config.productionTip=!1,n["a"].use(Yv["a"]),new n["a"]({render:function(o){return o(I)},store:so,apolloProvider:ao,router:Hv}).$mount("#app")},"58b2":function(o,e,i){},"59a1":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAB+FBMVEUAAAAAAAAAAAAGBgYAAAAEBAQAAAAnJycHBwcpKSkAAAAxMTEODg4BAQFDQ0MAAAABAQEAAAACAgI6OjoAAAABAQEFBQUAAAAWFhYSEhIJCQkBAQEODg4QEBAMDAwLCwsTExMDAwMWFhYfHx8DAwMICAgXFxcUFBQ9PT0BAQEWFhYwMDATExMCAgIBAQELCwsQEBAAAAAJCQkTExMWFhYbGxsKCgoODg4UFBQCAgIKCgogICAcHBwXFxccHBweHh4AAAAREREVFRUeHh4+Pj4nJycyMjIXFxcFBQUAAAAEBAQPDw8WFhYLCwsXFxcDAwMFBQUWFhYGBgYMDAwTExMTExMSEhIVFRUWFhYAAAAGBgYPDw8PDw8GBgYJCQkTExMaGhoJCQkTExMeHh4FBQUhISEnJycBAQEfHx8cHBwNDQ0vLy8iIiJCQkIaGhoKCgoGBgYBAQELCwsQEBAJCQkSEhIICAgMDAwAAAABAQELCwsMDAwSEhIaGhoaGhoJCQkKCgoUFBQCAgIXFxcbGxsWFhYSEhIBAQEtLS0SEhIsLCwQEBA6OjonJycrKysTExMEBAQMDAwAAAAfHx8VFRUKCgoGBgYKCgodHR0VFRUAAAAGBgYQEBAwMDAXFxcMDAwmJiYAAAAeHh4AAAAAAAAPDw8BAQENDQ0WVsKiAAAApHRSTlMAFjb5Vv5eK/44gAQFugOxoW7SAvz65KpfV/7+0ceHgnNnY2JOODMlEQ4LCvPw6uXZwLm0jIh+enl2dXNtT0hFQD82LCQcGRj78ebg2dfOy8XCtLGwrKilnZqZlZGRjoB8b21pYV1aU09MSDQzLRX59/X08+7t4d7Z1cu9ua6jn56alZSTjYyISTw3LigoIPns3NjV0MS7t4+MfnpcVVFPPzQhHCP11CUAAAS4SURBVGje7dfnV9NQGMfxRymOtlShtFJlCTJkCCoiAqIgG5E9BAREFETEvffee+/1s/6bNrltc5uk4aanfdfPq3toz/mektybJxQXFxcXZ5at9l7PpxobxVLVJkg2VVPsfEHADooVDxQWig3baSheGl+XnLM5FJH6dVCsyyMDzQkAReQweLNk4FhipJFt4E3GJjIH3u7YRBr4a+LaQ352y90zCWoANH8rubtTYBe/hWJvsLEGwlK3Omkx36GYCd6sSJ1eKqYmAbm0GEcSArY4yK8TO0lULQZoUcVdYLrtFIDEPSRqCdaSgF5IVpECK5abiEDsFrNarfkUy4j9qdW6m3ZbrY322ETyk/suewG4F9wAEt/1Jz9ZNJJ3x0xkZUUK/MoKXwWWKRWzRpEjvelTJiK3oegi1mPOZGKtbsQ2/XpNnZl/Vx443dSFEN7b83ZSKcy90PfL3DWZACeTMqF2fvgnfyoV3XR/fGb2wieB85ms0NE5uouYxv2lyX9M3122TfIGHIPsSODhNb79sur3VDuI8vrLpwojuIWbITm6DDIb2YOjxPLJDPDS8jZfskS2TyrlU7rBHyGye7l55Tk4rp4NToosMgSfNmKRc0TOdC5CWLEru6MVsn3OSHc82xcD/siq4I1g4Y6VZ7Vl8KmjSCMtJ+FTxUW2qCOS/NyqeYo4Ug9JgT9yPzi2WKJ4QLJtUdrij6wnouToR/bB5yL5I2lEtD76EXkrHghEHkrHa9Qj+fK0lRuIpBA50qMeSYNkYyACD3kQ7Qg7c8ttwUh7izv6kQT4vKdgBCWIeqQQkkouguhHNrARPraRSkgotpFB+GzVjURvTP0Ln1sGkTIcJVGHcI303ICPxSCSg1LPEjE1LqSRnuV7pZPXIFKUBHHXSJ9jroCMIlRcPfjiL7MWgLz4B+CfsmBKhtJEX35vrRpli1rdp0KGvHgcfDHtADwkjr0bJhLZT0CymjQuAONsdg5GRoARkxH2QpoRJrJQCsyqIjOAy2E2wgYJ/Ug+4CVVpBlYV0/CrqoiW0ktC+hTRygd2E7CSlTTinbzlgPZmkglMEDCIBv0ra6zJakUpAKPNJGlAMxF2LSSrR/5ASSQJtJ0CrBEEElmS/VNcwAY10aoBxgjQcc1kW8Uqh34qhOZYDtUSDZkh33Lg2x5kELMA64CnchvExdlB2SFvmUjWyaTgqXdpBMpagcOmYvIa93IGiBTG2F3/A0SM6GJTFKIs0CdbmQH0GkjIVcgWcFF+on3CGht0o0Us+FQxGZI3igzOJKINwakkE6EvZllm4nclNerWUT9eZY2Evh6LwnphmR/uEjRCeBxmEgO4C4mAUWnNZFz/NXcBZy0h4nYvMATErARshH+SWwnxb2QX/a0lY/QB2C7iUgue53QRi4CVSH34oPQB02GicgGklg0kYJEQHeSDHz/1ILQ+aiNPKSgnUCZ8QleJxCp4SMeyKwhx/xqCm8YeCAQsULWyH6WOuJsA6YNh2B0iEeIUUcaUoEmCq/ea/Q5vw+gHByX4MON81NAORlpE3oGO64CcM0FrnNq6ExUvdhGuC4UIYelIquZAlqyKma4DV98Z/i58evP0KiT4uLi4uKE/AdMLPX1QgykkAAAAABJRU5ErkJggg=="},"5bd3":function(o,e,i){},"5ce8":function(o,e,i){"use strict";i("ebed")},"5dfb":function(o,e,i){},"5e1a":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAq1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0NbREAAAAOHRSTlMA++QG+QNcch5C8grtzxtp3432U9mTVzusKMWDryAXwbrRop0018uXLg2zekkRiW1kKqd+RGDo04MP5iwAAAT0SURBVFjD7VjbtqIwDJUCFVAuooAC4g3vHo93+/9fNgFHgZOCnJlZa+Zh8kbblSZ7p0lI47/wRFxHhqIY0Vr8A7oU1ez0R3oPRB/1O6aq/IbWVtzszzWB5UTQev1m3PoldcqhT4SfaiRb02zp+XULD8q31Q22C4mBSMSfBmZ3p6q7rhlMffJYXWwH31JnNPXEHFt36OpDztbljxV1dDsxU28atdXJ3XGijkxdQ+bsGu6MJCrHrlwTvH0bzlsdTyzl3utYcKS9H9bRp4ZwVlt6cqUT3lKDY6H6Xh/V4eCIvo0MkY7goE7fnTMJcOgc67hydIBxYlYf+gT4SLNVM/CbBID8rLQP9M1po7bQOWg0K/bhxkm38Q3pTsAjWsqvDvaV6JPlEo1go17CtRKW3LZe0bPjnGm8LvEqVLg27IHfJl7/uIY/HzAkhQ+834TNPc9+FwhxML+7UGIvkcId5toBYjhAGWOI5yPmvZckiUk4m4UTO3mRmNMjRPjYwJYLTKPcuLRPriHKsmi4J5sbd1RjAsJqAAwvRcQhAd7N1ss7EzglyD1xCUx/zY9bgVke4h1guHcLN9zBPcSpR5iwLS4NF4x1ZB4M1+LSleee3GFsUbzmIDGCDIz8BAbsnh9xTJQOBer7jE0RgjuNtVX0nNpM2yEUp4z18yEXE2a7iL0z4LVGzwZwPeMgthmJi2DpBrr2BLg2kABeJ+SMoRegFcFjB1HSGj8OYabGLUSLAz5n1yhzJtEGT+EnJwdjhSBUYnMlA1pjZIWrRvhACyMb4nq4IkzLCDQF5uM8IiO0KpD98Jlg5nGechLQVWDzAXqjPSZcOclvCvfkOQl4Zc0CVjicWLyiGORYWY8yc9Gjj4trcZJEsDcpbKNn0EY6k7ilRLUAxWHhzQOClsotLhLTo2dU9pi9a/DkLAC6qxyXgJRw5h7d2axnPMOw96QccTdjjPmH6KcnBx8+ZygenqHXU5BCJMNEo+Tv6eVC976U6MsgwAqRy1iiqZBWJ01La5UwBWvLXUakIJ7Vzp0V5N5RxUYlKVnYYLnMbo/q2SaWRdqPenqbqY2ysKkObCVIO1+yCVxvMBwOPDfYkLRXDpTqwOY/vcsmUedv41b+z2XrC7C6uXCfXmVyoBPQt8CtvtFcwMaE8pJDVfo6WADdEhaxrBybMetQlb6GKMFSq9jJ4s7VojjBlpeAC/hrXRulcu1lXSEuAbhIKcAHAX0VGrOuEBcpkPhWKKMB6hR5XaEQFMroLc6jEsIjFV8OE9QpYhyX4IT6wmwGBre+xDnxcrsLxC/iepHakHVLZmmzpN44mZ9bn29qrlkaouJoea9d33iv0PBfvbVn4YJ7nDw7LWWCmj2+bJPQeNaeyRFtP1vibr7vwVLssLrPlhiboCRN++ARM5taP3vrzSNJDUa5rhb/VrTSY7UkSGMl/a1w8S6QkYZzdGeSW0+hK7FJBCH+CBAsw+TB0QFhba+eQq/NyIASgAgVriwl3PfJqXoKk7v3c2D4UvV7C0ha/AuxS1Z6nNDqH3pQqNQcn4DCd7/0zXTCUtfldNbSfD/EEJxjLX2OAP5i+3jFaUTFGmMWVKz4om7qD4I2l1rk/e6oCl/vPoZpM/4wLeqiYVrtcd/CocfiuO/oOgs07vsLA8nqkSnpH5RfHOp+nu5fh7rz02fc+lfGzpzB+H/hyA+HFMaZVdLdTQAAAABJRU5ErkJggg=="},"5e1f":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAflBMVEUAAAArPU4oNUkrPU4nOksrPU4hM0IrPU8pO04oOksrPU4rPE8qOU0jNEcrPU0oO0wmNUcfNEIqPU4rPU4qPU4rPU4qPU8pPE0oOEorPU4pPE4rPU8qPE4qPU4pO0woOUsrPU8qPE4pPE0pO00qPE4qPE4pO0wqPE4oO0wsPk/+wVmWAAAAKXRSTlMA1w/UJukK2zof8LgWBr4kDQjN9NHEpz8SyR35fq5cLuGhbjWWjEizUqMwYUQAAAIESURBVFjD7ZbrkqIwEIURESESucQIGO6oO/3+L7idDJY4Q++ysn+mii9d6YSiDkXnEGKtrKys/EQyO7INmAyjeaS7IRlomeNmPvs2o2R28C8UnJRhm+1MGOwqUkb2/gWbDpNMG8ZmjpjLYaFg01Myh2z2crQKpE/JBNZc6hzU1V4og9wZsI7/QYbbkYv+cDGMUTC5Oul5/Ly9A2hSWiYqklwmMkekbnKUktHy8CuADEmZrASawnriHwCuGSVjX5s9SWeN8DYgOrI2gUPz+vAKHftBycwnugnY94tlTHnKy9syWZ3W5v36BlQRvynTl41oyloPP7A81bT93Dh2Yxf7eBhhGubGtuEJNLmvby4UbL1J+8kjiXlwAQZlTGS3AL8uE/Y7/81+x2FSclNmiS6ckGkVE4IJhmEaxmOuupkySJh6XortkcZj/9tLZfqlgndWaihxEg4lPnkLFvxcD9/DrnrXfsHDft4C+z0JsdrngNj9vkF+EzcBp5rY/bry/EJbEyq8YsDus3e/OyGT7ultC40g2As7QsaRoG4RJcMd7wv29J7VAhz8pf8p9LL+/y6VqZT23VIZb4uFcZceBS6l+SCnZY69H07jOBhP6puCxLEIGTHjtPaJgOb+Pw5touPkEXKLnDTYa5LP/oXcRIK+I7Ajg6vD/UqsGyaEY4utlZWVn8JvDptdIfumvuQAAAAASUVORK5CYII="},6084:function(o,e,i){},"608c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAA21BMVEUAAADe1cXe2sj+qKbf38/UxrHf3s/gyKv/1Krm1cXg2sm+taS7tab149PsyKj47OHsyKrcwKHf3c3e28rZw6be1sPh077bz7jbzbja1cLd1L/b1MLi0rrZ0Lzd1sTOqo/t6N3f18PRzLvEvKy+uarg0rvQuaLMzLLg4NG6ua3e3s/////c3M29vLDZ2cq/vrLMzL7S0cPFxLfX1snJyLvPz8HPzsHFxLjw7+jFxLrz8/D89vLHx7n79O7T08T9/fvCwbS4t6vv7OTk49eysaX5+Pbq6ODy8vD68+36XNSUAAAAKHRSTlMAH98C+Gz7lQYf3x/fphyUKhX0/TPfp3lQ6a2VYlg5HPbp39/fhQsKsqhnhgAAAgRJREFUaN7t2VlT4lAQhuEDOPs4MwkIuM+MG2lONkIMaowgbv//F+lFyi5jFTmQprWwn9tcvMUHOUkVSgghhBBCfGyNr7M11FK0up0vs+1Yil7r6J+99nm2v+t/FDWr3eyVGj2s/1LEdrA7I9y/+E1ctrZ6RuH+BfHatQ3DcP+Sdu1a3TSMazOHcW3mMK7NHMa1mcO4NnMY12YO49rcYVybO4xrc4dxbbbwFWZxbYbwNYZxbbow6CLIr9xhGNcmC0OQFKRRXp7eYhPXpgrrxClwQ3i9Na7NEZ6O8DPj2lThoV8wzuD56vRudP7C/XXbogmD94rGizo+Kzr4QRAupwPXeeknTxh07HOGEUA4Xk4YSmVjZ0Ifhiwuc5pObibkYZ065W6WEU4cA37K+olR4gUu+Xd8aiADHbiMv2r0NE3sk4bnuqFZwwiyAWsYQZTQhUF7BjTkj7KULKyHvoGh7uXl4JD1ABno54H+c4dzUK9RvWUODAT4NvT9G9l7tQHs0oTNSZjtIUEfhnhoIIZCmO8+XqFw6hpI6cPgRQY8WJ1ftRwgfAdIFBqIYHVup3d+ciX0YQgDA6EcIBKW8CqF628WrpH+cW1uo0rYasOiXdiyVAW7zUW7zV1Vxcm2DQt17e1jVcl+Z9Nem5u92dlXVbX2up/m1N1rKQqNuSkhhBBCCPGhPQIr3ZzxPqpFsgAAAABJRU5ErkJggg=="},"60ac":function(o,e,i){},"60ee":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAMAAAAPdrEwAAAA3lBMVEUAAAD/9fT/6uX/4eH/7evV1Nv+7uz/7OnS1d3/9/X/6eb/6OXU2ODaztL/3t7W0Nb27u7S1d3Y2+L14+Lg1tvQ0trR1t/uu7u/n5///////v7T1d3s7PA10Zb8/v0x0JPu+vXw+/dz3rM50Zc00JWt69Ns27D2/Prz9Pb5+vrY2uHo+fLu7/K57dhX16X6/fzv7/Li+O9C05vV19/k+PDf9u3F8N+y69Sd5smI4r6E4bx437ZR1qNO1aHz+/f09PbV8+fd3+Wp6c+W5cVw3bJn261e2ald2Kla2Kfw8fNijA/eAAAAGXRSTlMA+1ka2c5B2dbCtllQTC9X59jWuWxiWQ8IBi+1PwAAAb5JREFUWMPt2GlPgzAYwHE3ZffhrStbwa2KkzHcfcGcu/3+X8hnWTaMBkalTSDpP+EFb34h5WnS9EwkEomi1Lmv/iMnMsmL093k6eVCGvmpLNHb2VjJTw1ZKtLScX/0uyxLeW60nCpyoiEpx4mGrnKcaEi6p6VRvVF26wMfaSiVo6XLsmuf9f3wHey7R0q6c4L+ejt0ffvAbEHQjq6/HrtM0NCAu1f6VSzObEKC0shXDk2/1t416oiehgnxUaccLtr3goTpN3oW4rn+E4L40EhvtXTEhVZHljVS+dBVRakKWtCC9kOjnzRiSWtd06HNrsaO1uaTvnmgzf5krrGiTcNWNoa2pzVjo9iGyYhWR4SQ5kDf0fqgCS8jlRGNZ5MaIdZwpSiroUVIbTLDbGiwe2Ow2+39Uxv3MLsJQfoCzAoE+kJne5xUh7ayoxV7qLLejdNBEz4b/uaU+UZHmrEmZG1oiDUN4f5y2cd8ziG418PROz0xprFHgWgYi2fXYFiC0N1tpeZSZdsKRsM+cYk0g9EtfrQ+fnFtrAegwX7yCIV2rqNDZ+npLMXFJ13pAtPrWqdkJsH6ktnpTCQSiSLUN5DlNzinQAMLAAAAAElFTkSuQmCC"},6143:function(o,e,i){},"615f":function(o,e,i){},6171:function(o,e,i){},"62a4":function(o,e,i){},6332:function(o,e,i){"use strict";i("7f89")},"666f":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADKZyMtAAAAN3RSTlMA+xG8A8XcHzEG5EMZ0KULSvclFNM7K9fBqhcPymfntXBa6riwgn96bD6bHeFRYDgv8Ozek4tTcmkBqwAAAspJREFUWMPtlttyqjAUhlcgHqJCBEQoaFXAE9ZTq837v9kmUB1SrJChF3s6fBfqzI/f/EsHVqChoaHhj0AGnRwDAiJ0l48tXO6bhq0c4ZQKcefq5mO9XyrsaojlQJNTPsWHdybEulIm7PeYgPZUyNRBRWGgZagbcWTzMsmCDyQlRJOFmdIhIKKYKbZuyDU0oiM8wZ/3ZEY+n5OOMxt+xJq/MWY456pCNX5upNyHwo1TVaiby9cnRmXDfe7wNKosVLxVwDvYD33zzEfGEkKwlsEPHen0I/VhkBKCt3p92NHftLN+ICkEb/nOjVsxxtP2Vz9pIVhpR1UwkgX3tRJfZaHdZujiAyedmuWN5OBw354Ax2wxFlllQuvanuzTAsWOeJH42D0ma2c0xVCGZ5/I3b7u5Yw07act6C1W7CMFObx1cJ8aH0bJZ21BoAa3jnbi+0x8SN5X7Mh/xwuF3QwxNErmrUv6z8QKdFQ+L4b6WHN3NsRADmqY9qsP7ex4McLf/lN8hb9i3/8lXz+O+4lvGMfb39CRoWugyINBZCC3j+sLhy5iTN1Bx2WMucO6RtznvrcpAbL5yJ5c9Xzb0GDsde6nuyQxMnkj2eXOaNsZ7zcnAI+MZOCV2+km1I+3fvaM91sr9/3ZzhvJYhaV9+1qDF0ppNi8X5D4hA16M6Z3t25V3ynYjni/lSWcabKdQm47JfQqC/GR+4KV+I1s6smeyG+9Y4SSfsvvI/mZ8ZNICnH3hfdbFq/3p07WUU540lMfn7do/OooI8z5ilDeEU323epCm/verzshEaZGSceVU1U4iVDiuwi+YkfWM6oKjeTK88UEKDFKHdr1rsKhRZfC6ax7ksLWS0q8J0KMh3EWzAI5IUNfuGMhNtVbUHXko8MEnK4QjzUxfrHKhMpSa+fQvt17dC3ErQpHHWXczTH2QYQKsUmgoaGhoeEx/wBPl4jWb0NnEwAAAABJRU5ErkJggg=="},6807:function(o,e,i){},"685b":function(o,e,i){},"6a63":function(o,e,i){"use strict";i("743d")},"6ddb":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAABvFBMVEUAAABeJYxUIXxsLZ6KQsNkJ5SAM75kJ5RmJ5dmKJhkJ5SIOsVkJ5RqKZ1wLKdmJ5dmKJdpKZxmJ5dqKZ5kJ5RzLappKZ1rKp9mJ5eKOslmJ5dkJ5NvK6VzLatmJ5dvK6Z1Lq5qKZ5oKJpyLKlnKJlyLKhlJ5ZlJ5ZqKZ1kJ5RtKqJ1La5sKqB0Lax4L7JeJY2AMr97MLZ/MrxkJ5RsKqFwLKdtK6JoKJtnKJltKqJtKqNhJpBzLappKZ1lJ5ZiJpFxLKhrKp9eJYxmKJdeJYxiJpFoKJtpKZxwK6ZxLKdbI4eXT9BiJpFVIX5/Mb2LO8tjJ5JnKJlmKJdfJY5mKJhfJY5kJ5VrKqBrKqBsKqCfXNSveNuLPsllJ5dsKqFrKp91Lq54L7J/Mrx3L7F1Lq5pKZxjJpJlJ5doKJtpKZtiJpJqKZ5sKqFqKZ1uK6R1La1vK6VoKJp0LaxwLKZ1La1mKJdoKZtnKJlsKqJjJ5NpKZxnKJloKJtiJpFkJ5RmJ5d5L7R0LaxZIoRoKJqENMOCM8BnKJmCM8FpKZxmKJd1Lq1eJYx0La10La1mKJdeJYxvLKWKOcplJ5dkJ5RBXGG2AAAAknRSTlMAzyYCBPYL+vQH+AnxhBrv0tGkFekqvImDDvbzIRG7RjgdvKmecOnlzsGHeE5DPi8sIxe4fHdsYE4+PCAP+/rz6OjW1cS9sJKFaVhDPjs0E/zs5eHf09GAckMMCAf3zsutVDw8NtnT0MWmpaGfmJCBgXNaV1VK29rSzcnAtKqfj09KM/JDQzgw9eevfGxdL+CtQwpd6DoAAAY6SURBVFjD7VlnW9NQFK4mNOlIN23pooNCacsoMgsie0/ZMmSpIEOGigoO3Hvc/GFPklvoSNoU/aCPng99mvTc995z7tlVyCJVg9XfoFL8PmruZtnu5t8IePkSQpcu/wf8YwBJ1ah5mAMcNo+qyF9FU8Uq+u0Bf9c1hK51+QP2/orYxTEJpSvKWCfpMZZFPLHsGD1ptT9wXczElZV7/usFKIMKyjy1a8q84YrWwkYHKyDQpRMUQtREKS3gs05j2JsfJOGrDfGLWdrQYwuuDHQg1DGwErT1GGiW36R830fIx9MUm5z8stumem/N/LnZzNd46023+a2cpmKNXDxdxKCGJYuhvriZTLdD0hxnQovwc6sxopOHF7OXAb/6TnhVI27YmjXbHW7H659cctQ3svwKdKcvmWshpDyFaJkr0YMuSwMjuRU5ErgKmz+u82V3Pdc9A7BdXR7JhVf4EfBabzYu5PLlG403OcRADql19vcIaZ8Wk8nOrHEPTSE0NeTWpLx+0aMFqT/pstpLHdwH9fQlkeQw1QfMZnkBZ3qbzEG1MknbL3vgjGX1C1kupJhTzM3iMzzC3cRsjFOIM2b4oMY3mCb3+a8vluDtY2CXIp9JDQyN5NmBm3Y6nSiFnNPP4/NnUjd2sqh10yfpv3uwWl+nSRxAF3mkRkAUbWlva2u30BQCUj+K6IjEzdzTg8r3pfy60gjsJb4EXmGvhRNUa9wORl8PDr6OBreNWk54S291AtFVAluWeyXiVRhUf2cugVf1DB6R3jO7XkTgV0Xrsx495+MlXxOIp6B1R5/oEQnugI5wS+J8z7RwvFu1hSoiiUdVOPOQBSlLEmd022Bb46roAfvA5ZdWMaOvFxipK/eVGYq+f4WCjXt1eIu1ENxUrUrMR45ZVNCnwfcbsQDe3SpSJGlV3QVES3ABn4MpQKxfzF8OPyA0Hcf7Nj0Cea9UiSu76gpI/eQtlqXiCOLOAxEn2QUb3DILDzU7cHm37pMCesYZDx+COTzH2jbfBcnsmaLE/CyiP+P3p7BCX6sUxwM9zuhBmiYMX08j9iTTo+cmETJ4sV5sDtBLoRQe6NvDIiejweYLu3e+zRCjn0aop0Z4ePcELGNWxb8Xz//7YFPHhThCgUr1DWQ6i23sTBPkl3GEQuvSeArCa4CbiBKC/+22IopJN5ya75wKE5ZAIfWOUhIQaHQLWGawzLOgxMBoGocZtFJ2iq3fBBLXE5J4QEQdaGjLLTwclCLWaj6TtfkyR8NdCH0buMzTUDmLLLxlSRcxUQtiy4cE/oEJhLqG+a/NKkVD9yWeoL6iOoSvXCZv/8Etkw7GFe0QI6YE/g4KajPha3eDwsoiMWobxCqUoME20WWsNTugIn9AMZGnOJHfYKuWoDdSIidfykTypUQxYL6Xkmw2pSvYbDYhxAVzm80mNpsVMBuPOd1SA2DYQRx4whSitouy1qOcYTM4+gbFDFvFgOvZhARJHoDrGdeJLAl83QhFw6EgwDy43hijkhkcFNLBYaMaey0UEHQ/mWGpkxCEksOXBwcT6fCFJfZ2IjRZkRlgrbBPPYnRb+EAiylXgEXWWKYUdkg2pvQUIErk4RGXAtzYPkyQAhgRJ20syytJLcXxpcVvQwn2QITN5U9Ko/M502gEn0nDp9Fm0UTvSEr0OqlE33KYmuhXQ/C0p8xdilRLlSJHKaVIi20RbLaSkF8s+ZOLJe9+erE0Z4DHsPIi5dybaN22gS/nrqeVc6FK2QXnkljBedyfWnA6a4vklsQL8Z0jB0ohevr5WzKlJFabfHkU7TUVtifjaly0s2quaD9vsEiuaEcGYM+rrXj3ZcYktBWmmZS2gnx5wik0osne+LzKbHyUEo3PCadyuy5Ha7bMt2bRGzJbs+WYvObRcM+Vq3nslNc8Qnv7Edo9djxre+s+3eLa21fL0N7mpmrbB74Bt2VpwA18A26PyRwR1GUdETQx/IBDbYjo8hhiaPkhxnTaEOOG7myIoYUhxgXHLLvnY5bdk05hzOLYmPUReQ6CbMZFoexpPR8EtQoFjAMPgvIdVfUdl4mOqvx7lcoLDtMa7aLDNCXxS+M+JuARxn0eYdz3Zw0k/4oZ7D8K+Nv/XIC/P6wy//74CRM6iF15FgnzAAAAAElFTkSuQmCC"},"6e2c":function(o,e,i){"use strict";i("ee6e")},"6f65":function(o,e,i){"use strict";i("cbf3")},"713c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAtFBMVEUAAAAAAAAEBAQODg4EBAQAAAAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAADAwMAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAABAQEAAAABAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAACAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAABAQECAgIAAAAAAACAxK8TAAAAPHRSTlMA+5QMvAQi9/kIEe3zyybq4xUO1TUr8NtdOxrn0L9YMP1Ap6KdmIKMYh7fwnVMxrasbVBHsI+He1NwaWbdwfsCAAADOElEQVRYw+1W2ZaiMBA1CCQQdmSRRQERcd/3//+vSduONooaZZ7m9H3hADk3dasqN1X7RRVw3L9g6bvzZnUicaNK03ZlmrYcRXgvVE1MrkIVJV5VTSmUZ9BsVqRpBJBxB/a8YpJz1W8pU9DRq2nqoqElZDBoVKKxJnBt1BYaPghV6uT6aqtWU0JYSZXIQJm0ntGDZhVVlgy7Iglqp+G8Ak1LVV2u9qUKEbpPUe/BiVUjMNZIbn+uKUSp+B2Wj3Pu0zq1LimxJp+rMnqXtjMY+LEq0i6pfm0gl0pB/RYGKfORu7Yz490tEe523q+ZW4RE04/D5aR3K7JlkUhc2+AOEem9a7qdCNwBDotGxA8jMAjZIqbrHyfAm8/YGwRSpLYKNHoKgbxv80UUSix4xZ/KOLGBHN+4XIphsH/DcoXxzEZD17j5zG9N5HcbtK3anwdITWLhvtkWU0liWyKdRTMaMLd8aeeQf8jMFAob2rFkx92jHfWDjOwkrr9gIfqBxjzxMWOZSHBy1J/mNu74SJ73n5+jjQO0XvtxpvV8iOzZ+JXD624I7dXi0TJr46DBxnpdUKFJgg7KgxaWMxsOc7pbgh+ZwO+Vrd3JSE2ppx1jF6Ky21/vAG2rvNHpmeSU04RKjR5eAqYlyeFGkrN8g6YZwKysVrEjbev0mva2Ni49kCu0oncBvYNYpZR/ZDvxGyOWtCmPPXbsEW29uQMeLC6LvYXbFi4vKzDzqMdGxPJ/ZTS6Gr66kJBBM6bVJKPeWZPRYiVoI+fiQmNHolTFHbF2Nnxl6wAtzWSEO2e/5Kcg0Sk1gaF14os7KpIPfSFOMJwcvJOqrWQ2aEeskyYvn0A8W9YJn5IRe/h2ofEAUw3JnEtGYfKwegMwyKxzhG6I4HRhEFUsolIldiHRZIxXthTm4tWFUh8Goz5X39CN/m0ZMWJ/HwDcKThLfxREarfJfQ3JFKpcVc2bXR+ZI/4mzFOAbpMFHfG1ZTHI3LCSNN0Z94GuB8DprWgGLyWMsAa0denl4B0nCPtAbXEvaYZRBOW598BClgmOIuy+pDFGppYshYftoGSmP7MozGY55p9tJsYLhav94hf/Hf4ADFVKOiLjUnQAAAAASUVORK5CYII="},"743d":function(o,e,i){},7575:function(o,e,i){"use strict";i("af2d")},"77fb":function(o){o.exports=JSON.parse('{"NodoProyecto":["Objetivo","Trabajo"],"NodoDeTrabajos":["Trabajo","Objetivo"]}')},7870:function(o,e,i){},"7f89":function(o,e,i){},"803f":function(o,e,i){"use strict";i("0e73")},"83b0":function(o,e,i){"use strict";i("4a6c")},"83e2":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAwFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAgIBAQEAAAABAQEAAAAAAAAAAAAFBQUCAgITExMEBAQDAwMDAwMGBgYHBwcHBwcKCgoAAAAAAAAAAAAAAAAAAAACAgIDAwMCAgIXFxcFBQUJCQkCAgIAAAABAQEcHBwGBgYCAgIHBwcGBgYAAAAFBQUCAgICAgICAgIAAAAHBwcCAgIAAAATExMHBwcUFBQgICAAAAAAAAAAAAACAgIWFhYAAAAAAAC4BbpRAAAAQHRSTlMAA/638t3rOs1cD/C0nBx26laiLejNbGcyC/oG7eO7lYpTKCGp9cpQT0PFwa+tg3tX1Milm2U/OC8WDfTYonJF1MTcmgAAAWtJREFUSMft0teSgjAUgOGcEKIY24KgdAR0wd7btvd/qwWcdVyIg1dbZvyvAme+ORcJevT/qrUmguCMx6OVqqqCdA9Rhga+ZEzvIUFIWVYmBVTIbO4W0nULpSd1k7S3Np/UFqHYptfZmokAwNxP+Vv07pItnfp1k8hMJweZYCIa2MmTeEgbcdD8lp78B78xwNT1WJF4JPQRJ3/DMPECjeFxfiTQrlkEoGwIpl4TugyP8sOhuOPdTINg4gYoJav8sCpWODvks0CwZVi9g0BPfsFEPqTnrcUlRUHwQO5B+hHZhlNOFHmAyToTAL7raKVEn1lfO6AiKcfgVE48yzoLVHNtLTmUEtjP5gqgjDRIq5RkRtcRKiOFHuTXifpXyUj8gFvkGDLeS55ac/0WqVTtCBWbs2F0Al6m77K6zyE9wajOpKdL/bTnpL4W0lfJ5BCI65TQ9qXOOdvuWKSq1RAvUN7XdYHTxIt19Ohn+wSKfCO/2YXY4gAAAABJRU5ErkJggg=="},"85ec":function(o,e,i){},8746:function(o,e,i){},"87e0":function(o,e,i){},"881d":function(o,e,i){"use strict";i("615f")},8833:function(o,e,i){},"88d7":function(o,e,i){},8996:function(o,e,i){},"8aa8":function(o,e,i){"use strict";i("2750")},"8b1d":function(o,e,i){"use strict";i("9eea")},"8b71":function(o,e,i){"use strict";i("88d7")},"8c38":function(o,e,i){"use strict";i("5dfb")},"8c7c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAABg1BMVEUAAAAAAAAAAAAaGhocHBwFBQUDAwMAAAAFBQUgICBiYmIREREKCgoLCwtQUFAAAAAVFRVHR0cJCQkCAgIBAQEDAwMTExMhISE1NTUHBwcDAwMHBwcICAgHBwcCAgIVFRUYGBgUFBQSEhJeXl4EBAQFBQUFBQUBAQELCwsAAAANDQ0vLy8LCwsVFRUREREZGRkAAAAHBwcJCQkHBwcHBwcGBgYICAgMDAwCAgIAAAAQEBAaGhoKCgoVFRUKCgoQEBAQEBAZGRkHBwciIiIhISEoKCgtLS0JCQkEBAQNDQ0KCgoDAwMKCgoZGRkICAgKCgoLCwsJCQkQEBAICAgODg4dHR0YGBgTExMICAgPDw8LCwscHBwgICAtLS0ZGRktLS04ODgqKiomJiYPDw8NDQ0UFBQQEBAAAAAMDAwODg4YGBgKCgoWFhYYGBgyMjIfHx80NDQAAAAICAgzMzMkJCQrKysAAAA0NDQzMzM8PDwTExMWFhZISEgpKSlFRUUfHx8AAACEqLVPAAAAgHRSTlMA/pkLmb8f399/CtfPZRvzvxW1/PXzuh4D5dvSo41lY09HLQbw7+riyL+sdW9YS0E/+NrWy8a7sqObmI2EeXl2aWheODQcCfPm1sXCwL+tpp6Wj4eDgHJvWUhDPj0sJxkWEhDg0dC/vr2uqqqihYSDenFqY1pSTklGQ0M5NSULCM5vugoAAAJJSURBVEjH7dNnV+JAFIDhuWRR1oYbmjTpKH0BpSOCYF/b2rvbe+/1/vRNmABhYTB89/2SczjnOZc7mZCbuha1JTTPDrg+xKEFhXT2RcXifAaxbkYVkzIgbUPxmDxKrYwpJcXGlOkHSskPr0TuE6V5cnTMrJsobszuB9DzLtJHEz8rk9FYMe8wkX5yqw0aX0rZpItLIrabHA+mrdI+sd3IBBMcVcoL4pPb481o5oGeWqHHgbuWwa+2l53RA96H6E+DVVzHE8SXzCmHgEKg14pPnfER6p3iyFksEFa1oB9QymxMIeKO8KtJAw4miX1eCG+ODC4tDU4bjVYRpjhCqj7tEZHHNfoeCr15Fwp9PHN/++qurtJxlgFCjrW+qlyYbGqpFQ1NLVaRvhqvcIAR3eCAnAxosEsQ3sB62ruEfIBETU4u3w53CsOr050WeY1rHGnrVicR/kgJmiSH610IyKuTyRZRoXGog4zs3W71Io5T844MJYYTQrJoIx1EJbsP8+uAqNVRgVPn4n1RdSGkWcSL8lavyNC93mRiq01AiVxLLqxyYLBzAjH2JideukJijd/K77v+ioNtvUkY6uK4FrVlsyqaBZ972MSz2XiVo4CtnvxhE1OyQZxxTI7THqKaYxOXoUHujEB4iFaEmSs2mQMZmSQ0B2hMTLKYxi7EqV8+Y5LfFjnJjNLsekOMSZx6GUHzsBToIkziEFeBxpS5MdovK5SY5NQskMfx/3bheMy1k/1A4H3z5k9btj/xgYxAtp9+aZ5joMCRm8g/1gHtCvE8ISoAAAAASUVORK5CYII="},"8ed4":function(o,e,i){"use strict";i("5224")},"8edf":function(o,e,i){"use strict";i("eea3")},"8ee4":function(o,e,i){"use strict";i("4fac")},"906a":function(o,e,i){"use strict";i("87e0")},"95b0":function(o,e,i){"use strict";i("6171")},"96cc":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAMAAAAPkIrYAAABEVBMVEUAAAACAgIAAAAAAAABAQE0NDR7e3sBAQEEBAR5eXkeHh4MDAwwMDADAwMGBgYVFRUKCgoPDw8ODg4ICAggICATExMPDw9QUFBZWVkGBgYBAQEJCQkCAgIZGRkLCws2NjZkZGQODg4GBgYGBgYODg4MDAwPDw8SEhIICAgRERENDQ0bGxslJSUREREWFhYbGxsdHR0cHBwvLy9vb28xMTH///8ICAgODg4ICAgGBgYSEhIUFBQYGBgjIyMaGhoEBAQMDAwoKCgoKCgtLS0kJCQ7OzsMDAwDAwMAAAAjIyMPDw8QEBANDQ0HBwcMDAwcHBwKCgohISEtLS0NDQ0HBwc4ODgVFRVAQEBYWFg1NTUAAADjrFRNAAAAWnRSTlMA/qU/eUQdwVcCH78M79mVV9HB42dXPBIF+eLSWVc/Kgvy8u7OubOwpaN6aVhYT0tENzAdHAPq4daxi4B4cF1OSUhCOSMi8cPBr6almZmSdWlkT05OQDAgHRixeboEAAABzElEQVRYw+3WWU/CQBSG4YPiUnAB29KioIgCyg6K+77v+/r9/x8iTVpGI+kMHi686Hs1SZMnnTmTphQUFBTUa2OJ6vPLfjptmpVYu9FvxWLm/kHiU1WyCpAWn1OiThbgFuqW9+xJZX9tavEoQ341821M4c2WgWWSZgAbJMsOYYYUugaOpacF7KlY78AWSXoDGqRSSH4UDUBt3EkUSFICiChZWWwqWKtK1hlyRI9Vv8szC3woWfOYItKB3KmftaJkrTnWOoDQIduadiyrFm1jzX5YTiVAp+4NAsM9WTQJ1PtlZYBtpjWPqLvScce2vLu6jlumlUXeXW3gimklseSuZrDEtICbfllNYKdjDfCsRfENiPMsrQDkqRfrdeh3R/V6rVLUgQWrF2sSPumrpGTJqeS2TWqWR42XDMNIpZyfiFjFNNPpcrlcPagdNk61H2PwszwqQkpdSCxByRvxswTFtzxqd4tveRSSFte6dDdoAPEM0+qcVQ5YK81Ztqa1Wi3tD5agyJ6CT1FNav2Y4H3WF5NYkXA4QiLteO9hp1gM/27CwYTFaqyDCYuPCYuPCYuPCYuPCYuPnQuLjUFYbExYfExY7OxUKkFBQUH/sC/SIJ/NRVDIKwAAAABJRU5ErkJggg=="},"96fc":function(o,e,i){"use strict";i("caf0")},9754:function(o,e,i){},9887:function(o,e,i){"use strict";i("510b")},"9b51":function(o,e,i){},"9b5f":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAb1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt6r1GAAAAJXRSTlMA/vjSuKEqBRj0siXs28KSfXY5CmIvQBFl48SlXVYzT0LusVEPQoRFhQAAAZpJREFUSMftVdGWgiAQXUQEChWIzFLL2v7/G3fIcse0Omeem4ei4DL33hng5xvTkKpyouB5zgvhKiU/AjbeFmc2xrmwfvMecSzzZFicPL7z8vguRc3jQs0bG7ou2IbrCOL1y0Sq1LBgL05KPmSdxB420aVaRqwFzBpRTQTLShjYR6wXc0QEb3fP/+9aHjFqQUcJiIOXC677A2DKuZ5aA2K7THkLGF3P3OXAyr8yxsfZ45yWaSPz4DI8kbkQ1bVmRs3noDDOBaPTDCFSbeq4E3iT+4lCm7B9FUcOJK3Wo+8rEO7iqNqzxEpscMGYkMO2DDDZPQcg2JBUCsYKbHRvmP7Fy7Y3ozD8pJnpEcSBIQqTSbOYMEEkFZjmEASyNnei49IROoRsgDuCgBQ7jEZC6e0D1daCGASBpAEX48JuccElCkAe/YSqdJOmTlnMMWnfDipDgBCIEeQTTCaUktYw9LbEzZ88N7+eNf/nIxbQEVs6yNf5Qb6ig0y4LgiXEuHqI1ywhGuc8FgQnyT6w0d/XgcB/f8j3oOsb0ziD4jjHE3HnaQxAAAAAElFTkSuQmCC"},"9d5e":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAyCAMAAADC1sOAAAAAtFBMVEUAAAABAQEAAAAAAAAAAAAQEBAAAAAAAAADAwMQEBAAAAACAgIAAAAAAAAAAAAAAAABAQEBAQEAAAAAAAABAQECAgIEBAQEBAQAAAABAQEAAAABAQEBAQEEBAQHBwcBAQEAAAAAAAAAAAACAgICAgIDAwMCAgICAgIFBQUAAAABAQEAAAABAQECAgIEBAQFBQUAAAABAQEBAQECAgIAAAAAAAABAQEBAQECAgICAgIFBQUAAAATATehAAAAO3RSTlMAby7r/AXgxTkJ9AyjX9uCaSH37tdFGxfAu6l3VE0k6LSvlopsWDw1KeTSyY19LA/xhklA+ZyTXV9wY7WFmHcAAAIsSURBVEjHxZXZmqIwEEZRI5s0gmwCYiNIi/uuPfO//3tN0l9/gMrm1Zw7Q06KVJUU91/o22LyZ7g5+t9nXWqxf6cppkHAIDIf+mKDZEU8wQM9LxlU719EPfwwMj4p8u8P71T1/vMVKET1/KCbTtOupV1XI1A+h06ZoN8IOzDUpv180UmUn7Ce+CpMFVDc++A58klhJ43PLxGYYAztkuDS3CxRbCaoH1UZHDNl8bAW06V1wFXx5dLnSvH63zKNMOGqEd3D4eAXbi0AssbVoYuiWHitIYAN9wY7FRDSd4wtgHnTpmKdnDXNk91kTAqpD2RgyzXR4XPlCBhis4FMkVxA2LcwMkVXgRvXwsiUhUEz1cbIlNMIoyBv7m4FMTJlQiB/5T3H98o5IFOYIeaGjHr4bhajpTGkBSQYnfIGmHfKmWUCJ8ogf1vmigqU6RKIWxpUoOwFIJRaGcff71IELNNmIxe4+wVEa2HE/exfrgIzqdGIC1tugDxpMuzimZZBg+zfGkpXgHS4dzjzgGnVbpEGlKeviburEfYbQRDmBcXxqKLoNQL7Li+KS+I4Gysl6BFolZPHxcCki0J5ji3Wt72XIidsCBqb18vYvskiaCUnuaCstt3+w7DrjEExS4fRLrqAwiuaaA+kfl9yuvfIBGNmVVRSE8AghiqEXjhefRIwzK1TPVf8NcETaryob7gPRR1luy/LWSdt7jI98K8hLbGrDJNUat2cgwG9fPmzf5+aajk37m2HAAAAAElFTkSuQmCC"},"9e6f":function(o,e,i){},"9eea":function(o,e,i){},a028:function(o,e,i){},a09f:function(o,e,i){"use strict";i("f163")},a0a5:function(o,e,i){"use strict";i("4772")},a8e5:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAXVBMVEUAAAANDQ0AAAALCwtRUVEAAAAAAAAAAAAAAAACAgIAAAACAgISEhIEBAQWFhYEBAQAAAABAQEAAAABAQEAAAAJCQkBAQEAAAACAgIPDw8AAAAAAAALCwsAAAAAAADpantYAAAAHnRSTlMAZ1bmLIeXMvANzLdgNy339O/qwK+mpoZ7VT0cFwERwRN7AAAArklEQVRIx+3SOQ4DIQxAUSAZZggw+77d/5iBIhIije0uin+DLPEqW3Dojk0S2o5ozXyTmk3AZUfDXRlxRcPVB1uFzCZYC2SaMR1PT2RTgpsHsibB5As7LQ3bU4T8WkQ/FsDGKIvVRxuTYVYCmAqfZXgZJ7POknDs+zur92C8tzludzA2yytrMWAsLpN1/cSqGDNm/MdYK2D6C2PKsMNil+B6wNmhFql2EpGrBUfpDT8vWMVNDDCnAAAAAElFTkSuQmCC"},a90e:function(o,e,i){"use strict";i("6084")},a9dd:function(o,e,i){},aaf2:function(o,e,i){"use strict";i("42e8")},ab96:function(o,e,i){"use strict";i("685b")},ac84:function(o,e,i){"use strict";i("a028")},af2d:function(o,e,i){},b4de:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAjVBMVEUAAABJSUo5Tk9BSFdGTVxHTl1FTVxGTV1FTF0+RFdFTFw8RVVHTV1JUF9JT15FTF1FTVxGTV1GTVxHT15GUV9ESltITl5GTV1HTV1JUF9FTVxGTl1GTV1GTFtGTV1ITlxGTFxGTVxFTVtGTVxGTF1GTVxHTl1FTFtHTV1HT1tFTV1ITl1GTVxHR1VHTl5Dm7GSAAAALnRSTlMABgokwLbn/OMp3R73SIRVqO9tsRA0YevIwnVc8z2fLJWOQdeCfGcxyxrPT7oJm8OXKQAAAppJREFUeNrt2WuPojAYhuEiCijoCIg4nBQ8jYd5///PW0vXYLLLMmmBZSbP9c2YNDeBljYwAAAAAAAAAAAAAACARlr7mKpplE1a5+/iFVOxvlInTL9g8mKLujI+M1mXMXUnZ7LeHOrO3maSInowjZJLgmvIcEgIDS6khyRlkg5E5ETbKTeflGMt0qmM25K4PCh/pRkfeM4kLYjo4zmVTyYRHZgkm1+VsWVC4apmbZ5Z8SMrlJ8+Hs/SmRC0mzWz5aePWZOlehOVs6qbmCpnuSe7FCxJOcs86Dan56SaRcmsZJF6FpnPsVSzKupZFWQh6ztn3aJ4NbysOCRz7F36zpq9lzZ1WRkR8TD7C1nh77ES5SxrPiqtdjVZSxI+Ir0py1mPhMhs7Z24NuuzhOtx+6+sfncQS6rsD+chZhHN8qCXrOul2tg3ZAlWntZlhc9/bolqFmWnNRddG7Iqxq7Q/ppFvrfmvHsL65YpUGNWJczm2p9Z1VitL6fNWYKbBQ3Lae9Zwk4bZNZ9NcQsJxrgTXT8mA0uK1m+jdjQstzs9tn9xmYZedxh35xVLVk1WRMx1nGsnLXXmXBsyqoW+LqssHj+SPp8VVt5qg1uB8E3D4Pbb5Vbrf6yrEIrfeY1z9ai2pg2ZSWxJnimahbtJz73btZkBX64ifSvHcgsMdYk7OGcuNpehnh8HeipGlnI+llZjlUKW8kyLM5Qz0o8vVT4LWQttjp33tEP/VyweWa9DerjisiqLleW1+E3HzoySRefWruJh5dHPvXpITyedRlFRtxi2sYjH70sEAYJhiXDJeFlrCRVmtRdmelMkr2h7uyYtLVLXRkHTJ63p06Y9zlTERz9cfuy04Up0kbtYwAAAAAAAAAAAAAAAAD/yS+cHKxqoQUmgQAAAABJRU5ErkJggg=="},b662:function(o,e,i){"use strict";i("7870")},b81f:function(o,e,i){"use strict";i("3951")},bac7:function(o,e,i){},bb44:function(o,e,i){},bd51:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs30iGAAAAN3RSTlMA/ID3Cw8F6qwT8jmmfUZAMR8Y3dGSG+/ZsJ2Gb10H5sO+u7ZnSqF1V8iZjGBrW1Iu4MyCKOxPW1J8IAAAAv9JREFUSMftltmWqjAQRUmQGUREZbgtIOI8D931/392ISl6oYLNYvVjnyfLYlNJqJxE+NPv6cv0ffOrG7t2IZe77sJqM2BKtQ6woXNYNzrAfZHDYr8t0ZN6AmqgcFgZVJPNGlqzTZBhEG05PJbxjyzYpKthEztZQi5CMbybJI/MO4aUFNmwibaAySsnKY0J2UkYnHAJVg3znQHXPwH1ASQTUDtMzuvnrV0xb8rfMHzgT3mJyaQejtTHygij/lXeXKc9Titk+eg8DQDm+zMr1cPK4lRoEMWmovnDezUmbPHjYC8JMhb2qNCoxc68jQu6r+ak52+uvpfz6uJWfPDV9va+2+S8ftFWABtqT3rSxLY2LARaJH/WraCpU4aOFTO2nRYKuA/rMvUhbrk9JBVizjqG4XA6BrPXCp6KOMbVSNdHvB0piMc3vmH0B3LZKxtW7wCFyIGN4Qompgd9Y/jkV6kuKttz8fMcA63a0EzjpS93tsu3n6Kerh9cw4dCavHckeg2ewmaQcxeaeukIDTewn51+UJgIuPs8BGAO3n1MMeFrW0YFgGmbQUeAdIsN9JeYW0ERNR1EbhGLzAK4XvMo4uD8MMjr8OGJaV0jsOW0urun7gwUlUV/4Ow2lN8wYKi5Jp4Nu5mpoOAC7aXZXkYQCF38fCpZqLohQO0XMo//ZwVltDfFJ4NPVGcrZ9c114YEbcyFa68KU3mHNxYN6Dy/oyMhT38sT0nq0/m+asJb899242hHLUsAdQsk44KqFLrLXlJCHyLJBdQFkI7UagRbc9+PpJeGxuyrbE1Lpz7K6gOOzjtCgO03hqgpaDrR4KWBQrnvXmmCdIOh2A1fyPsPW7zg/28WGqDRdIPph+ZNccNfT5u1Kj+lExqDjr6fNBdtXo4xfyuWrnlEVse7uLp+3AHCFse7uW1opyyE5I8WjrlpAmbUvOlhCZ+epBxluPHC418SP3Ect5tiqHUcJXCZPdLXHvZJWx3gIf42ZOh0EFHlznvUeikk+q66kn406/pP19rpKSAcXvNAAAAAElFTkSuQmCC"},befd:function(o,e,i){},c4aa:function(o,e,i){"use strict";i("5065")},c51c:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAk1BMVEUAAAAmJjYoJjUjIjInJjYnJjYnJjYnJzYrITcnJTYoJDcmJjYmJjYnJzcmJTYnJjUqJzInJjYnJjUnJTYnJjUmJjYnJjYnJTYnJTYnJTYoJjYnJjYmJjYnJTUmJjYmJjUnJTUnJTckJDUnJjYnJjYnJTYmJTYnJjUoKDcnJjYnJjYnJjUmJTUpKTYmJTUoJjcnJjYD4yW0AAAAMHRSTlMAoKcQ++PfaBZMOC9kg2vECPLc9tGyrJh0WyXYyiq2k1RGDeyPiHxiHvi9QT4Z52bwjL0NAAAB50lEQVRYw+3X2W6rMBSF4Z3Y0CQ0CZQxTJnnpGe9/9MdsKCNVChbim/a8ktIGKHvxpZsU1/fn2s0CwddhdGd7S0ccHJWTG8twets8UAPkPmwq1wCAcuLASyouwOwZYETAIK6GwPy54LxYlZ31QBuhvgs1AD60AuuAThvddPnwR3wJnROygAYUg/2YA/24O8ATwxwBZxZoHCBPBs1JEhlq0E8BxIGqD60JCMqe0HdgQcKD20F4hFMbR5IInTQUpJ9gG64IbI5YJGdWV+7JupQWIKGZWUFRyJqA1mJAEX7GWCSyvIGT4Bx8UQSwLYG9xJNYAj4HPCyJ6LrO4AaHKIRjAD3xjooXwTRfd4JnlwARlmgxpuB0ZQEnFE5X8sukCJUzanIStDWv/qS0AHScfsJzly09L6gKivpAGkzPr7mJTjyUZS/fu04tukjsfseVE0LcG0AkAdixAJdCcC4kS5Q5QvSCZ4jtZCCdKcHNCfqdQn4WsBAkE7QnVHVHvA4YAosqbWF9bifwX9pKqt+UINA3TI52R5aco9UNkdVYhOr2ERbA/sBNDJiJg6p2ZAE4MUKdEwznQp6spuhdpUSnJKW7hcULVMF6mkqodIG0nqrGaTTXDNI9k6BOls5mkGKPc0g2RPq6/sL/QcOJpe5LiscHwAAAABJRU5ErkJggg=="},c597:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABsCAMAAACrb+cLAAAAwFBMVEUAAACjo6OSkpJ+fn6Dg4OLi4u0tLS2traIiIiZmZl8fHyAgICGhoaNjY2ampqfn5+ioqKUlJSWlpadnZ2goKCpqamxsbF9fX2JiYmrq6uurq6Hh4esrKytra0AAAAVFRUSEhIHBwcMDAwEBAQcHBx1dXVxcXFMTEwvLy8jIyNaWlo/Pz87OzsnJydra2tmZmYrKysPDw9kZGQ2NjYgICBubm5fX19VVVV5eXlISEg4ODgzMzMZGRliYmJSUlJDQ0PzUGgsAAAAHnRSTlMAUpzu2rkMBMWA9+bPsXhmWJWMbWA5GPPBMiXJLimeBQdsAAADEElEQVRo3u3a13biMBAG4J9eQ0hIL+OKDdgG01Mgef+32qMsOglgHGNGuzf+rgw3g+SRNJoDMplMJsOiXRgNBqP6OZTJv2oW/aV/nkGFtkdb3mpgNzFphzEBr1ZAEYIWGOVsimTnwOeNDngDmyIdVOQciPqhmHSQCSZVilEFjwXFWICHRzE88AgpRggeM4oxAw+bYmjgoREpz+E6xepyDUT5fD1bFMt65tjm6Rcc2/3NbyO5AQOdYungMKVY7+DwQrFewKJHMXrgcf9OBwXXYHJJBxUgqJ0wG/+gXJmD0VTlYSLllb4RaUARXsEsIo37ctdSWHObF2BXW+3svkUo0OrTD1oJSty8fsfwc1DlbmqICFZ4C5UeGqNJ/RpqNKK/5HTRo0VUtd/jy+K2a4ljdidli2J5Wi5PAjx6hsxaf1Rtl4FyuzryZclneI84zbnjaTtL0DBNw6ItmuecI52CG+iUmB64R2/J165JRzPdo3K7ZlMqdg3J9SmlPhJbU2prJLWi1FYMZdbvku4BEzrBBMn4dAJfZW5J/dNvot5trdOp3Xp0kHZy56mLjS7Raff6ikFRwuVyDkjz5bJHUYwKkri3ojZAeZqUGg1ZpzSjNlDrHknkrIgYeZneP9M0r0cEySGJq4MxZHk/RUyUq7RBqmKAYf8OJf0rZgl3/TAX3Tm8SvnifRFDrJ4ZCZuHvojip3zxcGnHEEBAewIAI9rhpr1XidQ1o5fEkLZNkdjHfj/AkdOhaXI6nf1OwgeOkPet3XW+ImGZA3JLeXRsR7H8/LHV0MDeurQ1f14SCyQ0IchS3x6kqota657I2JKYrE/xRIutfrT+6YgtQDz11i2k1+l+fLchzQdsPGzyoC5eYLcDDsO9/oMtk5vPcK83MGMPIo+PMSCNZeLxqbiBIX/499CMwBV7CPdgzMtN0WTyDCP65B874tEZy9OcWVMWCmEoC40muNnKOmrxdRL/fJ2NxSuhja8PZ+CPohvzJ8cQIQznaW7oIga7clm2PHviUwXKDESQAdQqi78vlJHJZDL/1R8lRDmkzfoT0gAAAABJRU5ErkJggg=="},c8a3:function(o,e,i){"use strict";i("f689")},c8fe:function(o,e,i){"use strict";i("6143")},c9a3:function(o,e,i){"use strict";i("373e")},ca75:function(o,e,i){"use strict";i("246b")},caf0:function(o,e,i){},cb60:function(o,e,i){"use strict";i("214a")},cbf3:function(o,e,i){},d1f3:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAsVBMVEUAAAAAAAAAAAABAQEFBQUBAQEDAwMBAQECAgIBAQEAAAAAAAAFBQUAAAAAAAABAQEKCgoREREBAQECAgIBAQEHBwcBAQEBAQEBAQECAgIBAQEHBwceHh4AAAABAQEAAAABAQECAgIBAQEBAQEFBQUEBAQKCgoBAQEBAQEBAQECAgIDAwMCAgIBAQEJCQkNDQ0BAQEGBgYFBQUDAwMBAQEBAQEGBgYICAgAAAAAAAAAAABES1EIAAAAOnRSTlMA7PQwArcHQaM9qPhU/PrIHArDXVgQ1q+dhHIhBe/f28ynjn9jSA3jvrSVemxoJxirTjGZk4k1FTg3rkgIUQAAAZtJREFUSMftlVmPgjAQgEvltBQEuZFDxPu+d+f//7A12UhWbQGf9sXvhclMvobM9EAcemNHs9A79G1iJMHmDUPxcBBKoE7aKwUsRRRLWGltWDMhchx9CGVb47AUABvUICCVvVZCMQXBVsPRYp4Raq7cRqPMIV9eXPEWyrEeJLDTGowRFsIYVQz2Pph6vQGm8zTTM2R1zoraCmMZ+5trjLN0/5oVC/5MrSFErHw8p2uO4hCfvZqObfZ85CFxEKdi9JmFztS88jY2UQfMvFEgDnHqMf8spGXNPj0w0qKKxzxF7GKFnda4ivpRPsq/KLKEv7jKgqxZJwz7/LtUx7PXM3aVEh1xGQSwfElGcBwgPlrqXZ5Smzytv65DOD1lzhCiWjam8HjOlanZ9Jau6NB6aCJdoQbcnfG3P9Zc6HeaWMD6sV+J0ATJtIe+R750R6CzKs4gr2L1eW7yHetI+lWsEr0q1IzNMbqTqpF5q1fc9WEk/74FPkSoFYoNwXg7icvb10UtnTlNPDM1cNFDbdmud55nnvboHeTt1hXZpR+YEyU0uY0rZgAAAABJRU5ErkJggg=="},d30f:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAzFBMVEUAAAAqKioqKiouLi43NzcrKysrKys1NTUqKiosLCwuLi4qKiorKysuLi4qKioqKiorKysrKysrKystLS0yMjIqKioqKiotLS0xMTEwMDArKyssLCwtLS0uLi4sLCwuLi4xMTEqKioqKiorKysrKysqKiorKysqKiosLCwtLS0sLCwuLi4qKioqKioqKiorKysrKysrKyssLCwrKysrKysqKiouLi4qKiouLi4tLS0rKysrKysrKysuLi4vLy8xMTEqKio2NjYqKioqKipHD6BvAAAAQ3RSTlMA+0AFAzueCe9pD/PLJOfhxn9vSBv15GFEDLukfToyLSET2tCxp5iUhDYeCvfr3djVrJCLiHdyZVbqtlpOwHdTKBeaIH0ShAAAAyNJREFUWMPtltla4kAQhTskZCOEsBsgBgTZUUFARcet3/+d5puuOEl6Dc7F3Hguq8NPVXUtjX70X6UvSw/1++lufnyJ3W8yls7Ex6na3r6kn8sIu4GGGfm793Mgo4OP+dImi6IQo+tjifqtQpRqgOWqOEitZzv9Qad/eCyXW+Vys/F5mwFdj1SUe/ylWj3OnbQaqZtXVXmhmDiR94hYLU5//byUJXeLQU/PiK/Iw6CNhDP7it0V+/uqJf4I4zoktSG/ifJTkh9XcK7BfV6ouuQm8ZlfujWglJFKrYTzIE6M9obUGkJcNqeeLyGkASqiC/jYZE965OCXgQppAK4zt74g/Hb2FiPbEQ4Y646f5S0bUgnjcVMYFrhTpZJPnLFDCoPxdijgQBLmeWODNQIGr/euxJ1aPmyPuNiiMfBpl5t3mBxRrvRITBPEYEDeQtg69aypSUwOhZFPzpgcBOywqooxuDKwaE6H3MoKpTqRHCAhhhzTbdIn5iGdrp4EAyWeL9o6MWbmgbUhHaLCYG36gVJ16TYP238MrwyGlX1MU1QmlkP6A5fcd0OBAd01UwxVsiNcHIPHecw+4826MMZ+tVIM1c0rsinv1Rht2sp0FR2D0Sl2U0Huxh1iy67FgHSOAtN55A3vS7og24YM066HvImjjRj/mmKMtl0yc5RUyU32v9+h6YWYcYQYNdnloPtknQowTw5vbsHjI/9mmEKb8TDtHXeKuhVySFJD9ceJg5kIXg5HzBmYOqzlmMbcijbMqkN+8EKZHZgoeYzd0OVr84o+D32mJofzD/FzdS14UzSg84aoiCwPnLFEWzmwimB2GDIjfmz0DTXFgU8nsifxVMl5AIrPT53uAaeviOsIFE1UC8sacDxZnlcmBh2RSPEmWZFd8XP2LqHskVhRwsFBxC8XEyeaIZniGk7Ue2FSvZjiL9VVb+cgHZqzNzfNf7NOwlEEnX6/13Cqq5Npzk1zO85tqhgVUGmMZVrDUFZLd3whRLuuosJadW+5kMrnOzpLxmJX0yhG79lF58sYdme9m01l3bZ973oQhegfpK/c0DLQj76t3171PugasqUQAAAAAElFTkSuQmCC"},d70e:function(o,e,i){"use strict";i("4b91")},d74c:function(o,e,i){"use strict";i("5bd3")},db58:function(o,e,i){"use strict";i("8746")},de33:function(o,e,i){"use strict";i("3039")},de63:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAANlBMVEUAAAAAAAAAAAD///8NDQ0LCwubm5sODg4lJSU1NTVFRUUREREkJCQ3NzdHR0cNDQ0QEBAAAAClo1o8AAAAEXRSTlMA+WAB818F0nFXJpRyVybSlL4BAcIAAACTSURBVFjD7dXLDoQgDEBROwV5qTP8/8/Oyp2pNujG3LM2DUTgTgDeSu/9VGuJn4tiqacj55yCXBZSnk/m/aS7SDMn6iLdSRZr1/Xb3dJmLLCE7hZWY4lRupvE6emB41t+9KeMH5us5sFu4wd7/OrZtK6Ox2HTu58vHKIpg01pNIWm0BSagh1NoSk0habQFJoCYPcHj7VqhqZFpgsAAAAASUVORK5CYII="},df15:function(o,e,i){},dffa:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAsVBMVEUAAAAAAAABAQEKCgoICAgEBAQHBwcEBAQAAAALCwsBAQEDAwMFBQUDAwMDAwMEBAQEBAQBAQENDQ0AAAAHBwcBAQEDAwMEBAQAAAABAQECAgICAgIODg4BAQECAgIGBgYBAQECAgICAgIDAwMEBAQBAQEEBAQCAgICAgIfHx8BAQEKCgoFBQUBAQEBAQECAgICAgIBAQEJCQkLCwsBAQEEBAQDAwMAAAACAgIDAwMAAAA7PaJUAAAAOnRSTlMA+t4VBFwodsAOonlOIX1nY68a8DLQjzrr48e2H7yBRfWynXJwyj6QhwhAGFbn16qZXycLpUlqAsKU+ypwswAAA9RJREFUWMPlWNmWojAQlX1HFBBX3Ntdu13aHv//wyYLIWkL1B7OmZfOE0rqJlV1b6VC7dcNy0vcwPB9I3ATz/onCFXXFqYcSjcypFA2F5qu/hCkqdkyQRCHJNva5gcgntGVBGvxuWt4L4Ios3lm1I4bLaOuaXWj1Yjb2Z/zmfIKijum02W7HilqHiolqtsyfTN2nyfH6ZDNm1NdhVGfmsTBjvMkbfqErDcIlBKHgwGZMNEfobz1iDtG80EOHeJa7618ytrEMxrDxzseNvAsc126F4LS6j+LX79FcEr2o2OPJP+VbPoS9ksvzNEEozivccvBOBOr6A3eqf8q0X08u2BNt4PjUm530i9bN+E8wPHpuIAQY5yjfinIR2MnSVI4T3UW5wbm8z29ZpgvpZmO7FyeXY3lHfNndqdprEajlE+DGx+dQAjm/LveDayAMu663Zs45EvG58H90k00UQpKUD72xHr0de51yNPhRF8EEvJRXFtDf5glaqzLtMxo1nWV2AQw245iosU1oQLgt9MSotFyZdLwH0mUltm7KXq2VS4DGXlcLP2UgHBBf5K6tYJ21CeKClVozFJ7PrL1XL4jBPN14l4IXi3Qq3oRyqp51PuWsuZxvGAY88Tihn4sclGiULWjolJ33u92cs8Q/F1ip84qo2UbYVqMe8jFWIF06THqxp+C8kTuKjEKDmNgEiI5qYAusnA8pVkQY8K/KE8xElaYsCWkAm1PdxyFsTWgyMuaqHOJyTwo0FMqUeru95Q3cpIjj73vIgrYM0iUtaR7aGybm/U7edQY8iARKS7swCfZF9lCLW8Tz02XrurIoZz2M+RzVLtTkV8Cc7SpxZ9milgS+tYxOR5z5BqAKXbKO1OLdKWYNBhTzf+i/y0IEaFTMMQqXTd08KyMOYxAKaUFDDFMuDYiNY4w7rrM7BkyHSDhkH6rA8nvB0vZKEfZc8cB/YAY9A524pOTuUeB2jYo+FwMUJpDbDVX+ILWxbcP77NkBUC4NGGh2OJwHtScQqnz1lcs0DmCQsHLFocZs6W9CXJenncDuBexbMFimISChqNDluiTaA3tYEnfxISsTeGYG4EGAZR0eMBQqhy2ejSN6TE5A/bwgKFbEI67iBpLO5QFRiEw+HG3KTt866FI3XgL7cXDF7YCDsNscxRTJB3sq7reg8ZkO8i02P4TQXPQmJS2SYr23t3HveVQheagTXrUtKnWRuGUg+MKmraqLWT1hrZae30F7XXVZr/61ePpRcipdhGqfi2rfkmsfmV9foFegAt0d6b8l+v86x8Xqn/qqP7h5beNvx6U8A4TgRU+AAAAAElFTkSuQmCC"},e048:function(o,e,i){},e463:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs30iGAAAAN3RSTlMA+/cHAwr08BJt5NkkFu3fHg7qyC/nUNPOimZGKLy4s6yofEEsoJqPdVo0PTkalITAgMOlYVZKbX+RxgAAA7xJREFUWMOtmOd2ozAQhQWmmF4NphgMxGBwb9H7v9nam42DzUyyAd9/HHQ+SaM7o0J+llsljmIYin+cS2MyXNqc3iVI3HCgq9AvLUbDgWujBcz44cB3uwWcDQ8il7MtoOIOX5MZbYmVfg2wrMdviaVtOerTBH7Ajeq9E7YDHyn0UVX77zgsl5vveOPlhFL9YH5+896UPkk8aPfmZiBQJnNxnhbof+2bnFXuhmt2Bu1IXKxGH717qXD9ZmYNGr6tQP+KEf3TYRmkBksBMXIWRoWXz2zmX1xXyHwrhv6vWKHdl9OA4zsItK+SGDCwZNPeYhZaB2g6dIDYsAN8U+gQVR2H81t2AE+sSUfqnOnNE3YW6apReq/JHM6/vO8Q5QKgDVmXOY+UmrQnEC2S255LHGHAoB9QX2PAkqJiGAYfYYGVrxmSV0q63R2CxdFGOjsjwNUExO1DdTy6itdWWxkkItv/aAv17ktaqyStTiLQyACDyNUTgJesO7sO0KqE9n/Ph3JK7RSRECDqeWfSm6XCdHmOC0RmKQLEwPyaqqWZjeRArrA9cG/MKCDnrI750Y33nu2nMmyyEs7RQgbd4KenoODIZkYxTRDDcngC+GvSyOjflMdOeCLFtCSF/c1PRJspxbQjHtqbgBYRK0OBJbmwaAhj9IxWocAFqVGgoaLAHVp6MnJ5LfBEPAGtmw0G5MtvphzpaE2t0XNpggIrsp6gP7cY8M2gmHJiHikWkKmJACU0hOyZcF7qKxP4qCrBPG0Pw/SJfDIJ4bS4iXLQ+w68zkuoeyFZetFqczdCHOhAn5UFbT0KwDvWGvfkLegEa4fd7SeeAZU4UwFz7QBHyuHzGN05wEvALDWPUEIH6kOv3pEBuo1+4QbWCbV7WJrSBtqg13LXgLxzRQaXday6kZTJsF8uWEbt0dJoG4YsYnY23shLz4d4RvHJi4GbaT+g4SLASOwHZGskhGUvHP74Esl9gfY7xLvlaE8xsxgw4YIZcL09aR0gcIIYti5reQiQCbuurtgBQCd+7fVWAZfZnfXlyWeOgMR7tRGmZZ5vHQEBiH6S+DrztVFwBFbzYUVx7t12HO72dATc0ZRgdb0Ijdf5lP03PoLKnV/bGF9Pt5ud3jFIuvocT1zd/vo1R3CZlb+/jNqvQ89r3765WJIiJAVHvhNvbh4ajLOn2uc+1BO3MGEermICvHAOkZU+DFAdDOQOzGvfsbmQbXkm58hg1UILKPUC4oVc98hwWbk/0cWrdFsJNPIC8Wb89iHVIj/qD7BjzjdOJ9y+AAAAAElFTkSuQmCC"},e559:function(o,e,i){"use strict";i("054e")},ea25:function(o,e,i){},ea8b:function(o,e,i){"use strict";i("2cfe")},eaba:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAt1BMVEUAAAAJCQkBAQEBAQEAAAAFBQUBAQEMDAwgICADAwMFBQUICAgKCgoMDAwXFxcFBQUCAgIEBAQPDw8VFRUPDw8yMjIDAwMDAwMGBgYHBwcNDQ0SEhITExMCAgIDAwMICAgjIyMCAgIFBQUFBQUGBgYHBwcNDQ0CAgIDAwMCAgICAgIFBQULCwsCAgIDAwMFBQUGBgYGBgYICAgNDQ0ICAgHBwcJCQkQEBAFBQUNDQ0LCwsKCgoAAAAVYtoZAAAAPHRSTlMAHPv427ffLgjWql5bPRSg7bsYDwsD5MCnhjgzIOavfQXyrZuBairY09DGs0bqzJKOcW47iXlmJZZUT1Yx0+xAAAADDklEQVRYw+2Y2XaqMBSGA4oVRBBEQMQRnFqnWq0d8v7PdY6l+wiBNImw1rnpf6eGLzt7yhb0q19VL2fxGfveuvFXa8+P3xdOGdokOCtDGacku8o5aN6J6+r+Fhdoq+ndO3BN/amGKao96cJWtk3AFSPNtpjzjipmSD1O+HnhXsZMyXuJlzfQMJe0AR8vUDCnlIDLvifMLYXDxnCGBaSFzPjusZD2rFg/Y0E9M/JZFQUu2z/Wm4mFZf5Uha2aOLDWovMMBd8hxWAYWJ2JjpYv2OFSrXfwTdO6qrrEvjOHFuIOybNeF7YhtfsuTtQ5bCTDvrRGmVUdWqDHJM+/oETvamLeHJx9yKwbU1q+RfDc287Hr372hkBSZq1VfOaHIQEcNW+A9dX7H5SKGj4UAnWyq/ZTP0ZXiy+pHpf2t6wXAvu0MgX/Lu3bZ6lObp1XLmni1I+vMsaNMOXwXaaLFQIfcyXQTeW8nM3gbmb1YyFQzWX1nAiCdTPRzqxWC4ENTGq1QaATvurQg89hZnWDE4gtyIfJt4PPsPhlKgYEvU2+S2P9nXFg8xzfB+y8EGUeJTv0Ig7gCheoRZT52k5cqGadzUobsgYMD77YGZCW7LTRio4cEM9HX3HuKhizE7tPvYHCfwZOP5KQyETVM5sDHCWJSUw8OdiRjuFrX9jaJDtt4faIkwPDZctoX45FNuxkFNqAPe6R4hvL4boCIilJQQ94kEI514xpg2F26D8l9gEPL78c2oxzvG2bNoho2ZS5WtRap5LDRujyhnPSqMOInr1wd4Edd7LZ8aEIzSJdYnj1iDBNZ67YKIL0iocl1IzKjnPlB06VPnBClQpJPqKf1Ttws+CWYUgyRXi+hJhaiPzxeUAcGoy4eS+ISwuf87xgH1P2qcaR0PsQcas3n7J4q3mPnwfTGl1TM0CoIiC8xKgOOPQ/Yc4rD6y5ynkA1t0JVE6mt1rW68uVZ47hVVUJ4GiAeo5hS5JtOBDXMsBRJnnLA2fAKw8E+yoDgn2VAcG+yoDAqwwI561IxixaoF/9J/0BY7A5D9cSe1UAAAAASUVORK5CYII="},ebed:function(o,e,i){},ee6e:function(o,e,i){},ee96:function(o,e,i){"use strict";i("a9dd")},eea3:function(o,e,i){},eeff:function(o,e,i){"use strict";i("ea25")},ef69:function(o,e,i){"use strict";i("280a")},f0d1:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAh1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD3YishAAAALHRSTlMAHWYM844W+fbOXRF7rtQHbBPl3NiGVcSrdjLqx7M6JebtiVG2PDmSZUW4lkeFA2IAAAKHSURBVFjDpZfterIwDIZTOlS+XgTlQ1FEdLp34/yPb6R0VCjYcvX54bVR7tCmSdrAnEiaBE61aZpN5QR1SmCRPu1dM9Lu+alLewdOSzYOng5efzSz+qiVJrZX/u46s90HoQCUPNw6W/PH1+1b/HLidH6jwxF6y7mN02Wed7vZV340NRr5VbcOd463u3Gfwoyo333BnhwNAzZ4frvj5MxeCsIJ/htHNhYoZG3wvbtsgX0/PoJSx5jNYXL9e62AJfsJP7iMX4GWVsyCO9h/9G6snTAkxt16jYcT+u8I2jqiJ08v8YtT+oIFspDoo9q74v7DIp0xL/4yq8YVLawYBL2W8Ang3z4slI9f7aZwwPyhGsz/w5fYaFq02AFQO70JrNhWuYMp7Fj9w/yP1Py/rlL0mx1hfSh5EOd6POrZP8oxoPkKbtp8c++fpRj9AATnRbX55ke4EddAmJ1Mlxc+QGXt/ykk7W+tzYuA595LWCFxtXlrXAMCcNrfBwjRZ7E+3XR4KNsnDlTME71Ch725VfOd/2PAzKajzEYLah4ohibgyLC2cgtKHkLGygaEBZmXDchLEBYUPF+C7MRevszLTpS2MXqxIPPyNsqBFDk6vAikRDplIkfNi1CWkwktqHmRTHI6owUVL9JZKijcgpLnBWWupHmOiuclbbaoRo6KX7GiOl/WvUxUcVmirPODpaBT54hF5nlxsJgfbZAYHK5Gx3vhDXLYWnzBsAyvOJnxJcv0mmd60TS86uZyib0vu2ybXffz0LDhULQ8hb+abnkK0fIom6503HSlf01XdtFv+0pCw5CS0rX7tq9QetlL3jWeiWfa+mqqtPdjem+XSkxu/2Ns/2MnSObb/1/3C6xgJU1VjAAAAABJRU5ErkJggg=="},f163:function(o,e,i){},f40e:function(o,e,i){"use strict";i("4312")},f689:function(o,e,i){},f793:function(o,e,i){"use strict";i("9b51")},faf7:function(o,e,i){},fc23:function(o,e,i){"use strict";i("e048")},fcf2:function(o,e,i){"use strict";i("9e6f")}});
//# sourceMappingURL=app.9b683a9f.js.map