(function(o){function e(e){for(var i,r,s=e[0],c=e[1],d=e[2],l=0,v=[];l<s.length;l++)r=s[l],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&v.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(o[i]=c[i]);u&&u(e);while(v.length)v.shift()();return n.push.apply(n,d||[]),t()}function t(){for(var o,e=0;e<n.length;e++){for(var t=n[e],i=!0,s=1;s<t.length;s++){var c=t[s];0!==a[c]&&(i=!1)}i&&(n.splice(e--,1),o=r(r.s=t[0]))}return o}var i={},a={app:0},n=[];function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=o,r.c=i,r.d=function(o,e,t){r.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:t})},r.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,e){if(1&e&&(o=r(o)),8&e)return o;if(4&e&&"object"===typeof o&&o&&o.__esModule)return o;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var i in o)r.d(t,i,function(e){return o[e]}.bind(null,i));return t},r.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return r.d(e,"a",e),e},r.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},r.p="/pepepe/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var u=c;n.push([0,"chunk-vendors"]),t()})({0:function(o,e,t){o.exports=t("56d7")},"034f":function(o,e,t){"use strict";t("85ec")},"064c":function(o,e,t){"use strict";t("2938")},"0cef":function(o,e,t){},1070:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAApVBMVEUAAADM28LI2L3h5tzj6d7R3srn7eTL2cPT38vW4s7g6uDF1bvH173C07fa4NTO3cTk7N7W4tPK2sDa5NTi7OLo8Oja5NXJ2b7M28LD1bfk7ODZ5dLY49DR38jd59fV4czT4MvP3sbP3cXK2r/H2LzW4s7S38rS38nQ3sfL2sHF1rna4tL////5+/j9/v3u8+v3+fXw9O31+PLy9u/7/Pr4+vfr8egF2h3MAAAALHRSTlMAcFEYHCQVFQUcDxkRDAh8ICBjJhEMAVc/KyjQx5XwrqiJg11Ku6Kcj2o4NHigeIkAAAKNSURBVGje3dl9U+IwEAbwR0opUKjg8S6e53nvV+RFuO//0W4SZXYYzG5owo74/COObX/QNLuGwDeDtMBBmmkDMZNkcKTZiyN8gpBWqNAIPyzie+xXJGYQEs60FU5pokpGOCGVH8ws4ND4KRCUITxSV5hbfQQnDygi0SbxX0RJ54yfg5IpGEAi/iG+Ej4/wgvT5ckBzTq0513ezWrD5FIuK5f3+OlCyKV8EP7SVxUzPqVflhWzOF4NUIuJicgJR/xb1enva+U6oyN9kltv42fA7fJV7oTbVXcgm6U567uX8dUcuiLk6OHNHcgSVrn3NdZ4IkQKIVibk79AyvWLUQ15Ve78DA4ZMAgpssEgXaQMslceJOMZPJLxCJ7NRa7dlZSMimNCypXjuN9kBCC8ckNGIIKNudQNY4QipIwZIxQhpfaWsUEUhAr55OCQRzIiIKRMQRmTEQ3B9lD5ZusuIiOlTU4GFfZoSPmaLkwm1KNiIHR+uV2Y65qWXTMv7P3bRUHIeAKs8m++fBmPpv0RByHDKCb7i+ekBCFk0JNMz+6UXvJILiBk2Mztb/uWPCGFRSYcQoYjY59S30IiIFtr8E1rzSNDZkxoosstPmDgyWDyqzQHC0jOIAtrCPlhFR6puxAyhNzbOepEOuzt2lGx4jO3SpUx2a2o7Eq5taNfMsiMWTpM4ZfP7qVDKq1P/gCnKNztGrmQ3WPNNw9HiOYSu62w+qXUz4dk0M0MZ0oC7QxxlgzEeRk/Iwh5r9/eJW8Vsg8Tna2Nhso0bCE8cs1KFYxoSiFumIano7AjlClU57bCplDxrnY9ejqdsKPSMAY67bWvs3XZ0+l57a7OfuJMaYs3KZT+NRimIxym793k/gPFdL6ma6aH6QAAAABJRU5ErkJggg=="},"17c5":function(o,e,t){"use strict";t("a263")},"181c":function(o,e,t){},"1e55":function(o,e,t){"use strict";t("338f")},"230a":function(o,e,t){},"269a":function(o,e,t){},2938:function(o,e,t){},2965:function(o,e,t){"use strict";t("269a")},3074:function(o,e,t){"use strict";t("6294")},"338f":function(o,e,t){},"3a9d":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAeFBMVEUAAAAXEAoUDQhlRSs0JBYrHRJLMh9FLhxeQCcaEgtiQykyIhUlGQ85JhgsHhJTOCIpGxEgFg1ZPCU/KhpWOSN0TzF6UzQvIBNrSS14UjNPNSFjRClyTjF8VTVcPiZnRyxuSy93UTIDAgEKBwQRDAcPCgYIBQMGBAI5vVJyAAAAInRSTlMA/v6A/v79/aX+kP7+/f7d/v6+/c00Ef5iHfGLPQewd1IkgWmI6gAAAZ1JREFUaN7t1eluqzAQhuGxwxInmDVrl7N8A+b+7/AcqdCChJrUxZVazfNrBBIvBgtICCGEEOK7ecpSGtWlUtmB1pc6RYMccAyUtLq018O0Rx8XRe6Qh4v8YUT0n0V/GU61i6r05B1pen4ZGPZliHgRoAvfSI5hUK9vZbvk0Bhw4RmJMewAg4zedSyhr6EjdDRogkcoRRU+smUdPrLh9isinUS+IHKGCRdxw0apVTp+VvK1Iwd2NNfBjtfaTT2evCNHjZqmLhgPWJ6rTr4RylDRVImOlv8nJXlHCu4TelM7WFr1nYy3XtBo10JRgMjJoLPX8QmBLyEidKzQqygpHqxx0BtaOTJqOsCxA/hMFCAySGKjTZZeyTPi1Vzye91IxG6BeVo1Uugl59lKQpHIRPocPmI5Dh/JYcJHYiga/Y32U1ESIhJjrt0EiGyNmtmvvJJlEpGIRH5YJP9QpCUvEZjuVTtDXrYOj/evOic/Gpruk3D/i/wUDL2jO1hGTr4sA6xuaR1Qkb+D4R43uTaiT9k10S324ZmEEEIIIb6xf4x8QD01P3dKAAAAAElFTkSuQmCC"},"3b64":function(o,e,t){"use strict";t("af07")},"3b9c":function(o,e,t){"use strict";t("7ef1")},"416c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAQlBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACO4fbyAAAAFXRSTlMA90xVsh5Nf+Hgfh+8RogQ1qlCGu1joRCFAAAAwklEQVRYw+3WSw7CMBAD0EzbpIU0tHzm/ldlA7JYMVK8yMI+wJOc7yRFGTPHFE47ImB5WTT3ZwSczUOa+2VKMdBu/9uW3e2aouAcWJjNl0wE64LCFHA1FO4EUZgIZhTuBlGYA6IwCcQOc0AU5oAoTAJRmAGi8JqI4GPzPQ8Ncivj2o18bL4He+SrR34csNMjP7Cf0iN/Uh3fKKE0fxThD0vOHecKKnMGzsksfmgFChQoUKBAgQK5YDvPlqipNSmK8pM3R4cJW1AgzFsAAAAASUVORK5CYII="},"4e77":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAABBVBMVEUAAAB0yf95uf5w0/11yv98tv95yP94wv+Pif10zf91yv92xv92w/93w/96vf94wv92xP94v/92yP96uv94wf97uv95uv9+sf93w/96wP9+r/+Hmf+Bqv+Jlv+Rmf9zzf90zv90zP93wf91x/92xP91yP94wf97t/90yP90zP9zzP90y/92xP91yf94wf94vv91yf93wf6Dqf9+tf99rv53v/qVjv+OmP10yv92wv91y/92xv90yv95vf96uv96vv98s/91zP93xf95vP9+sP96vP91x/97s/98tv97u/90y/97tf+Cpf9zzf9zzv90zP90y/91yf92xf9zz/93wf92x/94vv/sxuKxAAAATXRSTlMA6Q0KV0YUVgf98/LQypcp9PDQybSUiYJrSEAhGQsF9erp59jUv7u6ua+vr6yUkE5KQi4lHBAPBPr47e3h3darpqWflI56eXZtZFtXTjNET+UAAAHoSURBVFjD7dXJetowFAXgAwHH0BIgA6GEkDRz2sxj53luryQP7fs/SitHjWSzMZKX+leyF+eTr30seJ7neS7qc3++okLzi3wzRGVWnkREj1GVR21O/9Sqml1KGbaFKjQeCqYCV+Fu4amMU+Cs+YCTFjnPLiYTSx2/Ozk7U7LkNLvDiFEeazp8d+bs2P91YN9Zc3Ot5xFlRGDdWSOPicF+624VB9ad1ZL4vPtMRb8NbTursbQ7EaT8sO6s1hnfpkytecO2s3p8xxj3E1JEw76z6iUMMVnW179P7TqrA74DZ8bt3XWbzmqvRkBXkPYe5YS6swZ+IPeda98RygnShKaIDwB+xmYeX0FJc8uCihYAXG7nNr7xC+X1NsjUzn71XyhnE7MY7eo58u3sdQ65GTfzERqeLtFdJNupyxsnxTm8xIzWmz0m895kV4NiHtvH7N694K1P6kOnYuAabOydQ7rtsGIgh4sDlVfVEbpDU1gMe+oPU9kR+i3KtlRIvIKtizaTT/g6HykC2Mr2Fw3rl30zMbYO7GUxx3L5scZJSfrXsFST8+uoi6NFVRh2MnEITNL7Vow/q1O6AYfAqAvtepUzIu4SyM+Qs9ZpUTRvH8j2blAwONy6sA+MrzBtBGtxiGrdwPM8z/PK+wu8uPpYuoozuQAAAABJRU5ErkJggg=="},"4fac":function(o,e,t){},"554c":function(o,e,t){"use strict";t("743e")},"559e":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAqCAMAAAD26OlUAAAAtFBMVEUAAAAAAAAAAAAAAAAaGhoCAgIDAwMBAQEQEBAAAAABAQEBAQECAgIAAAABAQEBAQECAgIEBAQBAQEAAAAFBQUDAwMDAwMAAAAAAAACAgIDAwMFBQUGBgYAAAABAQEBAQEDAwMDAwMICAgJCQkMDAwBAQEBAQEBAQECAgIBAQECAgICAgICAgIGBgYGBgYNDQ0EBAQCAgIEBAQBAQEBAQEDAwMCAgIDAwMEBAQFBQUQEBAAAAAlv8O7AAAAO3RSTlMAvz/5B4MexQP7YBe0n+vmf03b2F0SC+DPqVlRLfbKo3lENiEP89PAu66Ja2dJOjIncUfthpmTjT4pJj+7kzoAAAIXSURBVDjLnZTnlrIwEIbHDaEI0lFAQFGkWrBty/3f16cU0Q3sd86+vybwnMnUwJ/FWGxZshbzOyVqOLN1RdHtDGviILa/2D5S7ESSEltBvn3Z92JePhPid9ezpgwztTz3PRZmuUdzZkCSgoUnsUVCAvMHxqsbRW2xDlWVjcq/pJqTZA49mickfy4AJtJ+IEGJ4O50JOkKBrRKybG1T7r9RhNtGd9s/VRbUwdtae7NGTfWFjnTyhijCUNzIzJrSGaCKiuS5JDu+JKQBxnKUgQA2mZBOSxFdtKRzGKjAcAHcul7J2xN1mm46APA4gyWjo/U5KiuGmtwFhxkh6e5mhw1VeMd+QAawjRXk2L56BzSYCuMKa7WsstxLGxhKcz7udFTt+bCErC/+y8HOx93HmnuxeNLjOKC5toYn7NmwDVors3akzO+qZZ5AFfv4/hM9sDi9HV9jALpAKZOc7DWOQsgR82mfSmkIikOTJTfU2+nR/PJnQyprbhNz66ax/Op2ZybnDVQOp2lqJ7wyiV/VbjJUpsC7RCN250pqn0rLR56VLQ7A6ERhzCoMDYefwthtB/i9iOh6E4qST/7uc+UqM+lx4Trf3s4gl8DV88ypiqzxvJZhR9yOcId1y/Y8fbJBUrlZUaMq+mJ9xdX9MyrQWaXr/6HCwc+kmMuTblYRn6AVzAkcadmgaEoRpCpOxF+FR+J399iRPXoHwT7P6mwTTR1AAAAAElFTkSuQmCC"},"56d7":function(o,e,t){"use strict";t.r(e);t("caad"),t("2532"),t("e260"),t("e6cf"),t("cca6"),t("a79d");var i=t("2b0e"),a=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"navBar"}},[1==o.usuarioLogeado?t("router-link",{staticClass:"hoverNegro",attrs:{to:"/actividadesVirtuales2021"}},[t("div",{staticClass:"botonNav",attrs:{id:"navActividadesVirtuales"}},[o._v(" Actividades virtuales ")])]):o._e(),t("router-link",{staticClass:"hoverNegro disabled",attrs:{to:"/proyectos"}},[t("div",{staticClass:"botonNav",attrs:{id:"navProyectos"}},[o._v("Proyectos")])]),t("router-link",{staticClass:"hoverNegro disabled",attrs:{to:"/atlas"}},[t("div",{staticClass:"botonNav",attrs:{id:"navAtlas"}},[o._v("Atlas de conocimientos")])]),t("router-link",{staticClass:"hoverNegro disabled",attrs:{to:"/trabajos"}},[t("div",{staticClass:"botonNav",attrs:{id:"navTrabajos"}},[o._v("Trabajos")])]),o.usuarioAdministrador||o.usuarioSuperadministrador?t("router-link",{staticClass:"hoverNegro",attrs:{to:"/personas"}},[t("div",{staticClass:"botonNav",attrs:{id:"navActividadesVirtuales"}},[o._v("Personas")])]):o._e(),o.usuarioSuperadministrador?t("router-link",{staticClass:"botonNav hoverNegro",attrs:{to:"/registro",id:"navRegistro"}},[t("div",[o._v("Registrar usuario")])]):o._e(),t("div",{attrs:{id:"botonesNavDerecha"}},[o.logeado?[t("div",{staticClass:"botonNav navLogin hoverNegro",attrs:{id:"navLogged"},on:{click:function(e){o.accionesLogeado=!o.accionesLogeado},mouseleave:function(e){o.accionesLogeado=!1}}},[o._v(" "+o._s(o.username)+" "),o.accionesLogeado?t("div",{attrs:{id:"botonesLogeado"}},[t("router-link",{attrs:{to:"/miperfil"}},[t("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"Perfil"}},[o._v("Perfil")])]),t("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"desconexion"},on:{click:o.deslogeo}},[o._v(" Desconexion ")])],1):o._e()])]:[t("router-link",{staticClass:"botonNav navLogin hoverNegro",attrs:{to:"/login",id:"navLogin"}},[t("div",[o._v("Login")])])]],2)],1),t("router-view",{attrs:{id:"visorRouter"}},[o._v("asd")])],1)},n=[],r=(t("a15b"),t("d81d"),t("fb6a"),t("d3b7"),t("ac1f"),t("25f0"),t("5319"),t("1276"),t("8785")),s=t("9530"),c=t.n(s);function d(){var o=Object(r["a"])(["\n              query {\n                yo {\n                  id\n                  idGrupoEstudiantil\n                  nombreGrupoEstudiantil\n                  nombres\n                  apellidos\n                }\n              }\n            "]);return d=function(){return o},o}function u(o){var e=o.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(t).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)}var l={name:"App",components:{},data:function(){return{accionesLogeado:!1}},computed:{username:function(){return this.$store.state.usuario.username},logeado:function(){return void 0!=this.username&&null!=this.username&&this.username.length>2},colorBlancoAccionLogeado:function(){return this.accionesLogeado?{backgroundColor:"white"}:{}}},methods:{deslogeo:function(){this.$store.commit("deslogearse"),this.$router.push("/login")}},mounted:function(){var o=this,e=localStorage.getItem("token");if(e){var t=u(e),i=parseInt(Date.now()/1e3);i<t.exp?(this.$store.commit("logearse",e),this.$apollo.query({query:c()(d()),fetchPolicy:"network-only"}).then((function(e){var t=e.data.yo;o.$store.commit("setDatosUsuario",t)})).catch((function(o){console.log("Error descargando datos gql. E: ".concat(o))}))):this.$store.commit("deslogearse")}else console.log("no habia token")}},v=l,p=(t("034f"),t("cdcd"),t("2877")),m=Object(p["a"])(v,a,n,!1,null,"5744ac61",null),A=m.exports,f=t("2f62"),b=(t("99af"),t("5530")),h=t("74ca"),g=t("2bf2"),y=t("478e"),P=t("522d");function N(){var o=Object(r["a"])(["\n    \n    enum TiposUsuario{\n        USUARIO,\n        ADMINISTRADOR,\n        SUPERADMINSTRADOR\n    }\n    \n    type Usuario{\n        username:String,\n        permisos: TiposUsuario\n     }\n\n    type Mutations{ \n        setUsuario(username: String, permisos: TiposUsuario):Usuario\n    }\n"]);return N=function(){return o},o}function E(){var o=Object(r["a"])(["\n    {\n        usuario @client{\n            username\n            permisos\n        }\n    }\n"]);return E=function(){return o},o}var C=c()(E()),D=c()(N()),w={Mutation:{setUsuario:function(o,e,t){var i=e.username,a=e.permisos,n=t.cache;return n.writeQuery({query:C,data:{username:i,permisos:a}}),n.readQuery({query:C})}}},x=t("d634"),j=t("c0cc"),R=t("4518"),O=t("c2c3");i["a"].use(P["a"]);var S=new g["a"],$=function(){return localStorage.getItem("token")||""},T="https://pe-pe-pe.herokuapp.com",k="wss://"+T.substr(7)+"/subscripciones";console.log("Server url: ".concat(T));var I=Object(y["a"])({uri:T+"/graphql"});console.log("Direccion subscripciones ".concat("ws://"+T.substr(7)+"/subscripciones"));var G=new j["a"]({uri:k,options:{reconnect:!0,connectionParams:{headers:{Authorization:"Bearer ".concat($())}}}}),U=Object(O["a"])((function(o,e){var t=e.headers;return{headers:Object(b["a"])(Object(b["a"])({},t),{},{authorization:$()})}})),_=U.concat(I),z=Object(x["d"])((function(o){var e=o.query,t=Object(R["l"])(e);return"OperationDefinition"===t.kind&&"subscription"===t.operation}),G,_),V=new h["a"]({link:z,cache:S,typeDefs:D,resolvers:w,connectToDevTools:!0}),M=new P["a"]({defaultClient:V});function B(o){var e=o.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),i=decodeURIComponent(atob(t).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(i)}i["a"].use(f["a"]);var L=new f["a"].Store({state:{usuario:{username:null,permisos:[],id:null,idGrupoEstudiantil:null,nombreGrupoEstudiantil:null},token:null},mutations:{logearse:function(o,e){var t=B(e);o.token=e,o.usuario.username=t.username,o.usuario.permisos=t.permisos,o.usuario.id=t.id;var i=JSON.stringify(o.usuario);localStorage.setItem("pepepe_usuario",i),localStorage.setItem("token",e)},setDatosUsuario:function(o,e){o.usuario.idGrupoEstudiantil=e.idGrupoEstudiantil,o.usuario.nombreGrupoEstudiantil=e.nombreGrupoEstudiantil},deslogearse:function(o){localStorage.clear(),o.usuario.username=null,o.usuario.permisos=null,o.usuario.id=null,o.usuario.idGrupoEstudiantil=null,o.usuario.nombreGrupoEstudiantil=null,o.token=null,V.cache.data.clear()}}}),Q=t("8c4f"),F=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"atlasConocimiento"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:e.shiftKey?(e.stopPropagation(),void(o.panningVista=!0)):null},click:[function(e){o.idNodoMenuCx="-1"},function(e){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;o.idNodoSeleccionado="-1"}],mousemove:function(e){return o.panVista(e)},mouseup:function(e){o.panningVista=!1},dblclick:function(e){return e.ctrlKey&&e.shiftKey?e.target!==e.currentTarget?null:(e.stopPropagation(),o.crearNodo(e)):null}}},[t("div",{attrs:{id:"contenedorNodos"}},[t("canvases",{attrs:{todosNodos:o.todosNodos,nodoSeleccionado:o.nodoSeleccionado,centroVista:o.centroVista}}),o._l(o.todosNodos,(function(e){return t("nodo-conocimiento",{key:e.id,attrs:{nodoSeleccionado:o.nodoSeleccionado,todosNodos:o.todosNodos,idNodoMenuCx:o.idNodoMenuCx,esteNodo:e,centroVista:o.centroVista},on:{creacionVinculo:o.crearVinculo,eliminacionVinculo:o.eliminarVinculo,cambioDePosicionManual:o.cambiarCoordsManualesNodo,eliminar:o.eliminarNodo},nativeOn:{click:function(t){return t.stopPropagation(),o.seleccionNodo(e)},contextmenu:function(t){t.preventDefault(),o.idNodoMenuCx=e.id}}})}))],2)])},q=[],J=(t("7db0"),t("c740"),t("45fc"),t("b85c")),Z=(t("96cf"),t("1da1")),H=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"nodoConocimiento",style:[o.estiloPosicion,o.estiloSize,o.estiloArrastrando],on:{mousedown:function(e){if(!e.ctrlKey)return null;o.arrastrandoNodo=!0},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo,mouseleave:function(e){o.arrastrandoNodo=!1},dblclick:o.abrirPaginaNodo}},[t("div",{attrs:{id:"sombra"}}),t("img",{ref:"iconoNodo",staticClass:"iconoNodo",attrs:{src:"http://localhost:3000/api/atlas/iconos/"+o.esteNodo.id,alt:""},on:{"~error":function(e){return o.iconoFallback(e)}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[t("div",{staticClass:"seccionMenuCx"},[o._v(o._s(o.esteNodo.nombre))]),t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarEsteNodo(e)}}},[o._v("Eliminar")]),"superadministrador"==o.permisosUsuario?t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(" "+o._s(o.esteNodo.id)+" ")]):o._e(),-1!=o.nodoSeleccionado.id&&o.nodoSeleccionado.id!=o.esteNodo.id?[t("div",{staticClass:"seccionMenuCx"},[o._v(o._s(o.nodoSeleccionado.nombre))]),t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.nodoSeleccionado,o.esteNodo)}}},[o._v(" Continua aquí ")]),t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Continua desde aquí ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:o.esteNodo.vinculos.some((function(e){return e.idRef==o.nodoSeleccionado.id})),expression:"esteNodo.vinculos.some((v) => v.idRef == nodoSeleccionado.id)"}],staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Desconectar ")])]:o._e()],2),t("div",{ref:"nombre",style:o.fondoNombre,attrs:{id:"nombre",contenteditable:!0},on:{blur:o.guardarNombre,input:o.setNombreEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurNombre(e)},dblclick:function(o){o.stopPropagation()}}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")])])},K=[];t("498a");function X(){var o=Object(r["a"])(["\n            mutation($idNodo: ID!, $nuevoNombre: String!) {\n              editarNombreNodo(idNodo: $idNodo, nuevoNombre: $nuevoNombre) {\n                modificados {\n                  id\n                  nombre\n                }\n              }\n            }\n          "]);return X=function(){return o},o}var Y=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,W={name:"NodoConocimiento",data:function(){return{arrastrandoNodo:!1,nombreEditable:!1,nombreEditandose:!1,baseSize:{x:50,y:50},posicion:{x:0,y:0}}},props:{esteNodo:{type:Object,required:!0},centroVista:Object,idNodoMenuCx:String,nodoSeleccionado:{type:Object,default:function(){return{id:"-1",nombre:"ninguno"}}}},computed:{menuCx:function(){return this.idNodoMenuCx==this.esteNodo.id},size:function(){var o=Object.assign({},this.baseSize);if(this.seleccionado){var e=this.baseSize.x,t=this.baseSize.y;o.x=Math.round(1.1*e),o.y=Math.round(1.1*t)}return Object(b["a"])({},o)},seleccionado:function(){var o=!1;return this.nodoSeleccionado.id==this.esteNodo.id&&(o=!0),o},estiloPosicion:function(){var o=Math.round(this.posicion.y-this.size.y/2),e=Math.round(this.posicion.x-this.size.x/2);return o-=this.centroVista.y,e-=this.centroVista.x,{top:o+"px",left:e+"px"}},estiloArrastrando:function(){var o=0;return this.arrastrandoNodo&&(o=1),{zIndex:o}},estiloSize:function(){return{width:this.size.x+"px",height:this.size.y+"px"}},fondoNombre:function(){return this.nombreEditandose?{backgroundColor:"orange"}:{backgroundColor:"lightblue"}},permisosUsuario:function(){return this.$store.state.usuario.permisos}},methods:{abrirPaginaNodo:function(){this.$router.push("/nodoConocimiento/"+this.esteNodo.id)},copiarId:function(o){var e=o.target.innerText.trim(),t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},eliminarEsteNodo:function(){this.$emit("eliminar",this.esteNodo.id)},guardarNombre:function(){var o=this,e=this.$refs.nombre.innerText.trim(),t=this.esteNodo.id;this.nombreEditandose&&e!=this.esteNodo.nombre&&(e=e.replace(Y,""),e=e.replace(/\s\s+/g," "),this.$apollo.mutate({mutation:c()(X()),variables:{idNodo:t,nuevoNombre:e}}).then((function(e){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(e)," ")),o.nombreEditandose=!1})).catch((function(o){console.log("error: ".concat(o))})))},setNombreEditandose:function(){this.esteNodo.nombre!=this.$refs.nombre.innerText.trim()?this.nombreEditandose=!0:this.nombreEditandose=!1},arrastrarNodo:function(o){if(this.arrastrandoNodo){var e=document.getElementById("contenedorNodos").getBoundingClientRect(),t=Math.round(o.clientY-e.top+this.centroVista.y),i=Math.round(o.clientX-e.left+this.centroVista.x);this.posicion.y=t,this.posicion.x=i}},guardarPosicion:function(){this.arrastrandoNodo&&(this.$emit("cambioDePosicionManual",this.esteNodo.id,{x:this.posicion.x,y:this.posicion.y}),this.arrastrandoNodo=!1)},crearVinculo:function(o,e,t){console.log("creando un vinculo tipo ".concat(o," entre ").concat(e.nombre," y ").concat(t.nombre," ")),this.$emit("creacionVinculo",{tipo:o,idNodoFrom:e.id,idNodoTo:t.id})},eliminarVinculo:function(o,e){this.$emit("eliminacionVinculo",{idNodoFrom:o.id,idNodoTo:e.id})},blurNombre:function(){this.$refs.nombre.blur()},iconoFallback:function(){this.$refs.iconoNodo.src="nodoConocimientoDefault.png"},dibujarLineaEntreNodos:function(o,e){var t={x:o.coordsManuales.x+this.paddingGuarda/2-parseInt(this.bordesDibujoActivo.left),y:o.coordsManuales.y+this.paddingGuarda/2-parseInt(this.bordesDibujoActivo.bot)},i={x:e.coordsManuales.x+this.paddingGuarda/2-parseInt(this.bordesDibujoActivo.left),y:e.coordsManuales.y+this.paddingGuarda/2-parseInt(this.bordesDibujoActivo.bot)};console.log("".concat(t.x,", ").concat(t.y," -> ").concat(i.x,", ").concat(i.y," "));var a=Math.atan((i.y-t.y)/(i.x-t.x));i.y-t.y<0&&i.x-t.x<0&&(a+=Math.PI),i.y-t.y>0&&i.x-t.x<0&&(a+=Math.PI);var n=parseInt(.6*this.baseSize.x);console.log("radio ampliado: ".concat(n));var r=parseInt(n*Math.cos(a)),s=parseInt(n*Math.sin(a));console.log("Correcciones: ".concat(r,", ").concat(s," "));var c={x:i.x-r,y:i.y-s};this.lapiz.moveTo(t.x,t.y),this.lapiz.lineTo(c.x,c.y);var d=7,u={x:c.x+d*Math.cos(a-3*Math.PI/4),y:c.y+d*Math.sin(a-3*Math.PI/4)},l={x:c.x+d*Math.cos(a+3*Math.PI/4),y:c.y+d*Math.sin(a+3*Math.PI/4)};this.lapiz.moveTo(c.x,c.y),this.lapiz.lineTo(u.x,u.y),this.lapiz.moveTo(c.x,c.y),this.lapiz.lineTo(l.x,l.y)}},mounted:function(){this.posicion.y=this.esteNodo.coordsManuales.y?this.esteNodo.coordsManuales.y:0,this.posicion.x=this.esteNodo.coordsManuales.x?this.esteNodo.coordsManuales.x:0}},oo=W,eo=(t("2965"),Object(p["a"])(oo,H,K,!1,null,"65f25707",null)),to=eo.exports,io=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"canvases"}},[t("canvas",{ref:"canvasTodosVinculos",staticClass:"canvas",style:[o.posicionRelativaCanvasTodosVinculos,o.sizeCanvasTodosVinculos],attrs:{id:"canvasTodosVinculos"}}),t("canvas",{ref:"canvasVinculosSeleccionado",staticClass:"canvas",style:[o.posicionRelativaCanvasTodosVinculos,o.sizeCanvasTodosVinculos],attrs:{id:"canvasVinculosSeleccionado"}})])},ao=[],no=(t("13d5"),t("a9e3"),{name:"Canvases",data:function(){return{montado:!1,lapiz:null,posicionCanvasTodosVinculos:{top:0,left:0},sizeCanvasTodosVinculos:{width:0,height:0},posicionCanvasActivo:{x:0,y:0}}},props:{nodoSeleccionado:{type:Object,default:function(){return{id:"-1",vinculos:[]}}},nodoRelevante:[Object],todosNodos:Array,centroVista:Object,actualizar:Number},methods:{crearImagenTodosVinculos:function(){var o=this;if(!(this.todosNodos.length<=1)){this.lapiz=this.$refs.canvasTodosVinculos.getContext("2d");var e={};e.top=this.todosNodos.reduce((function(o,e){return e.coordsManuales.y>o?e.coordsManuales.y:o}),0),e.bot=this.todosNodos.reduce((function(o,e){return e.coordsManuales.y<o?e.coordsManuales.y:o}),0),e.left=this.todosNodos.reduce((function(o,e){return e.coordsManuales.x<o?e.coordsManuales.x:o}),0),e.right=this.todosNodos.reduce((function(o,e){return e.coordsManuales.x>o?e.coordsManuales.x:o}),0);var t=parseInt(e.right-e.left),i=parseInt(e.top-e.bot);(t>5e3||i>5e3)&&console.log("ALERTA. Diagrama demasiado grande"),this.$set(this.posicionCanvasTodosVinculos,"y",e.bot),this.$set(this.posicionCanvasTodosVinculos,"x",e.left),this.posicionCanvasActivo=this.posicionCanvasTodosVinculos,this.$set(this.sizeCanvasTodosVinculos,"width",t+"px"),this.$set(this.sizeCanvasTodosVinculos,"height",i+"px"),this.lapiz.canvas.width=t,this.lapiz.canvas.height=i,this.$refs.canvasVinculosSeleccionado.width=t,this.$refs.canvasVinculosSeleccionado.height=i,this.lapiz.lineWidth=1,this.lapiz.clearRect(0,0,t,i),this.lapiz.beginPath(),this.lapiz.strokeStyle="#b3b3b3";var a,n=Object(J["a"])(this.todosNodos);try{for(n.s();!(a=n.n()).done;){var r,s=a.value,c=Object(J["a"])(s.vinculos);try{var d=function(){var e=r.value;"source"==e.rol&&o.dibujarLineaEntreNodos(s,o.todosNodos.find((function(o){return o.id==e.idRef})))};for(c.s();!(r=c.n()).done;)d()}catch(u){c.e(u)}finally{c.f()}}}catch(u){n.e(u)}finally{n.f()}this.lapiz.stroke()}},crearImagenVinculosSeleccionado:function(){var o=this;if(this.lapiz=this.$refs.canvasVinculosSeleccionado.getContext("2d"),this.lapiz.clearRect(0,0,this.lapiz.canvas.width,this.lapiz.canvas.height),this.todosNodos.some((function(e){return e.id==o.nodoSeleccionado.id}))){this.lapiz.beginPath(),this.lapiz.lineWidth=2,this.lapiz.strokeStyle="#008000";var e,t=Object(J["a"])(this.nodoSeleccionado.vinculos);try{var i=function(){var t=e.value;if(!o.todosNodos.some((function(o){return o.id==t.idRef})))return console.log("ALERTA. Vinculo a ".concat(t.idRef," huerfano")),"continue";if("source"==t.rol){var i=o.todosNodos.find((function(o){return o.id==t.idRef}));o.dibujarLineaEntreNodos(o.nodoSeleccionado,i)}};for(t.s();!(e=t.n()).done;)i()}catch(s){t.e(s)}finally{t.f()}this.lapiz.stroke(),this.lapiz.beginPath(),this.lapiz.strokeStyle="#b80e0e";var a,n=Object(J["a"])(this.nodoSeleccionado.vinculos);try{var r=function(){var e=a.value;if(!o.todosNodos.some((function(o){return o.id==e.idRef})))return console.log("ALERTA. Vinculo a ".concat(e.idRef," huerfano")),"continue";if("target"==e.rol){var t=o.todosNodos.find((function(o){return o.id==e.idRef}));o.dibujarLineaEntreNodos(t,o.nodoSeleccionado)}};for(n.s();!(a=n.n()).done;)r()}catch(s){n.e(s)}finally{n.f()}this.lapiz.stroke()}},dibujarLineaEntreNodos:function(o,e){var t={x:o.coordsManuales.x-this.posicionCanvasActivo.x,y:o.coordsManuales.y-this.posicionCanvasActivo.y},i={x:e.coordsManuales.x-this.posicionCanvasActivo.x,y:e.coordsManuales.y-this.posicionCanvasActivo.y};this.lapiz.moveTo(t.x,t.y),this.lapiz.lineTo(i.x,i.y);var a={x:(i.x+t.x)/2,y:(i.y+t.y)/2},n=7,r=Math.atan((i.y-t.y)/(i.x-t.x));i.y-t.y<0&&i.x-t.x<0&&(r+=Math.PI),i.y-t.y>0&&i.x-t.x<0&&(r+=Math.PI);var s={x:a.x+n*Math.cos(r-3*Math.PI/4),y:a.y+n*Math.sin(r-3*Math.PI/4)},c={x:a.x+n*Math.cos(r+3*Math.PI/4),y:a.y+n*Math.sin(r+3*Math.PI/4)};this.lapiz.moveTo(a.x,a.y),this.lapiz.lineTo(s.x,s.y),this.lapiz.moveTo(a.x,a.y),this.lapiz.lineTo(c.x,c.y)},trazarVinculosDeNodoRecursivamente:function(o,e,t,i){var a=this;t--;var n,r=this.todosNodos.find((function(e){return e.id==o})),s=Object(J["a"])(r.vinculos);try{var c=function(){var o=n.value;if(o.rol!=e)return"continue";var s=a.todosNodos.find((function(e){return e.id==o.idRef}));if(!s)return console.log("ALERTA. idRef del vinculo no estaba entre los nodos"),"continue";i.push(s.id),"target"==e?(a.dibujarLineaEntreNodos(s,r),i.push(s.id)):"source"==e&&a.dibujarLineaEntreNodos(r,s),t>0&&!i.some((function(o){return o==s.id}))&&(i=a.trazarVinculosDeNodoRecursivamente(s.id,e,t,i))};for(s.s();!(n=s.n()).done;)c()}catch(d){s.e(d)}finally{s.f()}return i}},computed:{posicionRelativaCanvasTodosVinculos:function(){var o=this.posicionCanvasTodosVinculos.y-this.centroVista.y,e=this.posicionCanvasTodosVinculos.x-this.centroVista.x;return{top:o+"px",left:e+"px"}},posicionRelativaCanvasVinculosSeleccionado:function(){var o=this.posicionCanvasVinculosSeleccionado.y-this.centroVista.y,e=this.posicionCanvasVinculosSeleccionado.x-this.centroVista.x;return{top:o+"px",left:e+"px"}},"tamaño":function(){return{width:this.sizeDiagrama.right-this.sizeDiagrama.left+"px",height:this.sizeDiagrama.top-this.sizeDiagrama.bot+"px"}}},watch:{todosNodos:function(){console.log("Redibujando lineas"),this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()},nodoSeleccionado:function(){this.crearImagenVinculosSeleccionado()}},mounted:function(){this.montado=!0,this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()}}),ro=no,so=(t("3b64"),Object(p["a"])(ro,io,ao,!1,null,"ae6b44f2",null)),co=so.exports;function uo(){var o=Object(r["a"])(["\n          mutation($idUsuario: ID, $centroVista: CoordsInput) {\n            setCentroVista(idUsuario: $idUsuario, centroVista: $centroVista)\n          }\n        "]);return uo=function(){return o},o}function lo(){var o=Object(r["a"])(["\n            mutation($tipo: String!, $idNodoFrom: ID!, $idNodoTo: ID!) {\n              crearVinculo(\n                tipo: $tipo\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    rol\n                    tipo\n                  }\n                }\n              }\n            }\n          "]);return lo=function(){return o},o}function vo(){var o=Object(r["a"])(["\n            mutation($idNodoFrom: ID!, $idNodoTo: ID!) {\n              eliminarVinculoFromTo(\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    tipo\n                    rol\n                  }\n                }\n              }\n            }\n          "]);return vo=function(){return o},o}function po(){var o=Object(r["a"])(["\n            query($idUsuario: ID!) {\n              publicUsuario(idUsuario: $idUsuario) {\n                id\n                atlas {\n                  centroVista {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return po=function(){return o},o}function mo(){var o=Object(r["a"])(["\n          mutation($infoNodo: NodoConocimientoInput) {\n            crearNodo(infoNodo: $infoNodo) {\n              modificados {\n                nombre\n                id\n                coordsManuales {\n                  x\n                  y\n                }\n                vinculos {\n                  idRef\n                  rol\n                  tipo\n                }\n              }\n            }\n          }\n        "]);return mo=function(){return o},o}function Ao(){var o=Object(r["a"])(["\n            mutation($idNodo: ID!) {\n              eliminarNodo(idNodo: $idNodo)\n            }\n          "]);return Ao=function(){return o},o}function fo(){var o=Object(r["a"])(["\n            mutation($idNodo: String, $coordsManuales: CoordsInput) {\n              setCoordsManuales(\n                idNodo: $idNodo\n                coordsManuales: $coordsManuales\n              ) {\n                modificados {\n                  id\n                  coordsManuales {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return fo=function(){return o},o}function bo(){var o=Object(r["a"])(["\n        query {\n          todosNodos {\n            nombre\n            id\n            coordsManuales {\n              x\n              y\n            }\n            vinculos {\n              idRef\n              rol\n              tipo\n            }\n          }\n        }\n      "]);return bo=function(){return o},o}var ho={components:{NodoConocimiento:to,Canvases:co},name:"AtlasConocimiento",apollo:{todosNodos:{query:c()(bo()),result:function(){this.dibujarVinculosGrises()}}},data:function(){return{todosNodos:[],idNodoSeleccionado:"-1",idNodoMenuCx:"-1",centroVista:{x:0,y:0},actualizarTrazos:0,panningVista:!1,nodosConectadosAlSeleccionado:{listaCompleta:[],listaPorNiveles:[]},profundidadNodosConectadosAlSeleccionado:1,actualizarVinculosGrises:0}},computed:{nodoSeleccionado:function(){var o=this;if(!this.todosNodos)return console.log("NO HAY NODOS"),!1;if(this.todosNodos.some((function(e){return e.id==o.idNodoSeleccionado}))){var e=this.todosNodos.findIndex((function(e){return e.id==o.idNodoSeleccionado}));return this.todosNodos[e]}return{id:"-1",vinculos:[]}},idUsuario:function(){return this.$store.state.usuario.id}},methods:{cambiarCoordsManualesNodo:function(o,e){this.todosNodos[this.todosNodos.findIndex((function(e){return e.id==o}))].coordsManuales=e,this.$apollo.mutate({mutation:c()(fo()),variables:{idNodo:o,coordsManuales:e}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))},eliminarNodo:function(o){console.log("enviando mutacion de eliminar nodo"),this.$apollo.mutate({mutation:c()(Ao()),variables:{idNodo:o}}).then((function(o){console.log("quitando el objeto del array. ".concat(o))}))},crearNodo:function(o){console.log("enviando una mutación de crear nodo");var e=document.getElementById("contenedorNodos").getBoundingClientRect(),t=Math.round(o.clientY-e.top+this.centroVista.y),i=Math.round(o.clientX-e.left+this.centroVista.x),a={coordsManuales:{x:i,y:t}};console.log("en las coordenadas: ".concat(i,", ").concat(t," ")),this.$apollo.mutate({mutation:c()(mo()),variables:{infoNodo:a}})},descargarCentroVista:function(){var o=this;this.$apollo.query({query:c()(po()),variables:{idUsuario:this.$store.state.usuario.id},fetchPolicy:"network-only"}).then((function(e){var t=e.data;console.log("respuesta: ".concat(JSON.stringify(t)," "));var i=t.usuario.atlas.centroVista;o.$set(o.centroVista,"x",i.x),o.$set(o.centroVista,"y",i.y)})).catch((function(o){console.log("error fetching centro vista: ".concat(o))}))},panVista:function(o){this.panningVista&&(o.preventDefault(),this.$set(this.centroVista,"x",this.centroVista.x-o.movementX),this.$set(this.centroVista,"y",this.centroVista.y-o.movementY),this.actualizarTrazos++)},seleccionNodo:function(o){var e=this;if(this.idNodoSeleccionado=o.id,!this.todosNodos.some((function(o){return o.id==e.idNodoSeleccionado})))return null;var t=parseInt(this.profundidadNodosConectadosAlSeleccionado),i=[],a=this.idNodoSeleccionado,n=[a];if(t>0){for(var r=0;r<t;r++)i[r]=[];var s=this.encontrarNodosConectadosRecursivamente(a,["target","source"],["continuacion"],n,i,0,t);n=s.listaCompleta,i=s.listaPorNiveles}this.nodosConectadosAlSeleccionado={listaCompleta:n,listaPorNiveles:i}},eliminarVinculo:function(o){var e=this;return Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("eliminando un vinculo entre ".concat(o.idNodoFrom," y ").concat(o.idNodoTo," ")),t.next=3,e.$apollo.mutate({mutation:c()(vo()),variables:{idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 3:case"end":return t.stop()}}),t)})))()},dibujarVinculosGrises:function(){this.actualizarVinculosGrises++},crearVinculo:function(o){var e=this;return Object(Z["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("creando un vinculo ".concat(JSON.stringify(o)," ")),t.next=3,e.$apollo.mutate({mutation:c()(lo()),variables:{tipo:"continuacion",idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 3:case"end":return t.stop()}}),t)})))()},encontrarNodosConectadosRecursivamente:function(o,e,t,i,a,n,r){var s,c=this,d=this.todosNodos.find((function(e){return e.id==o})),u=Object(J["a"])(d.vinculos);try{var l=function(){var o=s.value;if(c.todosNodos.some((function(e){return e.id==o.idRef}))&&e.some((function(e){return e==o.rol}))&&t.some((function(e){return e==o.tipo}))&&!i.some((function(e){return e==o.idRef}))){if(a[n].push(o.idRef),i.push(o.idRef),n+1<r){var d=c.encontrarNodosConectadosRecursivamente(o.idRef,e,t,i,a,n+1,r);i=d.listaCompleta,a=d.listaPorNiveles}}else console.log("No")};for(u.s();!(s=u.n()).done;)l()}catch(v){u.e(v)}finally{u.f()}return{listaCompleta:i,listaPorNiveles:a}}},watch:{nodoSeleccionado:function(){this.actualizarTrazos++},route:function(o){console.log("cambio de navegación a ".concat(o.path))}},mounted:function(){this.$store.state.usuario.centroVista&&this.descargarCentroVista()},beforeRouteLeave:function(o,e,t){console.log("enviando nuevo centroVista para el usuario ".concat(this.$store.state.usuario.id,". Centro vista: ").concat(JSON.stringify(this.centroVista))),this.$apollo.mutate({mutation:c()(uo()),variables:{idUsuario:this.$store.state.usuario.id,centroVista:this.centroVista}}).then((function(){t()})).catch((function(o){console.log("error: ".concat(o)),t()}))}},go=ho,yo=(t("586b"),Object(p["a"])(go,F,q,!1,null,"487b3564",null)),Po=yo.exports,No=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"loginArea"}},[t("div",{attrs:{id:"ventanaCentral"}},[t("form",[t("p",{attrs:{id:"tituloVentana"}},[o._v("Iniciar sesion")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.username,expression:"username"}],staticClass:"inputs",style:o.colorUsername,attrs:{type:"text",name:"username",placeholder:"Nombre de usuario"},domProps:{value:o.username},on:{input:[function(e){e.target.composing||(o.username=e.target.value)},function(e){o.loginFail=!1}]}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.password,expression:"password"}],staticClass:"inputs",style:o.colorPassword,attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:o.password},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.iniciarSesion(e)},input:[function(e){e.target.composing||(o.password=e.target.value)},function(e){o.loginFail=!1}]}}),t("br"),t("br"),t("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoDatos,expression:"enviandoDatos"}],attrs:{texto:"Conectando..."}}),t("button",{staticClass:"botonEnviar",class:{loginFail:o.loginFail,deshabilitado:o.enviandoDatos},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),o.iniciarSesion(e)}}},[o._v(" "+o._s(o.loginFail?o.loginFailMsg:"Conectarse")+" ")])],1)])])},Eo=[],Co=t("bc3a"),Do=t.n(Co),wo=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"loading"},[t("span",{staticClass:"textoLoading"},[o._v(o._s(o.texto))])])},xo=[],jo={name:"Loading",props:{texto:{type:String,default:"Cargando..."}}},Ro=jo,Oo=(t("fc23"),Object(p["a"])(Ro,wo,xo,!1,null,"5ff6e04b",null)),So=Oo.exports;function $o(){var o=Object(r["a"])(["\n                  query {\n                    yo {\n                      id\n                      idGrupoEstudiantil\n                      nombreGrupoEstudiantil\n                      nombres\n                      apellidos\n                    }\n                  }\n                "]);return $o=function(){return o},o}var To=/[^a-zA-Z0-9_ñÑ]/g,ko=/[^a-zA-Z0-9ñÑ*@_-]/g,Io=6,Go=4,Uo={name:"LoginArea",components:{Loading:So},data:function(){return{username:"",password:"",loginFail:!1,loginFailMsg:"",enviandoDatos:!1}},computed:{usuarioConectado:function(){return null!=this.$store.state.usuario.username},nombreUsuario:function(){return this.$store.state.usuario.username},colorUsername:function(){return{color:To.test(this.username)||this.username.length<Go?"red":"black"}},colorPassword:function(){return{color:ko.test(this.password)||this.password.length<Io?"red":"black"}}},methods:{iniciarSesion:function(){var o=this;To.test(this.username)||ko.test(this.password)||this.password.length<Io||this.username.length<Go||(this.enviandoDatos=!0,Do.a.post(this.serverUrl+"/api/usuarios/login",{username:this.username,password:this.password}).then((function(e){e.data.username==o.username&&(o.$store.commit("logearse",e.data.token),o.$apollo.query({query:c()($o()),fetchPolicy:"network-only"}).then((function(e){var t=e.data.yo;o.enviandoDatos=!1,o.$store.commit("setDatosUsuario",t),o.$router.push("/miperfil")})).catch((function(e){o.enviandoDatos=!1,console.log("Error descargando datos gql. E: ".concat(e))})))})).catch((function(e){if(o.enviandoDatos=!1,o.$store.commit("deslogearse"),e.response.data.error&&"badLogin"==e.response.data.error)return o.loginFail=!0,void(o.loginFailMsg="Datos inválidos");e.response.data.msjUsuario&&alert(e.response.data.msjUsuario),console.log("error: ".concat(e))})))},deslogearse:function(){this.$store.commit("deslogearse")}}},_o=Uo,zo=(t("1e55"),Object(p["a"])(_o,No,Eo,!1,null,"013803c0",null)),Vo=zo.exports,Mo=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"perfilPersonal"},[i("div",{attrs:{id:"categorias"}},[i("div",{staticClass:"categorias",on:{click:function(e){o.seccion="categorias"}}},[o._v(" Datos personales ")]),i("div",{staticClass:"categorias",on:{click:function(e){o.seccion="contacto"}}},[o._v(" Información de contacto ")]),i("div",{staticClass:"categorias",on:{click:function(e){o.seccion="conocimientos"}}},[o._v(" Conocimientos ")])]),i("div",{attrs:{id:"contenidos"}},[i("div",{staticClass:"contenidos editables",attrs:{id:"datosPersonales"}},[i("img",{staticClass:"botonEditar hoverGris",attrs:{src:t("559e")},on:{click:function(e){o.editandoDatosPersonales=!o.editandoDatosPersonales}}}),i("div",{attrs:{id:"fotografia"}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.subiendoNuevaFotoPersonal,expression:"subiendoNuevaFotoPersonal"}],attrs:{texto:"Enviando fotografía..."}}),i("img",{class:{deshabilitada:o.subiendoNuevaFotoPersonal},attrs:{id:"laFotografia",title:"Cambiar fotografia",src:o.serverUrl+"/api/usuarios/fotografias/"+o.yo.id+"?"+o.refreshImg,alt:""},on:{click:o.seleccionarFoto}}),i("input",{ref:"inputNuevaFoto",attrs:{type:"file",id:"inputNuevaFoto"},on:{change:o.subirNuevaFoto}})],1),i("div",{attrs:{id:"textosDatosPersonales"}},[o.editandoDatosPersonales?[i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.nombres,expression:"edicionDatosPersonales.nombres"}],attrs:{disabled:"",type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.edicionDatosPersonales.nombres},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"nombres",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.apellidos,expression:"edicionDatosPersonales.apellidos"}],attrs:{disabled:"",type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.edicionDatosPersonales.apellidos},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"apellidos",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.fechaNacimiento,expression:"edicionDatosPersonales.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.edicionDatosPersonales.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"fechaNacimiento",e.target.value)}}}),i("br"),i("button",{on:{click:o.enviarDatosPersonales}},[o._v("Enviar")])]:[i("div",{staticClass:"nombreApellido",attrs:{id:"miNombre"}},[o._v(o._s(o.yo.nombres))]),i("div",{staticClass:"nombreApellido",attrs:{id:"miApellido"}},[o._v(o._s(o.yo.apellidos))]),i("br"),i("div",{attrs:{id:"miEdad"}},[o._v(o._s(o.yo.edad)+" años")])]],2)]),i("div",{staticClass:"contenidos editables",attrs:{id:"informacionContacto"}},[i("img",{staticClass:"botonEditar",attrs:{src:t("559e")},on:{click:function(e){o.editandoDatosContacto=!o.editandoDatosContacto}}}),o.editandoDatosContacto?[i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.lugarResidencia,expression:"edicionDatosContacto.lugarResidencia"}],attrs:{type:"text",placeholder:"Residencia"},domProps:{value:o.edicionDatosContacto.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"lugarResidencia",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.email,expression:"edicionDatosContacto.email"}],attrs:{type:"email",placeholder:"Correo electronico"},domProps:{value:o.edicionDatosContacto.email},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"email",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.numeroTel,expression:"edicionDatosContacto.numeroTel"}],attrs:{type:"text",placeholder:"Número telefónico"},domProps:{value:o.edicionDatosContacto.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"numeroTel",e.target.value)}}}),i("br"),i("button",{on:{click:o.enviarDatosContacto}},[o._v("Enviar")])]:[i("div",{staticClass:"infoContacto",attrs:{id:"miResidencia"}},[o._v("Residencia: "+o._s(o.yo.lugarResidencia))]),i("div",{staticClass:"infoContacto",attrs:{id:"miEmail"}},[o._v("Correo electrónico: "+o._s(o.yo.email))]),i("div",{staticClass:"infoContacto",attrs:{id:"miTelefono"}},[o._v("Mi número telefónico: "+o._s(o.yo.numeroTel))])]],2),o.usuarioLogeado?i("div",{staticClass:"contenidos editables",attrs:{id:"informacionPassword"}},[i("div",{staticClass:"zonaBotonEditar"},[o._v(" Cambiar contraseña "),i("img",{staticClass:"botonEditar",attrs:{src:t("559e"),alt:"Editar",id:"bEditarPassword",title:o.editandoDatosPassword?"Volver":"Cambiar contraseña"},on:{click:function(e){o.editandoDatosPassword=!o.editandoDatosPassword,o.resetearCamposPassword}}})]),o.editandoDatosPassword?i("form",{attrs:{id:"zonaInputsNuevoPassword"}},[i("label",{attrs:{for:"viejoPassword"}},[o._v("Escribe tu contraseña actual: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.viejoPassword,expression:"edicionDatosPassword.viejoPassword"}],staticClass:"inputsNuevoPassword",attrs:{name:"viejoPassword",type:"password",placeholder:"Contraseña actual"},domProps:{value:o.edicionDatosPassword.viejoPassword},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPassword,"viejoPassword",e.target.value)}}}),i("label",{attrs:{for:"nuevoPassword"}},[o._v("Escribe tu nueva contraseña: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.nuevoPassword,expression:"edicionDatosPassword.nuevoPassword"}],staticClass:"inputsNuevoPassword",attrs:{name:"nuevoPassword",type:"password",placeholder:"Nueva contraseña"},domProps:{value:o.edicionDatosPassword.nuevoPassword},on:{input:[function(e){e.target.composing||o.$set(o.edicionDatosPassword,"nuevoPassword",e.target.value)},o.compararNuevoPassConfirmacion]}}),i("label",{attrs:{for:"nuevoPasswordConfirmacion"}},[o._v("Confirma tu nueva contraseña: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.nuevoPasswordConfirmacion,expression:"edicionDatosPassword.nuevoPasswordConfirmacion"}],staticClass:"inputsNuevoPassword",class:{enRojo:!o.nuevoPasswordConfirmado},attrs:{name:"nuevoPasswordConfirmacion",type:"password",placeholder:"Nueva contraseña"},domProps:{value:o.edicionDatosPassword.nuevoPasswordConfirmacion},on:{input:[function(e){e.target.composing||o.$set(o.edicionDatosPassword,"nuevoPasswordConfirmacion",e.target.value)},o.compararNuevoPassConfirmacion]}}),i("button",{attrs:{disabled:!o.nuevoPasswordConfirmado},on:{click:function(e){return e.preventDefault(),o.enviarDatosPassword(e)}}},[o._v(" Enviar ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.resultadoEdicionPassword,expression:"resultadoEdicionPassword"}],attrs:{id:"resultadoEdicionPassword"}},[o._v(" "+o._s(this.resultadoEdicionPassword)+" ")])]):void 0,i("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoDatosPassword,expression:"enviandoDatosPassword"}],attrs:{texto:"Enviando..."}})],2):o._e()])])},Bo=[],Lo=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,Qo=/[^ a-zA-ZÀ-žñÑ]/g,Fo=/[^0-9+-]/g,qo=/\S+@\S+\.\S+/,Jo=/[12][90][0-9][0-9]-[01][0-9]-[0-3][0-9]/,Zo=/[^a-zA-Z0-9ñÑ*@_-]/g,Ho=function(o){var e=[];for(var t in o){if(!o[t])return e.push("Falta ".concat(t)),e;o[t]=o[t].trim(),"nombres"==t?(o.nombres.length<2&&e.push("Tu nombre es muy corto"),Qo.test(o.nombres)&&e.push("Tu nombre contiene caracteres no permitidos")):"apellidos"==t?(o.apellidos.length<2&&e.push("Tu apellido es muy corto"),Qo.test(o.apellidos)&&e.push("Tu apellido contiene caracteres no permitidos")):"fechaNacimiento"==t?Jo.test(o.fechaNacimiento)||e.push("Tu fecha de nacimiento es incorrecta"):"email"==t?o.email.length>0&&!qo.test(o.email)&&e.push("Tu e-mail no es válido"):"numeroTel"==t?Fo.test(o.numeroTel)&&e.push("Tu número telefónico no es válido"):"lugarResidencia"==t?(o.lugarResidencia.length<2&&e.push("Tu lugar de residencia es muy corto"),Lo.test(o.lugarResidencia)&&e.push("Tu lugar de residencia contiene caracteres no permitidos")):"username"==t?(o.username.length<4&&e.push("Tu nombre de usuario es muy corto"),Lo.test(o.username)&&e.push("Tu nombre de usuario contiene caracteres no permitidos")):"password"==t?((o.password.length<6||o.password.length>32)&&e.push("Tu contraseña debe contener entre 6 y 32 caracteres"),Zo.test(o.password)&&e.push("Tu password contiene caracteres no permitidos")):e.push("El dato ".concat(t," no tenía lógica de validación. Informa al administrador del sistema por favor"))}return e};function Ko(){var o=Object(r["a"])(["\n              mutation($nuevosDatos: DatosEditablesUsuario) {\n                editarDatosUsuario(nuevosDatos: $nuevosDatos) {\n                  id\n                  ...DatosContacto\n                }\n              }\n              ","\n            "]);return Ko=function(){return o},o}function Xo(){var o=Object(r["a"])(["\n              mutation($nuevosDatos: DatosEditablesUsuario) {\n                editarDatosUsuario(nuevosDatos: $nuevosDatos) {\n                  id\n                  ...DatosPersonales\n                }\n              }\n              ","\n            "]);return Xo=function(){return o},o}function Yo(){var o=Object(r["a"])(["\n        query {\n          yo {\n            id\n            nombres\n            apellidos\n            fechaNacimiento\n            edad\n            lugarResidencia\n            numeroTel\n            email\n            username\n            idGrupoEstudiantil\n            nombreGrupoEstudiantil\n            nodosConocimiento {\n              nodoConocimiento {\n                id\n                nombre\n              }\n            }\n          }\n        }\n      "]);return Yo=function(){return o},o}function Wo(){var o=Object(r["a"])(["\n  fragment DatosContacto on Usuario {\n    lugarResidencia\n    email\n    numeroTel\n  }\n"]);return Wo=function(){return o},o}function oe(){var o=Object(r["a"])(["\n  fragment DatosPersonales on Usuario {\n    nombres\n    apellidos\n    fechaNacimiento\n    edad\n  }\n"]);return oe=function(){return o},o}var ee=c()(oe()),te=c()(Wo()),ie={name:"PerfilPersonal",components:{Loading:So},apollo:{yo:{query:c()(Yo()),fetchPolicy:"network-only"}},data:function(){return{yo:{id:null,nombres:null,apellidos:null,fechaNacimiento:null,email:null,edad:null,fotografia:null,lugarResidencia:null,username:null,misNodos:[],grupoEstudiantil:""},edicionDatosPassword:{viejoPassword:"",nuevoPassword:"",nuevoPasswordConfirmacion:""},subiendoNuevaFotoPersonal:!1,editandoDatosPersonales:!1,editandoDatosContacto:!1,editandoDatosPassword:!1,nuevoPasswordConfirmado:!1,enviandoDatosPassword:!1,resultadoEdicionPassword:null,refreshImg:0}},computed:{edicionDatosPersonales:function(){return{nombres:this.yo.nombres,apellidos:this.yo.apellidos,fechaNacimiento:this.yo.fechaNacimiento.substr(0,10)}},edicionDatosContacto:function(){return{lugarResidencia:this.yo.lugarResidencia,email:this.yo.email,numeroTel:this.yo.numeroTel}}},methods:{subirNuevaFoto:function(){var o=this,e=this.$refs.inputNuevaFoto,t=new FormData,i=e.files[0],a=i["type"],n=["image/jpeg","image/png"];n.includes(a)?(t.append("nuevaFoto",i),o.subiendoNuevaFotoPersonal=!0,Do()({method:"post",url:this.serverUrl+"/api/usuarios/updateFoto",data:t,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var t=e.data;o.subiendoNuevaFotoPersonal=!1,console.log("respuesta: ".concat(JSON.stringify(t))),"ok"==t.resultado&&o.refreshImg++})).catch((function(e){o.subiendoNuevaFotoPersonal=!1,console.log("Error subiendo foto. E: ".concat(e))}))):console.log("Archivo ilegal")},enviarDatosPersonales:function(){var o=this;console.log("Enviando nuevos datos personales");var e=Ho(this.edicionDatosPersonales);e.length<1?this.$apollo.mutate({mutation:c()(Xo(),ee),variables:{nuevosDatos:this.edicionDatosPersonales}}).then((function(){console.log("Datos correctamente editados"),o.editandoDatosPersonales=!1})).catch((function(o){console.log("Error: ".concat(o))})):console.log("Errores: ".concat(e))},enviarDatosContacto:function(){var o=new Object;for(var e in this.edicionDatosContacto)console.log("".concat(e," vale ").concat(this.edicionDatosContacto[e])),null!=this.edicionDatosContacto[e]&&void 0!=this.edicionDatosContacto[e]&&""!=this.edicionDatosContacto[e]&&(o[e]=this.edicionDatosContacto[e]);var t=this;console.log("Enviando nuevos datos contacto: ".concat(JSON.stringify(o)));var i=Ho(o);i.length<1?this.$apollo.mutate({mutation:c()(Ko(),te),variables:{nuevosDatos:o}}).then((function(){console.log("Datos correctamente editados"),t.editandoDatosContacto=!1})).catch((function(o){console.log("Error: ".concat(o))})):console.log("Errores: ".concat(i))},resetearCamposPassword:function(){this.$set(this.edicionDatosPassword,"viejoPassword",""),this.$set(this.edicionDatosPassword,"nuevoPassword",""),this.$set(this.edicionDatosPassword,"nuevoPasswordConfirmacion",""),this.resultadoEdicionPassword=null},enviarDatosPassword:function(){var o=this;if(console.log("Iniciando envio de nuevo password"),this.nuevoPasswordConfirmado){var e=this,t=this.edicionDatosPassword;for(var i in this.edicionDatosPassword)if(!this.edicionDatosPassword[i])return void alert("Te faltó introducir un campo");if(t.nuevoPassword==t.nuevoPasswordConfirmacion){this.resultadoEdicionPassword=null;var a=Ho({password:t.viejoPassword}).concat(Ho({password:t.nuevoPassword}));a.length>0&&alert(a[0]),e.enviandoDatosPassword=!0,Do()({method:"post",url:this.serverUrl+"/api/usuarios/updatePassword",data:t,headers:{Authorization:"Bearer "+this.$store.state.token}}).then((function(t){var i=t.data;e.enviandoDatosPassword=!1,console.log("Contraseña cambiada"),"ok"==i.resultado&&(o.resetearCamposPassword(),i.msjUsuario&&(o.resultadoEdicionPassword=i.msjUsuario))})).catch((function(t){e.enviandoDatosPassword=!1,console.log("Error subiendo nuevo password. E: ".concat(t)),t.response&&(o.resultadoEdicionPassword=t.response.msjUsuario)}))}else alert("Debes confirmar correctamente la nueva contraseña")}else console.log("Nuevo password no confirmado")},compararNuevoPassConfirmacion:function(){this.edicionDatosPassword.nuevoPassword==this.edicionDatosPassword.nuevoPasswordConfirmacion?this.nuevoPasswordConfirmado=!0:this.nuevoPasswordConfirmado=!1},seleccionarFoto:function(){this.$refs.inputNuevaFoto.click()}}},ae=ie,ne=(t("7972"),Object(p["a"])(ae,Mo,Bo,!1,null,"73687004",null)),re=ne.exports,se=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"visorNodoConocimiento"}},[t("div",{attrs:{id:"layout"}},[t("div",{attrs:{id:"barraLateral"}}),t("iframe",{attrs:{id:"visor",src:o.direccionNodo}})])])},ce=[],de={name:"VisorNodoConocimiento",computed:{direccionNodo:function(){return this.serverUrl+"/assetsAtlas/contenidosNodos/"+this.$route.params.idNodo}},mounted:function(){console.log("data server addres:: ".concat(this.serverUrl))}},ue=de,le=(t("8f8b"),Object(p["a"])(ue,se,ce,!1,null,"7132679b",null)),ve=le.exports,pe=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"proyectos"}},[t("center",[t("h3",[o._v("Proyectos")])]),t("div",{attrs:{id:"controles"}},[o.username?t("div",{staticClass:"controles hoverGris",attrs:{id:"crearProyecto"},on:{click:o.crearNuevoProyecto}},[o._v(" Crear nuevo proyecto ")]):o._e()]),t("div",{attrs:{id:"listaProyectos"}},o._l(o.proyectos,(function(e){return t("icono-proyecto",{key:e.id,attrs:{esteProyecto:e},on:{cambioDeNombre:o.cambiarNombreProyecto}})})),1)],1)},me=[],Ae=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"iconoProyecto",class:{proyectoPropio:o.usuarioResponsableProyecto},on:{dblclick:o.navegarAlProyecto}},[t("p",{ref:"nombre",attrs:{id:"nombre",contenteditable:o.permisosEdicion},on:{blur:o.guardarNombre,input:o.setNombreEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurNombre(e)},dblclick:function(o){o.stopPropagation()}}},[o._v(" "+o._s(o.esteProyecto.nombre)+" ")])])},fe=[],be=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,he={name:"IconoProyecto",props:{esteProyecto:Object},data:function(){return{nombreEditandose:!1}},computed:{usuario:function(){return this.$store.state.usuario},usuarioResponsableProyecto:function(){var o=this;return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.some((function(e){return e.id==o.usuario.id}))},permisosEdicion:function(){return!(!this.usuarioResponsableProyecto&&"superadministrador"!=this.$store.state.usuario.permisos)}},methods:{guardarNombre:function(){console.log("guardando nombre");var o=this.$refs.nombre.innerText.trim(),e=this.esteProyecto.id;this.nombreEditandose&&o!=this.esteProyecto.nombre&&(console.log("guardando nombres"),o=o.replace(be,""),o=o.replace(/\s\s+/g," "),this.$emit("cambioDeNombre",{idProyecto:e,nuevoNombre:o}),this.nombreEditandose=!1)},setNombreEditandose:function(){this.esteProyecto.nombre!=this.$refs.nombre.innerText.trim()?this.nombreEditandose=!0:this.nombreEditandose=!1},blurNombre:function(){this.$refs.nombre.blur()},navegarAlProyecto:function(){this.$router.push("/proyecto/"+this.esteProyecto.id)}}},ge=he,ye=(t("3b9c"),Object(p["a"])(ge,Ae,fe,!1,null,"264440b8",null)),Pe=ye.exports;function Ne(){var o=Object(r["a"])(["\n          mutation{\n            crearProyecto{\n              id\n              nombre\n              responsables{\n                username\n              }\n            }\n          }\n        "]);return Ne=function(){return o},o}function Ee(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!, $nuevoNombre: String!) {\n              editarNombreProyecto(idProyecto: $idProyecto, nuevoNombre: $nuevoNombre){\n                  id\n                  nombre\n              }                               \n            }\n          "]);return Ee=function(){return o},o}function Ce(){var o=Object(r["a"])(["\n        query {\n          proyectos {\n            id\n            nombre\n            responsables {\n              id\n              username\n            }\n          }\n        }\n      "]);return Ce=function(){return o},o}var De={components:{IconoProyecto:Pe},name:"Proyectos",apollo:{proyectos:{query:c()(Ce()),update:function(o){var e=this,t=o.proyectos;return t.sort((function(o,t){var i=0;return o.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&i--,t.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&i++,i}))}}},data:function(){return{proyectos:[]}},methods:{cambiarNombreProyecto:function(o){var e=o.idProyecto,t=o.nuevoNombre;console.log("cambiando nombre de un proyecto a ".concat(t)),this.$apollo.mutate({mutation:c()(Ee()),variables:{idProyecto:e,nuevoNombre:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))},crearNuevoProyecto:function(){this.$apollo.mutate({mutation:c()(Ne())}).then((function(){})).catch((function(){}))}},computed:{username:function(){return this.$store.state.usuario.username}}},we=De,xe=(t("d78a"),Object(p["a"])(we,pe,me,!1,null,"65f58f60",null)),je=xe.exports,Re=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"proyecto"},[t("div",{attrs:{id:"nombreProyecto"}},[o._v(o._s(o.esteProyecto.nombre))]),t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[t("div",{staticClass:"nombreZona"},[o._v("Responsables")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[1==o.usuarioLogeado&&o.esteProyecto.responsables.length<1?t("div",{staticClass:"controlesResponsables hoverGris botonesControles",attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsableProyecto&&!o.usuarioPosibleResponsableProyecto&&o.esteProyecto.responsables.length>0?t("div",{staticClass:"controlesResponsables hoverGris botonesControles",attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsableProyecto&&1!=o.usuarioPosibleResponsableProyecto?o._e():t("div",{staticClass:"controlesResponsables hoverGris botonesControles",on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")])]),t("div",{attrs:{id:"listaResponsables"}},[o._l(o.esteProyecto.responsables,(function(o){return t("icono-persona",{key:o.id,attrs:{estaPersona:o,aceptado:!0}})})),o._l(o.esteProyecto.posiblesResponsables,(function(e){return t("icono-persona",{key:e.id,staticClass:"personaPosibleResponsable",attrs:{estaPersona:e,aceptado:!1},nativeOn:{dblclick:function(t){return t.shiftKey?o.aceptarResponsable(e.id):null}}})}))],2)]),t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaObjetivos"}},[t("div",{staticClass:"nombreZona"},[o._v("Objetivos")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesObjetivos"}},[o.usuarioResponsableProyecto?t("div",{staticClass:"controlesObjetivos botonesControles hoverGris",on:{click:o.crearNuevoObjetivo}},[o._v(" Crear objetivo ")]):o._e()]),t("div",{attrs:{id:"listaObjetivos"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idObjetivoSeleccionado=null}}},o._l(o.esteProyecto.objetivos,(function(e){return t("iconoObjetivo",{key:e.id,attrs:{esteObjetivo:e,idObjetivoSeleccionado:o.idObjetivoSeleccionado,permisosEdicion:o.permisosEdicion},on:{eliminandose:o.eliminarObjetivo,cambiandoNombre:o.cambiarNombreObjetivo,cambiandoDescripcion:o.cambiarDescripcionObjetivo},nativeOn:{click:function(t){o.idObjetivoSeleccionado=e.id}}})})),1)]),t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaTrabajos"}},[t("div",{staticClass:"nombreZona"},[o._v("Trabajos:")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesTrabajos"}},[o.usuarioResponsableProyecto?t("div",{staticClass:"controlesTrabajos hoverGris botonesControles",on:{click:o.crearNuevoTrabajo}},[o._v(" Crear trabajo ")]):o._e()]),t("div",{attrs:{id:"listaTrabajos"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idTrabajoSeleccionado=null}}},o._l(o.esteProyecto.trabajos,(function(e){return t("iconoTrabajo",{key:e.id,class:{opacar:null!=o.idTrabajoSeleccionado&&o.idTrabajoSeleccionado!=e.id},attrs:{esteTrabajo:e,idEsteProyecto:o.esteProyecto.id,idTrabajoSeleccionado:o.idTrabajoSeleccionado,permisosEdicion:o.permisosEdicion,usuarioLogeado:o.usuarioLogeado,usuarioResponsableProyecto:o.usuarioResponsableProyecto},on:{eliminandose:o.eliminarTrabajo,cambiandoNombre:o.cambiarNombreTrabajo,cambiandoDescripcion:o.cambiarDescripcionTrabajo},nativeOn:{click:function(t){o.idTrabajoSeleccionado=e.id}}})})),1)])])},Oe=[],Se=(t("a434"),function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"iconoTrabajo",class:{trabajoSeleccionado:o.seleccionado}},[i("div",{ref:"nombre",attrs:{id:"nombre",contenteditable:1==o.permisosEdicion&&1==o.seleccionado},on:{blur:o.guardarNombre,input:o.setNombreEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurNombre(e)}}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),i("img",{attrs:{src:t("e463"),alt:"",id:"imagenIcono"}}),o.seleccionado?[i("div",{attrs:{id:"zonaDescripcion"}},[i("div",{staticClass:"nombreZona"},[o._v("Descripcion")]),i("div",{ref:"descripcion",attrs:{id:"descripcion",contenteditable:1==o.permisosEdicion&&1==o.seleccionado},on:{blur:o.guardarDescripcion,input:o.setDescripcionEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurDescripcion(e)}}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")])]),i("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[i("div",{staticClass:"nombreZona"},[o._v("Responsables")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[1==o.usuarioLogeado&&0==o.usuarioResponsableTrabajo?i("div",{staticClass:"controlesResponsables hoverGris botonesControles",attrs:{id:"botonParticipar"},on:{click:o.asumirComoResponsable}},[o._v(" Participar ")]):o._e(),1==o.usuarioResponsableTrabajo?i("div",{staticClass:"controlesResponsables hoverGris botonesControles",on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]):o._e()]),i("div",{attrs:{id:"listaResponsables"}},o._l(o.esteTrabajo.responsables,(function(o){return i("icono-persona",{key:o.id,attrs:{estaPersona:o,aceptado:!0}})})),1)]),i("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaNodosConocimiento"}},[i("div",{staticClass:"nombreZona"},[o._v("Nodos de conocimiento involucrados")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesNodosConocimiento"}},[1==o.usuarioResponsableProyecto?i("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Añadir ")]):o._e(),1==o.usuarioResponsableProyecto&&null!=o.idNodoSeleccionado&&o.esteTrabajo.nodosConocimiento.some((function(e){return e.id==o.idNodoSeleccionado}))?i("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Remover ")]):o._e()]),i("div",{attrs:{id:"listaNodosConocimiento"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idNodoSeleccionado=null}}},[o._l(o.esteTrabajo.nodosConocimiento,(function(e){return i("icono-nodo-conocimiento",{key:e.id,attrs:{esteNodo:e},nativeOn:{click:function(t){o.idNodoSeleccionado=e.id}}})})),i("buscador-nodos-conocimiento")],2)]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{id:"controlesTrabajo"}},[1==o.usuarioResponsableProyecto?i("div",{staticClass:"controlesTrabajo hoverGris",on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])]:o._e()],2)}),$e=[];function Te(){var o=Object(r["a"])(["\nfragment fragActividad on ActividadGrupoEstudiantil {\n  id\n  nombre\n  fechaUpload\n  hayGuia\n  creador {\n    ...fragResponsables\n  }\n  desarrollos {\n    ...fragDesarrollo \n  }\n}\n","\n"]);return Te=function(){return o},o}function ke(){var o=Object(r["a"])(["\nfragment fragDesarrollo on DesarrolloActividadGrupoEstudiantil{\n  id\n    estado\n    leidoPorProfe\n    estudiante {\n      ...fragResponsables\n    }\n    participaciones {\n      ...fragParticipacion\n    }\n}\n","\n"]);return ke=function(){return o},o}function Ie(){var o=Object(r["a"])(["\n  fragment fragParticipacion on ParticipacionActividadGrupoEstudiantil{\n    id\n      fechaUpload\n      archivo {\n        extension\n        nombre\n        accesible,        \n      }\n      comentario\n      autor {\n        ...fragResponsables\n      }\n  }\n  ","\n"]);return Ie=function(){return o},o}function Ge(){var o=Object(r["a"])(["\nfragment fragResponsables on PublicUsuario {\n  id\n  username\n  nombres\n  apellidos\n  email\n  numeroTel\n  lugarResidencia\n}\n"]);return Ge=function(){return o},o}var Ue=c()(Ge()),_e=c()(Ie(),Ue),ze=c()(ke(),_e),Ve=c()(Te(),ze),Me=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"iconoPersona",class:{yo:o.soyYo,seleccionado:o.seleccionado}},[t("img",{directives:[{name:"show",rawName:"v-show",value:o.fotografiaEnabled,expression:"fotografiaEnabled"}],staticClass:"fotografia",attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaPersona.id,alt:""},on:{load:function(e){o.fotografiaEnabled=!0}}}),t("div",{attrs:{id:"contenedorAlertas"}},[o._t("alertas")],2),t("div",{staticClass:"nombres",class:{nombreSeleccionado:o.seleccionado}},[o._v(" "+o._s(o.estaPersona.nombres)+" ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:o.menuContextual,expression:"menuContextual"}],attrs:{id:"menuCxPersona"}},[t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(o._s(o.estaPersona.id))]),o.usuarioSuperadministrador?t("div",{staticClass:"botonMenuCx"},[o._v(o._s(o.estaPersona.username))]):o._e(),o._l(o.estaPersona.permisos,(function(e,i){return t("div",{key:i,staticClass:"infoMenuCx"},[o._v(" "+o._s(e)+" ")])})),t("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoPermiso,expression:"nuevoPermiso"}],attrs:{type:"text",placeholder:"Nuevo permiso"},domProps:{value:o.nuevoPermiso},on:{input:function(e){e.target.composing||(o.nuevoPermiso=e.target.value)}}}),t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.addPermisos(e)}}},[o._v("Dar permiso")]),o._l(o.opcionesMenuCx,(function(e,i){return t("div",{key:i,staticClass:"botonMenuCx",on:{click:function(t){return o.$emit(e.evento)}}},[o._v(" "+o._s(e.textoVisible)+" ")])}))],2)])},Be=[];function Le(){var o=Object(r["a"])(["\n            mutation($nuevoPermiso: String!, $idUsuario: ID!) {\n              addPermisoUsuario(\n                nuevoPermiso: $nuevoPermiso\n                idUsuario: $idUsuario\n              ) {\n                id\n                permisos\n              }\n            }\n          "]);return Le=function(){return o},o}var Qe={name:"IconoPersona",data:function(){return{nuevoPermiso:null,mounted:!1,fotografiaEnabled:!1}},props:{estaPersona:{type:Object,default:function(){return{id:"-1"}}},aceptado:Boolean,seleccionado:Boolean,menuContextual:Boolean,opcionesMenuCx:{type:Array}},computed:{soyYo:function(){return!!(this.mounted&&this.estaPersona&&this.$store.state.usuario)&&this.$store.state.usuario.id==this.estaPersona.id}},methods:{addPermisos:function(){console.log("enviando ".concat(this.nuevoPermiso," para el usuario con id ").concat(this.estaPersona.id)),this.$apollo.mutate({mutation:c()(Le()),variables:{nuevoPermiso:this.nuevoPermiso,idUsuario:this.estaPersona.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},copiarId:function(o){var e=o.target.innerText.trim(),t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},fotografiaCargada:function(){console.log("Fotografía cargada")}},mounted:function(){this.mounted=!0},beforeRouteUpdate:function(){console.log("Before update")}},Fe=Qe,qe=(t("902a"),Object(p["a"])(Fe,Me,Be,!1,null,"776b5927",null)),Je=qe.exports,Ze=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"buscadorNodosConocimiento"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.palabraBuscada,expression:"palabraBuscada"}],attrs:{type:"text",placeholder:"Buscar"},domProps:{value:o.palabraBuscada},on:{input:function(e){e.target.composing||(o.palabraBuscada=e.target.value)}}}),t("img",{attrs:{id:"imagenTentativa",src:"",alt:""}}),t("div",{staticClass:"opciones"},o._l(o.opciones,(function(e){return t("div",{key:e.id,staticClass:"opcion"},[o._v(" "+o._s(e.nombre)+" ")])})),0)])},He=[];function Ke(){var o=Object(r["a"])(["\n              query($palabrasBuscadas: [String]!) {\n                busquedaAmplia(palabrasBuscadas: $palabrasBuscadas) {\n                  id\n                  nombre\n                  resumen\n                }\n              }\n            "]);return Ke=function(){return o},o}var Xe=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,Ye={name:"BuscadorNodosConocimiento",data:function(){return{palabraBuscada:"",cantidadPalabrasValidas:0,opciones:[]}},watch:{palabraBuscada:function(o){o=o.trim(),o=o.replace(Xe,""),o=o.replace(/\s\s+/g," ");for(var e=o.split(" "),t=[],i=0,a=0;a<e.length;a++)e[a].length>=3&&(t[i]=e[a],i++);this.palabrasValidas=t,this.cantidadPalabrasValidas=t.length,console.log("cantidad palabras validas: ".concat(this.cantidadPalabrasValidas))},cantidadPalabrasValidas:function(o,e){var t=this;o>e&&(console.log("Descargando nuevas opciones"),this.$apollo.query({query:c()(Ke()),variables:{palabrasBuscadas:this.palabrasValidas},fetchPolicy:"network-only"}).then((function(o){var e=o.data.busquedaAmplia;console.log("respuesta: ".concat(JSON.stringify(e))),t.opciones=e})).catch((function(o){console.log("Error: ".concat(o))})))}}},We=Ye,ot=Object(p["a"])(We,Ze,He,!1,null,"0ee434dc",null),et=ot.exports;function tt(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo:ID! $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idProyecto: $idProyecto\n                idTrabajo:$idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }                \n              }\n            }\n            ","\n          "]);return tt=function(){return o},o}function it(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idProyecto: $idProyecto\n                idTrabajo:$idTrabajo\n                idUsuario: $idUsuario                \n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return it=function(){return o},o}var at=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,nt={name:"IconoTrabajo",components:{IconoPersona:Je,BuscadorNodosConocimiento:et},data:function(){return{nombreEditandose:!1,descripcionEditandose:!1,idNodoSeleccionado:null}},props:{esteTrabajo:Object,idEsteProyecto:String,idTrabajoSeleccionado:String,permisosEdicion:Boolean,usuarioResponsableProyecto:Boolean},computed:{seleccionado:function(){return this.idTrabajoSeleccionado==this.esteTrabajo.id},usuarioResponsableTrabajo:function(){var o=this;return!!this.esteTrabajo.responsables.some((function(e){return e.id==o.$store.state.usuario.id}))}},methods:{asumirComoResponsable:function(){console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id," en el proyecto con id ").concat(this.idEsteProyecto)),this.$apollo.mutate({mutation:c()(it(),Ue),variables:{idProyecto:this.idEsteProyecto,idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},abandonarListaResponsables:function(){console.log("Abandonando este trabajo"),this.$apollo.mutate({mutation:c()(tt(),Ue),variables:{idProyecto:this.idEsteProyecto,idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},eliminarse:function(){this.$emit("eliminandose",this.esteTrabajo.id)},setNombreEditandose:function(){this.esteTrabajo.nombre!=this.$refs.nombre.innerText.trim()?this.nombreEditandose=!0:this.nombreEditandose=!1},setDescripcionEditandose:function(){this.descripcionEditandose=!0},blurNombre:function(){this.$refs.nombre.blur()},blurDescripcion:function(){this.$refs.descripcion.blur()},guardarNombre:function(){var o=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.$refs.nombre.innerText.trim(),i=o.esteTrabajo.id,o.nombreEditandose&&t!=o.esteTrabajo.nombre){e.next=4;break}return e.abrupt("return");case 4:t=t.replace(at,""),t=t.replace(/\s\s+/g," "),o.$emit("cambiandoNombre",{idTrabajo:i,nuevoNombre:t});case 7:case"end":return e.stop()}}),e)})))()},guardarDescripcion:function(){var o=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.$refs.descripcion.innerText.trim(),i=o.esteTrabajo.id,o.descripcionEditandose&&t!=o.esteTrabajo.descripcion){e.next=4;break}return e.abrupt("return");case 4:t=t.replace(at,""),t=t.replace(/\s\s+/g," "),o.$emit("cambiandoDescripcion",{idTrabajo:i,nuevaDescripcion:t});case 7:case"end":return e.stop()}}),e)})))()}}},rt=nt,st=(t("9b3c"),Object(p["a"])(rt,Se,$e,!1,null,"692878a4",null)),ct=st.exports,dt=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"iconoObjetivo",class:{objetivoSeleccionado:o.seleccionado}},[i("img",{attrs:{src:t("416c"),alt:"",id:"imagenIcono"}}),i("div",{ref:"nombre",attrs:{id:"nombre",contenteditable:1==o.permisosEdicion&&1==o.seleccionado},on:{blur:o.guardarNombre,input:o.setNombreEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurNombre(e)}}},[o._v(" "+o._s(o.esteObjetivo.nombre)+" ")]),o.seleccionado?i("div",{attrs:{id:"zonaDescripcion"}},[o._v(" Descripcion: "),i("br"),i("div",{ref:"descripcion",attrs:{id:"descripcion",contenteditable:1==o.permisosEdicion&&1==o.seleccionado},on:{blur:o.guardarDescripcion,input:o.setDescripcionEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurDescripcion(e)}}},[o._v(" "+o._s(o.esteObjetivo.descripcion)+" ")])]):o._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{id:"controlesObjetivo"}},[i("div",{staticClass:"controlesObjetivo hoverGris",on:{click:o.eliminarse}},[o._v(" Eliminar ")])])])},ut=[],lt=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,vt=/[^ a-zA-ZÀ-ž0-9_():.,-¡!¿?"'%$]/g,pt={name:"IconoObjetivo",data:function(){return{nombreEditandose:!1,descripcionEditandose:!1}},props:{esteObjetivo:Object,idObjetivoSeleccionado:String,permisosEdicion:Boolean},computed:{seleccionado:function(){return this.idObjetivoSeleccionado==this.esteObjetivo.id}},methods:{eliminarse:function(){console.log("emitiendo evento de elimacion de objetivo"),this.$emit("eliminandose",this.esteObjetivo.id)},setNombreEditandose:function(){this.esteObjetivo.nombre!=this.$refs.nombre.innerText.trim()?this.nombreEditandose=!0:this.nombreEditandose=!1},setDescripcionEditandose:function(){this.descripcionEditandose=!0},blurNombre:function(){this.$refs.nombre.blur()},blurDescripcion:function(){this.$refs.descripcion.blur()},guardarNombre:function(){var o=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.$refs.nombre.innerText.trim(),i=o.esteObjetivo.id,o.nombreEditandose&&t!=o.esteObjetivo.nombre){e.next=4;break}return e.abrupt("return");case 4:t=t.replace(lt,""),t=t.replace(/\s\s+/g," "),o.$emit("cambiandoNombre",{idObjetivo:i,nuevoNombre:t});case 7:case"end":return e.stop()}}),e)})))()},guardarDescripcion:function(){var o=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.$refs.descripcion.innerText.trim(),i=o.esteObjetivo.id,o.descripcionEditandose&&t!=o.esteObjetivo.descripcion){e.next=4;break}return e.abrupt("return");case 4:t=t.replace(vt,""),t=t.replace(/\s\s+/g," "),o.$emit("cambiandoDescripcion",{idObjetivo:i,nuevaDescripcion:t});case 7:case"end":return e.stop()}}),e)})))()}}},mt=pt,At=(t("b2f2"),Object(p["a"])(mt,dt,ut,!1,null,"580ecd28",null)),ft=At.exports;function bt(){var o=Object(r["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevaDescripcion: String!\n            ) {\n              cambiarDescripcionObjetivo(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevaDescripcion: $nuevaDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return bt=function(){return o},o}function ht(){var o=Object(r["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevoNombre: String!\n            ) {\n              cambiarNombreObjetivo(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return ht=function(){return o},o}function gt(){var o=Object(r["a"])(["\n            mutation($idObjetivo: ID!, $idProyecto: ID!) {\n              eliminarObjetivoDeProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n              )\n            }\n          "]);return gt=function(){return o},o}function yt(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!) {\n              crearObjetivoEnProyecto(idProyecto: $idProyecto) {\n                id\n                nombre\n                descripcion\n              }\n            }\n          "]);return yt=function(){return o},o}function Pt(){var o=Object(r["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevaDescripcion: String!\n            ) {\n              cambiarDescripcionTrabajo(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevaDescripcion: $nuevaDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return Pt=function(){return o},o}function Nt(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoNombre: String!) {\n              cambiarNombreTrabajo(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Nt=function(){return o},o}function Et(){var o=Object(r["a"])(["\n            mutation($idTrabajo: ID!, $idProyecto: ID!) {\n              eliminarTrabajoDeProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n              )\n            }\n          "]);return Et=function(){return o},o}function Ct(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!) {\n              crearTrabajoEnProyecto(idProyecto: $idProyecto) {\n                id\n                nombre\n                descripcion\n                responsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return Ct=function(){return o},o}function Dt(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return Dt=function(){return o},o}function wt(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addPosibleResponsableProyecto(idProyecto: $idProyecto, idUsuario: $idUsuario) {\n                id\n                posiblesResponsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return wt=function(){return o},o}function xt(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }\n                posiblesResponsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return xt=function(){return o},o}function jt(){var o=Object(r["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              removeResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }\n                posiblesResponsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return jt=function(){return o},o}function Rt(){var o=Object(r["a"])(["\n  query($idProyecto: ID!) {\n    proyecto(idProyecto: $idProyecto) {\n      id\n      nombre\n      responsables {\n        ...fragResponsables\n      }\n      posiblesResponsables {\n        ...fragResponsables\n      }\n      trabajos {\n        id\n        nombre\n        descripcion\n        responsables {\n          ...fragResponsables\n        }\n      }\n      objetivos {\n        id\n        nombre\n        descripcion\n      }\n    }\n  }\n  ","\n"]);return Rt=function(){return o},o}var Ot=c()(Rt(),Ue),St={components:{IconoTrabajo:ct,IconoPersona:Je,IconoObjetivo:ft},name:"proyecto",apollo:{esteProyecto:{query:Ot,variables:function(){return{idProyecto:this.$route.params.idProyecto}},update:function(o){return o.proyecto}}},data:function(){return{esteProyecto:{responsables:[]},idTrabajoSeleccionado:null,idObjetivoSeleccionado:null}},computed:{usuarioResponsableProyecto:function(){var o=this;return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.some((function(e){return e.id==o.$store.state.usuario.id}))},usuarioPosibleResponsableProyecto:function(){var o=this;return!!this.esteProyecto.posiblesResponsables&&!!this.esteProyecto.posiblesResponsables.some((function(e){return e.id==o.$store.state.usuario.id}))},permisosEdicion:function(){return!(!this.usuarioResponsableProyecto&&"superadministrador"!=this.$store.state.usuario.permisos)}},methods:{abandonarListaResponsables:function(){console.log("Abandonando la responsabilidad en este proyecto"),this.$apollo.mutate({mutation:c()(jt(),Ue),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},aceptarResponsable:function(o){console.log("aceptando como responsable al usuario ".concat(o)),this.$apollo.mutate({mutation:c()(xt(),Ue),variables:{idProyecto:this.esteProyecto.id,idUsuario:o}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},entrarListaPosiblesResponsables:function(){console.log("Enviando peticion de entrar a la lista de posibles responsables del proyecto con id ".concat(this.esteProyecto.id)),this.$apollo.mutate({mutation:c()(wt(),Ue),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},asumirComoResponsable:function(){console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del proyecto con id ").concat(this.esteProyecto.id)),this.$apollo.mutate({mutation:c()(Dt(),Ue),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},crearNuevoTrabajo:function(){var o=this;console.log("enviando mutacion de crear nuevo trabajo"),this.$apollo.mutate({mutation:c()(Ct(),Ue),variables:{idProyecto:this.esteProyecto.id},update:function(e,t){var i=t.data.crearTrabajoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(i)));var a=i;try{var n=e.readQuery({query:Ot,variables:{idProyecto:o.esteProyecto.id}});n.proyecto.trabajos.push(a),e.writeQuery({query:Ot,variables:{idProyecto:o.esteProyecto.id},data:n}),console.log("cache actualizado")}catch(r){return void console.log("Error actualizando cache: ".concat(r))}}}).then((function(o){console.log("respuesta. ".concat(o))})).catch((function(o){console.log("error: ".concat(o))}))},eliminarTrabajo:function(o){var e=this;this.esteProyecto.trabajos.some((function(e){return e.id==o}))&&this.$apollo.mutate({mutation:c()(Et()),variables:{idTrabajo:o,idProyecto:this.esteProyecto.id},update:function(t,i){var a=i.data.eliminarTrabajoDeProyecto;console.log("data: ".concat(JSON.stringify(a)));var n=a;if(n)try{var r=t.readQuery({query:Ot,variables:{idProyecto:e.esteProyecto.id}}),s=r.proyecto.trabajos.findIndex((function(e){return e.id==o}));s>-1&&r.proyecto.trabajos.splice(s,1),t.writeQuery({query:Ot,variables:{idProyecto:e.esteProyecto.id},data:r})}catch(c){console.log("Error actualizando cache")}}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},cambiarNombreTrabajo:function(o){var e=o.idTrabajo,t=o.nuevoNombre;this.$apollo.mutate({mutation:c()(Nt()),variables:{idProyecto:this.esteProyecto.id,idTrabajo:e,nuevoNombre:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))},cambiarDescripcionTrabajo:function(o){var e=o.idTrabajo,t=o.nuevaDescripcion;this.$apollo.mutate({mutation:c()(Pt()),variables:{idProyecto:this.esteProyecto.id,idTrabajo:e,nuevaDescripcion:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))},crearNuevoObjetivo:function(){var o=this;console.log("enviando mutacion de crear nuevo objetivo"),this.$apollo.mutate({mutation:c()(yt()),variables:{idProyecto:this.esteProyecto.id},update:function(e,t){var i=t.data.crearObjetivoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(i)));var a=i;try{var n=e.readQuery({query:Ot,variables:{idProyecto:o.esteProyecto.id}});console.log("cache: ".concat(JSON.stringify(n))),n.proyecto.objetivos.push(a),console.log("cache: ".concat(JSON.stringify(n))),e.writeQuery({query:Ot,variables:{idProyecto:o.esteProyecto.id},data:n}),console.log("cache actualizado")}catch(r){return void console.log("Error actualizando cache: ".concat(r))}}}).then((function(o){console.log("respuesta. ".concat(o))})).catch((function(o){console.log("error: ".concat(o))}))},eliminarObjetivo:function(o){var e=this;this.esteProyecto.objetivos.some((function(e){return e.id==o}))&&this.$apollo.mutate({mutation:c()(gt()),variables:{idObjetivo:o,idProyecto:this.esteProyecto.id},update:function(t,i){var a=i.data.eliminarObjetivoDeProyecto;console.log("data: ".concat(JSON.stringify(a)));var n=a;if(n)try{var r=t.readQuery({query:Ot,variables:{idProyecto:e.esteProyecto.id}}),s=r.proyecto.objetivos.findIndex((function(e){return e.id==o}));s>-1&&r.proyecto.objetivos.splice(s,1),t.writeQuery({query:Ot,variables:{idProyecto:e.esteProyecto.id},data:r})}catch(c){console.log("Error actualizando cache")}}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},cambiarNombreObjetivo:function(o){var e=o.idObjetivo,t=o.nuevoNombre;this.$apollo.mutate({mutation:c()(ht()),variables:{idProyecto:this.esteProyecto.id,idObjetivo:e,nuevoNombre:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))},cambiarDescripcionObjetivo:function(o){var e=o.idObjetivo,t=o.nuevaDescripcion;this.$apollo.mutate({mutation:c()(bt()),variables:{idProyecto:this.esteProyecto.id,idObjetivo:e,nuevaDescripcion:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))}}},$t=St,Tt=(t("17c5"),Object(p["a"])($t,Re,Oe,!1,null,"0ba36069",null)),kt=Tt.exports,It=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"registro"},[t("form",[t("div",{attrs:{id:"zonaDatosPersonales"}},[t("h3",[o._v("Información Personal")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.nombres,expression:"datosRegistro.nombres"}],attrs:{type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.datosRegistro.nombres},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"nombres",e.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.apellidos,expression:"datosRegistro.apellidos"}],attrs:{type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.datosRegistro.apellidos},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"apellidos",e.target.value)}}}),t("br"),t("br"),t("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.fechaNacimiento,expression:"datosRegistro.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.datosRegistro.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"fechaNacimiento",e.target.value)}}}),t("br")]),t("div",{attrs:{id:"zonaContacto"}},[t("h3",[o._v("Datos de contacto")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.email,expression:"datosRegistro.email"}],attrs:{type:"email",placeholder:"Correo electrónico"},domProps:{value:o.datosRegistro.email},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"email",e.target.value)}}}),t("br"),t("br"),t("label",{attrs:{for:"numeroTel"}},[o._v("Número telefónico")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.numeroTel,expression:"datosRegistro.numeroTel"}],attrs:{type:"text",name:"numeroTel"},domProps:{value:o.datosRegistro.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"numeroTel",e.target.value)}}}),t("br"),t("br"),t("label",{attrs:{for:"lugarResidencia"}},[o._v("Lugar de residencia")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.lugarResidencia,expression:"datosRegistro.lugarResidencia"}],attrs:{type:"text",placeholder:"Lugar de residencia"},domProps:{value:o.datosRegistro.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"lugarResidencia",e.target.value)}}})]),t("div",{attrs:{id:"zonaLogin"}},[t("h3",[o._v("Datos de login")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.username,expression:"datosRegistro.username"}],attrs:{type:"text",placeholder:"nombre de usuario",name:"username"},domProps:{value:o.datosRegistro.username},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"username",e.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.password,expression:"datosRegistro.password"}],attrs:{type:"password",placeholder:"password",name:"password"},domProps:{value:o.datosRegistro.password},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"password",e.target.value)}}}),t("br")]),t("button",{on:{click:function(e){return e.preventDefault(),o.enviarRegistro(e)}}},[o._v("Enviar")])])])},Gt=[],Ut=(t("4160"),t("159b"),{name:"Registro",data:function(){return{datosRegistro:{nombres:null,apellidos:null,fechaNacimiento:null,email:null,numeroTel:null,lugarResidencia:null,username:null,password:null},camposObligatorios:["nombres","apellidos","username","password"]}},methods:{enviarRegistro:function(){var o=new Object;for(var e in this.datosRegistro)this.datosRegistro[e]?o[e]=this.datosRegistro[e]:console.log("campo ".concat(e," vacio"));this.camposObligatorios.forEach((function(e){o[e]||console.log("Faltaba el campo ".concat(e))}));var t=this,i=Ho(o);i.length<1?Do.a.post(this.serverUrl+"/api/usuarios/registro",{usuario:o}).then((function(o){console.log("respuesta: ".concat(JSON.stringify(o.data))),o.data.registro&&(console.log("Registro ok"),t.$router.push("/login"))})).catch((function(o){console.log("error: ".concat(o))})):console.log("Errores: ".concat(i))},alertar:function(o){console.log(o)}}}),_t=Ut,zt=(t("8ee4"),Object(p["a"])(_t,It,Gt,!1,null,"40e8f437",null)),Vt=zt.exports,Mt=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"actividadesProfes"},[i("div",{attrs:{id:"layout"}},[i("div",{staticClass:"barraSeleccion",attrs:{id:"barraGrupos"}},[o.usuarioProfe||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")?i("div",{staticClass:"selectoresActividadesByGrupo paraProfes"},[i("div",{staticClass:"categoriaSelectores"},[o._v("Grupos")]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.cargandoGruposEstudiantiles,expression:"cargandoGruposEstudiantiles"}],attrs:{texto:"Cargando grupos..."}}),o._l(o.gruposEstudiantiles,(function(e){return i("div",{key:e.id,staticClass:"selectorGrupoEstudiantil selectorBarra",class:{selectorSeleccionado:o.idGrupoEstudiantilSeleccionado==e.id},on:{click:function(t){o.abrirGrupoEstudiantil(e.id),o.idGrupoEstudiantilSeleccionado=e.id}}},[o._v(" "+o._s(e.nombre)+" "),i("div",{attrs:{id:"alertasGrupo"}},[e.estudiantesIdle.length>0?i("span",{attrs:{id:"numeroEstudiantesIdle"}},[o._v(o._s(e.estudiantesIdle.length))]):o._e(),e.estudiantesIdle.length>0?i("img",{staticClass:"alertas",attrs:{src:t("eb75"),alt:"Estudiantes desocupados",id:"alertaEstudiantesIdle",title:e.estudiantesIdle.length+" Estudiantes sin actividades"}}):o._e()])])}))],2):o._e(),o.usuarioLogeado?i("div",{staticClass:"selectoresActividadesByProfe paraEstudiantes"},[i("div",{staticClass:"categoriaSelectores"},[o._v("Profes")]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.cargandoProfes,expression:"cargandoProfes"}],attrs:{texto:"Cargando profes..."}}),o._l(o.profes,(function(e){return i("div",{key:e.id,staticClass:"selectorActividadesProfe selectorBarra",class:{selectorSeleccionado:o.idProfeSeleccionado==e.id},on:{click:function(t){o.abrirActividadesProfe(e.id),o.idProfeSeleccionado=e.id}}},[o._v(" "+o._s(e.nombres)+" ")])}))],2):o._e()]),i("router-view")],1)])},Bt=[];function Lt(){var o=Object(r["a"])(["\n        query {\n          usuariosProfe {\n            ...fragResponsables\n          }\n        }\n        ","\n      "]);return Lt=function(){return o},o}function Qt(){var o=Object(r["a"])(["\n        query {\n          gruposEstudiantiles {\n            id\n            nombre\n            estudiantesIdle {\n              id\n            }\n          }\n        }\n      "]);return Qt=function(){return o},o}var Ft={components:{Loading:So},name:"ActividadesEstudiantiles",apollo:{gruposEstudiantiles:{query:c()(Qt()),update:function(o){var e=o.gruposEstudiantiles;return this.cargandoGruposEstudiantiles=!1,e}},profes:{query:c()(Lt(),Ue),update:function(o){var e=o.usuariosProfe;return this.cargandoProfes=!1,e}}},data:function(){return{gruposEstudiantiles:[],idGrupoEstudiantilSeleccionado:null,idProfeSeleccionado:null,outletDeshabilitado:!1,cargandoGruposEstudiantiles:!0,cargandoProfes:!0}},computed:{usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")}},methods:{abrirGrupoEstudiantil:function(o){this.$router.push("/actividadesVirtuales2021/grupoEstudiantil/"+o)},abrirActividadesProfe:function(o){this.$router.push("/actividadesVirtuales2021/actividadesProfes/"+o)},navegacionCompleta:function(){console.log("Navacion completada")}}},qt=Ft,Jt=(t("6993"),Object(p["a"])(qt,Mt,Bt,!1,null,"3201eba0",null)),Zt=Jt.exports,Ht=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"personas"},[t("div",{attrs:{id:"listaPersonas"},on:{click:function(e){o.idPersonaMenuCx=null}}},[t("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingPersonas,expression:"loadingPersonas"}],attrs:{texto:"Cargando lista de personas..."}}),o._l(o.personas,(function(e){return t("icono-persona",{key:e.id,attrs:{estaPersona:e,seleccionado:o.idPersonaSeleccionada==e.id,opcionesMenuCx:o.opcionesEspecialesPersona,menuContextual:o.idPersonaMenuCx==e.id},on:{eliminandoseDeDatabase:function(t){return o.eliminarPersonaDeDatabase(e.id)},reseteandoPass:function(t){return o.resetearPassUsuario(e.id)}},nativeOn:{contextmenu:function(t){t.stopPropagation(),t.preventDefault(),o.idPersonaMenuCx=e.id},click:function(t){return!t.type.indexOf("key")&&o._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])||"button"in t&&0!==t.button?null:void(o.idPersonaSeleccionada=e.id)}}})}))],2)])},Kt=[];function Xt(){var o=Object(r["a"])(["\n            mutation($idUsuario: ID!) {\n              eliminarUsuario(idUsuario: $idUsuario)\n            }\n          "]);return Xt=function(){return o},o}function Yt(){var o=Object(r["a"])(["\n  query {\n    todosUsuarios {\n      ...fragResponsables\n    }\n  }\n  ","\n"]);return Yt=function(){return o},o}var Wt=c()(Yt(),Ue),oi={name:"Personas",components:{IconoPersona:Je,Loading:So},apollo:{personas:{query:Wt,update:function(o){var e=o.todosUsuarios;return this.loadingPersonas=!1,e}}},data:function(){return{personas:[],idPersonaMenuCx:null,idPersonaSeleccionada:null,loadingPersonas:!0}},methods:{copiarId:function(o){var e=o.target.innerText.trim(),t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},eliminarPersonaDeDatabase:function(o){confirm("¿Seguro de eliminar a este individuo?")&&console.log("Se eliminara una persona con id ".concat(o," de la base de datos")),this.$apollo.mutate({mutation:c()(Xt()),variables:{idUsuario:o},update:function(e,t){var i=t.data.eliminarUsuario;if(console.log("Data: ".concat(i)),i)try{var a=e.readQuery({query:Wt,variables:{idUsuario:o}});console.log("cache: ".concat(a));var n=a.todosUsuarios.findIndex((function(e){return e.id==o}));n>-1&&a.todosUsuarios.splice(n,1),console.log("cache: ".concat(a)),e.writeQuery({query:Wt,variables:{idUsuario:o},data:a})}catch(r){console.log("Error actualizando cache. E:".concat(r))}}}).then((function(o){console.log("Res: ".concat(JSON.stringify(o))),o.data&&console.log("Usuario eliminado exitosamente")})).catch((function(o){console.log("Error eliminando usuario: E: ".concat(o))}))},resetearPassUsuario:function(o){console.log("Evento de resetear pass de ".concat(o));var e={idUsuario:o};Do()({method:"post",url:this.serverUrl+"/api/usuarios/resetearPassUsuario",data:e,headers:{Authorization:"Bearer "+this.$store.state.token}}).then((function(o){var e=o.data;console.log("Respuesta: ".concat(e))})).catch((function(o){console.log("Error reseteando password. E:".concat(o))}))}},computed:{opcionesEspecialesPersona:function(){var o=[];return this.usuarioSuperadministrador&&(o=o.concat([{textoVisible:"Eliminar de la base de datos",evento:"eliminandoseDeDatabase"},{textoVisible:"resetear contraseña (123456)",evento:"reseteandoPass"}])),o}}},ei=oi,ti=(t("a14d"),Object(p["a"])(ei,Ht,Kt,!1,null,"6fa0ac0a",null)),ii=ti.exports,ai=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"grupoEstudiantil",class:{deshabilitada:o.ventanaDeshabilitada}},[i("div",{staticClass:"nombreGrupo"},[o._v(o._s(o.esteGrupo.nombre))]),i("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaEstudiantes"}},[i("div",{staticClass:"nombreZona"},[o._v("Estudiantes")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesEstudiantes"}},[1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("input",{directives:[{name:"model",rawName:"v-model",value:o.idEstudianteAñadir,expression:"idEstudianteAñadir"}],ref:"idEstudianteAñadir",attrs:{type:"text",placeholder:"id de estudiante"},domProps:{value:o.idEstudianteAñadir},on:{input:function(e){e.target.composing||(o.idEstudianteAñadir=e.target.value)}}}):o._e(),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("div",{staticClass:"controlesEstudiantes hoverGris botonesControles",on:{click:o.addEstudianteGrupo}},[o._v(" Añadir estudiante ")]):o._e(),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("div",{staticClass:"controlesEstudiantes hoverGris botonesControles",class:{desactivado:null==o.idEstudianteSeleccionado},on:{click:function(e){return o.removeEstudianteGrupo(o.idEstudianteSeleccionado)}}},[o._v(" Retirar estudiante ")]):o._e()]),i("div",{attrs:{id:"listaEstudiantes"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idEstudianteSeleccionado=null}}},o._l(o.esteGrupo.estudiantes,(function(e){return i("icono-persona",{key:e.id,attrs:{estaPersona:e,seleccionado:o.idEstudianteSeleccionado==e.id},nativeOn:{click:function(t){o.idEstudianteSeleccionado=e.id}},scopedSlots:o._u([{key:"alertas",fn:function(){return[o.esteGrupo.estudiantesIdle.some((function(o){return o.id==e.id}))?i("img",{staticClass:"alertas",attrs:{id:"alertaEstudianteIdle",src:t("eb75"),title:"Estudiante desocupado"}}):o._e()]},proxy:!0}],null,!0)})})),1)]),i("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaActividades"}},[i("div",{staticClass:"nombreZona"},[o._v("Actividades")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesActividades"}},[o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")?i("div",{staticClass:"controlesActividades botonesControles hoverGris",on:{click:function(e){o.verTodasActividades=!o.verTodasActividades}}},[o._v(" "+o._s(1==o.verTodasActividades?"Ver sólo mis actividades":"Ver todas las actividades")+" ")]):o._e(),o.usuarioProfe?i("div",{staticClass:"controlesActividades botonesControles hoverGris",on:{click:o.crearNuevaActividad}},[o._v(" Crear actividad ")]):o._e()]),i("div",{attrs:{id:"listaActividades"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idActividadSeleccionada=null}}},o._l(o.actividadesOrdenadas,(function(e){return i("actividad",{directives:[{name:"show",rawName:"v-show",value:1==o.verTodasActividades&&(1==o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia"))||e.creador.id==o.$store.state.usuario.id,expression:"\n          (verTodasActividades == true &&\n            (usuarioAdministradorActividadesEstudiantiles == true ||\n              $store.state.usuario.permisos.includes(\n                'actividadesEstudiantiles-guia'\n              ))) ||\n          actividad.creador.id == $store.state.usuario.id\n        "}],key:e.id,attrs:{estaActividad:e,seleccionada:o.idActividadSeleccionada==e.id,idGrupo:o.esteGrupo.id},on:{clickTrianguloSeleccion:function(t){o.idActividadSeleccionada==e.id?o.idActividadSeleccionada=null:o.idActividadSeleccionada=e.id},eliminandose:o.eliminarActividad,participacionEliminada:o.eliminarParticipacionDeCache,posibleCambioEstudiantesIdle:function(e){return o.reloadEstudiantesIdle()}},nativeOn:{click:function(t){o.idActividadSeleccionada!=e.id&&(o.idActividadSeleccionada=e.id)}}})})),1)])])},ni=[],ri=(t("b0c0"),function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"actividad",class:{seleccionada:o.seleccionada,completada:o.usuarioCompletoActividad}},[i("div",{attrs:{id:"contenedorAlertas"}},[o.actividadConNuevasRespuestasParaProfe?i("img",{staticClass:"alertas alertaNuevoMensaje",attrs:{src:t("1070"),title:"Nuevo(s) mensaje(s)"}}):o._e(),o.usuarioCompletoActividad?i("img",{staticClass:"alertas alertaActividadCompletada",attrs:{src:t("f0d1"),title:"¡Completaste esta actividad!"}}):o._e()]),i("div",{class:{arrowDown:o.seleccionada},attrs:{id:"triangulito"},on:{click:function(e){return e.stopPropagation(),o.$emit("clickTrianguloSeleccion")}}}),i("div",{attrs:{id:"zonaNombre"},on:{mouseover:function(e){o.botonesNombre=!0},mouseout:function(e){o.botonesNombre=!1}}},[i("span",{ref:"nombre",staticClass:"nombreZona",class:{enEdicion:o.nombreEditandose},attrs:{id:"nombre"}},[o._v(" "+o._s(o.estaActividad.nombre)+" "),o.usuarioCreadorActividad?i("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],attrs:{src:t("559e"),alt:"Editar nombre",title:"Editar nombre",id:"botonEditarNombre"},on:{click:o.iniciarEdicionNombre}}):o._e()]),o.usuarioCreadorActividad?i("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Guardando nombre..."}}):o._e(),o.usuarioCreadorActividad?i("div",{directives:[{name:"show",rawName:"v-show",value:1==o.nombreEditandose&&1==o.seleccionada,expression:"nombreEditandose == true && seleccionada == true"}],attrs:{id:"zonaNuevoNombre"}},[i("label",{staticStyle:{"font-style":"italic"},attrs:{for:"inputNuevoNombre"}},[o._v("Nuevo nombre: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"}],ref:"inputNuevoNombre",staticClass:"nuevoNombreActividad",attrs:{name:"inputNuevoNombre",type:"text"},domProps:{value:o.nuevoNombre},on:{keydown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.cancelarEdicionNombre(e)},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNombre(e)},blur:o.guardarNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}})]):o._e()],1),1==o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")?i("span",{attrs:{id:"nombreCreador"}},[o._v(o._s(o.estaActividad.creador.nombres))]):o._e(),i("br"),i("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],staticClass:"zona",attrs:{id:"zonaGuia"}},[i("div",{staticClass:"nombreZona",class:{nombreHayGuia:o.estaActividad.hayGuia,nombreNoHayGuia:!o.estaActividad.hayGuia},attrs:{id:"nombreZonaGuia"}},[o._v(" Guía ")]),o.usuarioCreadorActividad?i("input",{ref:"inputNuevaGuia",attrs:{type:"file",id:"inputNuevaGuia",accept:"application/pdf"},on:{change:o.subirNuevaGuia}}):o._e(),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.uploadingGuia,expression:"uploadingGuia"}],attrs:{texto:"Subiendo archivo..."}}),o.estaActividad.hayGuia.length>5?i("div",{attrs:{id:"descargarGuia"}},[i("a",{attrs:{href:o.estaActividad.hayGuia,download:o.estaActividad.nombre+"-Guia"}},[i("img",{attrs:{src:t("608c"),alt:"Descargar guia",id:"botonDescargarGuia"}})])]):o._e()],1),o.usuarioCreadorActividad||o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")?i("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],staticClass:"zona",attrs:{id:"zonaParticipantes"}},[i("div",{staticClass:"nombreZona"},[o._v("Participantes")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesParticipantes"}}),i("div",{attrs:{id:"listaParticipantes"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idParticipanteSeleccionado=null}}},o._l(o.estaActividad.desarrollos,(function(e){return i("icono-persona",{key:e.estudiante.id,attrs:{estaPersona:e.estudiante,seleccionado:o.idEstudianteSeleccionado==e.estudiante.id},nativeOn:{click:function(t){o.idEstudianteSeleccionado=e.estudiante.id,o.marcarComoLeido(e.estudiante.id)}},scopedSlots:o._u([{key:"alertas",fn:function(){return[o.idsEstudiantesConNuevaRespuestaParaProfe.includes(e.estudiante.id)?i("img",{staticClass:"alertas alertaNuevoMensaje",attrs:{src:t("1070"),title:"Nuevo mensaje"}}):o._e(),"completado"==e.estado?i("img",{staticClass:"alertas alertaEstudianteCompletoDesarrollo",attrs:{src:t("f0d1"),title:"Completó esta actividad"}}):o._e()]},proxy:!0}],null,!0)})})),1)]):o._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada&&(null!=o.idEstudianteSeleccionado||!o.usuarioCreadorActividad),expression:"\n      seleccionada &&\n      (idEstudianteSeleccionado != null || !usuarioCreadorActividad)\n    "}],staticClass:"zona",attrs:{id:"zonaDesarrollos"}},[o.usuarioCreadorActividad||o.usuarioTieneDesarrollo||o.idEstudianteSeleccionado!=this.$store.state.usuario.id?o._e():i("div",{staticClass:"desarrollo",attrs:{id:"miNuevoDesarrollo"}},[i("mi-participacion",{attrs:{idActividad:o.estaActividad.id,participacionEstudiante:!0},on:{reloadDesarrollo:function(e){return o.reloadDesarrollosActividad()}}})],1),i("div",{attrs:{id:"desarrollosEstudiantes"}},o._l(o.estaActividad.desarrollos,(function(e){return i("div",{directives:[{name:"show",rawName:"v-show",value:o.idEstudianteSeleccionado==e.estudiante.id,expression:"idEstudianteSeleccionado == desarrollo.estudiante.id"}],key:e.id,staticClass:"desarrollo"},[o._v(" "+o._s(e.estudiante.nombres)+" "),o._l(e.participaciones,(function(t,a){return i("participacion-estudiante",{key:t.id,attrs:{indice:a,idEstudianteDesarrollo:e.estudiante.id,estaParticipacion:t},on:{eliminandose:function(i){return o.eliminarParticipacion(t.id,e.id)}}})})),"completado"==e.estado?i("div",{staticClass:"anuncioActividadCompletada"},[o._v(" ¡Actividad completada! ")]):o._e(),"completado"!=e.estado?i("mi-participacion",{attrs:{idActividad:o.estaActividad.id,enDesarrollo:e.id,participacionEstudiante:e.estudiante.id==o.$store.state.usuario.id},on:{reloadDesarrollo:function(t){return o.reloadDesarrollo(e.id)}}}):o._e(),o.usuarioCreadorActividad?i("div",{attrs:{id:"toggleDesarrolloCompletado"}},[i("img",{class:{completado:"completado"==e.estado},attrs:{id:"botonToggleDesarrolloCompletado",src:t("f0d1"),alt:"Marcar como completado",title:"Marcar como completado"},on:{click:function(t){return o.toggleDesarrolloCompletado(e.id,e.estado)}}})]):o._e()],2)})),0)]),i("div",{directives:[{name:"show",rawName:"v-show",value:1==o.seleccionada,expression:"seleccionada == true"}],attrs:{id:"controlesActividad"}},[o.usuarioCreadorActividad||o.usuarioAdministradorActividadesEstudiantiles?i("div",{staticClass:"controlesActividad",attrs:{id:"botonEliminarActividad"},on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])])}),si=[],ci=(t("4de4"),t("19de")),di=t.n(ci),ui=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"miParticipacion",class:{participacionPropia:o.participacionEstudiante,participacionOtro:!o.participacionEstudiante}},[i("div",{attrs:{id:"titulo"}},[o._v(" Responder "),i("img",{attrs:{src:t("1070"),alt:"Enviar respuesta",id:"iconoMensaje",title:o.cuadroAbierto?"cerrar":"abrir"},on:{click:o.abrirCerrar}}),i("br")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:o.comentario,expression:"comentario"},{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],ref:"comentario",class:{comentarioPropio:o.participacionEstudiante,comentarioOtro:!o.participacionEstudiante},attrs:{name:"comentario",id:"comentario",cols:"30",rows:"10"},domProps:{value:o.comentario},on:{input:function(e){e.target.composing||(o.comentario=e.target.value)}}}),i("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"adjuntarArchivo"}},[i("input",{ref:"inputArchivoAdjunto",attrs:{type:"file",id:"inputArchivoAdjunto",accept:"application/pdf, .png, .jpg, .jpeg, image/png, image/jpg, image/jpeg"},on:{change:o.actualizarNombreDeArchivo}}),i("img",{attrs:{src:t("3a9d"),alt:"Ajuntar archivo",id:"imgAdjuntar",title:"adjuntar un archivo"},on:{click:o.abrirSelectorDeArchivos}}),i("div",{attrs:{id:"nombreArchivoSeleccionado"}},[o._v(o._s(o.nombreArchivoSeleccionado))])]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoRespuesta,expression:"enviandoRespuesta"}],attrs:{texto:"Enviando respuesta..."}}),i("br"),i("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"enviar"}},[i("img",{class:{deshabilitado:o.enviandoRespuesta},attrs:{src:t("4e77"),alt:"Enviar respuesta",id:"imgEnviar",title:"Enviar"},on:{click:o.enviarRespuesta}})])],1)},li=[],vi=/[^\n a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/g,pi={name:"MiParticipacion",components:{Loading:So},data:function(){return{comentario:"",nombreArchivoSeleccionado:null,cuadroAbierto:!1,enviandoRespuesta:!1}},props:{idActividad:String,participacionEstudiante:{type:Boolean,default:!1},enDesarrollo:{type:String,default:"0"}},methods:{abrirSelectorDeArchivos:function(){this.$refs.inputArchivoAdjunto.click()},enviarRespuesta:function(){var o=this;this.enviandoRespuesta=!0;var e=this,t=this.$refs.inputArchivoAdjunto,i=new FormData,a=this.comentario.trim();if(a=a.replace(vi," "),""==a)return alert("¡Tu mensaje está vacío!"),void(this.enviandoRespuesta=!1);if(t.value){var n=t.files[0],r=n["type"];console.log("subiendo un ".concat(r)),i.append("archivoAdjunto",n)}else console.log("El input de archivo adjunto estaba vacio");i.append("comentario",a),i.append("idActividad",this.idActividad),i.append("idEstudiante",this.idEstudiante),i.append("idDesarrollo",this.enDesarrollo),Do()({method:"post",url:this.serverUrl+"/api/actividadesProfes/publicarRespuesta",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(){o.enviandoRespuesta=!1,e.$emit("reloadDesarrollo"),e.comentario="",e.$refs.inputArchivoAdjunto.value=null,o.nombreArchivoSeleccionado=null})).catch((function(e){o.enviandoRespuesta=!1,console.log("Errores: ".concat(e)),e.response&&e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))},actualizarNombreDeArchivo:function(){if(!this.$refs.inputArchivoAdjunto.value)return console.log("Nullificando el nombre de archivo seleccionado"),void(this.nombreArchivoSeleccionado=null);this.nombreArchivoSeleccionado=this.$refs.inputArchivoAdjunto.files[0].name},abrirCerrar:function(){this.cuadroAbierto?(this.comentario="",this.$refs.inputArchivoAdjunto.value=null,this.nombreArchivoSeleccionado=null,this.cuadroAbierto=!1):this.cuadroAbierto=!0}}},mi=pi,Ai=(t("554c"),Object(p["a"])(mi,ui,li,!1,null,"1404841e",null)),fi=Ai.exports,bi=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"participacionEstudiante",class:{participacionPropia:o.participacionDelPropioEstudiante,participacionOtro:!o.participacionDelPropioEstudiante}},[i("div",{attrs:{id:"autorParticipacion"}},[o._v(" "+o._s(o.estaParticipacion.autor.nombres)+" "+o._s(o.estaParticipacion.autor.apellidos)+" - "+o._s(o.fechaFormateada)+" ")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:o.estaParticipacion.comentario,expression:"estaParticipacion.comentario"}],class:{comentarioPropio:o.participacionDelPropioEstudiante,comentarioOtro:!o.participacionDelPropioEstudiante},attrs:{disabled:"",id:"comentario"},domProps:{value:o.estaParticipacion.comentario},on:{input:function(e){e.target.composing||o.$set(o.estaParticipacion,"comentario",e.target.value)}}}),i("div",{attrs:{id:"archivo"}},[i("a",{attrs:{href:o.estaParticipacion.archivo.accesible}},[o.estaParticipacion.archivo.accesible.length>5?i("img",{attrs:{src:t("60ee"),alt:"Descargar archivo",id:"imgDownloadArchivo"}}):o._e()])]),1==o.usuarioAdministradorActividadesEstudiantiles||o.usuarioSuperadministrador?i("div",{attrs:{id:"controlesParticipacion"}},[i("div",{staticClass:"controlesParticipacion hoverGris",attrs:{id:"bEliminarParticipacion"},on:{click:o.eliminarse}},[o._v(" Eliminar ")])]):o._e()])},hi=[],gi={name:"ParticipacionEstudiante",props:{estaParticipacion:{type:Object},indice:Number,idEstudianteDesarrollo:String},methods:{descargarArchivo:function(){var o=this,e=this.estaParticipacion.archivo.accesible;console.log("solicitando archivo a ".concat(e)),Do()({method:"get",url:e,responseType:"blob"}).then((function(e){console.log("Respuesta: ".concat(JSON.stringify(e))),di()(e.data,parseInt(o.indice)+1+" - Respuesta_"+o.estaParticipacion.autor.nombres+"."+o.estaParticipacion.archivo.extension)})).catch((function(o){console.log("Error: ".concat(JSON.stringify(o))),alert("Archivo no encontrado")}))},eliminarse:function(){this.$emit("eliminandose",this.estaParticipacion.id)}},computed:{participacionDelPropioEstudiante:function(){return this.idEstudianteDesarrollo==this.estaParticipacion.autor.id},fechaFormateada:function(){return new Date(this.estaParticipacion.fechaUpload)}}},yi=gi,Pi=(t("b3dd"),Object(p["a"])(yi,bi,hi,!1,null,"98b79426",null)),Ni=Pi.exports;function Ei(){var o=Object(r["a"])(["\n            mutation($idDesarrollo: ID!) {\n              setLeidoPorProfeDesarrolloEstudiantil(\n                idDesarrollo: $idDesarrollo\n                nuevoLeidoPorProfe: true\n              ) {\n                id\n                leidoPorProfe\n              }\n            }\n          "]);return Ei=function(){return o},o}function Ci(){var o=Object(r["a"])(["\n            mutation($idDesarrollo: ID!, $nuevoEstado: String) {\n              setEstadoDesarrolloActividadEstudiantil(\n                idDesarrollo: $idDesarrollo\n                nuevoEstado: $nuevoEstado\n              ) {\n                id\n                estado\n              }\n            }\n          "]);return Ci=function(){return o},o}function Di(){var o=Object(r["a"])(["\n            mutation($idParticipacion: ID!) {\n              eliminarParticipacionActividadEstudiantil(\n                idParticipacion: $idParticipacion\n              )\n            }\n          "]);return Di=function(){return o},o}function wi(){var o=Object(r["a"])(["\n              query($idGrupo: ID!, $idActividad: ID!) {\n                actividadDeGrupoEstudiantil(\n                  idGrupo: $idGrupo\n                  idActividad: $idActividad\n                ) {\n                  id\n                  hayGuia\n                }\n              }\n            "]);return wi=function(){return o},o}function xi(){var o=Object(r["a"])(["\n            mutation($idActividad: ID!, $nuevoNombre: String!) {\n              cambiarNombreActividadEstudiantil(\n                idActividad: $idActividad\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return xi=function(){return o},o}function ji(){var o=Object(r["a"])(["\n  query($idDesarrollo: ID!, $idActividad: ID!) {\n    desarrolloEnActividadEstudiantil(\n      idActividad: $idActividad\n      idDesarrollo: $idDesarrollo\n    ) {\n      id\n      estado\n      participaciones {\n        id\n        fechaUpload\n        comentario\n        archivo {\n          extension\n          nombre\n          accesible\n        }\n        autor {\n          ...fragResponsables\n        }\n      }\n    }\n  }\n  ","\n"]);return ji=function(){return o},o}function Ri(){var o=Object(r["a"])(["\n  query($idActividad: ID!) {\n    actividadEstudiantil(idActividad: $idActividad) {\n      id\n      desarrollos {\n        ...fragDesarrollo\n      }\n    }\n  }\n  ","\n"]);return Ri=function(){return o},o}var Oi=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,Si=c()(Ri(),ze),$i=c()(ji(),Ue),Ti={components:{MiParticipacion:fi,ParticipacionEstudiante:Ni,IconoPersona:Je,Loading:So},name:"Actividad",data:function(){return{nombreEditandose:!1,idEstudianteSeleccionado:this.$store.state.usuario.id,uploadingGuia:!1,nuevoNombre:"",botonesNombre:!1,enviandoNuevoNombre:!1}},props:{estaActividad:{type:Object,default:function(){return{desarrollos:new Array,hayGuia:""}}},seleccionada:Boolean,idGrupo:String},methods:{eliminarse:function(){confirm("Eliminando actividad completa. ¿Continuar?")&&this.$emit("eliminandose",this.estaActividad.id)},guardarNombre:function(){var o=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.enviandoNuevoNombre=!0,t=o.nuevoNombre.trim(),i=o.estaActividad.id,o.nombreEditandose&&t!=o.estaActividad.nombre){e.next=7;break}return o.nombreEditandose=!1,o.enviandoNuevoNombre=!1,e.abrupt("return");case 7:o.nombreEditandose=!1,t=t.replace(Oi,""),t=t.replace(/\s\s+/g," "),o.enviandoNuevoNombre=!0,o.$apollo.mutate({mutation:c()(xi()),variables:{idActividad:i,nuevoNombre:t}}).then((function(){o.enviandoNuevoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("error: ".concat(e))}));case 12:case"end":return e.stop()}}),e)})))()},iniciarEdicionNombre:function(){var o=this;this.usuarioCreadorActividad&&this.seleccionada&&(this.nuevoNombre=this.estaActividad.nombre,this.nombreEditandose=!0,this.$nextTick((function(){o.$refs.inputNuevoNombre.focus()})))},cancelarEdicionNombre:function(){this.nombreEditandose=!1,this.$refs.inputNuevoNombre.blur()},seleccionarGuia:function(){this.$refs.inputNuevaGuia.click()},subirNuevaGuia:function(){var o=this;this.uploadingGuia=!0;var e=this,t=this.$refs.inputNuevaGuia,i=new FormData,a=t.files[0];i.append("nuevaGuia",a),i.append("idActividad",this.estaActividad.id),i.append("idGrupo",this.idGrupo),Do()({method:"post",url:this.serverUrl+"/api/actividadesProfes/updateGuia",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(){o.uploadingGuia=!1,e.$apollo.query({query:c()(wi()),variables:{idGrupo:e.idGrupo,idActividad:e.estaActividad.id}})})).catch((function(e){o.uploadingGuia=!1,console.log("Errores: ".concat(e)),e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))},descargarGuia:function(){var o=this,e=this.serverUrl+"/api/actividadesProfes/guia/"+this.idGrupo+"/"+this.estaActividad.creador.id+"/"+this.estaActividad.id+"/";Do()({method:"get",url:e,responseType:"blob"}).then((function(e){di()(e.data,o.estaActividad.nombre+"-Guia.pdf")})).catch((function(o){console.log("Error: ".concat(JSON.stringify(o))),alert("Archivo no encontrado")}))},reloadDesarrollosActividad:function(){var o=this.estaActividad.id;this.$apollo.query({query:Si,fetchPolicy:"network-only",variables:{idActividad:o}}).then((function(){})).catch((function(o){console.log("Error en query de actualizacion de mi desarrollo. E: ".concat(o))}))},reloadDesarrollo:function(o){this.$apollo.query({query:$i,fetchPolicy:"network-only",variables:{idDesarrollo:o,idActividad:this.estaActividad.id}}).then((function(){})).catch((function(o){console.log("Error en query de actualizacion de mi desarrollo. E: ".concat(o))}))},eliminarParticipacion:function(o,e){var t=this,i=this;this.$apollo.mutate({mutation:c()(Di()),variables:{idParticipacion:o}}).then((function(){i.$emit("participacionEliminada",{idParticipacion:o,idDesarrollo:e,idActividad:t.estaActividad.id})})).catch((function(o){console.log("errores: "+o)}))},toggleDesarrolloCompletado:function(o,e){var t=this,i="completado"==e?"desarrollando":"completado";this.$apollo.mutate({mutation:c()(Ci()),variables:{idDesarrollo:o,nuevoEstado:i}}).then((function(){t.$emit("posibleCambioEstudiantesIdle")})).catch((function(o){console.log("Error: ".concat(o))}))},marcarComoLeido:function(o){if(this.$store.state.usuario.id==this.estaActividad.creador.id){var e=this.estaActividad.desarrollos.find((function(e){return e.estudiante.id==o})).id;this.$apollo.mutate({mutation:c()(Ei()),variables:{idDesarrollo:e}})}}},computed:{usuarioCreadorActividad:function(){return this.$store.state.usuario.id==this.estaActividad.creador.id},usuarioTieneDesarrollo:function(){var o=this;return!(this.estaActividad.desarrollos.length<1)&&this.estaActividad.desarrollos.some((function(e){return e.estudiante.id==o.$store.state.usuario.id}))},usuarioCompletoActividad:function(){var o=this;if(this.usuarioTieneDesarrollo){var e=this.estaActividad.desarrollos.find((function(e){return e.estudiante.id==o.$store.state.usuario.id}));if("completado"==e.estado)return!0}return!1},usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")},idsDesarrollosConNuevaRespuestaParaProfe:function(){var o=this.estaActividad.desarrollos.filter((function(o){return 0==o.leidoPorProfe}));return this.usuarioCreadorActividad?o.map((function(o){return o.id})):[]},idsEstudiantesConNuevaRespuestaParaProfe:function(){var o=this.estaActividad.desarrollos.filter((function(o){return 0==o.leidoPorProfe}));return this.usuarioCreadorActividad?o.map((function(o){return o.estudiante.id})):[]},actividadConNuevasRespuestasParaProfe:function(){return this.idsDesarrollosConNuevaRespuestaParaProfe.length>0}}},ki=Ti,Ii=(t("fe38"),Object(p["a"])(ki,ri,si,!1,null,"1daed4fc",null)),Gi=Ii.exports;function Ui(){var o=Object(r["a"])(["\n          query($idGrupo: ID!) {\n            grupoEstudiantil(idGrupo: $idGrupo) {\n              id\n              estudiantesIdle {\n                id\n              }\n            }\n          }\n        "]);return Ui=function(){return o},o}function _i(){var o=Object(r["a"])(["\n            mutation($idActividad: ID!, $idGrupo: ID!) {\n              eliminarActividadDeGrupoEstudiantil(\n                idGrupo: $idGrupo\n                idActividad: $idActividad\n              )\n            }\n          "]);return _i=function(){return o},o}function zi(){var o=Object(r["a"])(["\n            mutation($idGrupo: ID!) {\n              crearActividadEnGrupoEstudiantil(idGrupo: $idGrupo) {\n                ...fragActividad\n              }\n            }\n            ","\n          "]);return zi=function(){return o},o}function Vi(){var o=Object(r["a"])(["\n            mutation($idGrupo: ID!, $idEstudiante: ID!) {\n              removeEstudianteGrupoEstudiantil(\n                idGrupo: $idGrupo\n                idEstudiante: $idEstudiante\n              ) {\n                id\n                estudiantes {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return Vi=function(){return o},o}function Mi(){var o=Object(r["a"])(["\n            mutation($idGrupoEstudiantil: ID!, $idEstudiante: ID!) {\n              addEstudianteGrupoEstudiantil(\n                idGrupoEstudiantil: $idGrupoEstudiantil\n                idEstudiante: $idEstudiante\n              ) {\n                id\n                estudiantes {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return Mi=function(){return o},o}function Bi(){var o=Object(r["a"])(["\n          subscription($idGrupo: ID) {\n            nuevaRespuestaDesarrolloEstudiantil(idGrupo: $idGrupo) {\n              idDesarrollo\n              participacion {\n                ...fragParticipacion\n              }\n            }\n          }\n          ","\n        "]);return Bi=function(){return o},o}function Li(){var o=Object(r["a"])(["\n  query($idGrupo: ID!) {\n    grupoEstudiantil(idGrupo: $idGrupo) {\n      id\n      nombre\n      estudiantes {\n        ...fragResponsables\n      }\n      estudiantesIdle {\n        id\n      }\n      actividades {\n        ...fragActividad\n      }\n    }\n  }\n  ","\n  ","\n"]);return Li=function(){return o},o}var Qi=c()(Li(),Ue,Ve),Fi={name:"ActividadesDeGrupo",apollo:{esteGrupo:{query:Qi,variables:function(){return{idGrupo:this.$route.params.idGrupo}},update:function(o){var e=o.grupoEstudiantil;return this.ventanaDeshabilitada=!1,e},fetchPolicy:"cache-and-network",subscribeToMore:{document:c()(Bi(),_e),variables:function(){return{idGrupo:this.$route.params.idGrupo}},updateQuery:function(o,e){var t=e.subscriptionData.data;console.log("Subscription response nueva respuesta");var i=o.grupoEstudiantil.actividades.findIndex((function(o){return o.desarrollos.some((function(o){return o.id==t.nuevaRespuestaDesarrolloEstudiantil.idDesarrollo}))}));if(i>-1){console.log("En ".concat(o.grupoEstudiantil.actividades[i].nombre));var a=o.grupoEstudiantil.actividades[i].desarrollos.find((function(o){return o.id==t.nuevaRespuestaDesarrolloEstudiantil.idDesarrollo}));a?a.participaciones.some((function(o){return o.id==t.nuevaRespuestaDesarrolloEstudiantil.participacion.id}))||a.participaciones.push(t.nuevaRespuestaDesarrolloEstudiantil.participacion):console.log("El desarrollo no estaba en estaba actividad")}else console.log("Subscripcion response no encontró actividad que tuviera ese desarrollo");return o}}}},components:{IconoPersona:Je,Actividad:Gi},data:function(){return{"idEstudianteAñadir":null,idEstudianteSeleccionado:null,idActividadSeleccionada:null,esteGrupo:{estudiantes:[],actividades:[]},verTodasActividades:!1,ventanaDeshabilitada:!0}},computed:{usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")},actividadesOrdenadas:function(){var o=this.esteGrupo.actividades;return o.sort((function(o,e){return new Date(e.fechaUpload)-new Date(o.fechaUpload)})),o}},methods:{addEstudianteGrupo:function(){console.log("añadiendo usuario a un grupo estudiantil"),this.$apollo.mutate({mutation:c()(Mi(),Ue),variables:{idGrupoEstudiantil:this.esteGrupo.id,idEstudiante:this.idEstudianteAñadir}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},removeEstudianteGrupo:function(o){console.log("Retirando el estudiante con id ".concat(o," del grupo con id ").concat(this.esteGrupo.id)),this.$apollo.mutate({mutation:c()(Vi(),Ue),variables:{idGrupo:this.esteGrupo.id,idEstudiante:o}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},crearNuevaActividad:function(){var o=this;console.log("enviando mutacion de crear nueva actividad"),this.$apollo.mutate({mutation:c()(zi(),Ve),variables:{idGrupo:this.esteGrupo.id},update:function(e,t){var i=t.data.crearActividadEnGrupoEstudiantil;console.log("respuesta: ".concat(JSON.stringify(i)));var a=i;try{var n=e.readQuery({query:Qi,variables:{idGrupo:o.esteGrupo.id}});n.grupoEstudiantil.actividades.push(a),e.writeQuery({query:Qi,variables:{idGrupo:o.esteGrupo.id},data:n}),console.log("cache actualizado")}catch(r){return void console.log("Error actualizando cache: ".concat(r))}}}).then((function(o){console.log("respuesta. ".concat(o))})).catch((function(o){console.log("error: ".concat(o))}))},eliminarActividad:function(o){var e=this;console.log("Evento de eliminar actividad ".concat(o)),this.esteGrupo.actividades.some((function(e){return e.id==o}))&&this.$apollo.mutate({mutation:c()(_i()),variables:{idActividad:o,idGrupo:this.esteGrupo.id},update:function(t,i){var a=i.data.eliminarActividadDeGrupoEstudiantil;console.log("data: ".concat(JSON.stringify(a)));var n=a;if(n)try{var r=t.readQuery({query:Qi,variables:{idGrupo:e.esteGrupo.id}}),s=r.grupoEstudiantil.actividades.findIndex((function(e){return e.id==o}));s>-1&&r.grupoEstudiantil.actividades.splice(s,1),t.writeQuery({query:Qi,variables:{idGrupo:e.esteGrupo.id},data:r})}catch(c){console.log("Error actualizando cache")}}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},eliminarParticipacionDeCache:function(o){var e=o.idParticipacion,t=o.idDesarrollo,i=o.idActividad;console.log("Eliminando participacion ".concat(e," del desarrollo ").concat(t," de la actividad ").concat(i," de cache"));var a=this.$apollo.provider.defaultClient,n=a.readQuery({query:Qi,variables:{idGrupo:this.$route.params.idGrupo}});console.log("data: ".concat(JSON.stringify(n.grupoEstudiantil).length));var r=n.grupoEstudiantil.actividades.find((function(o){return o.id==i})).desarrollos.find((function(o){return o.id==t})),s=r.participaciones.findIndex((function(o){return o.id==e}));if(r.participaciones.splice(s,1),console.log("data: ".concat(JSON.stringify(n.grupoEstudiantil).length)),r.participaciones.length<1){console.log("Este desarrollo se quedó sin participaciones");var c=n.grupoEstudiantil.actividades.find((function(o){return o.id==i})),d=c.desarrollos.findIndex((function(o){return o.id==t}));c.desarrollos.splice(d,1)}a.writeQuery({query:Qi,variables:{idGrupo:this.$route.params.idGrupo},data:n})},reloadEstudiantesIdle:function(){console.log("Reloading estudiantes idle"),this.$apollo.query({query:c()(Ui()),fetchPolicy:"network-only",variables:{idGrupo:this.$route.params.idGrupo}})}},beforeRouteUpdate:function(o,e,t){console.log("Saliendo de ".concat(e.name," hacia ").concat(o.name," ")),"ActividadesDeGrupo"!=e.name&&"ActividadesDeProfe"!=e.name||(this.ventanaDeshabilitada=!0),t()}},qi=Fi,Ji=(t("3074"),Object(p["a"])(qi,ai,ni,!1,null,"291b0384",null)),Zi=Ji.exports,Hi=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"actividadesDeProfe",class:{deshabilitada:o.ventanaDeshabilitada}},[t("loading",{directives:[{name:"show",rawName:"v-show",value:o.ventanaDeshabilitada,expression:"ventanaDeshabilitada"}]}),t("icono-persona",{directives:[{name:"show",rawName:"v-show",value:!o.ventanaDeshabilitada,expression:"!ventanaDeshabilitada"}],attrs:{estaPersona:o.esteProfe}}),t("div",{attrs:{id:"listaActividades"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idActividadSeleccionada=null}}},o._l(o.actividadesOrdenadas,(function(e){return t("actividad",{key:e.id,attrs:{estaActividad:e,seleccionada:o.idActividadSeleccionada==e.id},on:{clickTrianguloSeleccion:function(t){o.idActividadSeleccionada==e.id?o.idActividadSeleccionada=null:o.idActividadSeleccionada=e.id},participacionEliminada:o.eliminarParticipacionDeCache},nativeOn:{click:function(t){o.idActividadSeleccionada!=e.id&&(o.idActividadSeleccionada=e.id)}}})})),1)],1)},Ki=[];function Xi(){var o=Object(r["a"])(["\n          subscription($idProfe: ID) {\n            nuevaRespuestaDesarrolloEstudiantil(idProfe: $idProfe) {\n              idDesarrollo\n              participacion {\n                ...fragParticipacion\n              }\n            }\n          }\n          ","\n        "]);return Xi=function(){return o},o}function Yi(){var o=Object(r["a"])(["\n        query($idProfe: ID!) {\n          publicUsuario(idUsuario: $idProfe) {\n            ...fragResponsables\n          }\n        }\n        ","\n      "]);return Yi=function(){return o},o}function Wi(){var o=Object(r["a"])(["\n  query($idProfe: ID!) {\n    misActividadesEstudiantilesDeProfe(idProfe: $idProfe) {\n      ...fragActividad\n    }\n  }\n  ","\n"]);return Wi=function(){return o},o}var oa=c()(Wi(),Ve),ea={name:"ActividadesDeProfe",components:{IconoPersona:Je,Actividad:Gi,Loading:So},apollo:{esteProfe:{query:c()(Yi(),Ue),variables:function(){return{idProfe:this.$route.params.idProfe}},update:function(o){var e=o.publicUsuario;return e}},actividades:{query:oa,variables:function(){return{idProfe:this.$route.params.idProfe}},update:function(o){var e=o.misActividadesEstudiantilesDeProfe;return this.ventanaDeshabilitada=!1,e},fetchPolicy:"cache-and-network",subscribeToMore:{document:c()(Xi(),_e),variables:function(){return{idProfe:this.$route.params.idProfe}},updateQuery:function(o,e){var t=e.subscriptionData.data;console.log("Subscription response de nueva respuesta");var i=o.misActividadesEstudiantilesDeProfe.findIndex((function(o){return o.desarrollos.some((function(o){return o.id==t.nuevaRespuestaDesarrolloEstudiantil.idDesarrollo}))}));if(i>-1){console.log("En ".concat(o.misActividadesEstudiantilesDeProfe[i].nombre));var a=o.misActividadesEstudiantilesDeProfe[i].desarrollos.find((function(o){return o.id==t.nuevaRespuestaDesarrolloEstudiantil.idDesarrollo}));a?a.participaciones.some((function(o){return o.id==t.nuevaRespuestaDesarrolloEstudiantil.participacion.id}))||a.participaciones.push(t.nuevaRespuestaDesarrolloEstudiantil.participacion):console.log("El desarrollo no estaba en estaba actividad")}else console.log("Subscription response no encontró actividad que tuviera ese desarrollo");return o}}}},data:function(){return{idActividadSeleccionada:null,actividades:[],ventanaDeshabilitada:!0}},computed:{actividadesParaMiGrupo:function(){return console.log(""),!1},actividadesOrdenadas:function(){var o=this.actividades;return o.sort((function(o,e){return new Date(e.fechaUpload)-new Date(o.fechaUpload)})),o}},methods:{eliminarParticipacionDeCache:function(o){var e=o.idParticipacion,t=o.idDesarrollo,i=o.idActividad;console.log("Eliminando participacion ".concat(e," del desarrollo ").concat(t," de la actividad ").concat(i," de cache"));var a=this.$apollo.provider.defaultClient,n=a.readQuery({query:oa,variables:{idProfe:this.$route.params.idProfe}});console.log("data: ".concat(JSON.stringify(n.misActividadesEstudiantilesDeProfe).length));var r=n.misActividadesEstudiantilesDeProfe.find((function(o){return o.id==i})).desarrollos.find((function(o){return o.id==t})),s=r.participaciones.findIndex((function(o){return o.id==e}));if(r.participaciones.splice(s,1),console.log("data: ".concat(JSON.stringify(n.misActividadesEstudiantilesDeProfe).length)),r.participaciones.length<1){console.log("Este desarrollo se quedó sin participaciones");var c=n.misActividadesEstudiantilesDeProfe.find((function(o){return o.id==i})),d=c.desarrollos.findIndex((function(o){return o.id==t}));c.desarrollos.splice(d,1)}a.writeQuery({query:oa,variables:{idProfe:this.$route.params.idProfe},data:n})}},beforeRouteUpdate:function(o,e,t){console.log("Saliendo de ".concat(e.name," hacia ").concat(o.name," ")),"ActividadesDeGrupo"!=e.name&&"ActividadesDeProfe"!=e.name||(this.ventanaDeshabilitada=!0,this.esteProfe.nombre="Profe"),t()}},ta=ea,ia=(t("cdbf"),Object(p["a"])(ta,Hi,Ki,!1,null,"0f4fda29",null)),aa=ia.exports,na=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"portadaActividadesEstudiantiles"},[t("div",{attrs:{id:"cuadroCentro"}},[t("center",[t("h3",{attrs:{id:"titulo"}},[o._v("¡Hola!")])]),t("p",[o._v("Selecciona uno de tus profes para ver las actividades que te ha enviado")])],1)])},ra=[],sa={name:"PortadaActividadesEstudiantiles",data:function(){var o="Escoje una";return{mensaje:o}}},ca=sa,da=(t("064c"),Object(p["a"])(ca,na,ra,!1,null,"b57d0b6e",null)),ua=da.exports;i["a"].use(Q["a"]);var la=[{path:"/atlas",name:"atlas",component:Po},{path:"/login",name:"loginArea",component:Vo,beforeEnter:function(o,e,t){null!=L.state.usuario.id?t("/miperfil"):t()}},{path:"/miperfil",name:"perfilPersonal",component:re,beforeEnter:function(o,e,t){null!=L.state.usuario.id?t():t("/login")}},{path:"/nodoConocimiento/:idNodo",component:ve},{path:"/proyectos",name:"proyectos",component:je},{path:"/proyecto/:idProyecto",name:"verProyecto",component:kt},{path:"/registro",name:"registro",component:Vt},{path:"/actividadesVirtuales2021",component:Zt,children:[{path:"grupoEstudiantil/:idGrupo",component:Zi,name:"ActividadesDeGrupo"},{path:"actividadesProfes/:idProfe",component:aa,name:"ActividadesDeProfe"},{path:"",component:ua}]},{path:"/personas",name:"personas",component:ii},{path:"/",redirect:"/miPerfil"}],va=new Q["a"]({routes:la});i["a"].mixin({data:function(){return{serverUrl:T}},computed:{authHeader:function(){var o=localStorage.getItem("sesionUsuario");return o?(o=JSON.parse(o),o.token?(console.log("introduciendo header: ".concat(o.token)),{Authorization:"Bearer "+o.token}):null):null},usuarioLogeado:function(){return!!this.$store.state.usuario.id},usuarioAdministrador:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("administrador")},usuarioSuperadministrador:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("superadministrador")},usuarioAdministradorActividadesEstudiantiles:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-administrador")},usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")}}}),i["a"].config.productionTip=!1,new i["a"]({render:function(o){return o(A)},store:L,apolloProvider:M,router:va}).$mount("#app")},"586b":function(o,e,t){"use strict";t("6632")},"591b":function(o,e,t){},6034:function(o,e,t){},"608c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAA21BMVEUAAADe1cXe2sj+qKbf38/UxrHf3s/gyKv/1Krm1cXg2sm+taS7tab149PsyKj47OHsyKrcwKHf3c3e28rZw6be1sPh077bz7jbzbja1cLd1L/b1MLi0rrZ0Lzd1sTOqo/t6N3f18PRzLvEvKy+uarg0rvQuaLMzLLg4NG6ua3e3s/////c3M29vLDZ2cq/vrLMzL7S0cPFxLfX1snJyLvPz8HPzsHFxLjw7+jFxLrz8/D89vLHx7n79O7T08T9/fvCwbS4t6vv7OTk49eysaX5+Pbq6ODy8vD68+36XNSUAAAAKHRSTlMAH98C+Gz7lQYf3x/fphyUKhX0/TPfp3lQ6a2VYlg5HPbp39/fhQsKsqhnhgAAAgRJREFUaN7t2VlT4lAQhuEDOPs4MwkIuM+MG2lONkIMaowgbv//F+lFyi5jFTmQprWwn9tcvMUHOUkVSgghhBBCfGyNr7M11FK0up0vs+1Yil7r6J+99nm2v+t/FDWr3eyVGj2s/1LEdrA7I9y/+E1ctrZ6RuH+BfHatQ3DcP+Sdu1a3TSMazOHcW3mMK7NHMa1mcO4NnMY12YO49rcYVybO4xrc4dxbbbwFWZxbYbwNYZxbbow6CLIr9xhGNcmC0OQFKRRXp7eYhPXpgrrxClwQ3i9Na7NEZ6O8DPj2lThoV8wzuD56vRudP7C/XXbogmD94rGizo+Kzr4QRAupwPXeeknTxh07HOGEUA4Xk4YSmVjZ0Ifhiwuc5pObibkYZ065W6WEU4cA37K+olR4gUu+Xd8aiADHbiMv2r0NE3sk4bnuqFZwwiyAWsYQZTQhUF7BjTkj7KULKyHvoGh7uXl4JD1ABno54H+c4dzUK9RvWUODAT4NvT9G9l7tQHs0oTNSZjtIUEfhnhoIIZCmO8+XqFw6hpI6cPgRQY8WJ1ftRwgfAdIFBqIYHVup3d+ciX0YQgDA6EcIBKW8CqF628WrpH+cW1uo0rYasOiXdiyVAW7zUW7zV1Vxcm2DQt17e1jVcl+Z9Nem5u92dlXVbX2up/m1N1rKQqNuSkhhBBCCPGhPQIr3ZzxPqpFsgAAAABJRU5ErkJggg=="},"60ee":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAMAAAAPdrEwAAAA3lBMVEUAAAD/9fT/6uX/4eH/7evV1Nv+7uz/7OnS1d3/9/X/6eb/6OXU2ODaztL/3t7W0Nb27u7S1d3Y2+L14+Lg1tvQ0trR1t/uu7u/n5///////v7T1d3s7PA10Zb8/v0x0JPu+vXw+/dz3rM50Zc00JWt69Ns27D2/Prz9Pb5+vrY2uHo+fLu7/K57dhX16X6/fzv7/Li+O9C05vV19/k+PDf9u3F8N+y69Sd5smI4r6E4bx437ZR1qNO1aHz+/f09PbV8+fd3+Wp6c+W5cVw3bJn261e2ald2Kla2Kfw8fNijA/eAAAAGXRSTlMA+1ka2c5B2dbCtllQTC9X59jWuWxiWQ8IBi+1PwAAAb5JREFUWMPt2GlPgzAYwHE3ZffhrStbwa2KkzHcfcGcu/3+X8hnWTaMBkalTSDpP+EFb34h5WnS9EwkEomi1Lmv/iMnMsmL093k6eVCGvmpLNHb2VjJTw1ZKtLScX/0uyxLeW60nCpyoiEpx4mGrnKcaEi6p6VRvVF26wMfaSiVo6XLsmuf9f3wHey7R0q6c4L+ejt0ffvAbEHQjq6/HrtM0NCAu1f6VSzObEKC0shXDk2/1t416oiehgnxUaccLtr3goTpN3oW4rn+E4L40EhvtXTEhVZHljVS+dBVRakKWtCC9kOjnzRiSWtd06HNrsaO1uaTvnmgzf5krrGiTcNWNoa2pzVjo9iGyYhWR4SQ5kDf0fqgCS8jlRGNZ5MaIdZwpSiroUVIbTLDbGiwe2Ow2+39Uxv3MLsJQfoCzAoE+kJne5xUh7ayoxV7qLLejdNBEz4b/uaU+UZHmrEmZG1oiDUN4f5y2cd8ziG418PROz0xprFHgWgYi2fXYFiC0N1tpeZSZdsKRsM+cYk0g9EtfrQ+fnFtrAegwX7yCIV2rqNDZ+npLMXFJ13pAtPrWqdkJsH6ktnpTCQSiSLUN5DlNzinQAMLAAAAAElFTkSuQmCC"},6294:function(o,e,t){},6632:function(o,e,t){},6993:function(o,e,t){"use strict";t("a7ad")},"743e":function(o,e,t){},7972:function(o,e,t){"use strict";t("ade7")},"7ef1":function(o,e,t){},8232:function(o,e,t){},"85ec":function(o,e,t){},"8bfb":function(o,e,t){},"8ee4":function(o,e,t){"use strict";t("4fac")},"8f8b":function(o,e,t){"use strict";t("cf83")},"902a":function(o,e,t){"use strict";t("181c")},"9b3c":function(o,e,t){"use strict";t("0cef")},a14d:function(o,e,t){"use strict";t("8232")},a263:function(o,e,t){},a7ad:function(o,e,t){},ade7:function(o,e,t){},ae3d:function(o,e,t){},af07:function(o,e,t){},b2f2:function(o,e,t){"use strict";t("230a")},b3dd:function(o,e,t){"use strict";t("ae3d")},cdbf:function(o,e,t){"use strict";t("591b")},cdcd:function(o,e,t){"use strict";t("ed59")},cf83:function(o,e,t){},d78a:function(o,e,t){"use strict";t("6034")},e048:function(o,e,t){},e463:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs30iGAAAAN3RSTlMA+/cHAwr08BJt5NkkFu3fHg7qyC/nUNPOimZGKLy4s6yofEEsoJqPdVo0PTkalITAgMOlYVZKbX+RxgAAA7xJREFUWMOtmOd2ozAQhQWmmF4NphgMxGBwb9H7v9nam42DzUyyAd9/HHQ+SaM7o0J+llsljmIYin+cS2MyXNqc3iVI3HCgq9AvLUbDgWujBcz44cB3uwWcDQ8il7MtoOIOX5MZbYmVfg2wrMdviaVtOerTBH7Ajeq9E7YDHyn0UVX77zgsl5vveOPlhFL9YH5+896UPkk8aPfmZiBQJnNxnhbof+2bnFXuhmt2Bu1IXKxGH717qXD9ZmYNGr6tQP+KEf3TYRmkBksBMXIWRoWXz2zmX1xXyHwrhv6vWKHdl9OA4zsItK+SGDCwZNPeYhZaB2g6dIDYsAN8U+gQVR2H81t2AE+sSUfqnOnNE3YW6apReq/JHM6/vO8Q5QKgDVmXOY+UmrQnEC2S255LHGHAoB9QX2PAkqJiGAYfYYGVrxmSV0q63R2CxdFGOjsjwNUExO1DdTy6itdWWxkkItv/aAv17ktaqyStTiLQyACDyNUTgJesO7sO0KqE9n/Ph3JK7RSRECDqeWfSm6XCdHmOC0RmKQLEwPyaqqWZjeRArrA9cG/MKCDnrI750Y33nu2nMmyyEs7RQgbd4KenoODIZkYxTRDDcngC+GvSyOjflMdOeCLFtCSF/c1PRJspxbQjHtqbgBYRK0OBJbmwaAhj9IxWocAFqVGgoaLAHVp6MnJ5LfBEPAGtmw0G5MtvphzpaE2t0XNpggIrsp6gP7cY8M2gmHJiHikWkKmJACU0hOyZcF7qKxP4qCrBPG0Pw/SJfDIJ4bS4iXLQ+w68zkuoeyFZetFqczdCHOhAn5UFbT0KwDvWGvfkLegEa4fd7SeeAZU4UwFz7QBHyuHzGN05wEvALDWPUEIH6kOv3pEBuo1+4QbWCbV7WJrSBtqg13LXgLxzRQaXday6kZTJsF8uWEbt0dJoG4YsYnY23shLz4d4RvHJi4GbaT+g4SLASOwHZGskhGUvHP74Esl9gfY7xLvlaE8xsxgw4YIZcL09aR0gcIIYti5reQiQCbuurtgBQCd+7fVWAZfZnfXlyWeOgMR7tRGmZZ5vHQEBiH6S+DrztVFwBFbzYUVx7t12HO72dATc0ZRgdb0Ijdf5lP03PoLKnV/bGF9Pt5ud3jFIuvocT1zd/vo1R3CZlb+/jNqvQ89r3765WJIiJAVHvhNvbh4ajLOn2uc+1BO3MGEermICvHAOkZU+DFAdDOQOzGvfsbmQbXkm58hg1UILKPUC4oVc98hwWbk/0cWrdFsJNPIC8Wb89iHVIj/qD7BjzjdOJ9y+AAAAAElFTkSuQmCC"},eb75:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAq1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0NbREAAAAOHRSTlMDAPn132Hj8OpwrhEH5IE9wLJzbmlJOSXTGAzXyLiqoUS9npJ3ZFtUQi0dzpmLWDQg4ZYnxI6ITWxxw1sAAAILSURBVDjLldPnkqJAFAXgnm4cGECCoiJRQDHndN7/yRZskYZ1x9pzf1glHx3uLUgjX40QIW33/5KURT7L39A432bOiJBP0LQpgGD3acWVjUdc8wPs45mM/Bo9rWCgEW3QyffeP6BaQXds2uyoKPHivTQqGI1VqGnkwp++XXTxzR2d7RPVhhsCSJfvZE8uGbtqE1UC1ARFwr+3n//stnEcp3EWKoVXn0e+DFpuKYEyWZYZBcAsNXz1oCUPNjeUKUHWuSl4xTIro43ORZl537hmW8OZD89nx0cd9VD15fuZbl0MQq46hzE+hM043OBt6LE+5vgBTZXCMn56dfVSBsm5BxVk/Ob6CcGeiBlMXciZYdFK8r29BKeGc2S00uFfgIup6LSk7ZQh77VEZyIcSW1oa3x6Cr2LcMGeV6iy3vEHQ1k2RTh7jBLJYDKZLIoyR9UdWXcpwm3pJNheuchPv6oZ6VD/IDjPBtCNcCkPdsIrEulhPeamagKwNh5/eqEIb7A0Ae4VAFGHSsU2K1+EG9i6AOcUgDFgyrJ8SYQRUhFOAdCct2JORZhgKzg9foxiqbB7+ZII140JahcA/mp0pDnRNw3owxEHeAQQeisXfaJZDSjRuQAnDMCJaAEMfmkBskH70v2yg5tiuE0oDwU47AJdk+gRIn1HUZdEjNuKfNXlWJZT/OYbRx91hOz+ADAngceLu7XQAAAAAElFTkSuQmCC"},ed59:function(o,e,t){},f0d1:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAh1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD3YishAAAALHRSTlMAHWYM844W+fbOXRF7rtQHbBPl3NiGVcSrdjLqx7M6JebtiVG2PDmSZUW4lkeFA2IAAAKHSURBVFjDpZfterIwDIZTOlS+XgTlQ1FEdLp34/yPb6R0VCjYcvX54bVR7tCmSdrAnEiaBE61aZpN5QR1SmCRPu1dM9Lu+alLewdOSzYOng5efzSz+qiVJrZX/u46s90HoQCUPNw6W/PH1+1b/HLidH6jwxF6y7mN02Wed7vZV340NRr5VbcOd463u3Gfwoyo333BnhwNAzZ4frvj5MxeCsIJ/htHNhYoZG3wvbtsgX0/PoJSx5jNYXL9e62AJfsJP7iMX4GWVsyCO9h/9G6snTAkxt16jYcT+u8I2jqiJ08v8YtT+oIFspDoo9q74v7DIp0xL/4yq8YVLawYBL2W8Ang3z4slI9f7aZwwPyhGsz/w5fYaFq02AFQO70JrNhWuYMp7Fj9w/yP1Py/rlL0mx1hfSh5EOd6POrZP8oxoPkKbtp8c++fpRj9AATnRbX55ke4EddAmJ1Mlxc+QGXt/ykk7W+tzYuA595LWCFxtXlrXAMCcNrfBwjRZ7E+3XR4KNsnDlTME71Ch725VfOd/2PAzKajzEYLah4ohibgyLC2cgtKHkLGygaEBZmXDchLEBYUPF+C7MRevszLTpS2MXqxIPPyNsqBFDk6vAikRDplIkfNi1CWkwktqHmRTHI6owUVL9JZKijcgpLnBWWupHmOiuclbbaoRo6KX7GiOl/WvUxUcVmirPODpaBT54hF5nlxsJgfbZAYHK5Gx3vhDXLYWnzBsAyvOJnxJcv0mmd60TS86uZyib0vu2ybXffz0LDhULQ8hb+abnkK0fIom6503HSlf01XdtFv+0pCw5CS0rX7tq9QetlL3jWeiWfa+mqqtPdjem+XSkxu/2Ns/2MnSObb/1/3C6xgJU1VjAAAAABJRU5ErkJggg=="},fc23:function(o,e,t){"use strict";t("e048")},fe38:function(o,e,t){"use strict";t("8bfb")}});
//# sourceMappingURL=app.f35ad271.js.map