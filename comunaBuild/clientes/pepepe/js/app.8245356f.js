(function(o){function e(e){for(var n,s,r=e[0],d=e[1],c=e[2],l=0,v=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(t,s)&&t[s]&&v.push(t[s][0]),t[s]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(o[n]=d[n]);u&&u(e);while(v.length)v.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var o,e=0;e<a.length;e++){for(var i=a[e],n=!0,r=1;r<i.length;r++){var d=i[r];0!==t[d]&&(n=!1)}n&&(a.splice(e--,1),o=s(s.s=i[0]))}return o}var n={},t={app:0},a=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return o[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=o,s.c=n,s.d=function(o,e,i){s.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:i})},s.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,e){if(1&e&&(o=s(o)),8&e)return o;if(4&e&&"object"===typeof o&&o&&o.__esModule)return o;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var n in o)s.d(i,n,function(e){return o[e]}.bind(null,n));return i},s.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return s.d(e,"a",e),e},s.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},s.p="/pepepe/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],d=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=d;a.push([0,"chunk-vendors"]),i()})({0:function(o,e,i){o.exports=i("56d7")},"0108":function(o,e,i){o.exports=i.p+"img/key.d04dfc48.svg"},"0349":function(o,e,i){o.exports=i.p+"img/home.fa2c07da.svg"},"034f":function(o,e,i){"use strict";i("85ec")},"0480":function(o,e,i){"use strict";i("49f9")},"04e4":function(o,e,i){"use strict";i("16be")},"080c":function(o,e,i){},"0aba":function(o,e,i){},"0bab":function(o,e,i){"use strict";i("080c")},"0c7b":function(o,e,i){},"0d4e":function(o,e,i){},"0d50":function(o,e,i){"use strict";i("60ac")},"0d63":function(o,e,i){},"0ddc":function(o,e,i){},"0ecf":function(o,e,i){o.exports=i.p+"img/thList.b39fb484.svg"},1:function(o,e){},10:function(o,e){},1070:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAApVBMVEUAAADM28LI2L3h5tzj6d7R3srn7eTL2cPT38vW4s7g6uDF1bvH173C07fa4NTO3cTk7N7W4tPK2sDa5NTi7OLo8Oja5NXJ2b7M28LD1bfk7ODZ5dLY49DR38jd59fV4czT4MvP3sbP3cXK2r/H2LzW4s7S38rS38nQ3sfL2sHF1rna4tL////5+/j9/v3u8+v3+fXw9O31+PLy9u/7/Pr4+vfr8egF2h3MAAAALHRSTlMAcFEYHCQVFQUcDxkRDAh8ICBjJhEMAVc/KyjQx5XwrqiJg11Ku6Kcj2o4NHigeIkAAAKNSURBVGje3dl9U+IwEAbwR0opUKjg8S6e53nvV+RFuO//0W4SZXYYzG5owo74/COObX/QNLuGwDeDtMBBmmkDMZNkcKTZiyN8gpBWqNAIPyzie+xXJGYQEs60FU5pokpGOCGVH8ws4ND4KRCUITxSV5hbfQQnDygi0SbxX0RJ54yfg5IpGEAi/iG+Ej4/wgvT5ckBzTq0513ezWrD5FIuK5f3+OlCyKV8EP7SVxUzPqVflhWzOF4NUIuJicgJR/xb1enva+U6oyN9kltv42fA7fJV7oTbVXcgm6U567uX8dUcuiLk6OHNHcgSVrn3NdZ4IkQKIVibk79AyvWLUQ15Ve78DA4ZMAgpssEgXaQMslceJOMZPJLxCJ7NRa7dlZSMimNCypXjuN9kBCC8ckNGIIKNudQNY4QipIwZIxQhpfaWsUEUhAr55OCQRzIiIKRMQRmTEQ3B9lD5ZusuIiOlTU4GFfZoSPmaLkwm1KNiIHR+uV2Y65qWXTMv7P3bRUHIeAKs8m++fBmPpv0RByHDKCb7i+ekBCFk0JNMz+6UXvJILiBk2Mztb/uWPCGFRSYcQoYjY59S30IiIFtr8E1rzSNDZkxoosstPmDgyWDyqzQHC0jOIAtrCPlhFR6puxAyhNzbOepEOuzt2lGx4jO3SpUx2a2o7Eq5taNfMsiMWTpM4ZfP7qVDKq1P/gCnKNztGrmQ3WPNNw9HiOYSu62w+qXUz4dk0M0MZ0oC7QxxlgzEeRk/Iwh5r9/eJW8Vsg8Tna2Nhso0bCE8cs1KFYxoSiFumIano7AjlClU57bCplDxrnY9ejqdsKPSMAY67bWvs3XZ0+l57a7OfuJMaYs3KZT+NRimIxym793k/gPFdL6ma6aH6QAAAABJRU5ErkJggg=="},11:function(o,e){},12:function(o,e){},"12d9":function(o,e,i){},13:function(o,e){},1376:function(o,e,i){o.exports=i.p+"img/plusCircle.2de4ac5c.svg"},14:function(o,e){},1414:function(o,e,i){"use strict";i("4d6f")},"14f4":function(o,e,i){"use strict";i("4db3")},"14fd":function(o,e,i){"use strict";i("ddf0")},"16be":function(o,e,i){},"190a":function(o,e,i){},1926:function(o,e,i){o.exports=i.p+"img/arrowUp.25a9000e.svg"},"1d54":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAnFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4jUzeAAAAM3RSTlMA+xEW+PI/BSPvyIob4YV/XzwfAnZyZUeUVgnqwrdrNg7Tz7utb9vVv6SdmEwxKeWyjk9WFiZCAAAB0ElEQVRIx+2U2bKqMBBFu0kgcJhFQHGeZ8+w///frmKdstSEK+9nvVCws6pJuiv0xyOB00/6qaB3caMN44qcx8E7QmfH9XJP1o/D/0slNjDolSKjLPjZX1+OzULmA15e0S/T2AbnjcrFGHaIqtJffp3oynkGNDkJsKxIjUNc+KYa6wNcmnduY1iR2AJYL3su3RBrfFomZQevQ2IGfE0yujOR8E39YOSkFuBx9hj0YBvKRBhUVACrlx9mjPXKBj1Sayyyl2SEhX6uGD+UAs5rlMNWOsUBAooRKm3k6pQ+ZEY7jHSnD6T6PtoZ9RBpIgGU+iqsqHKU7vgNVVKgQ3ocsHYvQqJvULrwlDaYY29Qthjpg7ieC8fzNZNU6JVAIiYqsH0O9vCmpOcA+0yqFM+bZ0RkQAwwt16LhwinZOLIGFrPxhzSITM5MDs9disEF9REzpC+uA/XgSELEZ+bnPITkMtiIqbBZDViIHTIxyDxo5PRsXwbVxhXvGhKNKm/cJfM0nhxW+ONitthjIFNCHSpAeWmZeqq+30xU9aHxjHzjdCido4DDNs60a/DqzbOR+1I920nrh3BSKiVIxy0UajLYMAT1IKVvBhHaoWb9AX9ceEfSSU0mMLFKFUAAAAASUVORK5CYII="},2:function(o,e){},"206e":function(o,e,i){o.exports=i.p+"img/save.80d69428.svg"},"20dd":function(o,e,i){o.exports=i.p+"img/times.2c5552a1.svg"},2191:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA9CAMAAADGfvrlAAAAtFBMVEUAAAAAAAACAgIAAAAAAAAAAAAGBgYAAAAAAAAAAAAFBQUAAAABAQEGBgYCAgIAAAAAAAAEBAQFBQUAAAAAAAABAQEDAwMCAgIAAAAAAAAAAAAFBQUAAAAGBgYAAAAAAAAAAAAAAAADAwMBAQEAAAABAQEBAQEBAQEBAQEDAwMBAQEAAAACAgIBAQECAgIAAAAAAAABAQEAAAAAAAABAQEBAQEBAQEDAwMAAAAAAAAAAAAAAAAAI6fdAAAAO3RSTlMABQvg9KseO8T3ho92RZ0X129r+9M/KzjxyZkU3Q/ov7ykMiHOtV5SJRqplEx/ZK6gconruWhZQwmCwUKZof4AAAMbSURBVEjHpZeJlqIwEEUDuNGiIiACoqIi4761S9vv//9rwgxYgqB4fMfjEnOTkKpUVViuxN7E7HbNWasvsLfUq7aXniENLGsgGUOn3WkVJfurum8hIctf/umx15prxxKAkjvcHZR2W/naeWo4lDzcT17NevrVgcFUaVTE28NXOsp2AMDeP519teWof+1GIEnorm0A0z/5+6tIgKHkrK6y5/j3OmfyWROw6mOWq9nhGxhlduhMAfvMnuqPB3idDHZIo+bL3AHDS7q1y1mnkmocbzbdVFPrwOnU3JMyUO+nOgYq4J5YSmvgaCYssQSa6X2c+PB9qGbaanXe936eto7t5MHosjs2Df3BtPMRoNw9sAGjEw/cinXSDXNW09u3hp94K2y4jdtCmtC1eNN3hhpJAlRVhxT/NhareDNKGImx9fj3aFSzBjlXMKrRbA7kIPLKBQbxKvbwg0aky78XKbBxjbpVXUz7/zemhCWLVIfDcnXAKA4qX5DP0Rq+OwTbX7n6JXgsYRE+qck/BXYb8amcW0cHg9CXN7q+IQ93yk/UXNERkbHnq97Bnd35z1PdeYqBrcBaBsoCe19NuBPWtaAkm09Knz2quk4eMA2lBgt0eZUMN6pF3Uh1XJPn34LG1hiYSVgqVTOXWU/GJIk3OFDnWTDfh/hdyIJ7PkZsAbufAZvLTWjGpcm7HZQMWPyFx46oiRnwCZ7IRA98iGrJrTzCwhQ1VsuG22GzWIMWwlIWXIbNjm/DNDM985sw/8+j3S4M026TnQvDZGfysMIweRj5dmGYfJtOVWGYThWd58IwnWeKJEVhiiRRDPt5A6YYRtGzMEzRk+J2UZjiNmWMwjBlDMpVYgrWIniTgilX0XddIyOoMk/JF/srXJ194Y445blc2II3JLPkY35mPws44RhCOOyccbX6vIurB+whPz9WBoGuX+dCQmJ1gVolqzKgmoR+GNPyvTwJ0vm+JhFzq6He2tWRlOydU9VQfh1mBnvlXlqjlarDPq8ASdX3as/Pq97P6+3PK/3Xd4x27/Pbzef3qs9vdK/vkmJuvfMXl9icGVrQDtsAAAAASUVORK5CYII="},"21eb":function(o,e,i){o.exports=i.p+"img/calendarPlus.9eea55d5.svg"},"22d5":function(o,e,i){},2379:function(o,e,i){"use strict";i("b9f4")},"280a":function(o,e,i){},2840:function(o,e,i){},2874:function(o,e,i){o.exports=i.p+"img/readme.89c2c90a.svg"},"28f6":function(o,e,i){"use strict";i("190a")},2977:function(o,e,i){},"297f":function(o,e,i){},"2bb8":function(o,e,i){"use strict";i("fd3d")},"2c0c":function(o,e,i){o.exports=i.p+"img/starSolid.f10a25eb.svg"},"2cea":function(o,e,i){},"2cfe":function(o,e,i){},"2f8a":function(o,e,i){"use strict";i("fbb8")},3:function(o,e){},"33ae":function(o,e,i){o.exports=i.p+"img/angleDown.75a1ebbe.svg"},"341b":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAC+lBMVEUAAAAAAAAAAABxcXEAAACZmZl5eXk6OjpQUFBLS0unp6cnJycLCwsBAQECAgItLS05OTlOTk5JSUk3NzdgYGBhYWFNTU10dHR/f3+oqKgSEhIyMjIAAAAWFhYQEBAhISEWFhYQEBAcHBwxMTFCQkIBAQEzMzM0NDRJSUkqKio8PDwODg49PT1HR0cAAABBQUFCQkIEBAQHBwdlZWU6OjpXV1dgYGAAAAB8fHwwMDCLi4tFRUU7OzsjIyMEBAQAAAAbGxsfHx8NDQ0CAgIQEBBfX18CAgIpKSkoKCgQEBA1NTUvLy9bW1spKSk4ODgdHR0FBQUtLS0nJycYGBgzMzNAQEAtLS0iIiJWVlYeHh41NTUqKiomJiZNTU0tLS1CQkIcHBxTU1NFRUUxMTExMTEmJiYNDQ0tLS1VVVUxMTFPT08dHR1CQkI3NzcfHx8WFhYjIyNSUlIdHR1bW1tFRUVoaGgvLy8AAAAdHR0AAABbW1tKSkoqKipRUVFcXFwaGhouLi5zc3M9PT1ra2tcXFwYGBhzc3MuLi5NTU0JCQlSUlI2NjYgICBxcXFaWloQEBA8PDw5OTmLi4sHBwcZGRkNDQ1gYGAlJSUuLi4QEBA9PT0bGxsAAAAsLCwgICAyMjInJycTExMGBgYKCgoWFhYgICA+Pj42NjZNTU0UFBQiIiI5OTkEBARRUVFJSUkPDw9aWlotLS04ODgUFBRBQUElJSUnJyc7OzsiIiIpKSlHR0dFRUUREREmJiYaGhocHBxTU1M4ODhAQEAdHR1LS0tWVlYyMjIDAwNAQEBPT09CQkI9PT1YWFgsLCwNDQ1ra2tEREQ1NTV9fX1lZWVMTEwAAAAjIyNLS0sNDQ19fX1NTU0ZGRkkJCQ3NzcZGRlCQkJDQ0NOTk4SEhJeXl4BAQEtLS1DQ0M6Ojp3d3ePj49OTk5paWlxcXFkZGQWFhaVlZVzc3MAAABzc3MVFRVQUFAAAAADAwMHBwceHh4kJCQgICAPDw8vLy8oKCh/JHwQAAAA9XRSTlMALoADyQwGkSgRBwb++vXn5bWMZR8bDg0IBf79/fz59evl4NzZ2Na1n5SAgHx7dm5nVk9NTUA+PiwlFhb++/r49/b08vDv6Ofj4uDf3dzZ2dnV1NPRzcjHxsLAwMC/vbmxrKqpop+enZGGgoKAgICAfHp1dGtnZmZhXFhXVVRSUlFMSUhEQT09PDk2Ly4rKyQgHREJ/Pn49vX08fHw6+vq6enp5uPh3tza19bU1NHR0c/LxcG+urm3t7Wwr62lpaKgoJ6Zl5aTkpGPiYmHhoB/fHtycnBuaGZmYVxaV1ZWVU1KSkhGQ0A4NjQ0JyMjIB8fHRUVCt1yxO0AAAQcSURBVGje7dljsNxQGAbgr9ji3tq2bdu2bdu2bdu2bdu2rXfrmbb7Je3OtCfJnrP509nnx/2T95t3JslJcvaSj4+Pz//udd/06Z+SfYZfCJoDLPq+8M/I+7I3KxwC7qIVSRbcuxWRdhbA3+I0DOLFjmN58G+FkgXyUsXb5RCrPNIrHXdywEjOoaQunfv1zpswQd2ASRIkzIk/Qqq39M4NXaz9dyMQi9Cr/kTo8mdW7OgfE5rPLblB97LJF2hmDFbqGJsQmsRZ/zo4qjo0M5VWTG39vB+lf0kBzQaFjo5gudMJApc+csCZQb6ktPYESSdMXInBkWnSa78LWH2DZb0NrK1kR5RiPF/SKDQ+HofKSpYMA3tomOoGllGuJKn2dDJOBUrAsaRSHYEW8PQ1k1xqjiWSeh4H48WeK7JJzu+TKxfCX6YkI1xqmwYTc7CjTEkLnm1pGgzHwVMyJQF5Nr1pMC0HmyuUBDAN3uJgFVtLunNwla0lPTi4UqHkvtVrElTh7kpmGkzJwYAyJQN4drtpcBcH2yus+Fimb4rJ/N6KLFMSNS4P9zPJ3YRL8UAkozFP1zKJbeZYQ5LyCOyxYSoTmORbPnJoHq9gFPIvxaHZJKkd2BGDTDOwFCSrDFxCPRAmbofkSPRI0iUpobUMFL3gv4OlIXk1wHL1pH+5/gVsLSkYPQWapBH/OphtDzSx+aCs7iGhKdI7Crn70CcONKHukZquMaBbGDSL/oiJEjxcUei+nidVXeGmZI0DqVKlSlK1uBN/nCZ1XT7BSIwM5A2Z4kGsdEbyikGNIFZziDcqsqwzPl3RtmRSrcjWIBTMfN7tr9TRswysCN1BoaMp3H1MVCdc505pOqUJ3zlcnUROuAsqW/FmI/6IvemMg9w5UlSfij9GynWMCY3fZh381049eMo40KWV6sgaF7roHSILQpFuFADr8Wvb5O8fyLMPonjQJYlgdPuddGXCjCMaV82JOZnJOr9F0KzoZxINXxQoP4Ao6vpf8Xxjre8Xd0BT6r15+tzVX39HfPTwQ/KEE6yBg6wKwBOtLF/0WGCHyboAHm64loHVJM9LWluMpwZbHdG+kuzfOD4hGEmUJLeWbsNp52WyryRKbE5X8HAvMEIriRrVz8/h8DMOt+XwR4sna9DWwGwpz80vVy5+/DBh4lcaaLQOy3K4kcULOB0C+QeT0CiwYVZfOULVSOgQJyqSNXUhNI+EynMivOU9jFBiEomYh+/fdxZLIhWGQKFXJNLf+tliL9o0rlcv7E9LeDJMlTUlChacVCLoaBJqxdHj5LEA1n+Y2MvRzLaWzOXdwBBbS/gTJZ/D1pIm2q8QtpaMrwqgWBb7Slifi6mDkEqJnYbzf9jOkp2CLMZPeZ+TrcZUAuL2Irs96Us+Pj7yfgCbknGGI9ttswAAAABJRU5ErkJggg=="},3567:function(o,e,i){"use strict";i("46fc")},"386d":function(o,e,i){"use strict";i("ba99")},3897:function(o,e,i){},3951:function(o,e,i){},"39dc":function(o,e,i){"use strict";i("eac4")},"39e7":function(o,e,i){"use strict";i("b7a1")},"3a9d":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAeFBMVEUAAAAXEAoUDQhlRSs0JBYrHRJLMh9FLhxeQCcaEgtiQykyIhUlGQ85JhgsHhJTOCIpGxEgFg1ZPCU/KhpWOSN0TzF6UzQvIBNrSS14UjNPNSFjRClyTjF8VTVcPiZnRyxuSy93UTIDAgEKBwQRDAcPCgYIBQMGBAI5vVJyAAAAInRSTlMA/v6A/v79/aX+kP7+/f7d/v6+/c00Ef5iHfGLPQewd1IkgWmI6gAAAZ1JREFUaN7t1eluqzAQhuGxwxInmDVrl7N8A+b+7/AcqdCChJrUxZVazfNrBBIvBgtICCGEEOK7ecpSGtWlUtmB1pc6RYMccAyUtLq018O0Rx8XRe6Qh4v8YUT0n0V/GU61i6r05B1pen4ZGPZliHgRoAvfSI5hUK9vZbvk0Bhw4RmJMewAg4zedSyhr6EjdDRogkcoRRU+smUdPrLh9isinUS+IHKGCRdxw0apVTp+VvK1Iwd2NNfBjtfaTT2evCNHjZqmLhgPWJ6rTr4RylDRVImOlv8nJXlHCu4TelM7WFr1nYy3XtBo10JRgMjJoLPX8QmBLyEidKzQqygpHqxx0BtaOTJqOsCxA/hMFCAySGKjTZZeyTPi1Vzye91IxG6BeVo1Uugl59lKQpHIRPocPmI5Dh/JYcJHYiga/Y32U1ESIhJjrt0EiGyNmtmvvJJlEpGIRH5YJP9QpCUvEZjuVTtDXrYOj/evOic/Gpruk3D/i/wUDL2jO1hGTr4sA6xuaR1Qkb+D4R43uTaiT9k10S324ZmEEEIIIb6xf4x8QD01P3dKAAAAAElFTkSuQmCC"},"3c35":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAABm1BMVEUAAAB9fX2jo6NeXl6Pj4+Pj4+ioqIvLy82NjY1NTWMjIxLS0tra2uOjo4tLS1VVVWioqJXV1ehoaGhoaFdXV2Li4s5OTl5eXksLCwaGhpTU1MdHR17e3uOjo5BQUGOjo4vLy9UVFSOjo4dHR0wMDCPj49nZ2dDQ0MfHx9paWkyMjI+Pj4mJiY3NzcdHR17e3tqamqOjo6Ojo56enqgoKA7OztpaWmQkJChoaFPT08mJiY9PT2NjY2Pj49/f3+fn5+lpaVoaGh6enp7e3sdHR1oaGhTU1NBQUEvLy9UVFR7e3t7e3saGhpoaGg+Pj4dHR1qamp7e3tCQkJCQkKPj498fHweHh5paWmPj49paWlCQkJnZ2dVVVV9fX0vLy9nZ2d7e3tUVFQfHx9ra2t8fHxVVVVERERERERqampAQECPj49DQ0MzMzNVVVV6enpVVVVpaWl6enpFRUUmJiYaGhpmZmZTU1NTU1MyMjJ7e3ufn596enqPj493d3d8fHwbGxukpKRoaGhUVFQrKysaGhp7e3s/Pz8+Pj49PT291zY1AAAAgXRSTlMABlYN4txVHhcSEQoD4N6UUDAuJxgLB/39+/ba2NfHxcS7qKSej4mBdm1sZmBaWlZWUEtJSEdAOjc2NDEpHBoYCPz49vXv7+/s6+bl5ODg09HKwby7u7u6ubGwrKinp6KhoKCWlY2NgoF6eXlzcWxrY2JRT01IQz09PDs2MC8nJSDBqhNCAAABgklEQVRIx+3SRVPDQBTA8VdClTptcZeWCnVX3N3d3d0lJG352GwuDKewb4YZLv3fkskvu/N2odAfZZErkSK2WTXbDpQp5RaAkiae56tidMJZr22Ow9swIRV0y9xrOY5rtsjHBHJNRewcSSsHWzfPN9ENwFVOSL0C4MrmVABVitVyrt8OtAX3juKgcBwHqYVrNJ+vjQKiksUcyYohzKRAdtUYc/CZz/VdAibGWjvlAGRKBlAxBoMaJwzLvQM6E4rsfJDOUKfSIBAdhqh1AjkBTNGGysoNE6Ay3d4xgE4iwYq2pTUPUnSw7MgNRjBzLKkVdTILAtkHTOc9LDseAlSerdYQmP3ul59DTKdFx6gGYLa7yqrd32/MEb3sUQWi+Tuz2ewM+SjhC5PflxaRjOLkooyQ6hR4pzU1hxIwEiGLiJOHQULWJapGaXFxTRje9TKZvhTEO50YWnmCZB0hGh/ZWSBg/PUapV7NZFAtUo10PkEeMxmg7LmlrtGLvdVJFRT6v74ABqxMskl6QHIAAAAASUVORK5CYII="},"3ccd":function(o,e,i){"use strict";i("4daa")},"3d00":function(o,e,i){},"3f4b":function(o,e,i){o.exports=i.p+"img/folderOpen.6cf9924e.svg"},"3fbe":function(o,e,i){"use strict";i("d25c")},"3fef":function(o,e,i){"use strict";i("9895")},4:function(o,e){},4030:function(o,e,i){o.exports=i.p+"img/expand.67de6dfe.svg"},"42e8":function(o,e,i){},4592:function(o,e,i){o.exports=i.p+"img/trash.a3e4c2f7.svg"},4599:function(o,e,i){},4617:function(o,e,i){o.exports=i.p+"img/calendar.17efa687.svg"},"46c5":function(o,e,i){o.exports=i.p+"img/tag.93ac3735.svg"},"46fc":function(o,e,i){},4782:function(o,e,i){},"47ef":function(o,e,i){"use strict";i("f967")},"488f":function(o,e,i){"use strict";i("d375")},"49d2":function(o,e,i){o.exports=i.p+"img/envelope.82189696.svg"},"49f9":function(o,e,i){},"4aab":function(o,e,i){o.exports=i.p+"img/idBadge.346b61bc.svg"},"4c00":function(o,e,i){o.exports=i.p+"img/productHunt.e43e2b2f.svg"},"4cfc":function(o,e,i){},"4d6f":function(o,e,i){},"4d8f":function(o,e,i){o.exports=i.p+"img/hourglass.8097d9c7.svg"},"4daa":function(o,e,i){},"4db3":function(o,e,i){},"4e77":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAMAAAAPkIrYAAABjFBMVEUAAAA+MzgAAAAiHBwgGBg+OzsiIh4eGxlEPj8WFBMhHh0nIyRAPT1ORkYfGhYjHhwfGhoeGRgeGRkgGxkmHx8oIiMoJCQlIyEpJyUrJyQpKCkiICAqJiQwKyscFxggHR0dFxYhHhwhHBwgGxoeGxsmISEdGRkjHh4dGhkgHRweGhsjHR4mJCE+PTlST08rKCgbFhYjGRogGxocGBcgHhwpJiUiHRwiHxwgGRkYFBMkHx8uKCcfHBoqJycsKSkdGRchGx0hHx9fX18kHRsaFRQmISIlHx4cGBckHB4sJSYhHRwdGRkhHx0cFhgiIB8cGhoeGxkhFxYdFxQaFxYZFhYoJSYaFxQaFxQVERFXUFckGBoiGRggGRkiGhogGRcnGRsjFxgjGBciHBwjGxshHBolGRclGBkhGBolGxkmFxkjGhckGBUhGxgkGhUlFxUfGBkhFxggGBQlFxcjGhkfGhkfGxciGRYgGRYdFxUeGhMgGhslFxgiGxUiFxYdGRkhGhEfFxccGBMhFxElHR4/VDeRAAAAWnRSTlMABBD+/AoH/h7JokYZD/bx5uHcya1tZ2BSOzIpJB/7+ffr2NPMxKqnl5WOiII1Fhb9+PPx0c66sbGgjnVvW1dLPy0I+unh0MbFmYN9eXBqYFLo2Na1nldWOyk6oaQ9AAADUElEQVRYw+3VV1MaURTA8SUgEFAporRg75qYbm/pvdd7t/cGuyu9aEzyxXNXTSZPEW+cPGT2/8rwmzl7OAvh5eXl5fX/5evNF87FuZJLz04mnv41dOVSev5RfPjgILTxV07fpVdPppKjgiCIoepYFtvpCWcWl5P9FknaQFU7nepyH5YT7N15Pj1xo9qs0jZggSxLxWJgA8fJrkcm7lmKYDa/NmibHR14rSFr7PIZF9aXG5q9eU8URZ7nBdFsNKhrK+uPr3GSpC73nGVh+c35h/FhyzRNZPl5wRTpWGormgrsc1ItNNj9wjJPpxKjlEkqUFX1I0qwErPRvpcPSNvmoJnY7ca5U8g8W3nT7xeApOs6B9DWBDRiKzG3EwwvxPwKtG26utpzqrMU3ZiZ6O/ojkNT7raKbY0RBN7vv7+W9RE7KRJSQlmH9Kkj5l5EJm/4G1+bnXqdtqG7ekNiGPB9eHwBba3nxThNwzIA5bKZPGWLwcWRg5ZFIwtRkKQAsiRJBoFHz/Po48LadWhDCFmEiZEg8efCm5H4VafebB5RFPqOrqvXpgYLBGr7Ngl1eGIFhrp47rknA3fRszIViqLKFCVevz0YPlrs+n3yEMgsCgDAJfNd/TyXNlfjDZ5CCVZs5tXxunZnR0QFMIyGKJQd8XV7NdmFByPfeXJsJnOy+K2plkUqMqNpMnBDI3ZfOJ26ORc9ka48G/O7FtB+Wsn8GV8xP8fIRUb8vNhSFCCfUMKMD+99nH5YFUVBoCB6VDJgAWDt0SEsqncx1ux0dJWROY7d2+MMg1Na45dwqOh04Nu3L186KsPsGaVSyTBqNbLyHoe68K6xbyCryCCrdGzBSn8ay7po7ZdKxaKOLG3PzajR1ZsFPItEliFJrqW1223XCs0RuJZRQvetqqrWZjkUGvEjplV1nJqOjlmV2m0OutEDS7hW06lRVOCwXuPYY6oxR2BapuPogZXVqwc0hO6EkLyxjWlNmk797kI4uBir0CQLACQrt3oxrQGRnxj0oUsaeltBxw2AcnWewLX4VJQ46sO4SCqKYl3fxrVur/06va1bvEWSh5NLBGa//9tkpyuVSmjeR5xHu9OhVvwTcT59fjyMtnhOBV9mCC8vLy+vf9UP6nkGH0hHtzsAAAAASUVORK5CYII="},"4edf":function(o,e,i){},"4fc3":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAApVBMVEUAAAAFBQUKCgozMzMzMzMoKCgsLCw4ODgsLCwxMTEVFRUzMzM7Ozs2NjY0NDQzMzNMTEw1NTUlJSUxMTEvLy8xMTExMTEtLS0VFRUcHBwuLi4oKCgxMTEuLi4rKyswMDAwMDArKystLS0uLi4xMTEuLi4kJCQxMTEwMDArKysqKioxMTEuLi4rKys0NDQsLCwkJCQuLi4vLy8uLi42NjYwMDAzMzMGZa9aAAAANnRSTlMABgFL7bBzQ9VhGOAzJeq3Coku+Lr16sIMCZhO/JRC5qV2KBDKehnt2bqvoIRWPB8K0bWOjGo12immAAAA/ElEQVRIx+3Sy1LCMBiG4STUoiIeGmKVJG1paUXOnv77vzRjNlJy0AwLGKbvpjNf55ksEnSG4ZJfOes1FlHKnAohaHRrFgmWrgxRFfCTqG8sZepnHpM9sqKaTKv2nHHOE/V5AWCTtiESdKPn1vz0SimVBCWPYBg8t5NUbWNNDIMv/iLafAUTmGXBBMY4mLw1weTy+kSIvkon8T8YN6F1OTRbL8BNQAws5WAnvo5NiknsTlILmW6QJ1xYyN29j5DPcPLQkY4cQubBhHz8j4y2vwNnAGnlJQtF6p1hKwXQZdZ3F+cA70O0U7OcMRZ5Ymwgk72DN+uet36JUZfqG2Wjeg1GwVSoAAAAAElFTkSuQmCC"},5:function(o,e){},5004:function(o,e,i){},5507:function(o,e,i){"use strict";i("4cfc")},"559e":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAqCAMAAAD26OlUAAAAtFBMVEUAAAAAAAAAAAAAAAAaGhoCAgIDAwMBAQEQEBAAAAABAQEBAQECAgIAAAABAQEBAQECAgIEBAQBAQEAAAAFBQUDAwMDAwMAAAAAAAACAgIDAwMFBQUGBgYAAAABAQEBAQEDAwMDAwMICAgJCQkMDAwBAQEBAQEBAQECAgIBAQECAgICAgICAgIGBgYGBgYNDQ0EBAQCAgIEBAQBAQEBAQEDAwMCAgIDAwMEBAQFBQUQEBAAAAAlv8O7AAAAO3RSTlMAvz/5B4MexQP7YBe0n+vmf03b2F0SC+DPqVlRLfbKo3lENiEP89PAu66Ja2dJOjIncUfthpmTjT4pJj+7kzoAAAIXSURBVDjLnZTnlrIwEIbHDaEI0lFAQFGkWrBty/3f16cU0Q3sd86+vybwnMnUwJ/FWGxZshbzOyVqOLN1RdHtDGviILa/2D5S7ESSEltBvn3Z92JePhPid9ezpgwztTz3PRZmuUdzZkCSgoUnsUVCAvMHxqsbRW2xDlWVjcq/pJqTZA49mickfy4AJtJ+IEGJ4O50JOkKBrRKybG1T7r9RhNtGd9s/VRbUwdtae7NGTfWFjnTyhijCUNzIzJrSGaCKiuS5JDu+JKQBxnKUgQA2mZBOSxFdtKRzGKjAcAHcul7J2xN1mm46APA4gyWjo/U5KiuGmtwFhxkh6e5mhw1VeMd+QAawjRXk2L56BzSYCuMKa7WsstxLGxhKcz7udFTt+bCErC/+y8HOx93HmnuxeNLjOKC5toYn7NmwDVors3akzO+qZZ5AFfv4/hM9sDi9HV9jALpAKZOc7DWOQsgR82mfSmkIikOTJTfU2+nR/PJnQyprbhNz66ax/Op2ZybnDVQOp2lqJ7wyiV/VbjJUpsC7RCN250pqn0rLR56VLQ7A6ERhzCoMDYefwthtB/i9iOh6E4qST/7uc+UqM+lx4Trf3s4gl8DV88ypiqzxvJZhR9yOcId1y/Y8fbJBUrlZUaMq+mJ9xdX9MyrQWaXr/6HCwc+kmMuTblYRn6AVzAkcadmgaEoRpCpOxF+FR+J399iRPXoHwT7P6mwTTR1AAAAAElFTkSuQmCC"},5622:function(o,e,i){"use strict";i("58b2")},"56d7":function(o,e,i){"use strict";i.r(e);i("caad"),i("2532"),i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),t=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"navBar"}},[n("div",{attrs:{id:"zonaIcono"},on:{click:function(e){o.mostrandoNav=!o.mostrandoNav}}},[n("img",{attrs:{id:"botonDesplegarNav",src:i("e802"),alt:"Menu"}}),n("div",{attrs:{id:"logoPepepe"}},[o._v("Pepepe")])]),n("div",{class:{enlacesOcultos:!o.mostrandoNav},attrs:{id:"botonesNavEnlaces"},on:{click:function(e){o.mostrandoNav=!1}}},[1==o.usuarioLogeado&&o.usuario.permisos&&o.usuario.permisos.includes("maestraVida")?n("router-link",{attrs:{to:"/foros"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navActividadesVirtuales"}},[o._v(" Foros ")])]):o._e(),n("div",{staticClass:"bloqueBotones",attrs:{id:"bloqueHerramientas"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navAtlas"}},[o._v(" Herramientas ")]),n("div",{staticClass:"contenedorHijos",attrs:{id:"enlacesHijosHerramientas"}},[n("router-link",{attrs:{to:"/atlas"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro botonNavHijo",attrs:{id:"navAtlas"}},[o._v(" Atlas de conocimientos ")])]),n("a",{directives:[{name:"show",rawName:"v-show",value:o.usuarioLogeado,expression:"usuarioLogeado"}],attrs:{target:"_blank",href:o.tallerCuentosUrl+"?t="+o.$store.state.token}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro botonNavHijo",attrs:{id:"navAtlas"}},[o._v(" Taller de creación de cuentos ")])])],1)]),o.usuarioLogeado?n("router-link",{attrs:{to:"/personas"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navActividadesVirtuales"}},[o._v(" Personas ")])]):o._e(),n("router-link",{attrs:{to:"/espacios"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro",attrs:{id:"navActividadesVirtuales"}},[o._v(" Horario semanal ")])]),o.usuarioSuperadministrador?n("router-link",{attrs:{to:"/registro",id:"navRegistro"}},[n("div",{staticClass:"botonNavBarra botonNav hoverNegro"},[o._v(" Registrar usuario ")])]):o._e()],1),n("div",{attrs:{id:"botonesNavDerecha"}},[o.usuarioLogeado?n("div",{directives:[{name:"show",rawName:"v-show",value:o.yo.notificaciones.length>0||o.yo.notificacionesActividadForos.length>0,expression:"\n          yo.notificaciones.length > 0 ||\n          yo.notificacionesActividadForos.length > 0\n        "}],attrs:{id:"bloqueNotificaciones"}},[n("span",{attrs:{id:"numeroNotificaciones"}},[o._v(o._s(o.yo.notificaciones.length+o.yo.notificacionesActividadForos.length))]),n("img",{attrs:{src:i("d1f3"),alt:"Notificaciones",title:o.yo.notificaciones.length+"Notificaciones",id:"imagenCampanita"},on:{click:function(e){o.mostrandoNotificaciones=!o.mostrandoNotificaciones}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoNotificaciones,expression:"mostrandoNotificaciones"}],attrs:{id:"contenedorNotificaciones"}},[o._l(o.yo.notificacionesActividadForos,(function(o){return n("notificacion-actividad-foros",{key:o.id,attrs:{estaNotificacion:o}})})),o._l(o.notificacionesOrdenadas,(function(o){return n("notificacion",{key:o.id,attrs:{estaNotificacion:o}})}))],2)]):o._e(),o.logeado?[n("div",{staticClass:"botonNavBarra botonNav navLogin hoverNegro",attrs:{id:"navLogged"},on:{click:function(e){o.accionesLogeado=!o.accionesLogeado},mouseleave:function(e){o.accionesLogeado=!1}}},[o._v(" "+o._s(o.username)+" "),o.accionesLogeado?n("div",{attrs:{id:"botonesLogeado"}},[n("router-link",{attrs:{to:"/miperfil"}},[n("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"Perfil"}},[o._v("Perfil")])]),n("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"desconexion"},on:{click:o.deslogeo}},[o._v(" Desconexion ")])],1):o._e()])]:[n("router-link",{staticClass:"botonNavBarra botonNav navLogin hoverNegro",attrs:{to:"/login",id:"navLogin"}},[n("div",[o._v("Login")])])]],2)]),n("router-view",{attrs:{id:"visorRouter",yo:o.yo}},[o._v("asd")])],1)},a=[],s=(i("a15b"),i("d81d"),i("fb6a"),i("d3b7"),i("ac1f"),i("25f0"),i("5319"),i("1276"),i("8785")),r=i("9530"),d=i.n(r),c=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("transition",{attrs:{name:"recogerseArriba"}},[i("div",{staticClass:"notificacion",on:{click:o.visitar}},[i("div",{attrs:{id:"info"}},[o._v(o._s(o.fechaFormateada))]),i("img",{attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaNotificacion.causante.id,alt:"",id:"caritaCausante"}}),i("div",{attrs:{id:"texto"},domProps:{innerHTML:o._s(o.mensaje)}})])])},u=[];i("c740"),i("c975"),i("a434");function l(){var o=Object(s["a"])(["\n          mutation ($idNotificacion: ID!) {\n            eliminarNotificacion(idNotificacion: $idNotificacion)\n          }\n        "]);return l=function(){return o},o}var v={name:"Notificacion",props:{estaNotificacion:{type:Object,default:function(){return{}}}},methods:{visitar:function(){var o=this,e="/";"actividadEstudiantil"==this.estaNotificacion.elementoTarget.tipo?e+="actividad/"+this.estaNotificacion.elementoTarget.id:"nodoAtlasSolidaridad"===this.estaNotificacion.elementoTarget.tipo&&(e+="atlasSolidaridad/"+this.estaNotificacion.elementoTarget.id),this.eliminarse(),this.$router.push(e).catch((function(e){console.log("Error de navegación: ".concat(e.message.substr(0,28))),"Avoided redundant navigation"==e.message.substr(0,28)&&(console.log("Refreshing"),"actividadEstudiantil"==o.estaNotificacion.elementoTarget.tipo?o.$store.commit("refreshActividadEspecifica"):"nodoAtlasSolidaridad"===o.estaNotificacion.elementoTarget.tipo&&o.$store.commit("refreshNodoVentanitaAtlasSolidaridad"))}))},eliminarse:function(){var o=this.estaNotificacion.id;console.log("Eliminandose: ".concat(o)),this.$apollo.mutate({mutation:d()(l()),variables:{idNotificacion:o},update:function(e,i){var n=i.data.eliminarNotificacion;if(n){var t=e.readQuery({query:x,variables:{idNotificacion:o}}),a=JSON.parse(JSON.stringify(t)),s=a.yo.notificaciones.findIndex((function(e){return e.id==o}));s>-1&&a.yo.notificaciones.splice(s,1),e.writeQuery({query:x,variables:{idNotificacion:o},data:a})}}})}},computed:{mensaje:function(){var o="";return"actividadEstudiantil"==this.estaNotificacion.elementoTarget.tipo?this.estaNotificacion.elementoTarget.nombre?o+="Tienes una nueva respuesta en la actividad <span style='color: white' class='textoTarget'>"+this.estaNotificacion.elementoTarget.nombre+"</span>":o+="Tienes una nueva respuesta en una actividad":o=this.estaNotificacion.texto,o},fechaFormateada:function(){var o=new Date(this.estaNotificacion.fecha).toString(),e=o.indexOf("("),i=o.substr(0,e),n=i.indexOf("GMT");return n>-1&&(i=i.substr(0,n)),i}}},m=v,p=(i("c8fe"),i("2877")),h=Object(p["a"])(m,c,u,!1,null,"30a1ea85",null),f=h.exports,g=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"notificacionActividadForos",on:{click:o.visitar}},[n("img",{attrs:{src:i("96cc"),alt:"Conversación",id:"iconoConversacion"}}),n("div",{attrs:{id:"texto"},domProps:{innerHTML:o._s(o.mensaje)}})])},b=[];function N(){var o=Object(s["a"])(["\n          mutation($idParent: ID!) {\n            eliminarNotificacionActividadForos(idParent: $idParent)\n          }\n        "]);return N=function(){return o},o}var A={name:"NotificacionActividadForos",props:{estaNotificacion:{type:Object,default:function(){return{}}}},methods:{visitar:function(){var o="/";if(o+=this.estaNotificacion.tipoParent+"/"+this.estaNotificacion.idParent,"libro"==this.estaNotificacion.tipoParent){console.log("Es el enlace a un libro");var e=this.tallerCuentosUrl+"?t="+this.$store.state.token+"&l="+this.estaNotificacion.idParent;console.log("Abriendo enlace: ".concat(e)),window.open(e,"_blank"),this.eliminarse()}else this.eliminarse(),this.$router.push(o).catch((function(o){console.log("Error de navegación: ".concat(o.message.substr(0,28))),"Avoided redundant navigation"==o.message.substr(0,28)&&console.log("Error por navegación")}))},eliminarse:function(){var o=this.estaNotificacion.idParent;console.log("Eliminandose: ".concat(o)),this.$apollo.mutate({mutation:d()(N()),variables:{idParent:o},update:function(e,i){var n=i.data.eliminarNotificacionActividadForos;if(n){var t=e.readQuery({query:x}),a=JSON.parse(JSON.stringify(t)),s=a.yo.notificacionesActividadForos.findIndex((function(e){return e.idParent==o}));s>-1&&a.yo.notificacionesActividadForos.splice(s,1),e.writeQuery({query:x,data:a})}}})}},computed:{mensaje:function(){var o=this.estaNotificacion.tipoParent;"nodoConocimiento"==o&&(o="nodo de conocimiento");var e="<span style='color:red'>"+o+"</span>",i="Hay nuevas respuestas en los foros del "+e+" "+this.estaNotificacion.nombreParent;return i},tallerCuentosUrl:function(){return"https://pe-pe-pe.herokuapp.com/tallerCuentos"}}},C=A,y=(i("8c38"),Object(p["a"])(C,g,b,!1,null,"140cdbe8",null)),E=y.exports;function w(){var o=Object(s["a"])(["\n  query {\n    yo {\n      id\n      nombres\n      apellidos\n      notificaciones {\n        id\n        fecha\n        texto\n        elementoTarget {\n          tipo\n          id\n          nombre\n        }\n        causante {\n          id\n          tipo\n        }\n      }\n      notificacionesActividadForos {\n        idParent\n        tipoParent\n        numeroRespuestasNuevas\n        nombreParent\n      }\n      permisos\n      foros {\n        idForo\n        conversaciones {\n          idConversacion\n          respuestasLeidas\n        }\n      }\n    }\n  }\n"]);return w=function(){return o},o}var x=d()(w());function P(o){var e=o.split(".")[1],i=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(i).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}var S={name:"App",apollo:{yo:{query:x,fetchPolicy:"network-only",update:function(o){var e=o.yo;return this.$store.commit("setInfoForosUsuario",e.foros),e},skip:function(){return!this.usuarioLogeado}}},components:{Notificacion:f,NotificacionActividadForos:E},data:function(){return{accionesLogeado:!1,mostrandoNotificaciones:!1,yo:{notificaciones:[],notificacionesActividadForos:[]},mostrandoNav:!1,navSeleccionado:"home"}},computed:{tallerCuentosUrl:function(){return"https://pe-pe-pe.herokuapp.com/tallerCuentos"},username:function(){return this.$store.state.usuario.username},logeado:function(){return void 0!=this.username&&null!=this.username&&this.username.length>2},colorBlancoAccionLogeado:function(){return this.accionesLogeado?{backgroundColor:"white"}:{}},notificacionesOrdenadas:function(){var o=JSON.parse(JSON.stringify(this.yo.notificaciones));return o.sort((function(o,e){return new Date(e.fecha)-new Date(o.fecha)}))}},methods:{deslogeo:function(){this.$store.commit("deslogearse")}},mounted:function(){var o=localStorage.getItem("token");if(o){var e=P(o),i=parseInt(Date.now()/1e3);if(!e.version||e.version<1)return console.log("Versión de token caducada"),void this.$store.commit("deslogearse");i<e.exp||!e.exp?this.$store.commit("logearse",o):(console.log("Token expirado: exp: ".concat(e.exp)),this.$store.commit("deslogearse"))}else console.log("")}},D=S,I=(i("034f"),i("e233"),Object(p["a"])(D,t,a,!1,null,"a9412946",null)),R=I.exports,k=(i("7db0"),i("2f62")),M=(i("99af"),i("5530")),j=i("957f"),$=i("30c8"),O=i("365c"),q=i("4cc9"),T=i("3161"),B=i("1ee4"),U=i("77fb");function F(){var o=Object(s["a"])(["\n    \n    enum TiposUsuario{\n        USUARIO,\n        ADMINISTRADOR,\n        SUPERADMINSTRADOR\n    }\n    \n    type Usuario{\n        username:String,\n        permisos: TiposUsuario\n     }\n\n    type Mutations{ \n        setUsuario(username: String, permisos: TiposUsuario):Usuario\n    }\n"]);return F=function(){return o},o}var _=d()(F()),L={},z="http://192.168.1.100:3000",V=(z.substr(7),new j["a"]({possibleTypes:U})),Q=function(){return localStorage.getItem("token")},J=new $["a"]({uri:z+"/graphql"}),H=Object(T["a"])((function(o,e){var i=e.headers;return{headers:Object(M["a"])(Object(M["a"])({},i),{},{authorization:Q()})}})),Z=Object(B["a"])((function(o){o.graphQLErrors,o.networkError})),G=Z.concat(H).concat(J),K=new O["a"]({link:G,cache:V,typeDefs:_,resolvers:L,connectToDevTools:!0}),Y=Object(q["a"])({defaultClient:K}),W=i("8c4f"),X=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"atlasConocimiento",style:{overflowY:o.nodoAbierto?"scroll":"hidden"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),void(o.panningVista=!0))},mouseenter:function(e){o.hovered=!0},mouseleave:function(e){o.hovered=!1},click:function(e){o.idNodoMenuCx=null,o.cerrarBusqueda++}}},[n("router-view",{attrs:{yo:o.yo,datosNodosRepasar:o.datosNodosRepasar,datosNodosUrgentes:o.datosNodosUrgentes},on:{centrarEnNodo:function(e){return o.centrarEnNodoById(e)}}}),n("div",{attrs:{id:"zonaSeleccionColeccion"}},[n("div",{attrs:{id:"nombreColeccion"},on:{click:function(e){e.stopPropagation(),o.seleccionandoColeccion=!o.seleccionandoColeccion}}},[o.coleccionSeleccionada&&o.coleccionSeleccionada.progreso?n("span",{staticClass:"indicadorProgreso"},[o._v(o._s(o.coleccionSeleccionada.progreso)+"%")]):o._e(),n("span",{staticStyle:{"z-index":"1"}},[o._v(" "+o._s(o.nombreColeccionSeleccionada)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.seleccionandoColeccion,expression:"!seleccionandoColeccion"}],staticClass:"boton",attrs:{id:"botonMostrarOpcionesColeccion"},on:{click:function(e){o.mostrandoOpcionesColeccion=!o.mostrandoOpcionesColeccion}}},[n("img",{attrs:{src:i("b444"),alt:"Opciones"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoOpcionesColeccion,expression:"mostrandoOpcionesColeccion"}],attrs:{id:"contenedorControlesColeccion"}},[n("div",{staticClass:"boton controlColeccion",on:{click:function(e){return o.localizarNext("available")}}},[n("img",{staticStyle:{filter:"var(--filtroAtlasAvailable)"},attrs:{src:i("bd7e"),alt:"Localizar"}})]),n("div",{staticClass:"boton controlColeccion",on:{click:function(e){return o.localizarNext("check")}}},[n("img",{staticStyle:{filter:"var(--filtroAtlasCheck)"},attrs:{src:i("bd7e"),alt:"Localizar"}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionandoColeccion,expression:"seleccionandoColeccion"}],attrs:{id:"listaSelectoresColeccion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.idColeccionSeleccionada,expression:"idColeccionSeleccionada"}],staticClass:"selectorColeccion",on:{click:function(e){return e.stopPropagation(),o.setIdColeccionSeleccionada(null)}}},[n("img",{staticStyle:{height:"15px"},attrs:{src:i("bd51"),alt:"Coleccion"}}),o._v(" Atlas ")]),o._l(o.coleccionesUsuario.filter((function(e){return o.idColeccionSeleccionada!=e.id})),(function(e){return n("div",{key:e.id,staticClass:"selectorColeccion",on:{click:function(i){return i.stopPropagation(),o.setIdColeccionSeleccionada(e.id)}}},[n("img",{staticStyle:{height:"15px"},attrs:{src:i("bd51"),alt:"Coleccion"}}),o._v(" "+o._s(e.nombre)+" ")])}))],2)]),n("transition",{attrs:{name:"fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.showingZoomInfo,expression:"showingZoomInfo"}],attrs:{id:"infoZoom"}},[o._v("x"+o._s(o.factorZoom))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuContextual,expression:"mostrandoMenuContextual"}],style:[o.offsetMenuContextual],attrs:{id:"menuContextual"}},[o.usuarioAdministradorAtlas||o.usuarioProfe?n("div",{staticClass:"botonMenuContextual",class:{deshabilitado:o.posicionCreandoNodo},attrs:{id:"botonCrearNuevoNodo"},on:{click:o.crearNodoEnMenuContextual}},[o._v(" Crear Nodo de conocimiento ")]):o._e()]),n("div",{attrs:{id:"zonaNodoTarget"}},[o.nodoTarget?n("div",{attrs:{id:"nombreNodoTarget"},on:{click:function(e){return o.centrarEnNodo(o.nodoTarget)}}},[n("img",{staticStyle:{height:"25px",filter:"var(--filtroBlanco)",margin:"2px 5px","margin-right":"15px"},attrs:{src:i("6ddb"),alt:"Target"}}),o._v(" "+o._s(o.nodoTarget.nombre)+" ")]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.yo.atlas.idNodoTarget&&!o.enviandoQueryTarget,expression:"yo.atlas.idNodoTarget && !enviandoQueryTarget"}],staticClass:"boton",on:{click:function(e){return e.stopPropagation(),o.configurarNodoTarget(null)}}},[n("img",{attrs:{src:i("7511"),alt:"Equis"}})])]),o.usuarioSuperadministrador&&"juanMamian"==o.usuario.username?n("div",{class:{deshabilitado:o.callingPosiciones},style:[{backgroundColor:o.callingPosiciones?"green":"transparent"}],attrs:{id:"botonCallingPosiciones"},on:{click:function(e){return e.stopPropagation(),o.iniciarCallingPosiciones(e)}}}):o._e(),n("buscador-nodos-conocimiento",{ref:"buscadorNodos",attrs:{cerrarBusqueda:o.cerrarBusqueda},on:{nodoSeleccionado:o.centrarEnNodo}}),n("panel-conjuntos-nodos",{ref:"panelConjuntosNodos",attrs:{yo:o.yo,modoAtlas:o.modoAtlas},on:{centrarEnNodo:function(e){o.centrarEnNodo(o.todosNodos.find((function(o){return o.id==e})))}}}),n("div",{ref:"contenedorDiagrama",attrs:{id:"contenedorDiagrama"},on:{contextmenu:function(e){return e.target!==e.currentTarget||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),o.abrirMenuContextual(e))},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.target!==e.currentTarget?null:o.clickFondoAtlas(e)}}},[n("div",{style:[o.offsetContenedorNodos],attrs:{id:"contenedorVinculosNodos"}},o._l(o.nodosConRequerimentos,(function(e){return n("enlaces-nodo-conocimiento",{key:e.id,attrs:{yo:o.yo,idNodoSeleccionado:o.idNodoSeleccionado,esteNodo:e,todosNodos:o.todosNodos,factorZoom:o.factorZoom,esquinasDiagrama:o.esquinasDiagrama,nodoSeleccionado:o.nodoSeleccionado,redibujarEnlaces:o.redibujarEnlacesNodos,idsTodosNodosRender:o.idsTodosNodosRender,callingPosiciones:o.callingPosiciones,idsNodosPreviosSeleccionado:o.idsNodosPreviosSeleccionado,idsNodosPresentesCabeza:o.idsNodosPresentesCabeza}})})),1),n("div",{ref:"contenedorNodos",style:[o.offsetContenedorNodos],attrs:{id:"contenedorNodos"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.posicionCreandoNodo,expression:"posicionCreandoNodo"}],staticStyle:{position:"absolute"},style:[o.offsetLoadingCreandoNodo],attrs:{texto:""}}),o._l(o.nodosRender,(function(e){return n("nodo-conocimiento",{key:e.id,attrs:{nodoSeleccionado:o.nodoSeleccionado,todosNodos:o.todosNodos,idNodoMenuCx:o.idNodoMenuCx,usuarioAdministradorAtlas:o.usuarioAdministradorAtlas,yo:o.yo,modoAtlas:o.modoAtlas,esteNodo:e,esquinasDiagrama:o.esquinasDiagrama,centroVista:o.centroVista,esNodoObjetivo:o.idsNodosObjetivos.includes(e.id),esTarget:o.idNodoTarget==e.id,idsNodosAprendidos:o.idsNodosAprendidos,idsNodosEstudiados:o.idsNodosEstudiados,idsNodosFrescos:o.idsNodosFrescos,idsNodosPresentesCabeza:o.idsNodosPresentesCabeza,factorZoom:o.factorZoom,seleccionado:o.idNodoSeleccionado===e.id,escondido:o.idNodoTarget&&!o.idsNecesariosParaTarget.includes(e.id)&&o.idNodoTarget!=e.id,configuracionAtlas:o.configuracionAtlas,callingPosiciones:o.callingPosiciones,datosUsuarioEsteNodo:o.yo.atlas.datosNodos.find((function(o){return o.idNodo===e.id}))||{},fantasmeado:o.idNodoSeleccionado&&o.idNodoSeleccionado!=e.id&&!o.idsNodosPreviosSeleccionado.includes(e.id),previoDeSeleccionado:o.idNodoSeleccionado&&o.idsNodosPreviosSeleccionado.includes(e.id),enviandoQueryTarget:o.enviandoQueryTarget},on:{abroMenuContextual:function(i){o.idNodoMenuCx=e.id},creacionVinculo:o.crearVinculo,eliminacionVinculo:o.eliminarVinculo,cambioDePosicionManual:o.cambiarCoordsManualesNodo,eliminar:o.eliminarNodo,cambieEstadoObjetivo:function(i){return o.setEstadoObjetivoNodoCache(i,e.id)},tengoNuevoValorAprendido:function(i){return o.setNodoAprendidoCache(i,e.id)},mePongoEnMira:function(i){return o.configurarNodoTarget(e.id)}},nativeOn:{contextmenu:function(i){if(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)return null;i.stopPropagation(),i.preventDefault(),o.idNodoMenuCx=e.id},click:function(i){return i.stopPropagation(),o.seleccionNodo(e)}}})}))],2)]),n("div",{attrs:{id:"barraInferior"}},[n("div",{staticClass:"boton",attrs:{title:"Mostrar colecciones"},on:{click:function(e){o.$refs.panelConjuntosNodos.abierto=!0}}},[n("img",{attrs:{src:i("bd51"),alt:"Nodos de usuario"}})]),n("div",{staticClass:"boton",class:{deshabilitado:o.enviandoQueryModo},attrs:{title:"Cambiar a modo "+o.modoAtlas==="experto"?"estudiante":"experto"},on:{click:function(e){return o.setModo("estudiante"===o.modoAtlas?"experto":"estudiante")}}},["experto"===o.modoAtlas?n("img",{attrs:{src:i("7109"),alt:"Experto"}}):o._e(),"estudiante"===o.modoAtlas?n("img",{attrs:{src:i("8c7c"),alt:"Estudiante"}}):o._e()]),n("div",{staticClass:"boton",attrs:{title:"Mostrar temas para repasar"},on:{click:function(e){return o.$router.push({name:"ventanaRepasos"})}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z",fill:o.datosNodosUrgentes.length>0?"var(--atlasConocimientoRepaso)":""}})])])]),n("loading",{directives:[{name:"show",rawName:"v-show",value:!o.nodosDescargados,expression:"!nodosDescargados"}],attrs:{id:"simboloDescargandoNodos",texto:"descargando nodos de conocimiento"}})],1)},oo=[],eo=(i("4de4"),i("4160"),i("13d5"),i("45fc"),i("b0c0"),i("4057"),i("a9e3"),i("b680"),i("159b"),i("96cf"),i("1da1")),io=i("53ca"),no=i("b85c"),to=i("2909"),ao=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoConocimiento",class:{escondido:o.escondido,deNodoSeleccionado:o.seleccionado,fantasmeado:o.fantasmeado},style:[o.estiloPosicion,o.estiloSize,o.estiloZeta,o.estiloBolita],on:{"!click":function(e){return e.ctrlKey?o.stopProp(e):null},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo,mouseleave:function(e){o.arrastrandoNodo=!1},dblclick:o.abrirPaginaNodo}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&!o.menuCx,expression:"seleccionado && !menuCx"}],staticClass:"boton",attrs:{id:"botonAbrirMenuCx"},on:{click:function(e){return e.stopPropagation(),o.$emit("abroMenuContextual")}}},[n("img",{attrs:{src:i("b444"),alt:"Opciones"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.arrastrandoNodo,expression:"arrastrandoNodo"}],attrs:{id:"zonaArrastre"}}),o.usuarioSuperadministrador?n("div",{directives:[{name:"show",rawName:"v-show",value:o.configuracionAtlas.posicionando,expression:"configuracionAtlas.posicionando"}],staticClass:"fuerzaMovimiento",style:[o.estiloFuerzaCentroMasa],attrs:{id:"fuerzaCentroMasa"}},[n("div",{staticClass:"flechitaFuerza"})]):o._e(),o.usuarioSuperadministrador?n("div",{directives:[{name:"show",rawName:"v-show",value:o.configuracionAtlas.posicionando,expression:"configuracionAtlas.posicionando"}],staticClass:"fuerzaMovimiento",style:[o.estiloFuerzaColision],attrs:{id:"fuerzaColision"}},[n("div",{staticClass:"flechitaFuerza"})]):o._e(),n("div",{class:{deNodoSeleccionado:o.seleccionado,previoDeSeleccionado:o.previoDeSeleccionado},attrs:{id:"iconoNodo"}},["concepto"===o.esteNodo.tipoNodo?n("img",{attrs:{src:i("b559")}}):n("img",{attrs:{src:i("fe50")}})]),n("img",{directives:[{name:"show",rawName:"v-show",value:o.nodoAprendido&&"estudiante"===o.modoAtlas,expression:"nodoAprendido && modoAtlas === 'estudiante'"}],staticClass:"imagenAprendido",style:[{width:parseInt(20*o.factorZoom)+"px",left:parseInt(-10*o.factorZoom)+"px",top:parseInt(-10*o.factorZoom)+"px"}],attrs:{src:i("f0d1"),alt:"Aprendido",title:"Este tema ya ha sido aprendido"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.esTarget,expression:"esTarget"}],staticClass:"imagenTarget",attrs:{src:i("6ddb"),alt:"Objetivo"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"},on:{mousedown:function(o){o.stopPropagation()},mouseup:function(o){o.stopPropagation()}}},[n("div",{staticClass:"seccionMenuCx",on:{click:o.abrirPaginaNodo}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")]),o.usuarioExpertoNodo?n("div",{class:{deshabilitado:o.settingTipoNodo},attrs:{id:"opcionesTipoNodo"}},[n("div",{staticClass:"boton selector",class:{activo:"concepto"===o.esteNodo.tipoNodo},on:{click:function(e){return e.stopPropagation(),o.setTipoNodo("concepto")}}},[n("img",{attrs:{src:i("b559"),alt:"Concepto"}})]),n("div",{staticClass:"boton selector",class:{activo:"skill"===o.esteNodo.tipoNodo},on:{click:function(e){return e.stopPropagation(),o.setTipoNodo("skill")}}},[n("img",{attrs:{src:i("fe50"),alt:"Habilidad"}})])]):o._e(),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.settingTipoNodo,expression:"settingTipoNodo"}],staticStyle:{margin:"5px auto"}}),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorAtlas?n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarEsteNodo(e)}}},[o._v(" Eliminar ")]):o._e(),n("div",{staticClass:"botonMenuCx",class:{deshabilitado:o.esTarget},on:{click:function(e){return e.stopPropagation(),o.$emit("mePongoEnMira")}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoQueryTarget,expression:"!enviandoQueryTarget"}],staticClass:"iconoMenuCx",attrs:{src:i("6ddb"),alt:"mira"}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryTarget,expression:"enviandoQueryTarget"}]}),o._v(" Poner en la mira ")],1),o.usuarioSuperadministrador?n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(" "+o._s(o.esteNodo.id)+" ")]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.yo.atlas&&o.yo.atlas.colecciones&&o.yo.atlas.colecciones.length>0,expression:"\n        yo.atlas && yo.atlas.colecciones && yo.atlas.colecciones.length > 0\n      "}],staticClass:"botonMenuCx selectorSubseccionMenuCx"},[n("img",{staticClass:"iconoMenuCx",attrs:{src:i("bd51"),alt:"nodos"}}),o._v(" Colecciones "),n("div",{staticClass:"subseccionMenuCx"},o._l(o.yo.atlas.colecciones,(function(e){return n("div",{key:e.id,staticClass:"botonMenuCx",on:{click:function(i){return i.stopPropagation(),o.toggleNodoEnColeccion(e.id)}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.togglingNodoEnColeccion!=e.id,expression:"togglingNodoEnColeccion!=coleccion.id"}],staticStyle:{height:"12px","margin-right":"10px","border-radius":"50%"},style:[{backgroundColor:e.idsNodos.includes(o.esteNodo.id)?"var(--atlasVerde)":""}],attrs:{src:i("5d24"),alt:"Check"}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.togglingNodoEnColeccion===e.id,expression:"togglingNodoEnColeccion===coleccion.id"}]}),o._v(" "+o._s(e.nombre)+" ")],1)})),0)]),o.usuarioLogeado?n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.toggleAprendido(e)}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.togglingAprendido,expression:"!togglingAprendido"}],staticClass:"iconoMenuCx",staticStyle:{"border-radius":"50%"},style:[{backgroundColor:o.nodoAprendido?"var(--atlasConocimientoCheck)":""}],attrs:{src:i("5d24"),alt:"check"}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.togglingAprendido,expression:"togglingAprendido"}],attrs:{texto:""}}),o._v(" "+o._s(o.nodoAprendido?"Desm":"M")+"arcar como aprendido ")],1):o._e(),o.usuarioLogeado?n("div",{directives:[{name:"show",rawName:"v-show",value:o.aprendible,expression:"aprendible"}],staticClass:"botonMenuCx",class:{deshabilitado:o.enviandoFechaEstudiado},on:{click:function(e){return e.stopPropagation(),o.marcarEstudiado(e)}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoFechaEstudiado,expression:"!enviandoFechaEstudiado"}],staticClass:"iconoMenuCx",attrs:{src:i("2874"),alt:"Read"}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoFechaEstudiado,expression:"enviandoFechaEstudiado"}],attrs:{texto:""}}),o._v(" Estudiado ")],1):o._e(),o.usuarioLogeado?n("div",{directives:[{name:"show",rawName:"v-show",value:o.nodoEstudiado&&!o.nodoAprendido,expression:"nodoEstudiado && !nodoAprendido"}],staticClass:"botonMenuCx",class:{deshabilitado:o.creandoIteracionRepaso},on:{click:function(e){return e.stopPropagation(),o.setPeriodoRepaso(e)}}},[n("img",{staticClass:"iconoMenuCx",attrs:{src:i("8587"),alt:"Reloj"}}),o._v("Periodo de repaso "),n("span"),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoIteracionRepaso,expression:"creandoIteracionRepaso"}],attrs:{texto:""}})],1):o._e(),!o.nodoSeleccionado||o.nodoSeleccionado.id==o.esteNodo.id||1!=o.usuarioSuperadministrador&&1!=o.usuarioAdministradorAtlas?o._e():[n("div",{staticClass:"seccionMenuCx"},[o._v(o._s(o.nodoSeleccionado.nombre))]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.nodoSeleccionado,o.esteNodo)}}},[o._v(" Continua aquí ")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Continua desde aquí ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.esteNodo.vinculos.some((function(e){return e.idRef==o.nodoSeleccionado.id})),expression:"esteNodo.vinculos.some((v) => v.idRef == nodoSeleccionado.id)"}],staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Desconectar ")])]],2),n("div",{ref:"nombre",style:[o.estiloCartelNombre],attrs:{id:"nombre"},on:{click:o.clickCartelNombre}},[o._v(" "+o._s(o.callingPosiciones?o.esteNodo.puntaje:o.esteNodo.nombre)+" ")]),o.esteNodo&&o.esteNodo.descripcion?n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&!o.callingPosiciones&&o.mostrarDescripcion,expression:"seleccionado && !callingPosiciones && mostrarDescripcion"}],staticClass:"cuadritoDescripcionNodo"},[n("div",{staticClass:"descripcionNodo"},[o._v(o._s(o.esteNodo.descripcion))]),n("img",{staticClass:"botonAbrirNodo",attrs:{src:i("9d5e"),alt:"Ir",title:"Abrir este nodo"},on:{click:function(e){return e.stopPropagation(),o.abrirPaginaNodo(e)}}}),n("div",{staticClass:"botonEquis",attrs:{id:"botonCerrarDescripcion"},on:{click:function(e){e.stopPropagation(),o.mostrarDescripcion=!1},mousedown:function(o){o.stopPropagation()},mouseup:function(o){o.stopPropagation()}}},[n("div",{staticClass:"linea1"}),n("div",{staticClass:"linea2"})])]):o._e()])},so=[],ro=(i("a623"),i("498a"),function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"loading"},[n("img",{attrs:{src:i("3c35"),alt:"Cargando",id:"iconoLoading"}}),o.texto?n("span",{staticClass:"textoLoading",style:[o.estiloTexto]},[o._v(o._s(o.texto))]):o._e()])}),co=[],uo={name:"Loading",props:{texto:{type:String},colorLetra:{type:String,default:"black"}},computed:{estiloTexto:function(){return{color:this.colorLetra}}}},lo=uo,vo=(i("a3f6"),Object(p["a"])(lo,ro,co,!1,null,"55bc8aa0",null)),mo=vo.exports;function po(){var o=Object(s["a"])(["\n  fragment fragDatoNodoConocimiento on DatoNodoUsuario {\n    id\n    idNodo\n    nombreNodo\n    aprendido\n    estudiado\n    periodoRepaso\n    iteracionesRepaso{\n        id\n        intervalo\n    }\n  }\n"]);return po=function(){return o},o}var ho=d()(po());function fo(){var o=Object(s["a"])(["\n            mutation ($idUsuario: ID!, $idNodo: ID!, $fecha: Date!) {\n              setDateNodoConocimientoEstudiadoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n                fecha: $fecha\n              ) {\n                ...fragDatoNodoConocimiento\n              }\n            }\n            ","\n          "]);return fo=function(){return o},o}function go(){var o=Object(s["a"])(["\n            mutation ($idUsuario: ID!, $idNodo: ID!) {\n              crearIteracionRepasoNodoConocimientoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n              ) {\n                id\n                iteracionesRepaso {\n                  id\n                  intervalo\n                }\n              }\n            }\n          "]);return go=function(){return o},o}function bo(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idColeccion: ID!, $idUsuario: ID!) {\n              toggleNodoColeccionNodosAtlasConocimientoUsuario(\n                idNodo: $idNodo\n                idColeccion: $idColeccion\n                idUsuario: $idUsuario\n              ) {\n                id\n                idsNodos\n                nodos {\n                  id\n                  nombre\n                }\n              }\n            }\n          "]);return bo=function(){return o},o}function No(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevoEstadoAprendido: Boolean!) {\n              setNodoAtlasAprendidoUsuario(\n                idNodo: $idNodo\n                nuevoEstadoAprendido: $nuevoEstadoAprendido\n              ) {\n                ...fragDatoNodoConocimiento\n              }\n            }\n            ","\n          "]);return No=function(){return o},o}function Ao(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevoPeriodoRepaso: Int!) {\n              setPeriodoRepasoNodoConocimientoUsuario(\n                idNodo: $idNodo\n                nuevoPeriodoRepaso: $nuevoPeriodoRepaso\n              ) {\n                id\n                idNodo\n                periodoRepaso\n              }\n            }\n          "]);return Ao=function(){return o},o}function Co(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevoTipoNodo: String!) {\n              setTipoNodo(idNodo: $idNodo, nuevoTipoNodo: $nuevoTipoNodo) {\n                id\n                tipoNodo\n              }\n            }\n          "]);return Co=function(){return o},o}var yo={components:{Loading:mo},name:"NodoConocimiento",props:{esteNodo:{type:Object,required:!0},datosUsuarioEsteNodo:{type:Object},enviandoQueryTarget:Boolean,esNodoObjetivo:Boolean,esTarget:Boolean,yo:Object,modoAtlas:String,escondido:Boolean,centroVista:Object,idNodoMenuCx:String,idsNodosAprendidos:Array,idsNodosEstudiados:Array,idsNodosFrescos:Array,idsNodosPresentesCabeza:Array,nodoSeleccionado:Object,seleccionado:Boolean,fantasmeado:Boolean,previoDeSeleccionado:Boolean,usuarioAdministradorAtlas:{type:Boolean,default:!1},esquinasDiagrama:Object,callingPosiciones:Boolean,factorZoom:Number,configuracionAtlas:Object},data:function(){return{arrastrandoNodo:!1,nombreEditable:!1,nombreEditandose:!1,baseSize:{x:50,y:50},posicion:{x:0,y:0},togglingNodoEnColeccion:null,estiloNombreBase:{minWidth:20,fontSize:12,minHeight:10,padding:5,borderRadius:4},mostrarDescripcion:!1,creandoIteracionRepaso:!1,enviandoFechaEstudiado:!1,togglingAprendido:!1,settingTipoNodo:!1}},computed:{menuCx:function(){return this.idNodoMenuCx==this.esteNodo.id},size:function(){var o=Object.assign({},this.baseSize);if(this.seleccionado){var e=this.baseSize.x,i=this.baseSize.y;o.x=Math.round(1.1*e),o.y=Math.round(1.1*i)}return Object(M["a"])({},o)},estiloPosicion:function(){var o=this.posicion.x-this.esquinasDiagrama.x1,e=this.posicion.y-this.esquinasDiagrama.y1,i=Math.round((e-this.size.y/2)*this.factorZoom),n=Math.round((o-this.size.x/2)*this.factorZoom);return{top:i+"px",left:n+"px"}},estiloZeta:function(){var o=0;return(this.arrastrandoNodo||this.seleccionado)&&(o=10),this.menuCx&&(o=11),{zIndex:o}},estiloSize:function(){return{width:this.size.x*this.factorZoom+"px",height:this.size.y*this.factorZoom+"px"}},permisosUsuario:function(){return this.$store.state.usuario.permisos},aprendible:function(){var o=this;if(!this.esteNodo.vinculos.some((function(o){return"target"==o.rol})))return!0;var e=this.esteNodo.vinculos.filter((function(o){return"target"==o.rol})).map((function(o){return o.idRef}));return e.every((function(e){return o.idsNodosPresentesCabeza.includes(e)}))},nodoAprendido:function(){return this.idsNodosAprendidos.includes(this.esteNodo.id)},nodoEstudiado:function(){return this.idsNodosEstudiados.includes(this.esteNodo.id)},nodoRepasar:function(){return!this.idNodoAprendido&&this.nodoEstudiado&&!this.idsNodosFrescos.includes(this.esteNodo.id)},nodoPresenteCabeza:function(){return this.idsNodosPresentesCabeza.includes(this.esteNodo.id)},estiloCartelNombre:function(){var o="var(--atlasConocimientoOff)",e="black";return"estudiante"===this.modoAtlas?this.nodoPresenteCabeza?o="var(--atlasConocimientoCheck)":this.nodoRepasar?o="var(--atlasConocimientoRepaso)":this.aprendible?o="var(--atlasConocimientoAvailable)":e="#313131":"experto"===this.modoAtlas&&this.usuarioExpertoNodo&&(o="var(--atlasConocimientoCheck)"),{backgroundColor:o,color:e,minWidth:parseInt(this.estiloNombreBase.minWidth*this.factorZoom)+"px",fontSize:parseInt(this.estiloNombreBase.fontSize*this.factorZoom)+"px",minHeight:parseInt(this.estiloNombreBase.minHeight*this.factorZoom)+"px",padding:parseInt(this.estiloNombreBase.padding*this.factorZoom)+"px",borderRadius:parseInt(this.estiloNombreBase.borderRadius*this.factorZoom)+"px"}},usuarioExpertoNodo:function(){return!(!this.usuario||!this.usuario.id)&&this.esteNodo.expertos.includes(this.usuario.id)},estiloFuerzaCentroMasa:function(){return{width:Math.round(this.esteNodo.fuerzaCentroMasa.fuerza*this.factorZoom)+"px",height:Math.round(3*this.factorZoom)+"px",transform:"rotate("+this.esteNodo.fuerzaCentroMasa.direccion+"rad)"}},estiloFuerzaColision:function(){return{width:Math.round(this.factorZoom*this.esteNodo.fuerzaColision.fuerza)+"px",height:Math.round(3*this.factorZoom)+"px",transform:"rotate("+this.esteNodo.fuerzaColision.direccion+"rad)"}},estiloBolita:function(){var o="2px solid transparent",e="rgb(195 195 195)";return this.previoDeSeleccionado&&(o="2px solid var(--atlasConocimientoSeleccion)",e="rgb(195 195 195)"),this.seleccionado&&(o="2px solid transparent",e="var(--atlasConocimientoSeleccion)"),{border:o,backgroundColor:e}}},methods:{setTipoNodo:function(o){var e=this;this.usuarioExpertoNodo&&(this.esteNodo.tipoNodo!==o?(this.settingTipoNodo=!0,this.$apollo.mutate({mutation:d()(Co()),variables:{idNodo:this.esteNodo.id,nuevoTipoNodo:o}}).then((function(){e.settingTipoNodo=!1})).catch((function(o){e.settingTipoNodo=!1,console.log("Error: ".concat(o))}))):console.log("Operación innecesaria"))},setPeriodoRepaso:function(){var o=this,e=parseInt(Number(prompt("Introduce el periodo para repasar este tema (En días)")));if(e<1)console.log("Periodo ilegal");else{var i=864e5*e;this.enviandoOperacion=!0,this.$apollo.mutate({mutation:d()(Ao()),variables:{idNodo:this.esteNodo.id,nuevoPeriodoRepaso:i}}).then((function(){o.enviandoOperacion=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoOperacion=!1}))}},clickCartelNombre:function(o){this.seleccionado&&(o.stopPropagation(),this.mostrarDescripcion=!this.mostrarDescripcion)},toggleAprendido:function(){var o=this,e=!this.nodoAprendido;this.togglingAprendido=!0,this.$apollo.mutate({mutation:d()(No(),ho),variables:{idNodo:this.esteNodo.id,nuevoEstadoAprendido:e}}).then((function(e){var i=e.data.setNodoAtlasAprendidoUsuario;console.log("".concat(i.length," nodos modificados"));var n,t=Object(no["a"])(i);try{for(t.s();!(n=t.n()).done;){var a=n.value;console.log("Nombre: "+a.nombreNodo)}}catch(m){t.e(m)}finally{t.f()}o.togglingAprendido=!1;var s,r=o.$apollo.provider.defaultClient,d=r.readQuery({query:Ie}),c=JSON.parse(JSON.stringify(d)),u=!1,l=Object(no["a"])(i);try{var v=function(){var e=s.value;o.yo.atlas.datosNodos.some((function(o){return o.id===e.id}))||(console.log("No estaba en caché. Pushing ".concat(JSON.stringify(e))),u=!0,c.yo.atlas.datosNodos.push(e))};for(l.s();!(s=l.n()).done;)v()}catch(m){l.e(m)}finally{l.f()}u&&r.writeQuery({query:Ie,data:c})})).catch((function(e){console.log("Error: ".concat(e)),o.togglingAprendido=!1}))},abrirPaginaNodo:function(){this.$router.push(this.$route.path+"/nodoConocimiento/"+this.esteNodo.id)},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},eliminarEsteNodo:function(){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?this.$emit("eliminar",this.esteNodo.id):console.log("No autorizado")},arrastrarNodo:function(o){if(this.arrastrandoNodo){var e=document.getElementById("contenedorNodos").getBoundingClientRect(),i=Math.round((o.clientY-e.top)/this.factorZoom),n=Math.round((o.clientX-e.left)/this.factorZoom);this.posicion.y=i,this.posicion.x=n}},guardarPosicion:function(){this.arrastrandoNodo&&(this.$emit("cambioDePosicionManual",this.esteNodo.id,{x:this.posicion.x,y:this.posicion.y}),this.arrastrandoNodo=!1)},crearVinculo:function(o,e,i){console.log("Creando vinculo entre ".concat(e," y ").concat(i)),this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?(console.log("creando un vinculo tipo ".concat(o," entre ").concat(e.nombre," y ").concat(i.nombre," ")),this.$emit("creacionVinculo",{tipo:o,idNodoFrom:e.id,idNodoTo:i.id})):console.log("No autorizado")},eliminarVinculo:function(o,e){console.log("Desconectando"),this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?this.$emit("eliminacionVinculo",{idNodoFrom:o.id,idNodoTo:e.id}):console.log("No autorizado")},stopProp:function(o){console.log("Stopping"),o.stopPropagation()},toggleNodoEnColeccion:function(o){var e=this;this.usuario&&this.usuario.id&&(this.togglingNodoEnColeccion=o,this.$apollo.mutate({mutation:d()(bo()),variables:{idNodo:this.esteNodo.id,idColeccion:o,idUsuario:this.usuario.id}}).then((function(){e.togglingNodoEnColeccion=null})).catch((function(o){e.togglingNodoEnColeccion=null,console.log("Error: ".concat(o))})))},iniciarGestionRepasos:function(){var o=this,e=this.yo.atlas.datosNodos.find((function(e){return e.idNodo===o.esteNodo.id&&e.iteracionesRepaso.length>0}));e?(console.log("Este nodo ya tenía repasos"),this.$router.push({name:"ventanaRepasos",params:{idRepaso:e.id}})):(console.log("Este nodo no tenía repasos. Creando"),this.addIteracionRepaso())},addIteracionRepaso:function(){var o=this;console.log("Enviando para add to lista repasos"),this.creandoIteracionRepaso=!0,this.$apollo.mutate({mutation:d()(go()),variables:{idUsuario:this.usuario.id,idNodo:this.esteNodo.id}}).then((function(e){var i=e.data.crearIteracionRepasoNodoConocimientoUsuario;o.creandoIteracionRepaso=!1,o.$router.push({name:"ventanaRepasos",params:{idRepaso:i.id}})})).catch((function(e){console.log("Error: ".concat(e)),o.creandoIteracionRepaso=!1}))},marcarEstudiado:function(){var o=this;if(this.usuarioLogeado){var e=new Date;this.enviandoFechaEstudiado=!0,this.$apollo.mutate({mutation:d()(fo(),ho),variables:{idUsuario:this.usuario.id,idNodo:this.esteNodo.id,fecha:e}}).then((function(e){var i=e.data.setDateNodoConocimientoEstudiadoUsuario;if(o.enviandoFechaEstudiado=!1,!o.yo.atlas.datosNodos.some((function(o){return o.id===i.id}))){console.log("No estaba en caché. Pushing ".concat(JSON.stringify(i)));var n=o.$apollo.provider.defaultClient,t=n.readQuery({query:Ie}),a=JSON.parse(JSON.stringify(t));a.yo.atlas.datosNodos.push(i),n.writeQuery({query:Ie,data:a})}})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoFechaEstudiado=!1}))}}},watch:{esteNodo:function(){this.posicion=Object(M["a"])({},this.esteNodo.coords)}},mounted:function(){this.posicion=Object(M["a"])({},this.esteNodo.autoCoords)}},Eo=yo,wo=(i("7aa5"),Object(p["a"])(Eo,ao,so,!1,null,"3573fb71",null)),xo=wo.exports,Po=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{style:[{width:o.mostrandoInput?"min(100vh, 350px)":"30px"}],attrs:{id:"buscadorNodosConocimiento"}},[n("div",{attrs:{id:"barraSuperior"}},[n("img",{class:{opaco:!o.mostrandoInput},attrs:{src:i("1d54"),alt:"Lupa",title:"Buscar nodos de conocimiento",id:"imagenLupa"},on:{click:function(e){e.stopPropagation(),o.mostrandoInput=!0}}}),n("transition",{attrs:{name:"unfold"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.textoBusqueda,expression:"textoBusqueda"},{name:"show",rawName:"v-show",value:o.mostrandoInput,expression:"mostrandoInput"}],attrs:{type:"text",placeholder:"Buscar",id:"inputBuscador",autocomplete:"off"},domProps:{value:o.textoBusqueda},on:{click:function(o){o.stopPropagation()},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.buscarDatabase(e)},input:function(e){e.target.composing||(o.textoBusqueda=e.target.value)}}})])],1),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.esperandoResultados,expression:"esperandoResultados"}],attrs:{texto:"Buscando"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoLista,expression:"mostrandoLista"}],attrs:{id:"listaResultados"}},o._l(o.resultados,(function(e){return n("div",{key:e.id,staticClass:"resultado",on:{click:function(i){i.stopPropagation(),o.$emit("nodoSeleccionado",e),o.mostrandoInput=!1,o.mostrandoLista=!1}}},[o._v(" "+o._s(e.nombre)+" ")])})),0)],1)},So=[];function Do(){var o=Object(s["a"])(["\n            query ($palabrasBuscadas: String!) {\n              busquedaAmplia(palabrasBuscadas: $palabrasBuscadas) {\n                id\n                nombre\n                resumen\n                autoCoords {\n                  x\n                  y\n                }\n              }\n            }\n          "]);return Do=function(){return o},o}var Io={components:{Loading:mo},name:"BuscadorNodosConocimiento",data:function(){return{textoBusqueda:"",cantidadPalabrasValidas:0,resultados:[],mostrandoInput:!1,mostrandoLista:!1,esperandoResultados:!1}},props:{cerrarBusqueda:Number},methods:{cerrar:function(){this.mostrandoInput=!1},buscarDatabase:function(){var o=this;console.log("******Descargando resultados de búsqueda"),this.esperandoResultados=!0,this.$apollo.query({query:d()(Do()),variables:{palabrasBuscadas:this.textoBusqueda},fetchPolicy:"network-only"}).then((function(e){var i=e.data.busquedaAmplia;o.resultados=i,o.esperandoResultados=!1,o.mostrandoLista=!0})).catch((function(e){console.log("Error: ".concat(e)),o.esperandoResultados=!1}))}},watch:{textoBusqueda:function(){this.mostrandoLista=!1},cerrarBusqueda:function(){this.mostrandoInput=!1,this.mostrandoLista=!1}}},Ro=Io,ko=(i("f4f7"),Object(p["a"])(Ro,Po,So,!1,null,"c893d296",null)),Mo=ko.exports,jo=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:o.abierto,expression:"abierto"}],attrs:{id:"panelConjuntosNodos"},on:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},touchmove:function(o){o.stopPropagation()}}},[n("div",{attrs:{id:"barraConjuntos"}},[o._l(o.conjuntos,(function(e){return n("div",{key:"selectorConjunto"+e.id,staticClass:"selectorConjunto",class:{seleccionado:e.id===o.idConjuntoSeleccionado},on:{click:function(i){return o.seleccionarColeccion(i,e.id)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombreColeccion||!e.editable||e.id!=o.idConjuntoSeleccionado,expression:"\n          !editandoNombreColeccion ||\n          !conjunto.editable ||\n          conjunto.id != idConjuntoSeleccionado\n        "}],staticClass:"nombreColeccion"},[o._v(" "+o._s(e.titulo)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:e.editable&&e.id===o.idConjuntoSeleccionado&&o.editandoNombreColeccion,expression:"\n          conjunto.editable &&\n          conjunto.id === idConjuntoSeleccionado &&\n          editandoNombreColeccion\n        "}],class:{deshabilitado:o.enviandoQueryColecciones},attrs:{type:"text",name:"nuevoNombreColeccion",id:"inputNombreColeccion"+e.id},on:{keypress:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"enter",13,i.key,"Enter")?null:o.guardarNuevoNombreColeccion(i,e.id)},blur:function(e){o.editandoNombreColeccion=!1}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombreColeccion&&e.editable&&e.id===o.idConjuntoSeleccionado,expression:"\n          !editandoNombreColeccion &&\n          conjunto.editable &&\n          conjunto.id === idConjuntoSeleccionado\n        "}],staticClass:"botonEliminarColeccion",attrs:{src:i("2191"),alt:"Eliminar",width:"20px",title:"Eliminar colección"},on:{click:function(i){return i.stopPropagation(),o.eliminarColeccion(e.id)}}})])})),n("div",{class:{deshabilitado:o.enviandoQueryColecciones},attrs:{id:"controlesConjuntos"}},[n("div",{staticClass:"botonControlesConjuntos",on:{click:o.crearNuevaColeccion}},[o._v("Nueva colección")])])],2),o.idConjuntoSeleccionado?n("coleccion-nodos-conocimiento",{attrs:{yo:o.yo,estaColeccion:o.conjuntoSeleccionado}}):o._e()],1)},$o=[],Oo=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"coleccionNodosConocimiento"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!o.$apollo.queries.progresoColeccion.loading,expression:"!$apollo.queries.progresoColeccion.loading"}],attrs:{id:"zonaBarraProgreso"}},[i("div",{attrs:{id:"barraProgreso"}},[i("div",{style:[{width:o.progresoColeccion+"%"}],attrs:{id:"barraProgresoVerde"}})]),i("div",{attrs:{id:"numeroProgreso"}},[o._v(" "+o._s(o.progresoColeccion)+"% ")])]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.progresoColeccion.loading,expression:"$apollo.queries.progresoColeccion.loading"}]}),i("div",{staticClass:"listaNodos"},o._l(o.nodosConocimiento,(function(e){return i("icono-nodo-conocimiento",{key:e.id,attrs:{esteNodo:e,seleccionado:o.idNodoSeleccionado===e.id},on:{click:function(i){if(i.target!==i.currentTarget)return null;i.stopPropagation(),o.idNodoSeleccionado=o.idNodoSeleccionado===e.id?null:e.id}}})})),1)],1)},qo=[],To=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"iconoNodoConocimiento"},[i("img",{ref:"iconoNodo",staticClass:"iconoNodo",attrs:{src:this.serverUrl+"/api/atlas/iconos/"+o.esteNodo.id,alt:""}}),i("div",{ref:"nombre",class:{seleccionado:o.seleccionado},attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")])])},Bo=[],Uo={name:"IconoNodoConocimiento",data:function(){return{}},props:{esteNodo:Object,seleccionado:Boolean}},Fo=Uo,_o=(i("d522"),Object(p["a"])(Fo,To,Bo,!1,null,"65fb1e38",null)),Lo=_o.exports;function zo(){var o=Object(s["a"])(["\n        query ($idColeccion: ID!, $idUsuario: ID!) {\n          coleccionNodosConocimiento(\n            idColeccion: $idColeccion\n            idUsuario: $idUsuario\n          ) {\n            id\n            progreso\n          }\n        }\n      "]);return zo=function(){return o},o}function Vo(){var o=Object(s["a"])(["\n  query ($idsNodos: [ID!]!) {\n    nodosConocimientoByIds(idsNodos: $idsNodos) {\n      id\n      nombre\n      descripcion\n    }\n  }\n"]);return Vo=function(){return o},o}var Qo=d()(Vo()),Jo={name:"ColeccionNodosConocimiento",components:{IconoNodoConocimiento:Lo,Loading:mo},apollo:{nodosConocimiento:{query:Qo,variables:function(){return{idsNodos:this.estaColeccion.idsNodos}},skip:function(){var o;return!(null!==(o=this.estaColeccion)&&void 0!==o&&o.idsNodos.length)>0},update:function(o){var e=o.nodosConocimientoByIds;return e}},progresoColeccion:{query:d()(zo()),variables:function(){return{idColeccion:this.estaColeccion.id,idUsuario:this.yo.id}},skip:function(){var o,e;return!(null!==(o=this.yo)&&void 0!==o&&o.id)||!(null!==(e=this.estaColeccion)&&void 0!==e&&e.id)},update:function(o){var e=o.coleccionNodosConocimiento;return e.progreso}}},props:{estaColeccion:Object,yo:Object},data:function(){return{idNodoSeleccionado:null,nodosConocimiento:[],progresoColeccion:null}}},Ho=Jo,Zo=(i("bc24"),Object(p["a"])(Ho,Oo,qo,!1,null,"fb89b2fe",null)),Go=Zo.exports;function Ko(){var o=Object(s["a"])(["\n            mutation ($idColeccion: ID!, $idNodo: ID!) {\n              removeNodoColeccionNodosAtlasConocimientoUsuario(\n                idColeccion: $idColeccion\n                idNodo: $idNodo\n              ) {\n                id\n                idsNodos\n                nodos {\n                  id\n                  nombre\n                }\n              }\n            }\n          "]);return Ko=function(){return o},o}function Yo(){var o=Object(s["a"])(["\n            mutation ($idColeccion: ID!) {\n              eliminarColeccionNodosAtlasConocimientoUsuario(\n                idColeccion: $idColeccion\n              ) {\n                id\n                atlas {\n                  colecciones {\n                    id\n                    idsNodos\n                    nodos {\n                      id\n                      nombre\n                    }\n                  }\n                }\n              }\n            }\n          "]);return Yo=function(){return o},o}function Wo(){var o=Object(s["a"])(["\n            mutation ($idColeccion: ID!, $nuevoNombre: String!) {\n              setNombreColeccionNodosAtlasConocimientoUsuario(\n                idColeccion: $idColeccion\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                atlas {\n                  colecciones {\n                    id\n                    nombre\n                    idsNodos\n                    nodos {\n                      id\n                      nombre\n                    }\n                  }\n                }\n              }\n            }\n          "]);return Wo=function(){return o},o}function Xo(){var o=Object(s["a"])(["\n            mutation {\n              crearColeccionNodosAtlasConocimientoUsuario {\n                id\n                atlas {\n                  colecciones {\n                    id\n                    nombre\n                    idsNodos\n                    nodos {\n                      id\n                      nombre\n                    }\n                  }\n                }\n              }\n            }\n          "]);return Xo=function(){return o},o}var oe=/[^ a-zA-ZÀ-ž0-9_():.,-]/,ee={components:{ColeccionNodosConocimiento:Go},name:"PanelConjuntosNodos",props:{yo:Object,modoAtlas:String},data:function(){return{abierto:!1,idConjuntoSeleccionado:0,editandoNombreColeccion:!1,idNodoSeleccionado:null,enviandoQueryColecciones:!1,enviandoQueryNodosSeccion:!1}},methods:{abrirPaginaNodo:function(o){o&&this.$router.push("/nodoConocimiento/"+o)},crearNuevaColeccion:function(){var o=this;this.enviandoQueryColecciones=!0,this.$apollo.mutate({mutation:d()(Xo())}).then((function(){o.enviandoQueryColecciones=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryColecciones=!1}))},seleccionarColeccion:function(o,e){if(this.idConjuntoSeleccionado===e){var i=this.conjuntos.find((function(o){return o.id===e})).nombre;console.log("Seting value del input a ".concat(i)),this.editandoNombreColeccion=!0,document.getElementById("inputNombreColeccion"+e).value=i}else this.editandoNombreColeccion=!1;this.idConjuntoSeleccionado=e,this.idNodoSeleccionado=null},guardarNuevoNombreColeccion:function(o,e){var i=this,n=o.target.value;if(console.log("seting nombre de coleccion ".concat(e," con value: ").concat(n)),oe.test(n))return alert("¡El nombre contenía caracteres ilegales!"),!0;this.enviandoQueryColecciones=!0,this.$apollo.mutate({mutation:d()(Wo()),variables:{idColeccion:e,nuevoNombre:n}}).then((function(){i.enviandoQueryColecciones=!1,i.editandoNombreColeccion=!1})).catch((function(o){console.log("Error: ".concat(o)),i.enviandoQueryColecciones=!1}))},eliminarColeccion:function(o){var e=this;confirm("Confirmar eliminación de colección? (Esta acción no se puede deshacer)")&&(this.idConjuntoSeleccionado=null,this.enviandoQueryColecciones=!0,this.$apollo.mutate({mutation:d()(Yo()),variables:{idColeccion:o}}).then((function(){e.enviandoQueryColecciones=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoQueryColecciones=!1})))},eliminarNodoSeleccionadoSeccionSeleccionada:function(){var o=this;this.idConjuntoSeleccionado&&this.idNodoSeleccionado&&(this.enviandoQueryNodosSeccion=!0,this.$apollo.mutate({mutation:d()(Ko()),variables:{idColeccion:this.idConjuntoSeleccionado,idNodo:this.idNodoSeleccionado}}).then((function(){o.enviandoQueryNodosSeccion=!1,o.idNodoSeleccionado=null})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoQueryNodosSeccion=!1})))}},computed:{idsNodosObjetivos:function(){return this.yo&&this.yo.atlas&&this.yo.atlas.datosNodos?this.yo.atlas.datosNodos.filter((function(o){return 1==o.objetivo})).map((function(o){return o.idNodo})):[]},nodosObjetivo:function(){var o=this;return this.yo?this.todosNodos.filter((function(e){return o.idsNodosObjetivos.includes(e.id)})):[]},conjuntos:function(){return this.conjuntosUsuario},conjuntosUsuario:function(){if(!this.yo||!this.yo.atlas||!this.yo.atlas.colecciones)return[];var o=JSON.parse(JSON.stringify(this.yo.atlas.colecciones));return o.forEach((function(o){o.titulo=o.nombre,o.modo="estudiante",o.editable=!0,o.editandoNombre=!1})),o},conjuntoSeleccionado:function(){var o=this;return this.conjuntos.find((function(e){return e.id===o.idConjuntoSeleccionado}))}},watch:{abierto:function(){this.idNodoSeleccionado=null}}},ie=ee,ne=(i("7f74"),Object(p["a"])(ie,jo,$o,!1,null,"7df69e60",null)),te=ne.exports,ae=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:o.nodoRender,expression:"nodoRender"}],staticClass:"enlacesNodoConocimiento",style:[o.estiloPosicion]},[i("transition-group",{attrs:{tag:"div"}},o._l(o.vinculosGrises,(function(e){return i("div",{key:e.id,staticClass:"vinculo vinculoGris",style:[e.estilo,o.altoVinculos]},[i("div",{staticClass:"flechaVinculo",style:[o.sizeFlecha]})])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:o.callingPosiciones,expression:"callingPosiciones"}],staticClass:"fuerza",style:[o.estiloFuerzaColision,{opacity:o.nodoSeleccionado?1:.3}],attrs:{id:"fuerzaColision"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:o.callingPosiciones,expression:"callingPosiciones"}],staticClass:"fuerza",style:[o.estiloFuerzaCentroMasa,{opacity:o.nodoSeleccionado?1:.3}],attrs:{id:"fuerzaCentroMasa"}})],1)},se=[],re={name:"EnlacesNodoConocimiento",props:{yo:Object,idNodoSeleccionado:String,idsNodosPreviosSeleccionado:Array,esteNodo:Object,todosNodos:Array,factorZoom:Number,callingPosiciones:Boolean,nodoSeleccionado:Object,childSeleccionado:Boolean,idsTodosNodosRender:Array,esquinasDiagrama:Object,transicionarPosicionNodos:Boolean,idsNodosPresentesCabeza:Array,redibujarEnlaces:{type:Number,default:0}},data:function(){return{esquinasSeleccionado:{x1:0,x2:0,y1:0,y2:0},posicionSeleccionado:{x:0,y:0},factorFuerza:15}},computed:{continuacionDeSeleccionado:function(){var o=this;return!!this.nodoSeleccionado&&!!this.nodoSeleccionado.vinculos.some((function(e){return e.idRef===o.esteNodo.id}))},estiloPosicion:function(){var o=this.esteNodo.autoCoords.x-this.esquinasDiagrama.x1,e=this.esteNodo.autoCoords.y-this.esquinasDiagrama.y1;return{left:o*this.factorZoom+"px",top:e*this.factorZoom+"px"}},vinculosGrises:function(){var o=this,e=JSON.parse(JSON.stringify(this.esteNodo.vinculos.filter((function(e){return"target"===e.rol&&o.idsTodosNodosRender.includes(e.idRef)})))),i=[];return this.idNodoSeleccionado&&(i=this.idsNodosPreviosSeleccionado,i=i.concat([this.idNodoSeleccionado])),e.forEach((function(e){var n=o.todosNodos.find((function(o){return o.id===e.idRef})).coords,t={x:n.x-o.posNodo.x,y:n.y-o.posNodo.y},a=Math.PI+Math.atan2(t.y,t.x),s=Math.hypot(t.x,t.y),r=o.idNodoSeleccionado&&i.includes(o.esteNodo.id)&&i.includes(e.idRef),d="target"===e.rol&&o.idsNodosPresentesCabeza.includes(o.esteNodo.id)||"source"===e.rol&&o.idsNodosPresentesCabeza.includes(e.idRef),c="source"===e.rol&&!o.idsNodosPresentesCabeza.includes(o.esteNodo.id)||"target"===e.rol&&o.idsNodosPresentesCabeza.includes(e.idRef),u=!d&&!c,l=.3,v="black";c&&(v="var(--atlasConocimientoAvailable)"),u&&(v="black"),d&&(v="var(--atlasConocimientoCheck)"),o.idNodoSeleccionado&&(l=.05,r&&(l=.7,u&&(l=.2))),e.estilo={transform:"rotate("+a+"rad)",top:Math.round((t.y-1)*o.factorZoom)+"px",left:Math.round(t.x*o.factorZoom)+"px",width:Math.round(s*o.factorZoom)+"px",backgroundColor:v,opacity:l,borderLeftColor:v}})),e},estiloFuerzaColision:function(){return{transform:"rotate("+this.esteNodo.fuerzaColision.direccion+"rad)",top:"0px",left:"0px",width:Math.ceil(this.esteNodo.fuerzaColision.fuerza*this.factorFuerza*this.factorZoom)+"px"}},estiloFuerzaCentroMasa:function(){return{transform:"rotate("+this.esteNodo.fuerzaCentroMasa.direccion+"rad)",top:"0px",left:"0px",width:Math.round(this.esteNodo.fuerzaCentroMasa.fuerza*this.factorFuerza*this.factorZoom)+"px"}},altoVinculos:function(){return{height:Math.ceil(1*this.factorZoom)+"px"}},sizeFlecha:function(){return{borderWidth:Math.round(7*this.factorZoom)+"px"}},posNodo:function(){return this.esteNodo.coords},seleccionado:function(){return!!this.nodoSeleccionado&&this.nodoSeleccionado.id===this.esteNodo.id},desplegado:function(){return!!(this.usuario&&this.usuario.id&&this.yo&&this.yo.atlasSolidaridad&&this.yo.atlasSolidaridad.idsNodosDesplegados)&&this.yo.atlasSolidaridad.idsNodosDesplegados.includes(this.esteNodo.id)},nodoRender:function(){return!(!this.usuario||this.esteNodo.id!==this.usuario.id)||this.idsTodosNodosRender.includes(this.esteNodo.id)}}},de=re,ce=(i("94c9"),Object(p["a"])(de,ae,se,!1,null,"1333e728",null)),ue=ce.exports;function le(){var o=Object(s["a"])(["\n            mutation ($tipo: String!, $idNodoFrom: ID!, $idNodoTo: ID!) {\n              crearVinculo(\n                tipo: $tipo\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    rol\n                    tipo\n                  }\n                }\n              }\n            }\n          "]);return le=function(){return o},o}function ve(){var o=Object(s["a"])(["\n            mutation ($idNodoFrom: ID!, $idNodoTo: ID!) {\n              eliminarVinculoFromTo(\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    tipo\n                    rol\n                  }\n                }\n              }\n            }\n          "]);return ve=function(){return o},o}function me(){var o=Object(s["a"])(["\n            query {\n              yo {\n                id\n                atlas {\n                  centroVista {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return me=function(){return o},o}function pe(){var o=Object(s["a"])(["\n            mutation ($infoNodo: NodoConocimientoInput) {\n              crearNodo(infoNodo: $infoNodo) {\n                ...fragNodoConocimiento\n              }\n            }\n            ","\n          "]);return pe=function(){return o},o}function he(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              eliminarNodo(idNodo: $idNodo)\n            }\n          "]);return he=function(){return o},o}function fe(){var o=Object(s["a"])(["\n            mutation ($idNodo: String, $coordsManuales: CoordsInput) {\n              setCoordsManuales(\n                idNodo: $idNodo\n                coordsManuales: $coordsManuales\n              ) {\n                modificados {\n                  id\n                  coordsManuales {\n                    x\n                    y\n                  }\n                  coords {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return fe=function(){return o},o}function ge(){var o=Object(s["a"])(["\n            query ($idNodo: ID!) {\n              nodo(idNodo: $idNodo) {\n                id\n                autoCoords {\n                  x\n                  y\n                }\n              }\n            }\n          "]);return ge=function(){return o},o}function be(){var o=Object(s["a"])(["\n            mutation {\n              nulificarNodoTargetUsuarioAtlas\n            }\n          "]);return be=function(){return o},o}function Ne(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              setNodoAtlasTarget(idNodo: $idNodo)\n            }\n          "]);return Ne=function(){return o},o}function Ae(){var o=Object(s["a"])(["\n            mutation ($nombreAtlas: String!) {\n              togglePosicionamientoAutomaticoAtlas(nombreAtlas: $nombreAtlas) {\n                id\n                posicionando\n              }\n            }\n          "]);return Ae=function(){return o},o}function Ce(){var o=Object(s["a"])(["\n            mutation ($ciclos: Int!) {\n              posicionarNodosConocimientoByFuerzas(ciclos: $ciclos)\n            }\n          "]);return Ce=function(){return o},o}function ye(){var o=Object(s["a"])(["\n        query ($nombreAtlas: String!) {\n          configuracionAtlas(nombreAtlas: $nombreAtlas) {\n            id\n            posicionando\n          }\n        }\n      "]);return ye=function(){return o},o}function Ee(){var o=Object(s["a"])(["\n  query {\n    yo {\n      id\n      atlas {\n        datosNodos {\n          ...fragDatoNodoConocimiento\n        }\n        configuracion {\n          modo\n        }\n        idNodoTarget\n        colecciones {\n          id\n          nombre\n          idsNodos\n          progreso\n          nodos {\n            id\n            nombre\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Ee=function(){return o},o}function we(){var o=Object(s["a"])(["\n  query todosNodos {\n    todosNodos {\n      ...fragNodoConocimiento\n    }\n  }\n  ","\n"]);return we=function(){return o},o}function xe(){var o=Object(s["a"])(["\n  fragment fragNodoConocimiento on NodoConocimiento {\n    id\n    nombre\n    descripcion\n    expertos\n    tipoNodo\n    clases {\n      id\n      nombre\n      idExperto\n      interesados\n    }\n    coordsManuales {\n      x\n      y\n    }\n    coords {\n      x\n      y\n    }\n    autoCoords {\n      x\n      y\n    }\n    centroMasa {\n      x\n      y\n    }\n    stuck\n    angulo\n    puntaje\n    vinculos {\n      id\n      idRef\n      rol\n      tipo\n    }\n    fuerzaCentroMasa {\n      fuerza\n      direccion\n    }\n    fuerzaColision {\n      fuerza\n      direccion\n    }\n  }\n"]);return xe=function(){return o},o}var Pe=i("b012"),Se=d()(xe()),De=d()(we(),Se),Ie=d()(Ee(),ho),Re={components:{NodoConocimiento:xo,BuscadorNodosConocimiento:Mo,Loading:mo,PanelConjuntosNodos:te,EnlacesNodoConocimiento:ue},name:"AtlasConocimiento",apollo:{todosNodos:{query:De,result:function(){this.dibujarVinculosGrises()},update:function(o){var e=o.todosNodos;this.nodosDescargados=!0;var i=JSON.parse(JSON.stringify(e));return i.forEach((function(o){o.coordsManuales=o.autoCoords,o.coords=o.autoCoords})),i},fetchPolicy:"cacheFirst"},yo:{query:Ie,skip:function(){return!this.usuarioLogeado||this.todosNodos.length<1}},configuracionAtlas:{query:d()(ye()),variables:{nombreAtlas:"conocimiento"},fetchPolicy:"network-only"}},data:function(){return{configuracionAtlas:{posicionando:!1},hovered:!1,todosNodos:[],nodosDescargados:!1,posicionCreandoNodo:null,idNodoSeleccionado:null,idsNodosCadenaPreviaSeleccionado:[],idNodoMenuCx:null,idsNecesariosParaTarget:[],enviandoQueryModo:!1,modoAtlas:"estudiante",enviandoQueryTarget:!1,redibujarEnlacesNodos:0,yo:{atlas:{datosNodos:[],configuracion:{modo:"estudiante"}}},centroVistaDecimal:{x:218,y:39},showingZoomInfo:!1,zoom:80,minZoom:20,maxZoom:200,pinching:!1,lastPinchDistance:0,actualizarTrazos:0,panningVista:!1,vistaPanned:!1,actualizarVinculosGrises:0,ultimoTouchX:0,ultimoTouchY:0,cerrarBusqueda:0,callingPosiciones:!1,mostrandoMenuContextual:!1,offsetMenuContextual:{top:"0px",left:"0px"},enviandoQueryConfiguracionAtlas:!1,idColeccionSeleccionada:null,seleccionandoColeccion:!1,mostrandoOpcionesColeccion:!1,indexLastLocateNextAvailable:0,indexLastLocateNextCheck:0}},computed:{nombreColeccionSeleccionada:function(){return this.idColeccionSeleccionada?this.coleccionSeleccionada.nombre:"Atlas"},coleccionSeleccionada:function(){var o=this;return this.idColeccionSeleccionada?this.coleccionesUsuario.find((function(e){return e.id===o.idColeccionSeleccionada})):null},coleccionesUsuario:function(){var o,e;return null!==(o=this.yo)&&void 0!==o&&null!==(e=o.atlas)&&void 0!==e&&e.colecciones?this.yo.atlas.colecciones:[]},idsNodosObjetivos:function(){return this.yo&&this.yo.atlas&&this.yo.atlas.datosNodos?this.yo.atlas.datosNodos.filter((function(o){return 1==o.objetivo})).map((function(o){return o.idNodo})):[]},nodosObjetivo:function(){var o=this;return this.todosNodos?this.todosNodos.filter((function(e){return o.idsNodosObjetivos.includes(e.id)})):[]},nodoSeleccionado:function(){var o=this;return this.idNodoSeleccionado?this.todosNodos.find((function(e){return e.id===o.idNodoSeleccionado})):null},idUsuario:function(){return this.$store.state.usuario.id},usuarioAdministradorAtlas:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("atlasAdministrador")},idNodoTarget:function(){return this.yo&&this.yo.atlas?this.yo.atlas.idNodoTarget:null},nodoTarget:function(){var o=this;return this.idNodoTarget?this.todosNodos.find((function(e){return e.id===o.idNodoTarget})):null},idsNodosAprendidos:function(){return this.yo.atlas.datosNodos.filter((function(o){return!0===o.aprendido})).map((function(o){return o.idNodo}))},datosNodosEstudiados:function(){return this.yo.atlas.datosNodos.filter((function(o){return!o.aprendido&&o.estudiado}))},idsNodosEstudiados:function(){return this.datosNodosEstudiados.map((function(o){return o.idNodo}))},datosNodosRepasar:function(){if(!this.yo||!this.yo.atlas||!this.yo.atlas.datosNodos)return[];var o=this.yo.atlas.datosNodos.filter((function(o){return!o.aprendido&&o.periodoRepaso})),e=new Date,i=e;i.setHours(0),i.setMinutes(0),i.setSeconds(0);var n=o.filter((function(o){return!o.estudiado||o.estudiado+o.periodoRepaso>i.getTime()}));return console.log("Hay ".concat(n.length," nodos que se deben repasar hoy")),n},datosNodosUrgentes:function(){return this.datosNodosRepasar.filter((function(o){var e=new Date(o.estudiado).getTime()+o.iteracionesRepaso[0].intervalo<Date.now();return e}))},datosNodosFrescos:function(){return this.datosNodosEstudiados.filter((function(o){var e=new Date(o.estudiado);return!o.iteracionesRepaso||o.iteracionesRepaso.length<1||Date.now()<e.getTime()+o.iteracionesRepaso[0].intervalo}))},idsNodosFrescos:function(){return this.datosNodosFrescos.map((function(o){return o.idNodo}))},idsNodosPresentesCabeza:function(){var o=this;return this.idsNodosFrescos.filter((function(e){return!o.idsNodosAprendidos.includes(e)})).concat(this.idsNodosAprendidos)},centroVista:function(){return{x:Math.round(this.centroVistaDecimal.x),y:Math.round(this.centroVistaDecimal.y)}},factorZoom:function(){return Number((this.zoom/100).toFixed(2))},esquinasDiagrama:function(){var o=this.todosNodos.reduce((function(o,e){return e.autoCoords.x>o?e.autoCoords.x:o}),0),e=this.todosNodos.reduce((function(o,e){return e.autoCoords.y>o?e.autoCoords.y:o}),0),i=this.todosNodos.reduce((function(o,e){return e.autoCoords.x<o?e.autoCoords.x:o}),0),n=this.todosNodos.reduce((function(o,e){return e.autoCoords.y<o?e.autoCoords.y:o}),0);return{x1:i,y1:n,x2:o,y2:e}},offsetContenedorNodos:function(){var o=this.esquinasDiagrama.x2-this.esquinasDiagrama.x1,e=this.esquinasDiagrama.y2-this.esquinasDiagrama.y1;return{width:o*this.factorZoom+"px",height:e*this.factorZoom+"px"}},nodosConRequerimentos:function(){var o=this.todosNodos.filter((function(o){return o.vinculos.length>0}));return o},nodosRender:function(){var o=this;if(this.idNodoTarget)return this.todosNodos.filter((function(e){return o.idsNecesariosParaTarget.includes(e.id)})).concat([this.todosNodos.find((function(e){return o.idNodoTarget===e.id}))]);if(this.coleccionSeleccionada){var e=function(){var e=0,i=o.coleccionSeleccionada.idsNodos,n=[],t=[],a=function(){t=o.todosNodos.filter((function(o){return i.includes(o.id)})),n.push.apply(n,Object(to["a"])(t));var e=n.map((function(o){return o.id}));i=[];var a,s=Object(no["a"])(t);try{for(s.s();!(a=s.n()).done;){var r,d=a.value,c=d.vinculos.filter((function(o){return"continuacion"===o.tipo&&"target"===o.rol})).map((function(o){return o.idRef})),u=c.filter((function(o){return!e.includes(o)}));(r=i).push.apply(r,Object(to["a"])(u))}}catch(l){s.e(l)}finally{s.f()}};while(e<100&&i.length>0)a();return{v:n}}();if("object"===Object(io["a"])(e))return e.v}return this.todosNodos},idsTodosNodosRender:function(){return this.nodosRender.map((function(o){return o.id}))},offsetLoadingCreandoNodo:function(){if(!this.posicionCreandoNodo)return null;var o=(this.posicionCreandoNodo.x-this.esquinasDiagrama.x1)*this.factorZoom,e=(this.posicionCreandoNodo.y-this.esquinasDiagrama.y1)*this.factorZoom;return{left:o+"px",top:e+"px"}},nodoAbierto:function(){return console.log("Verificando path name"),console.log(this.$route.name),"visorNodoConocimiento"===this.$route.name},nodosConectadosAlSeleccionado:function(){var o=this;return this.nodoSeleccionado?this.todosNodos.filter((function(e){return o.nodoSeleccionado.vinculos.some((function(o){return o.idRef===e.id}))})):[]},idsNodosPreviosSeleccionado:function(){if(!this.idNodoSeleccionado)return[];for(var o=[this.idNodoSeleccionado],e=[],i=0;i<20;i++){var n=this.nodosRender.filter((function(e){return e.vinculos.some((function(e){return"source"===e.rol&&o.includes(e.idRef)}))}));if(n.length<1)break;var t=n.map((function(o){return o.id}));e.push.apply(e,Object(to["a"])(t)),o=t}return e}},methods:{localizarNext:function(o){var e=this,i=Object(to["a"])(this.nodosRender);if(console.log("Localizando next en ".concat(i.length," nodos de coleccion")),"available"===o){var n=0,t=i.find((function(o){if(e.idsNodosPresentesCabeza.includes(o.id))return console.log("Estaba fresco"),!1;if(e.indexLastLocateNextAvailable===o.id)return!1;var t=o.vinculos.filter((function(o){return"continuacion"===o.tipo&&"target"===o.rol})).map((function(o){return o.idRef})),a=i.filter((function(o){return t.includes(o.id)}));return!a.some((function(o){return!e.idsNodosPresentesCabeza.includes(o.id)}))&&(n++,!(n<=e.indexLastLocateNextAvailable))}));t?(this.centrarEnNodoById(t.id),this.indexLastLocateNextAvailable=n):this.indexLastLocateNextAvailable=0}if("check"===o){var a=0,s=i.find((function(o){if(e.idsNodosPresentesCabeza.includes(o.id))return console.log("Estaba fresco"),a++,!(a<=e.indexLastLocateCheck)}));s?(this.centrarEnNodoById(s.id),this.indexLastLocateCheck=a):this.indexLastLocateCheck=0}},setIdColeccionSeleccionada:function(o){this.indexLastLocateNextAvailable=0,this.indexLastLocateNextCheck=0,this.idColeccionSeleccionada=o},iniciarCallingPosiciones:function(){var o=this,e=prompt("¿Cuantos ciclos?");isNaN(e)||(e=Math.round(e),e<1||(console.log("Enviando reposicionamiento de ".concat(e," ciclos")),this.callingPosiciones=!0,this.$apollo.mutate({mutation:d()(Ce()),variables:{ciclos:e}}).then((function(){o.callingPosiciones=!1})).catch((function(e){o.callingPosiciones=!1,console.log("Error: ".concat(e))}))))},togglePosicionamiento:function(){var o=this;this.enviandoQueryConfiguracionAtlas=!0,this.$apollo.mutate({mutation:d()(Ae()),variables:{nombreAtlas:"conocimiento"}}).then((function(){o.enviandoQueryConfiguracionAtlas=!1})).catch((function(){o.enviandoQueryConfiguracionAtlas=!1}))},abrirMenuContextual:function(o){var e=this.$refs.contenedorDiagrama.getBoundingClientRect(),i=Math.round(o.pageY-e.top),n=Math.round(o.pageX-e.left);this.$set(this.offsetMenuContextual,"top",i+"px"),this.$set(this.offsetMenuContextual,"left",n+"px"),this.mostrandoMenuContextual=!0},crearNodoEnMenuContextual:function(){var o=this.$refs.contenedorNodos.getBoundingClientRect(),e=parseInt(this.offsetMenuContextual.left)-parseInt(o.left),i=parseInt(this.offsetMenuContextual.top)-(parseInt(o.top)-parseInt(this.$el.offsetTop)),n=e,t=i;console.log("xPix: ".concat(parseInt(this.offsetMenuContextual.left))),console.log("posXContenedorNodos: ".concat(parseInt(o.left),", ").concat(o.top)),console.log("distanciaLeftPx: ".concat(e)),console.log("distanciaTopPx: ".concat(i)),console.log("Scroll x contenedorDiagrama: ".concat(this.$refs.contenedorDiagrama.scrollLeft));var a={x:parseInt(n/this.factorZoom+this.esquinasDiagrama.x1),y:parseInt(t/this.factorZoom+this.esquinasDiagrama.y1)};console.log("Creando nuevo nodo en ".concat(JSON.stringify(a))),this.crearNodo(a)},encontrarNodosNecesariosDeNodo:function(o,e){var i=this,n=this.todosNodos.find((function(e){return e.id==o}));if(!n)return e;var t=n.vinculos.filter((function(o){return"target"==o.rol})).map((function(o){return o.idRef}));return t.forEach((function(o){e.includes(o)||(e.push(o),e=i.encontrarNodosNecesariosDeNodo(o,e))})),e},clickFondoAtlas:function(){"atlas"==this.$route.name?(this.vistaPanned||(this.idNodoSeleccionado=null),this.panningVista=!1,this.vistaPanned=!1,this.$refs.panelConjuntosNodos.abierto=!1,this.mostrandoMenuContextual=!1):this.$router.push({name:"atlas"})},setEstadoObjetivoNodoCache:function(o,e){console.log("Seting en cache al nodo ".concat(e," con estado objetivo: ").concat(o));var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:Ie}),t=JSON.parse(JSON.stringify(n)),a=t.yo.atlas.datosNodos.findIndex((function(o){return o.idNodo==e}));a>-1?t.yo.atlas.datosNodos[a].objetivo=o:(console.log("No estaba en caché. Pushing"),t.yo.atlas.datosNodos.push({__typename:"DatoNodoUsuario",idNodo:e,objetivo:o,aprendido:!1})),i.writeQuery({query:Ie,data:t})},setNodoAprendidoCache:function(o,e){console.log("Seting en cache al nodo ".concat(e," con estado aprendido: ").concat(o));var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:Ie}),t=JSON.parse(JSON.stringify(n)),a=t.yo.atlas.datosNodos.findIndex((function(o){return o.idNodo==e}));a>-1?t.yo.atlas.datosNodos[a].aprendido=o:(console.log("No estaba en caché. Pushing"),t.yo.atlas.datosNodos.push({__typename:"DatoNodoUsuario",idNodo:e,objetivo:!1,aprendido:o})),i.writeQuery({query:Ie,data:t})},setNodoTargetCache:function(o){console.log("Seting en cache al nodo ".concat(o," como target"));var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Ie}),n=JSON.parse(JSON.stringify(i));n.yo.atlas.idNodoTarget=o,e.writeQuery({query:Ie,data:n})},setModo:function(o){this.usuarioLogeado&&(this.modoAtlas=o)},configurarNodoTarget:function(o){var e=this;this.enviandoQueryTarget=!0,console.log("Configurando nodo target"),o&&o!==this.idNodoTarget?setTimeout((function(){e.setNodoTarget(o)}),100):(console.log("Nulificando"),setTimeout((function(){e.nulificarNodoTarget()}),100))},setNodoTarget:function(o){var e=this;if(o&&this.idNodoTarget!=o){var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:Ie}),t=JSON.parse(JSON.stringify(n));t.yo.atlas.idNodoTarget=o,i.writeQuery({query:Ie,data:t}),this.$apollo.mutate({mutation:d()(Ne()),variables:{idNodo:o}}).then((function(){e.enviandoQueryTarget=!1})).catch((function(o){e.enviandoQueryTarget=!1,console.log("Error: ".concat(o))}))}},nulificarNodoTarget:function(){var o=this;console.log("Nulificando nodo target"),this.enviandoQueryTarget=!0;var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Ie}),n=JSON.parse(JSON.stringify(i));n.yo.atlas.idNodoTarget=null,e.writeQuery({query:Ie,data:n}),this.$apollo.mutate({mutation:d()(be())}).then((function(){o.enviandoQueryTarget=!1})).catch((function(e){o.enviandoQueryTarget=!1,console.log("Error: ".concat(e))}))},centrarEnNodo:function(o){var e=this.$refs.contenedorDiagrama.getBoundingClientRect(),i={x:(o.autoCoords.x-this.esquinasDiagrama.x1)*this.factorZoom,y:(o.autoCoords.y-this.esquinasDiagrama.y1)*this.factorZoom},n={x:parseInt(i.x-e.width/2),y:parseInt(i.y-e.height/2)};this.$refs.contenedorDiagrama.scrollLeft=n.x,this.$refs.contenedorDiagrama.scrollTop=n.y,this.seleccionNodo(o)},centrarEnNodoById:function(o){var e=this;console.log("Centrando en nodo con id ".concat(o));var i=this.todosNodos.find((function(e){return e.id===o}));i?this.centrarEnNodo(i):this.$apollo.query({query:d()(ge()),variables:{idNodo:o}}).then((function(o){var i=o.data.nodo;console.log("Recibido nodo así: ".concat(JSON.stringify(i))),e.centrarEnNodo(i)})).catch((function(o){console.log("Error: ".concat(o))}))},iniciaMovimientoTouch:function(o){if(2===o.touches.length){var e=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY);return this.lastPinchDistance=e,void(this.pinching=!0)}this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY},finTouch:function(){this.pinching=!1},cambiarCoordsManualesNodo:function(o,e){var i=this;this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?(this.todosNodos[this.todosNodos.findIndex((function(e){return e.id==o}))].coords=e,this.$apollo.mutate({mutation:d()(fe()),variables:{idNodo:o,coordsManuales:e}}).then((function(){i.$refs.canvases.crearImagenTodosVinculos()})).catch((function(o){console.log("Error: ".concat(o))}))):console.log("No autorizado")},eliminarNodo:function(o){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?confirm("¿Seguro de que quieres eliminar este nodo?")&&(console.log("enviando mutacion de eliminar nodo"),this.$apollo.mutate({mutation:d()(he()),variables:{idNodo:o},update:function(e,i){var n=i.data.eliminarNodo;if(console.log("QUERY: ".concat(JSON.stringify(De))),n){var t=e.readQuery({query:De});console.log("Cache QUERY_NODOS: ".concat(JSON.stringify(t)));var a=JSON.parse(JSON.stringify(t)),s=a.todosNodos.findIndex((function(e){return e.id==o}));s>-1?(a.todosNodos.splice(s,1),e.writeQuery({query:De,data:a})):console.log("El nodo no estaba presente")}else console.log("Nodo no fue eliminado")}}).then((function(o){console.log("quitando el objeto del array. ".concat(o))}))):console.log("No autorizado")},crearNodo:function(o){var e=this;if(this.usuarioSuperadministrador||this.usuarioAdministradorAtlas){console.log("enviando una mutación de crear nodo");var i={coordsManuales:{x:o.x,y:o.y},coords:{x:o.x,y:o.y},autoCoords:{x:o.x,y:o.y}};console.log("en las coordenadas: ".concat(o.x,", ").concat(o.y," ")),this.posicionCreandoNodo={x:o.x,y:o.y},this.$apollo.mutate({mutation:d()(pe(),Se),variables:{infoNodo:i}}).then((function(o){var i=o.data.crearNodo;console.log("Creado ".concat(i.id));var n=e.$apollo.provider.defaultClient,t=n.readQuery({query:De}),a=JSON.parse(JSON.stringify(t));console.log("1");var s=a.todosNodos;console.log("2");var r=s.findIndex((function(o){return o.id===i.id}));r>-1?console.log("El nodo ya estaba en caché"):(s.push(i),n.writeQuery({query:De,data:a})),e.posicionCreandoNodo=null})).catch((function(o){e.posicionCreandoNodo=null,console.log("Error. E: ".concat(o))}))}else console.log("Error usuario no autorizado")},descargarCentroVista:function(){var o=this;this.$apollo.query({query:d()(me()),variables:{idUsuario:this.$store.state.usuario.id},fetchPolicy:"network-only"}).then((function(e){var i=e.data.yo,n=i.atlas.centroVista;o.$set(o.centroVista,"x",n.x),o.$set(o.centroVista,"y",n.y),o.$store.commit("setCentroVistaAtlas",n)})).catch((function(o){console.log("error fetching centro vista: ".concat(o))}))},seleccionNodo:function(o){this.idNodoSeleccionado=o.id},eliminarVinculo:function(o){var e=this;return Object(eo["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.usuarioSuperadministrador||e.usuarioAdministradorAtlas){i.next=3;break}return console.log("No autorizado"),i.abrupt("return");case 3:return console.log("eliminando un vinculo entre ".concat(o.idNodoFrom," y ").concat(o.idNodoTo," ")),i.next=6,e.$apollo.mutate({mutation:d()(ve()),variables:{idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 6:case"end":return i.stop()}}),i)})))()},dibujarVinculosGrises:function(){this.actualizarVinculosGrises++},crearVinculo:function(o){var e=this;return Object(eo["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.usuarioSuperadministrador||e.usuarioAdministradorAtlas){i.next=3;break}return console.log("No autorizado"),i.abrupt("return");case 3:return console.log("creando un vinculo ".concat(JSON.stringify(o)," ")),i.next=6,e.$apollo.mutate({mutation:d()(le()),variables:{tipo:"continuacion",idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 6:case"end":return i.stop()}}),i)})))()},zoomVista:function(o){var e=this.zoom+o;e<this.minZoom?this.zoom=this.minZoom:e>this.maxZoom?this.zoom=this.maxZoom:this.zoom=e},zoomWheel:function(o){if(this.hovered&&o.ctrlKey){o.preventDefault();var e=this.$el,i=e.getBoundingClientRect(),n={x:Math.round((o.clientX-i.left)/this.factorZoom)+this.centroVista.x,y:Math.round((o.clientY-i.top)/this.factorZoom)+this.centroVista.y},t=.2;this.zoomVista(-Math.round(o.deltaY*t),{x:n.x,y:n.y})}},hideZoomInfo:Pe((function(){this.showingZoomInfo=!1}),1e3)},watch:{idColeccionSeleccionada:function(){this.seleccionandoColeccion=!1},seleccionandoColeccion:function(){this.mostrandoOpcionesColeccion=!1},nodoSeleccionado:function(){this.actualizarTrazos++},route:function(o){console.log("cambio de navegación a ".concat(o.path))},idNodoTarget:function(o){o?(console.log("iniciando busqueda de requeridos de nodo ".concat(o)),this.idsNecesariosParaTarget=this.encontrarNodosNecesariosDeNodo(o,[])):this.idsNecesariosParaTarget=[]},zoom:function(){this.showingZoomInfo=!0,this.hideZoomInfo()}},mounted:function(){screen.width<600&&(this.zoom=70)},created:function(){window.addEventListener("wheel",this.zoomWheel,{passive:!1})},removed:function(){window.removeEventListener("wheel",this.zoomWheel)}},ke=Re,Me=(i("afb2"),i("7507"),i("2f8a"),Object(p["a"])(ke,X,oo,!1,null,"50a6299a",null)),je=Me.exports,$e=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"adminNodosConocimiento"},[i("div",{attrs:{id:"listaNodos"}},o._l(o.nodosOrdenados,(function(o){return i("nodo-conocimiento-vista-lista-admin",{key:o.id,attrs:{esteNodo:o}})})),1)])},Oe=[],qe=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoConocimientoVistaListaAdmin"},[n("div",{staticClass:"barraSuperior",class:{deUsuario:o.usuarioExperto}},[n("a",{attrs:{href:o.clienteUrl+"/#/atlas/nodoConocimiento/"+o.esteNodo.id,target:"_blank"}},[n("div",{staticClass:"nombre"},[o._v(" "+o._s(o.esteNodo.nombre)+" ")])])]),n("div",{attrs:{id:"listaSecciones"}},o._l(o.esteNodo.secciones,(function(e){return n("div",{key:e.id,staticClass:"seccion"},[n("div",{staticClass:"barraSuperior"},[n("div",{staticClass:"imagenTipoSeccion"},["enlace"===e.modo?n("img",{attrs:{src:i("7b0b1"),alt:"Enlace"}}):o._e(),"archivo"===e.modo?n("img",{attrs:{src:i("c3cf"),alt:"Archivo"}}):o._e()]),n("div",{staticClass:"nombre"},[o._v(" "+o._s(e.nombre)+" ")]),n("div",{staticClass:"zonaSource"},[n("input",{staticClass:"inputEnlace",attrs:{type:"text"},domProps:{value:e.enlace},on:{keypress:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"enter",13,i.key,"Enter")?null:o.guardarEnlaceSeccion(i,e.id)}}})])])])})),0)])},Te=[];function Be(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idSeccion: ID!, $nuevoEnlace: String!) {\n              setNuevoEnlaceSeccionNodo(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                nuevoEnlace: $nuevoEnlace\n              ) {\n                id\n                modo\n                enlace\n              }\n            }\n          "]);return Be=function(){return o},o}var Ue={name:"NodoConocimientoVistaListaAdmin",props:{esteNodo:Object},data:function(){return{}},computed:{usuarioExperto:function(){return!!this.usuarioLogeado&&this.esteNodo.expertos.includes(this.usuario.id)}},methods:{guardarEnlaceSeccion:function(o,e){var i=o.target.value.trim();console.log("Guardando nuevo enlace: "+i),this.$apollo.mutate({mutation:d()(Be()),variables:{idNodo:this.esteNodo.id,idSeccion:e,nuevoEnlace:i}}).then((function(){})).catch((function(o){console.log("Error: "+o)}))}}},Fe=Ue,_e=(i("8c45"),Object(p["a"])(Fe,qe,Te,!1,null,"04a115e5",null)),Le=_e.exports;function ze(){var o=Object(s["a"])(["\n  query{\n    todosNodos {\n      id\n      nombre\n      secciones {\n        id\n        nombre\n        enlace\n        modo\n      }\n      expertos\n    }\n  }\n  \n"]);return ze=function(){return o},o}var Ve=d()(ze()),Qe={components:{NodoConocimientoVistaListaAdmin:Le},name:"AdminNodosConocimiento",apollo:{todosNodos:{query:Ve,fetchPolicy:"cache-and-network"}},data:function(){return{idNodoSeleccionado:null,todosNodos:[]}},computed:{nodosOrdenados:function(){var o=this;return this.usuarioLogeado?Object(to["a"])(this.todosNodos).sort((function(e,i){var n=0;return e.expertos.includes(o.usuario.id)&&n--,i.expertos.includes(o.usuario.id)&&n++,n})):this.todosNodos}}},Je=Qe,He=(i("e759c"),Object(p["a"])(Je,$e,Oe,!1,null,"1f103131",null)),Ze=He.exports,Ge=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"loginArea"}},[i("div",{attrs:{id:"ventanaCentral"}},[i("form",[i("p",{attrs:{id:"tituloVentana"}},[o._v("¡Bienvenidx!")]),i("br"),i("div",{staticClass:"instruccion"},[o._v("Escribe tus datos de login")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.username,expression:"username"}],ref:"inputUsername",staticClass:"inputs",style:o.colorUsername,attrs:{type:"text",name:"username",placeholder:"Nombre de usuario"},domProps:{value:o.username},on:{input:[function(e){e.target.composing||(o.username=e.target.value)},function(e){o.loginFail=!1}]}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.password,expression:"password"}],ref:"inputPassword",staticClass:"inputs",attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:o.password},on:{input:[function(e){e.target.composing||(o.password=e.target.value)},function(e){o.loginFail=!1}],keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.iniciarSesion(e)}}}),i("br"),i("br"),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoDatos,expression:"enviandoDatos"}],attrs:{texto:"Conectando..."}}),i("div",{staticClass:"botonEnviar",class:{loginFail:o.loginFail,desaparecido:o.enviandoDatos,deshabilitado:o.passIlegal},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),o.iniciarSesion(e)}}},[o._v(" "+o._s(o.loginFail?o.loginFailMsg:"Ingresar")+" ")])],1)])])},Ke=[];function Ye(){var o=Object(s["a"])(["\n            query ($username: String!, $password: String!) {\n              login(username: $username, password: $password)\n            }\n          "]);return Ye=function(){return o},o}var We=/[^a-zA-Z0-9_ñÑ]/g,Xe=6,oi=4,ei={name:"LoginArea",components:{Loading:mo},data:function(){return{username:"",password:"",loginFail:!1,loginFailMsg:"",enviandoDatos:!1}},computed:{usuarioConectado:function(){return null!=this.$store.state.usuario.username},nombreUsuario:function(){return this.$store.state.usuario.username},colorUsername:function(){return{color:We.test(this.username)||this.username.length<oi?"red":"black"}},passIlegal:function(){return this.password.length<Xe},usernameIlegal:function(){return!!(!this.username||We.test(this.username)||this.username.length<oi)}},methods:{iniciarSesion:function(){var o=this;console.log("Iniciando login");var e=this,i=this.$refs.inputPassword.value,n=this.$refs.inputUsername.value;console.log("Con pass length: "+this.password.length),this.password.length<Xe?console.log("Password ilegal"):We.test(this.username)||this.username.length<oi?console.log("Username ilegal"):(this.enviandoDatos=!0,console.log("query"),this.$apollo.query({query:d()(Ye()),variables:{username:n,password:i}}).then((function(i){var n=i.data.login;o.$store.commit("logearse",n),e.$router.push("/"),o.enviandoDatos=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoDatos=!1})))},deslogearse:function(){this.$store.commit("deslogearse"),window.location.href=this.clienteUrl}}},ii=ei,ni=(i("eba4"),Object(p["a"])(ii,Ge,Ke,!1,null,"2d94c228",null)),ti=ni.exports,ai=function(){var o=this,e=o.$createElement,n=o._self._c||e;return o.usuarioLogeado?n("div",{staticClass:"perfilPersonal"},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.esteUsuario.loading,expression:"$apollo.queries.esteUsuario.loading"}],attrs:{texto:"Cargando"}}),n("div",{staticClass:"contenedorControles",attrs:{id:"zonaSelectores"}},[n("div",{staticClass:"boton",attrs:{title:"Información personal"},on:{click:function(e){o.seccion="informacionPersonal"}}},[n("img",{attrs:{src:i("f9b3"),alt:"Informacion"}})]),n("div",{staticClass:"boton",attrs:{title:"Cambiar contraseña"},on:{click:function(e){o.seccion="cambiarPass"}}},[n("img",{attrs:{src:i("0108"),alt:"Pass"}})]),n("div",{staticClass:"boton",attrs:{title:"Mis objetivos y trabajos"},on:{click:function(e){o.seccion="misNodos"}}},[n("img",{attrs:{src:i("2c0c"),alt:"Estrella"}})]),n("div",{staticClass:"boton",attrs:{title:"Mi calendario"},on:{click:function(e){o.seccion="calendario"}}},[n("img",{attrs:{src:i("4617"),alt:"Calendario"}})])]),o.$apollo.queries.esteUsuario.loading?o._e():n("div",{attrs:{id:"contenido"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"informacionPersonal"===o.seccion,expression:"seccion === 'informacionPersonal'"}],attrs:{id:"zonaInformacionPersonal"}},[n("div",{attrs:{id:"fotografia"},on:{click:function(e){return o.$refs.inputFotoUsuario.click()}}},[n("img",{attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.usuario.id+"?v="+o.versionFoto,alt:"Fotografía"}}),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputFotoUsuario",attrs:{type:"file"},on:{change:o.uploadNuevaFoto}})]),n("div",{attrs:{id:"zonaCamposEditablesInformacionPersonal"}},[n("div",{staticClass:"informacionPersonal",staticStyle:{"align-self":"center"},attrs:{id:"nombres"}},[o._v(" "+o._s(o.esteUsuario.nombres)+" ")]),n("div",{staticClass:"informacionPersonal",staticStyle:{"align-self":"center"},attrs:{id:"apellidos"}},[o._v(" "+o._s(o.esteUsuario.apellidos)+" ")]),n("div",{staticClass:"informacionPersonal",attrs:{id:"email"}},[n("img",{staticClass:"iconoInformacionPersonal",attrs:{src:i("49d2"),alt:"Mail",title:"Correo electrónico"}}),n("span",[o._v(" "+o._s(o.esteUsuario.email))])]),n("img",{staticClass:"iconoInformacionPersonal",attrs:{src:i("d046"),alt:"Mail",title:"Añdir un número móvil"}}),o._l(o.esteUsuario.numerosMovil,(function(e){return n("div",{key:e.id,staticClass:"informacionPersonal numeroMovil"},[n("span",[o._v(" "+o._s(o.esteUsuario.numeroMovil)+" ")])])}))],2)]),n("div",{directives:[{name:"show",rawName:"v-show",value:"cambiarPass"===o.seccion,expression:"seccion === 'cambiarPass'"}],attrs:{id:"zonaCambiarPass"}},[n("div",{staticClass:"tituloSeccion"},[o._v("Cambio de contraseña")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.inputCurrentPass,expression:"inputCurrentPass"}],staticClass:"inputCambiarPass",attrs:{placeholder:"Contraseña actual",type:"password",id:"inputCurrentPass"},domProps:{value:o.inputCurrentPass},on:{input:function(e){e.target.composing||(o.inputCurrentPass=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.newPassIlegal&&!o.inputCurrentPassIlegal,expression:"newPassIlegal && !inputCurrentPassIlegal"}],attrs:{id:"instruccionesNuevoPass"}},[o._v(" La contraseña debe tener al menos 8 caracteres y no contener espacios. ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.newPass,expression:"newPass"},{name:"show",rawName:"v-show",value:!o.inputCurrentPassIlegal,expression:"!inputCurrentPassIlegal"}],staticClass:"inputCambiarPass",class:{aprobado:!o.newPassIlegal},attrs:{placeholder:"Nueva contraseña",type:"password",id:"inputNuevoPass"},domProps:{value:o.newPass},on:{input:function(e){e.target.composing||(o.newPass=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.newPass2,expression:"newPass2"},{name:"show",rawName:"v-show",value:!o.newPassIlegal,expression:"!newPassIlegal"}],staticClass:"inputCambiarPass",class:{aprobado:!o.newPassIlegal&&!o.newPass2Ilegal},attrs:{disabled:o.newPassIlegal,placeholder:"Nueva contraseña (Otra vez)",type:"password",id:"inputNuevoPass2"},domProps:{value:o.newPass2},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.enviarCambioPass(e)},input:function(e){e.target.composing||(o.newPass2=e.target.value)}}}),n("div",{class:{deshabilitado:o.newPassIlegal||o.newPass2Ilegal||o.enviandoCambioPass},attrs:{id:"botonEnviarNuevoPass"},on:{click:o.enviarCambioPass}},[n("span",[o._v(" Enviar")]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoCambioPass,expression:"enviandoCambioPass"}],attrs:{texto:""}})],1),n("div",{attrs:{id:"textoResultadoCambioPass"}},[o._v(" "+o._s(o.textoResultadoCambioPass)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"misNodos"===o.seccion,expression:"seccion === 'misNodos'"}],attrs:{id:"zonaMisNodos"}},[n("div",{staticClass:"barraSuperiorGeneral"},[n("div",{staticClass:"tituloBloque"},[o._v("Mis Nodos")]),n("div",{staticClass:"controlesBloque",attrs:{id:"controlesRecursosExternos"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.mostrandoOpcionesCrearSubNodo,expression:"!mostrandoOpcionesCrearSubNodo"}],staticClass:"botonBarraSuperiorGeneral",on:{click:function(e){o.mostrandoOpcionesCrearSubNodo=!0}}},[n("img",{class:{deshabilitado:o.creandoSubNodo},attrs:{src:i("1376"),alt:"Nuevo",title:"Crear nuevo nodo"}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoSubNodo,expression:"creandoSubNodo"}],attrs:{texto:""}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoOpcionesCrearSubNodo,expression:"mostrandoOpcionesCrearSubNodo"}],class:{deshabilitado:o.creandoSubNodo},attrs:{id:"contenedorOpcionesCrear"}},[n("img",{staticClass:"botonBarraSuperiorGeneral opcionCrear",attrs:{src:i("2c0c"),alt:"Objetivo",title:"Crear nuevo objetivo"},on:{click:function(e){return o.crearNuevoNodoUnder({tipoNodo:"objetivo"})}}}),n("img",{staticClass:"botonBarraSuperiorGeneral opcionCrear",attrs:{src:i("fbca"),alt:"Trabajo",title:"Crear nuevo trabajo"},on:{click:function(e){return o.crearNuevoNodoUnder({tipoNodo:"trabajo"})}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoSubNodo,expression:"creandoSubNodo"}],attrs:{texto:""}})],1)])]),n("ventana-lista",{ref:"ventanaLista",attrs:{idNodoRoot:o.usuario.id,tipoNodoRoot:"usuario"}})],1),"calendario"===o.seccion?n("div",{attrs:{id:"zonaCalendario"}},[o.usuarioLogeado?n("calendario",{attrs:{enfasis:"eventosPersonales",idUsuarioTarget:this.usuario.id}}):o._e()],1):o._e(),"organizadorSemanal"===o.seccion?n("div",{attrs:{id:"zonaOrganizadorSemanal"}},[n("organizador-horario-semanal")],1):o._e()]),n("router-view")],1):o._e()},si=[],ri=/\s\s+/,di=6,ci=40,ui=i("bc3a"),li=i.n(ui),vi=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanaLista",on:{mouseup:function(o){o.stopPropagation()},mousedown:function(o){o.stopPropagation()},touchmove:function(o){o.stopPropagation()},touchstart:function(o){o.stopPropagation()},touchend:function(o){o.stopPropagation()}}},[n("div",{attrs:{id:"barraSuperior"}},[n("buscador-nodos",{attrs:{listaIdsNodosRelevantes:o.nodosSolidaridad.map((function(o){return o.id}))}}),n("div",{attrs:{id:"bloqueBotonesControl"}},[n("div",{staticClass:"zonaControl",attrs:{id:"zonaVerNodos"}},[n("div",{staticClass:"botonVerNodos",style:{borderColor:o.verCompletados?"#858585":"transparent",opacity:o.verCompletados?1:.3},attrs:{id:"botonVerCompletados",title:o.verCompletados?"Ocultar nodos completados":"Mostrar nodos completados"},on:{click:function(e){o.verCompletados=!o.verCompletados}}})]),o.cerrable?n("img",{attrs:{src:i("7511"),alt:"cerrar",title:"Cerrar ventana de lista",id:"botonCerrar"},on:{click:function(e){return e.stopPropagation(),o.$emit("cerrarme")}}}):o._e()])],1),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.nodoRoot.loading||o.idsNodosNeedingFetchMore.includes(o.idNodoRoot),expression:"$apollo.queries.nodoRoot.loading || idsNodosNeedingFetchMore.includes(idNodoRoot)"}]}),n("lista-nodos",{ref:"listaNodos",staticClass:"lista",attrs:{todosNodos:o.nodosSolidaridad,idNodoSeleccionado:o.idNodoSeleccionado,verCompletados:o.verCompletados,modoLista:o.modoLista,idNodoRoot:o.idNodoRoot,tipoNodoRoot:o.tipoNodoRoot,nodoRoot:o.nodoRoot,idsNodosNeedingFetchMore:o.idsNodosNeedingFetchMore,indiceNodosUnder:o.indiceNodosUnder,usuarioResponsableAmplioNodoRoot:o.usuarioResponsableAmplioNodoRoot},on:{nodoSeleccionado:function(e){o.idNodoSeleccionado=e},nodosRenderizados:o.updateInfoNodosEverRendered,nodoEliminado:function(e){return o.removeNodoFromNodosSolidaridad(e)},nodoSolidaridadCreado:function(e){return o.addNodoToNodosSolidaridad(e)}},nativeOn:{click:function(e){if(e.target!==e.currentTarget)return null;o.idNodoSeleccionado=null}}})],1)},mi=[],pi=i("b012"),hi=i.n(pi);function fi(){var o=Object(s["a"])(["\n  fragment fragNodoSolidaridad on NodoSolidaridad{\n    id\n    nombre\n    descripcion\n    tipoNodo\n    responsables\n    responsablesAmplio    \n    posiblesResponsables\n    responsablesSolicitados\n    administradores\n    keywords\n    tipoParent\n    nodoParent\n    publicitado\n    recursosExternos{\n      ...fragRecursoExterno\n    }\n    movimientosDinero{\n      ...fragMovimientoDineroNodoSolidaridad\n    }\n    eventos{\n      ...fragEventoNodoSolidaridad\n    }\n    coords {\n        x\n        y\n    }\n    autoCoords{\n      x\n      y\n    }\n    estadoDesarrollo\n    vinculos {\n        id\n        idRef\n        tipo        \n    }\n    stuck\n    angulo\n    centroMasa {\n        x\n        y\n    }\n    fuerzaCentroMasa{\n      fuerza\n      direccion\n    }\n    fuerzaColision{\n      fuerza\n      direccion  \n    }\n    puntaje\n    nivel\n    turnoNivel\n    peso\n  }\n  ","\n  ","\n  ","\n"]);return fi=function(){return o},o}function gi(){var o=Object(s["a"])(["\n  fragment fragEventoNodoSolidaridad on EventoNodoSolidaridad{\n    id    \n    fecha,\n    nombre,\n    tipo,\n    descripcion,    \n  }\n"]);return gi=function(){return o},o}function bi(){var o=Object(s["a"])(["\n  fragment fragMovimientoDineroNodoSolidaridad on MovimientoDineroNodoSolidaridad{\n    id\n    fecha\n    articulo,\n    unidad,\n    cantidad,\n    movimientoUnitario,\n    movimientoTotal,\n    realizado\n    informacion\n  }\n"]);return bi=function(){return o},o}function Ni(){var o=Object(s["a"])(["\n fragment fragRecursoExterno on RecursoExternoNodoSolidaridad{\n  id\n  nombre\n  link\n  tipo\n }\n"]);return Ni=function(){return o},o}function Ai(){var o=Object(s["a"])(["\n  fragment fragPersonaAtlas on Usuario {\n    id\n    nombre\n    username\n    nombres    \n    apellidos\n    vinculos {\n      id\n      tipo\n      idRef\n    }\n    coords {\n      x\n      y\n    }\n    responsables\n    responsablesAmplio\n    administradores\n    fuerzaCentroMasa {\n      fuerza\n      direccion\n    }\n    fuerzaColision {\n      fuerza\n      direccion\n    }\n  }\n"]);return Ai=function(){return o},o}var Ci=d()(Ai()),yi=d()(Ni()),Ei=d()(bi()),wi=d()(gi()),xi=d()(fi(),Ei,wi,yi);function Pi(){var o=Object(s["a"])(["\n            query($infoNodos: [InfoNodoDeAtlasSolidaridad!]!) {\n              relacionesNodosAtlasByIds(infoNodos: $infoNodos) {\n                  nodosSolidaridad {\n                    ...fragNodoSolidaridad\n                }\n                  personas {\n                    ...fragPersonaAtlas\n                }\n              }\n            }\n            ","\n            ","\n            "]);return Pi=function(){return o},o}function Si(){var o=Object(s["a"])(["\n          subscription {\n            nodosEliminados\n          }\n        "]);return Si=function(){return o},o}function Di(){var o=Object(s["a"])(["\n          subscription ($centro: CoordsInput!, $radio: Int!) {\n            nodoEliminado(centro: $centro, radio: $radio)\n          }\n        "]);return Di=function(){return o},o}function Ii(){var o=Object(s["a"])(["\n          subscription ($centro: CoordsInput!, $radio: Int!) {\n            nodoEditado(centro: $centro, radio: $radio) {\n              ...fragNodoSolidaridad\n            }\n          }\n          ","\n        "]);return Ii=function(){return o},o}function Ri(){var o=Object(s["a"])(["\n        query($idNodo: ID!, $tipoNodo: String!){\n          nodoAtlasSolidaridadByIdAndTipo(idNodo:$idNodo, tipoNodo: $tipoNodo){\n            nodoSolidaridad{\n              ...fragNodoSolidaridad\n            }\n            persona{\n              ...fragPersonaAtlas\n            }\n          }\n        }\n        ","\n        ","\n      "]);return Ri=function(){return o},o}function ki(){var o=Object(s["a"])(["\n    query{\n      personas{\n        ...fragPersonaAtlas\n      }\n    }\n    ","\n"]);return ki=function(){return o},o}function Mi(){var o=Object(s["a"])(["\n    query{\n      nodosSolidaridad{\n        ...fragNodoSolidaridad\n      }\n    }\n    ","\n    "]);return Mi=function(){return o},o}var ji=d()(Mi(),xi),$i=d()(ki(),Ci),Oi={apollo:{nodoRoot:{query:d()(Ri(),xi,Ci),variables:function(){return{idNodo:this.idNodoRoot,tipoNodo:this.tipoNodoRoot}},skip:function(){return!this.idNodoRoot},update:function(o){var e=o.nodoAtlasSolidaridadByIdAndTipo,i=e.nodoSolidaridad?[e.nodoSolidaridad]:[],n=e.persona?[e.persona]:[];if(!this.cacheNodosInicializado){var t=this.$apollo.provider.defaultClient;t.writeQuery({query:ji,data:{nodosSolidaridad:i}}),t.writeQuery({query:$i,data:{personas:n}}),this.cacheNodosInicializado=!0}return e.nodoSolidaridad?e.nodoSolidaridad:e.persona?e.persona:(console.log("Fallo al obtener nodoRoot"),null)}},nodosSolidaridad:{query:ji,fetchPolicy:"cache-only",skip:function(){return!this.nodoRoot}},personas:{query:$i,fetchPolicy:"cache-only",skip:function(){return!this.nodoRoot}},$subscribe:{nodoEditado:{query:d()(Ii(),xi),variables:function(){return{centro:{x:0,y:0},radio:0}},result:function(o){var e=o.data.nodoEditado;console.log("nodo ".concat(e.nombre," editado"))}},nodoEliminado:{query:d()(Di()),variables:function(){return{centro:{x:0,y:0},radio:0}},result:function(o){var e=o.data.nodoEliminado;console.log("Eliminando de cache a ".concat(e)),this.eliminarNodoCache(e)}},nodosEliminados:{query:d()(Si()),result:function(o){var e=this,i=o.data.nodosEliminados;console.log("Eliminando de cache a ".concat(i)),i.forEach((function(o){e.removeNodoFromNodosSolidaridad(o)}))}}}},data:function(){return{datosYoDescargados:!1,nodosSolidaridad:[],personas:[],idsNodosEverPassedToFetchMore:[],infoNodosEverRendered:[],cacheNodosInicializado:!1}},methods:{addNodoToNodosSolidaridad:function(o){console.log("Adding nuevo nodo a nodosSolidaridad");var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:ji}),n=JSON.parse(JSON.stringify(i)),t=n.nodosSolidaridad.findIndex((function(e){return e.id===o.id}));-1===t&&(n.nodosSolidaridad.push(o),e.writeQuery({query:ji,data:n})),this.idNodoSeleccionado=o.id},removeNodoFromNodosSolidaridad:function(o){this.idNodoSeleccionado===o&&(this.idNodoSeleccionado=null);var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:ji}),n=JSON.parse(JSON.stringify(i)),t=n.nodosSolidaridad.findIndex((function(e){return e.id===o}));t>-1&&(n.nodosSolidaridad.splice(t,1),e.writeQuery({query:ji,data:n}))},fetchRelacionesNodosNeedingFetchMore:hi()((function(){var o=this;this.$apollo.query({query:d()(Pi(),xi,Ci),variables:{infoNodos:this.infoNodosNeedingFetchMore},fetchPolicy:"network-only"}).then((function(e){var i,n,t=e.data.relacionesNodosAtlasByIds;o.idsNodosEverPassedToFetchMore=qi(o.idsNodosEverPassedToFetchMore.concat(o.idsNodosNeedingFetchMore));var a=o.nodosSolidaridad.map((function(o){return o.id})),s=o.$apollo.provider.defaultClient,r=s.readQuery({query:ji}),d=JSON.parse(JSON.stringify(r));d.nodosSolidaridad||(d.nodosSolidaridad=[]),(i=d.nodosSolidaridad).push.apply(i,Object(to["a"])(t.nodosSolidaridad.filter((function(o){return!a.includes(o.id)})))),s.writeQuery({query:ji,data:d});var c=o.personas.map((function(o){return o.id})),u=s.readQuery({query:$i}),l=JSON.parse(JSON.stringify(u));d.personas||(d.nodosSolidaridad=[]),(n=l.personas).push.apply(n,Object(to["a"])(t.personas.filter((function(o){return!c.includes(o.id)})))),s.writeQuery({query:$i,data:l})}))}),2e3)},computed:{indiceNodosUnder:function(){var o=this;if(this.nodosSolidaridad.length+this.personas.length<1)return null;var e={};return this.todosNodos.forEach((function(i){var n=i.vinculos.filter((function(o){return"requiere"===o.tipo})).map((function(o){return o.idRef})),t=o.nodosSolidaridad.filter((function(o){return n.includes(o.id)})).sort((function(o,e){return n.indexOf(o.id)-n.indexOf(e.id)})),a=t.filter((function(o){return o.nodoParent===i.id})),s=o.personas.filter((function(o){return i.responsables.includes(o.id)}));e[i.id]={nodosChildren:a,nodosRequeridos:t,responsables:s}})),e},infoNodosNeedingFetchMore:function(){var o=this;return this.infoNodosEverRendered.filter((function(e){return!o.idsNodosEverPassedToFetchMore.includes(e.id)}))},todosNodos:function(){return this.nodosSolidaridad.concat(this.personas)},idsNodosNeedingFetchMore:function(){return this.infoNodosNeedingFetchMore.map((function(o){return o.id}))}},watch:{idsNodosNeedingFetchMore:function(o){o.length>0&&this.fetchRelacionesNodosNeedingFetchMore()}}},qi=function(o){for(var e=o.concat(),i=0;i<e.length;++i)for(var n=i+1;n<e.length;++n)e[i]===e[n]&&e.splice(n--,1);return e},Ti=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"buscadorNodos"}},[n("div",{attrs:{id:"zonaBuscador"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.textoBuscado,expression:"textoBuscado"},{name:"show",rawName:"v-show",value:o.mostrarCuadroBusqueda,expression:"mostrarCuadroBusqueda"}],class:{deshabilitado:o.buscando},attrs:{type:"text"},domProps:{value:o.textoBuscado},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.buscar(e)},input:function(e){e.target.composing||(o.textoBuscado=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.buscando,expression:"buscando"}],attrs:{texto:""}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!o.mostrarCuadroBusqueda,expression:"!mostrarCuadroBusqueda"}],attrs:{src:i("b11f"),alt:"Buscar",title:"buscar",id:"botonBuscar"},on:{click:function(e){o.mostrarCuadroBusqueda=!0}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.mostrarCuadroBusqueda,expression:"mostrarCuadroBusqueda"}],attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar búsqueda",id:"botonCancelarBusqueda"},on:{click:function(e){o.mostrarCuadroBusqueda=!1}}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.verResultados&&o.mostrarCuadroBusqueda,expression:"verResultados && mostrarCuadroBusqueda"}],attrs:{id:"zonaResultados"}},[n("div",{attrs:{id:"listaResultados"}},o._l(o.nodosEncontradosRelevantes,(function(e){return n("div",{key:e.id,staticClass:"nodoEncontrado"},[n("a",{attrs:{href:o.clienteUrl+"/#/homeNodoSolidaridad/"+e.id}},[n("div",{staticClass:"barraPrincipalNodo"},[n("div",{attrs:{id:"zonaIconoNodo"}},["trabajo"===e.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-cog fa-w-16 iconoTipoNodo",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}})]):n("svg",{staticClass:"svg-inline--fa fa-star fa-w-18 iconoTipoNodo",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"star",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[n("path",{attrs:{fill:"currentColor",d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}})])]),n("div",{staticClass:"nombre"},[o._v(o._s(e.nombre))]),n("div",{staticClass:"zonaBotonesNodoResultado",on:{click:function(o){o.stopPropagation(),o.preventDefault()}}},[n("div",{staticClass:"botonVerDescripcion",class:{deshabilitado:!e.descripcion||e.descripcion.length<1||"Sin descripcion"===e.descripcion||"Sin descripción"===e.descripcion},style:{borderColor:o.mostrandoDescripcionDe===e.id?"white":"black"},attrs:{title:o.mostrandoDescripcionDe===e.id?"Ocultar descripción del nodo":"Mostrar descripción del nodo"},on:{click:function(i){i.stopPropagation(),i.preventDefault(),o.mostrandoDescripcionDe=o.mostrandoDescripcionDe===e.id?null:e.id}}},[n("img",{attrs:{src:i("f9b3"),alt:"Descripcion"}})])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoDescripcionDe===e.id,expression:"mostrandoDescripcionDe === nodo.id"}],staticClass:"zonaDescripcion"},[n("div",{staticClass:"descripcion"},[o._v(o._s(e.descripcion))])])])})),0)])])},Bi=[];function Ui(){var o=Object(s["a"])(["\n            query ($textoBuscado: String!) {\n              busquedaAmpliaNodosSolidaridad(textoBuscado: $textoBuscado) {\n                id\n                nombre\n                tipoNodo\n                descripcion\n              }\n            }\n          "]);return Ui=function(){return o},o}var Fi={components:{Loading:mo},name:"BuscadorNodos",props:{idNodoParent:String,listaIdsNodosRelevantes:Array},data:function(){return{textoBuscado:null,buscando:!1,mostrarCuadroBusqueda:!1,nodosEncontrados:[],verResultados:!1,mostrandoDescripcionDe:null}},methods:{buscar:function(){var o=this;console.log("Iniciando búsqueda."),this.buscando=!0,this.$apollo.query({query:d()(Ui()),variables:{textoBuscado:this.textoBuscado}}).then((function(e){var i=e.data.busquedaAmpliaNodosSolidaridad;o.nodosEncontrados=i,o.buscando=!1,o.verResultados=!0})).catch((function(e){console.log("Error: ".concat(e)),o.buscando=!1}))}},computed:{nodosEncontradosRelevantes:function(){var o=this;return this.listaIdsNodosRelevantes?this.nodosEncontrados.filter((function(e){return o.listaIdsNodosRelevantes.includes(e.id)})):this.nodosEncontrados}}},_i=Fi,Li=(i("b9c5"),Object(p["a"])(_i,Ti,Bi,!1,null,"64a2040c",null)),zi=Li.exports,Vi=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"listaNodos"},on:{mousedown:function(o){o.stopPropagation()},touchmove:function(o){o.stopPropagation()},touchstart:function(o){o.stopPropagation()},touchend:function(o){o.stopPropagation()},mouseleave:function(e){e.stopPropagation(),o.idNodoEnArrastre=null,o.tipoNodoSourceArrastre=null},mouseup:function(e){e.stopPropagation(),o.idNodoEnArrastre=null,o.tipoNodoSourceArrastre=null}}},[i("transition-group",{attrs:{name:"unfoldVertical",tag:"div",id:"laListaNodos"}},o._l(o.nodosPrimerNivel,(function(e,n){return i("nodo-vista-lista",{key:"nodoLista"+e.id,ref:"nodosEnLista",refInFor:!0,attrs:{id:"nodoEnLista"+e.id,esteNodo:e,idNodoSeleccionado:o.idNodoSeleccionado,verCompletados:o.verCompletados,verAsumidos:o.verAsumidos,verVacios:o.verVacios,modoLista:o.modoLista,indiceNodosUnder:o.indiceNodosUnder,idsNodosNeedingFetchMore:o.idsNodosNeedingFetchMore,nodoSiendoArrastrado:o.idNodoEnArrastre,usuarioResponsableAmplioNodoOver:o.usuarioResponsableAmplioNodoRoot,idNodoOver:o.idNodoRoot,tipoNodoOver:o.tipoNodoRoot,index:n},on:{nodoSeleccionado:function(e){return o.$emit("nodoSeleccionado",e)},nodosRenderizados:function(e){return o.$emit("nodosRenderizados",e)},inicioArrastre:function(e){return o.iniciarArrastre(e)},finDeArrastre:o.finalizarArrastre,toggleContenidoTodos:o.toggleContenidoTodos,nodoEliminado:function(e){return o.$emit("nodoEliminado",e)},meElimine:function(i){return o.$emit("nodoEliminado",e.id)},nodoSolidaridadCreado:function(e){return o.$emit("nodoSolidaridadCreado",e)}}})})),1)],1)},Qi=[],Ji=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoVistaLista",class:{deshabilitado:o.enviandoQueryGeneral},on:{mouseleave:function(e){o.mostrando="opcionesCrear"===o.mostrando?null:o.mostrando}}},[n("div",{staticClass:"elementoLista",class:{mostrandoBotonesBarraSuperior:o.mostrandoBotonesBarraSuperior}},[n("div",{directives:[{name:"show",rawName:"v-show",value:("todo"===o.modoLista||"usuarioResponsable"===o.modoLista&&(o.usuarioResponsable||o.descendienteUsuarioResponsable))&&(o.visible||o.seleccionado),expression:"\n        (modoLista === 'todo' ||\n          (modoLista === 'usuarioResponsable' &&\n            (usuarioResponsable || descendienteUsuarioResponsable))) &&\n        (visible || seleccionado)\n      "}],class:{seleccionado:o.seleccionado,mostrandoBotonesBarraSuperior:o.mostrandoBotonesBarraSuperior,deshabilitado:o.nodoSiendoArrastrado&&!o.usuarioAdministrador},style:[o.colorBarraSuperior,o.estiloRecibiendoArrastrado,{opacity:o.siendoArrastrado?"0.3":"1"}],attrs:{id:"barraSuperior"},on:{mousedown:function(e){return e.stopPropagation(),o.grabbing(e)},mouseup:function(e){return e.stopPropagation(),o.finalizarArrastre(e)},mousemove:o.movimientoDeArrastre,mouseleave:function(e){o.recibiendoArrastradoEn=null,o.grabbed=!1,o.grabAttempt=0},click:function(e){return o.$emit("nodoSeleccionado",o.idNodoSeleccionado===o.esteNodo.id?null:o.esteNodo.id)}}},[n("div",{attrs:{id:"zonaIconoNodo"},on:{click:function(e){e.stopPropagation(),o.mostrandoNodosUnder=o.requeridos.length>0&&!o.mostrandoNodosUnder}}},[n("div",{staticClass:"trianguloBullet",class:{waitingFetchChildren:o.idsNodosNeedingFetchMore.includes(o.esteNodo.id)},style:[{transform:o.mostrandoNodosUnder?"rotate(90deg)":"",visibility:o.esteNodo.vinculos.length>0?"visible":"hidden"}],attrs:{id:"trianguloAbrirChildren",title:o.idsNodosNeedingFetchMore.includes(o.esteNodo.id)?"Descargando nodos...":o.mostrandoNodosUnder?"Cerrar subnodos":"Abrir subnodos"}}),"trabajo"===o.esteNodo.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-cog fa-w-16 iconoTipoNodo",style:{opacity:o.idNodoOver&&o.idNodoOver!=o.esteNodo.nodoParent?"0.5":"1"},attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:o.colorIcono,d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}})]):n("svg",{staticClass:"svg-inline--fa fa-star fa-w-18 iconoTipoNodo",style:{opacity:o.idNodoOver&&o.idNodoOver!=o.esteNodo.nodoParent?"0.5":"1"},attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"star",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[n("path",{attrs:{fill:o.colorIcono,d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}})])]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNuevoNombre inputNombreCosa",class:{deshabilitado:o.enviandoNuevoNombre},staticStyle:{width:"250px"},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},click:function(o){o.stopPropagation()},blur:function(e){o.editandoNombre=!1},keydown:o.keydownInputNuevoNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],class:{mostrandoBotonesBarraSuperior:o.mostrandoBotonesBarraSuperior,deshabilitado:o.enviandoNuevoNombre},attrs:{id:"elNombre"},on:{click:o.toggleEditandoNombre}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")]),n("img",{staticClass:"boton",class:{mostrandoBotonesBarraSuperior:o.mostrandoBotonesBarraSuperior},style:{transform:o.mostrandoBotonesBarraSuperior?"":"rotate(90deg)"},attrs:{id:"botonAbrirBotonesBarraSuperior",src:i("6ef0"),title:"Ver opciones"},on:{click:function(e){e.stopPropagation(),o.mostrandoBotonesBarraSuperior=!o.mostrandoBotonesBarraSuperior}}}),n("div",{class:{mostrandoBotonesBarraSuperior:o.mostrandoBotonesBarraSuperior,mostrandoOpcionesCrear:"opcionesCrear"===o.mostrando},attrs:{id:"contenedorBotonesBarraSuperior"},on:{click:function(o){o.stopPropagation()}}},[n("div",{staticClass:"contenedorBotones",style:{visibility:null!=o.mostrando?"visible":""},attrs:{id:"contenedorBotonesSelectoresContenidoNodo"}},[n("div",{staticClass:"boton botonSelectorContenidoNodo botonBarraSuperior",class:{deshabilitado:(!o.esteNodo.descripcion||o.esteNodo.descripcion.length<1||"Sin descripcion"===o.esteNodo.descripcion||"Sin descripción"===o.esteNodo.descripcion)&&!o.usuarioAdministrador},style:{borderColor:"descripcion"===o.mostrando?"white":"black"},attrs:{title:"descripcion"===o.mostrando?"":"Mostrar descripción"},on:{dblclick:function(e){return e.stopPropagation(),e.preventDefault(),o.$emit("toggleContenidoTodos",{contenido:"descripcion",estado:"descripcion"!=o.mostrando})},click:function(e){o.mostrando="descripcion"===o.mostrando?null:"descripcion"}}},[n("img",{attrs:{src:i("f9b3"),alt:"Descripción"}})]),n("div",{staticClass:"boton botonSelectorContenidoNodo botonBarraSuperior",style:{borderColor:"responsables"===o.mostrando?"white":"black"},attrs:{title:"responsables"===o.mostrando?"":"Mostrar responsables del nodo"},on:{dblclick:function(e){return e.stopPropagation(),e.preventDefault(),o.$emit("toggleContenidoTodos",{contenido:"responsables",estado:"responsables"!=o.mostrando})},click:function(e){o.mostrando="responsables"===o.mostrando?null:"responsables"}}},[n("img",{attrs:{src:i("767e"),alt:"Responsables"}})]),o.usuarioAdministrador?n("div",{staticClass:"boton botonSelectorContenidoNodo botonBarraSuperior",class:{deshabilitado:!o.esteNodo.keywords||o.esteNodo.keywords.length<1},style:{borderColor:"keywords"===o.mostrando?"white":"black"},attrs:{title:"keywords"===o.mostrando?"":"Mostrar palabras clave"},on:{dblclick:function(e){return e.stopPropagation(),e.preventDefault(),o.$emit("toggleContenidoTodos",{contenido:"keywords",estado:"keywords"!=o.mostrando})},click:function(e){o.mostrando="keywords"===o.mostrando?null:"keywords"}}},[n("img",{attrs:{src:i("46c5"),alt:"Keywords"}})]):o._e(),n("div",{staticClass:"boton botonSelectorContenidoNodo botonBarraSuperior",class:{deshabilitado:!o.esteNodo.recursosExternos||o.esteNodo.recursosExternos.length<1},style:{borderColor:"recursosExternos"===o.mostrando?"white":"black"},attrs:{title:"recursosExternos"===o.mostrando?"":"Mostrar recursosExternos"},on:{dblclick:function(e){return e.stopPropagation(),e.preventDefault(),o.$emit("toggleContenidoTodos",{contenido:"recursosExternos",estado:"recursosExternos"!=o.mostrando})},click:function(e){o.mostrando="recursosExternos"===o.mostrando?null:"recursosExternos"}}},[n("img",{attrs:{src:i("7b0b1"),alt:"Enlace"}})]),n("div",{staticClass:"boton botonSelectorContenidoNodo botonBarraSuperior",style:{borderColor:"calendario"===o.mostrando?"white":"black"},attrs:{title:"calendario"===o.mostrando?"Ocultar calendario":"Mostrar en calendario"},on:{click:function(e){o.mostrando="calendario"===o.mostrando?null:"calendario"}}},[n("img",{attrs:{src:i("4617"),alt:"calendario"}})])]),n("div",{staticClass:"contenedorBotones",attrs:{id:"botonesAccionesNodo"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador||o.usuarioSuperadministrador,expression:"usuarioAdministrador || usuarioSuperadministrador"}],staticClass:"boton botonBarraSuperior",style:[{filter:o.esteNodo.publicitado?"var(--atlasFilterVerde)":""}],attrs:{title:o.esteNodo.publicitado?"No publicitar":"Publicitar"},on:{click:o.togglePublicitado}},[n("img",{attrs:{src:i("4c00"),alt:"P"}})]),n("svg",{directives:[{name:"show",rawName:"v-show",value:!o.togglingEstado,expression:"!togglingEstado"}],staticClass:"\n              svg-inline--fa\n              fa-check-circle fa-w-16\n              boton\n              botonBarraSuperior\n            ",class:{deshabilitado:o.togglingEstado||!o.usuarioAdministrador},attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"check-circle",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",title:"completado"===o.esteNodo.estadoDesarrollo?"Desmarcar como completado":"Marcar como completado",id:"botonMarcarCompletado"},on:{click:function(e){return e.stopPropagation(),o.toggleEstadoNodo()}}},[n("path",{attrs:{fill:"completado"===o.esteNodo.estadoDesarrollo?"var(--atlasVerde)":"",d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.97-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.togglingEstado,expression:"togglingEstado"}],attrs:{texto:""}}),n("div",{class:{deshabilitado:o.creandoSubNodo||!o.usuarioResponsableAmplio},attrs:{id:"botonCrear"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:"opcionesCrear"!=o.mostrando,expression:"mostrando != 'opcionesCrear'"}],staticClass:"boton botonBarraSuperior",style:[{borderColor:"opcionesCrear"===o.mostrando?"white":"transparent"}],attrs:{src:i("1376"),alt:"Mas...",title:"Nuevo...",id:"botonCrearNuevoNodo"},on:{click:function(e){o.mostrando="opcionesCrear"===o.mostrando?null:"opcionesCrear"}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:"opcionesCrear"===o.mostrando,expression:"mostrando === 'opcionesCrear'"}],style:[{borderColor:"opcionesCrear"===o.mostrando?"white":"transparent"}],attrs:{id:"contenedorOpcionesCrear"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:"objetivo"===o.esteNodo.tipoNodo,expression:"esteNodo.tipoNodo === 'objetivo'"}],staticClass:"boton botonBarraSuperior opcionCrear",attrs:{src:i("2c0c"),alt:"Objetivo",title:"Crear nuevo objetivo"},on:{click:function(e){return o.crearNuevoNodoUnder({tipoNodo:"objetivo"},o.esteNodo.id)}}}),n("img",{staticClass:"boton botonBarraSuperior opcionCrear",attrs:{src:i("fbca"),alt:"Trabajo",title:"Crear nuevo trabajo"},on:{click:function(e){return o.crearNuevoNodoUnder({tipoNodo:"trabajo"},o.esteNodo.id)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoSubNodo,expression:"creandoSubNodo"}],attrs:{texto:""}})],1)])],1),n("div",{staticClass:"contenedorBotones",attrs:{id:"botonesEnlacesNodo"}},[n("a",{attrs:{href:o.clienteUrl+"/#/homeNodoSolidaridad/"+o.esteNodo.id}},[n("img",{staticClass:"boton botonBarraSuperior",attrs:{src:i("0349"),alt:"Home",title:"Ir a la página de este nodo",id:"botonHomeNodo"}})])]),n("div",{staticClass:"contenedorBotones",attrs:{id:"botonesEliminarNodo"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioAdministrador,expression:"usuarioAdministrador"}],staticClass:"boton botonBarraSuperior",attrs:{src:i("4592"),alt:"Eliminar",title:"Eliminar este nodo",id:"botonEliminarNodo"},on:{click:o.eliminarse}})])])],1),n("div",{attrs:{id:"contenidos"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"descripcion"===o.mostrando,expression:"mostrando === 'descripcion'"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",staticClass:"contenidoTexto",attrs:{id:"descripcion"},on:{click:o.toggleEditandoDescripcion}},[o._v(" "+o._s(o.esteNodo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"inputTextoNodo",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarDescripcion"},on:{click:o.guardarNuevoDescripcion}}),n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"keywords"===o.mostrando,expression:"mostrando === 'keywords'"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaKeywords"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoKeywords,expression:"!editandoKeywords"}],ref:"keywords",staticClass:"contenidoTexto",attrs:{id:"keywords"},on:{click:o.toggleEditandoKeywords}},[o._v(" "+o._s(o.esteNodo.keywords)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoKeywords,expression:"nuevoKeywords"},{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],ref:"inputNuevoKeywords",staticClass:"inputTextoNodo",class:{letrasRojas:o.nuevoKeywordsIlegal},attrs:{id:"inputNuevoKeywords"},domProps:{value:o.nuevoKeywords},on:{keydown:[function(e){if(!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.stopPropagation(),o.editandoKeywords=!1},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),o.guardarNuevoKeywords(e))}],input:function(e){e.target.composing||(o.nuevoKeywords=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar palabras clave",id:"botonGuardarKeywords"},on:{click:o.guardarNuevoKeywords}}),n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionKeywords"},on:{click:function(e){o.editandoKeywords=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoKeywords,expression:"enviandoNuevoKeywords"}],attrs:{texto:"Enviando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"recursosExternos"===o.mostrando,expression:"mostrando === 'recursosExternos'"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaRecursosExternos"}},o._l(o.esteNodo.recursosExternos,(function(e){return n("recurso-externo-nodo",{key:e.id,attrs:{usuarioResponsableAmplio:o.usuarioResponsableAmplio,esteRecurso:e,idNodo:o.esteNodo.id}})})),1),n("div",{directives:[{name:"show",rawName:"v-show",value:"responsables"===o.mostrando,expression:"mostrando === 'responsables'"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[n("div",{staticClass:"contenedorBotonesZona",attrs:{id:"contenedorBotonesResponsables"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.usuarioResponsable&&!o.usuarioPosibleResponsable&&!o.idResponsableSeleccionado,expression:"\n              !usuarioResponsable &&\n              !usuarioPosibleResponsable &&\n              !idResponsableSeleccionado\n            "}],staticClass:"botonControlZona botonControlResponsables",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{src:i("b2a7"),alt:"Entrar",title:o.esteNodo.responsables.length<1&&"usuario"!=o.esteNodo.tipoParent||o.usuarioParent?"Asumir":"Solicitar participación",id:"botonEntrarResponsables"},on:{click:function(e){return e.stopPropagation(),o.entrarResponsables(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:(o.usuarioResponsable||o.usuarioPosibleResponsable)&&!o.idResponsableSeleccionado,expression:"\n              (usuarioResponsable || usuarioPosibleResponsable) &&\n              !idResponsableSeleccionado\n            "}],staticClass:"botonControlZona botonControlResponsables",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{src:i("7d55"),alt:"Salir",title:"Abandonar",id:"botonAbandonarResponsables"},on:{click:function(e){return e.stopPropagation(),o.abandonarListaResponsables(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.idResponsableSeleccionado&&(o.usuarioSuperadministrador||o.usuarioParent),expression:"\n              idResponsableSeleccionado &&\n              (usuarioSuperadministrador || usuarioParent)\n            "}],staticClass:"boton botonControlZona botonControlResponsables",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{src:i("7d55"),alt:"Sacar",title:"Retirar usuario",id:"botonRetirarUsuarioFromResponsables"},on:{click:function(e){return e.stopPropagation(),o.retirarUsuarioFromListaResponsables(o.idResponsableSeleccionado)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableAmplio&&o.idResponsableSeleccionado&&!o.esteNodo.responsables.includes(o.idResponsableSeleccionado),expression:"\n              usuarioResponsableAmplio &&\n              idResponsableSeleccionado &&\n              !esteNodo.responsables.includes(idResponsableSeleccionado)\n            "}],staticClass:"botonControlZona botonControlResponsables",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{src:i("a26f"),alt:"Aceptar",title:"Aceptar como responsable",id:"botonAbandonarResponsables"},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:""}})],1),n("div",{attrs:{id:"listaResponsables"},on:{click:function(e){e.stopPropagation(),o.idResponsableSeleccionado=null}}},o._l(o.esteNodo.responsables.concat(o.esteNodo.posiblesResponsables),(function(e){return n("icono-persona-autonomo",{key:e,style:{opacity:o.esteNodo.posiblesResponsables.includes(e)?.5:1},attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e,factorEscala:"0.7"},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e}}})})),1)]),"calendario"===o.mostrando?n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaCalendario"}},[n("div",{staticClass:"contenedorBotonesZona",staticStyle:{"flex-direction":"row-reverse"},attrs:{id:"contenedorBotonesCalendario"}},[o.usuarioAdministrador?n("div",{directives:[{name:"show",rawName:"v-show",value:"calendario"===o.mostrando&&!o.creandoEvento,expression:"mostrando === 'calendario' && !creandoEvento"}],staticClass:"boton botonControlCalendario",attrs:{title:"Programar una sesión de "+o.esteNodo.nombre},on:{click:o.iniciarCreacionEvento}},[n("img",{attrs:{src:i("21eb"),alt:"Calendario"}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.creandoEvento,expression:"creandoEvento"}],staticClass:"boton",attrs:{title:"Cancelar"},on:{click:function(e){o.creandoEvento=!1}}},[n("img",{attrs:{src:i("20dd"),alt:"Cancelar"}})])]),n("calendario",{ref:"calendario",attrs:{idUsuarioTarget:o.usuario.id,idParent:o.esteNodo.id,enfasis:"eventosPersonales",tipoParent:"nodoSolidaridad"},on:{iniciaCreacionEvento:function(e){o.creandoEvento=!1},eventoCreado:function(e){return o.responderEventoCreado(e,"calendario")},eventoEliminado:function(e){return o.responderEventoEliminado(e,"calendario")}}})],1):o._e()]),o.requeridos.length>0?n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoNodosUnder,expression:"mostrandoNodosUnder"}],attrs:{id:"sublista"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoNodosUnder,expression:"mostrandoNodosUnder"}],attrs:{id:"lineaLista"}}),o._l(o.requeridos,(function(e,i){return n("nodo-vista-lista",{key:e.id,ref:"nodosRequeridos",refInFor:!0,attrs:{esteNodo:e,index:i,idNodoSeleccionado:o.idNodoSeleccionado,id:"nodoEnLista"+e.id,mostrarColoresCompletado:o.seleccionado,mostrandoNodosCompletados:o.mostrandoNodosCompletados,verCompletados:o.verCompletados,modoLista:o.modoLista,indiceNodosUnder:o.indiceNodosUnder,descendienteUsuarioResponsable:o.usuarioResponsable||o.descendienteUsuarioResponsable,usuarioResponsableAmplioNodoOver:o.usuarioResponsableAmplio,idsNodosNeedingFetchMore:o.idsNodosNeedingFetchMore,nodoSiendoArrastrado:o.nodoSiendoArrastrado,idNodoOver:o.esteNodo.id,tipoNodoOver:"nodoSolidaridad",underNodoSeleccionado:o.idNodoSeleccionado&&o.idNodoSeleccionado===o.esteNodo.id||o.underNodoSeleccionado},on:{nodoSeleccionado:function(e){return o.$emit("nodoSeleccionado",e)},nodosRenderizados:function(e){return o.$emit("nodosRenderizados",e)},inicioArrastre:function(e){return o.$emit("inicioArrastre",e)},finDeArrastre:function(e){return o.$emit("finDeArrastre",e)},toggleContenidoTodos:function(e){return o.$emit("toggleContenidoTodos",e)},meElimine:function(i){return o.$emit("nodoEliminado",e.id)},nodoEliminado:function(e){return o.$emit("nodoEliminado",e)},nodoSolidaridadCreado:function(e){return o.$emit("nodoSolidaridadCreado",e)}}})})),n("div",{attrs:{id:"lineaFinal"}})],2):o._e()])])},Hi=[],Zi=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"iconoPersonaAutonomo",class:{yo:o.soyYo},style:[o.offsetIcono]},[i("img",{directives:[{name:"show",rawName:"v-show",value:o.fotografiaEnabled,expression:"fotografiaEnabled"}],staticClass:"fotografia",style:[o.offsetFoto],attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.idPersona,alt:"Usuario"},on:{load:function(e){o.fotografiaEnabled=!0}}}),i("div",{attrs:{id:"contenedorAlertas"}},[o._t("alertas")],2),i("div",{staticClass:"nombres",class:{nombreSeleccionado:o.seleccionado},style:[{fontSize:o.basicFontSizeNombre*o.factor+"px"}]},[o._v(" "+o._s(o.estaPersona.nombres)+" "),i("br"),i("b",[o._v(o._s(o.estaPersona.titulo))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.menuContextual,expression:"menuContextual"}],attrs:{id:"menuCxPersona"}},[i("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(o._s(o.idPersona))]),o.usuarioSuperadministrador?i("div",{staticClass:"botonMenuCx"},[o._v(" "+o._s(o.estaPersona.username)+" ")]):o._e(),o.usuarioSuperadministrador?i("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoPermiso,expression:"nuevoPermiso"}],attrs:{type:"text",placeholder:"Nuevo permiso"},domProps:{value:o.nuevoPermiso},on:{input:function(e){e.target.composing||(o.nuevoPermiso=e.target.value)}}}):o._e(),o.usuarioSuperadministrador?i("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.addPermisos(e)}}},[o._v("Dar permiso")]):o._e(),o._l(o.opcionesMenuCx,(function(e,n){return i("div",{key:n,staticClass:"botonMenuCx",on:{click:function(i){return o.$emit(e.evento)}}},[o._v(" "+o._s(e.textoVisible)+" ")])}))],2)])},Gi=[];function Ki(){var o=Object(s["a"])(["\n  fragment fragConversacion on Conversacion{\n    id\n    titulo    \n    estado\n    acceso   \n    cantidadRespuestas\n    infoUltimaRespuesta{\n      fecha      \n    }\n  }\n"]);return Ki=function(){return o},o}function Yi(){var o=Object(s["a"])(["\n  fragment fragRespuesta on RespuestaConversacionForo{\n    id\n    fecha\n    mensaje\n    interpolaciones{\n      ...fragInterpolacion\n      quote{\n        ...fragQuote\n        interpolaciones{\n          ...fragInterpolacion\n          quote{\n            ...fragQuote\n            interpolaciones{\n              ...fragInterpolacion\n              quote{\n                ...fragQuote\n                interpolaciones{\n                  ...fragInterpolacion\n                  quote{\n                    ...fragQuote\n                    interpolaciones{\n                      ...fragInterpolacion\n                      quote{\n                        ...fragQuote\n                        interpolaciones{\n                          ...fragInterpolacion\n                          quote{\n                            ...fragQuote\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    enlaceAdjunto\n    infoAutor{\n      id\n      nombres\n      apellidos\n      username\n    }\n    archivo{\n      googleDriveDirectLink\n    }\n  }\n  ",", \n  ","\n"]);return Yi=function(){return o},o}function Wi(){var o=Object(s["a"])(["\n  fragment fragInterpolacion on Interpolacion{\n    tipo\n    enlaceIframe\n    mensaje    \n  }\n"]);return Wi=function(){return o},o}function Xi(){var o=Object(s["a"])(["\n  fragment fragQuote on Quote{\n    mensaje    \n    infoAutor{\n      id\n      nombres\n      apellidos\n      username\n    }\n    fecha\n  }\n"]);return Xi=function(){return o},o}function on(){var o=Object(s["a"])(["\n  fragment fragProyecto on Proyecto{\n    id\n    nombre\n    descripcion\n    idForo\n    responsables\n    participantes\n    posiblesResponsables    \n    objetivos {\n      ...fragObjetivoProyecto\n    }\n    trabajos {\n      ...fragTrabajoProyecto\n    }\n  }  \n  ","\n  ","\n"]);return on=function(){return o},o}function en(){var o=Object(s["a"])(["\n  fragment fragObjetivoProyecto on ObjetivoDeProyecto{\n    id\n    nombre\n    descripcion\n    estadoDesarrollo\n    vinculos{\n      idRef\n      tipo\n      tipoRef\n    }\n    coords{\n      x\n      y\n    }\n  }\n"]);return en=function(){return o},o}function nn(){var o=Object(s["a"])(["\n  fragment fragTrabajoProyecto on TrabajoDeProyecto{\n    id\n      nombre\n      descripcion\n      estadoDesarrollo\n      vinculos{\n        idRef\n        tipo\n        tipoRef\n      }\n      coords{\n        x\n        y\n      }\n  }\n"]);return nn=function(){return o},o}function tn(){var o=Object(s["a"])(["\nfragment fragServicioProyecto on ServicioProyecto{\n  id\n  nombre\n  descripcion\n  listaPeticiones{\n    idBeneficiario\n  }\n}\n"]);return tn=function(){return o},o}function an(){var o=Object(s["a"])(["\n  fragment fragBienProyecto on BienProyecto{\n    id\n      nombre\n      descripcion\n      unidad\n      cantidad\n      fechaCierre\n      fechaReparticion\n      instruccionesRecibir\n      listaPeticiones{\n        idBeneficiario\n        cantidadSolicitada\n        cantidadAsignada\n      }\n  }\n"]);return an=function(){return o},o}function sn(){var o=Object(s["a"])(["\nfragment fragActividad on ActividadGrupoEstudiantil {\n  id\n  nombre\n  fechaUpload\n  hayGuia\n  infoCreador{\n    ...fragMinimoPersona\n  }\n  desarrollos {\n    ...fragDesarrollo \n  }\n}\n","\n"]);return sn=function(){return o},o}function rn(){var o=Object(s["a"])(["\nfragment fragDesarrollo on DesarrolloActividadGrupoEstudiantil{\n    id\n    estado\n    leidoPorProfe\n    infoEstudiante{\n      ...fragMinimoPersona\n    }\n    participaciones {\n      ...fragParticipacion\n    }\n}\n","\n"]);return rn=function(){return o},o}function dn(){var o=Object(s["a"])(["\n  fragment fragParticipacion on ParticipacionActividadGrupoEstudiantil{\n    id\n      fechaUpload\n      archivo {\n        extension\n        nombre\n        googleDriveDirectLink,        \n      }\n      comentario\n      enlaceAdjunto\n      infoAutor{\n        ...fragMinimoPersona\n      }\n  }\n  ","\n"]);return dn=function(){return o},o}function cn(){var o=Object(s["a"])(["\nfragment fragMinimoPersona on Usuario {\n  id\n  nombres\n  apellidos\n  username\n  titulo\n}\n"]);return cn=function(){return o},o}function un(){var o=Object(s["a"])(["\nfragment fragResponsables on Usuario {\n  id\n  username\n  nombres\n  apellidos\n  email\n  permisos\n  numeroTel\n  lugarResidencia\n}\n"]);return un=function(){return o},o}function ln(){var o=Object(s["a"])(["\n  fragment fragEvento on EventoCalendario{\n    id\n    nombre\n    descripcion\n    horarioInicio\n    horarioFinal\n    responsables  \n    participantes\n    origen\n    idOrigen    \n  }\n"]);return ln=function(){return o},o}d()(ln()),d()(un());var vn=d()(cn()),mn=d()(dn(),vn),pn=d()(rn(),mn),hn=(d()(sn(),pn),d()(an()),d()(tn()),d()(nn())),fn=d()(en()),gn=d()(on(),hn,fn),bn=d()(Xi()),Nn=d()(Wi()),An=d()(Yi(),bn,Nn),Cn=d()(Ki());function yn(){var o=Object(s["a"])(["\n            mutation ($nuevoPermiso: String!, $idUsuario: ID!) {\n              addPermisoUsuario(\n                nuevoPermiso: $nuevoPermiso\n                idUsuario: $idUsuario\n              ) {\n                id\n                permisos\n              }\n            }\n          "]);return yn=function(){return o},o}function En(){var o=Object(s["a"])(["\n  query ($idUsuario: ID!) {\n    Usuario(idUsuario: $idUsuario) {\n      ...fragMinimoPersona\n    }\n  }\n  ","\n"]);return En=function(){return o},o}var wn=d()(En(),vn),xn={name:"IconoPersonaAutonomo",apollo:{estaPersona:{query:wn,variables:function(){return{idUsuario:this.idPersona}},update:function(o){var e=o.Usuario;return e},skip:function(){return!this.idPersona}}},data:function(){return{estaPersona:{permisos:[]},nuevoPermiso:null,mounted:!1,fotografiaEnabled:!1,basicWidthFoto:70,basicFontSizeNombre:15}},props:{idPersona:String,seleccionado:Boolean,menuContextual:Boolean,factorEscala:{type:String,default:"1"},opcionesMenuCx:{type:Array}},computed:{soyYo:function(){return!!(this.mounted&&this.idPersona&&this.$store.state.usuario)&&this.$store.state.usuario.id==this.idPersona},offsetFoto:function(){return{width:this.basicWidthFoto*this.factor+"px",height:this.basicWidthFoto*this.factor+"px"}},offsetIcono:function(){return{width:this.basicWidthFoto*this.factor+"px"}},factor:function(){return Number(this.factorEscala)}},methods:{addPermisos:function(){console.log("enviando ".concat(this.nuevoPermiso," para el usuario con id ").concat(this.idPersona)),this.$apollo.mutate({mutation:d()(yn()),variables:{nuevoPermiso:this.nuevoPermiso,idUsuario:this.idPersona}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},fotografiaCargada:function(){console.log("Fotografía cargada")}},mounted:function(){this.mounted=!0},beforeRouteUpdate:function(){console.log("Before update")}},Pn=xn,Sn=(i("775d"),Object(p["a"])(Pn,Zi,Gi,!1,null,"6d9901f0",null)),Dn=Sn.exports,In=/[^ a-zA-ZÀ-ž0-9_():.,-]/,Rn=/[^\n\r a-zA-ZÀ-ž0-9_()":;.,+¡!¿?@=-]/;function kn(){var o=Object(s["a"])(["\n            mutation ($infoNodo: NodoSolidaridadInput!, $idNodoParent: ID!, $tipoParent:String!) {\n              crearNuevoNodoSolidaridadUnderNodo(\n                infoNodo: $infoNodo\n                idNodoParent: $idNodoParent\n                tipoParent:$tipoParent\n              ) {\n                nuevoNodo{\n                  ...fragNodoSolidaridad\n                }\n                nodosModificados{\n                  ...fragNodoSolidaridad                      \n                }\n                usuariosModificados{\n                  ...fragPersonaAtlas\n                }\n              }\n            }\n            ","\n            ","\n          "]);return kn=function(){return o},o}function Mn(){var o=Object(s["a"])(["\n            mutation ($idNodoRequiriente: ID!, $tipoRequiriente:String!, $idNodoRequerido: ID!) {\n              deleteRequerimentoNodosAtlasSolidaridad(\n                idNodoRequiriente: $idNodoRequiriente\n                tipoRequiriente: $tipoRequiriente\n                idNodoRequerido: $idNodoRequerido\n              ) {\n                  nodosModificados{\n                    id\n                    vinculos {\n                      id\n                      idRef\n                      tipo                \n                    }\n                    administradores\n                    nodoParent\n                  }\n                  usuariosModificados{\n                    id\n                    vinculos {\n                      id\n                      idRef\n                      tipo                \n                    }                                        \n                  }              \n              }\n            }\n          "]);return Mn=function(){return o},o}function jn(){var o=Object(s["a"])(["\n            mutation ($idNodoRequiriente: ID!, $tipoRequiriente:String!, $idNodoRequerido: ID!) {\n              crearParentingEntreNodosAtlasSolidaridad(\n                idNodoRequiriente: $idNodoRequiriente\n                tipoRequiriente: $tipoRequiriente\n                idNodoRequerido: $idNodoRequerido\n              ) {\n                nodosModificados{\n                  id\n                  vinculos {\n                    id\n                    idRef\n                    tipo                \n                  }\n                  administradores\n                  nodoParent\n                }\n                usuariosModificados{\n                  id\n                  vinculos {\n                    id\n                    idRef\n                    tipo                \n                  }\n                }\n              }\n            }\n          "]);return jn=function(){return o},o}function $n(){var o=Object(s["a"])(["\n            mutation ($idNodoRequiriente: ID!, $tipoRequiriente: String!, $idNodoRequerido: ID!) {\n              crearRequerimentoEntreNodosAtlasSolidaridad(\n                idNodoRequiriente: $idNodoRequiriente\n                tipoRequiriente:$tipoRequiriente\n                idNodoRequerido: $idNodoRequerido\n              ) {\n                nodosModificados{\n                  __typename\n                  id\n                  vinculos {\n                    id\n                    idRef\n                    tipo                \n                  }\n                  administradores\n                  nodoParent\n                }\n                usuariosModificados{\n                  id\n                  vinculos {\n                    id\n                    idRef\n                    tipo                \n                  }\n                }\n                \n              }\n            }\n          "]);return $n=function(){return o},o}function On(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!, $idUsuario: ID!) {\n                    addResponsableNodoSolidaridad(\n                      idNodo: $idNodo\n                      idUsuario: $idUsuario\n                    ) {\n                      id\n                      responsables\n                      posiblesResponsables\n                      responsablesSolicitados\n                      administradores\n                    }\n                  }\n                "]);return On=function(){return o},o}function qn(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!, $idUsuario: ID!) {\n                    addResponsableNodoSolidaridad(\n                      idNodo: $idNodo\n                      idUsuario: $idUsuario\n                    ) {\n                      id\n                      responsables\n                      posiblesResponsables\n                      responsablesSolicitados\n                      administradores\n                    }\n                  }\n                "]);return qn=function(){return o},o}function Tn(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!, $idUsuario: ID!) {\n                    removeResponsableNodoSolidaridad(\n                      idNodo: $idNodo\n                      idUsuario: $idUsuario\n                    ) {\n                      id\n                      responsables\n                      posiblesResponsables\n                      administradores\n                    }\n                  }\n                "]);return Tn=function(){return o},o}function Bn(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!, $idUsuario: ID!) {\n                    removeResponsableNodoSolidaridad(\n                      idNodo: $idNodo\n                      idUsuario: $idUsuario\n                    ) {\n                      id\n                      responsables\n                      posiblesResponsables\n                      administradores\n                    }\n                  }\n                "]);return Bn=function(){return o},o}function Un(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!) {\n                    usuarioEntrarResponsableNodoSolidaridad(idNodo: $idNodo) {\n                      id\n                      responsables\n                      posiblesResponsables\n                    }\n                  }\n                "]);return Un=function(){return o},o}function Fn(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!, $nuevoEstado: String!) {\n                    setEstadoNodoSolidaridad(\n                      idNodo: $idNodo\n                      nuevoEstado: $nuevoEstado\n                    ) {\n                      id\n                      estadoDesarrollo\n                    }\n                  }\n                "]);return Fn=function(){return o},o}function _n(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!, $nuevoKeywords: String!) {\n                    editarKeywordsNodoSolidaridad(\n                      idNodo: $idNodo\n                      nuevoKeywords: $nuevoKeywords\n                    ) {\n                      id\n                      keywords\n                    }\n                  }\n                "]);return _n=function(){return o},o}function Ln(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!, $nuevoDescripcion: String!) {\n                    editarDescripcionNodoSolidaridad(\n                      idNodo: $idNodo\n                      nuevoDescripcion: $nuevoDescripcion\n                    ) {\n                      id\n                      descripcion\n                    }\n                  }\n                "]);return Ln=function(){return o},o}function zn(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!, $nuevoNombre: String!) {\n                    editarNombreNodoSolidaridad(\n                      idNodo: $idNodo\n                      nuevoNombre: $nuevoNombre\n                    ) {\n                      id\n                      nombre\n                    }\n                  }\n                "]);return zn=function(){return o},o}function Vn(){var o=Object(s["a"])(["\n                  mutation ($idNodo: ID!) {\n                    eliminarNodoSolidaridad(idNodo: $idNodo)\n                  }\n                "]);return Vn=function(){return o},o}function Qn(){var o=Object(s["a"])(["\n  query {\n    yo {\n      id\n      nombre\n      coords{\n        x\n        y\n      }\n      vinculos{\n      id\n        tipo\n        idRef\n      }\n      fuerzaCentroMasa{\n      fuerza\n      direccion\n    }\n    fuerzaColision{\n      fuerza\n      direccion  \n    }\n      atlasSolidaridad {\n        id\n        coordsVista {\n          x\n          y\n        }\n        idsNodosDesplegados\n      }\n    }\n  }\n"]);return Qn=function(){return o},o}var Jn=In,Hn=Rn,Zn=/[^ a-zA-Zñ0-9]/,Gn=d()(Qn()),Kn={data:function(){return{enviandoQueryGeneral:!1}},methods:{eliminarse:function(){var o=this;if(this.usuarioSuperadministrador||this.usuarioAdministrador){if(confirm("¿Confirmar eliminación de nodo? (Esta acción no puede deshacerse")){this.enviandoQueryGeneral=!0;var e=this;this.$apollo.mutate({mutation:d()(Vn()),variables:{idNodo:this.esteNodo.id}}).then((function(){e.enviandoQueryGeneral=!1,o.$emit("meElimine")})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoQueryGeneral=!1}))}}else console.log("No autorizado")}}},Yn={data:function(){return{idResponsableSeleccionado:null,enviandoQueryResponsables:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,nuevoKeywords:null,editandoKeywords:!1,enviandoNuevoKeywords:!1,togglingEstado:!1}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombre=this.$refs.inputNuevoNombre.value,this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteNodo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(zn()),variables:{idNodo:this.esteNodo.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteNodo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:d()(Ln()),variables:{idNodo:this.esteNodo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},guardarNuevoKeywords:function(){var o=this;this.nuevoKeywordsIlegal?console.log("Keywords ilegal"):this.nuevoKeywords!=this.esteNodo.keywords?(console.log("guardando nuevo keywords"),this.enviandoNuevoKeywords=!0,this.$apollo.mutate({mutation:d()(_n()),variables:{idNodo:this.esteNodo.id,nuevoKeywords:this.nuevoKeywords}}).then((function(){o.enviandoNuevoKeywords=!1,o.editandoKeywords=!1})).catch((function(e){var i=e.graphQLErrors;o.enviandoNuevoKeywords=!1,console.log("Error. E :".concat(i))}))):this.editandoKeywords=!1},toggleEditandoDescripcion:function(){var o=this;this.usuarioAdministrador&&(this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteNodo.descripcion,this.editandoDescripcion&&this.$nextTick((function(){o.$refs.inputNuevoDescripcion.focus()})))},toggleEditandoKeywords:function(){var o=this;this.usuarioAdministrador&&(this.$refs.inputNuevoKeywords.style.height=this.$refs.keywords.offsetHeight+"px",this.editandoKeywords=!this.editandoKeywords,this.nuevoKeywords=this.esteNodo.keywords,this.editandoKeywords&&this.$nextTick((function(){o.$refs.inputNuevoKeywords.focus()})))},toggleEstadoNodo:function(){var o=this;if(this.usuarioAdministrador){var e="noCompletado";"noCompletado"===this.esteNodo.estadoDesarrollo&&(e="completado"),this.togglingEstado=!0,this.$apollo.mutate({mutation:d()(Fn()),variables:{idNodo:this.esteNodo.id,nuevoEstado:e}}).then((function(){o.togglingEstado=!1,console.log("toggled")})).catch((function(e){o.togglingEstado=!1,console.log("Error: E:".concat(e))}))}},entrarResponsables:function(){var o=this;console.log("Enviando peticion de entrar a la lista de responsables del nodo con id ".concat(this.esteNodo.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()(Un()),variables:{idNodo:this.esteNodo.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},abandonarListaResponsables:function(){var o=this;console.log("Abandonando la responsabilidad en este nodo"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()(Bn()),variables:{idNodo:this.esteNodo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1,o.idResponsableSeleccionado=null})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},retirarUsuarioFromListaResponsables:function(o){var e=this;(this.usuarioSuperadministrador||this.usuarioParent)&&(console.log("Retirando usuario de este nodo"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()(Tn()),variables:{idNodo:this.esteNodo.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1,e.idResponsableSeleccionado=null})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)})))},aceptarResponsable:function(o){var e=this;console.log("aceptando como responsable al usuario ".concat(o)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()(qn()),variables:{idNodo:this.esteNodo.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1,e.responsableSeleccionadoEstaAceptado=!0,e.versionCalendario++})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))},toggleEditandoNombre:function(o){var e=this;(this.seleccionado||this.noSeleccionable)&&this.usuarioAdministrador&&(o.stopPropagation(),this.editandoNombre=!0,this.nuevoNombre=this.esteNodo.nombre,this.$nextTick((function(){e.$refs.inputNuevoNombre.focus()})))},keydownInputNuevoNombre:function(o){"Escape"===o.key&&this.$refs.inputNuevoNombre.blur()},addResponsableManually:function(o){var e=this;if(this.usuarioLogeado&&(this.usuario.permisos.includes("maestraVida-profesor")||this.usuarioSuperadministrador)){console.log("Adding ".concat(o," a la lista de responsables"));var i=o;this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()(On()),variables:{idNodo:this.esteNodo.id,idUsuario:i}}).then((function(){e.enviandoQueryResponsables=!1,e.versionCalendario++})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))}}},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!Jn.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!Hn.test(this.nuevoDescripcion)},nuevoKeywordsIlegal:function(){return!this.nuevoKeywords||this.nuevoKeywords.length<1||!!Zn.test(this.nuevoKeywords)}},watch:{mostrando:function(o){"descripcion"!=o&&(this.editandoDescripcion=!1),"keywords"!=o&&(this.editandoKeywords=!1),"descripcion"===o?(!this.esteNodo.descripcion||this.esteNodo.descripcion.length<1||"Sin descripción"===this.esteNodo.descripcion||"Sin descripcion"===this.esteNodo.descripcion)&&(this.editandoDescripcion||this.toggleEditandoDescripcion()):"keywords"===o&&(!this.esteNodo.keywords||this.esteNodo.keywords.length<1)&&(this.editandoKeywords||this.toggleEditandoKeywords())}}},Wn={computed:{usuarioResponsable:function(){return!!(this.usuarioLogeado&&this.usuario&&this.usuario.id)&&(this.esteNodo.responsables&&this.esteNodo.responsables.includes(this.usuario.id))},usuarioResponsableAmplio:function(){return!!(this.usuarioLogeado&&this.usuario&&this.usuario.id)&&(this.esteNodo.responsablesAmplio&&this.esteNodo.responsablesAmplio.includes(this.usuario.id))},usuarioPosibleResponsable:function(){return!!this.esteNodo.posiblesResponsables&&!!this.esteNodo.posiblesResponsables.includes(this.usuario.id)},usuarioAdministrador:function(){return!(!this.usuario||!this.usuario.id)&&this.esteNodo.administradores.includes(this.usuario.id)},usuarioParent:function(){return!!this.usuarioLogeado&&("usuario"===this.esteNodo.tipoParent&&this.esteNodo.nodoParent===this.usuario.id)}}},Xn={data:function(){return{creandoSubNodo:!1,enviandoEditVinculos:!1}},methods:{crearRequerimento:function(o,e,i){var n=this;console.log("Se fijara que ".concat(o," requiere a ").concat(i)),this.enviandoEditVinculos=!0,this.$apollo.mutate({mutation:d()($n()),variables:{idNodoRequiriente:o,tipoRequiriente:e,idNodoRequerido:i}}).then((function(){n.enviandoEditVinculos=!1})).catch((function(o){n.enviandoEditVinculos=!1,console.log("Error: ".concat(o))}))},crearParenting:function(o,e,i){this.usuarioSuperadministrador?(console.log("Se fijara que ".concat(o," es parent de ").concat(i)),this.$apollo.mutate({mutation:d()(jn()),variables:{idNodoRequiriente:o,tipoRequiriente:e,idNodoRequerido:i}})):console.log("Opción exclusiva de súperadministrador")},eliminarRequerimento:function(o,e,i){var n=this;console.log("Se eliminará el requerimento entre el nodo ".concat(o," de tipo ").concat(e," y el nodo ").concat(i)),this.enviandoEditVinculos=!0,this.$apollo.mutate({mutation:d()(Mn()),variables:{idNodoRequiriente:o,tipoRequiriente:e,idNodoRequerido:i}}).then((function(){n.enviandoEditVinculos=!1})).catch((function(o){console.log("Error: ".concat(o)),n.enviandoEditVinculos=!1}))},afterCrearNodoUnder:function(o){this.$emit("nodoSolidaridadCreado",o)},crearNuevoNodoUnder:function(o){var e=this;console.log("Creando nodo under ".concat(this.esteNodo.__typename)),this.creandoSubNodo=!0,this.$apollo.mutate({mutation:d()(kn(),xi,Ci),variables:{infoNodo:o,idNodoParent:this.esteNodo.id,tipoParent:this.esteNodo.__typename.charAt(0).toLowerCase()+this.esteNodo.__typename.slice(1)}}).then((function(o){var i=o.data.crearNuevoNodoSolidaridadUnderNodo;e.creandoSubNodo=!1,e.afterCrearNodoUnder(i.nuevoNodo)})).catch((function(o){e.creandoSubNodo=!1,console.log("Error: ".concat(o))}))}}},ot={computed:{colorIcono:function(){return"completado"===this.esteNodo.estadoDesarrollo?"#2c710c":this.usuarioResponsableAmplio?"var(--atlasMorado)":this.usuarioAdministrador?"var(--atlasParent)":"black"}}},et={props:{seleccionadoEsResponsable:Boolean,esteNodo:Object,todosNodos:Array,idNodoSeleccionado:String,requeridoPorSeleccionado:Boolean,requiereAlSeleccionado:Boolean,nodoSeleccionado:Object,menuCx:Boolean,factorZoom:Number,callingPosiciones:Boolean,transparentoso:Boolean,usuarioAdministradorNodoSeleccionado:Boolean,usuarioResponsableNodoSeleccionado:Boolean,usuarioResponsableAmplioNodoSeleccionado:Boolean,childSeleccionado:Boolean,idsNodosDesplegados:Array,nodoParent:Object,idsNodosNeedingFetchMore:Array,transicionarPosicionNodos:Boolean},data:function(){return{estiloNombreBase:{minWidth:80,fontSize:16,minHeight:15,padding:8,borderRadius:5},posicion:this.nodoParent?{x:this.nodoParent.coords.x,y:this.nodoParent.coords.y}:{x:0,y:0},widthBase:150,heightBase:100,size:{x:30,y:30},primeraUbicacionCompletada:!1}},methods:{toggleDesplegar:function(){var o=this.$apollo.provider.defaultClient,e=o.readQuery({query:Gn}),i=JSON.parse(JSON.stringify(e)),n=i.yo.atlasSolidaridad.idsNodosDesplegados.indexOf(this.esteNodo.id);n>-1!=!this.desplegado?(-1===n?i.yo.atlasSolidaridad.idsNodosDesplegados.push(this.esteNodo.id):i.yo.atlasSolidaridad.idsNodosDesplegados.splice(n,1),o.writeQuery({query:Gn,data:i})):console.log("Confusión")}},computed:{waitingFetchChildren:function(){return this.idsNodosNeedingFetchMore.includes(this.esteNodo.id)},sizeEfectivo:function(){return this.size},estiloPosicion:function(){return this.montado?{left:(this.posicion.x-this.sizeEfectivo.x/2)*this.factorZoom+"px",top:(this.posicion.y-this.sizeEfectivo.y/2)*this.factorZoom+"px"}:{top:"0px",left:"0px"}},estiloZeta:function(){var o=0;return(this.arrastrandoNodo>this.umbralArrastreNodo||this.seleccionado)&&(o=100),this.menuCx&&(o=200),{zIndex:o}},estiloSize:function(){return{width:Math.round(this.sizeEfectivo.x*this.factorZoom)+"px",height:Math.round(this.sizeEfectivo.y*this.factorZoom)+"px",fontSize:Math.round(14*this.factorZoom)+"px"}},seleccionado:function(){return this.idNodoSeleccionado&&this.idNodoSeleccionado==this.esteNodo.id},estiloCartelNombre:function(){return{minWidth:parseInt(this.estiloNombreBase.minWidth*this.factorZoom)+"px",fontSize:parseInt(this.estiloNombreBase.fontSize*this.factorZoom)+"px",minHeight:parseInt(this.estiloNombreBase.minHeight*this.factorZoom)+"px",padding:parseInt(this.estiloNombreBase.padding*this.factorZoom)+"px",borderRadius:parseInt(this.estiloNombreBase.borderRadius*this.factorZoom)+"px"}},colorCartelNombre:function(){var o="var(--atlasGris)",e="1px solid black";return this.usuarioResponsableAmplio&&(e="1px solid var(--atlasMorado)"),"completado"===this.esteNodo.estadoDesarrollo&&(o="rgb(91 146 66)",e="1px solid var(--atlasVerde)"),{backgroundColor:o,border:e}},parentDeSeleccionado:function(){return!!this.nodoSeleccionado&&this.nodoSeleccionado.nodoParent===this.esteNodo.id},estiloBolita:function(){var o="rgba(105, 199, 199, 0.9)";this.seleccionado?o="var(--atlasNaranja)":this.parentDeSeleccionado&&(o="var(--atlasParent)");var e="";return this.usuarioResponsable&&(e=Math.round(3*this.factorZoom)+"px dotted var(--atlasMorado)"),this.childSeleccionado&&(e=Math.round(3*this.factorZoom)+"px solid var(--atlasNaranja)"),{backgroundColor:o,border:e}},desplegado:function(){return this.idsNodosDesplegados.includes(this.esteNodo.id)},estiloTransicion:function(){var o="";return{transition:o}},enVentanita:function(){return this.idNodoPaVentanita&&this.idNodoPaVentanita===this.esteNodo.id}},watch:{esteNodo:function(){this.$set(this.posicion,"x",this.esteNodo.coords.x),this.$set(this.posicion,"y",this.esteNodo.coords.y)}},mounted:function(){var o=this;"Responder preguntas fundamentales"===this.esteNodo.nombre&&console.log("Recien montado, está en ".concat(JSON.stringify(this.posicion))),this.montado=!0,this.$nextTick((function(){o.$set(o.posicion,"x",o.esteNodo.coords.x),o.$set(o.posicion,"y",o.esteNodo.coords.y),"Responder preguntas fundamentales"===o.esteNodo.nombre&&console.log("Ahora está en ".concat(JSON.stringify(o.posicion))),setTimeout((function(){o.primeraUbicacionCompletada=!0}),500)}))}},it=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"recursoExternoNodo",class:{deshabilitado:o.eliminando,editandose:o.editandoRecurso}},[n("div",{attrs:{id:"barraSuperior"},on:{click:o.clickEnRecurso}},["enlace"===o.esteRecurso.tipo?n("img",{attrs:{id:"iconoTipoRecurso",src:i("7b0b1")}}):n("img",{attrs:{id:"iconoTipoRecurso",src:i("c3cf")}}),n("div",{attrs:{id:"zonaNombre"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoRecurso,expression:"editandoRecurso"}],ref:"inputNuevoNombre",staticClass:"inputNuevoNombre inputNombreCosa",class:{deshabilitado:o.enviandoNuevoNombre},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},click:function(o){o.stopPropagation()},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoRecurso,expression:"!editandoRecurso"}],attrs:{id:"elNombre"}},[o._v(" "+o._s(o.esteRecurso.nombre)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableAmplio,expression:"usuarioResponsableAmplio"}],attrs:{id:"zonaBotonesControl"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.editandoRecurso,expression:"!editandoRecurso"}],staticClass:"botonControl",attrs:{src:i("f9d9"),alt:"Editar",title:"Editar recurso"},on:{click:function(e){return e.stopPropagation(),o.iniciarEditandoRecurso(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.editandoRecurso,expression:"editandoRecurso"}],staticClass:"botonControl",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición"},on:{click:function(e){e.stopPropagation(),o.editandoRecurso=!1}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!o.editandoRecurso,expression:"!editandoRecurso"}],staticClass:"botonControl",attrs:{src:i("4592"),alt:"Eliminar",title:"Eliminar recurso"},on:{click:function(e){return e.stopPropagation(),o.eliminarse(e)}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.eliminando,expression:"eliminando"}],attrs:{texto:""}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoRecurso,expression:"editandoRecurso"}],attrs:{id:"zonaEdicionRecurso"}},[n("div",{attrs:{id:"bloqueBotonesSetTarget"}},[n("div",{staticClass:"boton botonSetTarget",style:[{borderColor:"file"===o.settingTarget?"white":"transparent"}],attrs:{title:"Subir archivo"}},[n("img",{attrs:{src:i("6eb8"),alt:"Upload"}})]),n("div",{staticClass:"boton botonSetTarget",style:[{borderColor:"link"===o.settingTarget?"white":"transparent"}],attrs:{title:"Introducir enlace"},on:{click:function(e){return e.stopPropagation(),o.iniciarInputLink(e)}}},[n("img",{attrs:{src:i("7b0b1"),alt:"Enlace"}})])]),n("div",{attrs:{id:"zonaInputNuevoLink"}},[n("input",{directives:[{name:"show",rawName:"v-show",value:"link"===o.settingTarget,expression:"settingTarget === 'link'"},{name:"model",rawName:"v-model",value:o.nuevoLink,expression:"nuevoLink"}],ref:"inputNuevoLink",staticClass:"inputNuevoLink",class:{deshabilitado:o.enviandoNuevoLink},staticStyle:{width:"90%"},attrs:{type:"text",placeholder:"Introduce el enlace"},domProps:{value:o.nuevoLink},on:{click:function(o){o.stopPropagation()},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoLink(e)},input:function(e){e.target.composing||(o.nuevoLink=e.target.value)}}})])])])},nt=[];i("9911");function tt(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idRecursoExterno: ID!) {\n              eliminarRecursoExternoNodoSolidaridad(\n                idNodo: $idNodo\n                idRecursoExterno: $idRecursoExterno\n              )\n            }\n          "]);return tt=function(){return o},o}function at(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idRecursoExterno: ID!\n              $nuevoLink: String!\n            ) {\n              editarLinkRecursoExternoNodoSolidaridad(\n                idNodo: $idNodo\n                idRecursoExterno: $idRecursoExterno\n                nuevoLink: $nuevoLink\n              ) {\n                id\n                link\n              }\n            }\n          "]);return at=function(){return o},o}function st(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idRecursoExterno: ID!\n              $nuevoNombre: String!\n            ) {\n              editarNombreRecursoExternoNodoSolidaridad(\n                idNodo: $idNodo\n                idRecursoExterno: $idRecursoExterno\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return st=function(){return o},o}var rt={components:{Loading:mo},name:"RecursoExternoNodo",props:{esteRecurso:Object,seleccionado:Boolean,usuarioResponsableAmplio:Boolean,idNodo:String},data:function(){return{nuevoNombre:"Nuevo nombre",enviandoNuevoNombre:!1,nuevoLink:null,enviandoNuevoLink:!1,editandoRecurso:!1,eliminando:!1,settingTarget:null}},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!In.test(this.nuevoNombre)},nuevoLinkIlegal:function(){return this.nuevoLink.length<5}},methods:{clickEnRecurso:function(){this.editandoRecurso||"enlace"===this.esteRecurso.tipo&&window.open(this.esteRecurso.link,"_blank")},guardarNuevoNombre:function(){var o=this;this.nuevoNombre=this.$refs.inputNuevoNombre.value,this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteRecurso.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(st()),variables:{idNodo:this.idNodo,idRecursoExterno:this.esteRecurso.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoRecurso=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editando},guardarNuevoLink:function(){var o=this;this.nuevoLinkIlegal?console.log("No enviado"):this.nuevoLink!=this.esteRecurso.link&&(console.log("guardando nuevo link"),this.enviandoNuevoLink=!0,this.$apollo.mutate({mutation:d()(at()),variables:{idNodo:this.idNodo,idRecursoExterno:this.esteRecurso.id,nuevoLink:this.nuevoLink}}).then((function(){o.enviandoNuevoLink=!1,o.settingTarget=null})).catch((function(e){o.enviandoNuevoLink=!1,console.log("Error. E :".concat(e))})))},iniciarEditandoRecurso:function(){this.nuevoNombre=this.esteRecurso.nombre,this.editandoRecurso=!0},eliminarse:function(){var o=this;confirm("¿Confirmar la eliminación de este elemento? (Esta acción no puede deshacerse)")&&(this.eliminando=!0,this.$apollo.mutate({mutation:d()(tt()),variables:{idNodo:this.idNodo,idRecursoExterno:this.esteRecurso.id}}).then((function(){o.eliminando=!1,o.$emit("meElimine")})).catch((function(e){console.log("Error: ".concat(e)),o.eliminando=!1})))},iniciarInputLink:function(){var o=this;this.settingTarget="link",this.$nextTick((function(){o.$refs.inputNuevoLink.focus()}))}},watch:{settingTarget:function(o,e){"link"===o&&"link"!=e&&(this.nuevoLink=this.esteRecurso.link,this.$refs.inputNuevoLink.focus())},editandoRecurso:function(o){o||(this.settingTarget=null)}}},dt=rt,ct=(i("0480"),Object(p["a"])(dt,it,nt,!1,null,"d49aefe0",null)),ut=ct.exports,lt=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"calendario",class:{eventoSiendoCreado:o.eventoSiendoCreado}},[n("div",{staticClass:"contenedorControles",attrs:{id:"contenedorControlesCalendario"}},[o.usuarioLogeado&&o.usuario.permisos&&o.usuario.permisos.includes("maestraVida-profesor")?n("div",{directives:[{name:"show",rawName:"v-show",value:"eventosPublicos"===o.enfasis,expression:"enfasis === 'eventosPublicos'"}],staticClass:"boton",style:{opacity:"invisibles"===o.modoEventosPublicosExtranjeros?.4:"full"===o.modoEventosPublicosExtranjeros?1:.7},attrs:{title:"invisibles"===o.modoEventosPublicosExtranjeros?"Mostrar todos los eventos públicos":"full"===o.modoEventosPublicosExtranjeros?"Minimizar otros eventos públicos":"Ocultar otros eventos públicos"},on:{click:function(e){"invisibles"===o.modoEventosPublicosExtranjeros?o.modoEventosPublicosExtranjeros="full":"full"===o.modoEventosPublicosExtranjeros?o.modoEventosPublicosExtranjeros="barra":o.modoEventosPublicosExtranjeros="invisibles"}}},[n("img",{attrs:{src:i("b67b"),alt:"Evento publico"}})]):o._e(),"eventosPersonales"===o.enfasis?n("div",{staticClass:"boton",style:[{opacity:o.usuarioVeEventosPublicos?1:.5}],attrs:{title:o.usuarioVeEventosPublicos?"Ocultar eventos públicos":"Mostrar eventos públicos"},on:{click:function(e){o.usuarioVeEventosPublicos=!o.usuarioVeEventosPublicos}}},[n("img",{attrs:{src:i("b67b"),alt:"Evento publico"}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuario&&o.usuario.id===o.idUsuarioTarget||o.usuarioSuperadministrador||o.usuarioProfe,expression:"(usuario && usuario.id===idUsuarioTarget) || usuarioSuperadministrador || usuarioProfe"}],staticClass:"boton",style:[{opacity:o.tomandoAccion?1:.5}],attrs:{title:"semana"===o.tomandoAccion?"Cancelar":"dia"===o.tomandoAccion?"Editar semanas":"Editar días"},on:{click:function(e){o.tomandoAccion="semana"===o.tomandoAccion?null:(o.tomandoAccion,"semana")}}},[n("img",{attrs:{src:i("0ecf"),alt:"Lista"}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.diaSeleccionado,expression:"!diaSeleccionado"}],attrs:{id:"bloqueSelect"}},[n("div",{attrs:{id:"barraFecha"}},[n("div",{attrs:{id:"bloqueMes"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.seleccionandoMes,expression:"!seleccionandoMes"}],attrs:{id:"nombreMes"},on:{click:o.iniciarSeleccionandoMes}},[o._v(" "+o._s(o.nombreMesSeleccionado)+" ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:o.numeroMesSeleccionado,expression:"numeroMesSeleccionado"},{name:"show",rawName:"v-show",value:o.seleccionandoMes,expression:"seleccionandoMes"}],ref:"selectMes",attrs:{id:"selectMes"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(o){return o.selected})).map((function(o){var e="_value"in o?o._value:o.value;return e}));o.numeroMesSeleccionado=e.target.multiple?i:i[0]}}},o._l(o.nombresMeses,(function(e,i){return n("option",{key:"selector"+e,domProps:{value:i}},[o._v(" "+o._s(e)+" ")])})),0)]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.cantidadEventosRelevantesMes.loading,expression:"$apollo.queries.cantidadEventosRelevantesMes.loading"}],attrs:{texto:""}}),n("div",{staticStyle:{"margin-left":"auto"},attrs:{id:"bloqueYear"}},[n("div",{attrs:{id:"nombreYear"}},[o._v(" "+o._s(o.yearSeleccionado)+" ")])])],1),n("div",{attrs:{id:"barraDiasSemana"}},o._l(7,(function(e){return n("div",{key:"diaSemana"+e,staticClass:"diaSemana"},[o._v(" "+o._s(o.nombresDiasSemana[e-1].charAt(0))+" ")])})),0),n("div",{attrs:{id:"contenedorMesh"}},[n("div",{style:[o.estiloMargenInicio],attrs:{id:"margenInicio"}}),o._l(o.lengthMonthSeleccionado,(function(e){return n("div",{key:"selectorDia"+e,staticClass:"selectorDia",class:{hoy:o.dateHoy.getFullYear()===o.yearSeleccionado&&o.dateHoy.getMonth()===parseInt(o.numeroMesSeleccionado)&&o.dateHoy.getDate()===e},on:{click:function(i){o.numeroDiaSeleccionado=e}}},[n("div",{staticClass:"numeroDia"},[o._v(o._s(e)+o._s(o.dateHoy.getFullYear()===o.yearSeleccionado&&o.dateHoy.getMonth()===parseInt(o.numeroMesSeleccionado)&&o.dateHoy.getDate()===e?" Hoy":""))]),o.cantidadEventosRelevantesMes.some((function(o){return o.dia===e}))?n("div",{staticClass:"bolitaCantidadEventosRelevantes",style:[{opacity:"dia"===o.tomandoAccion?.4:1}]},[n("div",{staticClass:"laCantidad"},[o._v(" "+o._s(o.cantidadEventosRelevantesMes.find((function(o){return o.dia===e})).cantidadEventos)+" ")])]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"dia"===o.tomandoAccion,expression:"tomandoAccion === 'dia'"}],attrs:{id:"contenedorBotonesDia"}},[o._m(0,!0),o._m(1,!0)])])})),n("div",{directives:[{name:"show",rawName:"v-show",value:"semana"===o.tomandoAccion,expression:"tomandoAccion === 'semana'"}],attrs:{id:"representacionSemanas"}},o._l(o.semanasMes,(function(e,t){return n("div",{key:"semana"+e,staticClass:"semana"},[n("div",{attrs:{id:"contenedorBotonesSemana"}},[n("div",{staticClass:"boton",attrs:{title:"Repetir los eventos de esta semana"},on:{click:function(e){return o.repetirEventosSemana(t)}}},[n("img",{attrs:{src:i("9253"),alt:"Reloj"}})]),n("div",{staticClass:"boton",attrs:{title:"Eliminar todos los eventos de esta semana"},on:{click:function(e){return o.deleteEventosSemana(t)}}},[n("img",{attrs:{src:i("6a34"),alt:"Limpiar"}})])])])})),0)],2)]),o.diaSeleccionado?n("dia-calendario",{key:"dia"+o.diaSeleccionado.date.getTime(),attrs:{eventoSiendoCreado:o.eventoSiendoCreado,hoy:o.dateHoy.getTime()===o.diaSeleccionado.date.getTime(),esteDia:o.diaSeleccionado,horaPx:o.horaPx,scrollXCalendario:o.scrollX,idParent:o.idParent,idEventoSeleccionado:o.idEventoSeleccionado,idUsuarioTarget:o.idUsuarioTarget,tipoParent:o.tipoParent,enfasis:o.enfasis,modoEventosPublicosExtranjeros:o.modoEventosPublicosExtranjeros,usuarioVeEventosPublicos:o.usuarioVeEventosPublicos},on:{regresar:function(e){o.numeroDiaSeleccionado=null},iniciaCreacionEvento:function(e){return o.$emit("iniciaCreacionEvento")},clickEnEvento:function(e){o.idEventoSeleccionado=e.id},desSeleccionDeEvento:function(e){o.idEventoSeleccionado=null},cambioEventos:o.reloadEventosRelevantes}}):o._e()],1)},vt=[function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"boton",attrs:{title:"Repetir los eventos de este día"}},[n("img",{attrs:{src:i("9253"),alt:"Reloj"}})])},function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"boton",attrs:{title:"Eliminar todos los eventos de este día"}},[n("img",{attrs:{src:i("6a34"),alt:"Limpiar"}})])}],mt=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"diaCalendario",class:{abierto:o.abierto}},[i("div",{attrs:{id:"barraSuperior"}},[i("div",{attrs:{id:"bloqueTituloDia"},on:{click:function(e){return o.$emit("regresar")}}},[i("div",{class:{hoy:o.hoy},attrs:{id:"nombreDia"}},[o._v(" "+o._s(o.diaSemana)+" ")]),i("div",{attrs:{id:"fechaDia"}},[o._v(" "+o._s(o.diaYMes)+" ")]),i("div",{attrs:{id:"cantidadesEventos"}},[o._v(" "+o._s(o.cantidadEventosRelevantes?"("+o.cantidadEventosRelevantes+")":"")+" ")])])]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.downloadingData,expression:"downloadingData"}],attrs:{texto:""}}),i("div",{attrs:{id:"contenedorContenido"}},[i("div",{attrs:{id:"barraHoras"}},o._l(24,(function(e){return i("div",{key:"hora"+(e-1),ref:"labelsHoras",refInFor:!0,staticClass:"hora",style:[o.estiloSizeHora]},[o._v(" "+o._s(e-1)+":00 ")])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:!o.downloadingData,expression:"!downloadingData"}],ref:"contenedorEventos",style:[o.estiloSizeContenedorEventos],attrs:{id:"contenedorEventos"},on:{click:function(e){return e.target!==e.currentTarget?null:o.clickContenedorEventos(e)}}},[o._l(o.eventosPublicosVisibles,(function(e){return i("evento-publico-calendario",{key:e.id,attrs:{horaPx:o.horaPx,esteEvento:e,extranjero:!o.idParent||o.idParent!=e.idParent,idUsuarioTarget:o.idUsuarioTarget,seleccionado:o.idEventoSeleccionado===e.id,infoOffset:o.indiceOffset[e.id],diaCalendarioOver:o.esteDia,enfasis:o.enfasis,idParent:o.idParent,tipoParent:o.tipoParent},on:{meElimine:function(i){o.deleteEventoCache(e),o.$emit("cambioEventos")},meCambiaronDia:function(i){o.deleteEventoCache(e),o.$emit("cambioEventos")},creadoEventoPersonal:function(e){o.addEventoCache(e),o.$emit("cambioEventos")}},nativeOn:{click:function(i){return o.$emit("clickEnEvento",e)}}})})),o._l(o.todosEventosPersonalesDia||[],(function(e){return i("evento-personal-calendario",{key:e.id,attrs:{horaPx:o.horaPx,esteEvento:e,seleccionado:o.idEventoSeleccionado===e.id,infoOffset:o.indiceOffset[e.id],diaCalendarioOver:o.esteDia,enfasis:o.enfasis,extranjero:o.idUsuarioTarget!=e.idPersona&&!e.idsParticipantes.includes(o.idUsuarioTarget)},on:{meElimine:function(i){o.deleteEventoCache(e),o.$emit("cambioEventos")},meCambiaronDia:function(i){o.deleteEventoCache(e),o.$emit("cambioEventos")}},nativeOn:{click:function(i){return o.$emit("clickEnEvento",e)}}})}))],2)])],1)},pt=[];i("4fad"),i("07ac");function ht(){var o=Object(s["a"])(["\nfragment fragEventoPublico on EventoPublico{\n  id\n  nombre\n  descripcion\n  idAdministrador\n  limiteDeCupos\n  horarioInicio\n  horarioFinal\n  participantes\n  lugar\n  idParent\n  tipoParent\n  eventosEnmarcados{\n    ...fragEventoPersonal\n    nombresPersona\n  }\n}\n","\n"]);return ht=function(){return o},o}function ft(){var o=Object(s["a"])(["\nfragment fragEventoPersonal on EventoPersonal{\n  id\n  idPersona\n  idsParticipantes\n  idParent\n  tipoParent\n  nombre\n  descripcion\n  horarioInicio\n  horarioFinal\n  idEventoMarco\n  lugar  \n\n}\n"]);return ft=function(){return o},o}var gt=d()(ft()),bt=d()(ht(),gt),Nt=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"eventoPublicoCalendario",class:{deshabilitado:o.eliminandose,seleccionado:o.seleccionado,bloque:"bloque"===o.claseOffset||o.seleccionado,barra:"barra"===o.claseOffset&&!o.seleccionado},style:[o.estiloPos,o.estiloZ]},[n("div",{class:{seleccionado:o.seleccionado,administrador:o.administrador},style:o.estiloSize,attrs:{id:"barra"}}),n("div",{class:{extranjero:o.extranjero,seleccionado:o.seleccionado},staticStyle:{position:"relative"},style:o.estiloSize,attrs:{id:"bloque"}},[n("div",{attrs:{id:"zonaNombre"}},[n("div",{class:{administrador:o.administrador},attrs:{id:"elNombre"}},[o._v(" "+o._s(o.esteEvento.nombre)+" ")])]),o.esteEvento.eventosEnmarcados&&o.esteEvento.eventosEnmarcados.length>0?n("div",{attrs:{id:"cantidadAsistentes"}},[n("img",{staticStyle:{height:"13px","margin-right":"6px"},attrs:{src:i("767e"),alt:"User"}}),o._v(" "+o._s(o.esteEvento.eventosEnmarcados.length)+o._s(o.esteEvento.limiteDeCupos?"/"+o.esteEvento.limiteDeCupos:"")+" ")]):o._e(),(o.idUsuarioTarget,o.esteEvento.idAdministrador,n("icono-persona-autonomo",{class:{seleccionado:o.seleccionado},staticStyle:{margin:"0px auto"},attrs:{idPersona:o.esteEvento.idAdministrador,factorEscala:"0.7"}})),n("div",{class:{seleccionado:o.seleccionado},attrs:{id:"contenedorControlesEvento"}},[o.usuarioLogeado&&o.idUsuarioTarget!=o.esteEvento.idAdministrador?n("div",{directives:[{name:"show",rawName:"v-show",value:!o.creandoEventoPersonalUnder,expression:"!creandoEventoPersonalUnder"}],staticClass:"boton botonControlEvento",attrs:{title:"Asistir a este evento"},on:{click:function(e){return e.stopPropagation(),o.crearEventoPersonalUnder(e)}}},[n("img",{attrs:{src:i("21eb"),alt:"Asistir"}})]):o._e(),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoEventoPersonalUnder,expression:"creandoEventoPersonalUnder"}]}),o.administrador||o.usuarioSuperadministrador?n("div",{staticClass:"boton botonControlEvento",attrs:{title:"Eliminar este evento"},on:{click:function(e){return e.stopPropagation(),o.eliminarse(e)}}},[n("img",{attrs:{src:i("4592"),alt:"Eliminar"}})]):o._e(),n("div",{staticClass:"boton botonControlEvento",attrs:{title:"Expandir este evento"},on:{click:function(e){return e.stopPropagation(),o.$router.push(o.$route.path+"/ventanaEventoPublico/"+o.esteEvento.id)}}},[n("img",{attrs:{src:i("4030"),alt:"Expandir"}})])],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{id:"contenedorMarcasTiempo"}},[n("div",{staticClass:"marcaTiempo",class:{deshabilitado:o.enviandoNuevoDateInicio},attrs:{id:"marcaTiempoInicio"},on:{click:o.setHoraInicio}},[o._v(o._s(o.horaInicioLegible))]),n("div",{staticClass:"marcaTiempo",class:{deshabilitado:o.enviandoNuevoDateFinal},attrs:{id:"marcaTiempoFinal"},on:{click:o.setHoraFinal}},[o._v(o._s(o.horaFinalLegible))])])])},At=[],Ct=(i("841c"),/[^ a-zA-ZÀ-ž0-9_():.,-]/),yt=/[^\n\r a-zA-ZÀ-ž0-9_()":;.,+¡!¿?@=-]/;function Et(){var o=Object(s["a"])(["\n                    mutation($infoEventoPersonal: InputCrearEventoPersonal){\n                        crearEventoPersonal(infoEventoPersonal:$infoEventoPersonal){\n                            ...fragEventoPersonal\n                        }\n                    }\n                ","\n                "]);return Et=function(){return o},o}function wt(){var o=Object(s["a"])(["\n                  mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                    setDateInicioEventoHoldDuration(\n                      nuevoDate: $nuevoDate\n                      tipoEvento: $tipoEvento\n                      idEvento: $idEvento\n                    ) {\n                      __typename\n                      ... on EventoPersonal{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      ... on EventoPublico{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      \n                    }\n                  }\n                "]);return wt=function(){return o},o}function xt(){var o=Object(s["a"])(["\n                  mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                    setDateInicioEvento(\n                      nuevoDate: $nuevoDate\n                      tipoEvento: $tipoEvento\n                      idEvento: $idEvento\n                    ){\n                        __typename\n                      ... on EventoPersonal{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      ... on EventoPublico{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                    }\n                  }\n                "]);return xt=function(){return o},o}function Pt(){var o=Object(s["a"])(["\n                    mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                        setDateFinalEvento(\n                        nuevoDate: $nuevoDate\n                        tipoEvento: $tipoEvento\n                        idEvento: $idEvento\n                        ){\n                                __typename\n                            ... on EventoPersonal{\n                                id\n                                horarioInicio\n                                horarioFinal\n                            }\n                            ... on EventoPublico{\n                                id\n                                horarioInicio\n                                horarioFinal\n                            }\n                        }\n                  }\n                "]);return Pt=function(){return o},o}function St(){var o=Object(s["a"])(["\n                mutation($periodoRepetir: String, $cantidadRepetir: Int!, $idEvento:ID!, $tipoEvento:String!){\n                  repetirEventoPeriodicamente(periodoRepetir:$periodoRepetir, cantidadRepetir: $cantidadRepetir, idEvento: $idEvento, tipoEvento:$tipoEvento){\n                    __typename\n                    ...on EventoPublico{\n                        ...fragEventoPublico\n                    }\n                    ...on EventoPersonal{\n                        ...fragEventoPersonal\n                    }\n                  }\n                } \n                ","\n                ","\n              "]);return St=function(){return o},o}function Dt(){var o=Object(s["a"])(["\n                    mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                        setDateFinalEvento(\n                        nuevoDate: $nuevoDate\n                        tipoEvento: $tipoEvento\n                        idEvento: $idEvento\n                        ){\n                                __typename\n                            ... on EventoPersonal{\n                                id\n                                horarioInicio\n                                horarioFinal\n                            }\n                            ... on EventoPublico{\n                                id\n                                horarioInicio\n                                horarioFinal\n                            }\n                        }\n                  }\n                "]);return Dt=function(){return o},o}function It(){var o=Object(s["a"])(["\n                  mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                    setDateInicioEventoHoldDuration(\n                      nuevoDate: $nuevoDate\n                      tipoEvento: $tipoEvento\n                      idEvento: $idEvento\n                    ) {\n                      __typename\n                      ... on EventoPersonal{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      ... on EventoPublico{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      \n                    }\n                  }\n                "]);return It=function(){return o},o}function Rt(){var o=Object(s["a"])(["\n                  mutation ($idEvento: ID!, $tipoEvento:String!, $nuevoDescripcion: String!) {\n                    editarDescripcionEvento(\n                      idEvento: $idEvento\n                      tipoEvento: $tipoEvento\n                      nuevoDescripcion: $nuevoDescripcion\n                    ) {\n                        __typename\n                        ... on EventoPublico{\n                            id\n                            descripcion  \n                        }\n                        ... on EventoPersonal{\n                            id\n                            descripcion  \n                        }\n                      \n                    }\n                  }\n                "]);return Rt=function(){return o},o}function kt(){var o=Object(s["a"])(["\n                  mutation ($idEvento: ID!, $tipoEvento:String!, $nuevoLimiteDeCupos: Int!) {\n                    editarLimiteDeCuposEvento(\n                      idEvento: $idEvento\n                      tipoEvento:$tipoEvento\n                      nuevoLimiteDeCupos: $nuevoLimiteDeCupos\n                    ) {\n                        id\n                      limiteDeCupos                                      \n                    }\n                  }\n                "]);return kt=function(){return o},o}function Mt(){var o=Object(s["a"])(["\n                  mutation ($idEvento: ID!, $tipoEvento:String!, $nuevoNombre: String!) {\n                    editarNombreEvento(\n                      idEvento: $idEvento\n                      tipoEvento:$tipoEvento\n                      nuevoNombre: $nuevoNombre\n                    ) {\n                    __typename\n                    ... on EventoPersonal{\n                        id\n                      nombre\n                    }\n                    ... on EventoPublico{\n                        id\n                        nombre\n                    }\n                    \n                    }\n                  }\n                "]);return Mt=function(){return o},o}function jt(){var o=Object(s["a"])(["\n                  mutation ($idEvento: ID!, $tipoEvento:String!) {\n                    eliminarEvento(idEvento: $idEvento, tipoEvento:$tipoEvento)\n                  }\n                "]);return jt=function(){return o},o}var $t=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sábado"],Ot=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],qt={data:function(){return{}},computed:{tipoEvento:function(){return this.esteEvento.__typename.charAt(0).toLowerCase()+this.esteEvento.__typename.slice(1)},dateInicio:function(){return new Date(this.esteEvento.horarioInicio)},fechaInicioFormateada:function(){var o=this.dateInicio.toISOString().split("T")[0];return o},fechaFinalFormateada:function(){var o=this.dateFinal.toISOString().split("T")[0];return o},dateFinal:function(){return new Date(this.esteEvento.horarioFinal)},horarioInicioFormateado:function(){return this.timesLegibles.horarioInicio.horas+":"+this.timesLegibles.horarioInicio.minutos},horarioFinalFormateado:function(){return this.timesLegibles.horarioFinal.horas+":"+this.timesLegibles.horarioFinal.minutos},fechaInicioLegible:function(){var o=$t[this.dateInicio.getDay()],e=this.dateInicio.getDate(),i=Ot[this.dateInicio.getMonth()],n=o+" "+e+" de "+i;return n},horaInicioLegible:function(){var o=this.dateInicio.getHours(),e=this.dateInicio.getMinutes();return(""+o).length<2&&(o="0"+o),(""+e).length<2&&(e="0"+e),o+":"+e},dateInicioLegible:function(){var o=this.fechaInicioLegible+", "+this.horaInicioLegible;return o},fechaFinalLegible:function(){var o=$t[this.dateFinal.getDay()],e=this.dateFinal.getDate(),i=Ot[this.dateFinal.getMonth()],n=o+" "+e+" de "+i;return n},horaFinalLegible:function(){var o=this.dateFinal.getHours(),e=this.dateFinal.getMinutes();return(""+o).length<2&&(o="0"+o),(""+e).length<2&&(e="0"+e),o+":"+e},dateFinalLegible:function(){var o=this.fechaFinalLegible+", "+this.horaFinalLegible;return o},timesLegibles:function(){var o=this.millisInicioLocal%864e5,e=this.millisFinalLocal%864e5;return{horarioInicio:{horas:Math.floor(o/36e5),minutos:o%36e5/6e4},horarioFinal:{horas:Math.floor(e/36e5),minutos:e%36e5/6e4}}},millisFinalLocal:function(){var o=new Date(this.esteEvento.horarioFinal),e=o.getTime(),i=6e4*o.getTimezoneOffset();return e-i},millisInicioLocal:function(){var o=new Date(this.esteEvento.horarioInicio),e=o.getTime(),i=6e4*o.getTimezoneOffset();return e-i},duracionMinutos:function(){return Math.round((new Date(this.esteEvento.horarioFinal).getTime()-new Date(this.esteEvento.horarioInicio).getTime())/6e4)},duracionLegible:function(){var o=Math.floor(this.duracionMinutos/1440),e=Math.floor((this.duracionMinutos-1440*o)/60),i=this.duracionMinutos-1440*o-60*e,n="";return(i>0||0===this.duracionMinutos)&&(n=i+"min"),e>0&&(n.length>0&&(n=", "+n),n=e+"h"+n),o>0&&(n.length>0&&(n=", "+n),n=o+"dias"+n),n}},methods:{eliminarse:function(){var o=this;confirm("¿Confirmar la eliminación de este evento? (Esta acción no puede deshacerse)")&&(this.administrador||this.usuarioSuperadministrador||this.usuarioProfe)&&(this.eliminandose=!0,this.$apollo.mutate({mutation:d()(jt()),variables:{idEvento:this.esteEvento.id,tipoEvento:this.tipoEvento}}).then((function(){o.$emit("meElimine")})).catch((function(o){console.log("Error: ".concat(o))})))}}},Tt={data:function(){return{}},computed:{administrador:function(){return!!this.usuarioLogeado&&this.usuario.id===this.esteEvento.idAdministrador}}},Bt={data:function(){return{}},computed:{administrador:function(){return!!this.usuarioLogeado&&this.usuario.id===this.esteEvento.idPersona}}},Ut={data:function(){return{nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,editandoFechaInicio:!1,editandoHoraInicio:!1,nuevoDuracion:null,enviandoNuevoDateInicio:!1,enviandoNuevoDateFinal:!1,enviandoHorarios:!1,enviandoSomeHorario:!1,nuevoLimiteDeCupos:null,editandoLimiteDeCupos:!1,enviandoNuevoLimiteDeCupos:!1,minRepetir:1,maxRepetir:52,enviandoQueryRepetir:!1}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombre=this.$refs.inputNuevoNombre.value,this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteEvento.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(Mt()),variables:{idEvento:this.esteEvento.id,tipoEvento:this.tipoEvento,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoLimiteDeCupos:function(){var o=this;this.nuevoLimiteDeCupos=this.$refs.inputNuevoLimiteDeCupos.value,this.nuevoLimiteDeCuposIlegal?console.log("No enviado"):this.nuevoLimiteDeCupos!=this.esteEvento.limiteDeCupos?(console.log("guardando nuevo limite de cupos"),this.enviandonuevoLimiteDeCupos=!0,this.$apollo.mutate({mutation:d()(kt()),variables:{idEvento:this.esteEvento.id,tipoEvento:this.tipoEvento,nuevoLimiteDeCupos:parseInt(this.nuevoLimiteDeCupos)}}).then((function(){o.enviandoNuevoLimiteDeCupos=!1,o.editandoLimiteDeCupos=!1})).catch((function(e){o.enviandoNuevoLimiteDeCupos=!1,console.log("Error. E :".concat(e))}))):this.editandoLimiteDeCupos=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteEvento.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:d()(Rt()),variables:{idEvento:this.esteEvento.id,tipoEvento:this.tipoEvento,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoDescripcion:function(){var o=this;this.administrador&&(this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteEvento.descripcion,this.editandoDescripcion&&this.$nextTick((function(){o.$refs.inputNuevoDescripcion.focus()})))},toggleEditandoNombre:function(o){var e=this;this.administrador&&(o.stopPropagation(),this.editandoNombre=!0,this.nuevoNombre=this.esteEvento.nombre,this.$nextTick((function(){e.$refs.inputNuevoNombre.focus()})))},toggleEditandoLimiteDeCupos:function(o){var e=this;this.administrador&&(o.stopPropagation(),this.editandoLimiteDeCupos=!0,this.nuevoLimiteDeCupos=this.esteEvento.limiteDeCupos,this.$nextTick((function(){e.$refs.inputNuevoLimiteDeCupos.focus()})))},keydownInputNuevoNombre:function(o){"Escape"===o.key&&this.$refs.inputNuevoNombre.blur()},setHoraFinal:function(){var o="hh:mm";this.horaFinalLegible&&(o=this.horaFinalLegible);var e=prompt("Introducir nueva hora de finalización",o),i=e.indexOf(":"),n=parseInt(e.substr(0,i)),t=parseInt(e.substr(i+1));if(null!=n&&null!=t&&n>=0&&n<24&&t>=0&&t<60){var a=new Date(this.diaCalendarioOver.date);a.setHours(n),a.setMinutes(t),console.log("Se fijará la nueva hora de final en "+a),this.enviarNuevoHorarioFinal(a)}else console.log("Hora inválida")},setHoraInicio:function(){var o="hh:mm";this.horaInicioLegible&&(o=this.horaInicioLegible);var e=prompt("Introducir nueva hora de inicio",o),i=e.indexOf(":"),n=parseInt(e.substr(0,i)),t=parseInt(e.substr(i+1));if(null!=n&&null!=t&&n>=0&&n<24&&t>=0&&t<60){var a=new Date(this.diaCalendarioOver.date);a.setHours(n),a.setMinutes(t),console.log("Se fijará la nueva hora de inicio en "+a),this.enviarNuevaDateInicioHoldDuration(a)}else console.log("Hora inválida")},enviarNuevaDateInicioHoldDuration:function(o){var e=this;this.enviandoNuevoDateInicio=!0,this.enviandoSomeHorario=!0,this.$apollo.mutate({mutation:d()(It()),variables:{nuevoDate:o,tipoEvento:this.tipoEvento,idEvento:this.esteEvento.id}}).then((function(){e.$emit("eventoCambioFecha",e.esteEvento),e.enviandoSomeHorario=!1,e.enviandoNuevoDateInicio=!1,e.editandoFechaInicio=!1,e.editandoHoraInicio=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoNuevoDateInicio=!1,e.enviandoSomeHorario=!1}))},enviarNuevoHorarioFinal:function(o){var e=this;this.enviandoNuevoDateFinal=!0,this.enviandoSomeHorario=!0,console.log("Enviando nuevo horario final: ".concat(o)),this.$apollo.mutate({mutation:d()(Dt()),variables:{nuevoDate:o,tipoEvento:this.esteEvento.__typename.charAt(0).toLowerCase()+this.esteEvento.__typename.slice(1),idEvento:this.esteEvento.id}}).then((function(){e.enviandoNuevoDateFinal=!1,e.enviandoSomeHorario=!1,e.editandoDuracion=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoNuevoDateFinal=!1,e.enviandoSomeHorario=!1}))},iniciarEdicionDuracion:function(){this.nuevoDuracion=this.esteEvento.horarioFinal-this.esteEvento.horarioInicio,this.editandoDuracion=!0},repetirEvento:function(o,e){var i=this;(this.usuarioSuperadministrador||this.administrador)&&(o=parseInt(o),o<this.minRepetir||o>this.maxRepetir||(console.log("Se hara query de repetir este evento ".concat(o," veces ").concat(e)),this.enviandoQueryRepetir=!0,this.$apollo.mutate({mutation:d()(St(),bt,gt),variables:{periodoRepetir:e,cantidadRepetir:o,idEvento:this.esteEvento.id,tipoEvento:this.tipoEvento}}).then((function(o){var e=o.data.repetirEventoPeriodicamente;e&&(i.$emit("meRepetiPeriodicamente",e),i.mostrandoZonaRepetir=!1),i.enviandoQueryRepetir=!1})).catch((function(o){console.log("Error: ".concat(o)),i.enviandoQueryRepetir=!1}))))}},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!Ct.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!yt.test(this.nuevoDescripcion)},nuevoLimiteDeCuposIlegal:function(){return!this.nuevoLimiteDeCupos||this.nuevoLimiteDeCupos<1}},watch:{mostrando:function(o){"descripcion"!=o&&(this.editandoDescripcion=!1),"descripcion"===o&&(!this.esteEvento.descripcion||this.esteEvento.descripcion.length<1)&&(this.editandoDescripcion||this.toggleEditandoDescripcion())}}},Ft={data:function(){return{}},methods:{}},_t={props:{idEventoSeleccionado:String,esteEvento:Object,horaPx:Number,seleccionado:Boolean,infoOffset:Object,diaCalendarioOver:Object,enfasis:String,idUsuarioTarget:String},data:function(){return{eliminandose:!1,recogido:!1}},computed:{duracionMinutos:function(){return(this.dateFinal.getTime()-this.dateInicio.getTime())/6e4},estiloSize:function(){var o=this.duracionMinutos/60*this.horaPx;return{width:o+"px"}},estiloPos:function(){var o=36e5*this.dateInicio.getHours()+6e4*this.dateInicio.getMinutes();return{left:o/36e5*this.horaPx+"px",top:this.infoOffset?this.infoOffset.top+"px":"0px"}},estiloZ:function(){return{zIndex:this.seleccionado?10:0}},claseOffset:function(){return this.infoOffset.clase}},methods:{},watch:{dateInicio:function(o){console.log("Cambio de date inicio. Ahora inicio en ".concat(o)),(o<this.diaCalendarioOver.date||o.getTime()>this.diaCalendarioOver.date.getTime()+864e5)&&(console.log("".concat(this.esteEvento.nombre," dice: Me cambiaron de día")),this.$emit("meCambiaronDia",this.esteEvento))}}},Lt={data:function(){return{mostrando:null,esteEvento:{},editandoDateInicio:!1,editandoHorarioFinal:!1,editandoDuracion:!1,mostrandoZonaRepetir:!1,periodoRepetir:"diariamente",cantidadRepetir:1}},methods:{cerrarVentana:function(){var o="eventoPublico"===this.tipoEvento?this.$route.path.search("ventanaEventoPublico"):"eventoPersonal"===this.tipoEvento?this.$route.path.search("ventanaEventoPersonal"):null;if(o){var e=this.$route.path.substring(0,o-1);this.$router.push(e)}},iniciarEdicionFechaInicio:function(){var o=this;(this.administrador||this.usuarioSuperadministrador||this.usuarioProfe)&&(console.log("Iniciando edicion de fecha inicio con ".concat(this.fechaInicioString)),this.$refs.inputFechaInicio.value=this.fechaInicioFormateada,this.editandoFechaInicio=!0,this.$nextTick((function(){o.$refs.inputFechaInicio.focus()})))},iniciarEdicionHoraInicio:function(){var o=this;(this.administrador||this.usuarioSuperadministrador||this.usuarioProfe)&&(this.$refs.inputHoraInicio.value=this.horaInicioLegible,this.editandoHoraInicio=!0,this.$nextTick((function(){o.$refs.inputHoraInicio.focus()})))},iniciarEdicionDuracion:function(){var o=this;(this.administrador||this.usuarioSuperadministrador||this.usuarioProfe)&&(console.log("Iniciando edicion de duración con ".concat(this.duracionMinutos)),this.$refs.inputDuracion.value=this.duracionMinutos,this.editandoDuracion=!0,this.$nextTick((function(){o.$refs.inputDuracion.focus()})))},updateDuracion:function(o){console.log("Updating duración to ".concat(o," minutos"));var e=new Date(this.dateInicio.getTime()+6e4*o);this.enviarNuevoHorarioFinal(e)},enviarNuevoHorarioFinal:function(o){var e=this;this.enviandoNuevoDateFinal=!0,this.enviandoSomeHorario=!0,console.log("Enviando nuevo horario final: ".concat(o)),this.$apollo.mutate({mutation:d()(Pt()),variables:{nuevoDate:o,tipoEvento:this.esteEvento.__typename.charAt(0).toLowerCase()+this.esteEvento.__typename.slice(1),idEvento:this.esteEvento.id}}).then((function(){e.enviandoNuevoDateFinal=!1,e.enviandoSomeHorario=!1,e.editandoDuracion=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoNuevoDateFinal=!1,e.enviandoSomeHorario=!1}))},updateHorarioInicio:function(o){var e=this,i=o.target.value,n=parseInt(i.substring(0,2)),t=parseInt(i.substring(3));console.log("nuevoTime: ".concat(i,". ").concat(n," horas y ").concat(t," minutos"));var a=new Date(this.esteEvento.horarioFinal),s=new Date(this.esteEvento.horarioInicio);console.log("Actual date: ".concat(s)),s.setHours(n),s.setMinutes(t),console.log("Nueva date inicio: ".concat(s)),s>a||(this.enviandoNuevoDateInicio=!0,this.$apollo.mutate({mutation:d()(xt()),variables:{nuevoDate:s,tipoEvento:this.tipoEvento,idEvento:this.esteEvento.id}}).then((function(){e.enviandoNuevoDateInicio=!1,e.editandoDateInicio=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoNuevoDateInicio=!1})))},iniciarEdicionHorarioFinal:function(){var o=this;(this.administrador||this.usuarioSuperadministrador||this.usuarioProfe)&&(console.log("Iniciando edicion"),this.$refs.inputHorarioFinal.value=this.horaFinalString,this.editandoHorarioFinal=!0,this.$nextTick((function(){o.$refs.inputHorarioFinal.focus()})))},updateHorarioFinal:function(o){var e=o.target.value,i=parseInt(e.substring(0,2)),n=parseInt(e.substring(3));console.log("nuevoTime: ".concat(e,". ").concat(i," horas y ").concat(n," minutos"));var t=new Date(this.esteEvento.horarioInicio),a=new Date(this.esteEvento.horarioFinal);console.log("Actual date: ".concat(a)),a.setHours(i),a.setMinutes(n),console.log("Nueva date final: ".concat(a)),a<t||this.enviarNuevoHorarioFinal(a)},enviarNuevaDateInicioHoldDuration:function(o){var e=this;this.enviandoNuevoDateInicio=!0,this.enviandoSomeHorario=!0,this.$apollo.mutate({mutation:d()(wt()),variables:{nuevoDate:o,tipoEvento:this.tipoEvento,idEvento:this.esteEvento.id}}).then((function(){e.$emit("eventoCambioFecha",e.esteEvento),e.enviandoSomeHorario=!1,e.enviandoNuevoDateInicio=!1,e.editandoFechaInicio=!1,e.editandoHoraInicio=!1})).catch((function(o){console.log("Error: ".concat(o)),e.enviandoNuevoDateInicio=!1,e.enviandoSomeHorario=!1}))},updateFechaInicioHoldDuration:function(o){console.log("se hara update de fecha inicio holding duration. ".concat(o));var e=new Date(o),i=e.getUTCDate(),n=e.getUTCMonth(),t=e.getUTCFullYear(),a=new Date(this.esteEvento.horarioInicio);a.setDate(i),a.setMonth(n),a.setFullYear(t),console.log("Quedará: ".concat(a)),this.enviarNuevaDateInicioHoldDuration(a)},updateHoraInicioHoldDuration:function(o){console.log("se hara update de hora inicio holding duration. ".concat(o));var e=o.substring(0,2),i=o.substring(3),n=new Date(this.esteEvento.horarioInicio);n.setHours(e),n.setMinutes(i),console.log("Quedará: ".concat(n)),this.enviarNuevaDateInicioHoldDuration(n)}},computed:{horaInicioString:function(){return new Date(this.esteEvento.horarioInicio).toTimeString().substring(0,5)},horaFinalString:function(){return new Date(this.esteEvento.horarioFinal).toTimeString().substring(0,5)}}},zt={props:{idParent:String,tipoParent:String},data:function(){return{creandoEventoPersonalUnder:!1}},methods:{crearEventoPersonalUnder:function(){var o=this;console.log("Creando evento personal under"),this.creandoEventoPersonalUnder=!0,this.$apollo.mutate({mutation:d()(Et(),gt),variables:{infoEventoPersonal:{idPersona:this.idUsuarioTarget,idEventoMarco:this.esteEvento.id,idParent:this.idParent,tipoParent:this.tipoParent}}}).then((function(e){var i=e.data.crearEventoPersonal;o.creandoEventoPersonalUnder=!1,o.$emit("creadoEventoPersonal",i)})).catch((function(e){console.log("Error: ".concat(e)),o.creandoEventoPersonalUnder=!1}))}}},Vt={name:"EventoPublicoCalendario",components:{IconoPersonaAutonomo:Dn,Loading:mo},props:{extranjero:Boolean},mixins:[qt,Tt,_t,zt,Ut],data:function(){return{mostrando:null}},methods:{},computed:{}},Qt=Vt,Jt=(i("ac77"),Object(p["a"])(Qt,Nt,At,!1,null,"28066e99",null)),Ht=Jt.exports,Zt=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"eventoPersonalCalendario",class:{deshabilitado:o.eliminandose,seleccionado:o.seleccionado,bloque:"bloque"===o.claseOffset||o.seleccionado,barra:"barra"===o.claseOffset&&!o.seleccionado},style:[o.estiloPos,o.estiloZ]},[n("div",{class:{seleccionado:o.seleccionado,extranjero:o.extranjero},style:o.estiloSize,attrs:{id:"barra"}}),n("div",{class:{extranjero:o.extranjero,seleccionado:o.seleccionado,deNodoSolidaridad:"nodoSolidaridad"===o.esteEvento.tipoParent},style:o.estiloSize,attrs:{id:"bloque"}},[n("div",{attrs:{id:"zonaNombre"}},[n("div",{class:{administrador:o.administrador},attrs:{id:"elNombre"}},[o._v(" "+o._s(o.esteEvento.nombre)+" ")])]),n("div",{class:{seleccionado:o.seleccionado},attrs:{id:"contenedorControlesEvento"}},[o.administrador||o.usuarioSuperadministrador||o.usuarioProfe?n("div",{staticClass:"boton botonControlEvento",attrs:{title:"Eliminar este evento"},on:{click:function(e){return e.stopPropagation(),o.eliminarse(e)}}},[n("img",{attrs:{src:i("4592"),alt:"Eliminar"}})]):o._e(),n("div",{staticClass:"boton botonControlEvento",attrs:{title:"Expandir este evento"},on:{click:function(e){return e.stopPropagation(),o.$router.push(o.$route.path+"/ventanaEventoPersonal/"+o.esteEvento.id)}}},[n("img",{attrs:{src:i("4030"),alt:"Expandir"}})])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{id:"contenedorMarcasTiempo"}},[n("div",{staticClass:"marcaTiempo",class:{deshabilitado:o.enviandoNuevoDateInicio},attrs:{id:"marcaTiempoInicio"},on:{click:o.setHoraInicio}},[o._v(o._s(o.horaInicioLegible))]),n("div",{staticClass:"marcaTiempo",class:{deshabilitado:o.enviandoNuevoDateFinal},attrs:{id:"marcaTiempoFinal"},on:{click:o.setHoraFinal}},[o._v(o._s(o.horaFinalLegible))])])])},Gt=[],Kt={name:"eventoPersonalCalendario",components:{},props:{esteEvento:Object,horaPx:Number,seleccionado:Boolean,infoOffset:Object,extranjero:Boolean,diaCalendarioOver:Object},mixins:[qt,_t,Ut],data:function(){return{mostrando:null}},methods:{},computed:{administrador:function(){return!!this.usuarioLogeado&&this.usuario.id===this.esteEvento.idPersona},modo:function(){return"bloque"}}},Yt=Kt,Wt=(i("f3ed"),Object(p["a"])(Yt,Zt,Gt,!1,null,"5add9fdb",null)),Xt=Wt.exports;function oa(){var o=Object(s["a"])(["\n            mutation ($infoEventoPersonal: InputCrearEventoPersonal) {\n              crearEventoPersonal(infoEventoPersonal: $infoEventoPersonal) {\n                ...fragEventoPersonal\n              }\n            }\n            ","\n          "]);return oa=function(){return o},o}function ea(){var o=Object(s["a"])(["\n            mutation ($infoNuevoEvento: InputCrearEventoPublico) {\n              crearEventoPublico(infoNuevoEvento: $infoNuevoEvento) {\n                ...fragEventoPublico\n              }\n            }\n            ","\n          "]);return ea=function(){return o},o}function ia(){var o=Object(s["a"])(["\n  query ($dateInicioDia: Date!, $idParent: ID!, $tipoParent: String!) {\n    eventosPersonalesDeParentDia(\n      dateInicioDia: $dateInicioDia\n      idParent: $idParent\n      tipoParent: $tipoParent\n    ) {\n      ...fragEventoPersonal\n    }\n  }\n  ","\n"]);return ia=function(){return o},o}function na(){var o=Object(s["a"])(["\n  query ($dateInicioDia: Date!, $idUsuario: ID!) {\n    eventosPersonalesDia(dateInicioDia: $dateInicioDia, idUsuario: $idUsuario) {\n      ...fragEventoPersonal\n    }\n  }\n  ","\n"]);return na=function(){return o},o}function ta(){var o=Object(s["a"])(["\n  query ($dateInicioDia: Date!) {\n    eventosPublicosDia(dateInicioDia: $dateInicioDia) {\n      ...fragEventoPublico\n    }\n  }\n  ","\n"]);return ta=function(){return o},o}var aa=d()(ta(),bt),sa=d()(na(),gt),ra=d()(ia(),gt),da={components:{EventoPublicoCalendario:Ht,EventoPersonalCalendario:Xt,Loading:mo},name:"DiaCalendario",apollo:{eventosPublicosDia:{query:aa,variables:function(){return{dateInicioDia:this.esteDia.date}},fetchPolicy:"cache-and-network"},eventosPersonalesDia:{query:sa,variables:function(){return{dateInicioDia:this.esteDia.date,idUsuario:this.idUsuarioTarget}},skip:function(){return!this.usuarioLogeado},fetchPolicy:"cache-and-network"},eventosPersonalesDeParentDia:{query:ra,variables:function(){return{dateInicioDia:this.esteDia.date,idParent:this.idParent,tipoParent:this.tipoParent}},skip:function(){return"nodoSolidaridad"!=this.tipoParent||!this.usuarioLogeado||!this.idParent},fetchPolicy:"cache-and-network"}},props:{hoy:Boolean,esteDia:Object,eventoSiendoCreado:Object,horaPx:Number,scrollXCalendario:Number,idParent:String,idEventoSeleccionado:String,idUsuarioTarget:String,tipoParent:String,enfasis:String,modoEventosPublicosExtranjeros:String,usuarioVeEventosPublicos:Boolean},data:function(){return{eventosPublicosDia:[],eventosPersonalesDia:[],eventosPersonalesDeParentDia:[],abierto:!1,creandoEvento:!1}},methods:{clickContenedorEventos:function(o){if(console.log("Click en el contenedor de eventos"),this.eventoSiendoCreado){var e=36e5,i=JSON.parse(JSON.stringify(this.eventoSiendoCreado));this.$emit("iniciaCreacionEvento");var n=this.$refs.contenedorEventos.getBoundingClientRect(),t=o.pageX-n.left,a=t/this.horaPx,s=Math.round(60*(a-Math.floor(a)));s=15*Math.floor(s/15);var r={horas:Math.floor(a),minutos:s},d=this.esteDia.date.getTime()+60*r.horas*6e4+6e4*r.minutos;console.log("En ".concat(t," -> ").concat(r.horas,": ").concat(r.minutos)),console.log("Date centralh: ".concat(this.esteDia.date.getTime()+r.horas+6e4*r.minutos));var c=d,u=d+e;console.log("Quedará entre: ".concat(new Date(c)," y ").concat(new Date(u))),i.horarioInicio=new Date(c),i.horarioFinal=new Date(u),"eventoPublico"===i.tipoEvento?(delete i.tipoEvento,this.crearEventoPublico(i)):"eventoPersonal"===i.tipoEvento?(delete i.tipoEvento,this.crearEventoPersonal(i)):console.log("Tipo ".concat(i.tipoEvento," no reconocido"))}else this.idEventoSeleccionado&&this.$emit("desSeleccionDeEvento")},addEventoCache:function(o){var e=new Date(o.horarioInicio).getTime(),i=this.esteDia.date.getTime(),n=this.esteDia.date.getTime()+864e5;if(!(e<i||e>n)){var t=o.__typename.charAt(0).toLowerCase()+o.__typename.slice(1),a=null;if("eventoPublico"===t)a={query:aa,variables:{dateInicioDia:this.esteDia.date}};else{if("eventoPersonal"!==t)return void console.log("Tipo evento ".concat(t," no reconocido"));a={query:sa,variables:{dateInicioDia:this.esteDia.date,idUsuario:this.idUsuarioTarget}}}var s=this.$apollo.provider.defaultClient,r=s.readQuery(Object(M["a"])({},a)),d=JSON.parse(JSON.stringify(r)),c=null;"eventoPublico"===t?c=d.eventosPublicosDia:"eventoPersonal"===t&&(c=d.eventosPersonalesDia);var u=c.findIndex((function(e){return e.id===o.id}));-1===u&&(c.push(o),s.writeQuery(Object(M["a"])(Object(M["a"])({},a),{},{data:d})))}},crearEventoPublico:function(o){var e=this;console.log("Creando un evento publico con info ".concat(JSON.stringify(o))),this.creandoEvento=!0,this.$apollo.mutate({mutation:d()(ea(),bt),variables:{infoNuevoEvento:o}}).then((function(o){var i=o.data.crearEventoPublico;e.creandoEvento=!1,e.addEventoCache(i),e.$emit("cambioEventos")})).catch((function(o){console.log("Error: ".concat(o)),e.creandoEvento=!1}))},crearEventoPersonal:function(o){var e=this;console.log("Creando un evento personal con info ".concat(JSON.stringify(o))),this.creandoEvento=!0,this.$apollo.mutate({mutation:d()(oa(),gt),variables:{infoEventoPersonal:Object(M["a"])(Object(M["a"])({},o),{},{idPersona:this.idUsuarioTarget})}}).then((function(o){var i=o.data.crearEventoPersonal;e.creandoEvento=!1,e.addEventoCache(i),e.$emit("cambioEventos")})).catch((function(o){console.log("Error: ".concat(o)),e.creandoEvento=!1}))},deleteEventoCache:function(o){var e=o.__typename.charAt(0).toLowerCase()+o.__typename.slice(1);console.log("Deleting ".concat(e," ").concat(o.nombre," from cache"));var i=null;if("eventoPublico"===e)i={query:aa,variables:{dateInicioDia:this.esteDia.date}};else{if("eventoPersonal"!==e)return void console.log("Tipo evento ".concat(e," no reconocido"));i={query:sa,variables:{dateInicioDia:this.esteDia.date,idUsuario:this.idUsuarioTarget}}}var n=this.$apollo.provider.defaultClient,t=n.readQuery(Object(M["a"])({},i)),a=JSON.parse(JSON.stringify(t)),s=null;"eventoPublico"===e?s=a.eventosPublicosDia:"eventoPersonal"===e&&(s=a.eventosPersonalesDia);var r=s.findIndex((function(e){return e.id===o.id}));r>-1&&(s.splice(r,1),n.writeQuery(Object(M["a"])(Object(M["a"])({},i),{},{data:a})))}},computed:{diaSemana:function(){var o=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"];return o[this.esteDia.date.getDay()]},diaYMes:function(){var o=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return this.esteDia.date.getDate()+" de "+o[this.esteDia.date.getMonth()]},eventosPublicosVisibles:function(){var o=this;return"eventosPublicos"===this.enfasis?"invisibles"===this.modoEventosPublicosExtranjeros?this.eventosPublicosDia.filter((function(e){return e.idParent===o.idParent||e.idAdministrador===o.idUsuarioTarget})):this.eventosPublicosDia:"eventosPersonales"===this.enfasis?this.usuarioVeEventosPublicos?this.eventosPublicosDia:this.eventosPublicosDia.filter((function(e){return e.idAdministrador===o.idUsuarioTarget})):[]},eventosPublicosUsuarioTarget:function(){var o=this;return this.eventosPublicosDia.filter((function(e){return e.idAdministrador===o.idUsuarioTarget}))},estiloSizeContenedorEventos:function(){var o=Object.values(this.indiceOffset).reduce((function(o,e){return e.top+e.height>o?e.top+e.height:o}),0);return{width:24*this.horaPx+"px",height:o+45+"px"}},cantidadEventosPublicos:function(){return this.eventosPublicosDia.length},cantidadEventosRelevantes:function(){var o=this;return"eventosPublicos"===this.enfasis?this.idParent?this.eventosPublicosDia.filter((function(e){return e.idParent===o.idParent})).length:this.cantidadEventosPublicos:"eventosPersonales"===this.enfasis?this.idParent?this.eventosPersonalesDia.filter((function(e){return e.idParent===o.idParent})).length:this.eventosPersonalesDia.length+this.eventosPublicosUsuarioTarget.length:0},indiceOffset:function(){var o=this,e=15,i=160,n=5,t=30,a={};if(!this.usuarioLogeado)return console.log("Cancelando índice offset"),null;this.todosEventosPersonalesDia.forEach((function(t){var s=i,r="bloque",d=n;"eventosPersonales"===o.enfasis?o.idParent&&t.idParent!=o.idParent&&(s=e,r="barra"):(s=e,r="barra"),a[t.id]={evento:t,top:d,height:s,bordeBot:d+s,clase:r}}));var s=JSON.parse(JSON.stringify(this.eventosPublicosVisibles));return s.sort((function(e,i){var n=0;return(e.idAdministrador===o.idUsuarioTarget||o.eventosPersonalesDia.some((function(o){return o.idEventoMarco===e.id})))&&n++,(i.idAdministrador===o.idUsuarioTarget||o.eventosPersonalesDia.some((function(o){return o.idEventoMarco===i.id})))&&n--,-n})),s.forEach((function(s){var r=o.eventosPersonalesDia.some((function(o){return o.idEventoMarco===s.id})),d=i,c="bloque";"eventosPublicos"===o.enfasis&&s.idParent!=o.idParent&&"full"!=o.modoEventosPublicosExtranjeros&&(d=e,c="barra");var u=0;if("eventosPersonales"===o.enfasis&&r)u=t;else{var l=Object.entries(a).map((function(o){return o[1]})).filter((function(o){var e=o.evento.horarioInicio>s.horarioInicio&&o.evento.horarioInicio<s.horarioFinal,i=o.evento.horarioFinal>s.horarioInicio&&o.evento.horarioFinal<s.horarioFinal,n=o.evento.horarioInicio<=s.horarioInicio&&o.evento.horarioFinal>=s.horarioFinal,t=e||i||n;return t})),v=l.reduce((function(o,e){return e.bordeBot>o?e.bordeBot:o}),0);u=v+n}a[s.id]={evento:s,top:u,height:d,bordeBot:u+d+e,clase:c}})),a},todosEventosPersonalesDia:function(){var o=this;return this.eventosPersonalesDia.concat(this.eventosPersonalesDeParentDia.filter((function(e){return!o.eventosPersonalesDia.map((function(o){return o.id})).includes(e.id)})))},estiloSizeHora:function(){return{width:this.horaPx+"px"}},downloadingData:function(){return this.$apollo.queries.eventosPersonalesDeParentDia&&this.$apollo.queries.eventosPersonalesDeParentDia.loading||this.$apollo.queries.eventosPublicosDia&&this.$apollo.queries.eventosPublicosDia.loading||this.$apollo.queries.eventosPersonalesDia&&this.$apollo.queries.eventosPersonalesDia.loading}},watch:{},mounted:function(){var o=this,e=(new Date).getHours();console.log("Scrolling into ".concat(e)),this.$nextTick((function(){o.$refs.labelsHoras[8].scrollIntoView({block:"nearest",inline:"start"})}))}},ca=da,ua=(i("994c"),Object(p["a"])(ca,mt,pt,!1,null,"1ea8f626",null)),la=ua.exports;function va(){var o=Object(s["a"])(["\n            mutation (\n              $idParent: ID!\n              $tipoParent: String!\n              $idUsuario: ID!\n              $dateFrom: Date!\n              $dateTo: Date!\n            ) {\n              deleteEventosTroughInterval(\n                idParent: $idParent\n                tipoParent: $tipoParent\n                idUsuario: $idUsuario\n                dateFrom: $dateFrom\n                dateTo: $dateTo\n              )\n            }\n          "]);return va=function(){return o},o}function ma(){var o=Object(s["a"])(["\n            mutation (\n              $idParent: ID!\n              $tipoParent: String!\n              $idUsuario: ID!\n              $numRepeticiones: Int!\n              $dateFrom: Date!\n              $dateTo: Date!\n            ) {\n              repetirEventosTroughInterval(\n                idParent: $idParent\n                tipoParent: $tipoParent\n                idUsuario: $idUsuario\n                numRepeticiones: $numRepeticiones\n                dateFrom: $dateFrom\n                dateTo: $dateTo\n              )\n            }\n          "]);return ma=function(){return o},o}function pa(){var o=Object(s["a"])(["\n        query (\n          $year: Int!\n          $mes: Int!\n          $idParent: ID!\n          $tipoParent: String!\n          $timeZoneOffset: Int!\n        ) {\n          cantidadEventosRelevantesMes(\n            year: $year\n            mes: $mes\n            idParent: $idParent\n            tipoParent: $tipoParent\n            timeZoneOffset: $timeZoneOffset\n          ) {\n            dia\n            cantidadEventos\n          }\n        }\n      "]);return pa=function(){return o},o}var ha={components:{DiaCalendario:la,Loading:mo},name:"Calendario",props:{idParent:String,idUsuarioTarget:String,tipoParent:String,enfasis:String},apollo:{cantidadEventosRelevantesMes:{query:d()(pa()),variables:function(){return{year:this.yearSeleccionado,mes:parseInt(this.numeroMesSeleccionado),idParent:this.idParent?this.idParent:this.idUsuarioTarget,tipoParent:this.tipoParent?this.tipoParent:"usuario",timeZoneOffset:(new Date).getTimezoneOffset()}},fetchPolicy:"cache-and-network"}},data:function(){var o=new Date(Date.now());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),{cantidadEventosRelevantesMes:[],nombresDiasSemana:["Lunes","Martes","Miércoles","Jueves","Viernes","Sabado","Domingo"],nombresMeses:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dateHoy:o,primerDia:{date:o,horaActual:new Date(Date.now()).getHours()},numeroMesSeleccionado:o.getMonth(),seleccionandoMes:!1,yearSeleccionado:o.getFullYear(),numeroDiaSeleccionado:null,eventoSiendoCreado:null,horaPx:100,scrollX:0,idEventoSeleccionado:null,modoEventosPublicosExtranjeros:"invisibles",diasRendered:[{date:o}],usuarioVeEventosPublicos:!1,tomandoAccion:null,enviandoAccionIntervalo:!1}},computed:{tipoEventoSiendoCreado:function(){return this.eventoSiendoCreado?this.eventoSiendoCreado.tipoEvento:null},offsetScroll:function(){var o=10+this.scrollX;return{left:o+"px"}},nombreMesSeleccionado:function(){return this.nombresMeses[parseInt(this.numeroMesSeleccionado)]},lengthMonthSeleccionado:function(){return new Date(this.yearSeleccionado,parseInt(this.numeroMesSeleccionado+1),0).getDate()},diasMargenInicio:function(){return new Date(this.yearSeleccionado,parseInt(this.numeroMesSeleccionado),0).getDay()},estiloMargenInicio:function(){return{width:14*this.diasMargenInicio+"%"}},diaSeleccionado:function(){if(!this.numeroDiaSeleccionado)return null;var o=new Date(this.yearSeleccionado,parseInt(this.numeroMesSeleccionado),this.numeroDiaSeleccionado,0);return{date:o}},semanasMes:function(){console.log("Calculando semanasMes");var o=new Date(this.yearSeleccionado,parseInt(this.numeroMesSeleccionado),1).getDay();console.log("Dia semana inicio de mes: ".concat(o));var e=0===o?7:o,i=Math.floor(this.lengthMonthSeleccionado/7);console.log("".concat(i," semanas completas"));var n=this.lengthMonthSeleccionado-7*i;console.log("".concat(n," dias sobrantes"));var t=i;return e>1&&t++,(n+e>7||n>0&&1===e)&&t++,t}},methods:{iniciarSeleccionandoMes:function(){var o=this;this.seleccionandoMes=!0,this.$nextTick((function(){o.$refs.selectMes.click()}))},repetirEventosSemana:function(o){console.log("Se repetirán los eventos de la semana ".concat(o));var e=parseInt(prompt("¿Cuantas veces quieres repetir el horario de esta semana?",0));if(e<1||e>52)console.log("Valor de repeticiones inválido");else{var i=864e5,n=new Date(this.yearSeleccionado,parseInt(this.numeroMesSeleccionado),1).getDay();console.log("Primer dia mes: ".concat(n));var t=0===n?7:n,a=new Date(new Date(this.yearSeleccionado,parseInt(this.numeroMesSeleccionado),1).getTime()+7*i*o-(t-1)*i),s=new Date(a.getTime()+7*i);this.repetirEventosInterval(a,s,this.idParent?this.idParent:this.idUsuarioTarget,this.tipoParent?this.tipoParent:"usuario",this.idUsuarioTarget,e)}},repetirEventosInterval:function(o,e,i,n,t,a){var s=this;console.log("Se repetiran los eventos que están entre ".concat(o," y ").concat(e,", ").concat(a," veces")),this.$apollo.mutate({mutation:d()(ma()),variables:{idParent:this.idParent?this.idParent:this.idUsuarioTarget,tipoParent:this.tipoParent?this.tipoParent:"usuario",idUsuario:this.idUsuarioTarget,numRepeticiones:a,dateFrom:o,dateTo:e}}).then((function(){s.reloadEventosRelevantes(),alert("Operación completada")})).catch((function(o){console.log("Error: ".concat(o)),s.enviandoAccionIntervalo=!1}))},deleteEventosSemana:function(o){if(console.log("Se eliminaran los eventos de la semana ".concat(o)),confirm("¿Confirmar la eliminación de los eventos de esta semana? (Esta acción no puede deshacerse)")){var e=864e5,i=new Date(this.yearSeleccionado,parseInt(this.numeroMesSeleccionado),1).getDay();console.log("Primer dia mes: ".concat(i));var n=0===i?7:i;console.log("Primer dia mes corregido: ".concat(n));var t=new Date(new Date(this.yearSeleccionado,parseInt(this.numeroMesSeleccionado),1).getTime()+7*e*o-(n-1)*e),a=new Date(t.getTime()+7*e);this.deleteEventosInterval(t,a,this.idParent?this.idParent:this.idUsuarioTarget,this.tipoParent?this.tipoParent:"usuario",this.idUsuarioTarget)}},deleteEventosInterval:function(o,e,i,n,t){var a=this;console.log("Se eliminarán los eventos que están entre ".concat(o," y ").concat(e)),this.enviandoAccionIntervalo=!0,this.$apollo.mutate({mutation:d()(va()),variables:{idParent:i,tipoParent:n,idUsuario:t,dateFrom:o,dateTo:e}}).then((function(){a.reloadEventosRelevantes(),a.enviandoAccionIntervalo=!1,alert("Operación completada")})).catch((function(o){console.log("Error: ".concat(o)),a.enviandoAccionIntervalo=!1}))},reloadEventosRelevantes:hi()((function(){console.log("Reloading cantidades mes"),this.$apollo.queries.cantidadEventosRelevantesMes.refetch()}),1e3)},watch:{numeroMesSeleccionado:function(){this.seleccionandoMes=!1}}},fa=ha,ga=(i("7871"),Object(p["a"])(fa,lt,vt,!1,null,"abd7a930",null)),ba=ga.exports;function Na(){var o=Object(s["a"])(["\n          mutation($idNodo:ID!, $nuevoEstado: Boolean!){\n            setPublicitadoNodoSolidaridad(idNodo: $idNodo, nuevoEstado:$nuevoEstado){\n              id\n              publicitado\n            }\n          } \n        "]);return Na=function(){return o},o}var Aa={name:"NodoVistaLista",components:{IconoPersonaAutonomo:Dn,Loading:mo,RecursoExternoNodo:ut,Calendario:ba},props:{idNodoOver:String,tipoNodoOver:String,underNodoSeleccionado:Boolean,index:Number,usuarioResponsableAmplioNodoOver:Boolean,nodoSiendoArrastrado:String,esteNodo:Object,indiceNodosUnder:Object,idNodoSeleccionado:String,mostrarColoresCompletado:Boolean,mostrandoNodosCompletados:Boolean,verCompletados:Boolean,modoLista:String,descendienteUsuarioResponsable:Boolean,idsNodosNeedingFetchMore:{type:Array,default:function(){return[]}}},mixins:[Yn,Xn,Wn,Kn,ot],data:function(){return{grabbed:!1,grabAttempt:0,recibiendoArrastradoEn:null,mostrandoNodosUnder:!1,mostrando:null,montado:!1,mostrandoBotonesBarraSuperior:!1,creandoEvento:!1,settingPublicitado:!1}},methods:{desplegarIfTargetUnder:function(o){var e=this,i=!1;return(this.$refs.nodosRequeridos||[]).forEach((function(n){(n.desplegarIfTargetUnder(o)||n.esteNodo.id===o)&&(e.mostrandoNodosUnder=!0,i=!0)})),i},grabbing:function(){this.usuarioResponsableAmplioNodoOver&&(this.grabbed=!0)},movimientoDeArrastre:function(o){if(this.grabbed&&this.attemptToGrab(o),this.nodoSiendoArrastrado&&!this.siendoArrastrado&&this.usuarioAdministrador){var e=this.$el.getBoundingClientRect(),i=o.clientY-e.top,n=e.bottom-e.top,t=100*i/n,a=20,s=80;this.recibiendoArrastradoEn=t<a?"antes":t>s?"despues":"dentro"}},attemptToGrab:function(o){if(this.grabbed){var e=15,i=Math.abs(o.movementX)+Math.abs(o.movementY);this.grabAttempt+=i,this.grabAttempt>e&&!this.siendoArrastrado&&(this.$emit("inicioArrastre",{idNodoArrastrado:this.esteNodo.id,idNodoSource:this.idNodoOver,tipoNodoSource:this.tipoNodoOver}),this.grabbed=!1,this.grabAttempt=0)}},finalizarArrastre:function(){this.grabbed=!1,this.grabAttempt=0;var o={idNodoTarget:"dentro"===this.recibiendoArrastradoEn?this.esteNodo.id:this.idNodoOver,tipoNodoTarget:"dentro"===this.recibiendoArrastradoEn?"nodoSolidaridad":this.tipoNodoOver,index:"antes"===this.recibiendoArrastradoEn?this.index:"despues"===this.recibiendoArrastradoEn?this.index+1:this.esteNodo.vinculos.length};this.$emit("finDeArrastre",o)},afterCrearNodoUnder:function(o){this.mostrandoNodosUnder=!0,this.$emit("nodoSolidaridadCreado",o)},globalSetMostrarContenido:function(o,e){e?this.esteNodo[o]&&(this.esteNodo[o].length<1&&("descripcion"===o||"keywords"===o||"recursosExternos"===o)||(this.mostrando=o)):this.mostrando===o&&(this.mostrando=null),this.$refs.nodosRequeridos&&this.$refs.nodosRequeridos.length>0&&this.$refs.nodosRequeridos.forEach((function(i){return i.globalSetMostrarContenido(o,e)}))},iniciarCreacionEvento:function(){this.creandoEvento=!0},responderEventoCreado:function(){console.log("...")},responderEventoEliminado:function(){console.log("...")},togglePublicitado:function(){var o=this,e=!this.esteNodo.publicitado;console.log("Setting publicitado en ".concat(e)),this.settingPublicitado=!0,this.$apollo.mutate({mutation:d()(Na()),variables:{idNodo:this.esteNodo.id,nuevoEstado:e}}).then((function(){o.settingPublicitado=!1})).catch((function(e){console.log("Error: ".concat(e)),o.settingPublicitado=!1}))}},computed:{siendoArrastrado:function(){return this.nodoSiendoArrastrado===this.esteNodo.id},estiloRecibiendoArrastrado:function(){return"antes"===this.recibiendoArrastradoEn?{borderTop:"2px solid black"}:"despues"===this.recibiendoArrastradoEn?{borderBottom:"2px solid black"}:"dentro"===this.recibiendoArrastradoEn?{border:"2px solid black"}:{}},colorBarraSuperior:function(){var o="transparent";return this.seleccionado?o="var(--atlasNaranja)":this.underNodoSeleccionado&&(o="#ef72299c"),{backgroundColor:o}},seleccionado:function(){return this.idNodoSeleccionado&&this.esteNodo.id===this.idNodoSeleccionado},visible:function(){var o="completado"!=this.esteNodo.estadoDesarrollo||this.verCompletados;return o},children:function(){var o=this.indiceNodosUnder[this.esteNodo.id];return o&&o.nodosChildren||[]},requeridos:function(){var o=this.indiceNodosUnder[this.esteNodo.id];return o&&o.nodosRequeridos||[]}},watch:{seleccionado:function(o){o||(this.editandoNombre=!1)},mostrandoNodosUnder:function(o){o&&this.$emit("nodosRenderizados",this.esteNodo.vinculos.map((function(o){return o.idRef})))},nodoSiendoArrastrado:function(o){o||(this.recibiendoArrastradoEn=null)},creandoEvento:function(o){this.$refs.calendario.eventoSiendoCreado=o?{idParent:this.esteNodo.id,tipoParent:"nodoSolidaridad",tipoEvento:"eventoPersonal"}:null}},mounted:function(){this.montado=!0}},Ca=Aa,ya=(i("78d1"),i("488f"),Object(p["a"])(Ca,Ji,Hi,!1,null,"4c5f3b9a",null)),Ea=ya.exports;function wa(){var o=Object(s["a"])(["\n            mutation (\n              $idNodoRequerido: ID!\n              $idNodoSource: ID!\n              $tipoNodoSource: String!\n              $idNodoTarget: ID!\n              $tipoNodoTarget: String!\n              $index: Int\n            ) {\n              transferirRequerimentoBetweenNodosSolidaridad(\n                idNodoRequerido: $idNodoRequerido\n                idNodoSource: $idNodoSource\n                tipoNodoSource: $tipoNodoSource\n                idNodoTarget: $idNodoTarget\n                tipoNodoTarget: $tipoNodoTarget\n                index: $index\n              ) {\n                nodosModificados{\n                  ...fragNodoSolidaridad                \n                }\n                usuariosModificados{\n                  ...fragPersonaAtlas\n                }\n              }\n            }\n            ","\n            ","\n          "]);return wa=function(){return o},o}var xa={components:{NodoVistaLista:Ea},name:"ListaNodos",props:{usuarioResponsableAmplioNodoRoot:Boolean,idNodoSeleccionado:String,todosNodos:Array,verCompletados:Boolean,verAsumidos:Boolean,verVacios:Boolean,idNodoRoot:String,tipoNodoRoot:String,nodoRoot:Object,indiceNodosUnder:Object,modoLista:{type:String,default:"todo"},idsNodosNeedingFetchMore:{type:Array,default:function(){return[]}}},data:function(){return{idNodoEnArrastre:null,idNodoSourceArrastre:null,tipoNodoSourceArrastre:null}},methods:{guardarChildren:function(o){o.children=this.nodosTodos.filter((function(e){return e.nodoParent===o.id}))},desplegarCascadaHaciaNodo:function(o){this.$refs.nodosEnLista.forEach((function(e){e.desplegarIfTargetUnder(o)}))},scrollToNodo:function(o){var e=document.getElementById("nodoEnLista"+o),i=e.getBoundingClientRect().top-this.$el.getBoundingClientRect().top;this.$el.scrollTop=i},centrarEnItem:function(o){var e=this;this.desplegarCascadaHaciaNodo(o),this.$nextTick((function(){e.scrollToNodo(o),e.idNodoSeleccionado!=o&&e.$emit("nodoSeleccionado",o)}))},iniciarArrastre:function(o){var e=o.idNodoArrastrado,i=o.idNodoSource,n=o.tipoNodoSource;this.idNodoEnArrastre=e,this.idNodoSourceArrastre=i,this.tipoNodoSourceArrastre=n},finalizarArrastre:function(o){var e=this,i=o.idNodoTarget,n=o.tipoNodoTarget,t=o.index;if(this.idNodoEnArrastre&&this.tipoNodoSourceArrastre){var a={idNodoRequerido:this.idNodoEnArrastre,idNodoSource:this.idNodoSourceArrastre,tipoNodoSource:this.tipoNodoSourceArrastre,idNodoTarget:i,tipoNodoTarget:n,index:t};this.idNodoEnArrastre=null,this.tipoNodoSourceArrastre=null,this.$apollo.mutate({mutation:d()(wa(),xi,Ci),variables:a}).then((function(){e.$emit("nodoSeleccionado",a.idNodoRequerido)})).catch((function(o){console.log("Error: ".concat(o))}))}},toggleContenidoTodos:function(o){var e=o.contenido,i=o.estado;console.log("Setting en todos ".concat(e,". Mostrar: ").concat(i)),this.$refs.nodosEnLista.forEach((function(o){return o.globalSetMostrarContenido(e,i)}))}},computed:{nodosPrimerNivel:function(){var o=this,e=this.todosNodos.filter((function(e){return o.nodoRoot.vinculos.map((function(o){return o.idRef})).includes(e.id)})).sort((function(e,i){return o.nodoRoot.vinculos.findIndex((function(o){return o.idRef===e.id}))-o.nodoRoot.vinculos.findIndex((function(o){return o.idRef===i.id}))}));return e}},watch:{idNodoEnArrastre:function(o){o||(this.idNodoSourceArrastre=null,this.tipoNodoSourceArrastre=null)},nodosPrimerNivel:function(o){this.$emit("nodosRenderizados",o.map((function(o){return o.id})))}}},Pa=xa,Sa=(i("3567"),Object(p["a"])(Pa,Vi,Qi,!1,null,"56ca3b09",null)),Da=Sa.exports,Ia={components:{ListaNodos:Da,BuscadorNodos:zi,Loading:mo},name:"VentanaLista",props:{idNodoRoot:String,tipoNodoRoot:String,cerrable:Boolean},mixins:[Oi],data:function(){return{idNodoSeleccionado:null,listaSeleccionada:null,verCompletados:!0,modoLista:"todo"}},methods:{desplegarCascadaHaciaNodo:function(o){this.$refs.listaNodos.desplegarCascadaHaciaNodo(o)},updateInfoNodosEverRendered:function(o){var e,i=this,n=o.filter((function(o){return!i.infoNodosEverRendered.map((function(o){return o.id})).includes(o)})),t=n.map((function(o){return{id:o,tipo:"nodoSolidaridad"}}));(e=this.infoNodosEverRendered).push.apply(e,Object(to["a"])(t))}},computed:{nodoSeleccionado:function(){var o=this;return this.idNodoSeleccionado?this.todosNodos.find((function(e){return e.id===o.idNodoSeleccionado})):null},descendientesNodoSeleccionado:function(){if(!this.nodoSeleccionado)return null;var o=5,e=0,i=[this.nodoSeleccionado.id],n=[];while(i.length>0&&e<o){console.log("Descendientes"),e++;var t=this.todosNodos.filter((function(o){return i.includes(o.id)})),a=[];t.forEach((function(o){o.vinculos.filter((function(o){return"requiere"===o.tipo})).map((function(o){return o.idRef})).forEach((function(o){var e=a.indexOf(o);-1===e&&a.push(o)}))})),n=n.concat(a),i=a}return n},usuarioResponsableAmplioNodoRoot:function(){return!!(this.usuarioLogeado&&this.usuario&&this.usuario.id&&this.nodoRoot)&&(this.nodoRoot.responsablesAmplio&&this.nodoRoot.responsablesAmplio.includes(this.usuario.id))}},watch:{nodoRoot:function(){if(this.nodoRoot){var o={id:this.nodoRoot.id,tipo:this.nodoRoot.__typename.charAt(0).toLowerCase()+this.nodoRoot.__typename.slice(1)};this.infoNodosEverRendered.push(o)}}}},Ra=Ia,ka=(i("e376"),Object(p["a"])(Ra,vi,mi,!1,null,"c163ef22",null)),Ma=ka.exports,ja=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"organizadorHorarioSemanal",on:{click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:void(o.idBloqueMenuContextual=null)}}},[o.bloqueEnVentana?n("ventana-bloque-horario",{attrs:{esteBloque:o.bloqueEnVentana},on:{cerrarme:function(e){o.idBloqueEnVentana=null}}}):o._e(),n("div",{staticClass:"barraComponente"},[o._v(" Organizador de horario "),n("div",{staticClass:"contenedorControles",staticStyle:{"margin-left":"auto"}},[n("div",{staticClass:"boton"},[n("img",{attrs:{src:i("fbca"),alt:"configrurar"},on:{click:function(e){e.stopPropagation(),o.mostrandoConfiguracion=!o.mostrandoConfiguracion}}})])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoConfiguracion,expression:"mostrandoConfiguracion"}],staticClass:"zonaConfiguracion"},[n("div",{staticClass:"barraSeccion"},[o._v("Configuración.")]),n("div",{staticClass:"contenedorBloquesConfiguracion"},[n("div",{staticClass:"bloqueConfiguracion",attrs:{id:"configuracionAdministradoresEspacios"}},[n("div",{staticClass:"campoConfiguracion"},[n("label",{attrs:{for:"checkAdministradorYo"}},[o._v("Mostrar mis bloques")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.configuracionAdministradoresEspacios,expression:"configuracionAdministradoresEspacios"}],attrs:{type:"checkbox",name:"checkAdministradorYo",value:"yo",id:""},domProps:{checked:Array.isArray(o.configuracionAdministradoresEspacios)?o._i(o.configuracionAdministradoresEspacios,"yo")>-1:o.configuracionAdministradoresEspacios},on:{change:function(e){var i=o.configuracionAdministradoresEspacios,n=e.target,t=!!n.checked;if(Array.isArray(i)){var a="yo",s=o._i(i,a);n.checked?s<0&&(o.configuracionAdministradoresEspacios=i.concat([a])):s>-1&&(o.configuracionAdministradoresEspacios=i.slice(0,s).concat(i.slice(s+1)))}else o.configuracionAdministradoresEspacios=t}}})]),n("div",{staticClass:"campoConfiguracion"},[n("label",{attrs:{for:"checkAdministradorYo"}},[o._v("Mostrar bloques de profes")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.configuracionAdministradoresEspacios,expression:"configuracionAdministradoresEspacios"}],attrs:{type:"checkbox",value:"profesorxs",id:""},domProps:{checked:Array.isArray(o.configuracionAdministradoresEspacios)?o._i(o.configuracionAdministradoresEspacios,"profesorxs")>-1:o.configuracionAdministradoresEspacios},on:{change:function(e){var i=o.configuracionAdministradoresEspacios,n=e.target,t=!!n.checked;if(Array.isArray(i)){var a="profesorxs",s=o._i(i,a);n.checked?s<0&&(o.configuracionAdministradoresEspacios=i.concat([a])):s>-1&&(o.configuracionAdministradoresEspacios=i.slice(0,s).concat(i.slice(s+1)))}else o.configuracionAdministradoresEspacios=t}}})])]),n("div",{staticClass:"bloqueConfiguracion"},[n("div",{staticClass:"campoConfiguracion"},[n("label",{attrs:{for:"checkMostrarBloquesNiñosPequeños"}},[o._v("Mostrar bloques dirigidos a niñxs pequeñxs")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.mostrarBloquesParaChiquis,expression:"mostrarBloquesParaChiquis"}],ref:"checkMostrarBloquesNiñosPequeños",attrs:{type:"checkbox",name:"checkMostrarBloquesNiñosPequeños",id:"checkMostrarBloquesNiñosPequeños"},domProps:{checked:Array.isArray(o.mostrarBloquesParaChiquis)?o._i(o.mostrarBloquesParaChiquis,null)>-1:o.mostrarBloquesParaChiquis},on:{change:function(e){var i=o.mostrarBloquesParaChiquis,n=e.target,t=!!n.checked;if(Array.isArray(i)){var a=null,s=o._i(i,a);n.checked?s<0&&(o.mostrarBloquesParaChiquis=i.concat([a])):s>-1&&(o.mostrarBloquesParaChiquis=i.slice(0,s).concat(i.slice(s+1)))}else o.mostrarBloquesParaChiquis=t}}})]),n("div",{staticClass:"campoConfiguracion"},[n("label",{attrs:{for:"checkMostrarBloquesTodos"}},[o._v("Mostrar bloques dirigidos a todxs")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.mostrarBloquesParaTodos,expression:"mostrarBloquesParaTodos"}],ref:"checkMostrarBloquesTodos",attrs:{type:"checkbox",name:"checkMostrarBloquesTodos",id:"checkMostrarBloquesTodos"},domProps:{checked:Array.isArray(o.mostrarBloquesParaTodos)?o._i(o.mostrarBloquesParaTodos,null)>-1:o.mostrarBloquesParaTodos},on:{change:function(e){var i=o.mostrarBloquesParaTodos,n=e.target,t=!!n.checked;if(Array.isArray(i)){var a=null,s=o._i(i,a);n.checked?s<0&&(o.mostrarBloquesParaTodos=i.concat([a])):s>-1&&(o.mostrarBloquesParaTodos=i.slice(0,s).concat(i.slice(s+1)))}else o.mostrarBloquesParaTodos=t}}})])]),n("div",{staticClass:"bloqueConfiguracion"},[n("div",{staticClass:"campoConfiguracion"},[n("label",{attrs:{for:"checkMostrarCantidadAsistentes"}},[o._v("Mostrar cantidad de asistentes de cada bloque")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.mostrarCantidadAsistentes,expression:"mostrarCantidadAsistentes"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(o.mostrarCantidadAsistentes)?o._i(o.mostrarCantidadAsistentes,null)>-1:o.mostrarCantidadAsistentes},on:{change:function(e){var i=o.mostrarCantidadAsistentes,n=e.target,t=!!n.checked;if(Array.isArray(i)){var a=null,s=o._i(i,a);n.checked?s<0&&(o.mostrarCantidadAsistentes=i.concat([a])):s>-1&&(o.mostrarCantidadAsistentes=i.slice(0,s).concat(i.slice(s+1)))}else o.mostrarCantidadAsistentes=t}}})])])])]),o._l(o.usuariosSeleccionables,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],key:e.id,staticClass:"zonaCheckAdministradorEspacios"},[n("div",{staticClass:"nombreProfe"},[o._v(o._s(e.nombres))]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.idsUsuariosSeleccionados,expression:"idsUsuariosSeleccionados"}],ref:"checkProfe",refInFor:!0,attrs:{type:"checkbox",id:"checkProfe"},domProps:{value:e.id,checked:Array.isArray(o.idsUsuariosSeleccionados)?o._i(o.idsUsuariosSeleccionados,e.id)>-1:o.idsUsuariosSeleccionados},on:{change:function(i){var n=o.idsUsuariosSeleccionados,t=i.target,a=!!t.checked;if(Array.isArray(n)){var s=e.id,r=o._i(n,s);t.checked?r<0&&(o.idsUsuariosSeleccionados=n.concat([s])):r>-1&&(o.idsUsuariosSeleccionados=n.slice(0,r).concat(n.slice(r+1)))}else o.idsUsuariosSeleccionados=a}}})])})),n("div",{attrs:{id:"contenedorDias"}},o._l(o.diasSemana,(function(e,i){return n("dia-organizador-horario",{key:e,attrs:{nombreDia:e,numeroDia:i,factorZoom:o.factorZoom,offset:o.offset,idEspacioCrear:o.idEspacioCrear,bloquesHorario:o.bloquesActivos.filter((function(o){return o.diaSemana===i})),idBloqueMenuContextual:o.idBloqueMenuContextual,idBloqueSeleccionado:o.idBloqueSeleccionado,mostrarCantidadAsistentes:o.mostrarCantidadAsistentes},on:{bloqueSeleccionado:function(e){o.idBloqueSeleccionado=o.idBloqueSeleccionado===e?null:e},bloqueHorarioCreado:o.addBloqueHorarioCache,menuContextualBloque:function(e){o.idBloqueMenuContextual=e},bloqueEliminado:o.eliminarBloqueHorarioCache,expandirBloque:o.setIdBloqueVentana}})})),1)],2)},$a=[],Oa=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"diaOrganizadorHorario"},[i("div",{attrs:{id:"nombreDia"}},[o._v(" "+o._s(o.nombreDia)+" ")]),i("div",{ref:"zonaBloques",style:[{width:Math.round(o.anchoDiaMinutos*o.factorZoom)+"px",height:o.maxFila*(o.heightBloques+6*o.gapFilas)+"px"}],attrs:{id:"zonaBloques"},on:{dblclick:function(e){return e.target!==e.currentTarget?null:o.iniciarCreacionBloqueHorario(e)},click:function(e){if(e.target!==e.currentTarget)return null;o.bloqueCreacionHorario=null}}},[o.bloqueCreacionHorario?i("bloque-creacion-horario",{staticStyle:{"z-index":"100000"},style:[{left:(o.bloqueCreacionHorario.millisInicio/6e4-o.offset)*o.factorZoom+"px",top:1*o.gapFilas-5+"px"}],attrs:{esteBloque:o.bloqueCreacionHorario},on:{espacioSeleccionado:o.crearBloqueHorario}}):o._e(),o._l(o.bloquesHorarioEnriquecidos,(function(e){return i("bloque-horario",{key:e.id,style:[{left:(e.millisInicio/6e4-o.offset)*o.factorZoom+"px",top:1*o.gapFilas+(e.fila-1)*(o.heightBloques+o.gapFilas)+"px",zIndex:e.id===o.idBloqueMenuContextual?1e4:e.id===o.idBloqueSeleccionado?1e3:100-e.fila}],attrs:{esteBloque:e,factorZoom:o.factorZoom,idBloqueMenuContextual:o.idBloqueMenuContextual,idBloqueSeleccionado:o.idBloqueSeleccionado,mostrarCantidadAsistentes:o.mostrarCantidadAsistentes},on:{meElimine:function(i){return o.$emit("bloqueEliminado",e.id)},menuContextual:function(e){return o.$emit("menuContextualBloque",e)},seleccionado:function(i){return o.$emit("bloqueSeleccionado",e.id)},expandirme:function(i){return o.$emit("expandirBloque",e.id)}}})}))],2),i("div",{attrs:{id:"barraHoras"}},o._l(o.minutosRelevantes,(function(e){return i("div",{key:"minuto"+e,staticClass:"marcaTiempo",style:[{left:Math.round((e-o.offset)*o.factorZoom)+"px"}]},[o._v(" "+o._s(o.toTiempoFormateado(e))+" ")])})),0)])},qa=[],Ta=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"bloqueHorario",class:{seleccionado:o.seleccionado,deshabilitado:o.eliminandose||o.settingTiempos,usuarioAsiste:o.usuarioAsiste},style:[{width:o.duracionMinutos*o.factorZoom+"px",backgroundColor:o.miColor}],on:{contextmenu:function(e){return e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),e.stopPropagation(),o.$emit("menuContextual",o.esteBloque.id))},dblclick:o.toggleDuracionBloque,click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.$emit("seleccionado")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"boton",attrs:{id:"botonOpciones"},on:{click:function(e){return e.stopPropagation(),o.$emit("menuContextual",o.esteBloque.id)}}},[n("img",{attrs:{src:i("b444"),alt:"Opciones"}})]),n("div",{style:[o.colorBarraTag],attrs:{id:"barraTag"}},[n("div",{attrs:{id:"nombre"}},[o.esteBloque.paraChiquis?n("img",{staticStyle:{height:"15px"},attrs:{src:i("92d5"),alt:"bebé"}}):o._e(),o._v(o._s(o.esteBloque.nombreEspacio)+" ")])]),o.esteBloque.idsParticipantesConstantes&&o.esteBloque.idsParticipantesConstantes.length>0&&o.mostrarCantidadAsistentes?n("div",{directives:[{name:"show",rawName:"v-show",value:!o.seleccionado,expression:"!seleccionado"}],attrs:{id:"cantidadAsistentes"}},[o._v(" Asistentes: "+o._s(o.esteBloque.idsParticipantesConstantes.length)+" ")]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"boton",staticStyle:{margin:"0px auto"},attrs:{id:"botonExpandir"},on:{click:function(e){return e.stopPropagation(),o.expandir(e)}}},[n("img",{attrs:{src:i("4030"),alt:"expandir"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.eliminandose||o.settingTiempos,expression:"eliminandose || settingTiempos"}]}),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuContextual,expression:"mostrandoMenuContextual"}],class:{seleccionado:o.seleccionado},attrs:{id:"menuContextual"},on:{click:function(o){o.stopPropagation()},dblclick:function(o){o.stopPropagation()}}},[o.usuarioAdministrador||o.usuarioSuperadministrador?n("div",{staticClass:"itemMenuContextual",on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e(),n("div",{staticClass:"itemMenuContextual",on:{click:function(e){return o.$refs.inputColor.click()}}},[o._v(" Seleccionar color ")]),o.usuarioAdministrador||o.usuarioSuperadministrador?n("div",{staticClass:"itemMenuContextual",on:{click:o.iniciarSetHoraInicio}},[o._v(" Fijar hora de inicio ")]):o._e(),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoHoraInicio,expression:"editandoHoraInicio"}],ref:"inputHoraInicio",attrs:{type:"time",id:"inputHoraInicio"},domProps:{value:o.tiempoInicioFormateado},on:{change:o.setHoraInicio}}),o.usuarioAdministrador||o.usuarioSuperadministrador?n("div",{staticClass:"itemMenuContextual",on:{click:o.iniciarSetHoraFinal}},[o._v(" Fijar hora de finalización ")]):o._e(),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoHoraFinal,expression:"editandoHoraFinal"}],ref:"inputHoraFinal",attrs:{type:"time",id:"inputHoraFinal"},domProps:{value:o.tiempoFinalFormateado},on:{change:o.setHoraFinal}}),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputColor",attrs:{type:"color",id:"inputColor"},on:{change:o.setColorEspacio}})])],1)},Ba=[];function Ua(){var o=Object(s["a"])(["\n            mutation (\n              $idEspacio: ID!\n              $idIteracion: ID!\n              $millisInicio: Int!\n              $millisFinal: Int!\n            ) {\n              setTiemposIteracionSemanalEspacio(\n                idEspacio: $idEspacio\n                idIteracion: $idIteracion\n                millisInicio: $millisInicio\n                millisFinal: $millisFinal\n              ) {\n                id\n                millisInicio\n                millisFinal\n              }\n            }\n          "]);return Ua=function(){return o},o}function Fa(){var o=Object(s["a"])(["\n            mutation ($idEspacio: ID!, $idIteracion: ID!) {\n              eliminarIteracionSemanalEspacio(\n                idEspacio: $idEspacio\n                idIteracion: $idIteracion\n              )\n            }\n          "]);return Fa=function(){return o},o}var _a={components:{Loading:mo},name:"BloqueHorario",props:{esteBloque:Object,idBloqueSeleccionado:String,factorZoom:Number,idBloqueMenuContextual:String,mostrarCantidadAsistentes:Boolean},data:function(){var o=localStorage.getItem("coloresEspacios")?JSON.parse(localStorage.getItem("coloresEspacios")):[];return{coloresEspacios:o,eliminandose:!1,settingTiempos:!1,mostrarVentana:!1,editandoHoraInicio:!1,editandoHoraFinal:!1}},computed:{duracionMinutos:function(){return Math.round((this.esteBloque.millisFinal-this.esteBloque.millisInicio)/6e4)},mostrandoMenuContextual:function(){return this.idBloqueMenuContextual===this.esteBloque.id},miColor:function(){var o=this;if(!this.coloresEspacios)return"#a04d4d";var e=this.coloresEspacios.findIndex((function(e){return e[0]===o.esteBloque.idEspacio}));return e>-1?this.coloresEspacios[e][1]:"#a04d4d"},seleccionado:function(){return this.idBloqueSeleccionado===this.esteBloque.id},usuarioAdministrador:function(){return this.usuario.id===this.esteBloque.idAdministradorEspacio},minutosInicio:function(){return Math.round(this.esteBloque.millisInicio/6e4)},minutosFinal:function(){return Math.round(this.esteBloque.millisFinal/6e4)},tiempoInicioFormateado:function(){return this.toTiempoFormateado(this.minutosInicio)},tiempoFinalFormateado:function(){return this.toTiempoFormateado(this.minutosFinal)},usuarioAsiste:function(){return this.usuarioAdministrador||this.esteBloque.idsParticipantesConstantes.includes(this.usuario.id)},colorBarraTag:function(){var o="rgb(182 182 182)";return this.usuarioAsiste&&(o="var(--calendarioUsuario)"),this.usuarioAdministrador&&(o="var(--calendarioUsuarioStrong)"),{backgroundColor:o}}},methods:{setColorEspacio:function(){var o=this,e=this.$refs.inputColor;console.log("Setting color en ".concat(e.value," para el espacio ").concat(this.esteBloque.nombreEspacio," con id ").concat(this.esteBloque.idEspacio));var i=this.coloresEspacios.findIndex((function(e){return e[0]===o.esteBloque.idEspacio}));i>-1?this.$set(this.coloresEspacios,i,[this.esteBloque.idEspacio,e.value]):this.coloresEspacios.push([this.esteBloque.idEspacio,e.value]),localStorage.setItem("coloresEspacios",JSON.stringify(this.coloresEspacios))},eliminarse:function(){var o=this;this.usuarioAdministrador||this.usuarioSuperadministrador?(this.eliminandose=!0,this.$apollo.mutate({mutation:d()(Fa()),variables:{idEspacio:this.esteBloque.idEspacio,idIteracion:this.esteBloque.id}}).then((function(){o.eliminandose=!1,o.$emit("meElimine")})).catch((function(e){console.log("Error: "+e),o.eliminandose=!1}))):console.log("No autorizado")},toggleDuracionBloque:function(){console.log("Toggleando bloque que tiene minutosInicio ".concat(this.minutosInicio," y minutosFinal ").concat(this.minutosFinal)),this.usuarioAdministrador||this.usuarioSuperadministrador?480===this.minutosInicio?600===this.minutosFinal?this.setMinutos(480,540):this.setMinutos(480,600):540===this.minutosInicio?this.setMinutos(480,600):630===this.minutosInicio?750===this.minutosFinal?this.setMinutos(630,690):this.setMinutos(630,750):690===this.minutosInicio?this.setMinutos(630,750):810===this.minutosInicio?930===this.minutosFinal?this.setMinutos(810,870):this.setMinutos(810,930):870===this.minutosInicio?this.setMinutos(870,930):console.log("No se pudo togglear el bloque"):console.log("No autorizado")},setMinutos:function(o,e){var i=this,n=6e4*o,t=6e4*e;this.settingTiempos=!0,this.$apollo.mutate({mutation:d()(Ua()),variables:{idEspacio:this.esteBloque.idEspacio,idIteracion:this.esteBloque.id,millisInicio:n,millisFinal:t}}).then((function(){i.settingTiempos=!1})).catch((function(o){console.log("Error: "+o),i.settingTiempos=!1}))},expandir:function(){this.$emit("expandirme")},iniciarSetHoraInicio:function(){this.$refs.inputHoraInicio.value=this.toTiempoFormateado(this.minutosInicio),this.editandoHoraInicio=!0,this.editandoHoraFinal=!1},iniciarSetHoraFinal:function(){this.$refs.inputHoraFinal.value=this.toTiempoFormateado(this.minutosFinal),this.editandoHoraFinal=!0,this.editandoHoraInicio=!1},toTiempoFormateado:function(o){var e=Math.floor(o/60);String(e).length<2&&(e="0"+e);var i=String(Math.round(o-60*e));return i.length<2&&(i="0"+i),e+":"+i},setHoraInicio:function(){console.log("Setting hora inicio");var o=this.$refs.inputHoraInicio.value.split(":"),e=parseInt(o[0]),i=parseInt(o[1]),n=60*e+i;console.log("Nuevo minutos inicio: "+n),this.setMinutos(n,this.minutosFinal)},setHoraFinal:function(){console.log("Setting hora final");var o=this.$refs.inputHoraFinal.value.split(":"),e=parseInt(o[0]),i=parseInt(o[1]),n=60*e+i;console.log("Nuevo minutos final: "+n),this.setMinutos(this.minutosInicio,n)}}},La=_a,za=(i("47ef"),Object(p["a"])(La,Ta,Ba,!1,null,"0a52eafe",null)),Va=za.exports,Qa=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"bloqueCreacionHorario"},[i("select",{directives:[{name:"model",rawName:"v-model",value:o.idEspacioSeleccionado,expression:"idEspacioSeleccionado"}],ref:"selectEspacio",attrs:{name:"selectEspacio",id:"selectEspacio"},on:{change:[function(e){var i=Array.prototype.filter.call(e.target.options,(function(o){return o.selected})).map((function(o){var e="_value"in o?o._value:o.value;return e}));o.idEspacioSeleccionado=e.target.multiple?i:i[0]},function(e){return o.$emit("espacioSeleccionado",e.target.value)}]}},[i("option",{attrs:{value:"null",disabled:""}},[o._v("Seleccionar un espacio")]),o._l(o.espaciosControladosUsuario,(function(e){return i("option",{key:e.id,domProps:{value:e.id}},[o._v(" "+o._s(e.nombre)+" ")])}))],2)])},Ja=[];function Ha(){var o=Object(s["a"])(["\n  fragment fragEspacio on Espacio {\n    id\n    nombre\n    descripcion\n    idAdministrador\n    paraChiquis\n  }\n"]);return Ha=function(){return o},o}var Za=d()(Ha());function Ga(){var o=Object(s["a"])(["\n        query {\n          espaciosControladosUsuario {\n            ...fragEspacio\n          }\n        }\n        ","\n      "]);return Ga=function(){return o},o}var Ka={name:"bloqueCreacionHorario",apollo:{espaciosControladosUsuario:{query:d()(Ga(),Za)}},props:{esteBloque:Object},data:function(){return{idEspacioSeleccionado:null}},methods:{iniciarCreacion:function(){}},mounted:function(){this.$refs.selectEspacio.click()}},Ya=Ka,Wa=(i("2bb8"),Object(p["a"])(Ya,Qa,Ja,!1,null,null,null)),Xa=Wa.exports;function os(){var o=Object(s["a"])(["\n            mutation (\n              $idEspacio: ID!\n              $millisInicio: Int!\n              $diaSemana: Int!\n              $millisFinal: Int!\n            ) {\n              crearBloqueHorario(\n                idEspacio: $idEspacio\n                millisInicio: $millisInicio\n                diaSemana: $diaSemana\n                millisFinal: $millisFinal\n              ) {\n                ...fragBloqueHorario\n              }\n            }\n            ","\n          "]);return os=function(){return o},o}function es(){var o=Object(s["a"])(["\n  fragment fragBloqueHorario on IteracionSemanalEspacio {\n    id\n    millisInicio\n    millisFinal\n    idsParticipantesConstantes\n    diaSemana\n    nombreEspacio\n    idAdministradorEspacio\n    idEspacio\n    paraChiquis\n  }\n"]);return es=function(){return o},o}var is=d()(es()),ns={components:{BloqueHorario:Va,BloqueCreacionHorario:Xa},name:"DiaOrganizadorHorario",props:{mostrarCantidadAsistentes:Boolean,nombreDia:String,numeroDia:Number,idEspacioCrear:String,idBloqueSeleccionado:String,bloquesHorario:Array,idBloqueMenuContextual:String,factorZoom:{type:Number,default:function(){return 1}},offset:Number},data:function(){return{minutosRelevantesBase:[480,540,600,630,750,810,870,930],creandoBloqueHorario:!1,anchoDiaMinutos:490,heightBloques:100,gapFilas:10,bloqueCreacionHorario:null}},computed:{minutosRelevantes:function(){return this.minutosRelevantesBase},bloquesHorarioPriorizados:function(){var o=this,e=Object(to["a"])(this.bloquesHorario).sort((function(e,i){var n=0;return e.idAdministradorEspacio===o.usuario.id&&n++,i.idAdministradorEspacio===o.usuario.id&&n--,-n}));return e},bloquesHorarioEnriquecidos:function(){for(var o=Object(to["a"])(this.bloquesHorarioPriorizados.map((function(o){return Object(M["a"])(Object(M["a"])({},o),{},{fila:0})}))),e=0;e<o.length;e++)for(var i=o[e],n=e;n>=0;n--){var t=o[n],a=t.millisInicio>=i.millisInicio&&t.millisInicio<i.millisFinal||t.millisFinal>i.millisInicio&&t.millisFinal<=i.millisFinal||t.millisInicio<=i.millisInicio&&t.millisFinal>=i.millisFinal;if(a&&t.fila>=i.fila){var s=t.fila+1;i.fila=s}}return o},maxFila:function(){var o=this.bloquesHorarioEnriquecidos.reduce((function(o,e){return e.fila>o?e.fila:o}),0);return o}},methods:{toTiempoFormateado:function(o){var e=Math.floor(o/60);String(e).length<2&&(e="0"+e);var i=String(Math.round(o-60*e));return i.length<2&&(i="0"+i),e+":"+i},mostrarCalculoMinutos:function(){},iniciarCreacionBloqueHorario:function(o){var e=this.$refs.zonaBloques.getBoundingClientRect(),i=o.clientX,n=i-e.left,t=this.anchoDiaMinutos/e.width*n+this.offset;console.log("Creando bloque de horario en "+this.toTiempoFormateado(t));var a=t,s=a+60;if(t>=480&&t<540)a=480,s=540;else if(t>=540&&t<600)a=540,s=600;else if(t>=630&&t<750)a=630,s=750;else if(t>=810&&t<870)a=810,s=870;else{if(!(t>=870&&t<930))return void console.log("En zona no considerada");a=870,s=930}console.log("Corregido a ".concat(this.toTiempoFormateado(a)));var r=6e4*a,d=6e4*s;this.bloqueCreacionHorario={millisInicio:r,millisFinal:d}},crearBloqueHorario:function(o){var e=this;this.idEspacioCrear&&this.bloqueCreacionHorario&&(this.creandoBloqueHorario=!0,this.$apollo.mutate({mutation:d()(os(),is),variables:{idEspacio:o,millisInicio:this.bloqueCreacionHorario.millisInicio,millisFinal:this.bloqueCreacionHorario.millisFinal,diaSemana:this.numeroDia}}).then((function(o){var i=o.data.crearBloqueHorario;e.creandoBloqueHorario=!1,e.$emit("bloqueHorarioCreado",i),e.bloqueCreacionHorario=null})).catch((function(o){console.log("Error: "+o),e.creandoBloqueHorario=!1})))}}},ts=ns,as=(i("04e4"),Object(p["a"])(ts,Oa,qa,!1,null,"5311fb6b",null)),ss=as.exports,rs=i("21df"),ds=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanaBloqueHorario",on:{click:function(e){o.idPersonaMenuCx=null}}},[n("div",{attrs:{id:"fondoGris"},on:{click:function(e){return e.target!==e.currentTarget?null:(e.stopPropagation(),o.$emit("cerrarme"))}}}),n("div",{style:[{backgroundColor:o.miColor}],attrs:{id:"laPropiaVentana"}},[n("div",{attrs:{id:"titulo"}},[o._v(" "+o._s(o.esteBloque.nombreEspacio)+" ")]),n("div",{attrs:{id:"infoBasica"}},[n("div",{staticClass:"info"},[o._v(" "+o._s(o.diasSemana[o.esteBloque.diaSemana])+". "+o._s(o.toTiempoFormateado(o.minutosInicio))+" - "+o._s(o.toTiempoFormateado(o.minutosFinal))+" ")])]),n("div",{staticClass:"seccionListaUsuarios"},[o._m(0),n("div",{staticClass:"listaPersonas"},[n("icono-persona-autonomo",{attrs:{idPersona:o.esteBloque.idAdministradorEspacio}})],1)]),n("div",{staticClass:"seccionListaUsuarios"},[n("div",{staticClass:"barraListaUsuarios"},[n("div",{staticClass:"nombreListaUsuarios"},[o._v("Asisten")]),n("div",{staticClass:"contenedorControles"},[o.usuarioSuperadministrador||o.usuarioAdministrador?n("div",{staticClass:"boton",on:{click:o.iniciarAdicionAsistente}},[n("img",{attrs:{src:i("341b"),alt:"Agregar"}})]):o._e()])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.mostrandoBuscadorAsistentes,expression:"!mostrandoBuscadorAsistentes"}],staticClass:"listaPersonas"},o._l(o.idsAsistentes,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:e===o.idPersonaSeleccionado,opcionesMenuCx:o.opcionesAsistentes,menuContextual:o.idPersonaMenuCx===e},on:{click:function(i){i.stopPropagation(),o.idPersonaSeleccionado=o.idPersonaSeleccionado===e?null:e},remover:function(i){return o.removerAsistente(e)}},nativeOn:{contextmenu:function(i){i.stopPropagation(),i.preventDefault(),o.idPersonaMenuCx=e}}})})),1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoBuscadorAsistentes,expression:"mostrandoBuscadorAsistentes"}],attrs:{id:"zonaAdicionarAsistente"}},[n("div",{staticClass:"zonaInformacion",staticStyle:{display:"flex"}},[n("div",{staticClass:"informacion",staticStyle:{display:"flex"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.participantesCasaMaestraVida.loading,expression:"$apollo.queries.participantesCasaMaestraVida.loading"}]}),o._v(" Adicionando asistentes ")],1),n("div",{staticClass:"contenedorControles",staticStyle:{"margin-left":"auto"}},[n("div",{staticClass:"boton",on:{click:function(e){o.mostrandoBuscadorAsistentes=!1}}},[n("img",{attrs:{src:i("7511"),alt:"Salir"}})])])]),n("div",{class:{deshabilitado:o.$apollo.queries.participantesCasaMaestraVida.loading},staticStyle:{width:"100%"},attrs:{id:"zonaInputBuscador"}},[n("input",{ref:"inputTextoBuscador",attrs:{type:"text",id:"inputTextoBuscador",placeholder:"buscar"},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.setTextoBusqueda(e)}}})]),n("div",{staticClass:"listaPersonas",class:{deshabilitado:o.addingAsistente||o.$apollo.queries.participantesCasaMaestraVida.loading}},o._l(o.idsPersonasAdicionablesOrdenadas,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:e===o.idPersonaSeleccionado},on:{click:function(i){i.stopPropagation(),o.idPersonaSeleccionado=o.idPersonaSeleccionado===e?null:e}},nativeOn:{dblclick:function(i){return i.stopPropagation(),o.addComoAsistente(e)}}})})),1)])])])])},cs=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraListaUsuarios"},[i("div",{staticClass:"nombreListaUsuarios"},[o._v("Coordina")])])}];function us(){var o=Object(s["a"])(["\n            mutation ($idEspacio: ID!, $idIteracion: ID!, $idAsistente: ID!) {\n              removeAsistenteIteracionSemanalEspacio(\n                idEspacio: $idEspacio\n                idIteracion: $idIteracion\n                idAsistente: $idAsistente\n              ) {\n                id\n                idsParticipantesConstantes\n              }\n            }\n          "]);return us=function(){return o},o}function ls(){var o=Object(s["a"])(["\n            mutation ($idEspacio: ID!, $idIteracion: ID!, $idAsistente: ID!) {\n              addAsistenteIteracionSemanalEspacio(\n                idEspacio: $idEspacio\n                idIteracion: $idIteracion\n                idAsistente: $idAsistente\n              ) {\n                id\n                idsParticipantesConstantes\n              }\n            }\n          "]);return ls=function(){return o},o}function vs(){var o=Object(s["a"])(["\n        query {\n          participantesCasaMaestraVida {\n            id\n            nombres\n            apellidos\n          }\n        }\n      "]);return vs=function(){return o},o}var ms=i("d63f"),ps=["Lunes","Martes","Miércoles","Jueves","Viernes","Sábado","Domingo"],hs={components:{IconoPersonaAutonomo:Dn,Loading:mo},name:"VentanaBloqueHorario",props:{esteBloque:Object,miColor:String},apollo:{participantesCasaMaestraVida:{query:d()(vs())}},data:function(){return{participantesCasaMaestraVida:[],idPersonaSeleccionado:null,idPersonaMenuCx:null,mostrandoBuscadorAsistentes:!1,textoBusqueda:"",versionBusqueda:0,addingAsistente:!1,opcionesAsistentes:[{textoVisible:"Remover",evento:"remover"}],diasSemana:ps}},computed:{idsAsistentes:function(){return this.esteBloque.idsParticipantesConstantes},personasAdicionables:function(){var o=this;return this.participantesCasaMaestraVida.filter((function(e){return!o.esteBloque.idsParticipantesConstantes.includes(e.id)}))},idsPersonasAdicionables:function(){return this.personasAdicionables.map((function(o){return o.id}))},personasAdicionablesOrdenadas:function(){var o=this.versionBusqueda;if(!this.textoBusqueda||this.textoBusqueda.length<=2)return this.personasAdicionables;var e=this.textoBusqueda;if(console.log("Version "+o),!(this.versionBusqueda<0))return Object(to["a"])(this.personasAdicionables).sort((function(o,i){var n=ms.compareTwoStrings(i.nombres+i.apellidos,e)-ms.compareTwoStrings(o.nombres+o.apellidos,e);return n}));console.log("Error desconocido")},idsPersonasAdicionablesOrdenadas:function(){return this.personasAdicionablesOrdenadas.map((function(o){return o.id}))},usuarioAdministrador:function(){return this.esteBloque.idAdministradorEspacio===this.usuario.id},minutosInicio:function(){return Math.round(this.esteBloque.millisInicio/6e4)},minutosFinal:function(){return Math.round(this.esteBloque.millisFinal/6e4)}},methods:{iniciarAdicionAsistente:function(){this.mostrandoBuscadorAsistentes=!0},setTextoBusqueda:function(){var o=this.$refs.inputTextoBuscador.value;this.textoBusqueda=o,this.versionBusqueda++},addComoAsistente:function(o){var e=this;(this.usuarioAdministrador||this.usuarioSuperadministrador)&&(this.addingAsistente=!0,this.$apollo.mutate({mutation:d()(ls()),variables:{idEspacio:this.esteBloque.idEspacio,idIteracion:this.esteBloque.id,idAsistente:o}}).then((function(){e.addingAsistente=!1})).catch((function(o){e.addingAsistente=!1,console.log("Error ".concat(o))})))},removerAsistente:function(o){var e=this;(this.usuarioAdministrador||this.usuarioSuperadministrador)&&(this.removingAsistente=!0,this.$apollo.mutate({mutation:d()(us()),variables:{idEspacio:this.esteBloque.idEspacio,idIteracion:this.esteBloque.id,idAsistente:o}}).then((function(){e.removingAsistente=!1})).catch((function(o){e.removingAsistente=!1,console.log("Error ".concat(o))})))},toTiempoFormateado:function(o){var e=Math.floor(o/60);String(e).length<2&&(e="0"+e);var i=String(Math.round(o-60*e));return i.length<2&&(i="0"+i),e+":"+i}}},fs=hs,gs=(i("8664"),Object(p["a"])(fs,ds,cs,!1,null,"09b13c04",null)),bs=gs.exports;function Ns(){var o=Object(s["a"])(["\n        query {\n          bloquesHorarioUsuarioAsiste {\n            ...fragBloqueHorario\n          }\n        }\n        ","\n      "]);return Ns=function(){return o},o}function As(){var o=Object(s["a"])(["\n        query {\n          usuariosProfe {\n            id\n            nombres\n          }\n        }\n      "]);return As=function(){return o},o}function Cs(){var o=Object(s["a"])(["\n        query ($idsUsuarios: [ID]!) {\n          espaciosByUsuariosAdmin(idsUsuarios: $idsUsuarios) {\n            ...fragEspacio\n          }\n        }\n        ","\n      "]);return Cs=function(){return o},o}function ys(){var o=Object(s["a"])(["\n  query ($idsAdministradores: [ID]!) {\n    iteracionesSemanalesEspaciosByAdministradores(\n      idsAdministradores: $idsAdministradores\n    ) {\n      ...fragBloqueHorario\n    }\n  }\n  ","\n"]);return ys=function(){return o},o}var Es=Object(rs["gql"])(ys(),is),ws={components:{DiaOrganizadorHorario:ss,VentanaBloqueHorario:bs},props:{yo:Object},name:"OrganizadorHorarioSemanal",apollo:{espacios:{query:Object(rs["gql"])(Cs(),Za),variables:function(){return{idsUsuarios:[this.usuario.id]}},update:function(o){var e=this,i=o.espaciosByUsuariosAdmin,n=i.find((function(o){return o.idAdministrador===e.usuario.id}));return n&&(this.idEspacioCrear=n.id),i},skip:function(){var o;return!(null!==(o=this.usuario)&&void 0!==o&&o.id)}},usuariosProfe:{query:Object(rs["gql"])(As())},bloquesHorario:{query:Es,variables:function(){return{idsAdministradores:this.idsUsuariosSeleccionados}},skip:function(){return!this.idsUsuariosSeleccionados||this.idsUsuariosSeleccionados.length<1},update:function(o){var e=o.iteracionesSemanalesEspaciosByAdministradores;return e}},bloquesHorarioUsuarioAsiste:{query:Object(rs["gql"])(Ns(),is),skip:function(){return!this.configuracionAdministradoresEspacios.includes("yo")}}},data:function(){var o=localStorage.getItem("configuracionOrganizadorHorarioSemanal"),e={};return o&&(e=JSON.parse(o)),console.log("La configuración es: "),console.table(e),{usuariosProfe:[],espacios:[],bloquesHorarioUsuarioAsiste:[],diasSemana:["Lunes","Martes","Miércoles","Jueves","Viernes"],factorZoom:3,offset:470,idEspacioCrear:null,configuracionAdministradoresEspacios:e.configuracionAdministradoresEspacios||["yo"],mostrandoConfiguracion:!1,mostrarBloquesParaChiquis:null==e.mostrarBloquesParaChiquis||void 0==e.mostrarBloquesParaChiquis||e.mostrarBloquesParaChiquis,mostrarBloquesParaTodos:null==e.mostrarBloquesParaTodos||void 0==e.mostrarBloquesParaTodos||e.mostrarBloquesParaTodos,mostrarCantidadAsistentes:null!=e.mostrarCantidadAsistentes&&void 0!=e.mostrarCantidadAsistentes&&e.mostrarCantidadAsistentes,bloquesHorario:[],idBloqueMenuContextual:null,idBloqueSeleccionado:null,idBloqueEnVentana:null}},computed:{todosBloquesDescargados:function(){return this.bloquesHorario.concat(this.bloquesHorarioUsuarioAsiste)},espaciosCreables:function(){return this.espacios},bloqueEnVentana:function(){var o=this;return this.idBloqueEnVentana?this.todosBloquesDescargados.find((function(e){return e.id===o.idBloqueEnVentana})):null},usuariosSeleccionables:function(){var o=this,e=Object(to["a"])(this.usuariosProfe);return!this.usuariosProfe.some((function(e){return e.id===o.usuario.id}))&&this.yo&&e.push({id:this.usuario.id,nombres:this.yo.nombres}),e},idsUsuariosSeleccionados:function(){var o=[];return this.configuracionAdministradoresEspacios.includes("yo")&&o.push(this.usuario.id),this.configuracionAdministradoresEspacios.includes("profesorxs")&&o.push.apply(o,Object(to["a"])(this.usuariosProfe.map((function(o){return o.id})))),o},bloquesActivos:function(){var o=Object(to["a"])(this.bloquesHorario),e=o.map((function(o){return o.id}));if(this.configuracionAdministradoresEspacios.includes("yo")){var i,n=Object(no["a"])(this.bloquesHorarioUsuarioAsiste);try{for(n.s();!(i=n.n()).done;){var t=i.value;e.includes(t.id)||o.push(t)}}catch(a){n.e(a)}finally{n.f()}}return this.mostrarBloquesParaChiquis||(o=o.filter((function(o){return!o.paraChiquis}))),this.mostrarBloquesParaTodos||(o=o.filter((function(o){return o.paraChiquis}))),o}},methods:{addBloqueHorarioCache:function(o){console.log("Adding to cache un bloque con id ".concat(o.id));var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Es,variables:{idsAdministradores:this.idsUsuariosSeleccionados}}),n=JSON.parse(JSON.stringify(i)),t=n.iteracionesSemanalesEspaciosByAdministradores.findIndex((function(e){return e.id===o.id}));t<0?(n.iteracionesSemanalesEspaciosByAdministradores.push(o),e.writeQuery({query:Es,variables:{idsAdministradores:this.idsUsuariosSeleccionados},data:n})):console.log("Iteración semanal ya estaba en caché")},eliminarBloqueHorarioCache:function(o){console.log("Removing from cache un bloque con id ".concat(o));var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Es,variables:{idsAdministradores:this.idsUsuariosSeleccionados}}),n=JSON.parse(JSON.stringify(i)),t=n.iteracionesSemanalesEspaciosByAdministradores.findIndex((function(e){return e.id===o}));t>-1?(n.iteracionesSemanalesEspaciosByAdministradores.splice(t,1),e.writeQuery({query:Es,variables:{idsAdministradores:this.idsUsuariosSeleccionados},data:n})):console.log("Iteración semanal no estaba en caché")},abrirVentanaBloque:function(o){console.log("Abriendo la ventana del bloque con id "+o)},setIdBloqueVentana:function(o){this.idBloqueEnVentana=o},checkVentanaBloque:function(){return!!this.idBloqueEnVentana&&(this.idBloqueEnVentana=null,!0)},setLocalStorageConfiguracion:function(){var o={mostrarBloquesParaChiquis:this.mostrarBloquesParaChiquis,mostrarBloquesParaTodos:this.mostrarBloquesParaTodos,configuracionAdministradoresEspacios:this.configuracionAdministradoresEspacios,mostrarCantidadAsistentes:this.mostrarCantidadAsistentes},e=JSON.stringify(o);localStorage.setItem("configuracionOrganizadorHorarioSemanal",e)}},watch:{configuracionAdministradoresEspacios:function(){this.setLocalStorageConfiguracion()},mostrarBloquesParaChiquis:function(){this.setLocalStorageConfiguracion()},mostrarBloquesParaTodos:function(){this.setLocalStorageConfiguracion()},mostrarCantidadAsistentes:function(){this.setLocalStorageConfiguracion()}}},xs=ws,Ps=(i("39dc"),Object(p["a"])(xs,ja,$a,!1,null,"437693f6",null)),Ss=Ps.exports;function Ds(){var o=Object(s["a"])(["\n            mutation (\n              $infoNodo: NodoSolidaridadInput!\n              $idNodoParent: ID!\n              $tipoParent: String!\n            ) {\n              crearNuevoNodoSolidaridadUnderNodo(\n                infoNodo: $infoNodo\n                idNodoParent: $idNodoParent\n                tipoParent: $tipoParent\n              ) {\n                nuevoNodo {\n                  ...fragNodoSolidaridad\n                }\n                nodosModificados {\n                  ...fragNodoSolidaridad\n                }\n                usuariosModificados {\n                  ...fragPersonaAtlas\n                }\n              }\n            }\n            ","\n            ","\n          "]);return Ds=function(){return o},o}function Is(){var o=Object(s["a"])(["\n            mutation ($dizqueCurrentPassword: String!, $newPassword: String!) {\n              cambiarPassword(\n                dizqueCurrentPassword: $dizqueCurrentPassword\n                newPassword: $newPassword\n              )\n            }\n          "]);return Is=function(){return o},o}function Rs(){var o=Object(s["a"])(["\n        query {\n          yo {\n            nombres\n            apellidos\n            username\n            email\n            numeroTel\n          }\n        }\n      "]);return Rs=function(){return o},o}var ks={components:{Loading:mo,VentanaLista:Ma,Calendario:ba,OrganizadorHorarioSemanal:Ss},name:"PerfilPersonal",apollo:{esteUsuario:{query:d()(Rs()),update:function(o){var e=o.yo;return e}}},data:function(){return{seccion:"informacionPersonal",esteUsuario:{permisos:[],id:null},inputCurrentPass:null,newPass:null,newPass2:null,enviandoCambioPass:!1,textoResultadoCambioPass:null,mostrandoOpcionesCrearSubNodo:!1,creandoSubNodo:!1,versionFoto:0}},computed:{inputCurrentPassIlegal:function(){return!this.inputCurrentPass||this.inputCurrentPass.length<di},newPassIlegal:function(){return!!(!this.newPass||this.newPass.length<di||this.newPass.length>ci||ri.test(this.newPass))},newPass2Ilegal:function(){return!this.newPass2||!this.newPass||this.newPass!=this.newPass2}},methods:{enviarCambioPass:function(){var o=this;this.newPassIlegal||this.newPass2Ilegal||(this.textoResultadoCambioPass=null,this.newPass!==this.inputCurrentPass&&(this.enviandoCambioPass=!0,this.$apollo.mutate({mutation:d()(Is()),variables:{dizqueCurrentPassword:this.inputCurrentPass,newPassword:this.newPass}}).then((function(e){var i=e.data.cambiarPassword;i&&alert("Contraseña cambiada"),o.enviandoCambioPass=!1,o.inputCurrentPass=null,o.newPass=null,o.newPass2=null})).catch((function(e){console.log("Error cambiando pass: ".concat(e)),o.enviandoCambioPass=!1,o.textoResultadoCambioPass="Error"}))))},afterCrearNodoUnder:function(o){this.$refs.ventanaLista.addNodoToNodosSolidaridad(o)},crearNuevoNodoUnder:function(o){var e=this;console.log("Creando nodo under yo"),this.creandoSubNodo=!0,this.$apollo.mutate({mutation:d()(Ds(),xi,Ci),variables:{infoNodo:o,idNodoParent:this.usuario.id,tipoParent:"usuario"}}).then((function(o){var i=o.data.crearNuevoNodoSolidaridadUnderNodo;e.creandoSubNodo=!1,e.afterCrearNodoUnder(i.nuevoNodo)})).catch((function(o){e.creandoSubNodo=!1,console.log("Error: ".concat(o))}))},uploadNuevaFoto:function(o){var e=this;console.log("Uploading foto");var i=o.target,n=new FormData,t=i.files[0];n.append("nuevaFoto",t),this.subiendoNuevaFoto=!0,li()({method:"post",url:this.serverUrl+"/api/usuarios/updateFoto",data:n,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(o){var i=o.data.resultado;e.subiendoNuevaFoto=!1,i&&(console.log("Foto actualizada"),e.versionFoto++)})).catch((function(o){e.subiendoNuevaFoto=!1,console.log("Error subiendo archivo. E: ".concat(o))}))}}},Ms=ks,js=(i("9053"),Object(p["a"])(Ms,ai,si,!1,null,"3572a01f",null)),$s=js.exports,Os=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"visorNodoConocimiento"},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.esteNodo.loading,expression:"$apollo.queries.esteNodo.loading"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.$apollo.queries.esteNodo.loading,expression:"!$apollo.queries.esteNodo.loading"}],attrs:{id:"zonaTitulo"}},[o._m(0),n("div",{attrs:{id:"zonaNombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombre"},on:{click:o.iniciarEdicionNombre}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNombreCosa",staticStyle:{width:"250px"},attrs:{type:"text",id:"inputNuevoNombre"},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},blur:o.guardarNuevoNombre}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.$apollo.queries.esteNodo.loading,expression:"!$apollo.queries.esteNodo.loading"}],attrs:{id:"zonaSelectoresContenido"}},[n("div",{staticClass:"boton selectorContenido selector",class:{activo:"estudiar"===o.mostrandoContenido},attrs:{title:"estudiar"!=o.mostrandoContenido?"Mostrar contenido":""},on:{click:function(e){o.mostrandoContenido="estudiar"}}},[n("img",{attrs:{src:i("2874"),alt:"Readme"}})]),n("div",{staticClass:"boton selectorContenido selector",class:{activo:"expertos"===o.mostrandoContenido},attrs:{title:"expertos"!=o.mostrandoContenido?"Mostrar expertos":""},on:{click:function(e){o.mostrandoContenido="expertos"}}},[n("img",{attrs:{src:i("7109"),alt:"Teacher"}})]),n("div",{staticClass:"boton selectorContenido selector",class:{activo:"foros"===o.mostrandoContenido},attrs:{title:"foros"!=o.mostrandoContenido?"Mostrar foros":""},on:{click:function(e){o.mostrandoContenido="foros"}}},[n("img",{attrs:{src:i("ff1c"),alt:"Readme"}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.$apollo.queries.esteNodo.loading,expression:"!$apollo.queries.esteNodo.loading"}],attrs:{id:"zonaContenidos"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"estudiar"===o.mostrandoContenido,expression:"mostrandoContenido === 'estudiar'"}],attrs:{id:"zonaSecciones"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.mostrandoMenuSecciones,expression:"!mostrandoMenuSecciones"}],attrs:{id:"zonaTituloSeccion"}},[n("div",{attrs:{id:"nombreSeccionSeleccionada"},on:{click:function(e){o.mostrandoMenuSecciones=!0}}},[o._v(" "+o._s(o.seccionSeleccionada?o.seccionSeleccionada.nombre:"Descripción")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuSecciones,expression:"mostrandoMenuSecciones"}],attrs:{id:"contenedorSelectoresSeccion"},on:{click:function(e){o.mostrandoMenuSecciones=!1}}},[n("div",{staticClass:"contenedorControles"},[o.usuarioExperto?n("div",{directives:[{name:"show",rawName:"v-show",value:!o.creandoNuevaSeccion,expression:"!creandoNuevaSeccion"}],staticClass:"boton",attrs:{title:"Crear nueva sección"},on:{click:function(e){return e.stopPropagation(),o.crearNuevaSeccion(e)}}},[n("img",{attrs:{src:i("1376"),alt:"Plus"}})]):o._e(),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoNuevaSeccion,expression:"creandoNuevaSeccion"}],attrs:{text:""}})],1),n("div",{staticClass:"selectorSeccion",on:{click:function(e){o.mostrandoSeccion=null}}},[o._v(" Descripcion ")]),o._l(o.esteNodo.secciones,(function(e){return n("div",{key:e.id,staticClass:"selectorSeccion",on:{click:function(i){o.mostrandoSeccion=e.id}}},[n("div",{staticClass:"nombreSeccionSelector"},[o._v(" "+o._s(e.nombre)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExperto||o.usuarioSuperadministrador,expression:"usuarioExperto || usuarioSuperadministrador"}],staticClass:"boton",attrs:{title:"Eliminar"},on:{click:function(i){return i.stopPropagation(),o.eliminarSeccion(e.id)}}},[n("img",{attrs:{src:i("4592"),alt:"Eliminar"}})])])}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.seccionSeleccionada&&!o.mostrandoMenuSecciones,expression:"!seccionSeleccionada && !mostrandoMenuSecciones"}],attrs:{id:"zonaDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",staticClass:"contenidoTexto",attrs:{id:"descripcion"},on:{click:o.toggleEditandoDescripcion}},[o._v(" "+o._s(o.esteNodo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"inputTextoNodo",attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarDescripcion"},on:{click:o.guardarNuevoDescripcion}}),n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})])]),o.esteNodo.id&&o.seccionSeleccionada?n("seccion-nodo-conocimiento",{directives:[{name:"show",rawName:"v-show",value:o.seccionSeleccionada&&!o.mostrandoMenuSecciones,expression:"seccionSeleccionada && !mostrandoMenuSecciones"}],key:o.seccionSeleccionada.id,attrs:{idNodo:o.esteNodo.id,estaSeccion:o.seccionSeleccionada,usuarioExperto:o.usuarioExperto},on:{subiArchivo:function(e){return o.addArchivoSeccionCache(e,o.seccionSeleccionada.id)},archivoEliminado:function(e){return o.deleteArchivoSeccionCache(e,o.seccionSeleccionada.id)},tengoNuevoPrimario:function(e){return o.setPrimarioSeccionCache(e,o.seccionSeleccionada.id)}}}):o._e()],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"expertos"===o.mostrandoContenido,expression:"mostrandoContenido === 'expertos'"}],attrs:{id:"zonaExpertos"}},[n("div",{staticClass:"contenedorControles"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoQueryExpertos&&!o.idExpertoSeleccionado&&!o.usuarioExperto,expression:"\n            !enviandoQueryExpertos &&\n            !idExpertoSeleccionado &&\n            !usuarioExperto\n          "}],staticClass:"boton",attrs:{title:o.esteNodo.expertos.length<1?"Asumir":"Quiero aportar como experto en este tema"},on:{click:function(e){return o.intentarEntrarExpertos(o.usuario.id)}}},[n("img",{attrs:{src:i("b2a7"),alt:"Mas"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoQueryExpertos&&o.idExpertoSeleccionado&&(o.esteNodo.posiblesExpertos.includes(o.idExpertoSeleccionado)&&o.usuarioExperto||o.usuarioSuperadministrador||o.usuarioAdministradorAtlas),expression:"\n            !enviandoQueryExpertos &&\n            idExpertoSeleccionado &&\n            ((esteNodo.posiblesExpertos.includes(idExpertoSeleccionado) &&\n              usuarioExperto) ||\n              usuarioSuperadministrador ||\n              usuarioAdministradorAtlas)\n          "}],staticClass:"boton",attrs:{title:"Aceptar como experto"},on:{click:function(e){return o.intentarEntrarExpertos(o.idExpertoSeleccionado)}}},[n("img",{attrs:{src:i("a26f"),alt:"Handshake"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoQueryExpertos&&!o.idExpertoSeleccionado&&(o.usuarioExperto||o.esteNodo.posiblesExpertos.includes(o.idExpertoSeleccionado)),expression:"\n            !enviandoQueryExpertos &&\n            !idExpertoSeleccionado &&\n            (usuarioExperto ||\n              esteNodo.posiblesExpertos.includes(idExpertoSeleccionado))\n          "}],staticClass:"boton",attrs:{title:"abandonar"},on:{click:function(e){return o.abandonarListaExpertos(o.usuario.id)}}},[n("img",{attrs:{src:i("7d55"),alt:"Menos"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryExpertos,expression:"enviandoQueryExpertos"}],attrs:{texto:""}})],1),n("div",{attrs:{id:"listaExpertos"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idExpertoSeleccionado=null}}},o._l(o.esteNodo.expertos.concat(o.esteNodo.posiblesExpertos),(function(e){return n("icono-persona-autonomo",{key:e,style:{opacity:o.esteNodo.posiblesExpertos.includes(e)?.5:1},attrs:{texto:"",seleccionado:o.idExpertoSeleccionado===e,factorEscala:"0.8",idPersona:e},nativeOn:{click:function(i){o.idExpertoSeleccionado=e}}})})),1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:"foros"==o.mostrandoContenido,expression:"mostrandoContenido == 'foros'"}],ref:"zonaForos",attrs:{id:"zonaForos"}},[o.usuarioExperto?n("div",{staticClass:"nombreForo"},[o._v("Foro expertos")]):o._e(),o.usuarioExperto?n("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteNodo.idForoExpertos}}):o._e(),o.usuarioExperto?n("br"):o._e(),n("div",{staticClass:"nombreForo"},[o._v("Foro público")]),n("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteNodo.idForoPublico}})],1)])],1)},qs=[function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"iconoNodo"}},[n("img",{attrs:{src:i("7fa4"),alt:"Idea"}})])}],Ts=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"seccionNodoConocimiento"},[n("div",{staticClass:"contenedorControles"},[o.usuarioExperto||o.usuarioSuperadministrador?n("div",{staticClass:"boton",on:{click:function(e){o.editando=!o.editando}}},[n("img",{attrs:{src:i("b728"),alt:"Editar"}})]):o._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editando,expression:"!editando"}],key:o.versionArchivo,staticClass:"frontDeSeccion",attrs:{id:"zonaFront"}},["enlace"===o.estaSeccion.modo||o.estaSeccion.tipoPrimario&&"image"!=o.estaSeccion.tipoPrimario.substring(0,5)?n("iframe",{attrs:{id:"iframeSeccion",src:o.srcIframe,frameborder:"0"}}):o._e(),"archivo"===o.estaSeccion.modo&&o.estaSeccion.tipoPrimario&&"image"===o.estaSeccion.tipoPrimario.substring(0,5)?n("img",{attrs:{src:o.direccionNodo+"/"+o.estaSeccion.id+"/?v="+o.versionArchivo}}):o._e()]),o.usuarioExperto||o.usuarioSuperadministrador?n("div",{directives:[{name:"show",rawName:"v-show",value:o.editando,expression:"editando"}],attrs:{id:"zonaAdministracion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombre"},on:{click:o.iniciarEdicionNombre}},[o._v(" "+o._s(o.estaSeccion.nombre)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",class:{deshabilitado:o.enviandoNuevoNombre},attrs:{type:"text",name:"",id:"inputNuevoNombre"},domProps:{value:o.estaSeccion.nombre},on:{blur:o.guardarNuevoNombre,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:""}}),n("div",{staticClass:"contenedorControles"},["archivo"===o.modo?n("div",{directives:[{name:"show",rawName:"v-show",value:!o.subiendoArchivo,expression:"!subiendoArchivo"}],staticClass:"boton",attrs:{title:"Subir un archivo"},on:{click:function(e){return o.$refs.inputArchivoContenido.click()}}},[n("img",{attrs:{src:i("1376"),alt:"Plus"}})]):o._e(),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.subiendoArchivo,expression:"subiendoArchivo"}],attrs:{texto:""}}),n("div",{staticClass:"boton",attrs:{title:"archivo"===o.estaSeccion.modo?"Cambiar modo a enlace":"Cambiar modo a archivo"},on:{click:function(e){return e.stopPropagation(),o.toggleModo(e)}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:"archivo"===o.modo,expression:"modo === 'archivo'"}],attrs:{src:i("c3cf"),alt:"Archivo"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:"enlace"===o.modo,expression:"modo === 'enlace'"}],attrs:{src:i("7b0b1"),alt:"Archivo"}})])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"archivo"===o.modo,expression:"modo === 'archivo'"}],attrs:{id:"listaArchivos"}},[n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputArchivoContenido",staticClass:"inputArchivoContenido",attrs:{type:"file"},on:{change:function(e){return o.subirArchivoContenido(e)}}}),o._l(o.archivosOrdenados,(function(e){return n("archivo-seccion-nodo",{key:e.id,attrs:{esteArchivo:e,usuarioExperto:o.usuarioExperto,idNodo:o.idNodo,idSeccion:o.estaSeccion.id},on:{meElimine:function(i){return o.$emit("archivoEliminado",e.nombre)},soyPrimario:function(i){o.$emit("tengoNuevoPrimario",e.nombre),o.versionArchivo++}}})}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:"enlace"===o.modo,expression:"modo==='enlace'"}],attrs:{id:"zonaEnlace"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.inputNuevoEnlace,expression:"inputNuevoEnlace"}],ref:"inputNuevoEnlace",attrs:{type:"text",id:"inputNuevoEnlace",placeholder:"Enlace al recurso"},domProps:{value:o.inputNuevoEnlace},on:{blur:o.guardarNuevoEnlace,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoEnlace(e)},input:function(e){e.target.composing||(o.inputNuevoEnlace=e.target.value)}}})])],1):o._e()])},Bs=[],Us=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"archivoSeccionNodo",class:{deshabilitado:o.eliminandose}},[n("div",{attrs:{id:"barraSuperior"}},[o._m(0),n("div",{attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteArchivo.nombre)+" ")]),n("div",{staticClass:"contenedorControles",staticStyle:{"margin-left":"auto","margin-right":"10px"}},[n("div",{staticClass:"boton",attrs:{title:"Eliminar"},on:{click:o.eliminarse}},[n("img",{attrs:{src:i("4592"),alt:"Basura"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.esteArchivo.primario&&!o.marcandoPrimario,expression:"!esteArchivo.primario && !marcandoPrimario"}],staticClass:"boton",on:{click:o.marcarPrimario}},[n("img",{attrs:{src:i("1926"),alt:"Subir"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.marcandoPrimario,expression:"marcandoPrimario"}],attrs:{texto:""}})],1)])])},Fs=[function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"icono"}},[n("img",{attrs:{src:i("c3cf"),alt:"Archivo"}})])}];function _s(){var o=Object(s["a"])(["\n          mutation($idNodo:ID!, $idSeccion: ID!, $nombreArchivo:String!){\n            marcarPrimarioArchivoSeccionNodo(idNodo:$idNodo, idSeccion:$idSeccion, nombreArchivo: $nombreArchivo)\n          }\n        "]);return _s=function(){return o},o}function Ls(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idSeccion: ID!, $nombreArchivo: String!) {\n              eliminarArchivoSeccionNodo(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                nombreArchivo: $nombreArchivo\n              )\n            }\n          "]);return Ls=function(){return o},o}var zs={components:{Loading:mo},name:"ArchivoSeccionNodo",props:{esteArchivo:Object,usuarioExperto:Boolean,idNodo:String,idSeccion:String},data:function(){return{eliminandose:!1,marcandoPrimario:!1}},methods:{eliminarse:function(){var o=this;this.usuarioExperto&&(confirm("Borrando archivo ¿Continuar?")?(this.eliminandose=!0,this.$apollo.mutate({mutation:d()(Ls()),variables:{idNodo:this.idNodo,idSeccion:this.idSeccion,nombreArchivo:this.esteArchivo.nombre}}).then((function(e){var i=e.data.eliminarArchivoSeccionNodo;o.eliminandose=!1,i?o.$emit("meElimine"):console.log("Archivo no eliminado")})).catch((function(e){o.eliminandose=!1,console.log("Error. E: ".concat(e))}))):console.log("Cancelado"))},marcarPrimario:function(){var o=this;this.marcandoPrimario=!0,this.$apollo.mutate({mutation:d()(_s()),variables:{idNodo:this.idNodo,idSeccion:this.idSeccion,nombreArchivo:this.esteArchivo.nombre}}).then((function(){o.marcandoPrimario=!1,o.$emit("soyPrimario")})).catch((function(){o.marcandoPrimario=!1}))}}},Vs=zs,Qs=(i("39e7"),Object(p["a"])(Vs,Us,Fs,!1,null,"2d92d1e9",null)),Js=Qs.exports;function Hs(){var o=Object(s["a"])(["\n          mutation($idNodo: ID!, $idSeccion:ID!, $nuevoEnlace:String!){\n            setNuevoEnlaceSeccionNodo(idNodo: $idNodo, idSeccion: $idSeccion, nuevoEnlace: $nuevoEnlace){\n              id\n              modo\n              enlace\n            }\n          }\n        "]);return Hs=function(){return o},o}function Zs(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idSeccion: ID!\n              $nuevoNombre: String!\n            ) {\n              editarNombreSeccionNodoConocimiento(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Zs=function(){return o},o}var Gs={props:{estaSeccion:Object,idNodo:String,usuarioExperto:Boolean},components:{ArchivoSeccionNodo:Js,Loading:mo},name:"SeccionNodoConocimiento",data:function(){return{editando:!1,subiendoArchivo:!1,versionArchivo:0,editandoNombre:!1,enviandoNuevoNombre:!1,guardandoNuevoEnlace:!1,inputNuevoEnlace:this.estaSeccion.enlace,modo:""}},methods:{subirArchivoContenido:function(o){var e=this,i=o.target,n=new FormData,t=i.files[0];n.append("nuevoArchivo",t),n.append("idNodo",this.idNodo),n.append("idSeccion",this.estaSeccion.id),this.subiendoArchivo=!0,li()({method:"post",url:this.serverUrl+"/api/atlas/subirArchivoContenidoSeccionNodo",data:n,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(o){var i=o.data.infoArchivo;e.subiendoArchivo=!1,e.versionArchivo++,e.$emit("subiArchivo",i)})).catch((function(o){e.subiendoArchivo=!1,console.log("Error subiendo archivo. E: ".concat(o))}))},iniciarEdicionNombre:function(){this.$refs.inputNuevoNombre.value=this.estaSeccion.nombre,this.editandoNombre=!0},guardarNuevoNombre:function(){var o=this,e=this.$refs.inputNuevoNombre.value.trim();e!=this.estaSeccion.nombre?e.length<1||(Ct.test(e)?console.log("Caracteres ilegales"):(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(Zs()),variables:{idNodo:this.idNodo,idSeccion:this.estaSeccion.id,nuevoNombre:e}}).then((function(e){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(e)," ")),o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))})))):this.editandoNombre=!1},toggleModo:function(){var o="archivo"===this.modo?"enlace":"archivo";console.log("Cambiando a "+o),this.modo=o},guardarNuevoEnlace:function(){var o=this;console.log("guardar nuevo enlace");var e=this.$refs.inputNuevoEnlace.value.trim();console.log(e),e===this.estaSeccion.enlace||!e||e.length<5||(this.usuarioExperto||this.usuarioSuperadministrador)&&(this.guardandoNuevoEnlace=!0,this.$apollo.mutate({mutation:d()(Hs()),variables:{idNodo:this.idNodo,idSeccion:this.estaSeccion.id,nuevoEnlace:e}}).then((function(){o.guardandoNuevoEnlace=!1})).catch((function(e){console.log("Error: "+e),o.guardandoNuevoEnlace=!0})))}},computed:{direccionNodo:function(){return this.serverUrl+"/assetsAtlas/contenidosNodos/"+this.idNodo},archivosOrdenados:function(){var o=JSON.parse(JSON.stringify(this.estaSeccion.archivos));return o.sort((function(o){return o.primario?-1:0})),o},srcIframe:function(){if("enlace"===this.estaSeccion.modo&&this.estaSeccion.enlace){var o=this.estaSeccion.enlace,e=window.location.href;return"http://192.168.1.100:3000"===o.substring(0,25)&&"http://192.168.1.100"!=e.substring(0,20)&&(o="https://pe-pe-pe.herokuapp.com"+o.substring(25),console.log("Enlace queda: "+o)),console.log("El enlace es: "+o),o}return this.direccionNodo+"/"+this.estaSeccion.id+"/?v="+this.versionArchivo}},watch:{"estaSeccion.modo":{handler:function(){this.modo=this.estaSeccion.modo},immediate:!0}}},Ks=Gs,Ys=(i("14f4"),Object(p["a"])(Ks,Ts,Bs,!1,null,"fb537418",null)),Ws=Ys.exports,Xs=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"foro"},[i("div",{staticClass:"barraSuperiorForo"},[i("div",{directives:[{name:"show",rawName:"v-show",value:null===o.idConversacionSeleccionada,expression:"idConversacionSeleccionada === null"}],attrs:{id:"anuncio"}},[o._v(" Conversaciones ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idConversacionSeleccionada,expression:"idConversacionSeleccionada != null"}],attrs:{id:"bRegresarConversaciones"},on:{click:function(e){o.idConversacionSeleccionada=null,o.$apollo.queries.numPaginas.refetch()}}},[o._v(" Volver a conversaciones ")]),i("div",{attrs:{id:"controlesForo"}},[o.usuarioLogeado&&("publico"==o.esteForo.acceso||1==o.usuarioMiembro)&&o.esteForo.id?i("div",{directives:[{name:"show",rawName:"v-show",value:!o.conversacionAbierta,expression:"!conversacionAbierta"}],staticClass:"controlesForo botonesControles",attrs:{id:"bCrearConversacion"},on:{click:function(e){o.creandoConversacion=!o.creandoConversacion}}},[o._v(" "+o._s(o.creandoConversacion?"Cancelar":"Crear conversación")+" ")]):o._e()])]),i("div",{staticClass:"zonaConversaciones"},[o.usuarioLogeado&&("publico"==o.esteForo.acceso||1==o.usuarioMiembro)&&o.esteForo.id?i("div",{directives:[{name:"show",rawName:"v-show",value:o.creandoConversacion,expression:"creandoConversacion"}],attrs:{id:"zonaCrearConversacion"}},[i("center",[i("h3",[o._v("Creando conversación")])]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.tituloNuevaConversacion,expression:"tituloNuevaConversacion"}],class:{letrasRojas:o.tituloNuevaConversacionIlegal},attrs:{type:"text",id:"inputTituloNuevaConversacion",placeholder:"Titulo de la nueva conversación"},domProps:{value:o.tituloNuevaConversacion},on:{input:function(e){e.target.composing||(o.tituloNuevaConversacion=e.target.value)}}}),i("cuadro-responder",{class:{deshabilitado:o.tituloNuevaConversacionIlegal},attrs:{idForo:o.esteForo.id,parent:o.parent,tituloNuevaConversacion:o.tituloNuevaConversacion},on:{hiceConversacion:function(e){return o.addConversacion(e)}}})],1):o._e(),o.numPaginas&&!o.conversacionAbierta?i("div",{staticClass:"zonaSelectorPagina"},o._l(o.numPaginas,(function(e){return i("div",{key:e,staticClass:"selectorPagina",class:{selectorSeleccionado:e==o.numPaginaSeleccionada},on:{click:function(i){o.numPaginaSeleccionada=e}}},[o._v(" "+o._s(e)+" ")])})),0):o._e(),o.numPaginas?i("div",{staticClass:"zonaPaginasConversaciones"},[o._l(o.numPaginas,(function(o){return i("div",{key:o,staticClass:"paginaConversaciones"})})),o._l(o.conversacionesPorPagina[o.numPaginaSeleccionada],(function(e){return i("conversacion",{directives:[{name:"show",rawName:"v-show",value:o.idConversacionSeleccionada==e.id||!o.conversacionAbierta,expression:"\n          idConversacionSeleccionada == conversacion.id ||\n          !conversacionAbierta\n        "}],key:e.id,attrs:{estaConversacion:e,seleccionado:o.idConversacionSeleccionada==e.id,usuarioMiembro:o.usuarioMiembro,idForo:o.idForo,parent:o.parent},on:{meAbrieron:function(i){return o.setTodaConversacionLeida(e.id)},meElimine:o.refreshPagina,respuestaPublicada:function(i){return o.setTodaConversacionLeida(e.id,e.cantidadRespuestas)}},nativeOn:{click:function(i){o.idConversacionSeleccionada=e.id}}})}))],2):o._e()])])},or=[],er=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"conversacion",class:{seleccionado:o.seleccionado,deshabilitado:o.seleccionado&&o.loading,conRespuestasNoLeidas:o.estaConversacion.cantidadRespuestas>o.cantidadRespuestasLeidasUsuario}},[n("div",{staticClass:"infoConversacion"},[o._v(" "+o._s(o.estaConversacion.cantidadRespuestas)+" publicacion"+o._s(o.estaConversacion.cantidadRespuestas>1?"es":"")+". Última publicación en "+o._s(o.fechaFormateada)+" ")]),n("div",{staticClass:"tituloConversacion"},[n("img",{staticClass:"imagenConversacion",attrs:{src:i("96cc"),alt:"Conversacion"}}),o._v(" "+o._s(o.estaConversacion.titulo)+" "),n("span",{staticClass:"datosConversacion"},[n("span",{directives:[{name:"show",rawName:"v-show",value:o.estaConversacion.cantidadRespuestas>o.cantidadRespuestasLeidasUsuario,expression:"\n          estaConversacion.cantidadRespuestas >\n          cantidadRespuestasLeidasUsuario\n        "}],staticClass:"dato datoRespuestasNoLeidas",attrs:{title:"Respuestas nuevas en esta conversación"}},[o._v(" "+o._s(o.estaConversacion.cantidadRespuestas-o.cantidadRespuestasLeidasUsuario)+" ")])])]),o.numPaginas>0?n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"zonaSelectorPaginas"},o._l(o.numPaginas,(function(e){return n("div",{key:e,staticClass:"selectorPagina",class:{selectorSeleccionado:e==o.numPaginaSeleccionada},on:{click:function(i){o.numPaginaSeleccionada=e}}},[o._v(" "+o._s(e)+" ")])})),0):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"zonaRespuestas"},[n("div",{staticClass:"zonaPaginas"},o._l(o.numPaginas,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:o.numPaginaSeleccionada==e,expression:"numPaginaSeleccionada == index"}],key:"pagina"+e,staticClass:"pagina"},o._l(o.respuestasPorPagina[e],(function(i){return n("respuesta",{key:i.id,attrs:{idConversacion:o.estaConversacion.id,estaRespuesta:i},on:{meQuierenCitar:o.citarRespuesta,meElimine:function(n){return o.updateRespuestaEliminada(i.id,e)}}})})),1)})),0),o.usuarioLogeado&&("publico"==o.estaConversacion.acceso||1==o.usuarioMiembro)&&o.estaConversacion.id?n("cuadro-responder",{ref:"cuadroResponder",attrs:{parent:o.parent,idConversacion:o.estaConversacion.id},on:{hiceRespuesta:function(e){return o.addRespuesta(e)}}}):o._e()],1),n("div",{staticClass:"controlesConversacion"})])},ir=[],nr=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"cuadroResponder"},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.idConversacion,expression:"idConversacion"}],attrs:{id:"barraSuperior"}},[n("img",{attrs:{src:i("1070"),alt:"Contestar",title:"Contestar en esta conversación",id:"imgMensaje"},on:{click:o.toggleCuadroAbierto}}),n("span",{attrs:{id:"tituloCuadro"}},[o._v("Envía una respuesta")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"zonaMensaje"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.mensaje,expression:"mensaje"}],ref:"inputMensaje",class:{letrasRojas:o.mensajeIlegal},attrs:{name:"inputMensaje",id:"inputMensaje",rows:"2"},domProps:{value:o.mensaje},on:{input:[function(e){e.target.composing||(o.mensaje=e.target.value)},o.checkHeight]}}),o._l(o.interpolaciones,(function(e,i){return n("creador-interpolacion",{key:i,ref:"creadoresInterpolacion",refInFor:!0,attrs:{estaInterpolacion:e},on:{eliminarse:function(e){return o.eliminarInterpolacion(e,i)},enlaceIframeSet:function(e){return o.setEnlaceIframeInterpolacion(e,i)}}})}))],2),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"zonaInsertar"}},[n("img",{staticClass:"bInsertar",attrs:{src:i("b4de"),alt:"Video",title:"Insertar un enlace a un video"},on:{click:function(e){return o.insertarCreadorInterpolacion("video")}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"adjuntarArchivo"}},[n("input",{ref:"inputArchivoAdjunto",attrs:{type:"file",id:"inputArchivoAdjunto"},on:{change:o.actualizarNombreDeArchivo}}),n("img",{attrs:{src:i("3a9d"),alt:"Ajuntar archivo",id:"imgAdjuntar",title:"adjuntar un archivo"},on:{click:o.abrirSelectorDeArchivos}}),n("br"),n("div",{directives:[{name:"show",rawName:"v-show",value:o.nombreArchivoSeleccionado,expression:"nombreArchivoSeleccionado"}],attrs:{id:"nombreArchivoSeleccionado"}},[o._v(" "+o._s(o.nombreArchivoSeleccionado)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],staticClass:"bloqueAdjuntar",attrs:{id:"bloqueAdjuntarEnlace"}},[n("div",{attrs:{id:"zonaIntroducirEnlace"}},[n("img",{attrs:{src:i("dffa"),alt:"Ajuntar enlace",id:"imgAdjuntarEnlace",title:"adjuntar un enlace"},on:{click:function(e){o.introduciendoEnlace=!0}}}),n("input",{directives:[{name:"show",rawName:"v-show",value:!0===o.introduciendoEnlace,expression:"introduciendoEnlace === true"},{name:"model",rawName:"v-model",value:o.enlaceAdjuntable,expression:"enlaceAdjuntable"}],staticClass:"inputAdjuntarEnlace",attrs:{type:"text",placeholder:"escribe o pega el enlace"},domProps:{value:o.enlaceAdjuntable},on:{input:function(e){e.target.composing||(o.enlaceAdjuntable=e.target.value)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.introduciendoEnlace&&!o.enlaceAdjuntableIlegal,expression:"introduciendoEnlace && !enlaceAdjuntableIlegal"}],attrs:{src:i("f0d1"),alt:"Confirmar",id:"bAceptarAdjuntarEnlace"},on:{click:function(e){e.stopPropagation(),o.enlaceAdjunto.push(o.enlaceAdjuntable),o.enlaceAdjuntable=null,o.introduciendoEnlace=!1}}})]),o._l(o.enlaceAdjunto,(function(e,i){return n("div",{key:i,staticClass:"enlaceAdjuntado"},[n("div",{attrs:{id:"nombreEnlaceAdjuntado"}},[n("span",[o._v(o._s(e))])]),n("div",{attrs:{id:"bCancelarEnlaceAdjunto"},on:{click:function(e){return e.stopPropagation(),o.enlaceAdjunto.splice(i,1)}}},[o._m(0,!0)])])}))],2),n("img",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto&&!o.enviandoRespuesta,expression:"cuadroAbierto && !enviandoRespuesta"}],class:{deshabilitado:o.mensajeIlegal},attrs:{src:i("4e77"),alt:"Enviar",title:"Enviar respuesta",id:"bEnviar"},on:{click:o.evaluarAdjunto}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoRespuesta,expression:"enviandoRespuesta"}],attrs:{texto:"Enviando respuesta..."}})],1)},tr=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"linea1"},[i("div",{staticClass:"linea2"})])}],ar=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"creadorInterpolacion"},[n("div",{staticClass:"bEliminarInterpolacion bolitaX",on:{click:function(e){return o.$emit("eliminarse",o.mensaje)}}},[n("div",{staticClass:"rayaX1"}),n("div",{staticClass:"rayaX2"})]),"video"==o.estaInterpolacion.tipo?n("div",{attrs:{id:"bloqueIframe"}},["video"==o.estaInterpolacion.tipo?n("iframe",{directives:[{name:"show",rawName:"v-show",value:o.estaInterpolacion.enlaceIframe,expression:"estaInterpolacion.enlaceIframe"}],attrs:{id:"elIframe",src:o.estaInterpolacion.enlaceIframe,frameborder:"0"}}):o._e(),n("div",{attrs:{id:"zonaInputEnlace"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.enlaceIframe,expression:"enlaceIframe"}],attrs:{type:"text",id:"inputEnlace",placeholder:"Introduce el enlace"},domProps:{value:o.enlaceIframe},on:{input:[function(e){e.target.composing||(o.enlaceIframe=e.target.value)},function(e){o.enlaceAceptado=!1}],keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.setEnlaceIframe(e)},paste:o.onPasteEnlace}}),n("img",{staticClass:"bAceptar",staticStyle:{cursor:"pointer"},style:[{backgroundColor:o.enlaceAceptado?"green":""}],attrs:{src:i("f0d1"),width:"17px",alt:"Ok",title:"Aceptar"},on:{click:o.setEnlaceIframe}})])]):o._e(),"quote"==o.estaInterpolacion.tipo?n("div",{attrs:{id:"bloqueQuote"}},[n("div",{attrs:{id:"infoQuote"}},[o._v(" "+o._s(o.estaInterpolacion.quote.infoAutor.nombres)+" escribio: ")]),n("div",{attrs:{id:"quote"}},[o._v(" "+o._s(o.estaInterpolacion.quote.mensaje)+" "),o._l(o.estaInterpolacion.quote.interpolaciones,(function(o){return n("interpolacion",{key:o.id,attrs:{estaInterpolacion:o}})}))],2)]):o._e(),n("div",{attrs:{id:"zonaMensaje"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.mensaje,expression:"mensaje"}],ref:"inputMensaje",class:{letrasRojas:o.mensajeIlegal},attrs:{name:"inputMensaje",id:"inputMensaje"},domProps:{value:o.mensaje},on:{input:[function(e){e.target.composing||(o.mensaje=e.target.value)},o.checkHeight]}})])])},sr=[],rr=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"interpolacion"},["video"==o.estaInterpolacion.tipo?i("div",{attrs:{id:"bloqueIframe"}},[i("iframe",{directives:[{name:"show",rawName:"v-show",value:o.estaInterpolacion.enlaceIframe,expression:"estaInterpolacion.enlaceIframe"}],ref:"elIframe",style:[o.altoIframe],attrs:{id:"elIframe",src:o.estaInterpolacion.enlaceIframe,frameborder:"0"}})]):o._e(),"quote"==o.estaInterpolacion.tipo?i("div",{attrs:{id:"bloqueQuote"}},[i("div",{attrs:{id:"infoQuote"}},[o._v(" "+o._s(o.estaInterpolacion.quote.infoAutor.nombres)+" escribio: ")]),i("div",{staticClass:"quote"},[o._v(" "+o._s(o.estaInterpolacion.quote.mensaje)+" "),o._l(o.estaInterpolacion.quote.interpolaciones,(function(o){return i("interpolacion",{key:o.id,attrs:{estaInterpolacion:o}})}))],2)]):o._e(),i("div",{attrs:{id:"bloqueMensaje"}},[i("div",{attrs:{id:"elMensaje"}},[o._v(" "+o._s(o.estaInterpolacion.mensaje)+" ")])])])},dr=[],cr={name:"Interpolacion",props:{estaInterpolacion:Object},data:function(){return{altoIframe:{height:"200px"}}},mounted:function(){"video"==this.estaInterpolacion.tipo&&this.$set(this.altoIframe,"height",this.$refs.elIframe.offsetWidth/1.77+"px")}},ur=cr,lr=(i("6a63"),Object(p["a"])(ur,rr,dr,!1,null,"4df81ef6",null)),vr=lr.exports,mr=/[^\n\r a-zA-ZÀ-ž0-9_()":;.,+¡!¿?@=-]/,pr={components:{Interpolacion:vr},name:"CreadorInterpolacion",props:{estaInterpolacion:Object},data:function(){return{mensaje:null,enlaceIframe:null,enlaceIframeSet:null,enlaceAceptado:!1}},methods:{onPasteEnlace:function(){this.enlaceAceptado=!1,console.log("Paste")},setEnlaceIframe:function(){if(this.enlaceIframe&&"https://"==this.enlaceIframe.substr(0,8)){if("youtube.com/watch"==this.enlaceIframe.substr(12,17)&&(this.enlaceIframe=this.enlaceIframe.substr(0,24)+"embed/"+this.enlaceIframe.substr(32)),"https://www.youtube.com/"!=this.enlaceIframe.substr(0,24))return console.log("Enlace no válido"),void this.enlaceIframe.alert("Enlace no válido");this.enlaceIframeSet=this.enlaceIframe,this.$emit("enlaceIframeSet",this.enlaceIframeSet),this.enlaceAceptado=!0}},checkHeight:function(){while(this.$refs.inputMensaje.scrollHeight>this.$refs.inputMensaje.offsetHeight)this.$refs.inputMensaje.rows++},addToMensaje:function(o){var e=this;o&&(this.mensaje+="\n\n"+o,this.$nextTick((function(){e.checkHeight()})))},temp:function(){console.log("1")}},computed:{mensajeIlegal:function(){return!this.mensaje||this.mensaje.length<1||!!mr.test(this.mensaje)}}},hr=pr,fr=(i("95b0"),Object(p["a"])(hr,ar,sr,!1,null,"1244a928",null)),gr=fr.exports;function br(){var o=Object(s["a"])(["\n            mutation(\n              $idConversacion: ID!\n              $nuevaRespuesta: InputNuevaRespuesta\n              $parent: InputParent\n            ) {\n              postRespuestaConversacion(\n                idConversacion: $idConversacion\n                nuevaRespuesta: $nuevaRespuesta\n                parent: $parent\n              ) {\n                ...fragRespuesta\n              }\n            }\n            ","\n          "]);return br=function(){return o},o}function Nr(){var o=Object(s["a"])(["\n            mutation(\n              $idForo: ID!\n              $input: InputIniciarConversacion\n              $parent: InputParent\n            ) {\n              iniciarConversacionConPrimerMensajeForo(\n                idForo: $idForo\n                input: $input\n                parent: $parent\n              ) {\n                ...fragConversacion\n              }\n            }\n            ","\n          "]);return Nr=function(){return o},o}var Ar=/[^\n\r a-zA-ZÀ-ž0-9_()":;.,+¡!¿?@=-]/,Cr={components:{Loading:mo,CreadorInterpolacion:gr},name:"CuadroResponder",props:{tituloNuevaConversacion:String,idConversacion:String,idForo:String,parent:Object},data:function(){return{mensaje:null,cuadroAbierto:!1,enviandoRespuesta:!1,nombreArchivoSeleccionado:null,introduciendoEnlace:!1,enlaceAdjuntable:null,enlaceAdjunto:[],interpolaciones:[]}},methods:{evaluarAdjunto:function(){var o=this;if(!this.mensajeIlegal){this.enviandoRespuesta=!0;var e=this.$refs.inputArchivoAdjunto,i=new FormData;if(this.setInterpolacionesData(),e.value){var n=e.files[0],t=n["type"];console.log("subiendo un ".concat(t)),i.append("archivoAdjunto",n);var a=this;li()({method:"post",url:this.serverUrl+"/api/foros/adjuntarArchivoParaRespuesta",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data.infoArchivo,n={infoArchivo:{idGoogleDrive:i.idGoogleDrive,googleDriveDirectLink:i.googleDriveDirectLink,extension:i.extensionDeArchivo,nombre:i.extensionDeArchivo},mensaje:a.mensaje,interpolaciones:o.interpolaciones};o.enlaceAdjunto&&o.enlaceAdjunto.length>0&&(n.enlaceAdjunto=o.enlaceAdjunto),o.idConversacion?o.enviarNuevaRespuesta(n):o.crearConversacionConRespuesta(n)})).catch((function(e){o.enviandoRespuesta=!1,console.log("Errores: ".concat(e)),e.response&&e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))}else{var s={infoArchivo:null,mensaje:this.mensaje,interpolaciones:this.interpolaciones};this.enlaceAdjunto&&this.enlaceAdjunto.length>0&&(s.enlaceAdjunto=this.enlaceAdjunto),this.idConversacion?this.enviarNuevaRespuesta(s):this.crearConversacionConRespuesta(s)}}},crearConversacionConRespuesta:function(o){var e=this;if(this.tituloNuevaConversacion){var i={titulo:this.tituloNuevaConversacion,primeraRespuesta:o};this.enviandoRespuesta=!0;var n=this;this.$apollo.mutate({mutation:d()(Nr(),Cn),variables:{idForo:n.idForo,input:i,parent:n.parent}}).then((function(o){var i=o.data.iniciarConversacionConPrimerMensajeForo;n.enviandoRespuesta=!1,n.$emit("hiceConversacion",i),e.reset()})).catch((function(o){n.enviandoRespuesta=!1,console.log("Error. E: ".concat(o))}))}},enviarNuevaRespuesta:function(o){var e=this;if(!this.mensajeIlegal){var i=this;this.enviandoRespuesta=!0,this.$apollo.mutate({mutation:d()(br(),An),variables:{idConversacion:i.idConversacion,nuevaRespuesta:o,parent:i.parent}}).then((function(o){var n=o.data.postRespuestaConversacion;i.enviandoRespuesta=!1,e.$emit("hiceRespuesta",n),e.cerrarse()})).catch((function(o){i.enviandoRespuesta=!1,console.log("Error. E: ".concat(o))}))}},toggleCuadroAbierto:function(){this.cuadroAbierto=!this.cuadroAbierto},cerrarse:function(){this.reset(),this.cuadroAbierto=!1},actualizarNombreDeArchivo:function(){if(!this.$refs.inputArchivoAdjunto.value)return console.log("Nullificando el nombre de archivo seleccionado"),void(this.nombreArchivoSeleccionado=null);this.nombreArchivoSeleccionado=this.$refs.inputArchivoAdjunto.files[0].name},abrirSelectorDeArchivos:function(){this.$refs.inputArchivoAdjunto.click()},reset:function(){this.nombreArchivoSeleccionado=null,this.$refs.inputArchivoAdjunto.value=null,this.mensaje=null,this.interpolaciones=[],this.enlaceAdjuntable=null,this.enlaceAdjunto=[]},interpolarQuote:function(o){var e=this,i={tipo:"quote",quote:o};this.interpolaciones.push(i),this.cuadroAbierto||(this.cuadroAbierto=!0),this.$nextTick((function(){e.$el.scrollIntoView({behavior:"smooth"})}))},insertarCreadorInterpolacion:function(o){var e={tipo:o};this.interpolaciones.push(e)},checkHeight:function(){console.log("El textarea tiene un height de ".concat(this.$refs.inputMensaje.offsetHeight," pero un scroll height de ").concat(this.$refs.inputMensaje.scrollHeight));while(this.$refs.inputMensaje.scrollHeight>this.$refs.inputMensaje.offsetHeight)this.$refs.inputMensaje.rows++},eliminarInterpolacion:function(o,e){var i=this;o&&(0==e?this.mensaje?(this.mensaje+="\n\n"+o,this.$nextTick((function(){i.checkHeight()}))):this.mensaje=o:(console.log("añadiendo el mensaje ".concat(o," al creador de interpolacion ").concat(e-1)),this.$refs.creadoresInterpolacion[e-1].addToMensaje(o))),this.interpolaciones.splice(e,1)},setEnlaceIframeInterpolacion:function(o,e){console.log("Seting enlace iframe en el array de interpolaciones"),this.$set(this.interpolaciones[e],"enlaceIframe",o)},retirarTypeName:function(o){var e=this;return console.log("Retirando typenames"),o.forEach((function(o){delete o.__typename,o.quote&&(delete o.quote.__typename,o.quote.infoAutor&&delete o.quote.infoAutor.__typename,o.quote.interpolaciones&&(o.quote.interpolaciones=e.retirarTypeName(o.quote.interpolaciones)))})),o},setInterpolacionesData:function(){var o=this;this.interpolaciones.forEach((function(e,i){e.mensaje=o.$refs.creadoresInterpolacion[i].mensaje})),this.interpolaciones=this.retirarTypeName(this.interpolaciones)}},computed:{mensajeIlegal:function(){var o=this.mensaje?this.mensaje:"";return this.interpolaciones.forEach((function(e){e.mensaje&&(o+=e.mensaje)})),!!Ar.test(o)},enlaceAdjuntableIlegal:function(){return!this.enlaceAdjuntable||("https://"!=this.enlaceAdjuntable.substr(0,8)?(console.log("El inicio ".concat(this.enlaceAdjuntable.substr(0,8)," difiere del esperado")),!0):this.enlaceAdjuntable.length<7)}},mounted:function(){console.log("Revisando si hay idConversacion"),this.idConversacion||(this.cuadroAbierto=!0)}},yr=Cr,Er=(i("8b1d"),Object(p["a"])(yr,nr,tr,!1,null,"1cc9b412",null)),wr=Er.exports,xr=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"respuesta"},[n("div",{staticClass:"infoRespuesta"},[o._v(o._s(o.fechaFormateada))]),n("img",{staticClass:"caritaAutor",attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaRespuesta.infoAutor.id,alt:o.estaRespuesta.infoAutor.nombre}}),n("div",{attrs:{id:"zonaCuerpoMensaje"}},[n("div",{staticClass:"mensajeRespuesta"},[o._v(" "+o._s(o.estaRespuesta.mensaje)+" ")]),o._l(o.estaRespuesta.interpolaciones,(function(o){return n("interpolacion",{key:o.id,attrs:{estaInterpolacion:o}})}))],2),o.estaRespuesta.archivo&&o.estaRespuesta.archivo.googleDriveDirectLink?n("div",{attrs:{id:"archivo"}},[n("a",{attrs:{href:o.estaRespuesta.archivo.googleDriveDirectLink}},[n("img",{attrs:{src:i("60ee"),alt:"Descargar archivo",id:"imgDownloadArchivo"}})])]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.estaRespuesta.enlaceAdjunto&&o.estaRespuesta.enlaceAdjunto.length>0,expression:"\n      estaRespuesta.enlaceAdjunto && estaRespuesta.enlaceAdjunto.length > 0\n    "}],staticClass:"enlacesAdjuntos"},o._l(o.estaRespuesta.enlaceAdjunto,(function(e,i){return n("a",{key:i,attrs:{target:"_blank",href:e}},[n("div",{staticClass:"enlaceAdjunto"},[o._v(" "+o._s(e)+" ")])])})),0),n("div",{staticClass:"controles"},[n("img",{staticClass:"botonInsertar",attrs:{src:i("eaba"),alt:"Cita",title:"Citar esta respuesta"},on:{click:o.emitirSolicitudCita}}),o.usuarioSuperadministrador?n("div",{staticClass:"controlRespuesta",attrs:{id:"bEliminar"},on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])])},Pr=[];function Sr(){var o=Object(s["a"])(["\n          mutation($idRespuesta: ID!, $idConversacion: ID!) {\n            eliminarRespuesta(\n              idRespuesta: $idRespuesta\n              idConversacion: $idConversacion\n            )\n          }\n        "]);return Sr=function(){return o},o}var Dr={components:{Interpolacion:vr},name:"Respuesta",props:{estaRespuesta:{type:Object},idConversacion:String},computed:{fechaFormateada:function(){var o=new Date(this.estaRespuesta.fecha).toString(),e=o.indexOf("("),i=o.substr(0,e),n=i.indexOf("GMT");return n>-1&&(i=i.substr(0,n)),i},usuarioAutor:function(){return this.usuario.id==this.estaRespuesta.infoAutor.id}},methods:{emitirSolicitudCita:function(){var o={mensaje:this.estaRespuesta.mensaje,interpolaciones:this.estaRespuesta.interpolaciones,infoAutor:this.estaRespuesta.infoAutor,fecha:this.estaRespuesta.fecha};o.interpolaciones.forEach((function(o){delete o.__typename})),delete o.infoAutor.__typename,this.$emit("meQuierenCitar",o)},eliminarse:function(){var o=this;confirm("Eliminando respuesta ¿Continuar?")&&this.$apollo.mutate({mutation:d()(Sr()),variables:{idRespuesta:this.estaRespuesta.id,idConversacion:this.idConversacion},update:function(e,i){var n=i.data.eliminarRespuesta;n&&(console.log("Respuesta eliminada"),o.$emit("meElimine"))}})}}},Ir=Dr,Rr=(i("3ccd"),Object(p["a"])(Ir,xr,Pr,!1,null,"02ceacf0",null)),kr=Rr.exports;function Mr(){var o=Object(s["a"])(["\n  query($idConversacion: ID!, $pagina: Int!) {\n    respuestasPaginaDeConversacion(\n      idConversacion: $idConversacion\n      pagina: $pagina\n    ) {\n      pagina\n      numPaginas\n      respuestas {\n        ...fragRespuesta\n      }\n    }\n  }\n  ","\n"]);return Mr=function(){return o},o}var jr=d()(Mr(),An),$r={components:{Respuesta:kr,CuadroResponder:wr},name:"Conversacion",apollo:{numPaginas:{query:jr,variables:function(){return{idConversacion:this.estaConversacion.id,pagina:this.numPaginaSeleccionada}},update:function(o){var e=o.respuestasPaginaDeConversacion,i=e.pagina,n=e.numPaginas,t=e.respuestas;return this.$set(this.respuestasPorPagina,i,t),this.numPaginaSeleccionada!=i&&(this.numPaginaSeleccionada=i),this.loading=!1,n},skip:function(){return!this.seleccionado},fetchPolicy:"no-cache"}},data:function(){return{numPaginas:0,numPaginaSeleccionada:0,respuestasPorPagina:{},loading:!0}},props:{estaConversacion:{type:Object,default:function(){return{respuestas:[]}}},idForo:String,parent:Object,seleccionado:Boolean,usuarioMiembro:{type:Boolean,default:!1}},methods:{addRespuesta:function(o){var e=this.numPaginas;(this.respuestasPorPagina[e].length>=5||e<1)&&(e++,this.respuestasPorPagina[e]||this.$set(this.respuestasPorPagina,e,[])),this.respuestasPorPagina[e].push(o),this.$refs.cuadroResponder.cerrarse(),this.numPaginaSeleccionada!=e&&(this.numPaginaSeleccionada=e),console.log("Emitiendo 'respuesta publicada'"),this.$emit("respuestaPublicada")},updateRespuestaEliminada:function(o,e){console.log("Respuesta ".concat(o," eliminada de la pagina ").concat(e)),1==this.numPaginas&&this.respuestasPorPagina[1].length<2?(console.log("Era la ultima respuesta"),this.$emit("meElimine")):(console.log("Refreshing respuestas pagina"),this.$apollo.queries.numPaginas.refresh())},citarRespuesta:function(o){this.$refs.cuadroResponder.interpolarQuote(o)}},computed:{cantidadRespuestasLeidasUsuario:function(){var o=this;if(this.usuario&&this.usuario.foros){var e=this.usuario.foros.find((function(e){return e.idForo==o.idForo}));if(!e)return 0;var i=e.conversaciones.find((function(e){return e.idConversacion==o.estaConversacion.id}));return i?i.respuestasLeidas:0}return 0},fechaFormateada:function(){if(!this.estaConversacion.infoUltimaRespuesta||!this.estaConversacion.infoUltimaRespuesta.fecha)return"Fecha desconocida";var o=new Date(this.estaConversacion.infoUltimaRespuesta.fecha).toString(),e=o.indexOf("("),i=o.substr(0,e),n=i.indexOf("GMT");return n>-1&&(i=i.substr(0,n)),i}},watch:{seleccionado:function(o,e){o&&!e&&this.$emit("meAbrieron")}}},Or=$r,qr=(i("906a"),Object(p["a"])(Or,er,ir,!1,null,"9e3ce0f2",null)),Tr=qr.exports;function Br(){var o=Object(s["a"])(["\n              mutation(\n                $idUsuario: ID!\n                $idForo: ID!\n                $idConversacion: ID!\n                $cantidadRespuestasLeidas: Int!\n              ) {\n                setCantidadRespuestasConversacionLeidasPorUsuario(\n                  idUsuario: $idUsuario\n                  idForo: $idForo\n                  idConversacion: $idConversacion\n                  cantidadRespuestasLeidas: $cantidadRespuestasLeidas\n                )\n              }\n            "]);return Br=function(){return o},o}function Ur(){var o=Object(s["a"])(["\n              mutation($idUsuario: ID!, $idForo: ID!, $idConversacion: ID!) {\n                setTodasRespuestasConversacionLeidasPorUsuario(\n                  idUsuario: $idUsuario\n                  idForo: $idForo\n                  idConversacion: $idConversacion\n                )\n              }\n            "]);return Ur=function(){return o},o}function Fr(){var o=Object(s["a"])(["\n  query($idForo: ID!, $pagina: Int!) {\n    conversacionesPaginaForo(idForo: $idForo, pagina: $pagina) {\n      pagina\n      numPaginas\n      conversaciones {\n        ...fragConversacion\n      }\n    }\n  }\n  ","\n"]);return Fr=function(){return o},o}function _r(){var o=Object(s["a"])(["\n  query($idForo: ID!) {\n    foro(idForo: $idForo) {\n      id\n      acceso\n      miembros\n    }\n  }\n"]);return _r=function(){return o},o}var Lr=/[^ a-zA-ZÀ-ž0-9_():.,-¡!¿?]/,zr=d()(_r()),Vr=d()(Fr(),Cn),Qr={components:{Conversacion:Tr,CuadroResponder:wr},name:"Foro",apollo:{esteForo:{query:zr,variables:function(){return{idForo:this.idForo}},fetchPolicy:"cache-and-network",update:function(o){return o.foro},skip:function(){return!this.idForo}},numPaginas:{query:Vr,variables:function(){return{idForo:this.idForo,pagina:this.numPaginaSeleccionada}},fetchPolicy:"no-cache",skip:function(){return!this.idForo},update:function(o){var e=o.conversacionesPaginaForo,i=e.conversaciones,n=e.pagina,t=e.numPaginas;return this.numPaginaSeleccionada!=n&&(this.numPaginaSeleccionada=n),this.$set(this.conversacionesPorPagina,n,i),t}}},props:{idForo:String,parent:Object},data:function(){return{esteForo:{miembros:[],conversaciones:[]},idConversacionSeleccionada:null,creandoConversacion:!1,numPaginaSeleccionada:0,conversacionesPorPagina:{},tituloNuevaConversacion:null}},methods:{addConversacion:function(o){this.creandoConversacion=!1,this.setTodaConversacionLeida(o.id),this.tituloNuevaConversacion=null,this.numPaginaSeleccionada=1,this.$apollo.queries.numPaginas.refetch()},refreshPagina:function(){this.idConversacionSeleccionada=null,this.$apollo.queries.numPaginas.refresh()},setTodaConversacionLeida:function(o){var e=this;this.usuario&&this.usuario.id&&(console.log("Setting toda conversación leida"),this.$apollo.mutate({mutation:d()(Ur()),variables:{idUsuario:this.usuario.id,idForo:this.idForo,idConversacion:o}}).then((function(i){var n=i.data.setTodasRespuestasConversacionLeidasPorUsuario;console.log("Resultado: ".concat(n)),e.$store.commit("setRespuestasLeidasConversacionUsuario",{idForo:e.idForo,idConversacion:o,respuestasLeidas:n})})).catch((function(o){console.log("Error. E: ".concat(o))})))},setConversacionLeida:function(o,e){var i=this;this.usuario&&this.usuario.id&&(console.log("Setting conversación leida"),this.$apollo.mutate({mutation:d()(Br()),variables:{idUsuario:this.usuario.id,idForo:this.idForo,idConversacion:o,cantidadRespuestasLeidas:parseInt(e)}}).then((function(n){var t=n.data.setCantidadRespuestasConversacionLeidasPorUsuario;console.log("Resultado: ".concat(t)),t&&i.$store.commit("setRespuestasLeidasConversacionUsuario",{idForo:i.idForo,idConversacion:o,respuestasLeidas:e})})).catch((function(o){console.log("Error. E: ".concat(o))})))}},computed:{usuarioMiembro:function(){return"publico"==this.esteForo.acceso||!("privado"!=this.esteForo.acceso||!this.esteForo.miembros.includes(this.$store.state.usuario.id))},conversacionAbierta:function(){return this.idConversacionSeleccionada},tituloNuevaConversacionIlegal:function(){return!this.tituloNuevaConversacion||this.tituloNuevaConversacion.length<1||!!Lr.test(this.tituloNuevaConversacion)}}},Jr=Qr,Hr=(i("96fc"),Object(p["a"])(Jr,Xs,or,!1,null,"bfb90dd8",null)),Zr=Hr.exports;function Gr(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionNodoConocimiento(\n                idNodo: $idNodo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return Gr=function(){return o},o}function Kr(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevoNombre: String!) {\n              editarNombreNodo(idNodo: $idNodo, nuevoNombre: $nuevoNombre) {\n                modificados {\n                  id\n                  nombre\n                }\n              }\n            }\n          "]);return Kr=function(){return o},o}function Yr(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idUsuario: ID!) {\n              removeExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                expertos\n                posiblesExpertos\n              }\n            }\n          "]);return Yr=function(){return o},o}function Wr(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idUsuario: ID!) {\n              addExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                expertos\n                posiblesExpertos\n              }\n            }\n          "]);return Wr=function(){return o},o}function Xr(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              crearNuevaSeccionNodoConocimiento(idNodo: $idNodo) {\n                id\n                nombre\n                modo\n                archivos {\n                  nombre\n                  primario\n                }\n                tipoPrimario\n              }\n            }\n          "]);return Xr=function(){return o},o}function od(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idSeccion: ID!) {\n              eliminarSeccionNodoConocimiento(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n              )\n            }\n          "]);return od=function(){return o},o}function ed(){var o=Object(s["a"])(["\n  query ($idNodo: ID!) {\n    nodo(idNodo: $idNodo) {\n      nombre\n      id\n      descripcion\n      clases {\n        id\n        nombre\n        idExperto\n        descripcion\n        interesados\n      }\n      keywords\n      expertos\n      posiblesExpertos\n      clases {\n        id\n      }\n      idForoPublico\n      idForoExpertos\n      secciones {\n        id\n        nombre\n        modo\n        enlace\n        archivos {\n          nombre\n          primario\n        }\n        tipoPrimario\n      }\n      vinculos {\n        idRef\n        rol\n        tipo\n      }\n    }\n  }\n"]);return ed=function(){return o},o}var id=d()(ed()),nd={components:{SeccionNodoConocimiento:Ws,Loading:mo,IconoPersonaAutonomo:Dn,Foro:Zr},name:"VisorNodoConocimiento",apollo:{esteNodo:{query:id,variables:function(){return{idNodo:this.$route.params.idNodo}},update:function(o){var e=o.nodo;return e}}},data:function(){return{esteNodo:{expertos:[],posiblesExpertos:[]},mostrandoContenido:"estudiar",mostrandoSeccion:null,mostrandoMenuSecciones:!1,creandoNuevaSeccion:!1,idExpertoSeleccionado:null,enviandoQueryExpertos:!1,editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:null,editandoDescripcion:!1}},methods:{deleteArchivoSeccionCache:function(o,e){var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:id,variables:{idNodo:this.esteNodo.id}}),t=JSON.parse(JSON.stringify(n)),a=t.nodo.secciones.find((function(o){return o.id==e}));if(a){var s=a.archivos.findIndex((function(e){return e.nombre===o}));s>-1?(a.archivos.splice(s,1),i.writeQuery({query:id,variables:{idNodo:this.esteNodo.id},data:t})):console.log("Archivo no encontrado")}else console.log("Seccion no encontrada")},addArchivoSeccionCache:function(o,e){var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:id,variables:{idNodo:this.esteNodo.id}}),t=JSON.parse(JSON.stringify(n)),a=t.nodo.secciones.find((function(o){return o.id==e}));a.archivos.push(o),i.writeQuery({query:id,variables:{idNodo:this.esteNodo.id},data:t})},eliminarSeccion:function(o){if((this.usuarioExperto||this.usuarioSuperadministrador)&&confirm("Eliminando esta sección con todos sus contenidos. ¿Continuar?")){console.log("Enviando mutación de eliminar seccion ".concat(o));var e=this;this.$apollo.mutate({mutation:d()(od()),variables:{idNodo:this.esteNodo.id,idSeccion:o}}).then((function(i){var n=i.data.eliminarSeccionNodoConocimiento;if(console.log("resultado: ".concat(n)),n){var t=e.$apollo.provider.defaultClient,a=t.readQuery({query:id,variables:{idNodo:e.esteNodo.id}}),s=JSON.parse(JSON.stringify(a)),r=s.nodo.secciones.findIndex((function(e){return e.id==o}));r>-1?(s.nodo.secciones.splice(r,1),t.writeQuery({query:id,variables:{idNodo:e.esteNodo.id},data:s})):console.log("Seccion no encontrada")}})).catch((function(o){console.log("Error: E: ".concat(o))}))}},crearNuevaSeccion:function(){var o=this;if(this.usuarioExperto||this.usuarioSuperadministrador){this.creandoNuevaSeccion=!0;var e=this;this.$apollo.mutate({mutation:d()(Xr()),variables:{idNodo:this.esteNodo.id}}).then((function(i){var n=i.data.crearNuevaSeccionNodoConocimiento,t=e.$apollo.provider.defaultClient,a=t.readQuery({query:id,variables:{idNodo:e.esteNodo.id}}),s=JSON.parse(JSON.stringify(a));s.nodo.secciones.push(n),t.writeQuery({query:id,variables:{idNodo:e.esteNodo.id},data:s}),o.creandoNuevaSeccion=!1})).catch((function(e){console.log("Error. E: ".concat(e)),o.creandoNuevaSeccion=!1}))}},setPrimarioSeccionCache:function(o,e){var i=this.$apollo.provider.defaultClient,n=i.readQuery({query:id,variables:{idNodo:this.esteNodo.id}}),t=JSON.parse(JSON.stringify(n)),a=t.nodo.secciones.find((function(o){return o.id==e}));if(a){var s=a.archivos.findIndex((function(e){return e.nombre===o}));a.archivos.forEach((function(o){return o.primario=!1})),a.archivos[s].primario=!0,i.writeQuery({query:id,variables:{idNodo:this.esteNodo.id},data:t})}else console.log("Seccion no encontrada")},intentarEntrarExpertos:function(o){var e=this;console.log("enviando id ".concat(this.$store.state.usuario.id," para entrar a expertos del nodo con id ").concat(this.esteNodo.id)),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:d()(Wr()),variables:{idNodo:this.esteNodo.id,idUsuario:o}}).then((function(){e.enviandoQueryExpertos=!1})).catch((function(o){e.enviandoQueryExpertos=!1,console.log("error: "+o)}))},abandonarListaExpertos:function(o){var e=this;console.log("Abandonando la responsabilidad en este nodo"),(this.usuarioExperto||this.esteNodo.posiblesExpertos.includes(this.usuario.id))&&(this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:d()(Yr()),variables:{idNodo:this.esteNodo.id,idUsuario:o}}).then((function(){e.enviandoQueryExpertos=!1})).catch((function(o){e.enviandoQueryExpertos=!1,console.log("error: "+o)})))},iniciarEdicionNombre:function(){(this.usuarioExperto||this.usuarioAdministradorAtlas||this.usuarioSuperadministrador)&&(this.$refs.inputNuevoNombre.value=this.esteNodo.nombre,this.editandoNombre=!0)},guardarNuevoNombre:function(){var o=this,e=this.$refs.inputNuevoNombre.value.trim();e!=this.esteNodo.nombre?e.length<1||(Ct.test(e)?console.log("Caracteres ilegales"):(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(Kr()),variables:{idNodo:this.esteNodo.id,nuevoNombre:e}}).then((function(e){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(e)," ")),o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))})))):this.editandoNombre=!1},toggleEditandoDescripcion:function(){var o=this;(this.usuarioExperto||this.usuarioSuperadministrador||this.usuarioAdministradorAtlas)&&(this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteNodo.descripcion,this.editandoDescripcion&&this.$nextTick((function(){o.$refs.inputNuevoDescripcion.focus()})))},guardarNuevoDescripcion:function(){var o=this,e=this.$refs.inputNuevoDescripcion.value;e!=this.esteNodo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:d()(Gr()),variables:{idNodo:this.esteNodo.id,nuevoDescripcion:e}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1}},computed:{seccionSeleccionada:function(){var o=this;return this.mostrandoSeccion?this.esteNodo.secciones.find((function(e){return e.id===o.mostrandoSeccion})):null},usuarioExperto:function(){return!(!this.esteNodo.expertos||!this.usuarioLogeado)&&!!this.esteNodo.expertos.includes(this.usuario.id)},usuarioAdministradorAtlas:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("atlasAdminstrador")},infoAsParent:function(){return{id:this.esteNodo.id,tipo:"nodoConocimiento",nombre:this.esteNodo.nombre}}}},td=nd,ad=(i("dd89"),Object(p["a"])(td,Os,qs,!1,null,"9b94ffe4",null)),sd=ad.exports,rd=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"proyectos"}},[i("center",[i("h3",[o._v("Grupos")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!o.loading,expression:"!loading"}],attrs:{id:"controles"}},[o.usuarioLogeado?i("div",{staticClass:"controles hoverGris",attrs:{id:"crearProyecto"},on:{click:o.crearNuevoProyecto}},[o._v(" Crear nuevo grupo ")]):o._e(),o.usuarioSuperadministrador&&o.proyectos.some((function(e){return e.id==o.idProyectoSeleccionado}))?i("div",{staticClass:"controles hoverGris",attrs:{id:"bEliminarProyecto"},on:{click:function(e){return o.eliminarProyecto(o.idProyectoSeleccionado)}}},[o._v(" Eliminar grupo ")]):o._e()]),i("div",{attrs:{id:"listaProyectos"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idProyectoSeleccionado=null}}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loading,expression:"loading"}],attrs:{texto:"Cargando lista de grupos..."}}),o._l(o.proyectosOrdenadosSegunUsuario,(function(e){return i("icono-proyecto",{key:e.id,attrs:{esteProyecto:e,seleccionado:o.idProyectoSeleccionado==e.id},nativeOn:{click:function(i){o.idProyectoSeleccionado=e.id}}})}))],2)],1)},dd=[],cd=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"iconoProyecto",class:{proyectoPropio:o.usuarioResponsableProyecto,seleccionado:o.seleccionado},on:{dblclick:o.navegarAlProyecto}},[n("p",{ref:"nombre",attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteProyecto.nombre)+" ")]),n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{src:i("4e77"),alt:"entrar",title:"Entrar a este proyecto",id:"bEntrarProyecto"},on:{click:function(e){return e.stopPropagation(),o.navegarAlProyecto(e)}}})])},ud=[],ld={name:"IconoProyecto",props:{esteProyecto:Object,seleccionado:Boolean},data:function(){return{nombreEditandose:!1}},computed:{usuarioResponsableProyecto:function(){return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.includes(this.usuario.id)}},methods:{navegarAlProyecto:function(){this.$router.push("/proyecto/"+this.esteProyecto.id)}}},vd=ld,md=(i("6332"),Object(p["a"])(vd,cd,ud,!1,null,"71c5f02f",null)),pd=md.exports;function hd(){var o=Object(s["a"])(["\n          mutation($idProyecto:ID!){\n            eliminarProyecto(idProyecto: $idProyecto)\n          }\n        "]);return hd=function(){return o},o}function fd(){var o=Object(s["a"])(["\n          mutation{\n            crearProyecto{\n              id\n              nombre\n              responsables              \n            }\n          }\n        "]);return fd=function(){return o},o}function gd(){var o=Object(s["a"])(["\nquery {\n    proyectos {\n      id\n      nombre\n      responsables\n    }\n  }\n"]);return gd=function(){return o},o}var bd=d()(gd()),Nd={components:{IconoProyecto:pd,Loading:mo},name:"Proyectos",apollo:{proyectos:{query:bd,fetchPolicy:"cache-and-network",update:function(o){var e=this,i=o.proyectos;return i.sort((function(o,i){var n=0;return o.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&n--,i.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&n++,e.loading=!1,n}))}}},data:function(){return{proyectos:[],idProyectoSeleccionado:null,loading:!0}},methods:{crearNuevoProyecto:function(){var o=this;console.log("Creando nuevo proyecto"),this.$apollo.mutate({mutation:d()(fd())}).then((function(e){var i=e.data.crearProyecto;o.$router.push("/proyecto/"+i.id)})).catch((function(o){console.log("Error: ".concat(o.errors))}))},eliminarProyecto:function(o){confirm("¿Confirmar la eliminación del grupo? (Esta acción no se puede deshacer)")&&(console.log("Eliminando proyecto ".concat(o)),this.$apollo.mutate({mutation:d()(hd()),variables:{idProyecto:o},update:function(e,i){var n=i.data.eliminarProyecto;if(console.log("Actualizando cache"),n){var t=e.readQuery({query:bd}),a=JSON.parse(JSON.stringify(t)),s=a.proyectos.findIndex((function(e){return e.id==o}));s>-1?(a.proyectos.splice(s,1),e.writeQuery({query:bd,data:a}),console.log("Caché actualizado")):console.log("No existía ese proyecto en el cache")}}}).then((function(){})).catch((function(o){console.log("Error. E:".concat(o))})))}},computed:{username:function(){return this.$store.state.usuario.username},proyectosOrdenadosSegunUsuario:function(){var o=this;return this.usuario&&this.usuario.id?Object(to["a"])(this.proyectos).sort((function(e,i){var n=0;return e.responsables.includes(o.usuario.id)&&n--,i.responsables.includes(o.usuario.id)&&n++,n})):this.proyectos}}},Ad=Nd,Cd=(i("ad61"),Object(p["a"])(Ad,rd,dd,!1,null,"5afa1db9",null)),yd=Cd.exports,Ed=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"proyecto"},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.loading,expression:"loading"}],attrs:{texto:"Cargando grupo..."}}),o.loading?o._e():[n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaNombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del proyecto"},on:{click:o.toggleEditandoNombre}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:o.guardarNuevoNombre}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombreProyecto"}},[o._v(" "+o._s(o.esteProyecto.nombre)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text",id:"inputNuevoNombre"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),n("img",{attrs:{src:i("c51c"),alt:"Enlace al foro",id:"enlaceForo",title:"Ir al foro de este proyecto"},on:{click:o.navegarAlForo}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoDescripcion=!o.mostrandoDescripcion}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoDescripcion?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Descripcion ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoDescripcion,expression:"mostrandoDescripcion"}]},[o.usuarioResponsableProyecto?n("div",{staticClass:"controlesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrDescripcion",title:"Editar descripcion del proyecto"},on:{click:o.toggleEditandoDescripcion}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n              editandoDescripcion == true && nuevoDescripcionIlegal == false\n            "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:o.guardarNuevoDescripcion}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteProyecto.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1)]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoResponsables=!o.mostrandoResponsables}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoResponsables?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" "+o._s(1===o.esteProyecto.responsables.length?"Coordinador":"Coordinadores")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoResponsables,expression:"mostrandoResponsables"}]},[n("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.esteProyecto.responsables.length<1?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),1==o.usuarioLogeado&&o.usuarioResponsableProyecto&&o.responsablesSolicitados<1?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"solicitarResponsable"},on:{click:function(e){return o.setResponsablesSolicitados(1)}}},[o._v(" Solicitar responsable ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsableProyecto&&!o.usuarioPosibleResponsableProyecto&&o.esteProyecto.responsables.length>0?n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsableProyecto&&1!=o.usuarioPosibleResponsableProyecto?o._e():n("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioResponsableProyecto?n("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idResponsableSeleccionado&&0==o.responsableSeleccionadoEstaAceptado,expression:"\n              idResponsableSeleccionado != null &&\n              responsableSeleccionadoEstaAceptado == false\n            "}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}},[o._v(" Aceptar como responsable ")]):o._e()],1),n("div",{attrs:{id:"listaResponsables"}},[o._l(o.esteProyecto.responsables,(function(e){return n("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!0}}})})),o._l(o.esteProyecto.posiblesResponsables,(function(e){return n("icono-persona-autonomo",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto||o.usuario&&o.usuario.id&&o.usuario.id===e,expression:"\n              usuarioResponsableProyecto ||\n              (usuario && usuario.id && usuario.id === idPersona)\n            "}],key:e,staticClass:"personaPosibleResponsable",attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!1},dblclick:function(i){return i.shiftKey?o.aceptarResponsable(e):null}}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:o.responsablesSolicitados>0,expression:"responsablesSolicitados > 0"}],staticClass:"iconoResponsablesSolicitados"},[n("img",{staticClass:"imagenResponsablesSolicitados",attrs:{src:i("5e1a3"),alt:"Usuario solicitado",title:"Personas adicionales solicitadas"}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.responsablesSolicitados,expression:"responsablesSolicitados"}],style:[{backgroundColor:o.esteProyecto.responsablesSolicitados!=o.responsablesSolicitados?"orange":"white"}],attrs:{type:"number",id:"inputResponsablesSolicitados",readonly:!o.usuarioResponsableProyecto},domProps:{value:o.responsablesSolicitados},on:{input:function(e){e.target.composing||(o.responsablesSolicitados=e.target.value)}}})])],2)])]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaParticipantes"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoParticipantes=!o.mostrandoParticipantes}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoParticipantes?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" "+o._s(1===o.esteProyecto.participantes.length?"Participante":"Participantes")+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoParticipantes,expression:"mostrandoParticipantes"}]},[n("div",{staticClass:"controlesZona",attrs:{id:"controlesParticipantes"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryParticipantes,expression:"enviandoQueryParticipantes"}],attrs:{texto:"Esperando..."}}),1!=o.usuarioLogeado||o.usuarioParticipanteProyecto||o.usuarioResponsableProyecto?o._e():n("div",{staticClass:"controlesParticipantes hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryParticipantes},on:{click:function(e){return o.entrarListaParticipantes()}}},[o._v(" Participar ")]),1==o.usuarioLogeado&&o.usuarioParticipanteProyecto?n("div",{staticClass:"controlesParticipantes hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryParticipantes},on:{click:function(e){return o.abandonarListaParticipantes()}}},[o._v(" Abandonar ")]):o._e()],1),n("div",{attrs:{id:"listaParticipantes"}},o._l(o.esteProyecto.participantes,(function(e){return n("icono-persona-autonomo",{key:"participante"+e,attrs:{idPersona:e,seleccionado:o.idParticipanteSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idParticipanteSeleccionado=e,o.participanteSeleccionadoEstaAceptado=!0}}})})),1)])]),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaEventos"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoEventos=!o.mostrandoEventos}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoEventos?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Eventos ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoEventos,expression:"mostrandoEventos"}]},[n("div",{staticClass:"controlesZona",attrs:{id:"controlesEventos"}}),n("calendario",{key:"calendario"+o.versionCalendario,attrs:{configCalendario:{tipo:"club",id:o.esteProyecto.id},creacionEventosDisallowed:!o.usuarioResponsableProyecto}})],1)]),n("div",{ref:"zonaDiagramaFlujo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaDiagramaFlujo"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoDiagramaFlujo=!o.mostrandoDiagramaFlujo}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoDiagramaFlujo?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" Diagrama de flujo ")])]),n("div",{staticClass:"controlesZona",attrs:{id:"controlesObjetivos"}}),o.mostrandoDiagramaFlujo?n("diagrama-flujo",{attrs:{idProyecto:o.esteProyecto.id,objetivos:o.esteProyecto.objetivos,trabajos:o.esteProyecto.trabajos,usuarioResponsableProyecto:o.usuarioResponsableProyecto,activo:null==o.idNodoAbierto,deshabilitar:o.realizandoOperacionDiagrama},on:{crearTrabajoEnPosicion:o.crearNuevoTrabajo,crearObjetivoEnPosicion:o.crearNuevoObjetivo,nodoAbierto:o.abrirNodo},nativeOn:{click:function(e){o.idNodoAbierto=null}}}):o._e()],1),n("div",{ref:"zonaForo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaForo"}},[n("div",{staticClass:"barraSuperiorZona"},[n("div",{staticClass:"nombreZona",on:{click:function(e){o.mostrandoForo=!o.mostrandoForo}}},[n("div",{staticClass:"trianguloBullet",style:{transform:o.mostrandoForo?"rotateZ(90deg)":"rotateZ(0deg)"}}),o._v(" foro ")])]),o.usuarioResponsableProyecto||o.usuarioParticipanteProyecto?n("foro",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoForo,expression:"mostrandoForo"}],attrs:{parent:o.infoAsParent,idForo:o.esteProyecto.idForo}}):o._e()],1)]],2)},wd=[],xd=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"diagramaFlujo",class:{deshabilitado:o.deshabilitar},style:[o.opacidad,{backgroundColor:o.hovered?"rgb(225, 229, 241)":"white"}],attrs:{id:"diagramaFlujo"},on:{mouseenter:function(e){o.hovered=!0},mouseleave:function(e){o.hovered=!1},contextmenu:function(e){return e.target!==e.currentTarget?null:(e.preventDefault(),o.abrirMenuCx(e))},mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.target!==e.currentTarget?null:void(o.panningVista=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.target!==e.currentTarget?null:o.mouseUpFondo(e)},mousemove:o.panVista}},[i("canvas-diagrama-flujo",{style:[o.posicionCanvasFlechas],attrs:{todosNodos:o.todosNodos,factorZoom:o.factorZoom}}),i("div",{attrs:{id:"contenedorNodos"}},[o._l(o.trabajos,(function(e){return i("nodo-trabajo",{key:e.id,attrs:{esteTrabajo:e,idProyecto:o.idProyecto,usuarioResponsableProyecto:o.usuarioResponsableProyecto,seleccionado:o.idNodoSeleccionado==e.id,posDummy:o.posDummy,menuCx:o.idNodoClickDerecho===e.id,idNodoSeleccionado:o.idNodoSeleccionado,centroVista:o.centroVista,factorZoom:Number(o.factorZoom.toFixed(2))},on:{meAbrieron:function(i){return o.$emit("nodoAbierto",e.id)},miInfo:function(i){return o.actualizarInfoTrabajos(e.id,i)},crearRequerimento:function(e){return o.crearRequerimento("trabajo",e)},eliminarVinculo:function(e){return o.eliminarVinculo("trabajo",e)}},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id,o.tipoNodoSeleccionado="trabajo"},dblclick:function(i){o.idNodoPaVentanita=e.id},contextmenu:function(i){i.preventDefault(),o.idNodoClickDerecho=e.id}}})})),o._l(o.objetivos,(function(e){return i("nodo-objetivo",{key:e.id,attrs:{idProyecto:o.idProyecto,esteObjetivo:e,usuarioResponsableProyecto:o.usuarioResponsableProyecto,seleccionado:o.idNodoSeleccionado==e.id,idNodoSeleccionado:o.idNodoSeleccionado,posDummy:o.posDummy,menuCx:o.idNodoClickDerecho===e.id,centroVista:o.centroVista,factorZoom:o.factorZoom},on:{meAbrieron:function(i){return o.$emit("nodoAbierto",e.id)},crearRequerimento:function(e){return o.crearRequerimento("objetivo",e)},eliminarVinculo:function(e){return o.eliminarVinculo("objetivo",e)}},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id,o.tipoNodoSeleccionado="objetivo"},dblclick:function(i){o.idNodoPaVentanita=e.id},contextmenu:function(i){i.preventDefault(),i.stopPropagation(),o.idNodoClickDerecho=e.id}}})}))],2),o.idNodoPaVentanita&&o.objetivoEnVentanita?i("ventanita-objetivo",{key:"ventanita"+o.objetivoEnVentanita.id,staticClass:"ventanitaNodo",attrs:{usuarioResponsableProyecto:o.usuarioResponsableProyecto,esteObjetivo:o.objetivoEnVentanita,idProyecto:o.idProyecto}}):o._e(),o.idNodoPaVentanita&&o.trabajoEnVentanita?i("ventanita-trabajo",{key:"ventanita"+o.trabajoEnVentanita.id,staticClass:"ventanitaNodo",attrs:{usuarioResponsableProyecto:o.usuarioResponsableProyecto,esteTrabajo:o.trabajoEnVentanita,idProyecto:o.idProyecto}}):o._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuCx,expression:"mostrandoMenuCx"}],style:o.posMenuCx,attrs:{id:"menuCx"}},[i("div",{staticClass:"itemMenuCx",on:{click:o.crearTrabajoAqui}},[o._v("Crear trabajo aquí")]),i("div",{staticClass:"itemMenuCx",on:{click:o.crearObjetivoAqui}},[o._v(" Crear objetivo aquí ")])])],1)},Pd=[],Sd=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"canvasDiagramaFlujo"}},[i("canvas",{ref:"canvasTodosVinculos",staticClass:"canvas",style:[o.offsetCanvasTodosVinculos],attrs:{id:"canvasTodosVinculos"}}),i("canvas",{ref:"canvasVinculosSeleccionado",staticClass:"canvas",style:[o.sizeCanvasTodosVinculos],attrs:{id:"canvasVinculosSeleccionado"}})])},Dd=[],Id={name:"CanvasDiagramaFlujo",props:{todosNodos:Array,factorZoom:Number,nodoSeleccionado:{type:Object,default:function(){return{}}}},data:function(){return{sizeCanvasTodosVinculos:{width:0,height:0}}},methods:{crearImagenTodosVinculos:function(){var o=this;if(console.log("Creando imagen todos vínculos"),!(this.todosNodos.length<=1)){var e=this.$refs.canvasTodosVinculos.getContext("2d"),i={x:this.esquinasCanvasTodosVinculos.x1,y:this.esquinasCanvasTodosVinculos.y1};e.canvas.width=this.esquinasCanvasTodosVinculos.x2-this.esquinasCanvasTodosVinculos.x1,e.canvas.height=this.esquinasCanvasTodosVinculos.y2-this.esquinasCanvasTodosVinculos.y1,e.lineWidth=1,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.strokeStyle="#b3b3b3";var n,t=Object(no["a"])(this.todosNodos);try{for(t.s();!(n=t.n()).done;){var a,s=n.value,r=Object(no["a"])(s.vinculos);try{var d=function(){var n=a.value;if(!o.todosNodos.some((function(o){return o.id==n.idRef})))return"continue";o.dibujarLineaEntreNodos(o.todosNodos.find((function(o){return o.id==n.idRef})),s,e,i)};for(r.s();!(a=r.n()).done;)d()}catch(c){r.e(c)}finally{r.f()}}}catch(c){t.e(c)}finally{t.f()}e.stroke()}},crearImagenVinculosSeleccionado:function(){var o=this;if(this.lapiz=this.$refs.canvasVinculosSeleccionado.getContext("2d"),this.lapiz.clearRect(0,0,this.lapiz.canvas.width,this.lapiz.canvas.height),this.todosNodos.some((function(e){return e.id==o.nodoSeleccionado.id}))){this.lapiz.beginPath(),this.lapiz.lineWidth=2,this.lapiz.strokeStyle="#008000";var e,i=Object(no["a"])(this.nodoSeleccionado.vinculos);try{var n=function(){var i=e.value;if(!o.todosNodos.some((function(o){return o.id==i.idRef})))return console.log("ALERTA. Vinculo a ".concat(i.idRef," huerfano")),"continue";var n=o.todosNodos.find((function(o){return o.id==i.idRef}));o.dibujarLineaEntreNodos(n,o.nodoSeleccionado)};for(i.s();!(e=i.n()).done;)n()}catch(t){i.e(t)}finally{i.f()}this.lapiz.stroke()}},dibujarLineaEntreNodos:function(o,e,i,n){var t={x:o.coords.x*this.factorZoom-n.x,y:o.coords.y*this.factorZoom-n.y},a={x:e.coords.x*this.factorZoom-n.x,y:e.coords.y*this.factorZoom-n.y},s=a.y-t.y,r=Math.round(.5*s),d={x:t.x,y:t.y+r},c={x:a.x,y:a.y-r};i.moveTo(t.x,t.y),i.lineTo(d.x,d.y),i.lineTo(c.x,c.y),i.lineTo(a.x,a.y)}},computed:{esquinasCanvasTodosVinculos:function(){var o=this.todosNodos;if(o.length<=1)return{x1:0,y1:0,x2:0,y2:0};var e={};return e.top=o.reduce((function(o,e){return e.coords.y>o?e.coords.y:o}),0),e.bot=o.reduce((function(o,e){return e.coords.y<o?e.coords.y:o}),0),e.left=o.reduce((function(o,e){return e.coords.x<o?e.coords.x:o}),0),e.right=o.reduce((function(o,e){return e.coords.x>o?e.coords.x:o}),0),{x1:e.left*this.factorZoom,y1:e.bot*this.factorZoom,x2:(e.right+2)*this.factorZoom,y2:(e.top+2)*this.factorZoom}},offsetCanvasTodosVinculos:function(){return{left:this.esquinasCanvasTodosVinculos.x1+"px",top:this.esquinasCanvasTodosVinculos.y1+"px",width:this.esquinasCanvasTodosVinculos.x2-this.esquinasCanvasTodosVinculos.x1+"px",height:this.esquinasCanvasTodosVinculos.y2-this.esquinasCanvasTodosVinculos.y1+"px"}}},watch:{todosNodos:function(){this.todosNodos.length<1||(this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado())},nodoSeleccionado:function(){this.crearImagenVinculosSeleccionado()},factorZoom:function(){this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()}},mounted:function(){this.montado=!0,this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()}},Rd=Id,kd=(i("0d50"),Object(p["a"])(Rd,Sd,Dd,!1,null,"b4555e88",null)),Md=kd.exports,jd=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoObjetivo",class:{seleccionado:o.seleccionado},style:[o.estiloPosicion,o.estiloZeta,o.estiloSize],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.agarrado=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"bAbrirNodo",attrs:{src:i("666f"),alt:"abrir",title:"Ampliar información"},on:{click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),o.$emit("meAbrieron"))}}}),n("div",{staticClass:"zonaNombre"},[n("div",{attrs:{id:"nombre",draggable:"false"}},[n("img",{staticClass:"iconoObjetivo",class:{iconoCompletado:"cumplido"===o.esteObjetivo.estado},style:{width:Math.round(17*o.factorZoom)+"px"},attrs:{src:i("713c"),alt:"",draggable:"false"}}),o._v(o._s(o.esteObjetivo.nombre)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[null==o.idNodoSeleccionado||o.idNodoSeleccionado==o.esteObjetivo.id||1!=o.usuarioSuperadministrador&&!o.usuarioResponsableProyecto?o._e():[n("div",{staticClass:"seccionMenuCx"},[o._v("El elemento seleccionado...")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearRequerimento(o.idNodoSeleccionado,o.esteObjetivo.id)}}},[o._v(" Requiere este elemento ")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.idNodoSeleccionado,o.esteObjetivo.id)}}},[o._v(" Desconectar ")])]],2)])},$d=[];function Od(){var o=Object(s["a"])(["\n            mutation(\n              $idObjetivo: ID!\n              $idProyecto: ID!\n              $nuevaPosicion: CoordsInput\n            ) {\n              setPosicionObjetivoProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevaPosicion: $nuevaPosicion\n              ) {\n                id\n                coords{\n                  x\n                  y                  \n                }\n              }\n            }\n          "]);return Od=function(){return o},o}var qd={name:"NodoObjetivo",props:{esteObjetivo:Object,idProyecto:String,usuarioResponsableProyecto:Boolean,seleccionado:Boolean,idNodoSeleccionado:String,posDummy:Object,menuCx:Boolean,centroVista:Object,factorZoom:Number},data:function(){return{agarrado:!1,arrastrandoNodo:0,umbralArrastreNodo:10,posicion:{x:0,y:0},montado:!1,widthBase:150,heightBase:100}},methods:{arrastrarNodo:function(o){if(this.agarrado&&(!1!==this.usuarioResponsableProyecto||!1!==this.usuarioSuperadministrador)&&(this.arrastrandoNodo=this.arrastrandoNodo+Math.abs(o.movementX)+Math.abs(o.movementY),!(this.arrastrandoNodo<this.umbralArrastreNodo))){var e=this.$parent.$el,i=e.getBoundingClientRect(),n=Math.round((o.clientY-i.top)/this.factorZoom+this.centroVista.y),t=Math.round((o.clientX-i.left)/this.factorZoom+this.centroVista.x),a=25,s=15;t-=t%a,n-=n%s,this.$set(this.posicion,"x",t),this.$set(this.posicion,"y",n)}},guardarPosicion:function(){this.arrastrandoNodo<this.umbralArrastreNodo?this.agarrado=!1:(this.arrastrandoNodo=0,this.agarrado=!1,this.$apollo.mutate({mutation:d()(Od()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id,nuevaPosicion:this.posicion}}).then((function(){console.log("Posición guardada")})).catch((function(o){console.log("Error. E: ".concat(o))})))},crearRequerimento:function(o,e){console.log("Se fijara que ".concat(o," requiere a ").concat(e)),this.$emit("crearRequerimento",{idNodoRequiere:o,idNodoRequerido:e})},eliminarVinculo:function(o,e){console.log("Se fijara que ".concat(o," ya no requiere a ").concat(e)),this.$emit("eliminarVinculo",{idNodoRequiere:o,idNodoRequerido:e})}},computed:{estiloPosicion:function(){return this.montado?{top:(this.posicion.y-this.centroVista.y)*this.factorZoom-this.$el.offsetHeight/2+"px",left:(this.posicion.x-this.centroVista.x)*this.factorZoom-this.$el.offsetWidth/2+"px"}:{top:"0px",left:"0px"}},estiloZeta:function(){var o=0;return(this.arrastrandoNodo>this.umbralArrastreNodo||this.seleccionado)&&(o=100),this.menuCx&&(o=200),{zIndex:o}},estiloSize:function(){return{width:Math.round(this.widthBase*this.factorZoom)+"px",height:Math.round(this.heightBase*this.factorZoom)+"px",fontSize:Math.round(14*this.factorZoom)+"px",padding:Math.round(5*this.factorZoom)+"px"}}},watch:{esteObjetivo:function(){console.log("Seteando posicion from network"),this.$set(this.posicion,"x",this.esteObjetivo.coords.x),this.$set(this.posicion,"y",this.esteObjetivo.coords.y)}},mounted:function(){this.montado=!0,this.$set(this.posicion,"x",this.esteObjetivo.coords.x),this.$set(this.posicion,"y",this.esteObjetivo.coords.y)}},Td=qd,Bd=(i("b81f"),Object(p["a"])(Td,jd,$d,!1,null,"ba6a15a8",null)),Ud=Bd.exports,Fd=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoTrabajo",class:{seleccionado:o.seleccionado},style:[o.estiloPosicion,o.estiloZeta,o.estiloSize],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.agarrado=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"bAbrirNodo",attrs:{src:i("666f"),alt:"abrir",title:"Ampliar información"},on:{click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),o.$emit("meAbrieron"))}}}),n("div",{staticClass:"zonaNombre"},[n("div",{attrs:{id:"nombre"}},[n("img",{staticClass:"iconoTrabajo",class:{iconoCompletado:"completado"===o.esteTrabajo.estadoDesarrollo},style:{width:Math.round(17*o.factorZoom)+"px"},attrs:{src:i("e463"),alt:"",draggable:"false"}}),o._v(" "+o._s(o.esteTrabajo.nombre)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[null==o.idNodoSeleccionado||o.idNodoSeleccionado==o.esteTrabajo.id||1!=o.usuarioSuperadministrador&&!o.usuarioResponsableProyecto?o._e():[n("div",{staticClass:"seccionMenuCx"},[o._v("El elemento seleccionado...")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearRequerimento(o.idNodoSeleccionado,o.esteTrabajo.id)}}},[o._v(" Requiere este elemento ")]),n("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.idNodoSeleccionado,o.esteTrabajo.id)}}},[o._v(" Desconectar ")])]],2)])},_d=[];function Ld(){var o=Object(s["a"])(["\n            mutation(\n              $idTrabajo: ID!\n              $idProyecto: ID!\n              $nuevaPosicion: CoordsInput\n            ) {\n              setPosicionTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevaPosicion: $nuevaPosicion\n              ) {\n                id\n                coords {                  \n                  x\n                  y                  \n                }\n              }\n            }\n          "]);return Ld=function(){return o},o}var zd={name:"NodoTrabajo",data:function(){return{agarrado:!1,arrastrandoNodo:0,umbralArrastreNodo:10,posicion:{x:0,y:0},montado:!1,widthBase:150,heightBase:100}},props:{esteTrabajo:Object,idProyecto:String,idNodoSeleccionado:String,usuarioResponsableProyecto:Boolean,seleccionado:Boolean,posDummy:Object,menuCx:Boolean,centroVista:Object,factorZoom:Number},methods:{arrastrarNodo:function(o){if(this.agarrado&&(!1!==this.usuarioResponsableProyecto||!1!==this.usuarioSuperadministrador)&&(this.arrastrandoNodo=this.arrastrandoNodo+Math.abs(o.movementX)+Math.abs(o.movementY),!(this.arrastrandoNodo<this.umbralArrastreNodo))){var e=this.$parent.$el,i=e.getBoundingClientRect(),n=Math.round((o.clientY-i.top)/this.factorZoom+this.centroVista.y),t=Math.round((o.clientX-i.left)/this.factorZoom+this.centroVista.x),a=25,s=15;t-=t%a,n-=n%s,this.$set(this.posicion,"x",t),this.$set(this.posicion,"y",n)}},guardarPosicion:function(){var o=this;this.arrastrandoNodo<this.umbralArrastreNodo?this.agarrado=!1:(this.arrastrandoNodo=0,this.agarrado=!1,this.$apollo.mutate({mutation:d()(Ld()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id,nuevaPosicion:this.posicion}}).then((function(){console.log("Posición guardada"),o.emitirMiInfo()})).catch((function(o){console.log("Error. E: ".concat(o))})))},emitirMiInfo:function(){var o={id:this.esteTrabajo.id,posicion:this.esteTrabajo.coords,vinculos:this.esteTrabajo.vinculos};this.$emit("miInfo",o)},crearRequerimento:function(o,e){console.log("Se fijara que ".concat(o," requiere a ").concat(e)),this.$emit("crearRequerimento",{idNodoRequiere:o,idNodoRequerido:e})},eliminarVinculo:function(o,e){console.log("Se fijara que ".concat(o," ya no requiere a ").concat(e)),this.$emit("eliminarVinculo",{idNodoRequiere:o,idNodoRequerido:e})}},computed:{estiloPosicion:function(){return this.montado?{top:(this.posicion.y-this.centroVista.y)*this.factorZoom-this.$el.offsetHeight/2+"px",left:(this.posicion.x-this.centroVista.x)*this.factorZoom-this.$el.offsetWidth/2+"px"}:{top:"0px",left:"0px"}},estiloZeta:function(){var o=0;return 1!=this.arrastrandoNodo&&1!=this.seleccionado||(o=100),this.menuCx&&(o=200),{zIndex:o}},estiloSize:function(){return{width:Math.round(this.widthBase*this.factorZoom)+"px",height:Math.round(this.heightBase*this.factorZoom)+"px",fontSize:Math.round(14*this.factorZoom)+"px",padding:Math.round(5*this.factorZoom)+"px"}}},watch:{esteTrabajo:function(){this.$set(this.posicion,"x",this.esteTrabajo.coords.x),this.$set(this.posicion,"y",this.esteTrabajo.coords.y)}},mounted:function(){this.montado=!0,this.$set(this.posicion,"x",this.esteTrabajo.coords.x),this.$set(this.posicion,"y",this.esteTrabajo.coords.y)}},Vd=zd,Qd=(i("1414"),Object(p["a"])(Vd,Fd,_d,!1,null,"81dfd8d2",null)),Jd=Qd.exports,Hd=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanitaObjetivo",class:{seleccionado:o.seleccionado}},[n("div",{staticClass:"zonaPrimerNivel",class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[n("div",{attrs:{id:"nombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"elPropioNombre"}},[o._v(" "+o._s(o.esteObjetivo.nombre)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),o.usuarioResponsableProyecto?n("div",{staticClass:"controlesLateralesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})]):o._e()]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),n("img",{class:{iconoCompletado:"cumplido"===o.esteObjetivo.estado,deshabilitado:o.togglingEstado},attrs:{src:i("713c"),alt:"",id:"imagenIcono"},on:{click:function(e){o.usuarioResponsableProyecto&&o.toggleEstadoObjetivo()}}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona"},[n("span",{staticClass:"nombreZona"},[o._v("Descripcion")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteObjetivo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{attrs:{id:"controlesObjetivo"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto||o.usuarioSuperadministrador,expression:"usuarioResponsableProyecto || usuarioSuperadministrador"}],staticClass:"controlesObjetivo hoverGris bEliminar",on:{click:o.eliminarse}},[o._v(" Eliminar ")])])])},Zd=[];function Gd(){var o=Object(s["a"])(["\n          mutation($idProyecto:ID!, $idObjetivo:ID!, $nuevoEstado:String!){\n            setEstadoObjetivoProyecto(idProyecto:$idProyecto, idObjetivo:$idObjetivo, nuevoEstado:$nuevoEstado){\n              id\n              estado\n            }\n          }\n        "]);return Gd=function(){return o},o}function Kd(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idObjetivo: ID!) {\n              eliminarObjetivoDeProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n              )\n            }\n          "]);return Kd=function(){return o},o}function Yd(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionObjetivoProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return Yd=function(){return o},o}function Wd(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevoNombre: String!\n            ) {\n              editarNombreObjetivoProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Wd=function(){return o},o}var Xd=/[^ a-zA-ZÀ-ž0-9_():.,-]/,oc=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,ec={name:"VentanitaObjetivo",components:{Loading:mo},data:function(){return{deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,togglingEstado:!1}},props:{idProyecto:String,esteObjetivo:Object,seleccionado:Boolean,usuarioResponsableProyecto:Boolean},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!Xd.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return this.nuevoDescripcion.length<1||!!oc.test(this.nuevoDescripcion)}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteObjetivo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(Wd()),variables:{idObjetivo:this.esteObjetivo.id,idProyecto:this.idProyecto,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteObjetivo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:d()(Yd()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteObjetivo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteObjetivo.descripcion},eliminarse:function(){var o=this;console.log("Objetivo eliminandose"),confirm("¿Seguro de eliminar este objetivo?")&&(this.deshabilitado=!0,this.$apollo.mutate({mutation:d()(Kd()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id}}).then((function(e){var i=e.data.eliminarObjetivoDeProyecto;o.deshabilitado=!1,console.log("Resultado: ".concat(i)),o.$emit("meElimine")})).catch((function(e){o.deshabilitado=!1,console.log("Error. E: ".concat(e))})))},toggleEstadoObjetivo:function(){var o=this,e="noCumplido";"noCumplido"===this.esteObjetivo.estado&&(e="cumplido"),this.togglingEstado=!0,this.$apollo.mutate({mutation:d()(Gd()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id,nuevoEstado:e}}).then((function(){o.togglingEstado=!1,console.log("toggled")})).catch((function(e){o.togglingEstado=!1,console.log("Error: E:".concat(e))}))}}},ic=ec,nc=(i("aaf2"),Object(p["a"])(ic,Hd,Zd,!1,null,"0d4091b8",null)),tc=nc.exports,ac=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanitaTrabajo"},[n("img",{class:{iconoCompletado:"completado"===o.esteTrabajo.estadoDesarrollo,deshabilitado:o.togglingEstado},attrs:{src:i("e463"),alt:"",id:"imagenIcono"},on:{click:function(e){o.usuarioResponsableProyecto&&o.toggleEstadoTrabajo()}}}),n("div",{class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[n("div",{attrs:{id:"nombre"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"elPropioNombre"}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),o.usuarioResponsableProyecto?n("div",{staticClass:"controlesLateralesZona"},[n("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})]):o._e()]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}})],1),n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{staticClass:"barraSuperiorZona"},[n("span",{staticClass:"nombreZona"},[o._v("Descripcion")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaNodosConocimiento"}},[n("div",{staticClass:"nombreZona"},[o._v("Nodos de conocimiento involucrados")]),n("div",{staticClass:"controlesZona",attrs:{id:"controlesNodosConocimiento"}},[1==o.usuarioResponsableProyecto?n("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Añadir ")]):o._e(),1==o.usuarioResponsableProyecto&&null!=o.idNodoSeleccionado&&o.esteTrabajo.nodosConocimiento.some((function(e){return e.id==o.idNodoSeleccionado}))?n("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Remover ")]):o._e()]),n("div",{attrs:{id:"listaNodosConocimiento"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idNodoSeleccionado=null}}},[o._l(o.esteTrabajo.nodosConocimiento,(function(e){return n("icono-nodo-conocimiento",{key:e.id,attrs:{esteNodo:e},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id}}})})),n("buscador-nodos-conocimiento")],2)])])},sc=[];function rc(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoEstado: String!) {\n              setEstadoTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoEstado: $nuevoEstado\n              ) {\n                id\n                estadoDesarrollo\n              }\n            }\n          "]);return rc=function(){return o},o}function dc(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!) {\n              eliminarTrabajoDeProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n              )\n            }\n          "]);return dc=function(){return o},o}function cc(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return cc=function(){return o},o}function uc(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return uc=function(){return o},o}function lc(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevoKeywords: String!\n            ) {\n              editarKeywordsTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoKeywords: $nuevoKeywords\n              ) {\n                id\n                keywords\n              }\n            }\n          "]);return lc=function(){return o},o}function vc(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return vc=function(){return o},o}function mc(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoNombre: String!) {\n              editarNombreTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return mc=function(){return o},o}var pc=/[^ a-zA-ZÀ-ž0-9_():.,-]/,hc=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,fc=/[^ a-zA-Zñ,]/,gc={name:"VentanitaTrabajo",components:{BuscadorNodosConocimiento:Mo,Loading:mo,IconoPersonaAutonomo:Dn},data:function(){return{idNodoSeleccionado:null,deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,nuevoKeywords:"palabras clave",editandoKeywords:!1,enviandoNuevoKeywords:!1,togglingEstado:!1}},props:{idProyecto:String,seleccionado:Boolean,usuarioResponsableProyecto:{type:Boolean,defaul:!1},idTrabajo:String,esteTrabajo:Object},computed:{usuarioResponsableTrabajo:function(){return this.esteTrabajo.responsables.includes(this.usuario.id)},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!pc.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return this.nuevoDescripcion.length<1||!!hc.test(this.nuevoDescripcion)},nuevoKeywordsIlegal:function(){return this.nuevoKeywords.length<1||!!fc.test(this.nuevoKeywords)},infoAsParent:function(){return{id:this.esteTrabajo.id,tipo:"trabajo",nombre:this.esteTrabajo.nombre}}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteTrabajo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(mc()),variables:{idTrabajo:this.esteTrabajo.id,idProyecto:this.idProyecto,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteTrabajo.descripcion?(console.log("guardando nuevo descripcion en proyecto con id ".concat(this.idProyecto)),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:d()(vc()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},guardarNuevoKeywords:function(){var o=this;this.nuevoKeywordsIlegal?console.log("No enviado"):this.nuevoKeywords!=this.esteTrabajo.keywords?(console.log("guardando nuevo keywords"),this.enviandoNuevoKeywords=!0,this.$apollo.mutate({mutation:d()(lc()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id,nuevoKeywords:this.nuevoKeywords}}).then((function(){o.enviandoNuevoKeywords=!1,o.editandoKeywords=!1})).catch((function(e){o.enviandoNuevoKeywords=!1,console.log("Error. E :".concat(e))}))):this.editandoKeywords=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteTrabajo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteTrabajo.descripcion},toggleEditandoKeywords:function(){this.$refs.inputNuevoKeywords.style.height=this.$refs.keywords.offsetHeight+"px",this.editandoKeywords=!this.editandoKeywords,this.nuevoKeywords=this.esteTrabajo.keywords},asumirComoResponsable:function(){console.log("enviando id ".concat(this.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id," en el proyecto con id ").concat(this.idProyecto)),this.$apollo.mutate({mutation:d()(uc()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},abandonarListaResponsables:function(){console.log("Abandonando este trabajo"),this.$apollo.mutate({mutation:d()(cc()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},eliminarse:function(){var o=this;console.log("Trabajo eliminandose"),confirm("¿Seguro de eliminar este trabajo?")&&(this.deshabilitado=!0,this.$apollo.mutate({mutation:d()(dc()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id}}).then((function(e){var i=e.data.eliminarTrabajoDeProyecto;o.deshabilitado=!1,console.log("Resultado: ".concat(i)),o.$emit("meElimine")})).catch((function(e){o.deshabilitado=!1,console.log("Error. E: ".concat(e))})))},navegarAlTrabajo:function(){this.$router.push("/trabajo/"+this.idTrabajo)},toggleEstadoTrabajo:function(){var o=this,e="noCompletado";"noCompletado"===this.esteTrabajo.estadoDesarrollo&&(e="completado"),this.togglingEstado=!0,this.$apollo.mutate({mutation:d()(rc()),variables:{idProyecto:this.idProyecto,idTrabajo:this.esteTrabajo.id,nuevoEstado:e}}).then((function(){o.togglingEstado=!1,console.log("toggled")})).catch((function(e){o.togglingEstado=!1,console.log("Error: E:".concat(e))}))}}},bc=gc,Nc=(i("ef69"),Object(p["a"])(bc,ac,sc,!1,null,"f6f3cf26",null)),Ac=Nc.exports;function Cc(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idNodoRequiere: ID!\n              $idNodoRequerido: ID!\n              $tipoNodoRequiere: String!\n              $tipoNodoRequerido: String!\n            ) {\n              desvincularNodosProyecto(\n                idProyecto: $idProyecto\n                idNodoRequiere: $idNodoRequiere\n                idNodoRequerido: $idNodoRequerido\n                tipoNodoRequiere: $tipoNodoRequiere\n                tipoNodoRequerido: $tipoNodoRequerido\n              ) {\n                nodo {\n                  ... on ObjetivoDeProyecto {\n                    id\n                    vinculos {\n                      idRef\n                      tipoRef\n                      tipo\n                    }\n                  }\n                  ... on TrabajoDeProyecto {\n                    id\n                    vinculos {\n                      idRef\n                      tipoRef\n                      tipo\n                    }\n                  }\n                }\n              }\n            }\n          "]);return Cc=function(){return o},o}function yc(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idNodoRequiere: ID!\n              $idNodoRequerido: ID!\n              $tipoNodoRequiere: String!\n              $tipoNodoRequerido: String!\n            ) {\n              crearRequerimentoEntreNodosProyecto(\n                idProyecto: $idProyecto\n                idNodoRequiere: $idNodoRequiere\n                idNodoRequerido: $idNodoRequerido\n                tipoNodoRequiere: $tipoNodoRequiere\n                tipoNodoRequerido: $tipoNodoRequerido\n              ) {\n                nodo {\n                  ... on ObjetivoDeProyecto {\n                    id\n                    vinculos {\n                      idRef\n                      tipoRef\n                      tipo\n                    }\n                  }\n                  ... on TrabajoDeProyecto {\n                    id\n                    vinculos {\n                      idRef\n                      tipoRef\n                      tipo\n                    }\n                  }\n                }\n              }\n            }\n          "]);return yc=function(){return o},o}var Ec={components:{NodoObjetivo:Ud,NodoTrabajo:Jd,CanvasDiagramaFlujo:Md,VentanitaObjetivo:tc,VentanitaTrabajo:Ac},name:"DiagramaFlujo",props:{trabajos:Array,objetivos:Array,idProyecto:String,usuarioResponsableProyecto:Boolean,activo:Boolean,deshabilitar:{type:Boolean,default:!1}},data:function(){return{posicionMenuCx:{x:0,y:0},mostrandoMenuCx:!1,idNodoSeleccionado:null,idNodoPaVentanita:null,tipoNodoSeleccionado:null,posDummy:{x:300,y:300},infoTrabajos:[],idNodoClickDerecho:null,centroVistaDecimal:{x:0,y:0},hovered:!1,zoom:100,maxZoom:200,minZoom:50}},computed:{posMenuCx:function(){return{top:this.posicionMenuCx.y+"px",left:this.posicionMenuCx.x+"px"}},opacidad:function(){return{opacity:this.activo?1:.4}},infoObjetivos:function(){return this.objetivos.map((function(o){return{id:o.id,posicion:o.coords,vinculos:o.vinculos}}))},posicionCanvasFlechas:function(){return{top:Math.round(-this.centroVista.y*this.factorZoom)+"px",left:Math.round(-this.centroVista.x*this.factorZoom)+"px"}},centroVista:function(){return{x:Math.round(this.centroVistaDecimal.x),y:Math.round(this.centroVistaDecimal.y)}},factorZoom:function(){return Number((this.zoom/100).toFixed(2))},todosNodos:function(){return this.objetivos.concat(this.trabajos)},objetivoEnVentanita:function(){var o=this;return this.idNodoPaVentanita?this.objetivos.find((function(e){return e.id==o.idNodoPaVentanita})):null},trabajoEnVentanita:function(){var o=this;return this.idNodoPaVentanita?this.trabajos.find((function(e){return e.id==o.idNodoPaVentanita})):null},nodoSeleccionado:function(){var o=this;return this.todosNodos.find((function(e){return e.id===o.idNodoSeleccionado}))}},methods:{abrirMenuCx:function(o){var e=this.$el,i=e.getBoundingClientRect();this.$set(this.posicionMenuCx,"x",Math.round(o.clientX-i.left+e.scrollLeft)),this.$set(this.posicionMenuCx,"y",Math.round(o.clientY-i.top+e.scrollTop)),this.mostrandoMenuCx=!0},crearTrabajoAqui:function(o){var e={x:0,y:0},i=this.$el,n=i.getBoundingClientRect();e.x=Math.round((o.clientX-n.left)/this.factorZoom+this.centroVista.x),e.y=Math.round((o.clientY-n.top)/this.factorZoom+this.centroVista.y),this.mostrandoMenuCx=!1,this.$emit("crearTrabajoEnPosicion",e)},crearObjetivoAqui:function(o){var e={x:0,y:0},i=this.$el,n=i.getBoundingClientRect();e.x=Math.round(o.clientX+this.centroVista.x-n.left),e.y=Math.round(o.clientY+this.centroVista.y-n.top),this.mostrandoMenuCx=!1,this.$emit("crearObjetivoEnPosicion",e)},actualizarInfoTrabajos:function(o,e){var i=this.infoTrabajos.findIndex((function(e){return e.id===o}));i>-1&&this.infoTrabajos.splice(i,1),this.infoTrabajos.push(e)},crearRequerimento:function(o,e){var i=e.idNodoRequiere,n=e.idNodoRequerido;console.log("Preparando mutación para setear que ".concat(i," requiere a ").concat(n," de tipo ").concat(o));var t=this.tipoNodoSeleccionado;this.$apollo.mutate({mutation:d()(yc()),variables:{idProyecto:this.idProyecto,idNodoRequiere:i,idNodoRequerido:n,tipoNodoRequiere:t,tipoNodoRequerido:o}}).then((function(o){var e=o.data.crearRequerimentoEntreNodosProyecto;console.log("Requerimento creado: ".concat(JSON.stringify(e)))})).catch((function(o){console.log("Error",o.message)}))},eliminarVinculo:function(o,e){var i=e.idNodoRequiere,n=e.idNodoRequerido;console.log("Preparando mutación para setear que ".concat(i," ya no está vinculado a ").concat(n," de tipo ").concat(o));var t=this.tipoNodoSeleccionado;this.$apollo.mutate({mutation:d()(Cc()),variables:{idProyecto:this.idProyecto,idNodoRequiere:i,idNodoRequerido:n,tipoNodoRequiere:t,tipoNodoRequerido:o}}).then((function(){console.log("Vinculo eliminado")})).catch((function(o){console.log("Error",o.message)}))},desplazarVista:function(o,e){this.$set(this.centroVistaDecimal,"x",this.centroVistaDecimal.x-o),this.$set(this.centroVistaDecimal,"y",this.centroVistaDecimal.y-e)},panVista:function(o){this.panningVista&&(this.desplazarVista(o.movementX/this.factorZoom,o.movementY/this.factorZoom),o.preventDefault(),this.vistaPanned=!0)},mouseUpFondo:function(){this.vistaPanned||(this.idNodoSeleccionado=null,this.idNodoPaVentanita=null,this.mostrandoMenuCx=!1,this.idNodoClickDerecho=null),this.vistaPanned=!1,this.panningVista=!1},zoomVista:function(o){if(this.hovered&&o.ctrlKey){o.preventDefault();var e=this.$el,i=e.getBoundingClientRect(),n={x:(o.clientX-i.left)/i.width,y:(o.clientY-i.top)/i.height},t={x:Math.round((o.clientX-i.left)/this.factorZoom)+this.centroVista.x,y:Math.round((o.clientY-i.top)/this.factorZoom)+this.centroVista.y},a=.2,s=this.zoom-Math.round(o.deltaY*a);s<this.minZoom?this.zoom=this.minZoom:s>this.maxZoom?this.zoom=this.maxZoom:this.zoom=s,this.$set(this.centroVistaDecimal,"x",t.x-i.width/this.factorZoom*n.x),this.$set(this.centroVistaDecimal,"y",t.y-i.height/this.factorZoom*n.y)}}},mount:function(){this.$set(this.sizeDiagrama,"w",this.$$parent.$refs.zonaDiagramaFlujo.offsetWidth),this.$set(this.sizeDiagrama,"h",this.$$parent.$refs.zonaDiagramaFlujo.offsetHeight)},created:function(){window.addEventListener("wheel",this.zoomVista,{passive:!1})},removed:function(){window.removeEventListener("wheel",this.zoomVista)}},wc=Ec,xc=(i("a09f"),Object(p["a"])(wc,xd,Pd,!1,null,"e9d97e16",null)),Pc=xc.exports;function Sc(){var o=Object(s["a"])(["\n            mutation (\n              $idProyecto: ID!\n              $nuevoCantidadResponsablesSolicitados: Int!\n            ) {\n              setResponsablesSolicitadosProyecto(\n                idProyecto: $idProyecto\n                nuevoCantidadResponsablesSolicitados: $nuevoCantidadResponsablesSolicitados\n              ) {\n                id\n                responsablesSolicitados\n              }\n            }\n          "]);return Sc=function(){return o},o}function Dc(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $posicion: CoordsInput) {\n              crearObjetivoEnProyecto(\n                idProyecto: $idProyecto\n                posicion: $posicion\n              ) {\n                ...fragObjetivoProyecto\n              }\n            }\n            ","\n          "]);return Dc=function(){return o},o}function Ic(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $posicion: CoordsInput) {\n              crearTrabajoEnProyecto(\n                idProyecto: $idProyecto\n                posicion: $posicion\n              ) {\n                ...fragTrabajoProyecto\n              }\n            }\n            ","\n          "]);return Ic=function(){return o},o}function Rc(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              removeParticipanteProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                participantes\n              }\n            }\n          "]);return Rc=function(){return o},o}function kc(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              addParticipanteProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                participantes\n              }\n            }\n          "]);return kc=function(){return o},o}function Mc(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Mc=function(){return o},o}function jc(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              addPosibleResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                posiblesResponsables\n              }\n            }\n          "]);return jc=function(){return o},o}function $c(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n                responsablesSolicitados\n              }\n            }\n          "]);return $c=function(){return o},o}function Oc(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $idUsuario: ID!) {\n              removeResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Oc=function(){return o},o}function qc(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionProyecto(\n                idProyecto: $idProyecto\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return qc=function(){return o},o}function Tc(){var o=Object(s["a"])(["\n            mutation ($idProyecto: ID!, $nuevoNombre: String!) {\n              editarNombreProyecto(\n                idProyecto: $idProyecto\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Tc=function(){return o},o}function Bc(){var o=Object(s["a"])(["\n  query ($idProyecto: ID!) {\n    proyecto(idProyecto: $idProyecto) {\n      ...fragProyecto\n    }\n  }\n  ","\n"]);return Bc=function(){return o},o}var Uc=d()(Bc(),gn),Fc=/[^ a-zA-ZÀ-ž0-9_():.,-]/,_c=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,Lc={components:{Loading:mo,Foro:Zr,IconoPersonaAutonomo:Dn,DiagramaFlujo:Pc,Calendario:ba},name:"proyecto",apollo:{esteProyecto:{query:Uc,variables:function(){return{idProyecto:this.$route.params.idProyecto}},update:function(o){return this.loading=!1,this.responsablesSolicitados=o.proyecto.responsablesSolicitados,o.proyecto},fetchPolicy:"network-only"}},data:function(){return{loading:!0,esteProyecto:{responsables:[],posiblesResponsables:[],participantes:[],trabajos:[],objetivos:[]},responsablesSolicitados:0,idResponsableSeleccionado:null,idParticipanteSeleccionado:null,responsableSeleccionadoEstaAceptado:!1,creandoTrabajo:!1,creandoObjetivo:!1,idTrabajoSeleccionado:null,idObjetivoSeleccionado:null,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,enviandoQueryResponsables:!1,enviandoQueryBienesServicios:!1,enviandoQueryParticipantes:!1,enviandoQueryEventos:!1,idNodoAbierto:null,mostrandoDescripcion:!0,mostrandoResponsables:!0,mostrandoParticipantes:!0,mostrandoEventos:!0,mostrandoDiagramaFlujo:!1,mostrandoForo:!0,mostrandoBienesServicios:!1,administrandoBienesServicios:!1,versionCalendario:0}},computed:{usuarioResponsableProyecto:function(){return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.includes(this.$store.state.usuario.id)},usuarioParticipanteProyecto:function(){return!!this.esteProyecto.participantes&&!!this.esteProyecto.participantes.includes(this.$store.state.usuario.id)},usuarioPosibleResponsableProyecto:function(){return!!this.esteProyecto.posiblesResponsables&&!!this.esteProyecto.posiblesResponsables.includes(this.usuario.id)},permisosEdicion:function(){return!(!this.usuarioResponsableProyecto&&"superadministrador"!=this.$store.state.usuario.permisos)},nuevoNombreIlegal:function(){return!this.nuevoNombre||this.nuevoNombre.length<1||!!Fc.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!_c.test(this.nuevoDescripcion)},infoAsParent:function(){return{id:this.esteProyecto.id,tipo:"proyecto",nombre:this.esteProyecto.nombre}},realizandoOperacionDiagrama:function(){return this.creandoTrabajo||this.creandoObjetivo}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteProyecto.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(Tc()),variables:{idProyecto:this.esteProyecto.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteProyecto.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:d()(qc()),variables:{idProyecto:this.esteProyecto.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteProyecto.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteProyecto.descripcion},abandonarListaResponsables:function(){var o=this;console.log("Abandonando la responsabilidad en este proyecto"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()(Oc()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},aceptarResponsable:function(o){var e=this;console.log("aceptando como responsable al usuario ".concat(o)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()($c()),variables:{idProyecto:this.esteProyecto.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1,e.responsableSeleccionadoEstaAceptado=!0,e.versionCalendario++})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))},entrarListaPosiblesResponsables:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles responsables del proyecto con id ".concat(this.esteProyecto.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()(jc()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},asumirComoResponsable:function(){var o=this;console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del proyecto con id ").concat(this.esteProyecto.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:d()(Mc()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},entrarListaParticipantes:function(){var o=this;console.log("Enviando peticion de entrar a la lista de participantes del proyecto con id ".concat(this.esteProyecto.id)),this.enviandoQueryParticipantes=!0,this.$apollo.mutate({mutation:d()(kc()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryParticipantes=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryParticipantes=!1,console.log("error: "+e)}))},abandonarListaParticipantes:function(){var o=this;console.log("Abandonando la participación en este proyecto"),this.enviandoQueryParticipantes=!0,this.$apollo.mutate({mutation:d()(Rc()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryParticipantes=!1,o.versionCalendario++})).catch((function(e){o.enviandoQueryParticipantes=!1,console.log("error: "+e)}))},crearNuevoTrabajo:function(o){var e=this;console.log("enviando mutacion de crear nuevo trabajo"),this.creandoTrabajo=!0,this.$apollo.mutate({mutation:d()(Ic(),hn),variables:{idProyecto:this.esteProyecto.id,posicion:o},update:function(o,i){var n=i.data.crearTrabajoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(n)));var t=n;try{var a=o.readQuery({query:Uc,variables:{idProyecto:e.esteProyecto.id}});console.log("Trabajos en cache: ".concat(a.proyecto.trabajos.length));var s=JSON.parse(JSON.stringify(a));s.proyecto.trabajos.push(t),o.writeQuery({query:Uc,variables:{idProyecto:e.esteProyecto.id},data:s}),console.log("cache actualizado"),console.log("Trabajos en cache: ".concat(s.proyecto.trabajos.length))}catch(B){return void console.log("Error actualizando cache: ".concat(B))}}}).then((function(){e.creandoTrabajo=!1})).catch((function(o){e.creandoTrabajo=!1,console.log("error: ".concat(o))}))},crearNuevoObjetivo:function(o){var e=this;console.log("enviando mutacion de crear nuevo objetivo"),this.creandoObjetivo=!0,this.$apollo.mutate({mutation:d()(Dc(),fn),variables:{idProyecto:this.esteProyecto.id,posicion:o},update:function(o,i){var n=i.data.crearObjetivoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(JSON.stringify(n))));var t=n;try{var a=o.readQuery({query:Uc,variables:{idProyecto:e.esteProyecto.id}}),s=JSON.parse(JSON.stringify(a));s.proyecto.objetivos.push(t),o.writeQuery({query:Uc,variables:{idProyecto:e.esteProyecto.id},data:s}),console.log("cache actualizado")}catch(B){return void console.log("Error actualizando cache: ".concat(B))}}}).then((function(o){console.log("respuesta. ".concat(o)),e.creandoObjetivo=!1})).catch((function(o){e.creandoObjetivo=!1,console.log("error: ".concat(o))}))},eliminarTrabajoDeCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Uc,variables:{idProyecto:this.esteProyecto.id}}),n=JSON.parse(JSON.stringify(i)),t=n.proyecto.trabajos.indexOf(o);t>-1?n.proyecto.idsTrabajos.splice(t,1):console.log("El trabajo no existía en el proyecto"),e.writeQuery({query:Uc,variables:{idProyecto:this.esteProyecto.id},data:n})},eliminarObjetivoDeCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Uc,variables:{idProyecto:this.esteProyecto.id}}),n=JSON.parse(JSON.stringify(i)),t=n.proyecto.objetivos.findIndex((function(e){return e.id==o}));t>-1?n.proyecto.objetivos.splice(t,1):console.log("El objetivo no existía en el proyecto"),e.writeQuery({query:Uc,variables:{idProyecto:this.esteProyecto.id},data:n})},navegarAlForo:function(){console.log("Navegando al foro de este proyecto"),this.$refs.zonaForo.scrollIntoView()},abrirNodo:function(o){console.log("Abriendo nodo ".concat(o)),this.idNodoAbierto=o},debounceSetResponsablesSolicitados:hi()((function(){this.setResponsablesSolicitados(parseInt(this.responsablesSolicitados))}),2e3),setResponsablesSolicitados:function(o){o<0&&(o=0),this.$apollo.mutate({mutation:d()(Sc()),variables:{idProyecto:this.esteProyecto.id,nuevoCantidadResponsablesSolicitados:o}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))}},watch:{responsablesSolicitados:function(o){o!==this.esteProyecto.responsablesSolicitados&&(console.log("Cambio en responsables solicitados"),this.debounceSetResponsablesSolicitados())}}},zc=Lc,Vc=(i("ea8b"),Object(p["a"])(zc,Ed,wd,!1,null,"73860f95",null)),Qc=Vc.exports,Jc=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"registro"},[i("form",[i("div",{attrs:{id:"zonaDatosPersonales"}},[i("h3",[o._v("Información Personal")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.nombres,expression:"datosRegistro.nombres"}],attrs:{type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.datosRegistro.nombres},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"nombres",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.apellidos,expression:"datosRegistro.apellidos"}],attrs:{type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.datosRegistro.apellidos},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"apellidos",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.fechaNacimiento,expression:"datosRegistro.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.datosRegistro.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"fechaNacimiento",e.target.value)}}}),i("br")]),i("div",{attrs:{id:"zonaContacto"}},[i("h3",[o._v("Datos de contacto")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.email,expression:"datosRegistro.email"}],attrs:{type:"email",placeholder:"Correo electrónico"},domProps:{value:o.datosRegistro.email},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"email",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"numeroTel"}},[o._v("Número telefónico")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.numeroTel,expression:"datosRegistro.numeroTel"}],attrs:{type:"text",name:"numeroTel"},domProps:{value:o.datosRegistro.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"numeroTel",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"lugarResidencia"}},[o._v("Lugar de residencia")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.lugarResidencia,expression:"datosRegistro.lugarResidencia"}],attrs:{type:"text",placeholder:"Lugar de residencia"},domProps:{value:o.datosRegistro.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"lugarResidencia",e.target.value)}}})]),i("div",{attrs:{id:"zonaLogin"}},[i("h3",[o._v("Datos de login")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.username,expression:"datosRegistro.username"}],attrs:{type:"text",placeholder:"nombre de usuario",name:"username"},domProps:{value:o.datosRegistro.username},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"username",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.password,expression:"datosRegistro.password"}],attrs:{type:"password",placeholder:"password",name:"password"},domProps:{value:o.datosRegistro.password},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"password",e.target.value)}}}),i("br")]),i("button",{on:{click:function(e){return e.preventDefault(),o.enviarRegistro(e)}}},[o._v("Enviar")])])])},Hc=[],Zc=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,Gc=/[^ a-zA-ZÀ-žñÑ]/g,Kc=/[^0-9+-]/g,Yc=/\S+@\S+\.\S+/,Wc=/[12][90][0-9][0-9]-[01][0-9]-[0-3][0-9]/,Xc=/[^a-zA-Z0-9ñÑ*@_-]/g,ou=function(o){var e=[];for(var i in o){if(!o[i])return e.push("Falta ".concat(i)),e;o[i]=o[i].trim(),"nombres"==i?(o.nombres.length<2&&e.push("Tu nombre es muy corto"),Gc.test(o.nombres)&&e.push("Tu nombre contiene caracteres no permitidos")):"apellidos"==i?(o.apellidos.length<2&&e.push("Tu apellido es muy corto"),Gc.test(o.apellidos)&&e.push("Tu apellido contiene caracteres no permitidos")):"fechaNacimiento"==i?Wc.test(o.fechaNacimiento)||e.push("Tu fecha de nacimiento es incorrecta"):"email"==i?o.email.length>0&&!Yc.test(o.email)&&e.push("Tu e-mail no es válido"):"numeroTel"==i?Kc.test(o.numeroTel)&&e.push("Tu número telefónico no es válido"):"lugarResidencia"==i?(o.lugarResidencia.length<2&&e.push("Tu lugar de residencia es muy corto"),Zc.test(o.lugarResidencia)&&e.push("Tu lugar de residencia contiene caracteres no permitidos")):"username"==i?(o.username.length<4&&e.push("Tu nombre de usuario es muy corto"),Zc.test(o.username)&&e.push("Tu nombre de usuario contiene caracteres no permitidos")):"password"==i?((o.password.length<6||o.password.length>32)&&e.push("Tu contraseña debe contener entre 6 y 32 caracteres"),Xc.test(o.password)&&e.push("Tu password contiene caracteres no permitidos")):e.push("El dato ".concat(i," no tenía lógica de validación. Informa al administrador del sistema por favor"))}return e},eu={name:"Registro",data:function(){return{datosRegistro:{nombres:null,apellidos:null,fechaNacimiento:null,email:null,numeroTel:null,lugarResidencia:null,username:null,password:null},camposObligatorios:["nombres","apellidos","username","password"]}},methods:{enviarRegistro:function(){var o=new Object;for(var e in this.datosRegistro.username||(this.datosRegistro.username=this.datosRegistro.nombres.split(" ")[0]+this.datosRegistro.apellidos.split(" ")[0]),this.datosRegistro.password||(this.datosRegistro.password=this.datosRegistro.nombres.split(" ")[0]+this.datosRegistro.apellidos.split(" ")[0]),this.datosRegistro)this.datosRegistro[e]?o[e]=this.datosRegistro[e]:console.log("campo ".concat(e," vacio"));this.camposObligatorios.forEach((function(e){o[e]||console.log("Faltaba el campo ".concat(e))}));var i=this,n=ou(o);n.length<1?li.a.post(this.serverUrl+"/api/usuarios/registro",{usuario:o}).then((function(o){console.log("respuesta: ".concat(JSON.stringify(o.data))),o.data.registro&&alert("Registro ok"),i.vaciarCampos()})).catch((function(o){console.log("error: ".concat(o))})):console.log("Errores: ".concat(n))},vaciarCampos:function(){console.log("Vaciando campos"),this.datosRegistro={nombres:null,apellidos:null,fechaNacimiento:null,email:null,numeroTel:null,lugarResidencia:null,username:null,password:null}},alertar:function(o){console.log(o)}}},iu=eu,nu=(i("68d5"),Object(p["a"])(iu,Jc,Hc,!1,null,"725d119a",null)),tu=nu.exports,au=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"personas"},[n("router-view"),n("div",{staticClass:"barraSeccion"},[n("div",{staticClass:"contenedorControles",staticStyle:{"margin-left":"auto"}},[n("div",{staticClass:"boton",on:{click:function(e){o.mostrandoConfiguracion=!o.mostrandoConfiguracion}}},[n("img",{attrs:{src:i("fbca"),alt:"Configuración"}})])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoConfiguracion,expression:"mostrandoConfiguracion"}],staticClass:"zonaConfiguracion"},[n("div",{staticClass:"barraSeccion"},[o._v("Configuración")]),n("div",{staticClass:"contenedorBloquesConfiguracion"},[n("div",{staticClass:"bloqueConfiguracion"},[n("div",{staticClass:"campoConfiguracion"},[n("label",{attrs:{for:"checkMostrarEspacioActual"}},[o._v("Mostrar espacio en el que se encuentra cada persona")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.mostrarEspacioActual,expression:"mostrarEspacioActual"}],ref:"checkMostrarEspacioActual",attrs:{type:"checkbox",name:"checkMostrarEspacioActual",id:"checkMostrarEspacioActual"},domProps:{checked:Array.isArray(o.mostrarEspacioActual)?o._i(o.mostrarEspacioActual,null)>-1:o.mostrarEspacioActual},on:{change:function(e){var i=o.mostrarEspacioActual,n=e.target,t=!!n.checked;if(Array.isArray(i)){var a=null,s=o._i(i,a);n.checked?s<0&&(o.mostrarEspacioActual=i.concat([a])):s>-1&&(o.mostrarEspacioActual=i.slice(0,s).concat(i.slice(s+1)))}else o.mostrarEspacioActual=t}}})])])])]),n("div",{staticClass:"zonaConfiguracion"},[n("div",{staticClass:"contenedorBloquesConfiguracion"},[n("div",{staticClass:"bloqueConfiguracion"},[n("div",{staticClass:"campoConfiguracion",attrs:{id:"campoUsuariosMostrados"}},[n("span",{staticStyle:{width:"100%"}},[o._v(" Mostrar:")]),n("div",{staticClass:"opcion"},[n("label",{attrs:{for:"mostrarTodos"}},[o._v("Todos")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.tipoMostrarUsuarios,expression:"tipoMostrarUsuarios"}],ref:"mostrarTodos",attrs:{type:"radio",name:"radioMostrarTodos",value:"todos",id:"radioMostrarTodos"},domProps:{checked:o._q(o.tipoMostrarUsuarios,"todos")},on:{change:function(e){o.tipoMostrarUsuarios="todos"}}})]),n("div",{staticClass:"opcion"},[n("label",{attrs:{for:"mostrarEstudiantes"}},[o._v("Estudiantes")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.tipoMostrarUsuarios,expression:"tipoMostrarUsuarios"}],ref:"mostrarEstudiantes",attrs:{type:"radio",name:"radioMostrarEstudiantes",value:"estudiantes",id:"radioMostrarEstudiantes"},domProps:{checked:o._q(o.tipoMostrarUsuarios,"estudiantes")},on:{change:function(e){o.tipoMostrarUsuarios="estudiantes"}}})]),n("div",{staticClass:"opcion"},[n("label",{attrs:{for:"mostrarProfesores"}},[o._v("Profesorxs")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.tipoMostrarUsuarios,expression:"tipoMostrarUsuarios"}],ref:"mostrarProfesores",attrs:{type:"radio",name:"radioMostrarProfesores",value:"profesores",id:"radioMostrarProfesores"},domProps:{checked:o._q(o.tipoMostrarUsuarios,"profesores")},on:{change:function(e){o.tipoMostrarUsuarios="profesores"}}})]),n("div",{staticClass:"opcion"},[n("label",{attrs:{for:"mostrarGraduados"}},[o._v("Graduados")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.tipoMostrarUsuarios,expression:"tipoMostrarUsuarios"}],ref:"mostrarGraduados",attrs:{type:"radio",name:"radioMostrarGraduados",value:"graduados",id:"radioMostrarGraduados"},domProps:{checked:o._q(o.tipoMostrarUsuarios,"graduados")},on:{change:function(e){o.tipoMostrarUsuarios="graduados"}}})])])])])]),n("div",{attrs:{id:"zonaBuscar"}},[n("div",{staticClass:"barraSuperior"},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.textoBuscar,expression:"textoBuscar"},{name:"show",rawName:"v-show",value:o.mostrandoInputBuscar,expression:"mostrandoInputBuscar"}],ref:"inputBuscar",attrs:{type:"text"},domProps:{value:o.textoBuscar},on:{input:[function(e){e.target.composing||(o.textoBuscar=e.target.value)},o.calcularBuscados]}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.mostrandoInputBuscar,expression:"!mostrandoInputBuscar"}],staticClass:"boton",on:{click:o.iniciarBuscar}},[n("img",{attrs:{src:i("b11f"),alt:"Lupa"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoInputBuscar,expression:"mostrandoInputBuscar"}],staticClass:"boton",attrs:{title:"Cancelar"},on:{click:o.cancelarBusqueda}},[n("img",{attrs:{src:i("7511"),alt:"Equis"}})])])]),n("div",{attrs:{id:"listaPersonas"},on:{click:function(e){o.idPersonaMenuCx=null}}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.personas.loading,expression:"$apollo.queries.personas.loading"}],attrs:{texto:"Cargando lista de personas..."}}),o._l(o.personasVisibles,(function(e){return n("persona-vista-lista",{key:e.id,attrs:{seleccionado:o.idPersonaSeleccionada===e.id,estaPersona:e,nodosSolidaridadPublicitados:o.nodosSolidaridadPublicitados,personasConEspacio:o.personasConEspacio,mostrarEspacioActual:o.mostrarEspacioActual},nativeOn:{click:function(i){o.idPersonaSeleccionada=e.id}}})}))],2)],1)},su=[],ru=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"personaVistaLista",class:{seleccionado:o.seleccionado}},[n("div",{attrs:{id:"barraSuperior"}},[n("div",{staticClass:"iconoPersona"},[o.estaPersona.permisos.includes("maestraVida-profesor")?n("img",{attrs:{src:i("7109"),alt:"Profesor"}}):o._e(),o.estaPersona.permisos.includes("maestraVida-estudiante")?n("img",{attrs:{src:i("d232"),alt:"CapGraduacion"},on:{click:function(e){o.usuarioSuperadministrador&&o.togglePermiso("maestraVida-estudiante")}}}):o._e(),o.estaPersona.permisos.includes("maestraVida-profesor")||o.estaPersona.permisos.includes("maestraVida-estudiante")?o._e():n("img",{attrs:{src:i("767e"),alt:"Usuario"},on:{click:function(e){o.usuarioSuperadministrador&&o.togglePermiso("maestraVida-estudiante")}}})]),n("div",{attrs:{id:"zonaNombres"}},[n("div",{attrs:{id:"nombres"}},[o._v(o._s(o.estaPersona.nombres)+" "),o.miEspacioActual?n("span",{directives:[{name:"show",rawName:"v-show",value:o.mostrarEspacioActual,expression:"mostrarEspacioActual"}],staticClass:"espacioActual"},[o._v("("+o._s(o.miEspacioActual)+")")]):o._e()])]),n("div",{attrs:{id:"zonaApellidos"}},[n("div",{attrs:{id:"apellidos"}},[o._v(o._s(o.estaPersona.apellidos))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"contenedorControles",attrs:{id:"contenedorControlesPersona"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuario&&(o.usuarioProfe||o.usuario.id===o.estaPersona.id||o.usuarioSuperadministrador),expression:"\n          usuario &&\n          (usuarioProfe ||\n            usuario.id === estaPersona.id ||\n            usuarioSuperadministrador)\n        "}],staticClass:"boton selector",class:{activo:"calendario"===o.mostrando},attrs:{title:"calendario"===o.mostrando?"Ocultar calendario":"Mostrar calendario"},on:{click:function(e){o.mostrando="calendario"===o.mostrando?null:"calendario"}}},[n("img",{attrs:{src:i("4617"),alt:"calendario"}})]),o.usuarioSuperadministrador||o.usuarioProfe?n("div",{staticClass:"boton selector",class:{activo:"nodosSolidaridadPublicitados"===o.mostrando},attrs:{title:"nodosSolidaridadPublicitados"===o.mostrando?"Ocultar nodosSolidaridadPublicitados":"Mostrar nodosSolidaridadPublicitados"},on:{click:function(e){o.mostrando="nodosSolidaridadPublicitados"===o.mostrando?null:"nodosSolidaridadPublicitados"}}},[n("img",{attrs:{src:i("4c00"),alt:"P"}})]):o._e(),o.usuarioSuperadministrador?n("div",{staticClass:"boton selector",class:{activo:"administracion"===o.mostrando},attrs:{title:"administracion"===o.mostrando?"Ocultar administracion":"Mostrar administracion"},on:{click:function(e){o.mostrando="administracion"===o.mostrando?null:"administracion"}}},[n("img",{attrs:{src:i("fbca"),alt:"Cog"}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioProfe||o.usuarioAdministrador,expression:"usuarioProfe || usuarioAdministrador"}],staticClass:"boton",attrs:{title:"alienar"},on:{click:o.alienar}},[n("img",{attrs:{src:i("6a56"),alt:"Virus"}})]),o.usuarioLogeado&&o.usuarioProfe?n("div",{staticClass:"boton selector",class:{activo:"informe"===o.mostrando},staticStyle:{width:"100px"},attrs:{title:"informe"===o.mostrando?"Ocultar informe":"Mostrar informe"},on:{click:function(e){o.mostrando="informe"===o.mostrando?null:"informe"}}},[o._v(" Informes ")]):o._e(),o.usuarioLogeado?n("div",{staticClass:"boton selector",class:{activo:"objetivos"===o.mostrando},attrs:{title:"objetivos"===o.mostrando?"Ocultar objetivos":"Mostrar objetivos"},on:{click:function(e){o.mostrando="objetivos"===o.mostrando?null:"objetivos"}}},[n("img",{attrs:{src:i("2c0c"),alt:"Cog"}})]):o._e()])]),n("div",{attrs:{id:"zonaContenidosMostrando"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"administracion"===o.mostrando,expression:"mostrando === 'administracion'"}],attrs:{id:"zonaAdministracion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{id:"barraInfoAdicional"}},[o.usuarioSuperadministrador?n("div",{attrs:{id:"username"}},[o._v(" "+o._s(o.estaPersona.username)+" ")]):o._e()]),n("div",{staticClass:"contenedorControles",attrs:{id:"contenedorAcciones"}},[o.usuarioSuperadministrador?n("div",{staticClass:"boton selector",class:{activo:o.mostrandoPermisos},attrs:{title:o.mostrandoPermisos?"Ocultar permisos":"Mostrar permisos"},on:{click:function(e){o.mostrandoPermisos=!o.mostrandoPermisos}}},[n("img",{attrs:{src:i("4aab"),alt:"Id"}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.reseteandoPassword,expression:"!reseteandoPassword"}],staticClass:"boton",attrs:{title:"Restaurar password (123456)"},on:{click:o.resetearPassword}},[n("img",{attrs:{src:i("0108"),alt:"Llave"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.reseteandoPassword,expression:"reseteandoPassword"}],attrs:{texto:""}})],1),o.usuarioSuperadministrador?n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoPermisos,expression:"mostrandoPermisos"}],class:{deshabilitado:o.togglingPermiso},attrs:{id:"listaPermisos"}},o._l(o.permisosPosibles,(function(e){return n("div",{key:e+"permiso",staticClass:"activadorPermiso",class:{permisoGranted:o.estaPersona.permisos.includes(e)},on:{click:function(i){return o.togglePermiso(e)}}},[o._v(" "+o._s(e)+" ")])})),0):o._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:"informe"===o.mostrando,expression:"mostrando === 'informe'"}],attrs:{id:"zonaInforme"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.informes.loading,expression:"$apollo.queries.informes.loading"}]}),o.$apollo.queries.informes.loading?o._e():n("div",{staticClass:"contenedorSeccionInforme"},[n("div",{staticClass:"contenedorControles"},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioProfe,expression:"usuarioProfe"}],staticStyle:{display:"flex"},attrs:{id:"selectoresPeriodo"}},[n("div",{staticClass:"boton selector",class:{activo:"primero"===o.periodoInforme},on:{click:function(e){o.periodoInforme="primero"}}},[o._v(" I ")]),n("div",{staticClass:"boton selector",class:{activo:"segundo"===o.periodoInforme},on:{click:function(e){o.periodoInforme="segundo"}}},[o._v(" II ")]),n("div",{staticClass:"boton selector",class:{activo:"tercero"===o.periodoInforme},on:{click:function(e){o.periodoInforme="tercero"}}},[o._v(" III ")]),n("div",{staticClass:"boton selector",class:{activo:"total"===o.periodoInforme},on:{click:function(e){o.periodoInforme="total"}}},[o._v(" Total ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.creandoDocumentoInforme,expression:"!creandoDocumentoInforme"}],staticClass:"boton",on:{click:o.descargarArchivoInforme}},[n("img",{attrs:{src:i("c3cf"),alt:"archivo"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoDocumentoInforme,expression:"creandoDocumentoInforme"}],attrs:{texto:""}})],1),n("div",{staticClass:"tituloSeccionInforme"},[o._v("Sobre objetivos")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoInformeObjetivos,expression:"nuevoInformeObjetivos"}],ref:"inputInformeCategoriaObjetivos",staticClass:"seccionInforme",class:{deshabilitado:o.guardandoInformeObjetivos,guardado:o.nuevoInformeObjetivos==o.misInformesActivos.objetivos},attrs:{id:"textAreaInformeObjetivos"},domProps:{value:o.nuevoInformeObjetivos},on:{blur:function(e){return o.guardarInforme("objetivos")},input:function(e){e.target.composing||(o.nuevoInformeObjetivos=e.target.value)}}}),n("div",{staticClass:"controlesSeccionInforme"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.guardandoInformeObjetivos,expression:"!guardandoInformeObjetivos"}],staticClass:"boton botonGuardarSeccion",class:{guardado:o.nuevoInformeObjetivos===o.misInformesActivos.objetivos},on:{click:function(e){return o.guardarInforme("objetivos")}}},[n("img",{attrs:{src:i("4fc3"),alt:"Guardar"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.guardandoInformeObjetivos,expression:"guardandoInformeObjetivos"}]})],1),n("div",{staticClass:"tituloSeccionInforme"},[o._v("Sobre proyectos")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoInformeProyectos,expression:"nuevoInformeProyectos"}],ref:"inputInformeCategoriaProyectos",staticClass:"seccionInforme",class:{deshabilitado:o.guardandoInformeProyectos,guardado:o.nuevoInformeProyectos==o.misInformesActivos.proyectos},attrs:{id:"textAreaInformeProyectos"},domProps:{value:o.nuevoInformeProyectos},on:{blur:function(e){return o.guardarInforme("proyectos")},input:function(e){e.target.composing||(o.nuevoInformeProyectos=e.target.value)}}}),n("div",{staticClass:"controlesSeccionInforme"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.guardandoInformeProyectos,expression:"!guardandoInformeProyectos"}],staticClass:"boton botonGuardarSeccion",class:{guardado:o.nuevoInformeProyectos===o.misInformesActivos.proyectos},on:{click:function(e){return o.guardarInforme("proyectos")}}},[n("img",{attrs:{src:i("4fc3"),alt:"Guardar"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.guardandoInformeProyectos,expression:"guardandoInformeProyectos"}]})],1),n("div",{staticClass:"tituloSeccionInforme"},[o._v("Sobre espacios")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoInformeEspacios,expression:"nuevoInformeEspacios"}],ref:"inputInformeCategoriaEspacios",staticClass:"seccionInforme",class:{deshabilitado:o.guardandoInformeEspacios,guardado:o.nuevoInformeEspacios==o.misInformesActivos.espacios},attrs:{id:"textAreaInformeProyectos"},domProps:{value:o.nuevoInformeEspacios},on:{blur:function(e){return o.guardarInforme("espacios")},input:function(e){e.target.composing||(o.nuevoInformeEspacios=e.target.value)}}}),n("div",{staticClass:"controlesSeccionInforme"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.guardandoInformeEspacios,expression:"!guardandoInformeEspacios"}],staticClass:"boton botonGuardarSeccion",class:{guardado:o.nuevoInformeEspacios===o.misInformesActivos.espacios},on:{click:function(e){return o.guardarInforme("espacios")}}},[n("img",{attrs:{src:i("4fc3"),alt:"Guardar"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.guardandoInformeEspacios,expression:"guardandoInformeEspacios"}]})],1),n("div",{staticClass:"tituloSeccionInforme"},[o._v("Comentario")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoInformeComentario,expression:"nuevoInformeComentario"}],ref:"inputInformeCategoriaComentario",staticClass:"seccionInforme",class:{deshabilitado:o.guardandoInformeComentario,guardado:o.nuevoInformeComentario==o.misInformesActivos.comentario},attrs:{id:"textAreaInformeComentario"},domProps:{value:o.nuevoInformeComentario},on:{blur:function(e){return o.guardarInforme("comentario")},input:function(e){e.target.composing||(o.nuevoInformeComentario=e.target.value)}}}),n("div",{staticClass:"controlesSeccionInforme"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.guardandoInformeComentario,expression:"!guardandoInformeComentario"}],staticClass:"boton botonGuardarSeccion",class:{guardado:o.nuevoInformeComentario===o.misInformesActivos.comentario},on:{click:function(e){return o.guardarInforme("comentario")}}},[n("img",{attrs:{src:i("4fc3"),alt:"Guardar"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.guardandoInformeComentario,expression:"guardandoInformeComentario"}]})],1)])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"nodosSolidaridadPublicitados"===o.mostrando,expression:"mostrando === 'nodosSolidaridadPublicitados'"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaNodosSolidaridadPublicitados"}},o._l(o.nodosSolidaridadPublicitados,(function(e){return n("div",{key:e.id,staticClass:"selectorNodoSolidaridad",class:{deshabilitado:o.settingPresenciaNodoSolidaridad,activo:e.responsables.includes(o.estaPersona.id)},on:{click:function(i){return o.toggleResponsableNodoSolidaridad(e)}}},[o._v(" "+o._s(e.nombre)+" ")])})),0),"calendario"===o.mostrando?n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaCalendario"}},[n("calendario",{ref:"calendario",attrs:{idUsuarioTarget:o.estaPersona.id,enfasis:"eventosPersonales"}})],1):o._e(),"objetivos"===o.mostrando?n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaObjetivos"}},[n("ventana-lista",{ref:"ventanaLista",attrs:{idNodoRoot:o.estaPersona.id,tipoNodoRoot:"usuario"}})],1):o._e()])])},du=[],cu=i("49fb"),uu=i("21a6");function lu(){var o=Object(s["a"])(["\n            mutation (\n              $idUsuario: ID!\n              $year: Int!\n              $periodo: String!\n              $idProfe: ID!\n              $categoria: String!\n              $texto: String!\n            ) {\n              guardarInformeEstudianteMaestraVida(\n                idUsuario: $idUsuario\n                year: $year\n                periodo: $periodo\n                idProfe: $idProfe\n                categoria: $categoria\n                texto: $texto\n              ) {\n                id\n                year\n                periodo\n                idProfe\n                nombreProfe\n                categoria\n                texto\n              }\n            }\n          "]);return lu=function(){return o},o}function vu(){var o=Object(s["a"])(["\n              mutation ($idNodo: ID!, $idUsuario: ID!) {\n                addResponsableNodoSolidaridad(\n                  idNodo: $idNodo\n                  idUsuario: $idUsuario\n                ) {\n                  id\n                  responsables\n                }\n              }\n            "]);return vu=function(){return o},o}function mu(){var o=Object(s["a"])(["\n              mutation ($idNodo: ID!, $idUsuario: ID!) {\n                removeResponsableNodoSolidaridad(\n                  idNodo: $idNodo\n                  idUsuario: $idUsuario\n                ) {\n                  id\n                  responsables\n                }\n              }\n            "]);return mu=function(){return o},o}function pu(){var o=Object(s["a"])(["\n            mutation ($permiso: String!, $idUsuario: ID!) {\n              togglePermisoUsuario(permiso: $permiso, idUsuario: $idUsuario) {\n                id\n                permisos\n              }\n            }\n          "]);return pu=function(){return o},o}function hu(){var o=Object(s["a"])(["\n            query ($idAlienado: ID!) {\n              alienarUsuario(idAlienado: $idAlienado)\n            }\n          "]);return hu=function(){return o},o}function fu(){var o=Object(s["a"])(["\n            mutation ($idUsuario: ID!) {\n              resetearPasswordUsuario(idUsuario: $idUsuario)\n            }\n          "]);return fu=function(){return o},o}function gu(){var o=Object(s["a"])(["\n        query($idUsuario: ID!){\n          Usuario(idUsuario: $idUsuario){\n            id\n            objetivosEstudiante{\n              id\n              nombre\n              estadoDesarrollo\n            }\n          }\n        }\n      "]);return gu=function(){return o},o}function bu(){var o=Object(s["a"])(["\n  query ($idUsuario: ID!) {\n    Usuario(idUsuario: $idUsuario) {\n      id\n      informesMaestraVida {\n        id\n        year\n        periodo\n        idProfe\n        nombreProfe\n        categoria\n        texto\n      }\n    }\n  }\n"]);return bu=function(){return o},o}var Nu=d()(bu()),Au={components:{Calendario:ba,Loading:mo,VentanaLista:Ma},props:{personasConEspacio:Array,mostrarEspacioActual:Boolean,estaPersona:Object,seleccionado:Boolean,nodosSolidaridadPublicitados:Array},name:"PersonaVistaLista",apollo:{informes:{query:Nu,variables:function(){return{idUsuario:this.estaPersona.id}},skip:function(){return"informe"!=this.mostrando},update:function(o){var e=o.Usuario;return e.informesMaestraVida}},objetivos:{query:d()(gu()),variables:function(){return{idUsuario:this.estaPersona.id}},update:function(o){var e=o.Usuario;return e.objetivosEstudiante},skip:function(){return"informe"!=this.mostrando}}},data:function(){return{permisosPosibles:["usuario","administrador","atlasAdministrador","superadministrador","maestraVida","maestraVida-estudiante","maestraVida-profesor","maestraVida-acompañante","maestraVida-graduado"],informes:[],objetivos:[],mostrando:null,reseteandoPassword:!1,alienando:!1,mostrandoPermisos:!1,togglingPermiso:!1,settingPresenciaNodoSolidaridad:!1,guardandoInformeObjetivos:!1,guardandoInformeEspacios:!1,guardandoInformeComentario:!1,guardandoInformeProyectos:!1,creandoDocumentoInforme:!1,nuevoInformeObjetivos:null,nuevoInformeProyectos:null,nuevoInformeEspacios:null,nuevoInformeComentario:null,periodoInforme:"primero",activable:0}},methods:{resetearPassword:function(){var o=this;confirm("¿Confirmar resetear el password de "+this.estaPersona.nombres+"?")&&(console.log("Reseteando password usuario"),this.reseteandoPassword=!0,this.$apollo.mutate({mutation:d()(fu()),variables:{idUsuario:this.estaPersona.id}}).then((function(){o.reseteandoPassword=!1,alert("Contraseña reseteada")})).catch((function(){o.reseteandoPassword=!1})))},alienar:function(){var o=this;(this.usuarioProfe||this.usuarioSuperadministrador)&&(this.alienando=!0,this.$apollo.query({query:d()(hu()),variables:{idAlienado:this.estaPersona.id}}).then((function(e){var i=e.data.alienarUsuario;console.log("Alienando"),o.alienando=!0,o.$store.commit("logearse",i),o.$router.push("/miPerfil")})).catch((function(e){console.log("Error: ".concat(e)),o.alienando=!1})))},togglePermiso:function(o){var e=this;this.usuarioSuperadministrador&&(this.togglingPermiso=!0,this.$apollo.mutate({mutation:d()(pu()),variables:{permiso:o,idUsuario:this.estaPersona.id}}).then((function(){e.togglingPermiso=!1})).catch((function(o){console.log("Error: ".concat(o)),e.togglingPermiso=!1})))},toggleResponsableNodoSolidaridad:function(o){var e=this;console.log("Setting presencia de ".concat(this.estaPersona.id," en el nodo ").concat(o.id));var i=o.responsables.includes(this.estaPersona.id);i?(console.log("Sacándolo"),this.settingPresenciaNodoSolidaridad=!0,this.$apollo.mutate({mutation:d()(mu()),variables:{idNodo:o.id,idUsuario:this.estaPersona.id}}).then((function(){e.settingPresenciaNodoSolidaridad=!1})).catch((function(o){console.log("Error: ".concat(o)),e.settingPresenciaNodoSolidaridad=!1}))):(console.log("Dentrándolo"),this.settingPresenciaNodoSolidaridad=!0,this.$apollo.mutate({mutation:d()(vu()),variables:{idNodo:o.id,idUsuario:this.estaPersona.id}}).then((function(){e.settingPresenciaNodoSolidaridad=!1})).catch((function(o){console.log("Error: ".concat(o)),e.settingPresenciaNodoSolidaridad=!1})))},guardarInforme:function(o){var e=this;console.log("Guardando informe");var i=null;if("objetivos"===o){if(i=this.$refs.inputInformeCategoriaObjetivos.value,i===this.misInformesActivos.objetivos)return;this.guardandoInformeObjetivos=!0,i&&(i=i.trim()),this.nuevoInformeObjetivos=i}if("espacios"===o){if(i=this.$refs.inputInformeCategoriaEspacios.value,i===this.misInformesActivos.espacios)return;this.guardandoInformeEspacios=!0,i&&(i=i.trim()),this.nuevoInformeEspacios=i}if("comentario"===o){if(i=this.$refs.inputInformeCategoriaComentario.value,i===this.misInformesActivos.comentario)return;this.guardandoInformeComentario=!0,i&&(i=i.trim()),this.nuevoInformeComentario=i}if("proyectos"===o){if(i=this.$refs.inputInformeCategoriaProyectos.value,i===this.misInformesActivos.proyectos)return;this.guardandoInformeProyectos=!0,i&&(i=i.trim()),this.nuevoInformeProyectos=i}this.$apollo.mutate({mutation:d()(lu()),variables:{idUsuario:this.estaPersona.id,year:2023,periodo:this.periodoInforme,idProfe:this.usuario.id,categoria:o,texto:i}}).then((function(i){var n=i.data.guardarInformeEstudianteMaestraVida,t=e.$apollo.provider.defaultClient,a=t.readQuery({query:Nu,variables:{idUsuario:e.estaPersona.id}}),s=JSON.parse(JSON.stringify(a)),r=s.Usuario.informesMaestraVida.find((function(o){return o.id===n.id}));r||(s.Usuario.informesMaestraVida.push(n),t.writeQuery({query:Nu,variables:{idUsuario:e.estaPersona.id},data:s})),"objetivos"===o&&(e.guardandoInformeObjetivos=!1),"espacios"===o&&(e.guardandoInformeEspacios=!1),"comentario"===o&&(e.guardandoInformeComentario=!1),"proyectos"===o&&(e.guardandoInformeProyectos=!1)})).catch((function(i){alert("¡Error guardando informe!"),console.log("error: "+i),"objetivos"===o&&(e.guardandoInformeObjetivos=!1),"espacios"===o&&(e.guardandoInformeEspacios=!1),"comentario"===o&&(e.guardandoInformeComentario=!1),"proyectos"===o&&(e.guardandoInformeProyectos=!1)}))},descargarArchivoInforme:function(){var o=this;console.log("Creando documento docx de informe para "+this.estaPersona.nombres),this.creandoDocumentoInforme=!0;var e=new cu["TableRow"]({children:[new cu["TableCell"]({children:[new cu["Paragraph"]({text:"Acerca de los objetivos",style:"nombreSeccion",alignment:cu["AlignmentType"].CENTER})],width:{size:300,type:cu["WidthType"].DXA}}),new cu["TableCell"]({children:Object(to["a"])(this.informes.filter((function(e){return 2023==e.year&&e.periodo===o.periodoInforme&&"objetivos"===e.categoria&&e.texto&&e.texto.length>10})).reduce((function(o,e){return o.concat([new cu["Paragraph"]({children:e.texto.split("\n").map((function(o){return new cu["TextRun"]({text:o,break:1})})),style:"textoProfe"}),new cu["Paragraph"]({text:e.nombreProfe,style:"firmaProfe"})])}),[])),width:{size:700,type:cu["WidthType"].DXA}})]}),i=new cu["TableRow"]({children:[new cu["TableCell"]({width:{size:3e3,type:cu["WidthType"].DXA},children:[new cu["Paragraph"]({text:"Proyectos pedagógicos productivos",style:"nombreSeccion",alignment:cu["AlignmentType"].CENTER})]}),new cu["TableCell"]({width:{size:2700,type:cu["WidthType"].DXA},children:Object(to["a"])(this.informes.filter((function(e){return 2023==e.year&&e.periodo===o.periodoInforme&&"proyectos"===e.categoria&&e.texto&&e.texto.length>10})).reduce((function(o,e){return o.concat([new cu["Paragraph"]({children:e.texto.split("\n").map((function(o){return new cu["TextRun"]({text:o,break:1})})),style:"textoProfe"}),new cu["Paragraph"]({text:e.nombreProfe,style:"firmaProfe"})])}),[]))})]}),n=new cu["TableRow"]({children:[new cu["TableCell"]({children:[new cu["Paragraph"]({text:"Acerca de los espacios",style:"nombreSeccion",alignment:cu["AlignmentType"].CENTER})],width:{size:300,type:cu["WidthType"].DXA}}),new cu["TableCell"]({children:Object(to["a"])(this.informes.filter((function(e){return 2023==e.year&&e.periodo===o.periodoInforme&&"espacios"===e.categoria&&e.texto&&e.texto.length>10})).reduce((function(o,e){return o.concat([new cu["Paragraph"]({children:e.texto.split("\n").map((function(o){return new cu["TextRun"]({text:o,break:1})})),style:"textoProfe"}),new cu["Paragraph"]({text:e.nombreProfe,style:"firmaProfe"})])}),[])),width:{size:700,type:cu["WidthType"].DXA}})]}),t=new cu["TableRow"]({children:[new cu["TableCell"]({children:[new cu["Paragraph"]({text:"Comentario",style:"nombreSeccion",alignment:cu["AlignmentType"].CENTER})],width:{size:300,type:cu["WidthType"].DXA}}),new cu["TableCell"]({children:Object(to["a"])(this.informes.filter((function(e){return 2023==e.year&&e.periodo===o.periodoInforme&&"comentario"===e.categoria&&e.texto&&e.texto.length>10})).reduce((function(o,e){return o.concat([new cu["Paragraph"]({children:e.texto.split("\n").map((function(o){return new cu["TextRun"]({text:o,break:1})})),style:"textoProfe"}),new cu["Paragraph"]({text:e.nombreProfe,style:"firmaProfe"})])}),[])),width:{size:700,type:cu["WidthType"].DXA}})]}),a=new cu["TableRow"]({children:[new cu["TableCell"]({children:[new cu["Paragraph"]({text:"Promocionado: SI",style:"nombreSeccion",alignment:cu["AlignmentType"].CENTER})],width:{size:300,type:cu["WidthType"].DXA}})]}),s=new cu["Table"]({rows:[e,i,n,t,a],width:{size:8500,type:cu["WidthType"].DXA}}),r=new cu["Document"]({styles:{paragraphStyles:[{id:"estiloGlobal",name:"Estilo global",run:{font:"Maiandra GD"}},{id:"titulos",name:"titulos",basedOn:"estiloGlobal",run:{bold:!0,size:24},paragraph:{spacing:{after:200}}},{id:"nombreEstudiante",name:"nombre del estudiante",basedOn:"estiloGlobal",run:{bold:!0,allCaps:!0},paragraph:{spacing:{after:120}}},{id:"nombreSeccion",name:"nombre de seccion",basedOn:"estiloGlobal",run:{bold:!0,size:24},paragraph:{spacing:{after:120}}},{id:"objetivo",name:"Objetivo del estudiante",basedOn:"estiloGlobal",run:{size:24}},{id:"textoProfe",name:"Texto escrito por un profe",basedOn:"estiloGlobal",run:{size:24},paragraph:{spacing:{after:30}}},{id:"firmaProfe",name:"Firma del profe",basedOn:"estiloGlobal",run:{italics:!0,size:18},paragraph:{spacing:{after:100}}}]},sections:[{children:[new cu["Paragraph"]({text:"INSTITUCIÓN EDUCATIVA MAESTRA VIDA",heading:cu["HeadingLevel"].TITLE,style:"titulos",alignment:cu["AlignmentType"].CENTER}),new cu["Paragraph"]({text:"RESOLUCIÓN DE APROBACIÓN N° 5549 DE JUNIO DE 2013",heading:cu["HeadingLevel"].TITLE,style:"titulos",alignment:cu["AlignmentType"].CENTER}),new cu["Paragraph"]({text:"EVALUACIÓN DE CONOCIMIENTO Y DESEMPEÑO",heading:cu["HeadingLevel"].TITLE,style:"titulos",alignment:cu["AlignmentType"].CENTER}),new cu["Paragraph"]({text:"PERIODO AGOSTO - OCTUBRE DE 2023",style:"titulos",alignment:cu["AlignmentType"].CENTER}),new cu["Paragraph"]({text:"Nombre:  "+this.estaPersona.nombres+" "+this.estaPersona.apellidos,style:"nombreEstudiante"}),new cu["Paragraph"]({text:"Objetivos",style:"nombreSeccion"})].concat(Object(to["a"])(this.objetivos.filter((function(o){return"Nuevo nodo de solidaridad"!=o.nombre})).map((function(o){return new cu["Paragraph"]({text:o.nombre,style:"objetivo",bullet:{level:0}})}))),[new cu["Paragraph"]({text:"",spacing:{after:200}}),s,new cu["Paragraph"]({children:[new cu["TextRun"]({text:"EQUIPO PEDAGÓGICO",bold:!0})],alignment:cu["AlignmentType"].CENTER,style:"estiloGlobal",spacing:{before:1500}}),new cu["Paragraph"]({text:"Corporación Maestra Vida",heading:cu["HeadingLevel"].TITLE,style:"titulos",alignment:cu["AlignmentType"].CENTER})])}]});Cu(r,"informe".concat(this.estaPersona.username,".docx")),this.creandoDocumentoInforme=!1}},computed:{misInformesActivos:function(){var o=this;if(!this.informes)return{objetivos:null,espacios:null,comentario:null,proyectos:null};var e=this.informes.find((function(e){return 2023===e.year&&e.periodo===o.periodoInforme&&e.idProfe===o.usuario.id&&"objetivos"===e.categoria})),i=this.informes.find((function(e){return 2023===e.year&&e.periodo===o.periodoInforme&&e.idProfe===o.usuario.id&&"espacios"===e.categoria})),n=this.informes.find((function(e){return 2023===e.year&&e.periodo===o.periodoInforme&&e.idProfe===o.usuario.id&&"comentario"===e.categoria})),t=this.informes.find((function(e){return 2023===e.year&&e.periodo===o.periodoInforme&&e.idProfe===o.usuario.id&&"proyectos"===e.categoria}));return{objetivos:e?e.texto:null,espacios:i?i.texto:null,comentario:n?n.texto:null,proyectos:t?t.texto:null}},miEspacioActual:function(){var o=this,e=this.personasConEspacio.find((function(e){return e.id===o.estaPersona.id}));return e?e.espacioActual:null},colorBarraSuperior:function(){if(!this.usuarioLogeado||!this.estaPersona.permisos||!this.estaPersona.permisos.includes("maestraVida-estudiante"))return{};var o="rgb(161, 240, 82)";return{backgroundColor:o}}},watch:{seleccionado:function(o){o||(this.mostrando=null)},informes:function(){this.activable++},misInformesActivos:function(){this.nuevoInformeObjetivos=this.misInformesActivos.objetivos,this.nuevoInformeProyectos=this.misInformesActivos.proyectos,this.nuevoInformeEspacios=this.misInformesActivos.espacios,this.nuevoInformeComentario=this.misInformesActivos.comentario}},mounted:function(){var o=this;setTimeout((function(){o.activable++}),1e3),this.nuevoInformeObjetivos=this.misInformesActivos.objetivos,this.nuevoInformeProyectos=this.misInformesActivos.proyectos,this.nuevoInformeEspacios=this.misInformesActivos.espacios,this.nuevoInformeComentario=this.misInformesActivos.comentario}};function Cu(o,e){var i="application/vnd.openxmlformats-officedocument.wordprocessingml.document";cu["Packer"].toBlob(o).then((function(o){var n=o.slice(0,o.size,i);Object(uu["saveAs"])(n,e)}))}var yu=Au,Eu=(i("0bab"),Object(p["a"])(yu,ru,du,!1,null,"2bf8b9a0",null)),wu=Eu.exports;function xu(){var o=Object(s["a"])(["\n            mutation ($nuevoPermiso: String!) {\n              asignarPermisoTodosUsuarios(nuevoPermiso: $nuevoPermiso)\n            }\n          "]);return xu=function(){return o},o}function Pu(){var o=Object(s["a"])(["\n            mutation ($idUsuario: ID!) {\n              eliminarUsuario(idUsuario: $idUsuario)\n            }\n          "]);return Pu=function(){return o},o}function Su(){var o=Object(s["a"])(["\n        query($dateActual: Date){\n          todosUsuarios(dateActual: $dateActual){\n            id\n            espacioActual\n          }\n        }\n      "]);return Su=function(){return o},o}function Du(){var o=Object(s["a"])(["\n        query {\n          nodosSolidaridadPublicitados {\n            id\n            nombre\n            responsables\n          }\n        }\n      "]);return Du=function(){return o},o}function Iu(){var o=Object(s["a"])(["\n  query {\n    todosUsuarios {\n      id\n      nombres\n      apellidos\n      permisos\n      username\n    }\n  }\n"]);return Iu=function(){return o},o}var Ru=i("d63f"),ku=/[^ a-zA-Z-]/,Mu=d()(Iu()),ju={name:"Personas",components:{Loading:mo,PersonaVistaLista:wu},apollo:{personas:{query:Mu,update:function(o){var e=o.todosUsuarios;return e},fetchPolicy:"cache-first"},nodosSolidaridadPublicitados:{query:d()(Du())},personasConEspacio:{query:d()(Su()),variables:function(){return{dateActual:Date.now()}},update:function(o){var e=o.todosUsuarios;return e}}},data:function(){var o=localStorage.getItem("configuracionPersonas"),e={};return o&&(e=JSON.parse(o)),{personas:[],personasConEspacio:[],nodosSolidaridadPublicitados:[],idPersonaMenuCx:null,idPersonaSeleccionada:null,tipoMostrarUsuarios:"todos",permisoInput:"",textoBuscar:null,textoBusquedaUsado:null,mostrandoInputBuscar:!1,buscados:[],debouncingBusqueda:!1,mostrarEspacioActual:null==e.mostrarEspacioActual||void 0==e.mostrarEspacioActual||e.mostrarEspacioActual,mostrandoConfiguracion:!1}},methods:{setLocalStorageConfiguracion:function(){var o={mostrarEspacioActual:this.mostrarEspacioActual},e=JSON.stringify(o);localStorage.setItem("configuracionPersonas",e)},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},eliminarPersonaDeDatabase:function(o){confirm("¿Seguro de eliminar a este individuo?")&&console.log("Se eliminara una persona con id ".concat(o," de la base de datos")),this.$apollo.mutate({mutation:d()(Pu()),variables:{idUsuario:o},update:function(e,i){var n=i.data.eliminarUsuario;if(console.log("Data: ".concat(n)),n)try{var t=e.readQuery({query:Mu,variables:{idUsuario:o}});console.log("cache: ".concat(t));var a=t.todosUsuarios.findIndex((function(e){return e.id==o}));a>-1&&t.todosUsuarios.splice(a,1),console.log("cache: ".concat(t)),e.writeQuery({query:Mu,variables:{idUsuario:o},data:t})}catch(B){console.log("Error actualizando cache. E:".concat(B))}}}).then((function(o){console.log("Res: ".concat(JSON.stringify(o))),o.data&&console.log("Usuario eliminado exitosamente")})).catch((function(o){console.log("Error eliminando usuario: E: ".concat(o))}))},asignarPermisoTodos:function(){var o=this;this.permisoIlegal?console.log("No enviado"):confirm("¿Asignar este permiso a todas las personas?")&&this.$apollo.mutate({mutation:d()(xu()),variables:{nuevoPermiso:this.permisoInput}}).then((function(){alert("Permiso "+o.permisoInput+" asignado para todos los usuarios")}))},iniciarBuscar:function(){var o=this;this.mostrandoInputBuscar=!0,this.$nextTick((function(){o.$refs.inputBuscar.focus()}))},cancelarBusqueda:function(){this.buscados=[],this.textoBuscar=null,this.mostrandoInputBuscar=!1,this.textoBusquedaUsado=null},calcularBuscados:hi()((function(){console.log("Setting textoBusquedaUsado"),this.textoBusquedaUsado=this.textoBuscar}),800)},computed:{opcionesEspecialesPersona:function(){var o=[];return this.usuarioSuperadministrador&&(o=o.concat([{textoVisible:"Eliminar de la base de datos",evento:"eliminandoseDeDatabase"},{textoVisible:"resetear contraseña (123456)",evento:"reseteandoPass"}])),o},permisoIlegal:function(){return this.permisoInput.length<1||!!ku.test(this.permisoInput)},personasVisibles:function(){var o=this,e=JSON.parse(JSON.stringify(this.personas));return"profesores"===this.tipoMostrarUsuarios?e=e.filter((function(o){return o.permisos.includes("maestraVida-profesor")})):"estudiantes"===this.tipoMostrarUsuarios?e=e.filter((function(o){return o.permisos.includes("maestraVida-estudiante")})):"graduados"===this.tipoMostrarUsuarios&&(e=e.filter((function(o){return o.permisos.includes("maestraVida-graduado")}))),this.textoBusquedaUsado&&e.sort((function(e,i){var n=Ru.compareTwoStrings(i.nombres+i.apellidos,o.textoBusquedaUsado)-Ru.compareTwoStrings(e.nombres+e.apellidos,o.textoBusquedaUsado);return n})),e}},watch:{mostrarEspacioActual:function(){this.setLocalStorageConfiguracion()}}},$u=ju,Ou=(i("82e3"),Object(p["a"])($u,au,su,!1,null,"6d78ed8d",null)),qu=Ou.exports,Tu=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{key:o.$route.params.id,staticClass:"homeNodo"},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.esteNodo.loading,expression:"$apollo.queries.esteNodo.loading"}]}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.$apollo.queries.esteNodo.loading,expression:"!$apollo.queries.esteNodo.loading"}],attrs:{id:"barraSuperior"}},[o.esteNodo.nodoParent?n("a",{attrs:{href:o.clienteUrl+"/#/homeNodoSolidaridad/"+o.esteNodo.nodoParent}},[n("img",{staticClass:"boton",attrs:{src:i("7a57"),alt:"Up",title:"Navegar al nodo parent",id:"botonIrNodoParent"}})]):o._e(),n("div",{attrs:{id:"zonaTituloNodo"}},["trabajo"===o.esteNodo.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-cog fa-w-16 iconoNodo",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:o.colorIcono,d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}})]):o._e(),"objetivo"===o.esteNodo.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-star fa-w-18 iconoNodo",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"star",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[n("path",{attrs:{fill:o.colorIcono,d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"titulo"},on:{click:o.toggleEditandoNombre}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNombreCosa",staticStyle:{width:"250px"},attrs:{type:"text",id:"inputNuevoNombre"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},blur:function(e){o.editandoNombre=!1},keydown:o.keydownInputNuevoNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}})]),n("div",{attrs:{id:"zonaControlesNodo"}},[n("div",{staticClass:"bloqueControlNodo",attrs:{id:"zonaPorcentajeCompletado",title:o.usuarioResponsable?"Definir progreso del nodo":"Progreso del nodo"}},[n("div",{attrs:{id:"porcentajeCompletado"}}),n("img",{staticClass:"boton botonControlNodo",attrs:{src:i("9253"),alt:"Progreso"}})]),n("div",{staticClass:"bloqueControlNodo",attrs:{id:"zonaTiempoEstimado",title:o.usuarioResponsable?"Definir tiempo estimado para completar este nodo":"Tiempo estimado para completar este nodo"}},[n("div",{attrs:{id:"tiempoEstimado"}}),n("img",{staticClass:"boton botonControlNodo",attrs:{src:i("4617"),alt:"Calendario"}})]),n("div",{staticClass:"bloqueControlNodo",attrs:{id:"bloqueMarcarNodoCompletado"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.togglingEstado,expression:"!togglingEstado"}],staticClass:"boton botonControlNodo",style:{filter:"completado"===o.esteNodo.estadoDesarrollo?"var(--atlasFilterVerde)":""},attrs:{src:i("5d24"),alt:"Check",title:"completado"===o.esteNodo.estadoDesarrollo?"Desmarcar este nodo como completado":"Marcar este nodo como completado",id:"botonMarcarNodoCompletado"},on:{click:o.toggleEstadoNodo}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.togglingEstado,expression:"togglingEstado"}],attrs:{texto:""}})],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.$apollo.queries.esteNodo.loading,expression:"!$apollo.queries.esteNodo.loading"}],attrs:{id:"contenidoNodo"}},[n("div",{attrs:{id:"primeraRow"}},[n("div",{staticClass:"bloqueContenido",attrs:{id:"bloqueInformacion"}},[n("div",{staticClass:"barraSuperiorGeneral"},[n("div",{staticClass:"boton botonBarraSuperiorGeneral botonSelectorContenidoNodo",class:{deshabilitado:(!o.esteNodo.descripcion||o.esteNodo.descripcion.length<1||"Sin descripcion"===o.esteNodo.descripcion||"Sin descripción"===o.esteNodo.descripcion)&&!o.usuarioAdministrador},style:{borderColor:"descripcion"===o.mostrando?"white":"black"},attrs:{title:"descripcion"===o.mostrando?"":"Mostrar descripción"},on:{click:function(e){o.mostrando="descripcion"}}},[n("img",{attrs:{src:i("f9b3"),alt:"Descripción"}})]),n("div",{staticClass:"boton botonBarraSuperiorGeneral botonSelectorContenidoNodo",style:{borderColor:"responsables"===o.mostrando?"white":"black"},attrs:{title:"responsables"===o.mostrando?"":"Mostrar responsables del nodo"},on:{click:function(e){o.mostrando="responsables"}}},[n("img",{attrs:{src:i("767e"),alt:"Responsables"}})]),n("div",{staticClass:"boton botonBarraSuperiorGeneral botonSelectorContenidoNodo",class:{deshabilitado:(!o.esteNodo.keywords||o.esteNodo.keywords.length<1)&&!o.usuarioAdministrador},style:{borderColor:"keywords"===o.mostrando?"white":"black"},attrs:{title:"keywords"===o.mostrando?"":"Mostrar palabras clave"},on:{click:function(e){o.mostrando="keywords"}}},[n("img",{attrs:{src:i("46c5"),alt:"Keywords"}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"descripcion"===o.mostrando,expression:"mostrando === 'descripcion'"}],staticClass:"zonaInformacion",attrs:{id:"zonaDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",staticClass:"contenidoTexto",attrs:{id:"descripcion"},on:{click:o.toggleEditandoDescripcion}},[o._v(" "+o._s(o.esteNodo.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"inputTextoNodo",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"boton botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarDescripcion"},on:{click:o.guardarNuevoDescripcion}}),n("img",{staticClass:"boton botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"keywords"===o.mostrando,expression:"mostrando === 'keywords'"}],staticClass:"zonaInformacion",attrs:{id:"zonaKeywords"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoKeywords,expression:"!editandoKeywords"}],ref:"keywords",staticClass:"contenidoTexto",attrs:{id:"keywords"},on:{click:o.toggleEditandoKeywords}},[o._v(" "+o._s(o.esteNodo.keywords)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoKeywords,expression:"nuevoKeywords"},{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],ref:"inputNuevoKeywords",staticClass:"inputTextoNodo",class:{letrasRojas:o.nuevoKeywordsIlegal},attrs:{id:"inputNuevoKeywords"},domProps:{value:o.nuevoKeywords},on:{keydown:[function(e){if(!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.stopPropagation(),o.editandoKeywords=!1},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.stopPropagation(),o.guardarNuevoKeywords(e))}],input:function(e){e.target.composing||(o.nuevoKeywords=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"boton botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar palabras clave",id:"botonGuardarKeywords"},on:{click:o.guardarNuevoKeywords}}),n("img",{staticClass:"boton botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionKeywords"},on:{click:function(e){o.editandoKeywords=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoKeywords,expression:"enviandoNuevoKeywords"}],attrs:{texto:"Enviando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"responsables"===o.mostrando,expression:"mostrando === 'responsables'"}],staticClass:"zonaInformacion",attrs:{id:"zonaResponsables"}},[n("div",{staticClass:"contenedorBotonesZona",attrs:{id:"contenedorBotonesResponsables"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.usuarioResponsable&&!o.usuarioPosibleResponsable&&!o.idResponsableSeleccionado,expression:"!usuarioResponsable && !usuarioPosibleResponsable && !idResponsableSeleccionado"}],staticClass:"boton botonControlZona botonControlResponsables",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{src:i("b2a7"),alt:"Entrar",title:o.esteNodo.responsables.length<1||o.usuarioParent?"Asumir":"Solicitar participación",id:"botonEntrarResponsables"},on:{click:function(e){return e.stopPropagation(),o.entrarResponsables(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:(o.usuarioResponsable||o.usuarioPosibleResponsable)&&(!o.idResponsableSeleccionado||o.idResponsableSeleccionado===o.usuario.id),expression:"\n                (usuarioResponsable || usuarioPosibleResponsable) &&\n                (!idResponsableSeleccionado ||\n                  idResponsableSeleccionado === usuario.id)\n              "}],staticClass:"boton botonControlZona botonControlResponsables",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{src:i("7d55"),alt:"Salir",title:"Abandonar",id:"botonAbandonarResponsables"},on:{click:function(e){return e.stopPropagation(),o.abandonarListaResponsables(e)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.idResponsableSeleccionado&&(o.usuarioSuperadministrador||o.usuarioParent),expression:"idResponsableSeleccionado && (usuarioSuperadministrador || usuarioParent)"}],staticClass:"boton botonControlZona botonControlResponsables",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{src:i("7d55"),alt:"Sacar",title:"Retirar usuario",id:"botonRetirarUsuarioFromResponsables"},on:{click:function(e){return e.stopPropagation(),o.retirarUsuarioFromListaResponsables(o.idResponsableSeleccionado)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableAmplio&&o.idResponsableSeleccionado&&!o.esteNodo.responsables.includes(o.idResponsableSeleccionado),expression:"\n                usuarioResponsableAmplio &&\n                idResponsableSeleccionado &&\n                !esteNodo.responsables.includes(idResponsableSeleccionado)\n              "}],staticClass:"boton botonControlZona botonControlResponsables",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{src:i("a26f"),alt:"Aceptar",title:"Aceptar como responsable",id:"botonAceptarResponsables"},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:""}})],1),n("div",{attrs:{id:"listaResponsables"},on:{click:function(e){e.stopPropagation(),o.idResponsableSeleccionado=null}}},[o._l(o.esteNodo.responsables.concat(o.esteNodo.posiblesResponsables),(function(e){return n("icono-persona-autonomo",{key:e,style:{opacity:o.esteNodo.posiblesResponsables.includes(e)?.5:1},attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e,factorEscala:"0.7"},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e}}})})),n("buscador-personas",{directives:[{name:"show",rawName:"v-show",value:o.usuarioParent&&o.usuarioProfe||o.usuarioSuperadministrador,expression:"(usuarioParent && usuarioProfe) || usuarioSuperadministrador"}],on:{clickEnResultado:function(e){return o.addResponsableManually(e)}}})],2)])]),n("div",{staticClass:"bloqueContenido",attrs:{id:"bloqueSubNodos"},on:{mouseleave:function(e){o.mostrandoOpcionesCrearSubNodo=!1}}},[n("div",{staticClass:"barraSuperiorGeneral"},[n("div",{staticClass:"tituloBloque"},[o._v("Nodos")]),n("div",{staticClass:"controlesBloque",attrs:{id:"controlesRecursosExternos"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.mostrandoOpcionesCrearSubNodo&&o.usuarioResponsableAmplio,expression:"\n                !mostrandoOpcionesCrearSubNodo && usuarioResponsableAmplio\n              "}],staticClass:"boton botonBarraSuperiorGeneral",on:{click:function(e){o.mostrandoOpcionesCrearSubNodo=!0}}},[n("img",{class:{deshabilitado:o.creandoSubNodo},attrs:{src:i("1376"),alt:"Nuevo",title:"Crear nuevo nodo"}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoSubNodo,expression:"creandoSubNodo"}],attrs:{texto:""}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoOpcionesCrearSubNodo,expression:"mostrandoOpcionesCrearSubNodo"}],class:{deshabilitado:o.creandoSubNodo},attrs:{id:"contenedorOpcionesCrear"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:"objetivo"===o.esteNodo.tipoNodo,expression:"esteNodo.tipoNodo === 'objetivo'"}],staticClass:"boton botonBarraSuperiorGeneral opcionCrear",attrs:{src:i("2c0c"),alt:"Objetivo",title:"Crear nuevo objetivo"},on:{click:function(e){return o.crearNuevoNodoUnder({tipoNodo:"objetivo"},o.esteNodo.id)}}}),n("img",{staticClass:"boton botonBarraSuperiorGeneral opcionCrear",attrs:{src:i("fbca"),alt:"Trabajo",title:"Crear nuevo trabajo"},on:{click:function(e){return o.crearNuevoNodoUnder({tipoNodo:"trabajo"},o.esteNodo.id)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoSubNodo,expression:"creandoSubNodo"}],attrs:{texto:""}})],1)])]),n("ventana-lista",{ref:"ventanaLista",attrs:{idNodoRoot:o.$route.params.id,tipoNodoRoot:"nodoSolidaridad"}})],1),n("div",{staticClass:"bloqueContenido",attrs:{id:"bloqueRecursosExternos"}},[n("div",{staticClass:"barraSuperiorGeneral"},[n("div",{staticClass:"tituloBloque"},[o._v("Recursos externos")]),n("div",{staticClass:"controlesBloque",attrs:{id:"controlesRecursosExternos"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.creandoRecursoExterno,expression:"!creandoRecursoExterno"}],staticClass:"boton botonBarraSuperiorGeneral",class:{deshabilitado:o.creandoRecursoExterno}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableAmplio,expression:"usuarioResponsableAmplio"}],attrs:{src:i("1376"),alt:"Nuevo",title:"Crear nuevo recurso externo"},on:{click:o.crearNuevoRecursoExterno}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoRecursoExterno,expression:"creandoRecursoExterno"}],attrs:{texto:""}})],1)]),n("div",{attrs:{id:"listaRecursosExternos"}},o._l(o.esteNodo.recursosExternos,(function(e){return n("recurso-externo-nodo",{key:e.id,attrs:{esteRecurso:e,seleccionado:o.idRecursoExternoSeleccionado===e.id,usuarioResponsableAmplio:o.usuarioResponsableAmplio,idNodo:o.esteNodo.id},on:{click:function(i){o.idRecursoExternoSeleccionado=e.id},meElimine:function(i){return o.eliminarRecursoExternoCache(e.id)}}})})),1)])]),n("div",{staticClass:"bloqueContenido",attrs:{id:"bloqueDatos"}},[n("div",{attrs:{id:"barraLateralDatos"}},[n("div",{staticClass:"barraSuperiorGeneral"},[n("div",{staticClass:"tituloBloque"},[o._v("Datos")]),n("div",{staticClass:"controlesBloque",attrs:{id:"controlesRecursosExternos"}},[n("div",{staticClass:"botonBarraSuperiorGeneral"},[n("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{src:i("1376"),alt:"Nuevo",title:"Crear nuevo dato"}})])])]),n("div",{attrs:{id:"listaDatos"},on:{click:function(e){o.idDatoSeleccionado=null,o.datoSeleccionado=null}}},[n("div",{staticClass:"selectorDato",class:{seleccionado:"administracion"===o.idDatoSeleccionado},on:{click:function(e){e.stopPropagation(),o.idDatoSeleccionado="administracion"}}},[n("div",{staticClass:"nombreDato"},[o._v("Administración")])]),o._l(o.esteNodo.datos,(function(e){return n("div",{key:e.id,staticClass:"selectorDato",class:{seleccionado:o.idDatoSeleccionado===e.id},on:{click:function(i){i.stopPropagation(),o.idDatoSeleccionado=e.id,o.datoSeleccionado=e}}},[n("div",{staticClass:"nombreDato"},[o._v(o._s(e.nombre))]),o._m(0,!0)])}))],2)]),n("div",{attrs:{id:"zonaDetallesDato"}},[n("div",{staticClass:"barraSuperiorGeneral"},[n("img",{staticClass:"botonBarraSuperiorGeneral",class:{deshabilitado:"grafica"===o.datoVer},attrs:{src:i("9311"),alt:"Grafica",title:"Ver gráfica"},on:{click:function(e){o.datoVer="grafica"}}}),n("img",{staticClass:"botonBarraSuperiorGeneral",class:{deshabilitado:"tabla"===o.datoVer},attrs:{src:i("0ecf"),alt:"Tabla",title:"Ver tabla"},on:{click:function(e){o.datoVer="tabla"}}})]),n("div",{attrs:{id:"graficaDatoSeleccionado"}}),o.idDatoSeleccionado&&"administracion"!=o.idDatoSeleccionado?n("div",{directives:[{name:"show",rawName:"v-show",value:"tabla"===o.datoVer,expression:"datoVer === 'tabla'"}],attrs:{id:"tablaDatoSeleccionado"}},[n("div",{staticClass:"controlesBloque",attrs:{id:"controlesTablaDatos"}},[n("div",{staticClass:"botonBarraSuperiorGeneral"},[n("img",{attrs:{src:i("1376"),alt:"Nuevo",title:"Crear nuevo item"},on:{click:function(e){return e.stopPropagation(),o.crearNuevoItemDato(e)}}})])]),n("tabla-dato",{key:"tablaDe"+o.datoSeleccionado.id,attrs:{esteDato:o.datoSeleccionado}})],1):o._e(),n("tabla-administracion",{directives:[{name:"show",rawName:"v-show",value:"tabla"===o.datoVer&&"administracion"===o.idDatoSeleccionado,expression:"\n            datoVer === 'tabla' && idDatoSeleccionado === 'administracion'\n          "}],attrs:{eventos:o.esteNodo.eventos,movimientos:o.esteNodo.movimientosDinero,idNodo:o.esteNodo.id,usuarioResponsableAmplioNodo:o.usuarioResponsableAmplio,subNodos:o.subNodos}})],1)])]),n("router-view")],1)},Bu=[function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"controlesDato"},[n("img",{staticClass:"botonControlElementoLista",attrs:{src:i("4592"),alt:"Eliminar",title:"Eliminar dato"}})])}],Uu=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"tablaDato"},[i("div",{attrs:{id:"camposDatoTabla"}},[i("table",[i("tr",o._l(o.esteDato.campos,(function(e){return i("th",{key:"nombreCampo"+e,staticClass:"nombreCampo"},[o._v(" "+o._s(e)+" ")])})),0),o._l(o.esteDato.items,(function(e){return i("tr",{key:e.id},o._l(o.esteDato.campos,(function(n){return i("td",{key:e.id+"valorCampo"+n},[o._v(" "+o._s(e[n])+" ")])})),0)}))],2)])])},Fu=[],_u={name:"TablaDato",props:{esteDato:Object}},Lu=_u,zu=(i("3fef"),Object(p["a"])(Lu,Uu,Fu,!1,null,"820867f8",null)),Vu=zu.exports,Qu=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{attrs:{id:"tablaAdministracion"}},[n("div",{attrs:{id:"barraSuperior"}},[n("div",{attrs:{id:"contenedorBotonesCrear"}},[n("div",{staticClass:"bloqueCrearItems",attrs:{id:"bloqueMovimientosDinero"}},[n("div",{staticClass:"botonBarraSuperior boton",style:{opacity:o.mostrarMovimientosDinero?1:.5},attrs:{title:o.mostrarMovimientosDinero?"Ocultar movimientos de dinero":"Mostrar movimientos de dinero"},on:{click:function(e){e.stopPropagation(),o.mostrarMovimientosDinero=!o.mostrarMovimientosDinero}}},[n("img",{attrs:{src:i("7cb8"),alt:"Factura"}})]),n("div",{staticClass:"botonBarraSuperior boton",style:{opacity:o.mostrarMovimientosArbol?1:.5},attrs:{title:o.mostrarMovimientosDinero?"Ocultar movimientos de sub-nodos":"Mostrar movimientos de sub-nodos"},on:{click:function(e){e.stopPropagation(),o.mostrarMovimientosArbol=!o.mostrarMovimientosArbol}}},[n("img",{attrs:{src:i("94d9"),alt:"Arbol"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.creandoNuevoMovimiento,expression:"!creandoNuevoMovimiento"}],staticClass:"botonBarraSuperior boton"},[n("img",{attrs:{src:i("1376"),alt:"Mas",title:"Crear nuevo movimiento de dinero"},on:{click:function(e){return e.stopPropagation(),o.crearNuevoItemMovimientoDinero(e)}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoNuevoMovimiento,expression:"creandoNuevoMovimiento"}],attrs:{texto:""}})],1),n("div",{staticClass:"bloqueCrearItems",attrs:{id:"bloqueEventos"}},[n("div",{staticClass:"botonBarraSuperior boton",style:{opacity:o.mostrarEventos?1:.5},attrs:{title:o.mostrarEventos?"Ocultar eventos":"Mostrar eventos"},on:{click:function(e){e.stopPropagation(),o.mostrarEventos=!o.mostrarEventos}}},[n("img",{attrs:{src:i("c4d7"),alt:"Exclamación"}})]),n("div",{staticClass:"botonBarraSuperior boton",style:{opacity:o.mostrarEventosArbol?1:.5},attrs:{title:o.mostrarEventos?"Ocultar eventos de sub-nodos":"Mostrar eventos de sub-nodos"},on:{click:function(e){e.stopPropagation(),o.mostrarEventosArbol=!o.mostrarEventosArbol}}},[n("img",{attrs:{src:i("94d9"),alt:"Arbol"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.creandoNuevoEvento,expression:"!creandoNuevoEvento"}],staticClass:"botonBarraSuperior boton"},[n("img",{attrs:{src:i("1376"),alt:"Mas",title:"Crear nuevo evento"},on:{click:function(e){return e.stopPropagation(),o.crearNuevoItemEvento(e)}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoNuevoEvento,expression:"creandoNuevoEvento"}],attrs:{texto:""}})],1)])]),n("div",{attrs:{id:"laTabla"}},o._l(o.items,(function(e){return n("div",{key:e.id,staticClass:"campoItem"},["MovimientoDineroNodoSolidaridad"===e.__typename?n("item-tabla-movimiento-dinero",{attrs:{usuarioResponsableAmplioNodo:o.usuarioResponsableAmplioNodo,idNodo:o.idNodo,esteMovimiento:e},on:{meElimine:function(i){return o.eliminarMovimientoCache(e.id)}}}):o._e(),"EventoNodoSolidaridad"===e.__typename?n("item-tabla-evento",{attrs:{esteEvento:e,usuarioResponsableAmplioNodo:o.usuarioResponsableAmplioNodo,idNodo:o.idNodo,esteMovimiento:e},on:{meElimine:function(i){return o.eliminarEventoCache(e.id)}}}):o._e()],1)})),0)])},Ju=[],Hu=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"itemTablaMovimientoDinero",class:{deshabilitado:o.eliminandose}},[n("div",{attrs:{id:"barraPrincipal"}},[n("img",{staticClass:"iconoItem",attrs:{src:i("7cb8"),alt:"Receta",title:"Movimiento de dinero"}}),n("div",{staticClass:"celdaCampo",attrs:{id:"celdaFecha"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoFecha,expression:"nuevoFecha"},{name:"show",rawName:"v-show",value:o.editandoFecha,expression:"editandoFecha"}],ref:"inputNuevoFecha",staticClass:"inputNuevoFecha",class:{deshabilitado:o.enviandoNuevoFecha},attrs:{id:"inputNuevoFecha",type:"date"},domProps:{value:o.nuevoFecha},on:{keydown:[function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),o.guardarNuevoFecha("next"))},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.$refs.inputNuevoFecha.blur()}],keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoFecha(e))},change:o.guardarNuevoFecha,click:function(o){o.stopPropagation()},blur:function(e){o.editandoFecha=!1},input:function(e){e.target.composing||(o.nuevoFecha=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoFecha,expression:"!editandoFecha"}],staticClass:"contenidoCampo",class:{deshabilitado:o.enviandoNuevoFecha},attrs:{id:"fecha"},on:{click:o.toggleEditandoFecha}},[o._v(" "+o._s(o.fechaFormateada)+" ")])]),n("div",{staticClass:"celdaCampo",attrs:{title:"Articulo",id:"celdaArticulo"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoArticulo,expression:"nuevoArticulo"},{name:"show",rawName:"v-show",value:o.editandoArticulo,expression:"editandoArticulo"}],ref:"inputNuevoArticulo",staticClass:"inputNuevoArticulo inputNombreCosa",class:{deshabilitado:o.enviandoNuevoArticulo},attrs:{type:"text"},domProps:{value:o.nuevoArticulo},on:{keydown:[function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),o.guardarNuevoArticulo("cantidad"))},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.$refs.inputNuevoArticulo.blur()}],keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoArticulo(e))},click:function(o){o.stopPropagation()},blur:function(e){o.editandoArticulo=!1},input:function(e){e.target.composing||(o.nuevoArticulo=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoArticulo,expression:"!editandoArticulo"}],staticClass:"contenidoCampo",class:{deshabilitado:o.enviandoNuevoArticulo},attrs:{id:"articulo"},on:{click:o.toggleEditandoArticulo}},[o._v(" "+o._s(o.esteMovimiento.articulo)+" ")])]),n("div",{staticClass:"celdaCampo",attrs:{id:"celdaCantidad",title:"Cantidad"},on:{click:o.toggleEditandoCantidad}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoCantidad,expression:"nuevoCantidad"},{name:"show",rawName:"v-show",value:o.editandoCantidad,expression:"editandoCantidad"}],ref:"inputNuevoCantidad",staticClass:"inputNuevoCantidad",class:{deshabilitado:o.enviandoNuevoCantidad||o.enviandoNuevoNumeros},attrs:{type:"number",min:"0"},domProps:{value:o.nuevoCantidad},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNumeros(e))},click:function(o){o.stopPropagation()},blur:function(e){o.editandoCantidad=!1,o.nuevoCantidad=o.esteMovimiento.cantidad},keydown:[function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.$refs.inputNuevoCantidad.blur()},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),o.guardarNuevoNumeros("movimientoUnitario"))}],input:function(e){e.target.composing||(o.nuevoCantidad=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoCantidad,expression:"!editandoCantidad"}],staticClass:"contenidoCampo",class:{deshabilitado:o.enviandoNuevoCantidad},attrs:{id:"cantidad"}},[o._v(" "+o._s(o.esteMovimiento.cantidad)+" ")])]),n("div",{staticClass:"celdaCampo",attrs:{title:"Valor unitario"},on:{click:o.toggleEditandoMovimientoUnitario}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoMovimientoUnitario,expression:"nuevoMovimientoUnitario"},{name:"show",rawName:"v-show",value:o.editandoMovimientoUnitario,expression:"editandoMovimientoUnitario"}],ref:"inputNuevoMovimientoUnitario",staticClass:"inputNuevoMovimientoUnitario",class:{deshabilitado:o.enviandoNuevoMovimientoUnitario||o.enviandoNuevoNumeros},attrs:{type:"number"},domProps:{value:o.nuevoMovimientoUnitario},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNumeros(e))},keydown:[function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),o.guardarNuevoNumeros("movimientoTotal"))},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.$refs.inputNuevoMovimientoUnitario.blur()}],click:function(o){o.stopPropagation()},blur:function(e){o.editandoMovimientoUnitario=!1,o.nuevoMovimientoUnitario=o.esteMovimiento.movimientoUnitario},input:function(e){e.target.composing||(o.nuevoMovimientoUnitario=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoMovimientoUnitario&&"unitario"!=o.movimientoDependiente,expression:"\n          !editandoMovimientoUnitario && movimientoDependiente != 'unitario'\n        "}],staticClass:"contenidoCampo contenidoCampoDinero",class:{deshabilitado:o.enviandoNuevoMovimientoUnitario},attrs:{id:"movimientoUnitario"}},[o._v(" "+o._s(o.esteMovimiento.movimientoUnitario)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoMovimientoUnitario&&"unitario"===o.movimientoDependiente,expression:"\n          !editandoMovimientoUnitario && movimientoDependiente === 'unitario'\n        "}],staticClass:"contenidoCampo contenidoCampoDinero movimientoDependiente",class:{deshabilitado:o.enviandoNuevoMovimientoUnitario},attrs:{id:"movimientoUnitarioDependiente"}},[o._v(" "+o._s(o.nuevoMovimientoUnitario)+" ")])]),n("div",{staticClass:"celdaCampo",attrs:{title:"Valor total"},on:{click:o.toggleEditandoMovimientoTotal}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoMovimientoTotal,expression:"nuevoMovimientoTotal"},{name:"show",rawName:"v-show",value:o.editandoMovimientoTotal,expression:"editandoMovimientoTotal"}],ref:"inputNuevoMovimientoTotal",staticClass:"inputNuevoMovimientoTotal",class:{deshabilitado:o.enviandoNuevoMovimientoTotal||o.enviandoNuevoNumeros},attrs:{type:"number"},domProps:{value:o.nuevoMovimientoTotal},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNumeros(e))},keydown:[function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),o.guardarNuevoNumeros())},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.$refs.inputNuevoMovimientoTotal.blur()}],click:function(o){o.stopPropagation()},blur:function(e){o.editandoMovimientoTotal=!1,o.nuevoMovimientoTotal=o.esteMovimiento.movimientoTotal},input:function(e){e.target.composing||(o.nuevoMovimientoTotal=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoMovimientoTotal&&"total"!=o.movimientoDependiente,expression:"!editandoMovimientoTotal && movimientoDependiente != 'total'"}],staticClass:"contenidoCampo contenidoCampoDinero",class:{deshabilitado:o.enviandoNuevoMovimientoTotal},attrs:{id:"movimientoTotal"}},[o._v(" "+o._s(o.esteMovimiento.movimientoTotal)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoMovimientoTotal&&"total"===o.movimientoDependiente,expression:"!editandoMovimientoTotal && movimientoDependiente === 'total'"}],staticClass:"contenidoCampo contenidoCampoDinero movimientoDependiente",class:{deshabilitado:o.enviandoNuevoMovimientoTotal},attrs:{id:"movimientoTotalDependiente"}},[o._v(" "+o._s(o.nuevoMovimientoTotal)+" ")])]),n("div",{staticClass:"controlesItem"},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.togglingMovimientoRealizado,expression:"!togglingMovimientoRealizado"}],staticClass:"boton",class:{deshabilitado:o.togglingMovimientoRealizado},style:{filter:o.esteMovimiento.realizado?"var(--atlasFilterVerde)":""},attrs:{src:i("5d24"),alt:"Check",title:o.esteMovimiento.realizado?"Marcar que el movimiento no ha sido realizado":"Marcar quue el movimiento fue realizado"},on:{click:o.toggleMovimientoRealizado}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.togglingMovimientoRealizado,expression:"togglingMovimientoRealizado"}],attrs:{texto:""}}),n("div",{staticClass:"boton",class:{deshabilitado:(!o.esteMovimiento.informacion||0===o.esteMovimiento.informacion.length)&&!o.usuarioResponsableAmplioNodo},attrs:{title:"Ver información de este movimiento",id:"botonVerInformacion"},on:{click:function(e){e.stopPropagation(),o.mostrandoInformacion=!o.mostrandoInformacion}}},[n("img",{attrs:{src:i("f9b3"),alt:"Informacion"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.eliminandose,expression:"!eliminandose"}],staticClass:"boton",attrs:{title:"Eliminar este movimiento"},on:{click:function(e){return e.stopPropagation(),o.eliminarse(e)}}},[n("img",{attrs:{src:i("4592"),alt:"Delete"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.eliminandose,expression:"eliminandose"}],attrs:{texto:""}})],1)]),o.esteMovimiento.nodoOwner?n("div",{attrs:{id:"infoNodoOwner"}},["trabajo"===o.esteMovimiento.nodoOwner.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-cog fa-w-16 iconoNodoOwner",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}})]):o._e(),"objetivo"===o.esteMovimiento.nodoOwner.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-star fa-w-18 iconoNodoOwner",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"star",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[n("path",{attrs:{fill:"currentColor",d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}})]):o._e(),n("div",{attrs:{id:"nombreNodoOwner"}},[o._v(o._s(o.esteMovimiento.nodoOwner.nombre))])]):o._e(),n("div",{attrs:{id:"contenidoSeleccionado"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoInformacion,expression:"mostrandoInformacion"}],staticClass:"zonaContenidoSeleccionado",attrs:{id:"zonaInformacion"},on:{click:o.toggleEditandoInformacion}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoInformacion,expression:"!editandoInformacion"}],ref:"informacion",attrs:{id:"informacion"}},[o._v(" "+o._s(o.esteMovimiento.informacion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoInformacion,expression:"nuevoInformacion"},{name:"show",rawName:"v-show",value:o.editandoInformacion,expression:"editandoInformacion"}],ref:"inputNuevoInformacion",staticClass:"inputTextoNodo",class:{deshabilitado:o.enviandoNuevoInformacion},attrs:{id:"inputNuevoInformacion"},domProps:{value:o.nuevoInformacion},on:{click:function(o){o.stopPropagation()},input:function(e){e.target.composing||(o.nuevoInformacion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoInformacion,expression:"editandoInformacion"}],staticClass:"contenedorBotonesCampo",on:{click:function(o){o.stopPropagation()}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoNuevoInformacion,expression:"!enviandoNuevoInformacion"}],staticClass:"botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarInformacion"},on:{click:o.guardarNuevoInformacion}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoInformacion,expression:"enviandoNuevoInformacion"}],attrs:{texto:""}}),n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionInformacion"},on:{click:function(e){o.editandoInformacion=!1}}})],1)])])])},Zu=[];function Gu(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idMovimientoDinero: ID!\n              $nuevoRealizado: Boolean!\n            ) {\n              setRealizadoMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n                nuevoRealizado: $nuevoRealizado\n              ) {\n                id\n                realizado\n              }\n            }\n          "]);return Gu=function(){return o},o}function Ku(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idMovimientoDinero: ID!\n              $nuevoMovimientoTotal: Float!\n              $nuevoMovimientoUnitario: Float!\n              $nuevoCantidad: Float!\n            ) {\n              editarNumerosMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n                nuevoMovimientoTotal: $nuevoMovimientoTotal\n                nuevoMovimientoUnitario: $nuevoMovimientoUnitario\n                nuevoCantidad: $nuevoCantidad\n              ) {\n                id\n                movimientoTotal\n                cantidad\n                movimientoUnitario\n              }\n            }\n          "]);return Ku=function(){return o},o}function Yu(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idMovimientoDinero: ID!\n              $nuevoMovimientoTotal: Float!\n            ) {\n              editarNumerosMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n                nuevoMovimientoTotal: $nuevoMovimientoTotal\n              ) {\n                id\n                movimientoTotal\n              }\n            }\n          "]);return Yu=function(){return o},o}function Wu(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idMovimientoDinero: ID!\n              $nuevoMovimientoUnitario: Float!\n            ) {\n              editarMovimientoUnitarioMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n                nuevoMovimientoUnitario: $nuevoMovimientoUnitario\n              ) {\n                id\n                movimientoUnitario\n              }\n            }\n          "]);return Wu=function(){return o},o}function Xu(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idMovimientoDinero: ID!\n              $nuevoCantidad: Float!\n            ) {\n              editarCantidadMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n                nuevoCantidad: $nuevoCantidad\n              ) {\n                id\n                cantidad\n              }\n            }\n          "]);return Xu=function(){return o},o}function ol(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idMovimientoDinero: ID!\n              $nuevoInformacion: String!\n            ) {\n              editarInformacionMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n                nuevoInformacion: $nuevoInformacion\n              ) {\n                id\n                informacion\n              }\n            }\n          "]);return ol=function(){return o},o}function el(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idMovimientoDinero: ID!\n              $nuevoArticulo: String!\n            ) {\n              editarArticuloMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n                nuevoArticulo: $nuevoArticulo\n              ) {\n                id\n                articulo\n              }\n            }\n          "]);return el=function(){return o},o}function il(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idMovimientoDinero: ID!\n              $nuevoFecha: Date!\n            ) {\n              editarFechaMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n                nuevoFecha: $nuevoFecha\n              ) {\n                id\n                fecha\n              }\n            }\n          "]);return il=function(){return o},o}function nl(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idMovimientoDinero: ID!) {\n              eliminarMovimientoDineroNodoSolidaridad(\n                idNodo: $idNodo\n                idMovimientoDinero: $idMovimientoDinero\n              )\n            }\n          "]);return nl=function(){return o},o}var tl={components:{Loading:mo},name:"ItemTablaMovimientoDinero",props:{esteMovimiento:Object,idNodo:String,usuarioResponsableAmplioNodo:Boolean},data:function(){return{eliminandose:!1,mostrandoInformacion:!1,movimientoDependiente:null,nuevoFecha:Date.now(),editandoFecha:!1,enviandoNuevoFecha:!1,nuevoArticulo:"Nuevo articulo",editandoArticulo:!1,enviandoNuevoArticulo:!1,nuevoInformacion:"Informacion",editandoInformacion:!1,enviandoNuevoInformacion:!1,nuevoCantidad:"1",editandoCantidad:!1,enviandoNuevoCantidad:!1,nuevoMovimientoUnitario:"10000",editandoMovimientoUnitario:!1,enviandoNuevoMovimientoUnitario:!1,nuevoMovimientoTotal:"10000",editandoMovimientoTotal:!1,enviandoNuevoMovimientoTotal:!1,enviandoNuevoNumeros:!1,togglingMovimientoRealizado:!1}},computed:{fechaFormateada:function(){return this.esteMovimiento.fecha.substr(0,10)},nuevoFechaIlegal:function(){return this.nuevoFecha.length<1},nuevoArticuloIlegal:function(){return this.nuevoArticulo.length<1||!!In.test(this.nuevoArticulo)},nuevoInformacionIlegal:function(){return!this.nuevoInformacion||this.nuevoInformacion.length<1||!!Rn.test(this.nuevoInformacion)},nuevoCantidadIlegal:function(){return!this.nuevoCantidad||!this.nuevoCantidad>0},nuevoMovimientoUnitarioIlegal:function(){return!this.nuevoMovimientoUnitario||!Math.abs(Number(this.nuevoMovimientoUnitario))>0},nuevoMovimientoTotalIlegal:function(){return!this.nuevoMovimientoTotal||!Math.abs(Number(this.nuevoMovimientoTotal))>0}},methods:{eliminarse:function(){var o=this;confirm("¿Confirmar la eliminación de este movimiento? (Esta acción no puede deshacerse)")&&(this.eliminandose=!0,this.$apollo.mutate({mutation:d()(nl()),variables:{idNodo:this.idNodo,idMovimientoDinero:this.esteMovimiento.id}}).then((function(){o.$emit("meElimine")})).catch((function(e){console.log("Error: ".concat(e)),o.eliminandose=!1})))},guardarNuevoFecha:function(o){var e=this;if(this.usuarioResponsableAmplioNodo)if(this.nuevoFechaIlegal)console.log("No enviado");else{if(this.nuevoFecha==this.esteMovimiento.fecha)return this.editandoFecha=!1,void("next"===this.next&&this.toggleEditandoArticulo());console.log("guardando nuevo fecha"),this.enviandoNuevoFecha=!0,this.$apollo.mutate({mutation:d()(il()),variables:{idMovimientoDinero:this.esteMovimiento.id,idNodo:this.idNodo,nuevoFecha:this.nuevoFecha}}).then((function(){e.enviandoNuevoFecha=!1,e.editandoFecha=!1})).catch((function(o){e.enviandoNuevoFecha=!1,console.log("Error. E :".concat(o))})),"next"===o&&this.toggleEditandoArticulo()}else console.log("No autorizado")},guardarNuevoArticulo:function(o){var e=this;if(this.usuarioResponsableAmplioNodo)if(this.nuevoArticulo=this.$refs.inputNuevoArticulo.value,this.nuevoArticuloIlegal)console.log("No enviado");else{if(this.nuevoArticulo==this.esteMovimiento.articulo)return this.editandoArticulo=!1,void("cantidad"===o&&this.toggleEditandoCantidad());console.log("guardando nuevo articulo"),this.enviandoNuevoArticulo=!0,this.$apollo.mutate({mutation:d()(el()),variables:{idMovimientoDinero:this.esteMovimiento.id,idNodo:this.idNodo,nuevoArticulo:this.nuevoArticulo}}).then((function(){e.enviandoNuevoArticulo=!1,e.editandoArticulo=!1})).catch((function(o){e.enviandoNuevoArticulo=!1,console.log("Error. E :".concat(o))})),"cantidad"===o&&this.toggleEditandoCantidad()}else console.log("No autorizado")},guardarNuevoInformacion:function(){var o=this;this.usuarioResponsableAmplioNodo?this.nuevoInformacionIlegal?console.log("No enviado"):this.nuevoInformacion!=this.esteMovimiento.informacion?(console.log("guardando nuevo informacion"),this.enviandoNuevoInformacion=!0,this.$apollo.mutate({mutation:d()(ol()),variables:{idMovimientoDinero:this.esteMovimiento.id,idNodo:this.idNodo,nuevoInformacion:this.nuevoInformacion}}).then((function(){o.enviandoNuevoInformacion=!1,o.editandoInformacion=!1})).catch((function(e){o.enviandoNuevoInformacion=!1,console.log("Error. E :".concat(e))}))):this.editandoInformacion=!1:console.log("No autorizado")},guardarNuevoCantidad:function(o){var e=this;if(this.usuarioResponsableAmplioNodo)if(this.nuevoCantidadIlegal)console.log("No enviado");else{if(this.nuevoCantidad==this.esteMovimiento.cantidad)return this.editandoCantidad=!1,void this.toggleEditandoMovimientoUnitario();console.log("guardando nuevo cantidad"),this.enviandoNuevoCantidad=!0,this.$apollo.mutate({mutation:d()(Xu()),variables:{idMovimientoDinero:this.esteMovimiento.id,idNodo:this.idNodo,nuevoCantidad:Number(this.nuevoCantidad)}}).then((function(){e.enviandoNuevoCantidad=!1,e.editandoCantidad=!1})).catch((function(o){e.enviandoNuevoCantidad=!1,console.log("Error. E :".concat(o))})),"movimientoUnitario"===o&&this.toggleEditandoMovimientoUnitario()}else console.log("No autorizado")},guardarNuevoMovimientoUnitario:function(){var o=this;this.usuarioResponsableAmplioNodo?this.nuevoMovimientoUnitarioIlegal?console.log("No enviado"):this.nuevoMovimientoUnitario!=this.esteMovimiento.movimientoUnitario?(console.log("guardando nuevo movimientoUnitario"),this.enviandoNuevoMovimientoUnitario=!0,this.$apollo.mutate({mutation:d()(Wu()),variables:{idMovimientoDinero:this.esteMovimiento.id,idNodo:this.idNodo,nuevoMovimientoUnitario:Number(this.nuevoMovimientoUnitario)}}).then((function(){o.enviandoNuevoMovimientoUnitario=!1,o.editandoMovimientoUnitario=!1})).catch((function(e){o.enviandoNuevoMovimientoUnitario=!1,console.log("Error. E :".concat(e))}))):this.editandoMovimientoUnitario=!1:console.log("No autorizado")},guardarNuevoMovimientoTotal:function(){var o=this;this.usuarioResponsableAmplioNodo?this.nuevoMovimientoTotalIlegal?console.log("No enviado"):this.nuevoMovimientoTotal!=this.esteMovimiento.movimientoTotal?(console.log("guardando nuevo movimientoTotal del movimiento"),this.enviandoNuevoMovimientoTotal=!0,this.$apollo.mutate({mutation:d()(Yu()),variables:{idMovimientoDinero:this.esteMovimiento.id,idNodo:this.idNodo,nuevoMovimientoTotal:Number(this.nuevoMovimientoTotal)}}).then((function(){o.enviandoNuevoMovimientoTotal=!1,o.editandoMovimientoTotal=!1})).catch((function(e){o.enviandoNuevoMovimientoTotal=!1,console.log("Error. E :".concat(e))}))):this.editandoMovimientoTotal=!1:console.log("No autorizado")},guardarNuevoNumeros:function(o){var e=this;if(this.usuarioResponsableAmplioNodo)if(this.nuevoMovimientoTotalIlegal||this.nuevoMovimientoUnitarioIlegal||this.nuevoCantidadIlegal)console.log("Valores ilegales Cantidad: ".concat(this.nuevoCantidad,", valorUnitario: ").concat(this.nuevoMovimientoUnitario,", MovTotal: ").concat(this.nuevoMovimientoTotal,". No enviado"));else{if(this.nuevoMovimientoTotal==this.esteMovimiento.movimientoTotal&&this.nuevoCantidad===this.esteMovimiento.cantidad&&this.nuevoMovimientoUnitario===this.esteMovimiento.movimientoUnitario)return this.editandoMovimientoTotal=!1,this.editandoMovimientoUnitario=!1,void(this.editandoCantidad=!1);console.log("guardando nuevo numeros"),this.enviandoNuevoNumeros=!0,this.$apollo.mutate({mutation:d()(Ku()),variables:{idMovimientoDinero:this.esteMovimiento.id,idNodo:this.idNodo,nuevoMovimientoTotal:Number(this.nuevoMovimientoTotal),nuevoMovimientoUnitario:Number(this.nuevoMovimientoUnitario),nuevoCantidad:Number(this.nuevoCantidad)}}).then((function(){e.enviandoNuevoNumeros=!1,e.editandoMovimientoTotal=!1,e.editandoMovimientoUnitario=!1,e.editandoCantidad=!1,"movimientoUnitario"===o?e.toggleEditandoMovimientoUnitario():"movimientoTotal"===o&&e.toggleEditandoMovimientoTotal()})).catch((function(o){e.enviandoNuevoNumeros=!1,e.editandoMovimientoTotal=!1,e.editandoMovimientoUnitario=!1,e.editandoCantidad=!1,console.log("Error. E :".concat(o))}))}else console.log("No autorizado")},toggleEditandoFecha:function(){var o=this;this.usuarioResponsableAmplioNodo?(this.editandoFecha=!this.editandoFecha,this.nuevoFecha=this.esteMovimiento.fecha.substr(0,10),this.$nextTick((function(){o.$refs.inputNuevoFecha.click()}))):console.log("No autorizado")},toggleEditandoArticulo:function(){var o=this;this.usuarioResponsableAmplioNodo?(this.editandoArticulo=!this.editandoArticulo,this.nuevoArticulo=this.esteMovimiento.articulo,this.$nextTick((function(){o.$refs.inputNuevoArticulo.focus()}))):console.log("No autorizado")},toggleEditandoCantidad:function(){var o=this;this.usuarioResponsableAmplioNodo?(this.editandoCantidad=!this.editandoCantidad,this.nuevoCantidad=this.esteMovimiento.cantidad,this.nuevoMovimientoUnitario=this.esteMovimiento.movimientoUnitario,this.nuevoMovimientoTotal=this.esteMovimiento.movimientoTotal,this.$nextTick((function(){o.$refs.inputNuevoCantidad.focus()}))):console.log("No autorizado")},toggleEditandoInformacion:function(){var o=this;this.usuarioResponsableAmplioNodo?(console.log("toggling edit de información"),this.$refs.inputNuevoInformacion.style.height=this.$refs.informacion.offsetHeight+"px",this.editandoInformacion=!this.editandoInformacion,this.nuevoInformacion=this.esteMovimiento.informacion,!0===this.editandoInformacion&&this.$nextTick((function(){o.$refs.inputNuevoInformacion.focus()}))):console.log("No autorizado")},toggleEditandoMovimientoUnitario:function(){var o=this;this.usuarioResponsableAmplioNodo?(this.movimientoDependiente="total",this.editandoMovimientoUnitario=!this.editandoMovimientoUnitario,this.nuevoCantidad=this.esteMovimiento.cantidad,this.nuevoMovimientoUnitario=this.esteMovimiento.movimientoUnitario,this.nuevoMovimientoTotal=this.esteMovimiento.movimientoTotal,this.$nextTick((function(){o.$refs.inputNuevoMovimientoUnitario.focus()}))):console.log("No autorizado")},toggleEditandoMovimientoTotal:function(){var o=this;this.usuarioResponsableAmplioNodo?(this.movimientoDependiente="unitario",this.editandoMovimientoTotal=!this.editandoMovimientoTotal,this.nuevoCantidad=this.esteMovimiento.cantidad,this.nuevoMovimientoUnitario=this.esteMovimiento.movimientoUnitario,this.nuevoMovimientoTotal=this.esteMovimiento.movimientoTotal,this.$nextTick((function(){o.$refs.inputNuevoMovimientoTotal.focus()}))):console.log("No autorizado")},toggleMovimientoRealizado:function(){var o=this;this.usuarioResponsableAmplioNodo&&(console.log("Toggling"),this.togglingMovimientoRealizado=!0,this.$apollo.mutate({mutation:d()(Gu()),variables:{idNodo:this.idNodo,idMovimientoDinero:this.esteMovimiento.id,nuevoRealizado:!this.esteMovimiento.realizado}}).then((function(){o.togglingMovimientoRealizado=!1,console.log("toggled")})).catch((function(e){o.togglingMovimientoRealizado=!1,console.log("Error: E:".concat(e))})))}},watch:{nuevoMovimientoUnitario:function(o){"unitario"!==this.movimientoDependiente&&(this.nuevoMovimientoTotal=Number(this.nuevoCantidad)*Number(o))},nuevoMovimientoTotal:function(o){"total"!==this.movimientoDependiente&&(Number(this.nuevoCantidad)<=0?this.nuevoMovimientoUnitario=null:this.nuevoMovimientoUnitario=Number(o)/Number(this.nuevoCantidad))},nuevoCantidad:function(){"unitario"===this.movimientoDependiente?Number(this.nuevoCantidad)<=0?this.nuevoMovimientoUnitario=null:this.nuevoMovimientoUnitario=Number(this.nuevoMovimientoTotal)/Number(this.nuevoCantidad):"total"===this.movimientoDependiente&&(console.log("Calculando movimiento total"),this.nuevoMovimientoTotal=Number(this.nuevoCantidad)*Number(this.nuevoMovimientoUnitario))},esteMovimiento:{handler:function(o){this.nuevoCantidad=o.cantidad,this.nuevoMovimientoTotal=o.movimientoTotal,this.nuevoMovimientoUnitario=o.movimientoUnitario},inmediate:!0},mostrandoInformacion:function(o){console.log("Se abre info"),o?(!this.esteMovimiento.informacion||this.esteMovimiento.informacion.length<1)&&(console.log("Editar"),this.toggleEditandoInformacion()):this.editandoInformacion=!1}}},al=tl,sl=(i("d8a3"),Object(p["a"])(al,Hu,Zu,!1,null,"5bfea5c4",null)),rl=sl.exports,dl=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"itemTablaEvento",class:{deshabilitado:o.eliminandose}},[n("div",{attrs:{id:"barraPrincipal"}},[n("img",{staticClass:"iconoItem",attrs:{src:i("c4d7"),alt:"Exclamación",title:"Evento"}}),n("div",{staticClass:"celdaCampo",attrs:{id:"celdaFecha"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoFecha,expression:"nuevoFecha"},{name:"show",rawName:"v-show",value:o.editandoFecha,expression:"editandoFecha"}],ref:"inputNuevoFecha",staticClass:"inputNuevoFecha",class:{deshabilitado:o.enviandoNuevoFecha},attrs:{id:"inputNuevoFecha",type:"date"},domProps:{value:o.nuevoFecha},on:{keydown:[function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),o.guardarNuevoFecha("next"))},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.$refs.inputNuevoFecha.blur()}],keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoFecha(e))},change:o.guardarNuevoFecha,click:function(o){o.stopPropagation()},blur:function(e){o.editandoFecha=!1},input:function(e){e.target.composing||(o.nuevoFecha=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoFecha,expression:"!editandoFecha"}],staticClass:"contenidoCampo",class:{deshabilitado:o.enviandoNuevoFecha},attrs:{id:"fecha"},on:{click:o.toggleEditandoFecha}},[o._v(" "+o._s(o.fechaFormateada)+" ")])]),n("div",{staticClass:"celdaCampo",attrs:{title:"Nombre",id:"celdaNombre"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNuevoNombre inputNombreCosa",class:{deshabilitado:o.enviandoNuevoNombre},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keydown:[function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"tab",9,e.key,"Tab")?null:(e.preventDefault(),o.guardarNuevoNombre("descripcion"))},function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.$refs.inputNuevoNombre.blur()}],keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},click:function(o){o.stopPropagation()},blur:function(e){o.editandoNombre=!1},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],staticClass:"contenidoCampo",class:{deshabilitado:o.enviandoNuevoNombre},attrs:{id:"nombre"},on:{click:o.toggleEditandoNombre}},[o._v(" "+o._s(o.esteEvento.nombre)+" ")])]),n("div",{staticClass:"controlesItem"},[n("div",{staticClass:"boton",class:{deshabilitado:(!o.esteEvento.descripcion||0===o.esteEvento.descripcion.length)&&!o.usuarioResponsableAmplioNodo},attrs:{title:"Ver descripción de este evento",id:"botonVerInformacion"},on:{click:function(e){e.stopPropagation(),o.mostrandoDescripcion=!o.mostrandoDescripcion}}},[n("img",{attrs:{src:i("f9b3"),alt:"Descripcion"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.eliminandose,expression:"!eliminandose"}],staticClass:"boton",attrs:{title:"Eliminar este evento"},on:{click:function(e){return e.stopPropagation(),o.eliminarse(e)}}},[n("img",{attrs:{src:i("4592"),alt:"Delete"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.eliminandose,expression:"eliminandose"}],attrs:{texto:""}})],1)]),o.esteEvento.nodoOwner?n("div",{attrs:{id:"infoNodoOwner"}},["trabajo"===o.esteEvento.nodoOwner.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-cog fa-w-16 iconoNodoOwner",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}})]):o._e(),"objetivo"===o.esteEvento.nodoOwner.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-star fa-w-18 iconoNodoOwner",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"star",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[n("path",{attrs:{fill:"currentColor",d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}})]):o._e(),n("div",{attrs:{id:"nombreNodoOwner"}},[o._v(o._s(o.esteEvento.nodoOwner.nombre))])]):o._e(),n("div",{attrs:{id:"contenidoSeleccionado"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoDescripcion,expression:"mostrandoDescripcion"}],staticClass:"zonaContenidoSeleccionado",attrs:{id:"zonaDescripcion"},on:{click:o.toggleEditandoDescripcion}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteEvento.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"inputTextoNodo",class:{deshabilitado:o.enviandoNuevoDescripcion},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{click:function(o){o.stopPropagation()},input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],staticClass:"contenedorBotonesCampo",on:{click:function(o){o.stopPropagation()}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoNuevoDescripcion,expression:"!enviandoNuevoDescripcion"}],staticClass:"botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarDescripcion"},on:{click:o.guardarNuevoDescripcion}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:""}}),n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})],1)])])])},cl=[];function ul(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idEvento: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionEventoNodoSolidaridad(\n                idNodo: $idNodo\n                idEvento: $idEvento\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return ul=function(){return o},o}function ll(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idEvento: ID!\n              $nuevoNombre: String!\n            ) {\n              editarNombreEventoNodoSolidaridad(\n                idNodo: $idNodo\n                idEvento: $idEvento\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return ll=function(){return o},o}function vl(){var o=Object(s["a"])(["\n            mutation (\n              $idNodo: ID!\n              $idEvento: ID!\n              $nuevoFecha: Date!\n            ) {\n              editarFechaEventoNodoSolidaridad(\n                idNodo: $idNodo\n                idEvento: $idEvento\n                nuevoFecha: $nuevoFecha\n              ) {\n                id\n                fecha\n              }\n            }\n          "]);return vl=function(){return o},o}function ml(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $idEvento: ID!) {\n              eliminarEventoNodoSolidaridad(\n                idNodo: $idNodo\n                idEvento: $idEvento\n              )\n            }\n          "]);return ml=function(){return o},o}var pl={components:{Loading:mo},name:"ItemTablaEvento",props:{esteEvento:Object,idNodo:String,usuarioResponsableAmplioNodo:Boolean},data:function(){return{eliminandose:!1,mostrandoDescripcion:!1,nuevoFecha:Date.now(),editandoFecha:!1,enviandoNuevoFecha:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1}},computed:{fechaFormateada:function(){return this.esteEvento.fecha.substr(0,10)},nuevoFechaIlegal:function(){return this.nuevoFecha.length<1},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!In.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!Rn.test(this.nuevoDescripcion)}},methods:{eliminarse:function(){var o=this;confirm("¿Confirmar la eliminación de este evento? (Esta acción no puede deshacerse)")&&(this.eliminandose=!0,this.$apollo.mutate({mutation:d()(ml()),variables:{idNodo:this.idNodo,idEvento:this.esteEvento.id}}).then((function(){o.$emit("meElimine")})).catch((function(e){console.log("Error: ".concat(e)),o.eliminandose=!1})))},guardarNuevoFecha:function(o){var e=this;if(this.usuarioResponsableAmplioNodo)if(this.nuevoFechaIlegal)console.log("No enviado");else{if(this.nuevoFecha==this.esteEvento.fecha)return this.editandoFecha=!1,void("next"===this.next&&this.toggleEditandoNombre());console.log("guardando nuevo fecha"),this.enviandoNuevoFecha=!0,this.$apollo.mutate({mutation:d()(vl()),variables:{idEvento:this.esteEvento.id,idNodo:this.idNodo,nuevoFecha:this.nuevoFecha}}).then((function(){e.enviandoNuevoFecha=!1,e.editandoFecha=!1})).catch((function(o){e.enviandoNuevoFecha=!1,console.log("Error. E :".concat(o))})),"next"===o&&this.toggleEditandoNombre()}else console.log("No autorizado")},guardarNuevoNombre:function(o){var e=this;if(this.usuarioResponsableAmplioNodo)if(this.nuevoNombreIlegal)console.log("No enviado");else{if(console.log("guardando nuevo nombre. Next: ".concat(o)),this.nuevoNombre==this.esteEvento.nombre)return this.editandoNombre=!1,void("descripcion"===o&&(this.mostrandoDescripcion=!0,this.toggleEditandoDescripcion(!0)));this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(ll()),variables:{idEvento:this.esteEvento.id,idNodo:this.idNodo,nuevoNombre:this.nuevoNombre}}).then((function(){e.enviandoNuevoNombre=!1,e.editandoNombre=!1})).catch((function(o){e.enviandoNuevoNombre=!1,console.log("Error. E :".concat(o))})),"descripcion"===o&&(this.mostrandoDescripcion=!0,this.toggleEditandoDescripcion(!0))}else console.log("No autorizado")},guardarNuevoDescripcion:function(){var o=this;this.usuarioResponsableAmplioNodo?this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteEvento.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:d()(ul()),variables:{idEvento:this.esteEvento.id,idNodo:this.idNodo,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1:console.log("No autorizado")},toggleEditandoFecha:function(){var o=this;this.usuarioResponsableAmplioNodo?(this.editandoFecha=!this.editandoFecha,this.nuevoFecha=this.esteEvento.fecha.substr(0,10),this.$nextTick((function(){o.$refs.inputNuevoFecha.focus()}))):console.log("No autorizado")},toggleEditandoNombre:function(){var o=this;this.usuarioResponsableAmplioNodo?(this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteEvento.nombre,this.$nextTick((function(){o.$refs.inputNuevoNombre.focus()}))):console.log("No autorizado")},toggleEditandoDescripcion:function(o){var e=this;this.usuarioResponsableAmplioNodo?(console.log("toggling edit de descripción"),this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=o||!this.editandoDescripcion,console.log("Queda en ".concat(this.editandoDescripcion)),this.nuevoDescripcion=this.esteEvento.descripcion,!0===this.editandoDescripcion&&this.$nextTick((function(){e.$refs.inputNuevoDescripcion.focus()}))):console.log("No autorizado")}},watch:{mostrandoDescripcion:function(o){console.log("Se abre descripción"),o?(!this.esteEvento.descripcion||this.esteEvento.descripcion.length<1)&&(console.log("Editar"),this.editandoDescripcion||this.toggleEditandoDescripcion(!0)):this.editandoDescripcion=!1}}},hl=pl,fl=(i("3fbe"),Object(p["a"])(hl,dl,cl,!1,null,"42ba70c1",null)),gl=fl.exports;function bl(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              crearNuevoEventoNodoSolidaridad(idNodo: $idNodo) {\n                ...fragEventoNodoSolidaridad\n              }\n            }\n            ","\n          "]);return bl=function(){return o},o}function Nl(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              crearNuevoMovimientoDineroNodoSolidaridad(idNodo: $idNodo) {\n                ...fragMovimientoDineroNodoSolidaridad\n              }\n            }\n            ","\n          "]);return Nl=function(){return o},o}var Al={components:{ItemTablaMovimientoDinero:rl,Loading:mo,ItemTablaEvento:gl},name:"TablaAdministracion",props:{movimientos:Array,eventos:Array,idNodo:String,usuarioResponsableAmplioNodo:Boolean,subNodos:Array},data:function(){return{mostrarMovimientosDinero:!0,creandoNuevoMovimiento:!1,mostrarMovimientosArbol:!0,mostrarEventos:!0,creandoNuevoEvento:!1,mostrarEventosArbol:!0}},methods:{crearNuevoItemMovimientoDinero:function(){var o=this;this.creandoNuevoMovimiento=!0,this.$apollo.mutate({mutation:d()(Nl(),Ei),variables:{idNodo:this.$route.params.id}}).then((function(e){var i=e.data.crearNuevoMovimientoDineroNodoSolidaridad,n=o.$apollo.provider.defaultClient,t=n.readQuery({query:ql,variables:{idNodo:o.idNodo}}),a=JSON.parse(JSON.stringify(t)),s=a.nodoSolidaridad.movimientosDinero,r=s.findIndex((function(o){return o.id===i.id}));-1===r&&(s.push(i),n.writeQuery({query:ql,variables:{idNodo:o.idNodo},data:a})),o.creandoNuevoMovimiento=!1})).catch((function(e){console.log("Error: ".concat(e)),o.creandoNuevoMovimiento=!1}))},crearNuevoItemEvento:function(){var o=this;this.creandoNuevoEvento=!0,this.$apollo.mutate({mutation:d()(bl(),wi),variables:{idNodo:this.$route.params.id}}).then((function(e){var i=e.data.crearNuevoEventoNodoSolidaridad,n=o.$apollo.provider.defaultClient,t=n.readQuery({query:ql,variables:{idNodo:o.idNodo}}),a=JSON.parse(JSON.stringify(t)),s=a.nodoSolidaridad.eventos,r=s.findIndex((function(o){return o.id===i.id}));-1===r&&(s.push(i),n.writeQuery({query:ql,variables:{idNodo:o.idNodo},data:a})),o.creandoNuevoEvento=!1})).catch((function(e){console.log("Error: ".concat(e)),o.creandoNuevoEvento=!1}))},eliminarMovimientoCache:function(o){console.log("Eliminando mov de cache");var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:ql,variables:{idNodo:this.idNodo}}),n=JSON.parse(JSON.stringify(i)),t=n.nodoSolidaridad.movimientosDinero,a=t.findIndex((function(e){return e.id===o}));a>-1&&(t.splice(a,1),e.writeQuery({query:ql,variables:{idNodo:this.idNodo},data:n}))},eliminarEventoCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:ql,variables:{idNodo:this.idNodo}}),n=JSON.parse(JSON.stringify(i)),t=n.nodoSolidaridad.eventos,a=t.findIndex((function(e){return e.id===o}));a>-1&&(t.splice(a,1),e.writeQuery({query:ql,variables:{idNodo:this.idNodo},data:n}))}},computed:{items:function(){var o=[];return this.mostrarMovimientosDinero&&(o=o.concat(this.movimientos),this.mostrarMovimientosArbol&&(o=o.concat(this.movimientosDineroSubnodos))),this.mostrarEventos&&(o=o.concat(this.eventos),this.mostrarEventosArbol&&(o=o.concat(this.eventosSubnodos))),o.sort((function(o,e){return Date.parse(o.fecha)-Date.parse(e.fecha)})),o},movimientosDineroSubnodos:function(){var o=[];return this.subNodos.forEach((function(e){o.push.apply(o,Object(to["a"])(e.movimientosDinero.map((function(o){return Object(M["a"])(Object(M["a"])({},o),{},{nodoOwner:{id:e.id,nombre:e.nombre,tipoNodo:e.tipoNodo}})}))))})),o},eventosSubnodos:function(){var o=[];return this.subNodos.forEach((function(e){o.push.apply(o,Object(to["a"])(e.eventos.map((function(o){return Object(M["a"])(Object(M["a"])({},o),{},{nodoOwner:{id:e.id,nombre:e.nombre,tipoNodo:e.tipoNodo}})}))))})),o}}},Cl=Al,yl=(i("f86d"),Object(p["a"])(Cl,Qu,Ju,!1,null,"62695480",null)),El=yl.exports,wl=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"buscadorPersonas"},[n("div",{attrs:{id:"barraSuperior"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.textoBuscar,expression:"textoBuscar"},{name:"show",rawName:"v-show",value:o.mostrandoInput,expression:"mostrandoInput"}],ref:"inputBuscar",attrs:{type:"text",name:"",id:"inputBuscar"},domProps:{value:o.textoBuscar},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.buscar(e)},input:function(e){e.target.composing||(o.textoBuscar=e.target.value)}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:!o.mostrandoInput,expression:"!mostrandoInput"}],staticStyle:{height:"15px"},attrs:{src:i("b11f"),alt:"Lupa"},on:{click:function(e){o.mostrandoInput=!0}}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoInput,expression:"mostrandoInput"}],staticStyle:{height:"15px"},attrs:{src:i("7511"),alt:"Equis"},on:{click:o.cerrarBusqueda}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.buscando,expression:"buscando"}],attrs:{texto:""}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.resultados.length>0,expression:"resultados.length>0"}],attrs:{id:"zonaResultados"}},[o._l(o.resultados,(function(e){return n("div",{key:e.id,staticClass:"personaResultado",on:{click:function(i){return o.$emit("clickEnResultado",e.id)}}},[n("div",{staticClass:"nombreResultado"},[o._v(" "+o._s(e.nombres+" ")+" ")]),n("div",{staticClass:"apellidoResultado"},[o._v(" "+o._s(e.apellidos)+" ")])])})),n("div",{staticClass:"contenedorControles"},[o._t("default")],2)],2)])},xl=[];function Pl(){var o=Object(s["a"])(["\n                    query($textoBuscar:String!){\n                        buscarPersonas(textoBuscar:$textoBuscar){\n                            id\n                            nombres\n                            apellidos\n                            permisos\n                        }\n                    }\n                "]);return Pl=function(){return o},o}var Sl={components:{Loading:mo},name:"BuscadorPersonas",data:function(){return{buscando:!1,mostrandoInput:!1,textoBuscar:null,resultados:[]}},methods:{cerrarBusqueda:function(){this.textoBuscar=null,this.mostrandoInput=!1,this.buscando=!1,this.resultados=[]},clickEnLupa:function(){this.mostrandoInput?this.buscar():this.mostrandoInput=!0},buscar:function(){var o=this,e=this.$refs.inputBuscar.value;e=e.trim(),this.buscando=!0,this.$apollo.query({query:d()(Pl()),variables:{textoBuscar:e}}).then((function(e){var i=e.data.buscarPersonas;o.buscando=!1,o.resultados=i})).catch((function(e){o.buscando=!1,console.log("Error: ".concat(e))}))}}},Dl=Sl,Il=(i("7ffc"),Object(p["a"])(Dl,wl,xl,!1,null,"32461f8c",null)),Rl=Il.exports;function kl(){var o=Object(s["a"])(["\n            query ($idsNodos: [ID!]) {\n              nodosSolidaridadByIds(idsNodos: $idsNodos) {\n                ...fragNodoSolidaridad\n              }\n            }\n            ","\n          "]);return kl=function(){return o},o}function Ml(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!) {\n              crearRecursoExternoNodoSolidaridad(idNodo: $idNodo) {\n                ...fragRecursoExterno\n              }\n            }\n            ","\n          "]);return Ml=function(){return o},o}function jl(){var o=Object(s["a"])(["\n  query ($idParent: ID!) {\n    nodosSolidaridadUnderNodo(idParent: $idParent) {\n      ...fragNodoSolidaridad\n    }\n  }\n  ","\n"]);return jl=function(){return o},o}function $l(){var o=Object(s["a"])(["\n  query ($idNodo: ID!) {\n    nodoSolidaridad(idNodo: $idNodo) {\n      ...fragNodoSolidaridad\n    }\n  }\n  ","\n"]);return $l=function(){return o},o}var Ol={gastos:{campos:["Fecha","Artículo","Unidad","Gasto unitario","Cantidad","Gasto total","Información"]}},ql=d()($l(),xi),Tl=d()(jl(),xi),Bl={name:"HomeNodo",components:{ventanaLista:Ma,Loading:mo,IconoPersonaAutonomo:Dn,RecursoExternoNodo:ut,TablaDato:Vu,TablaAdministracion:El,BuscadorPersonas:Rl},apollo:{esteNodo:{query:ql,variables:function(){return{idNodo:this.$route.params.id}},update:function(o){var e=o.nodoSolidaridad;return e}},subNodos:{query:Tl,variables:function(){return{idParent:this.$route.params.id}},update:function(o){var e=o.nodosSolidaridadUnderNodo;return this.addIdsToNodosEverRendered(e.map((function(o){return o.id}))),e}}},mixins:[Yn,Wn,Xn,ot],data:function(){return{noSeleccionable:!0,configuracionDatos:Ol,esteNodo:{responsables:[],posiblesResponsables:[],responsablesAmplio:[],administradores:[],recursosExternos:[],vinculos:[],movimientosDinero:[],eventos:[]},subNodos:[],mostrandoOpcionesCrearSubNodo:!1,mostrando:"responsables",idDatoSeleccionado:"administracion",datoSeleccionado:null,datoVer:"tabla",enviandoQueryResponsables:!1,creandoSubNodo:!1,idRecursoExternoSeleccionado:null,creandoRecursoExterno:!1,idsNodosEverRendered:[],idsNodosEverPassedToFetchMore:[]}},methods:{crearNuevoRecursoExterno:function(){var o=this;this.creandoRecursoExterno=!0,this.$apollo.mutate({mutation:d()(Ml(),yi),variables:{idNodo:this.esteNodo.id}}).then((function(e){var i=e.data.crearRecursoExternoNodoSolidaridad,n=o.$apollo.provider.defaultClient,t=n.readQuery({query:ql,variables:{idNodo:o.esteNodo.id}}),a=JSON.parse(JSON.stringify(t)),s=a.nodoSolidaridad.recursosExternos,r=s.findIndex((function(o){return o.id===i.id}));-1===r&&(s.push(i),n.writeQuery({query:ql,variables:{idNodo:o.esteNodo.id},data:a})),o.creandoRecursoExterno=!1})).catch((function(e){o.creandoRecursoExterno=!1,console.log("Error: ".concat(e))}))},eliminarRecursoExternoCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:ql,variables:{idNodo:this.esteNodo.id}}),n=JSON.parse(JSON.stringify(i)),t=n.nodoSolidaridad.recursosExternos,a=t.findIndex((function(e){return e.id===o}));a>-1?(console.log("Eliminando de caché"),t.splice(a,1),e.writeQuery({query:ql,variables:{idNodo:this.esteNodo.id},data:n})):console.log("El recurso externo no estaba en caché")},enterNodoToCacheSubnodos:function(o){var e=o.id,i=this.$apollo.provider.defaultClient,n=i.readQuery({query:Tl,variables:{idParent:this.esteNodo.id}}),t=JSON.parse(JSON.stringify(n)),a=t.nodosSolidaridadUnderNodo.findIndex((function(o){return o.id==e}));-1==a?(console.log("Pushing nodo to cache"),t.nodosSolidaridadUnderNodo.push(o),i.writeQuery({query:Tl,variables:{idParent:this.esteNodo.id},data:t})):console.log("El nodo ya estaba presente")},eliminarNodoCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Tl,variables:{idParent:this.esteNodo.id}}),n=JSON.parse(JSON.stringify(i)),t=n.nodosSolidaridadUnderNodo.findIndex((function(e){return e.id==o}));t>-1?(n.nodosSolidaridadUnderNodo.splice(t,1),e.writeQuery({query:Tl,variables:{idParent:this.esteNodo.id},data:n})):console.log("El nodo no estaba presente")},addIdsToNodosEverRendered:function(o){var e=this,i=o.filter((function(o){return!e.idsNodosEverRendered.includes(o)}));this.idsNodosEverRendered=this.idsNodosEverRendered.concat(i)},crearNuevoItemDato:function(){this.idDatoSeleccionado&&this.datoSeleccionado||console.log("Error con dato seleccionado")},enterMovimientoDineroToCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:ql,variables:{idNodo:this.$route.params.id}}),n=JSON.parse(JSON.stringify(i)),t=n.nodoSolidaridad.movimientosDinero.indexOf((function(e){return e.id==o.id}));-1===t?(n.nodoSolidaridad.movimientosDinero.push(o),e.writeQuery({query:ql,variables:{idNodo:this.$route.params.id},data:n})):console.log("El movimientoDinero ya estaba presente")},afterCrearNodoUnder:function(o){this.$refs.ventanaLista.addNodoToNodosSolidaridad(o)},fetchChildrenNodosRendered:hi()((function(){var o=this;console.log("Fetching nodos children ahead of despliegue");var e=this.subNodos.filter((function(e){return o.idsNodosNeedingFetchMore.includes(e.id)})),i=e.reduce((function(o,e){return o.concat(e.vinculos.map((function(o){return o.idRef})))}),[]);this.$apollo.query({query:d()(kl(),xi),variables:{idsNodos:i}}).then((function(e){var i,n=e.data.nodosSolidaridadByIds;o.idsNodosEverPassedToFetchMore=Ul(o.idsNodosEverPassedToFetchMore.concat(o.idsNodosNeedingFetchMore));var t=o.$apollo.provider.defaultClient,a=t.readQuery({query:Tl,variables:{idParent:o.$route.params.id}}),s=JSON.parse(JSON.stringify(a)),r=s.nodosSolidaridadUnderNodo.map((function(o){return o.id}));(i=s.nodosSolidaridadUnderNodo).push.apply(i,Object(to["a"])(n.filter((function(o){return!r.includes(o.id)})))),t.writeQuery({query:Tl,variables:{idParent:o.$route.params.id},data:s})}))}),2e3)},computed:{idsNodosNeedingFetchMore:function(){var o=this;return this.idsNodosEverRendered.filter((function(e){return!o.idsNodosEverPassedToFetchMore.includes(e)}))},indiceNodosUnder:function(){var o=this;if(!this.subNodos||this.subNodos.length<1)return{};var e={};return this.subNodos.forEach((function(i){var n=i.vinculos.filter((function(o){return"requiere"===o.tipo})).map((function(o){return o.idRef})),t=o.subNodos.filter((function(o){return n.includes(o.id)})).sort((function(o,e){return n.indexOf(o.id)-n.indexOf(e.id)})),a=t.filter((function(o){return o.nodoParent===i.id}));e[i.id]={nodosChildren:a,nodosRequeridos:t}})),e}},watch:{mostrando:function(o){"descripcion"!=o&&(this.editandoDescripcion=!1),"keywords"!=o&&(this.editandoKeywords=!1)},idsNodosNeedingFetchMore:function(o){o.length>0&&this.fetchChildrenNodosRendered()}},mounted:function(){this.montado=!0,this.$el.scrollIntoView(!0)}};function Ul(o){for(var e=o.concat(),i=0;i<e.length;++i)for(var n=i+1;n<e.length;++n)e[i]===e[n]&&e.splice(n--,1);return e}var Fl=Bl,_l=(i("e508"),i("c90f"),i("ab85"),Object(p["a"])(Fl,Tu,Bu,!1,null,"12a10a98",null)),Ll=_l.exports,zl=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanaRepasos"},[n("div",{attrs:{id:"barraSuperior"}},[n("div",{attrs:{id:"titulo"}},[o._v("Temas para repasar")]),n("div",{staticClass:"boton",attrs:{id:"botonCerrar",title:"Cerrar"},on:{click:function(e){return o.$router.push({name:"atlas"})}}},[n("img",{attrs:{src:i("7511"),alt:"Equis"}})])]),n("div",{attrs:{id:"zonaTemas"}},[n("div",{attrs:{id:"listaTemas"}},o._l(o.nodosRepasarOrdenados,(function(e){return n("item-repaso",{key:e.id,ref:"itemsRepaso",refInFor:!0,attrs:{esteRepaso:e,mostrarRepasos:o.idRepasoAbierto===e.id},on:{iniciado:o.contarIniciados,toggleAbierto:function(i){return o.toggleRepasoAbierto(e.id)},meElimine:function(i){return o.eliminarRepasoCache(e.id)},centrarEnNodo:function(i){return o.$emit("centrarEnNodo",e.idNodo)}}})})),1)])])},Vl=[],Ql=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"itemRepaso"},[n("div",{style:[o.colorBarraSuperior],attrs:{id:"barraSuperior"}},[n("div",{attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteRepaso.nombreNodo)+" ")]),n("div",{staticClass:"contenedorControles",attrs:{id:"bloqueBotones"}},[n("div",{staticClass:"boton",attrs:{title:"Abrir"},on:{click:function(e){return o.$router.push({name:"visorNodoConocimiento",params:{idNodo:o.esteRepaso.idNodo}})}}},[n("img",{attrs:{src:i("4030"),alt:"Expandir"}})]),n("div",{staticClass:"boton",attrs:{title:"Ver en el atlas"},on:{click:function(e){return o.$emit("centrarEnNodo")}}},[n("img",{attrs:{src:i("aa00"),alt:"Nodos"}})]),n("div",{staticClass:"boton",attrs:{title:"Programar repasos"},on:{click:function(e){return o.$emit("toggleAbierto")}}},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z",fill:o.esteRepaso.porcentajeIntervaloTranscurrido>=100?"var(--atlasConocimientoRepaso)":""}})])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrarRepasos,expression:"mostrarRepasos"}],attrs:{id:"zonaIteraciones"}},[n("div",{attrs:{id:"listaIteraciones"}},[o._l(o.esteRepaso.iteracionesRepaso,(function(e,i){return n("iteracion-repaso",{key:e.id,attrs:{primero:0===i,porcentajeIntervaloTranscurrido:o.esteRepaso.porcentajeIntervaloTranscurrido,urgente:0===i&&Date.now()>new Date(o.esteRepaso.estudiado).getTime()+e.intervalo,estaIteracion:e,idNodo:o.esteRepaso.idNodo},on:{meElimine:function(i){return o.eliminarIteracionCache(e.id)}}})})),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.creandoIteracion,expression:"!creandoIteracion"}],staticClass:"boton",attrs:{title:"Crear nuevo repaso",id:"botonCrearIteracionRepaso"},on:{click:o.crearIteracion}},[n("img",{attrs:{src:i("1376"),alt:"Plus"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoIteracion,expression:"creandoIteracion"}],attrs:{texto:""}})],2)])])},Jl=[],Hl=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"iteracionRepaso",class:{deshabilitado:o.eliminandose}},[n("div",{attrs:{id:"bloqueIntervalo"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoIntervalo,expression:"!editandoIntervalo"}],attrs:{id:"intervalo"},on:{click:o.iniciarEdicionIntervalo}},[o.primero?n("div",{style:[{width:o.porcentajeIntervaloTranscurrido+"%"}],attrs:{id:"porcentajeTranscurrido"}}):o._e(),n("div",{attrs:{id:"textoIntervalo"}},[o._v(" "+o._s(o.intervaloFormateado)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoIntervalo,expression:"editandoIntervalo"}],attrs:{id:"bloqueEdicionIntervalo"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoCantidadIntervalo,expression:"nuevoCantidadIntervalo"}],class:{deshabilitando:o.guardandoNuevoIntervalo},attrs:{id:"inputCantidadIntervalo",max:"dia"===o.nuevoTipoCantidadIntervalo?6:"semana"===o.nuevoTipoCantidadIntervalo?3:12,type:"number"},domProps:{value:o.nuevoCantidadIntervalo},on:{input:function(e){e.target.composing||(o.nuevoCantidadIntervalo=e.target.value)}}}),n("select",{directives:[{name:"model",rawName:"v-model",value:o.nuevoTipoCantidadIntervalo,expression:"nuevoTipoCantidadIntervalo"}],class:{deshabilitando:o.guardandoNuevoIntervalo},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(o){return o.selected})).map((function(o){var e="_value"in o?o._value:o.value;return e}));o.nuevoTipoCantidadIntervalo=e.target.multiple?i:i[0]}}},[n("option",{attrs:{value:"dia"}},[o._v("Dias")]),n("option",{attrs:{value:"semana"}},[o._v("Semanas")]),n("option",{attrs:{value:"mes"}},[o._v("Meses")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.guardandoNuevoIntervalo,expression:"!guardandoNuevoIntervalo"}],staticClass:"boton",attrs:{title:"Guardar"},on:{click:o.guardarNuevoIntervalo}},[n("img",{attrs:{src:i("206e"),alt:"Guardar"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.guardandoNuevoIntervalo,expression:"guardandoNuevoIntervalo"}],attrs:{texto:""}})],1)]),n("div",{style:[o.colorBolita],attrs:{id:"icono"},on:{dblclick:o.eliminarse,contextmenu:function(e){return e.preventDefault(),e.stopPropagation(),o.eliminarse(e)}}},[n("img",{attrs:{src:i("8c7c"),alt:"Estudiante"}})])])},Zl=[];function Gl(){var o=Object(s["a"])(["\n                mutation($idUsuario: ID!, $idNodo:ID!, $idIteracion:ID!, $nuevoIntervalo:Float!){\n                    setIntervaloIteracionRepaso(idUsuario: $idUsuario, idNodo: $idNodo, idIteracion: $idIteracion, nuevoIntervalo: $nuevoIntervalo){\n                        id\n                        intervalo\n                    }\n                }\n            "]);return Gl=function(){return o},o}function Kl(){var o=Object(s["a"])(["\n            mutation ($idUsuario: ID!, $idNodo: ID!, $idIteracion: ID!) {\n              eliminarIteracionRepaso(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n                idIteracion: $idIteracion\n              )\n            }\n          "]);return Kl=function(){return o},o}var Yl={components:{Loading:mo},props:{estaIteracion:Object,idNodo:String,urgente:Boolean,porcentajeIntervaloTranscurrido:Number,primero:Boolean},name:"IteracionRepaso",data:function(){return{eliminandose:!1,editandoIntervalo:!1,nuevoTipoCantidadIntervalo:"dia",nuevoCantidadIntervalo:1,guardandoNuevoIntervalo:!1}},computed:{intervaloFormateado:function(){var o=6048e5,e=864e5,i=2592e6,n=0,t=this.tipoCantidadIntervalo;"dia"===this.tipoCantidadIntervalo?(n=this.estaIteracion.intervalo/e,t="día"):"semana"===this.tipoCantidadIntervalo?(n=this.estaIteracion.intervalo/o,t="sem"):"mes"===this.tipoCantidadIntervalo&&(n=this.estaIteracion.intervalo/i);var a=n+" "+t;return n>1&&"mes"!=t&&(a+="s"),a},tipoCantidadIntervalo:function(){var o="dia";return this.estaIteracion.intervalo>5184e5&&(o="semana",this.estaIteracion.intervalo>18144e5&&(o="mes")),o},colorBolita:function(){var o="whitesmoke";return this.urgente&&(o="var(--atlasConocimientoRepaso)"),{backgroundColor:o}}},methods:{iniciarEdicionIntervalo:function(){this.nuevoTipoCantidadIntervalo=this.tipoCantidadIntervalo,this.nuevoCantidadIntervalo=1,this.editandoIntervalo=!0},eliminarse:function(){var o=this;this.eliminandose=!0,this.$apollo.mutate({mutation:d()(Kl()),variables:{idUsuario:this.usuario.id,idNodo:this.idNodo,idIteracion:this.estaIteracion.id}}).then((function(){o.eliminandose=!1,o.$emit("meElimine")})).catch((function(e){o.eliminandose=!1,console.log("Error: ".concat(e))}))},guardarNuevoIntervalo:function(){var o=this;if(!(this.nuevoCantidadIntervalo<1)){var e=6048e5,i=864e5,n=2592e6,t=0;if("dia"===this.nuevoTipoCantidadIntervalo){if(this.nuevoCantidadIntervalo>6)return;t=i*this.nuevoCantidadIntervalo}else if("semana"===this.nuevoTipoCantidadIntervalo){if(this.nuevoCantidadIntervalo>3)return;t=e*this.nuevoCantidadIntervalo}else if("mes"===this.nuevoTipoCantidadIntervalo){if(this.nuevoCantidadIntervalo>12)return;t=n*this.nuevoCantidadIntervalo}0!==t&&t!==this.estaIteracion.intervalo&&(this.guardandoNuevoIntervalo=!0,this.$apollo.mutate({mutation:d()(Gl()),variables:{idUsuario:this.usuario.id,idNodo:this.idNodo,idIteracion:this.estaIteracion.id,nuevoIntervalo:t}}).then((function(){o.guardandoNuevoIntervalo=!1,o.editandoIntervalo=!1})).catch((function(e){console.log("Error: ".concat(e)),o.guardandoNuevoIntervalo=!1})))}}}},Wl=Yl,Xl=(i("7e89"),Object(p["a"])(Wl,Hl,Zl,!1,null,"7a96eaba",null)),ov=Xl.exports;function ev(){var o=Object(s["a"])(["\n            mutation ($idUsuario: ID!, $idNodo: ID!, $intervalo: Int) {\n              crearIteracionRepasoNodoConocimientoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n                intervalo: $intervalo\n              ) {\n                id\n                iteracionesRepaso {\n                  id\n                  intervalo\n                }\n              }\n            }\n          "]);return ev=function(){return o},o}var iv={components:{IteracionRepaso:ov,Loading:mo},name:"ItemRepaso",props:{esteRepaso:Object,mostrarRepasos:Boolean},data:function(){return{creandoIteracion:!1}},methods:{crearIteracion:function(){var o=this,e=null;this.creandoIteracion=!0,this.$apollo.mutate({mutation:d()(ev()),variables:{idUsuario:this.usuario.id,idNodo:this.esteRepaso.idNodo,intervalo:e}}).then((function(){o.creandoIteracion=!1})).catch((function(e){o.creandoIteracion=!1,console.log("Error: ".concat(e))}))},eliminarIteracionCache:function(o){var e=this,i=this.$apollo.provider.defaultClient,n=i.readQuery({query:Ie}),t=JSON.parse(JSON.stringify(n)),a=t.yo.atlas.datosNodos.find((function(o){return o.id===e.esteRepaso.id})),s=a.iteracionesRepaso.findIndex((function(e){return e.id===o}));s>-1?(a.iteracionesRepaso.splice(s,1),i.writeQuery({query:Ie,data:t})):console.log("La iteración no estaba en caché")}},computed:{colorBarraSuperior:function(){var o="transparent";return this.mostrarRepasos&&(o="var(--mainColor)"),{backgroundColor:o}}},mounted:function(){this.$emit("iniciado")}},nv=iv,tv=(i("f063"),Object(p["a"])(nv,Ql,Jl,!1,null,"a0d04bfc",null)),av=tv.exports,sv={components:{ItemRepaso:av},name:"VentanaRepasos",props:{yo:Object,datosNodosRepasar:Array,datosNodosUrgentes:Array},data:function(){return{idRepasoAbierto:null,iniciados:0,scrollIndex:null}},methods:{eliminarRepasoCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Ie}),n=JSON.parse(JSON.stringify(i)),t=n.yo.atlas.repasos.findIndex((function(e){return e.id===o}));t>-1?(n.yo.atlas.repasos.splice(t,1),e.writeQuery({query:Ie,data:n})):console.log("El repaso no estaba en caché")},toggleRepasoAbierto:function(o){o===this.idRepasoAbierto?this.idRepasoAbierto=null:this.idRepasoAbierto=o},contarIniciados:function(){var o=this;if(this.iniciados++,console.log("Iniciados: ".concat(this.iniciados)),this.iniciados===this.datosNodosRepasar.length&&(console.log("Todos completos"),this.$route.params.idRepaso)){var e=this.nodosRepasarOrdenados.findIndex((function(e){return e.id===o.$route.params.idRepaso}));e>-1&&(this.scrollIndex=e)}}},computed:{nodosRepasarOrdenados:function(){var o=this.datosNodosRepasar.map((function(o){var e=new Date(o.estudiado).getTime()+o.iteracionesRepaso[0].intervalo-Date.now(),i=Math.round(100*e/o.iteracionesRepaso[0].intervalo),n=100-i;return n>100&&(n=100),Object(M["a"])(Object(M["a"])({},o),{},{tiempoRestanteToRepaso:e,porcentajeIntervaloRestante:i,porcentajeIntervaloTranscurrido:n})}));return o.sort((function(o,e){return o.tiempoRestanteToRepaso-e.tiempoRestanteToRepaso})),o}},mounted:function(){var o=this;console.log("Montada con id repaso: ".concat(this.$route.params.idRepaso)),this.idRepasoAbierto=this.$route.params.idRepaso,this.scrollIndex&&setTimeout((function(){console.log("Scrolling into view el item ".concat(o.scrollIndex)),o.$refs.itemsRepaso[o.scrollIndex].$el.scrollIntoView()}),500)}},rv=sv,dv=(i("14fd"),Object(p["a"])(rv,zl,Vl,!1,null,"122da990",null)),cv=dv.exports,uv=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"forosGenerales"},[i("br"),i("div",{attrs:{id:"anuncioBienvenida"}},[i("center",[i("h3",[o._v(" ¡Bienvenides a los foros generales! ")])]),o._v(" En esta sección podemos crear conversaciones de temas generales y compartir opiniones entre todos. ")],1),i("br"),i("foro",{attrs:{idForo:"6091672b943ffd1da10e832a",parent:o.parent}})],1)},lv=[],vv={components:{Foro:Zr},name:"ForosGenerales",data:function(){return{parent:{tipo:"forosGenerales",nombre:"offTopic",id:"89a7fbe0-acf8-11eb-8529-0242ac130003"}}}},mv=vv,pv=(i("5622"),Object(p["a"])(mv,uv,lv,!1,null,"b2a21e52",null)),hv=pv.exports,fv=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"atlasSolidaridad",on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||e.target!==e.currentTarget?null:(e.stopPropagation(),void(o.panningVista=!0))},mouseenter:function(e){o.hovered=!0},mouseleave:function(e){o.hovered=!1},contextmenu:function(e){return e.target!==e.currentTarget||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.preventDefault(),o.abrirMenuContextual(e))},mousemove:o.panVista,mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.clickFondoAtlas(e)},touchmove:function(e){return e.preventDefault(),e.stopPropagation(),o.movimientoMobile(e)},touchstart:o.iniciaMovimientoTouch,touchend:o.finTouch}},[o.usuarioSuperadministrador&&"juanMamian"==o.usuario.username?n("div",{class:{deshabilitado:o.callingPosiciones},style:[{backgroundColor:o.callingPosiciones?"green":"transparent"}],attrs:{id:"botonCallingPosiciones"},on:{click:function(e){return e.stopPropagation(),o.iniciarCallingPosiciones(e)}}}):o._e(),n("transition",{attrs:{name:"fadeOut"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.showingZoomInfo,expression:"showingZoomInfo"}],attrs:{id:"infoZoom"}},[o._v("x"+o._s(o.factorZoom))])]),o.usuario&&o.usuario.id?n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuContextual,expression:"mostrandoMenuContextual"}],class:{deshabilitado:o.enviandoQueryNodos},style:[o.offsetMenuContextual],attrs:{id:"menuContextual"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador,expression:"usuarioSuperadministrador"}],staticClass:"botonMenuContextual",attrs:{id:"botonCrearObjetivo"},on:{mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},click:function(e){return e.stopPropagation(),o.crearNodoEnMenuContextual("objetivo")}}},[o._v(" Crear objetivo ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador,expression:"usuarioSuperadministrador"}],staticClass:"botonMenuContextual",attrs:{id:"botonCrearObjetivo"},on:{click:function(e){return e.stopPropagation(),o.crearNodoEnMenuContextual("trabajo")},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()}}},[o._v(" Crear trabajo ")])]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador&&o.callingPosiciones,expression:"usuarioSuperadministrador && callingPosiciones"}],attrs:{id:"centroVista"}},[o._v(" "+o._s(o.centroVista.x+", "+o.centroVista.y)+" ")]),n("div",{style:[o.posContenedores],attrs:{id:"contenedorVinculosNodos"}},o._l(o.nodosConRequerimentos,(function(e){return n("enlaces-nodo",{key:e.id,attrs:{yo:o.yo,idNodoSeleccionado:o.idNodoSeleccionado,esteNodo:e,todosNodos:o.todosNodos,factorZoom:o.factorZoom,nodoSeleccionado:o.nodoSeleccionado,redibujarEnlaces:o.redibujarEnlacesNodos,idsTodosNodosRender:o.idsTodosNodosRender,callingPosiciones:o.callingPosiciones,transicionarPosicionNodos:o.transicionarPosicionNodos}})})),1),n("div",{style:[o.posContenedores],attrs:{id:"contenedorNodos"}},[o._l(o.personasRender,(function(e){return n("nodo-persona",{key:e.id,attrs:{esNodoYo:o.nodoYo.id===e.id,esteNodo:e,idNodoSeleccionado:o.idNodoSeleccionado,idsNodosNeedingFetchMore:o.idsNodosNeedingFetchMore,nodoSeleccionado:o.nodoSeleccionado,nodosUnder:o.indiceNodosUnder[e.id],requeridoPorSeleccionado:o.idsNodosRequeridosSeleccionado.includes(e.id),requiereAlSeleccionado:o.idsNodosRequierenSeleccionado.includes(e.id),idsNodosDesplegados:o.idsNodosDesplegados,menuCx:o.idNodoMenuCx&&o.idNodoMenuCx===e.id,factorZoom:o.factorZoom,callingPosiciones:o.callingPosiciones,transparentoso:o.idNodoSeleccionado&&o.idNodoSeleccionado!=e.id&&!o.nodoSeleccionado.responsables.includes(e.id)&&!o.idsNodosRequierenSeleccionado.includes(e.id)&&o.nodoSeleccionado&&o.nodoSeleccionado.nodoParent!=e.id,todosNodos:o.todosNodos,todasPersonas:o.personas,transicionarPosicionNodos:o.transicionarPosicionNodos},on:{nodoSolidaridadCreado:function(e){return o.addNodoToNodosSolidaridad(e)}},nativeOn:{mouseup:function(o){o.stopPropagation()},click:function(i){o.idNodoSeleccionado=e.id},contextmenu:function(i){if(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)return null;i.stopPropagation(),i.preventDefault(),o.idNodoMenuCx=e.id}}})})),o.indiceNodosUnder?n("transition-group",{attrs:{name:"fade",tag:"div"}},o._l(o.nodosSolidaridadRender,(function(e){return n("nodo",{key:e.id,attrs:{esteNodo:e,nodoYo:o.nodoYo,idNodoSeleccionado:o.idNodoSeleccionado,idsNodosNeedingFetchMore:o.idsNodosNeedingFetchMore,nodoParent:o.todosNodos.find((function(o){return o.id===e.nodoParent})),nodoSeleccionado:o.nodoSeleccionado,nodosUnder:o.indiceNodosUnder[e.id],requeridoPorSeleccionado:o.idsNodosRequeridosSeleccionado.includes(e.id),seleccionadoEsResponsable:e.responsables.includes(o.idNodoSeleccionado),requiereAlSeleccionado:o.idsNodosRequierenSeleccionado.includes(e.id),enVentanita:o.idNodoPaVentanita===e.id,idsNodosDesplegados:o.idsNodosDesplegados,menuCx:o.idNodoMenuCx&&o.idNodoMenuCx==e.id,factorZoom:o.factorZoom,callingPosiciones:o.callingPosiciones,usuarioAdministradorNodoSeleccionado:o.usuarioAdministradorNodoSeleccionado,usuarioResponsableNodoSeleccionado:o.usuarioResponsableNodoSeleccionado,usuarioResponsableAmplioNodoSeleccionado:o.usuarioResponsableAmplioNodoSeleccionado,transparentoso:o.idNodoSeleccionado&&o.idNodoSeleccionado!=e.id&&!o.idsNodosRequeridosSeleccionado.includes(e.id)&&!o.idsNodosRequierenSeleccionado.includes(e.id)&&!e.responsables.includes(o.idNodoSeleccionado)&&o.nodoSeleccionado&&o.nodoSeleccionado.nodoParent!=e.id,childSeleccionado:o.idsNodosChildrenSeleccionado.includes(e.id),todosNodos:o.todosNodos,transicionarPosicionNodos:o.transicionarPosicionNodos},on:{meMovi:function(e){o.redibujarEnlacesNodos++},meAbrieron:function(i){return o.setNodoEnVentanita(e.id)},meElimine:function(i){return o.eliminarNodoCache(e.id)},nodoSolidaridadCreado:function(e){return o.addNodoToNodosSolidaridad(e)}},nativeOn:{mouseup:function(o){o.stopPropagation()},click:function(i){o.idNodoSeleccionado=e.id},contextmenu:function(i){if(i.ctrlKey||i.shiftKey||i.altKey||i.metaKey)return null;i.stopPropagation(),i.preventDefault(),o.idNodoMenuCx=e.id}}})})),1):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"juanMamian"==o.usuario.username,expression:"usuario.username == 'juanMamian'"}],style:[{left:o.centroDescarga.x*o.factorZoom+"px",top:o.centroDescarga.y*o.factorZoom+"px",width:20*o.factorZoom+"px",height:20*o.factorZoom+"px"}],attrs:{id:"indicadorCentroDescarga"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:"juanMamian"==o.usuario.username,expression:"usuario.username == 'juanMamian'"}],style:[{left:o.centroVista.x*o.factorZoom+"px",top:o.centroVista.y*o.factorZoom+"px",width:20*o.factorZoom+"px",height:20*o.factorZoom+"px"}],attrs:{id:"indicadorCentroVista"}})],2),o.idNodoPaVentanita&&o.nodoEnVentanita&&!o.callingPosiciones?n("router-view",{key:o.nodoEnVentanita.id,attrs:{esteNodo:o.nodoEnVentanita},on:{cerrarme:function(e){return o.cerrarNodoEnVentanita()}}}):o._e(),n("transition",{attrs:{name:"fadeOutLento"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.showingNombreNodoEmergente,expression:"showingNombreNodoEmergente"}],attrs:{id:"nombreNodoEmergente"}},[o._v(" "+o._s(o.nodoSeleccionado?o.nodoSeleccionado.nombre:"")+" ")])]),n("div",{attrs:{id:"panelConfiguracion"},on:{mouseup:function(o){o.stopPropagation()}}},[n("div",{staticClass:"boton botonPanelConfiguracion",class:{activo:o.mostrandoPersonas},attrs:{title:o.mostrandoPersonas?"Ocultar personas":"Mostrar personas"},on:{click:function(e){e.stopPropagation(),o.mostrandoPersonas=!o.mostrandoPersonas}}},[n("img",{attrs:{src:i("767e"),alt:"Usuarios"}})])]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.nodoRoot.loading,expression:"        \n      $apollo.queries.nodoRoot.loading        \n    "}],attrs:{id:"loadingNodos",texto:"Descargando información...",colorLetra:"white"}})],1)},gv=[],bv=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodo",class:{seleccionado:o.seleccionado,deshabilitado:o.enviandoQueryGeneral},style:[o.estiloPosicion,o.estiloZeta,o.estiloSize,o.estiloTransicion],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.agarrado=!o.callingPosiciones)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.agarrado,expression:"agarrado"}],attrs:{id:"zonaArrastre"}}),n("div",{class:{transparentoso:o.transparentoso},style:[o.estiloBolita],attrs:{id:"bolita"}},["trabajo"===o.esteNodo.tipoNodo?n("svg",{staticClass:"svg-inline--fa fa-cog fa-w-16 iconoFondo",attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"cog",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:o.colorIcono,d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}})]):n("svg",{staticClass:"svg-inline--fa fa-star fa-w-18 iconoFondo",class:{transparentoso:o.transparentoso},attrs:{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"star",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"}},[n("path",{attrs:{fill:o.colorIcono,d:"M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.esteNodo.vinculos&&o.esteNodo.vinculos.length>0||o.esteNodo.responsables.length>0,expression:"\n      (esteNodo.vinculos && esteNodo.vinculos.length > 0) ||\n      esteNodo.responsables.length > 0\n    "}],class:{deshabilitado:o.waitingFetchChildren},style:{borderColor:o.waitingFetchChildren||o.transparentoso?"transparent":o.desplegado?"var(--atlasNaranja)":"gray"},attrs:{id:"iconoPlegado"},on:{click:function(e){return e.stopPropagation(),o.toggleDesplegar(e)}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.desplegado&&!o.waitingFetchChildren,expression:"!desplegado && !waitingFetchChildren"}],class:{transparentoso:o.transparentoso},staticStyle:{filter:"var(--atlasFilterGris)"},attrs:{src:i("dc76"),alt:"Plegado",title:"Desplegar"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.desplegado&&!o.waitingFetchChildren,expression:"desplegado && !waitingFetchChildren"}],class:{transparentoso:o.transparentoso},staticStyle:{filter:"var(--atlasFilterGris)"},attrs:{src:i("3f4b"),alt:"Desplegado",title:"Plegar"}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.waitingFetchChildren,expression:"waitingFetchChildren"}],attrs:{texto:""}})],1),n("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado&&!o.enVentanita,expression:"seleccionado && !enVentanita"}],staticClass:"bAbrirNodo",attrs:{src:i("666f"),alt:"abrir",title:"Ampliar información"},on:{click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:(e.stopPropagation(),o.$emit("meAbrieron"))},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()},mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void e.stopPropagation()}}}),n("div",{class:{transparentoso:o.transparentoso,completa:o.seleccionado||o.requeridoPorSeleccionado||o.requiereAlSeleccionado},style:[o.estiloCartelNombre,o.colorCartelNombre],attrs:{id:"cartelNombre"}},[n("div",{attrs:{id:"nombre",draggable:"false"}},[o._v(" "+o._s(o.callingPosiciones?o.esteNodo.fuerzaColision.fuerza.toFixed(2)+"-"+o.esteNodo.fuerzaColision.direccion.toFixed(2):o.esteNodo.nombre)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx&&o.usuarioLogeado,expression:"menuCx && usuarioLogeado"}],attrs:{id:"menuContextual"},on:{mouseup:function(o){o.stopPropagation()},mousedown:function(o){o.stopPropagation()}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioLogeado,expression:"usuarioLogeado"}],staticClass:"tituloSeccionMenuCx"},[o._v("Yo...")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioLogeado,expression:"usuarioLogeado"}],staticClass:"botonesSeccionMenuCx"},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioLogeado&&o.nodoYo&&!o.nodoYo.vinculos.map((function(o){return o.idRef})).includes(o.esteNodo.id),expression:"\n          usuarioLogeado &&\n          nodoYo &&\n          !nodoYo.vinculos.map((v) => v.idRef).includes(esteNodo.id)\n        "}],staticClass:"botonMenuCx",class:{deshabilitado:o.enviandoEditVinculos},on:{click:function(e){return e.stopPropagation(),o.crearRequerimento(o.usuario.id,"usuario",o.esteNodo.id)}}},[o._v(" Requiero este nodo ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioLogeado&&o.nodoYo&&o.nodoYo.vinculos.map((function(o){return o.idRef})).includes(o.esteNodo.id),expression:"\n          usuarioLogeado &&\n          nodoYo &&\n          nodoYo.vinculos.map((v) => v.idRef).includes(esteNodo.id)\n        "}],staticClass:"botonMenuCx",class:{deshabilitado:o.enviandoEditVinculos},on:{click:function(e){return e.stopPropagation(),o.eliminarRequerimento(o.usuario.id,"usuario",o.esteNodo.id)}}},[o._v(" No requiero este nodo ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioLogeado&&o.requeridoPorSeleccionado&&!o.childSeleccionado&&(o.usuarioSuperadministrador||o.esteNodo.administradores.length<1),expression:"\n          usuarioLogeado &&\n          requeridoPorSeleccionado &&\n          !childSeleccionado &&\n          (usuarioSuperadministrador || esteNodo.administradores.length < 1)\n        "}],staticClass:"botonMenuCx",class:{deshabilitado:o.enviandoEditVinculos},on:{click:function(e){return e.stopPropagation(),o.crearParenting(o.usuario.id,"usuario",o.esteNodo.id)}}},[o._v(" Me adueño de este nodo ")])]),null!=o.idNodoSeleccionado&&o.idNodoSeleccionado!=o.esteNodo.id&&o.idNodoSeleccionado!=o.usuario.id?[n("div",{staticClass:"tituloSeccionMenuCx"},[o._v("El nodo seleccionado...")]),n("div",{staticClass:"botonesSeccionMenuCx"},[n("div",{directives:[{name:"show",rawName:"v-show",value:o.requeridoPorSeleccionado&&(o.usuarioResponsableAmplioNodoSeleccionado||o.usuarioSuperadministrador),expression:"\n            requeridoPorSeleccionado &&\n            (usuarioResponsableAmplioNodoSeleccionado ||\n              usuarioSuperadministrador)\n          "}],staticClass:"botonMenuCx",class:{deshabilitado:o.enviandoEditVinculos},on:{click:function(e){e.stopPropagation(),o.eliminarRequerimento(o.idNodoSeleccionado,o.nodoSeleccionado.__typename.charAt(0).toLowerCase()+o.nodoSeleccionado.__typename.slice(1),o.esteNodo.id)}}},[o._v(" Ya no requiere este nodo ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:(o.usuarioResponsableAmplioNodoSeleccionado||o.usuarioSuperadministrador)&&!o.requeridoPorSeleccionado&&!o.requiereAlSeleccionado,expression:"\n            (usuarioResponsableAmplioNodoSeleccionado ||\n              usuarioSuperadministrador) &&\n            !requeridoPorSeleccionado &&\n            !requiereAlSeleccionado\n          "}],staticClass:"botonMenuCx",class:{deshabilitado:o.enviandoEditVinculos},on:{click:function(e){e.stopPropagation(),o.crearRequerimento(o.idNodoSeleccionado,o.nodoSeleccionado.__typename.charAt(0).toLowerCase()+o.nodoSeleccionado.__typename.slice(1),o.esteNodo.id)}}},[o._v(" Requiere este elemento ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioSuperadministrador&&o.requeridoPorSeleccionado&&!o.childSeleccionado&&o.idNodoSeleccionado!=o.usuario.id,expression:"\n            usuarioSuperadministrador &&\n            requeridoPorSeleccionado &&\n            !childSeleccionado &&\n            idNodoSeleccionado != usuario.id\n          "}],staticClass:"botonMenuCx",class:{deshabilitado:o.enviandoEditVinculos},on:{click:function(e){e.stopPropagation(),o.crearParenting(o.idNodoSeleccionado,o.nodoSeleccionado.__typename.charAt(0).toLowerCase()+o.nodoSeleccionado.__typename.slice(1),o.esteNodo.id)}}},[o._v(" Se adueña de este elemento ")])])]:o._e(),o.usuarioResponsableAmplio?[n("div",{staticClass:"tituloSeccionMenuCx"},[o._v("Crear nuevo...")]),n("div",{staticClass:"botonesSeccionMenuCx"},[n("div",{staticClass:"botonMenuCx",class:{deshabilitado:o.creandoSubNodo},on:{click:function(e){return e.stopPropagation(),o.crearNuevoNodoUnder({tipoNodo:"trabajo"})}}},[o._v(" Trabajo ")]),"trabajo"!=o.esteNodo.tipoNodo?n("div",{staticClass:"botonMenuCx",class:{deshabilitado:o.creandoSubNodo},on:{click:function(e){return e.stopPropagation(),o.crearNuevoNodoUnder({tipoNodo:"objetivo"})}}},[o._v(" Objetivo ")]):o._e()])]:o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:(o.usuarioSuperadministrador||o.usuarioAdministrador)&&(!o.idNodoSeleccionado||o.seleccionado),expression:"\n        (usuarioSuperadministrador || usuarioAdministrador) &&\n        (!idNodoSeleccionado || seleccionado)\n      "}],staticClass:"botonMenuCx",class:{deshabilitado:!o.usuarioAdministrador&&!o.usuarioSuperadministrador},on:{click:function(e){return e.stopPropagation(),o.eliminarse(e)}}},[o._v(" Eliminar ")])],2)])},Nv=[];function Av(){var o=Object(s["a"])(["\n            mutation ($idNodo: ID!, $nuevaPosicion: CoordsInput) {\n              setPosicionNodoSolidaridad(\n                idNodo: $idNodo\n                nuevaPosicion: $nuevaPosicion\n              ) {\n                id\n                coords {\n                  x\n                  y\n                }\n              }\n            }\n          "]);return Av=function(){return o},o}var Cv={components:{Loading:mo},props:{nodoYo:Object},name:"nodo",mixins:[Xn,Wn,Kn,ot,et],data:function(){return{agarrado:!1,arrastrandoNodo:0,umbralArrastreNodo:10,montado:!1}},methods:{arrastrarNodo:function(o){if(this.agarrado&&(!1!==this.usuarioAdministrador||!1!==this.usuarioSuperadministrador)&&(this.arrastrandoNodo=this.arrastrandoNodo+Math.abs(o.movementX)+Math.abs(o.movementY),!(this.arrastrandoNodo<this.umbralArrastreNodo))){var e=document.getElementById("contenedorNodos"),i=e.getBoundingClientRect(),n=Math.round((o.clientY-i.top)/this.factorZoom),t=Math.round((o.clientX-i.left)/this.factorZoom),a=25,s=15;t-=t%a,n-=n%s,this.$set(this.posicion,"x",t),this.$set(this.posicion,"y",n)}},guardarPosicion:function(){var o=this;this.arrastrandoNodo<this.umbralArrastreNodo?this.agarrado=!1:this.usuarioAdministrador||this.usuarioSuperadministrador?(this.arrastrandoNodo=0,this.agarrado=!1,this.$apollo.mutate({mutation:d()(Av()),variables:{idNodo:this.esteNodo.id,nuevaPosicion:this.posicion}}).then((function(){console.log("Posición guardada"),o.$emit("meMovi")})).catch((function(o){console.log("Error. E: ".concat(o))}))):this.agarrado=!1}}},yv=Cv,Ev=(i("2379"),Object(p["a"])(yv,bv,Nv,!1,null,"e57f94e8",null)),wv=Ev.exports,xv=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:o.nodoRender,expression:"nodoRender"}],staticClass:"enlacesNodo",style:[o.estiloPosicion]},[i("transition-group",{attrs:{tag:"div"}},o._l(o.vinculosGrises,(function(e){return i("div",{key:e.id,staticClass:"vinculo vinculoGris",style:[e.estilo,o.altoVinculos]},[i("div",{staticClass:"flechaVinculo",style:[o.sizeFlecha]})])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:o.callingPosiciones,expression:"callingPosiciones"}],staticClass:"fuerza",style:[o.estiloFuerzaColision,{opacity:o.nodoSeleccionado?1:.3}],attrs:{id:"fuerzaColision"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:o.callingPosiciones,expression:"callingPosiciones"}],staticClass:"fuerza",style:[o.estiloFuerzaCentroMasa,{opacity:o.nodoSeleccionado?1:.3}],attrs:{id:"fuerzaCentroMasa"}})],1)},Pv=[],Sv={name:"EnlacesNodo",props:{yo:Object,idNodoSeleccionado:String,esteNodo:Object,todosNodos:Array,factorZoom:Number,callingPosiciones:Boolean,nodoSeleccionado:Object,childSeleccionado:Boolean,idsTodosNodosRender:Array,transicionarPosicionNodos:Boolean,redibujarEnlaces:{type:Number,default:0}},data:function(){return{esquinasSeleccionado:{x1:0,x2:0,y1:0,y2:0},posicionSeleccionado:{x:0,y:0},factorFuerza:15}},computed:{parentDeSeleccionado:function(){return!!this.nodoSeleccionado&&this.nodoSeleccionado.nodoParent===this.esteNodo.id},estiloPosicion:function(){return{left:this.esteNodo.coords.x*this.factorZoom+"px",top:this.esteNodo.coords.y*this.factorZoom+"px"}},vinculosGrises:function(){var o=this,e=JSON.parse(JSON.stringify(this.esteNodo.vinculos.concat(this.esteNodo.responsables.map((function(e){return{id:o.esteNodo.id+e,idRef:e}}))).filter((function(e){return o.idsTodosNodosRender.includes(e.idRef)}))));return e.forEach((function(e){var i=o.todosNodos.find((function(o){return o.id===e.idRef})).coords,n={x:i.x-o.posNodo.x,y:i.y-o.posNodo.y},t=Math.PI+Math.atan2(n.y,n.x),a=Math.hypot(n.x,n.y),s=o.idNodoSeleccionado===e.idRef;e.estilo={transform:"rotate("+t+"rad)",top:Math.round((n.y-1)*o.factorZoom)+"px",left:Math.round(n.x*o.factorZoom)+"px",width:Math.round(a*o.factorZoom)+"px",backgroundColor:o.seleccionado?"#ef7229":s&&(o.parentDeSeleccionado||o.esteNodo.responsables.includes(o.idNodoSeleccionado))?"var(--atlasParent)":"black",opacity:o.seleccionado||s&&(o.parentDeSeleccionado||o.esteNodo.responsables.includes(o.idNodoSeleccionado))?1:o.nodoSeleccionado?.05:.3,borderLeftColor:o.seleccionado?"#ef7229":s&&(o.parentDeSeleccionado||o.esteNodo.responsables.includes(o.idNodoSeleccionado))?"var(--atlasParent)":"black"}})),e},estiloFuerzaColision:function(){return{transform:"rotate("+this.esteNodo.fuerzaColision.direccion+"rad)",top:"0px",left:"0px",width:Math.ceil(this.esteNodo.fuerzaColision.fuerza*this.factorFuerza*this.factorZoom)+"px"}},estiloFuerzaCentroMasa:function(){return{transform:"rotate("+this.esteNodo.fuerzaCentroMasa.direccion+"rad)",top:"0px",left:"0px",width:Math.round(this.esteNodo.fuerzaCentroMasa.fuerza*this.factorFuerza*this.factorZoom)+"px"}},altoVinculos:function(){return{height:Math.ceil(1*this.factorZoom)+"px"}},sizeFlecha:function(){return{borderWidth:Math.round(7*this.factorZoom)+"px"}},posNodo:function(){return this.esteNodo.coords},seleccionado:function(){return!!this.nodoSeleccionado&&this.nodoSeleccionado.id===this.esteNodo.id},desplegado:function(){return!!(this.usuario&&this.usuario.id&&this.yo&&this.yo.atlasSolidaridad&&this.yo.atlasSolidaridad.idsNodosDesplegados)&&this.yo.atlasSolidaridad.idsNodosDesplegados.includes(this.esteNodo.id)},nodoRender:function(){return!(!this.usuario||this.esteNodo.id!==this.usuario.id)||this.idsTodosNodosRender.includes(this.esteNodo.id)}}},Dv=Sv,Iv=(i("da64"),Object(p["a"])(Dv,xv,Pv,!1,null,"05d6656a",null)),Rv=Iv.exports,kv=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"nodoPersona nodo",class:{seleccionado:o.seleccionado,deshabilitado:o.enviandoQueryGeneral},style:[o.estiloPosicion,o.estiloZeta,o.estiloSize]},[n("div",{class:{transparentoso:o.transparentoso},style:[o.estiloBolita],attrs:{id:"bolita"}},[n("img",{directives:[{name:"show",rawName:"v-show",value:o.fotografiaEnabled,expression:"fotografiaEnabled"}],staticClass:"iconoFondo",attrs:{id:"fotografia",src:this.serverUrl+"/api/usuarios/fotografias/"+o.esteNodo.id,alt:"Usuario"},on:{load:function(e){o.fotografiaEnabled=!0}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.esteNodo.vinculos&&o.esteNodo.vinculos.length>0,expression:"esteNodo.vinculos && esteNodo.vinculos.length > 0"}],class:{deshabilitado:o.waitingFetchChildren},style:{borderColor:o.waitingFetchChildren||o.transparentoso?"transparent":o.desplegado?"var(--atlasNaranja)":"gray"},attrs:{id:"iconoPlegado"},on:{click:function(e){return e.stopPropagation(),o.toggleDesplegar(e)}}},[n("img",{directives:[{name:"show",rawName:"v-show",value:!o.desplegado&&!o.waitingFetchChildren,expression:"!desplegado && !waitingFetchChildren"}],class:{transparentoso:o.transparentoso},staticStyle:{filter:"var(--atlasFilterGris)"},attrs:{src:i("dc76"),alt:"Plegado",title:"Desplegar"}}),n("img",{directives:[{name:"show",rawName:"v-show",value:o.desplegado&&!o.waitingFetchChildren,expression:"desplegado && !waitingFetchChildren"}],class:{transparentoso:o.transparentoso},staticStyle:{filter:"var(--atlasFilterGris)"},attrs:{src:i("3f4b"),alt:"Desplegado",title:"Plegar"}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.waitingFetchChildren,expression:"waitingFetchChildren"}],attrs:{texto:""}})],1),n("div",{class:{transparentoso:o.transparentoso,completa:o.seleccionado||o.requeridoPorSeleccionado||o.requiereAlSeleccionado},style:[o.estiloCartelNombre,o.colorCartelNombre],attrs:{id:"cartelNombre"}},[n("div",{attrs:{id:"nombre",draggable:"false"}},[o._v(" "+o._s(o.callingPosiciones?o.esteNodo.fuerzaColision.fuerza.toFixed(2)+"-"+o.esteNodo.fuerzaColision.direccion.toFixed(2):o.esteNodo.nombre)+" ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"},on:{mouseup:function(o){o.stopPropagation()},mousedown:function(o){o.stopPropagation()}}},[o.usuarioResponsableAmplio?[n("div",{staticClass:"tituloSeccionMenuCx"},[o._v("Crear nuevo...")]),n("div",{staticClass:"botonesSeccionMenuCx"},[n("div",{staticClass:"botonMenuCx",class:{deshabilitado:o.creandoSubNodo},on:{click:function(e){return e.stopPropagation(),o.crearNuevoNodoUnder({tipoNodo:"trabajo"})}}},[o._v(" Trabajo ")]),"trabajo"!=o.esteNodo.tipoNodo?n("div",{staticClass:"botonMenuCx",class:{deshabilitado:o.creandoSubNodo},on:{click:function(e){return e.stopPropagation(),o.crearNuevoNodoUnder({tipoNodo:"objetivo"})}}},[o._v(" Objetivo ")]):o._e()])]:o._e()],2)])},Mv=[],jv={components:{Loading:mo},props:{esteNodo:Object,esNodoYo:Boolean},name:"NodoPersona",mixins:[et,Wn,Xn],data:function(){return{montado:!0,fotografiaEnabled:!1,enviandoQueryGeneral:!1,size:{x:50,y:50}}},computed:{colorCartelNombre:function(){var o="var(--atlasGris)",e="1px solid black";return this.esNodoYo&&(o="rgb(180 117 148)",e="1px solid var(--atlasMorado)"),this.seleccionado&&(e="1px solid var(--atlasNaranja)",o="var(--atlasNaranja)"),{backgroundColor:o,border:e}},nodoPersonaResponsableSeleccionado:function(){return this.nodoSeleccionado.responsables.includes(this.esteNodo.id)}},methods:{},mounted:function(){this.montado=!0}},$v=jv,Ov=(i("c70d"),i("5507"),Object(p["a"])($v,kv,Mv,!1,null,"0364d76c",null)),qv=Ov.exports;function Tv(){var o=Object(s["a"])(["\n            query ($idsNodos: [ID!]) {\n              nodosSolidaridadByIds(idsNodos: $idsNodos) {\n                id\n                coords {\n                  x\n                  y\n                }\n              }\n            }\n          "]);return Tv=function(){return o},o}function Bv(){var o=Object(s["a"])(["\n            mutation ($idsNodos: [ID!]) {\n              setNodosSolidaridadDesplegadosUsuario(idsNodos: $idsNodos)\n            }\n          "]);return Bv=function(){return o},o}function Uv(){var o=Object(s["a"])(["\n            mutation ($infoNodo: NodoSolidaridadInput!) {\n              crearNodoSolidaridad(infoNodo: $infoNodo) {\n                ...fragNodoSolidaridad\n              }\n            }\n            ","\n          "]);return Uv=function(){return o},o}function Fv(){var o=Object(s["a"])(["\n            mutation ($coords: CoordsInput!) {\n              setCoordsVistaAtlasSolidaridadUsuario(coords: $coords)\n            }\n          "]);return Fv=function(){return o},o}function _v(){var o=Object(s["a"])(["\n            query ($ciclos: Int!) {\n              posicionarNodosSolidaridadByFuerzas(ciclos: $ciclos)\n            }\n          "]);return _v=function(){return o},o}function Lv(){var o=Object(s["a"])(["\n          subscription ($idAtlas: ID!) {\n            nodosAtlasPosicionados(idAtlas: $idAtlas)\n          }\n        "]);return Lv=function(){return o},o}function zv(){var o=Object(s["a"])(["\n  query {\n    nodosSolidaridadByIds {\n      ...fragNodoSolidaridad\n    }\n  }\n  ","\n"]);return zv=function(){return o},o}function Vv(){var o=Object(s["a"])(["\n  query ($idsUsuarios: [ID!]) {\n    usuariosByIds(idsUsuarios: $idsUsuarios) {\n      ...fragPersonaAtlas\n    }\n  }\n  ","\n"]);return Vv=function(){return o},o}d()(Vv(),Ci);var Qv=d()(zv(),xi),Jv={components:{Loading:mo,Nodo:wv,EnlacesNodo:Rv,NodoPersona:qv},name:"AtlasSolidaridad",apollo:{yo:{query:Gn,update:function(o){var e=o.yo;return this.calcularEsquinaVista(e.coords),this.datosYoDescargados=!0,e},skip:function(){return!this.usuarioLogeado||!this.montado},fetchPolicy:"network-only"},$subscribe:{nodosAtlasPosicionados:{query:d()(Lv()),variables:{idAtlas:"61b3fe0280509360825b2634"},result:function(){console.log("Nodos del atlas han sido posicionados. Refetching coords"),this.refetchCoordsNodos()}}}},mixins:[Oi],data:function(){return{tipoNodoRoot:"usuario",montado:!1,personas:[],descargasPersonas:0,nodosRenderRoot:[],nodosSolidaridadRender:[],personasRenderRoot:[],personasRender:[],mostrandoMenuContextual:!1,posMenuContextual:{top:0,left:0},esquinaVistaDecimal:{x:0,y:0},centroDescarga:{x:0,y:0},radioDescarga:null,sizeAtlas:{x:0,y:0,diagonal:0},panningVista:!1,vistaPanned:!1,hovered:!1,idNodoSeleccionado:null,idNodoMenuCx:null,idNodoCentradoArbol:null,zoom:80,minZoom:20,maxZoom:120,showingZoomInfo:!1,infoPosZoom:null,pinching:!1,lastPinchDistance:0,enviandoQueryNodos:!1,refetchingCoords:!1,transicionarPosicionNodos:!0,callingPosiciones:!1,redibujarEnlacesNodos:0,enviandoCoordsVistaUsuario:!1,esquinaVistaCalculada:!1,mostrandoPersonas:!1,showingNombreNodoEmergente:!1,vista:"atlas"}},methods:{setNodosRender:function(){var o=this;if(!this.indiceNodosUnder||this.indiceNodosUnder.length<1)return[];console.log("Setting nodos render");var e={nodosSolidaridad:this.nodosSolidaridadRoot,personas:this.personasRoot},i=this.nodosSolidaridadRoot,n=this.personasRoot,t=i.map((function(o){return o.id})),a=n.map((function(o){return o.id})),s=0;do{if(s++,s>1e3){console.log("OVERFLOW");break}var r=e.nodosSolidaridad.concat(e.personas).filter((function(e){return o.idsNodosDesplegados.includes(e.id)})).reduce((function(e,i){var n=o.indiceNodosUnder[i.id].nodosRequeridos;return e.concat(n.filter((function(o){return!e.map((function(o){return o.id})).includes(o.id)})))}),[]),d=r.filter((function(o){return!t.includes(o.id)})),c=[],u=[];this.mostrandoPersonas&&(c=e.nodosSolidaridad.filter((function(e){return o.idsNodosDesplegados.includes(e.id)})).reduce((function(e,i){var n=o.indiceNodosUnder[i.id].responsables;return e.concat(n.filter((function(o){return!e.map((function(o){return o.id})).includes(o.id)})))}),[]),u=c.filter((function(o){return!a.includes(o.id)}))),i=i.concat(d),n=n.concat(u),e.nodosSolidaridad=d,e.personas=u,t=i.map((function(o){return o.id})),a=n.map((function(o){return o.id}))}while(e.nodosSolidaridad.length+e.personas.length>0);this.nodosSolidaridadRender=i,this.personasRender=n},setNodoEnVentanita:function(o){console.log("Setting path to ".concat(o)),this.$router.push({name:"nodoEnVentanita",params:{idNv:o}})},cerrarNodoEnVentanita:function(){console.log("Cerrando nodo en ventanita"),this.$router.push({name:"atlasSolidaridad"})},iniciarCallingPosiciones:function(){var o=this,e=prompt("¿Cuantos ciclos?");isNaN(e)||(e=Math.round(e),e<1||(console.log("Enviando reposicionamiento de ".concat(e," ciclos")),this.callingPosiciones=!0,this.$apollo.query({query:d()(_v()),variables:{ciclos:e}}).then((function(){o.callingPosiciones=!1})).catch((function(e){o.callingPosiciones=!1,console.log("Error: ".concat(e))}))))},calcularEsquinaVista:function(o){console.log("Centrando en usuario"),this.esquinaVistaCalculada||(this.$set(this.esquinaVistaDecimal,"x",Math.round(o.x-this.sizeAtlas.x/(2*this.factorZoom))),this.$set(this.esquinaVistaDecimal,"y",Math.round(o.y-this.sizeAtlas.y/(2*this.factorZoom))),this.esquinaVistaCalculada=!0)},abrirMenuContextual:function(o){var e=this.$el.getBoundingClientRect(),i=Math.round(o.pageY-e.top),n=Math.round(o.pageX-e.left);this.$set(this.posMenuContextual,"y",i),this.$set(this.posMenuContextual,"x",n),this.mostrandoMenuContextual=!0},uploadVistaActual:hi()((function(){var o=this;this.enviandoCoordsVistaUsuario=!0,console.log("Uploading vista de usuario"),this.$apollo.mutate({mutation:d()(Fv()),variables:{coords:{x:Math.round(this.esquinaVistaDecimal.x+this.sizeAtlas.x/(2*this.factorZoom)),y:Math.round(this.esquinaVistaDecimal.y+this.sizeAtlas.y/(2*this.factorZoom))}}}).then((function(){o.enviandoCoordsVistaUsuario=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoCoordsVistaUsuario=!1}))}),3e3),desplazarVista:function(o,e){this.$set(this.esquinaVistaDecimal,"x",this.esquinaVistaDecimal.x-o),this.$set(this.esquinaVistaDecimal,"y",this.esquinaVistaDecimal.y-e),this.uploadVistaActual()},panVista:function(o){this.panningVista&&(this.desplazarVista(o.movementX/this.factorZoom,o.movementY/this.factorZoom),o.preventDefault(),this.vistaPanned=!0)},clickFondoAtlas:function(){this.vistaPanned||(this.idNodoPaVentanita||(this.idNodoSeleccionado=null),"nodoEnVentanita"===this.$route.name&&this.cerrarNodoEnVentanita(),this.idNodoMenuCx=null,"atlasConLista"===this.$route.name&&this.$router.push({name:"atlasSolidaridad"})),this.mostrandoMenuContextual=!1,this.panningVista=!1,this.vistaPanned=!1},movimientoMobile:function(o){if(this.pinching){var e=this.$el,i=e.getBoundingClientRect(),n={x:(o.touches[0].pageX-i.left+(o.touches[1].pageX-i.left))/2,y:(o.touches[0].pageY-i.top+(o.touches[1].pageY-i.top))/2},t={x:Math.round(n.x/this.factorZoom+this.esquinaVistaDecimal.x),y:Math.round(n.y/this.factorZoom+this.esquinaVistaDecimal.y)},a=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY),s=a-this.lastPinchDistance;return s*=.3,this.zoomVista(s,t),void(this.lastPinchDistance=a)}var r=Math.round((o.changedTouches[0].clientX-this.ultimoTouchX)/this.factorZoom),d=Math.round((o.changedTouches[0].clientY-this.ultimoTouchY)/this.factorZoom);this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY,this.desplazarVista(r,d)},iniciaMovimientoTouch:function(o){if(2===o.touches.length){var e=Math.hypot(o.touches[0].pageX-o.touches[1].pageX,o.touches[0].pageY-o.touches[1].pageY);return this.lastPinchDistance=e,void(this.pinching=!0)}this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY},finTouch:function(){this.pinching=!1},zoomVista:function(o,e){var i=this.zoom,n=Math.round(this.zoom+o);n<this.minZoom?this.zoom=this.minZoom:n>this.maxZoom?this.zoom=this.maxZoom:this.zoom=n;var t={x:e.x-this.esquinaVistaDecimal.x,y:e.y-this.esquinaVistaDecimal.y},a=i/this.zoom;this.$set(this.esquinaVistaDecimal,"x",e.x-a*t.x),this.$set(this.esquinaVistaDecimal,"y",e.y-a*t.y)},zoomWheel:function(o){if(this.hovered&&o.ctrlKey){o.preventDefault();var e=document.getElementById("contenedorNodos"),i=e.getBoundingClientRect(),n={x:Math.round((o.clientX-i.left)/this.factorZoom),y:Math.round((o.clientY-i.top)/this.factorZoom)},t=.2;this.zoomVista(-Math.round(o.deltaY*t),n)}},eliminarNodoCache:function(o){console.log("Eliminando nodo de caché");var e=this.nodosSolidaridad.find((function(e){return e.id===o}));e>-1?this.nodosSolidaridad.splice(e,1):console.log("Nodo no estaba en lista")},crearNodoEnMenuContextual:function(o){var e=document.getElementById("contenedorNodos").getBoundingClientRect(),i={x:parseInt((parseInt(this.posMenuContextual.x)-e.left)/this.factorZoom),y:parseInt((parseInt(this.posMenuContextual.y)-e.top)/this.factorZoom)};console.log("Creando nuevo nodo en ".concat(JSON.stringify(i))),this.crearNodo(i,o)},crearNodo:function(o,e){var i=this;if(this.usuario&&this.usuario.id){console.log("enviando una mutación de crear nodo"),this.enviandoQueryNodos=!0;var n={coords:{x:o.x,y:o.y},tipoNodo:e};console.log("en las coordenadas: ".concat(o.x,", ").concat(o.y)),this.$apollo.mutate({mutation:d()(Uv(),xi),variables:{infoNodo:n}}).then((function(o){var e=o.data.crearNodoSolidaridad;console.log("Creado ".concat(e.id));var n=i.$apollo.provider.defaultClient,t=n.readQuery({query:Qv,variables:{centro:{x:i.centroDescarga.x,y:i.centroDescarga.y},radio:i.radioDescarga}}),a=JSON.parse(JSON.stringify(t)),s=a.nodosSolidaridadById,r=s.findIndex((function(o){return o.id===e.id}));r>-1?console.log("El nodo ya estaba en caché"):(s.push(e),n.writeQuery({query:Qv,variables:{centro:{x:i.centroDescarga.x,y:i.centroDescarga.y},radio:i.radioDescarga},data:a})),i.setNodoEnVentanita(e.id),i.enviandoQueryNodos=!1,i.mostrandoMenuContextual=!1})).catch((function(o){i.enviandoQueryNodos=!1,console.log("Error. E: ".concat(o))}))}else console.log("Error usuario no logeado")},centrarEnNodo:function(o){var e=this.$el,i=e.getBoundingClientRect();this.$set(this.esquinaVistaDecimal,"x",o.coords.x-i.width/(2*this.factorZoom)),this.$set(this.esquinaVistaDecimal,"y",o.coords.y-i.height/(2*this.factorZoom)),this.idNodoSeleccionado=o.id},centrarEnNodoById:function(o){var e=this.$el,i=e.getBoundingClientRect(),n=this.todosNodos.find((function(e){return e.id===o}));this.$set(this.esquinaVistaDecimal,"x",n.coords.x-i.width/(2*this.factorZoom)),this.$set(this.esquinaVistaDecimal,"y",n.coords.y-i.height/(2*this.factorZoom)),this.idNodoSeleccionado=o},uploadNodosDesplegados:hi()((function(){this.$apollo.mutate({mutation:d()(Bv()),variables:{idsNodos:this.idsNodosDesplegados}}).then((function(){})).catch((function(o){console.log("Error: E:".concat(o))}))}),5e3),refetchCoordsNodos:hi()((function(){var o=this;console.log("Iniciando refetch de coords"),this.refetchingCoords=!0,this.$apollo.query({query:d()(Tv()),variables:{idsNodos:this.todosNodos.map((function(o){return o.id}))}}).then((function(){console.log("Coords refetched"),o.refetchingCoords=!1})).catch((function(e){console.log("Error: ".concat(e)),o.refetchingCoords=!1}))}),2e3),hideNombreNodoEmergente:hi()((function(){this.showingNombreNodoEmergente=!1}),4e3),hideZoomInfo:hi()((function(){this.showingZoomInfo=!1}),1e3)},computed:{personasRoot:function(){return"Usuario"===this.nodoRoot.__typename?[this.nodoRoot]:[]},nodosSolidaridadRoot:function(){return"NodoSolidaridad"===this.nodoRoot.__typename?[this.nodoRoot]:[]},nodoYo:function(){var o=this;return this.usuarioLogeado?this.personas.find((function(e){return e.id===o.usuario.id})):null},idNodoRoot:function(){return this.usuario?this.usuario.id:null},idNodoPaVentanita:function(){return this.$route.params.idNv},refreshNodoVentanita:function(){return this.$store.state.refreshNodoVentanitaAtlasSolidaridad},offsetMenuContextual:function(){return{top:this.posMenuContextual.y+"px",left:this.posMenuContextual.x+"px"}},factorZoom:function(){return Number((this.zoom/100).toFixed(2))},esquinaVista:function(){return{x:Math.round(this.esquinaVistaDecimal.x),y:Math.round(this.esquinaVistaDecimal.y)}},centroVista:function(){return{x:this.esquinaVista.x+this.sizeAtlas.x/this.factorZoom/2,y:this.esquinaVista.y+this.sizeAtlas.y/this.factorZoom/2}},posContenedores:function(){return{left:-this.esquinaVista.x*this.factorZoom+"px",top:-this.esquinaVista.y*this.factorZoom+"px"}},posCuadroDescarga:function(){var o=this.centroDescarga.x-this.radioDescarga-this.esquinaVista.x,e=this.centroDescarga.y-this.radioDescarga-this.esquinaVista.y;return{left:o*this.factorZoom+"px",top:e*this.factorZoom+"px"}},nodoEnVentanita:function(){var o=this;return this.idNodoPaVentanita?this.nodosSolidaridad.find((function(e){return e.id==o.idNodoPaVentanita})):null},nodoSeleccionado:function(){var o=this;return this.todosNodos.find((function(e){return e.id===o.idNodoSeleccionado}))},usuarioAdministradorNodoSeleccionado:function(){return!(!this.usuario||!this.usuario.id)&&(!!this.nodoSeleccionado&&this.nodoSeleccionado.administradores.includes(this.usuario.id))},usuarioResponsableNodoSeleccionado:function(){return!(!this.usuario||!this.usuario.id)&&(!!this.nodoSeleccionado&&this.nodoSeleccionado.responsables.includes(this.usuario.id))},usuarioResponsableAmplioNodoSeleccionado:function(){return!!(this.usuarioLogeado&&this.usuario&&this.usuario.id)&&(!!this.nodoSeleccionado&&(this.nodoSeleccionado.responsablesAmplio&&this.nodoSeleccionado.responsablesAmplio.includes(this.usuario.id)))},nodosRequierenSeleccionado:function(){var o=this;return this.idNodoSeleccionado?this.todosNodos.filter((function(e){return e.vinculos.filter((function(o){return"requiere"==o.tipo})).map((function(o){return o.idRef})).includes(o.idNodoSeleccionado)})):[]},nodosRequeridosSeleccionado:function(){var o=this;return this.todosNodos.filter((function(e){return o.idsNodosRequeridosSeleccionado.includes(e.id)}))},idsNodosChildrenSeleccionado:function(){return this.nodoSeleccionado&&this.indiceNodosUnder?this.indiceNodosUnder[this.idNodoSeleccionado].nodosChildren.map((function(o){return o.id})):[]},idsNodosRequierenSeleccionado:function(){return this.nodosRequierenSeleccionado.map((function(o){return o.id}))},idsNodosRequeridosSeleccionado:function(){return this.nodoSeleccionado?this.nodoSeleccionado.vinculos.filter((function(o){return"requiere"==o.tipo})).map((function(o){return o.idRef})):[]},idsNodosDesplegados:function(){return this.yo&&this.yo.atlasSolidaridad&&this.yo.atlasSolidaridad.idsNodosDesplegados?this.yo.atlasSolidaridad.idsNodosDesplegados:[]},trabajos:function(){return this.nodosSolidaridad.filter((function(o){return"trabajo"===o.tipoNodo}))},objetivos:function(){return this.nodosSolidaridad.filter((function(o){return"objetivo"===o.tipoNodo}))},nodosConRequerimentos:function(){var o=this.todosNodos.filter((function(o){return o.vinculos.filter((function(o){return"requiere"===o.tipo})).length>0||"NodoSolidaridad"===o.__typename&&o.responsables.length>0}));return o},idsNodosSolidaridadRender:function(){return this.nodosSolidaridadRender.map((function(o){return o.id}))},idsPersonasRender:function(){return this.personasRender.map((function(o){return o.id}))},idsTodosNodosRender:function(){return this.idsNodosSolidaridadRender.concat(this.idsPersonasRender)}},watch:{centroVista:function(o){var e=Math.hypot(this.centroDescarga.x-o.x,this.centroDescarga.y-o.y);this.radioDescarga-e<this.sizeAtlas.diagonal/this.factorZoom/2&&(this.radioDescarga=Math.ceil(2*Math.max(this.sizeAtlas.x,this.sizeAtlas.y)/this.factorZoom),this.$set(this.centroDescarga,"x",Math.round(this.centroVista.x)),this.$set(this.centroDescarga,"y",Math.round(this.centroVista.y)))},idNodoSeleccionado:function(o){o?this.zoom<65&&(this.showingNombreNodoEmergente=!0,this.hideNombreNodoEmergente()):this.showingNombreNodoEmergente=!1},zoom:function(){this.transicionarPosicionNodos=!1,this.showingZoomInfo=!0,this.hideZoomInfo()},idsNodosDesplegados:function(){this.usuarioLogeado&&(this.setNodosRender(),this.uploadNodosDesplegados())},personas:function(){this.setNodosRender()},todosNodos:function(){this.setNodosRender()},mostrandoPersonas:function(){this.setNodosRender()},idsTodosNodosRender:function(){var o=this,e=this.idsPersonasRender.filter((function(e){return!o.infoNodosEverRendered.map((function(o){return o.id})).includes(e)})),i=this.idsNodosSolidaridadRender.filter((function(e){return!o.infoNodosEverRendered.map((function(o){return o.id})).includes(e)})),n=e.map((function(o){return{id:o,tipo:"usuario"}})),t=i.map((function(o){return{id:o,tipo:"nodoSolidaridad"}}));this.infoNodosEverRendered=this.infoNodosEverRendered.concat(n).concat(t)}},mounted:function(){var o=this.$el.getBoundingClientRect();this.$set(this.sizeAtlas,"x",o.width),this.$set(this.sizeAtlas,"y",o.height),this.$set(this.sizeAtlas,"diagonal",Math.hypot(this.sizeAtlas.x,this.sizeAtlas.y)),this.radioDescarga=Math.ceil(2*Math.max(this.sizeAtlas.x,this.sizeAtlas.y)/this.factorZoom),this.montado=!0,this.$el.scrollIntoView({behavior:"smooth"})},created:function(){window.addEventListener("wheel",this.zoomWheel,{passive:!1})},removed:function(){window.removeEventListener("wheel",this.zoomWheel)}},Hv=Jv,Zv=(i("c7fd"),i("28f6"),Object(p["a"])(Hv,fv,gv,!1,null,"67c6de9e",null)),Gv=Zv.exports,Kv=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"espacios"},[n("router-view",{attrs:{id:"visorVentanaEventoPublico"},on:{meRepetiPeriodicamente:o.manejarCreacionEventos,eventoCambioFecha:function(e){return o.manejarCreacionEventos([e])}}}),n("div",{staticClass:"barraSeccion",on:{click:function(e){o.mostrandoEspacios=!o.mostrandoEspacios}}},[n("img",{staticStyle:{height:"20px"},style:[{transform:o.mostrandoEspacios?"none":"rotate(-90deg)"}],attrs:{src:i("33ae"),alt:"Abrir"}}),o._v(" Espacios "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoEspacios,expression:"mostrandoEspacios"}],staticClass:"contenedorControles",staticStyle:{"margin-left":"auto"},on:{click:function(o){o.stopPropagation()}}},[n("div",{staticClass:"boton",on:{click:function(e){o.mostrandoConfiguracion=!o.mostrandoConfiguracion}}},[n("img",{attrs:{src:i("fbca"),alt:"Config"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoEspacios&&!o.creandoEspacio,expression:"mostrandoEspacios && !creandoEspacio"}],staticClass:"boton",on:{click:function(e){return e.stopPropagation(),o.crearNuevoEspacio(e)}}},[n("img",{attrs:{src:i("1376"),alt:"Crear"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoEspacio,expression:"creandoEspacio"}],attrs:{texto:""}})],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoConfiguracion&&o.mostrandoEspacios,expression:"mostrandoConfiguracion && mostrandoEspacios"}],staticClass:"zonaConfiguracion"},[n("div",{staticClass:"barraSeccion"},[o._v(" Configuración ")]),n("div",{staticClass:"contenedorBloquesConfiguracion"},[n("div",{staticClass:"bloqueConfiguracion"},[n("div",{staticClass:"campoConfiguracion"},[o._v(" Mostrar: "),n("label",{attrs:{for:"checkMostrarTodosEspacios"}},[o._v("Mis espacios")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.tipoMostrarEspacios,expression:"tipoMostrarEspacios"}],ref:"checkMostrarTodosEspacios",attrs:{type:"radio",name:"checkMostrarTodosEspacios",id:"checkMostrarTodosEspacios",value:"mios"},domProps:{checked:o._q(o.tipoMostrarEspacios,"mios")},on:{change:function(e){o.tipoMostrarEspacios="mios"}}}),n("label",{attrs:{for:"checkMostrarTodosEspacios"}},[o._v("Todos los espacios")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.tipoMostrarEspacios,expression:"tipoMostrarEspacios"}],ref:"checkMostrarTodosEspacios",attrs:{type:"radio",name:"checkMostrarTodosEspacios",id:"checkMostrarTodosEspacios",value:"todos"},domProps:{checked:o._q(o.tipoMostrarEspacios,"todos")},on:{change:function(e){o.tipoMostrarEspacios="todos"}}})])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoEspacios,expression:"mostrandoEspacios"}],attrs:{id:"listaEspacios"}},[!o.espaciosVisibles||o.espaciosVisibles.length<1?n("div",{staticClass:"anuncioZonaVacia"},[o._v(" Aún no hay espacios ")]):o._e(),o._l(o.espaciosVisibles,(function(e){return n("espacio",{key:e.id,ref:"espacios",refInFor:!0,attrs:{esteEspacio:e},on:{meElimine:function(i){return o.eliminarEspacioCache(e.id)}}})}))],2),n("div",{staticClass:"barraSeccion",on:{click:function(e){o.mostrandoOrganizadorSemanal=!o.mostrandoOrganizadorSemanal}}},[n("img",{staticStyle:{height:"20px"},style:[{transform:o.mostrandoOrganizadorSemanal?"none":"rotate(-90deg)"}],attrs:{src:i("33ae"),alt:"Abrir"}}),o._v(" Calendario semanal ")]),n("organizador-horario-semanal",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoOrganizadorSemanal,expression:"mostrandoOrganizadorSemanal"}],ref:"organizadorSemanal",attrs:{yo:o.yo}})],1)},Yv=[],Wv=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"espacio",class:{mostrando:o.mostrando,deshabilitado:o.eliminandose}},[n("div",{staticClass:"barraSuperior"},[n("div",{attrs:{id:"zona1"}},[n("div",{attrs:{id:"zonaNombre"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNuevoNombre inputNombreCosa",class:{deshabilitado:o.enviandoNuevoNombre},staticStyle:{width:"250px"},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},click:function(o){o.stopPropagation()},blur:o.guardarNuevoNombre,keydown:o.keydownInputNuevoNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],class:{deshabilitado:o.enviandoNuevoNombre,administrador:o.administrador},attrs:{id:"elNombre"},on:{click:o.toggleEditandoNombre}},[o._v(" "+o._s(o.esteEspacio.nombre)+" ")])],1)]),n("div",{attrs:{id:"zonaBotones"}},[n("div",{staticClass:"boton botonMostrar selector",class:{activo:"descripcion"===o.mostrando},on:{click:function(e){o.mostrando="descripcion"===o.mostrando?null:"descripcion"}}},[n("img",{attrs:{src:i("f9b3"),alt:"Informacion"}})]),n("div",{staticClass:"boton botonMostrar selector",class:{activo:"administrador"===o.mostrando},on:{click:function(e){o.mostrando="administrador"===o.mostrando?null:"administrador"}}},[n("img",{attrs:{src:i("b78a"),alt:"Administrador"}})]),n("div",{staticClass:"boton botonMostrar selector",class:{activo:"calendario"===o.mostrando},on:{click:function(e){o.mostrando="calendario"===o.mostrando?null:"calendario"}}},[n("img",{attrs:{src:i("4617"),alt:"Calendario"}})]),n("div",{staticClass:"boton botonMostrar selector",class:{activo:"listaEventos"===o.mostrando},on:{click:function(e){o.mostrando="listaEventos"===o.mostrando?null:"listaEventos"}}},[n("img",{attrs:{src:i("e155"),alt:"Lista de eventos"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.administrador||o.usuarioSuperadministrador,expression:"administrador || usuarioSuperadministrador"}],staticClass:"boton",attrs:{id:"botonEliminarse"},on:{click:o.eliminarse}},[n("img",{attrs:{src:i("4592"),alt:"Eliminar"}})])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:"descripcion"===o.mostrando,expression:"mostrando === 'descripcion'"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{class:{deshabilitado:o.settingEstadoParaChiquis},attrs:{id:"zonaParaChiquis"},on:{click:o.toggleEstadoParaChiquis}},[n("img",{staticStyle:{height:"15px"},attrs:{src:i("92d5"),alt:"Chiqui"}}),o._v(" "+o._s(o.esteEspacio.paraChiquis?"Espacio dirigido a niñxs pequeñxs":"Espacio abierto para todos")+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",staticClass:"contenidoTexto",attrs:{id:"descripcion"},on:{click:o.toggleEditandoDescripcion}},[o._v(" "+o._s(o.esteEspacio.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"inputTextoNodo",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarDescripcion"},on:{click:o.guardarNuevoDescripcion}}),n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"administrador"===o.mostrando,expression:"mostrando === 'administrador'"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaAdministrador"}},[n("icono-persona-autonomo",{attrs:{idPersona:o.esteEspacio.idAdministrador}})],1),"calendario"===o.mostrando?n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaCalendario"}},[n("div",{attrs:{id:"contenedorControlesCalendario"}},[o.administrador?n("div",{directives:[{name:"show",rawName:"v-show",value:"calendario"===o.mostrando&&!o.introduciendoEventoPublicoCalendario,expression:"mostrando === 'calendario' && !introduciendoEventoPublicoCalendario"}],staticClass:"boton botonControlCalendario",attrs:{title:"Programar una sesión de "+o.esteEspacio.nombre},on:{click:o.iniciarCreacionEvento}},[n("img",{attrs:{src:i("21eb"),alt:"Calendario"}})]):o._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"calendario"===o.mostrando&&o.introduciendoEventoPublicoCalendario,expression:"mostrando === 'calendario' && introduciendoEventoPublicoCalendario"}],staticClass:"boton botonControlCalendario",attrs:{title:"Cancelar creación de evento"},on:{click:function(e){o.introduciendoEventoPublicoCalendario=!1}}},[n("img",{attrs:{src:i("20dd"),alt:"Cancelar"}})])]),n("calendario",{ref:"calendario",attrs:{idUsuarioTarget:o.usuario.id,idParent:o.esteEspacio.id,enfasis:"eventosPublicos",tipoParent:"espacio"},on:{iniciaCreacionEvento:function(e){o.introduciendoEventoPublicoCalendario=!1}}})],1):o._e(),"listaEventos"===o.mostrando?n("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaListaEventos"}},[n("div",{staticClass:"contenedorControles",attrs:{id:"controlesListaEventos"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.mostrandoCuadroCrearEventoPublico&&(o.administrador||o.usuarioSuperadministrador),expression:"!mostrandoCuadroCrearEventoPublico && (administrador || usuarioSuperadministrador)"}],staticClass:"boton",attrs:{title:"Crear nuevo evento de este espacio"},on:{click:o.iniciarCuadroCrearEventoPublico}},[n("img",{attrs:{src:i("1376"),alt:"Crear evento"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoCuadroCrearEventoPublico,expression:"mostrandoCuadroCrearEventoPublico"}],staticClass:"boton",attrs:{title:"Cancelar"},on:{click:function(e){o.mostrandoCuadroCrearEventoPublico=!1}}},[n("img",{attrs:{src:i("20dd"),alt:"Cancelar"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.creandoEventoPublico,expression:"creandoEventoPublico"}],attrs:{texto:""}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoCuadroCrearEventoPublico,expression:"mostrandoCuadroCrearEventoPublico"}],class:{deshabilitado:o.enviandoNuevoEventoPublico},attrs:{id:"cuadroCrearEventoPublico"}},[n("div",{staticClass:"bloqueCampoNuevoEventoPublico"},[n("div",{staticClass:"nombreCampo"},[o._v("Nombre")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.nombreNuevoEventoPublico,expression:"nombreNuevoEventoPublico"}],ref:"inputNombreNuevoEventoPublico",staticClass:"inputCampo",attrs:{type:"text",name:"",id:"inputNombreNuevoEventoPublico"},domProps:{value:o.nombreNuevoEventoPublico},on:{input:function(e){e.target.composing||(o.nombreNuevoEventoPublico=e.target.value)}}})]),n("div",{staticClass:"bloqueCampoNuevoEventoPublico"},[n("div",{staticClass:"nombreCampo"},[o._v("Inicio")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.dateInicioNuevoEventoPublico,expression:"dateInicioNuevoEventoPublico"}],staticClass:"inputCampo",attrs:{type:"date"},domProps:{value:o.dateInicioNuevoEventoPublico},on:{input:function(e){e.target.composing||(o.dateInicioNuevoEventoPublico=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:o.horarioInicioNuevoEventoPublico,expression:"horarioInicioNuevoEventoPublico"}],staticClass:"inputCampo",attrs:{type:"time"},domProps:{value:o.horarioInicioNuevoEventoPublico},on:{input:function(e){e.target.composing||(o.horarioInicioNuevoEventoPublico=e.target.value)}}})]),n("div",{staticClass:"bloqueCampoNuevoEventoPublico"},[n("div",{staticClass:"nombreCampo"},[o._v("Duración")]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.duracionNuevoEventoPublico,expression:"duracionNuevoEventoPublico"}],ref:"inputDuracionNuevoEventoPublico",staticClass:"inputCampo",attrs:{type:"number"},domProps:{value:o.duracionNuevoEventoPublico},on:{input:function(e){e.target.composing||(o.duracionNuevoEventoPublico=e.target.value)}}}),o._v(" Minutos ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.creandoEventoPublico,expression:"!creandoEventoPublico"}],staticClass:"boton",class:{deshabilitado:!o.duracionNuevoEventoPublico||o.duracionNuevoEventoPublico<5},staticStyle:{margin:"10px auto"},attrs:{id:"botonCrearEventoPublico",title:"Crear evento"},on:{click:o.crearEventoPublico}},[n("img",{attrs:{src:i("21eb"),alt:"CrearEvento"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoEventoPublico,expression:"enviandoNuevoEventoPublico"}],staticStyle:{margin:"10px auto"},attrs:{texto:""}})],1),n("lista-eventos-espacio",{ref:"listaEventosEspacio",attrs:{idEspacio:this.esteEspacio.id}})],1):o._e()])},Xv=[],om=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"listaEventosEspacio"},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.eventosPublicosEspacio.loading,expression:"$apollo.queries.eventosPublicosEspacio.loading"}],attrs:{texto:""}}),o._l(o.eventosPublicosEspacioOrdenados,(function(e){return i("evento-item-lista",{key:e.id,attrs:{esteEvento:e,seleccionado:o.idEventoSeleccionado===e.id},on:{meElimine:function(i){return o.deleteEventoCache(e)}}})}))],2)},em=[],im=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"eventoItemLista",class:{deshabilitado:o.eliminandose}},[n("div",{attrs:{id:"barraSuperior"}},[n("div",{staticStyle:{display:"flex"},attrs:{id:"zonaInfoHorario"}},[n("div",{staticClass:"infoHorario",attrs:{id:"horarioInicio"}},[o._v(" "+o._s(o.dateInicioLegible+", "+o.duracionLegible)+" ")])]),n("div",{attrs:{id:"zonaBotones"}},[n("div",{staticClass:"boton botonControlEvento",attrs:{title:"Expandir este evento"},on:{click:function(e){return e.stopPropagation(),o.$router.push(o.$route.path+"/ventanaEventoPublico/"+o.esteEvento.id)}}},[n("img",{attrs:{src:i("4030"),alt:"Expandir"}})]),n("div",{staticClass:"boton botonMostrar",on:{click:function(e){o.mostrando="descripcion"===o.mostrando?null:"descripcion"}}},[n("img",{attrs:{src:i("c4d7"),alt:"Informacion"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.administrador||o.usuarioSuperadministrador,expression:"administrador || usuarioSuperadministrador"}],staticClass:"boton",staticStyle:{"margin-left":"min(20px, 3%)"},attrs:{id:"botonEliminarse"},on:{click:o.eliminarse}},[n("img",{attrs:{src:i("4592"),alt:"Eliminar"}})])])]),n("div",{attrs:{id:"barraInfo"}},[n("div",{attrs:{id:"zonaNombre"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNuevoNombre inputNombreCosa",class:{deshabilitado:o.enviandoNuevoNombre},staticStyle:{width:"250px"},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},click:function(o){o.stopPropagation()},blur:function(e){o.editandoNombre=!1},keydown:o.keydownInputNuevoNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],class:{deshabilitado:o.enviandoNuevoNombre,administrador:o.administrador},attrs:{id:"elNombre"},on:{click:o.toggleEditandoNombre}},[o._v(" "+o._s(o.esteEvento.nombre)+" ")])],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:"descripcion"===o.mostrando,expression:"mostrando === 'descripcion'"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",staticClass:"contenidoTexto",attrs:{id:"descripcion"},on:{click:o.toggleEditandoDescripcion}},[o._v(" "+o._s(o.esteEvento.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"inputTextoNodo",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarDescripcion"},on:{click:o.guardarNuevoDescripcion}}),n("img",{staticClass:"botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1)])},nm=[],tm={components:{Loading:mo},name:"EventoItemLista",props:{esteEvento:Object},mixins:[qt,Ut,Ft,Tt],data:function(){return{mostrando:null,eliminandose:!1}}},am=tm,sm=(i("8373"),Object(p["a"])(am,im,nm,!1,null,"4d109f4e",null)),rm=sm.exports;function dm(){var o=Object(s["a"])(["\n  query ($idEspacio: ID!) {\n    eventosPublicosEspacio(idEspacio: $idEspacio) {\n      ...fragEventoPublico\n    }\n  }\n  ","\n"]);return dm=function(){return o},o}var cm=d()(dm(),bt),um={components:{EventoItemLista:rm,Loading:mo},props:{idEspacio:String},name:"ListaEventosEspacio",apollo:{eventosPublicosEspacio:{query:cm,variables:function(){return{idEspacio:this.idEspacio}},fetchPolicy:"cache-and-network"}},data:function(){return{idEventoSeleccionado:null,eventosPublicosEspacio:[]}},methods:{deleteEventoCache:function(o){var e=o.__typename.charAt(0).toLowerCase()+o.__typename.slice(1),i=null;if("eventoPublico"!==e)return"eventoPersonal"===e?void console.log("add cache eventos personales not developed"):void console.log("Tipo evento ".concat(e," no reconocido"));i={query:cm,variables:{idEspacio:this.idEspacio}};var n=this.$apollo.provider.defaultClient,t=n.readQuery(Object(M["a"])({},i)),a=JSON.parse(JSON.stringify(t)),s=null;"eventoPublico"===e?s=a.eventosPublicosEspacio:"eventoPersonal"===e&&(s=a.eventosPersonalesEspacio);var r=s.findIndex((function(e){return e.id===o.id}));r>-1&&(s.splice(r,1),n.writeQuery(Object(M["a"])(Object(M["a"])({},i),{},{data:a})))},addEventoCache:function(o){var e=o.__typename.charAt(0).toLowerCase()+o.__typename.slice(1),i=null;if("eventoPublico"!==e)return"eventoPersonal"===e?void console.log("add cache eventos personales not developed"):void console.log("Tipo evento ".concat(e," no reconocido"));i={query:cm,variables:{idEspacio:this.idEspacio}};var n=this.$apollo.provider.defaultClient,t=n.readQuery(Object(M["a"])({},i)),a=JSON.parse(JSON.stringify(t)),s=null;"eventoPublico"===e?s=a.eventosPublicosEspacio:"eventoPersonal"===e&&(s=a.eventosPersonalesEspacio);var r=s.findIndex((function(e){return e.id===o.id}));-1===r&&(s.push(o),n.writeQuery(Object(M["a"])(Object(M["a"])({},i),{},{data:a})))}},computed:{eventosPublicosEspacioOrdenados:function(){return Object(to["a"])(this.eventosPublicosEspacio).sort((function(o,e){return-new Date(o.horarioInicio).getTime()+new Date(e.horarioInicio).getTime()}))}}},lm=um,vm=(i("a979"),Object(p["a"])(lm,om,em,!1,null,"816eac50",null)),mm=vm.exports;function pm(){var o=Object(s["a"])(["\n            mutation ($infoNuevoEvento: InputCrearEventoPublico) {\n              crearEventoPublico(infoNuevoEvento: $infoNuevoEvento) {\n                ...fragEventoPublico\n              }\n            }\n            ","\n          "]);return pm=function(){return o},o}function hm(){var o=Object(s["a"])(["\n            mutation ($idEspacio: ID!) {\n              eliminarEspacio(idEspacio: $idEspacio)\n            }\n          "]);return hm=function(){return o},o}function fm(){var o=Object(s["a"])(["\n            mutation ($idEspacio: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionEspacio(\n                idEspacio: $idEspacio\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return fm=function(){return o},o}function gm(){var o=Object(s["a"])(["\n            mutation ($idEspacio: ID!, $nuevoNombre: String!) {\n              editarNombreEspacio(\n                idEspacio: $idEspacio\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return gm=function(){return o},o}function bm(){var o=Object(s["a"])(["\n          mutation($idEspacio: ID!, $nuevoEstado:Boolean!){\n            setEspacioParaChiquis(idEspacio: $idEspacio, nuevoEstado: $nuevoEstado){\n               id\n               paraChiquis \n            }\n          }\n          "]);return bm=function(){return o},o}var Nm={components:{Loading:mo,IconoPersonaAutonomo:Dn,Calendario:ba,ListaEventosEspacio:mm},name:"Espacio",props:{esteEspacio:Object},data:function(){return{abierto:!1,mostrando:null,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,mostrandoCuadroCrearEventoPublico:!1,nombreNuevoEventoPublico:"Espacio de "+this.esteEspacio.nombre,dateInicioNuevoEventoPublico:null,dateFinalNuevoEventoPublico:null,horarioInicioNuevoEventoPublico:null,horarioFinalNuevoEventoPublico:null,duracionNuevoEventoPublico:60,creandoEventoPublico:!1,enviandoNuevoEventoPublico:!1,introduciendoEventoPublicoCalendario:!1,settingEstadoParaChiquis:!1,eliminandose:!1}},methods:{toggleEstadoParaChiquis:function(){var o=this;this.usuarioSuperadministrador||this.administrador?(this.settingEstadoParaChiquis=!0,this.$apollo.mutate({mutation:d()(bm()),variables:{idEspacio:this.esteEspacio.id,nuevoEstado:!this.esteEspacio.paraChiquis}}).then((function(){o.settingEstadoParaChiquis=!1})).catch((function(e){console.log("Error: "+e),o.settingEstadoParaChiquis=!1}))):console.log("No autorizado")},guardarNuevoNombre:function(){var o=this;this.nuevoNombre=this.$refs.inputNuevoNombre.value,this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteEspacio.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:d()(gm()),variables:{idEspacio:this.esteEspacio.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteEspacio.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:d()(fm()),variables:{idEspacio:this.esteEspacio.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoDescripcion:function(){var o=this;this.administrador&&(this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteEspacio.descripcion,this.editandoDescripcion&&this.$nextTick((function(){o.$refs.inputNuevoDescripcion.focus()})))},toggleEditandoNombre:function(o){var e=this;this.administrador&&(o.stopPropagation(),this.editandoNombre=!0,this.nuevoNombre=this.esteEspacio.nombre,this.$nextTick((function(){e.$refs.inputNuevoNombre.focus()})))},keydownInputNuevoNombre:function(o){"Escape"===o.key&&(this.editandoNombre=!1)},iniciarCreacionEvento:function(){this.introduciendoEventoPublicoCalendario=!0},eliminarse:function(){var o=this;confirm("¿Confirmar la eliminación de este espacio? (Esta acción no puede deshacerse)")&&(this.administrador||this.usuarioSuperadministrador)&&(this.eliminandose=!0,this.$apollo.mutate({mutation:d()(hm()),variables:{idEspacio:this.esteEspacio.id}}).then((function(){o.$emit("meElimine")})).catch((function(o){console.log("Error: ".concat(o))})))},iniciarCuadroCrearEventoPublico:function(){this.nombreNuevoEventoPublico="Espacio de "+this.esteEspacio.nombre;var o=new Date;o.setHours(8),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o=new Date(o.getTime()+864e5);var e=o.toISOString().split("T")[0],i=new Date(o.getTime()+36e5),n=i.toISOString().split("T")[0];this.dateInicioNuevoEventoPublico=e,this.dateFinalNuevoEventoPublico=n,this.horarioInicioNuevoEventoPublico="08:00",this.horarioFinalNuevoEventoPublico="09:00",this.mostrandoCuadroCrearEventoPublico=!0},crearEventoPublico:function(){var o=this;if(this.administrador||this.usuarioSuperadministrador){console.log("Date saved: ".concat(this.dateInicioNuevoEventoPublico)),this.duracionNuevoEventoPublico=this.$refs.inputDuracionNuevoEventoPublico.value;var e=new Date(this.dateInicioNuevoEventoPublico);console.log("Date parsed: ".concat(e));var i=e.getUTCDate();console.log("Creando evento público el ".concat(i));var n=parseInt(this.horarioInicioNuevoEventoPublico.substring(0,2)),t=parseInt(this.horarioInicioNuevoEventoPublico.substring(3));e.setDate(i),e.setHours(n),e.setMinutes(t);var a=new Date(e.getTime()+6e4*this.duracionNuevoEventoPublico);console.log("Creando evento público el ".concat(i)),this.enviandoNuevoEventoPublico=!0,this.$apollo.mutate({mutation:d()(pm(),bt),variables:{infoNuevoEvento:{nombre:this.$refs.inputNombreNuevoEventoPublico.value,horarioInicio:e,horarioFinal:a,tipoParent:"espacio",idParent:this.esteEspacio.id}}}).then((function(e){var i=e.data.crearEventoPublico;o.enviandoNuevoEventoPublico=!1,o.$refs.listaEventosEspacio.addEventoCache(i),o.mostrandoCuadroCrearEventoPublico=!1})).catch((function(e){console.log("Error: ".concat(e)),o.enviandoNuevoEventoPublico=!1}))}}},computed:{administrador:function(){return!!this.usuarioLogeado&&this.usuario.id===this.esteEspacio.idAdministrador},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!Ct.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!yt.test(this.nuevoDescripcion)}},watch:{mostrando:function(o){"descripcion"!=o&&(this.editandoDescripcion=!1),"descripcion"===o&&(!this.esteEspacio.descripcion||this.esteEspacio.descripcion.length<1)&&(this.editandoDescripcion||this.toggleEditandoDescripcion())},introduciendoEventoPublicoCalendario:function(o){this.$refs.calendario.eventoSiendoCreado=o?{idParent:this.esteEspacio.id,tipoParent:"espacio",tipoEvento:"eventoPublico",idAdministrador:this.usuario.id}:null}}},Am=Nm,Cm=(i("386d"),Object(p["a"])(Am,Wv,Xv,!1,null,"1ffa694c",null)),ym=Cm.exports;function Em(){var o=Object(s["a"])(["\n            mutation ($info: InputCrearEspacio) {\n              crearEspacio(info: $info) {\n                ...fragEspacio\n              }\n            }\n            ","\n          "]);return Em=function(){return o},o}function wm(){var o=Object(s["a"])(["\n  query {\n    todosEspacios {\n      ...fragEspacio\n    }\n  }\n  ","\n"]);return wm=function(){return o},o}var xm=d()(wm(),Za),Pm={components:{Espacio:ym,Loading:mo,OrganizadorHorarioSemanal:Ss},props:{yo:Object},apollo:{todosEspacios:{query:xm}},name:"Espacios",data:function(){return{todosEspacios:[],verTodos:!1,creandoEspacio:!1,mostrandoEspacios:!1,mostrandoOrganizadorSemanal:!1,mostrandoConfiguracion:!1,tipoMostrarEspacios:"mios"}},methods:{crearNuevoEspacio:function(){var o=this;this.creandoEspacio=!0,this.$apollo.mutate({mutation:d()(Em(),Za),variables:{info:{idAdministrador:this.usuario.id}}}).then((function(e){var i=e.data.crearEspacio,n=o.$apollo.provider.defaultClient,t=n.readQuery({query:xm}),a=JSON.parse(JSON.stringify(t)),s=a.todosEspacios.findIndex((function(o){return o.id===i.id}));-1===s?(a.todosEspacios.push(i),n.writeQuery({query:xm,data:a})):console.log("El espacio ya estaba en caché"),o.creandoEspacio=!1})).catch((function(e){console.log("Error: ".concat(e)),o.creandoEspacio=!1}))},eliminarEspacioCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:xm}),n=JSON.parse(JSON.stringify(i)),t=n.todosEspacios.findIndex((function(e){return e.id===o}));t>-1&&(n.todosEspacios.splice(t,1),e.writeQuery({query:xm,data:n}))},manejarCreacionEventos:function(o){console.log("Manejando la repeticion de los eventos de un espacio con id ".concat(o[0].idParent))},handleCambioFechaEvento:function(){console.log("Handling")}},computed:{usuarioProfe:function(){return!!this.usuarioLogeado&&this.usuario.permisos.includes("maestraVida-profesor")},espaciosVisibles:function(){return"todos"===this.tipoMostrarEspacios?this.espaciosUsuario.concat(this.espaciosNoUsuario):this.espaciosUsuario},espaciosUsuario:function(){var o=this;return this.usuarioLogeado?this.todosEspacios.filter((function(e){return e.idAdministrador===o.usuario.id})):[]},espaciosNoUsuario:function(){var o=this;return this.usuarioLogeado?this.todosEspacios.filter((function(e){return e.idAdministrador!=o.usuario.id})):this.todosEspacios}},watch:{mostrandoOrganizadorSemanal:function(o){o&&this.$refs.organizadorSemanal.$apollo.queries.espacios.refetch()}},beforeRouteLeave:function(o,e,i){this.$refs.organizadorSemanal.checkVentanaBloque()?console.log("Había bloque en ventana"):i()}},Sm=Pm,Dm=(i("6823"),Object(p["a"])(Sm,Kv,Yv,!1,null,"52307fb5",null)),Im=Dm.exports,Rm=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanaEventoPublico"},[n("div",{attrs:{id:"zonaCobertura"}},[n("div",{attrs:{id:"laVentana"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.esteEvento.loading,expression:"$apollo.queries.esteEvento.loading"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.$apollo.queries.esteEvento.loading,expression:"!$apollo.queries.esteEvento.loading"}],attrs:{id:"contenido"}},[n("div",{attrs:{id:"barraSuperior"}},[n("div",{staticClass:"boton",staticStyle:{"margin-left":"auto"},attrs:{title:"Cerrar"},on:{click:o.cerrarVentana}},[n("img",{attrs:{src:i("20dd"),alt:"Salir"}})]),o.administrador||o.usuarioSuperadministrador?n("div",{staticClass:"boton",attrs:{title:"Repetir este evento"},on:{click:function(e){o.mostrandoZonaRepetir=!o.mostrandoZonaRepetir}}},[n("img",{attrs:{src:i("4d8f"),alt:"Repetir"}})]):o._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoZonaRepetir,expression:"mostrandoZonaRepetir"}],attrs:{id:"zonaRepetir"}},[n("div",{staticClass:"instruccion",staticStyle:{"margin-bottom":"10px"}},[o._v(" Repetir este evento... ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:o.periodoRepetir,expression:"periodoRepetir"}],attrs:{name:"",id:"selectFrecuenciaRepetir"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(o){return o.selected})).map((function(o){var e="_value"in o?o._value:o.value;return e}));o.periodoRepetir=e.target.multiple?i:i[0]}}},[n("option",{attrs:{value:"diariamente"}},[o._v("Diariamente")]),n("option",{attrs:{value:"semanalmente"}},[o._v("Semanalmente")])]),n("div",{staticStyle:{margin:"10px auto"},attrs:{id:"bloqueCantidadRepetir"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.cantidadRepetir,expression:"cantidadRepetir"}],staticStyle:{width:"50px","margin-right":"20px"},attrs:{type:"number",min:o.minRepetir,max:o.maxRepetir,name:"",id:"inputCantidadRepetir"},domProps:{value:o.cantidadRepetir},on:{input:function(e){e.target.composing||(o.cantidadRepetir=e.target.value)}}}),o._v(" "+o._s(o.cantidadRepetir>1?"veces":"vez")+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoQueryRepetir,expression:"!enviandoQueryRepetir"}],staticClass:"boton",staticStyle:{margin:"10px auto"},attrs:{title:"Aceptar"},on:{click:function(e){return o.repetirEvento(o.cantidadRepetir,o.periodoRepetir)}}},[n("img",{attrs:{src:i("5d24"),alt:"Aceptar"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryRepetir,expression:"enviandoQueryRepetir"}],staticStyle:{margin:"10px auto"},attrs:{texto:""}})],1),n("div",{attrs:{id:"zonaNombre"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNuevoNombre inputNombreCosa",class:{deshabilitado:o.enviandoNuevoNombre},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},click:function(o){o.stopPropagation()},blur:o.guardarNuevoNombre,keydown:o.keydownInputNuevoNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],class:{deshabilitado:o.enviandoNuevoNombre,administrador:o.administrador},attrs:{id:"elNombre"},on:{click:o.toggleEditandoNombre}},[o._v(" "+o._s(o.esteEvento.nombre)+" ")])],1),n("div",{attrs:{id:"zonaTiempos"}},[n("div",{staticClass:"bloqueCampo",attrs:{id:"bloqueHorarioInicio"}},[n("div",{staticClass:"nombreCampo"},[o._v("Inicio")]),n("div",{staticClass:"valorCampo"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoFechaInicio,expression:"!editandoFechaInicio"}],attrs:{id:"fechaInicio"},on:{click:function(e){return e.stopPropagation(),o.iniciarEdicionFechaInicio(e)}}},[o._v(" "+o._s(o.fechaInicioLegible)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoFechaInicio,expression:"editandoFechaInicio"}],ref:"inputFechaInicio",attrs:{type:"date",id:"inputFechaInicio"},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.updateFechaInicioHoldDuration(e.target.value)},blur:function(e){return o.updateFechaInicioHoldDuration(e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoHoraInicio,expression:"!editandoHoraInicio"}],attrs:{id:"horaInicio"},on:{click:function(e){return e.stopPropagation(),o.iniciarEdicionHoraInicio(e)}}},[o._v(" "+o._s(o.horaInicioLegible)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoHoraInicio,expression:"editandoHoraInicio"}],ref:"inputHoraInicio",class:{deshabilitado:o.enviandoSomeHorario},attrs:{type:"time",id:"inputHoraInicio"},on:{blur:function(e){return o.updateHoraInicioHoldDuration(e.target.value)},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.updateHoraInicioHoldDuration(e.target.value)}}})])]),n("div",{staticClass:"bloqueCampo",attrs:{id:"bloqueDuracion"}},[n("div",{staticClass:"nombreCampo"},[o._v("Duracion")]),n("div",{staticClass:"valorCampo"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDuracion,expression:"!editandoDuracion"}],attrs:{id:"duracion"},on:{click:function(e){return e.stopPropagation(),o.iniciarEdicionDuracion(e)}}},[o._v(" "+o._s(o.duracionMinutos)+o._s(1!=o.duracionMinutos?" minutos":" minuto")+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoDuracion,expression:"editandoDuracion"}],ref:"inputDuracion",class:{deshabilitado:o.enviandoSomeHorario},staticStyle:{width:"100px"},attrs:{type:"number",id:"inputDuracion"},on:{blur:function(e){return o.updateDuracion(e.target.value)},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.updateDuracion(e.target.value)}}})])])]),o.esteEvento.lugar?n("div",{staticClass:"bloqueCampo",attrs:{id:"bloqueLugar"}},[n("div",{staticClass:"nombreCampo"},[o._v("Lugar")]),n("div",{staticClass:"valorCampo"},[o._v(" "+o._s(o.esteEvento.lugar)+" ")])]):o._e(),n("div",{staticClass:"bloqueAdministrador bloqueCampo"},[n("div",{staticClass:"nombreCampo"},[o._v("Administra")]),n("div",{staticClass:"valorCampo",staticStyle:{opacity:"0.9"}},[n("icono-persona-autonomo",{attrs:{factorEscala:"0.5",idPersona:o.esteEvento.idAdministrador}})],1)]),n("div",{attrs:{id:"contenedorSelectoresMostrar"}},[n("div",{staticClass:"boton",class:{deshabilitado:(!o.esteEvento.descripcion||o.esteEvento.descripcion.length<1)&&!o.administrador},style:{borderColor:"descripcion"===o.mostrando?"white":"black"},attrs:{title:"descripcion"===o.mostrando?"":"Mostrar descripción"},on:{click:function(e){o.mostrando="descripcion"}}},[n("img",{attrs:{src:i("f9b3"),alt:"Descripción"}})]),n("div",{staticClass:"boton",style:{borderColor:"participantes"===o.mostrando?"white":"black"},attrs:{title:"participantes"===o.mostrando?"":"Mostrar participantes del evento"},on:{click:function(e){o.mostrando="participantes"}}},[n("img",{attrs:{src:i("767e"),alt:"Participantes"}})])]),n("div",{attrs:{id:"zonaContenidoMostrando"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"descripcion"===o.mostrando,expression:"mostrando === 'descripcion'"}],staticClass:"zonaInformacion",attrs:{id:"zonaDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",staticClass:"contenidoTexto",attrs:{id:"descripcion"},on:{click:o.toggleEditandoDescripcion}},[o._v(" "+o._s(o.esteEvento.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"inputTexto",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"boton botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarDescripcion"},on:{click:o.guardarNuevoDescripcion}}),n("img",{staticClass:"boton botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"participantes"===o.mostrando,expression:"mostrando === 'participantes'"}],attrs:{id:"zonaParticipantes"}},[n("div",{staticClass:"bloqueCampo",attrs:{id:"bloqueMaxParticipantes"}},[n("div",{staticClass:"nombreCampo"},[o._v("Maximo:")]),n("div",{staticClass:"valorCampo"},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoLimiteDeCupos,expression:"nuevoLimiteDeCupos"},{name:"show",rawName:"v-show",value:o.editandoLimiteDeCupos,expression:"editandoLimiteDeCupos"}],ref:"inputNuevoLimiteDeCupos",staticClass:"inputNuevoLimiteDeCupos inputLimiteDeCuposCosa",class:{deshabilitado:o.enviandoNuevoLimiteDeCupos},attrs:{type:"number"},domProps:{value:o.nuevoLimiteDeCupos},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoLimiteDeCupos(e))},click:function(o){o.stopPropagation()},blur:o.guardarNuevoLimiteDeCupos,input:function(e){e.target.composing||(o.nuevoLimiteDeCupos=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoLimiteDeCupos,expression:"enviandoNuevoLimiteDeCupos"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoLimiteDeCupos,expression:"!editandoLimiteDeCupos"}],class:{deshabilitado:o.enviandoNuevoLimiteDeCupos,administrador:o.administrador},attrs:{id:"elLimiteDeCupos"},on:{click:o.toggleEditandoLimiteDeCupos}},[o._v(" "+o._s(o.esteEvento.limiteDeCupos||"Sin límite")+" ")])],1),n("div",{staticClass:"boton",staticStyle:{"margin-left":"20px"},attrs:{title:"Fijar este valor para todos los eventos futuros de este espacio"},on:{click:o.broadcastAFuturoMaximoParticipantes}},[n("img",{attrs:{src:i("7634"),alt:"Todos"}})])]),n("div",{attrs:{id:"listaParticipantes"}},o._l(o.esteEvento.eventosEnmarcados,(function(e){return n("info-participante-evento-publico",{key:e.id,attrs:{estaParticipacion:e,eventoPublico:o.esteEvento,duracionEventoPublico:o.duracionMinutos}})})),1)])])])],1)])])},km=[],Mm=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"infoParticipanteEventoPublico"},[n("div",{attrs:{id:"barraSuperior"}},[o._m(0),n("div",{attrs:{id:"nombrePersona"}},[o._v(" "+o._s(o.estaParticipacion.nombresPersona)+" ")]),n("div",{staticClass:"contenedorControles",staticStyle:{"margin-left":"auto"}},[n("div",{staticClass:"boton",class:{activo:"descripcion"===o.mostrando},on:{click:function(e){o.mostrando="descripcion"===o.mostrando?null:"descripcion"}}},[n("img",{attrs:{src:i("f9b3"),alt:"Info"}})])])]),n("div",{attrs:{id:"barraTiempos"}},[n("div",{style:[o.offsetBarraPresencia],attrs:{id:"barraPresencia"}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:"descripcion"===o.mostrando,expression:"mostrando === 'descripcion'"}],attrs:{id:"bloqueInformacion"}},[n("div",{attrs:{id:"nombreEventoPersonal"}},[o._v(" "+o._s(this.estaParticipacion.nombre)+" ")]),n("div",{attrs:{id:"horariosEventoPersonal"}},[o._v(" "+o._s(o.horaInicioLegible)+"-"+o._s(o.horaFinalLegible)+" ")]),o.estaParticipacion.descripcion?n("div",{attrs:{id:"descripcion"}},[o._v(" "+o._s(o.estaParticipacion.descripcion)+" ")]):o._e()])])},jm=[function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"boton iconoUser"},[n("img",{attrs:{src:i("767e"),alt:"Usuario"}})])}],$m={name:"InfoParticipanteEventoPublico",props:{estaParticipacion:Object,eventoPublico:Object,duracionEventoPublico:Number},data:function(){return{mostrando:null}},computed:{offsetBarraPresencia:function(){var o=this.dateInicio-new Date(this.eventoPublico.horarioInicio),e=o/6e4,i=100*e/this.duracionEventoPublico,n=100*this.duracionMinutos/this.duracionEventoPublico;return{left:i+"%",width:n+"%"}},duracionMinutos:function(){return(this.dateFinal-this.dateInicio)/6e4},horaInicioLegible:function(){var o=this.dateInicio.getHours(),e=this.dateInicio.getMinutes();return(""+o).length<2&&(o="0"+o),(""+e).length<2&&(e="0"+e),o+":"+e},horaFinalLegible:function(){var o=this.dateFinal.getHours(),e=this.dateFinal.getMinutes();return(""+o).length<2&&(o="0"+o),(""+e).length<2&&(e="0"+e),o+":"+e},dateInicio:function(){return new Date(this.estaParticipacion.horarioInicio)},dateFinal:function(){return new Date(this.estaParticipacion.horarioFinal)}}},Om=$m,qm=(i("d4bc"),Object(p["a"])(Om,Mm,jm,!1,null,"e4aed360",null)),Tm=qm.exports;function Bm(){var o=Object(s["a"])(["\n          mutation($idEspacio: ID!, $dateFrom: Date!, $limiteDeCupos: Int!){\n            setLimiteDeCuposEventosPublicosEspacioFromDate(idEspacio: $idEspacio, dateFrom: $dateFrom, limiteDeCupos: $limiteDeCupos)                        \n          }\n        "]);return Bm=function(){return o},o}function Um(){var o=Object(s["a"])(["\n  query ($idEvento: ID!) {\n    eventoPublico(idEvento: $idEvento) {\n      ...fragEventoPublico\n    }\n  }\n  ","\n"]);return Um=function(){return o},o}var Fm=d()(Um(),bt),_m={name:"VentanaEvento",apollo:{esteEvento:{query:Fm,variables:function(){return{idEvento:this.$route.params.idEvento}},update:function(o){var e=o.eventoPublico;return e},fetchPolicy:"cache-and-network"}},components:{Loading:mo,IconoPersonaAutonomo:Dn,InfoParticipanteEventoPublico:Tm},mixins:[qt,Tt,Ut,Ft,Lt],data:function(){return{}},methods:{broadcastAFuturoMaximoParticipantes:function(){console.log("Se fijará que todos los eventos futuros de este espacio tengan ".concat(this.esteEvento.limiteDeCupos)),confirm("Se fijará que todos los eventos de este espacio (Posteriores a este) tendrán un límite de cupos de "+this.esteEvento.limiteDeCupos+". ¿Continuar?")&&this.$apollo.mutate({mutation:d()(Bm()),variables:{idEspacio:this.esteEvento.idParent,dateFrom:this.dateInicio,limiteDeCupos:this.esteEvento.limiteDeCupos}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))}},computed:{}},Lm=_m,zm=(i("edaa"),Object(p["a"])(Lm,Rm,km,!1,null,"5b3674af",null)),Vm=zm.exports,Qm=function(){var o=this,e=o.$createElement,n=o._self._c||e;return n("div",{staticClass:"ventanaEventoPersonal"},[n("div",{attrs:{id:"zonaCobertura"}},[n("div",{attrs:{id:"laVentana"}},[n("loading",{directives:[{name:"show",rawName:"v-show",value:o.$apollo.queries.esteEvento.loading,expression:"$apollo.queries.esteEvento.loading"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.$apollo.queries.esteEvento.loading,expression:"!$apollo.queries.esteEvento.loading"}],attrs:{id:"contenido"}},[n("div",{attrs:{id:"barraSuperior"}},[n("div",{staticClass:"boton",staticStyle:{"margin-left":"auto"},attrs:{title:"Cerrar"},on:{click:o.cerrarVentana}},[n("img",{attrs:{src:i("20dd"),alt:"Salir"}})]),o.administrador||o.usuarioSuperadministrador?n("div",{staticClass:"boton",attrs:{title:"Repetir este evento"},on:{click:function(e){o.mostrandoZonaRepetir=!o.mostrandoZonaRepetir}}},[n("img",{attrs:{src:i("4d8f"),alt:"Repetir"}})]):o._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoZonaRepetir,expression:"mostrandoZonaRepetir"}],attrs:{id:"zonaRepetir"}},[n("div",{staticClass:"instruccion",staticStyle:{"margin-bottom":"10px"}},[o._v(" Repetir este evento... ")]),n("select",{directives:[{name:"model",rawName:"v-model",value:o.periodoRepetir,expression:"periodoRepetir"}],attrs:{name:"",id:"selectFrecuenciaRepetir"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(o){return o.selected})).map((function(o){var e="_value"in o?o._value:o.value;return e}));o.periodoRepetir=e.target.multiple?i:i[0]}}},[n("option",{attrs:{value:"diariamente"}},[o._v("Diariamente")]),n("option",{attrs:{value:"semanalmente"}},[o._v("Semanalmente")])]),n("div",{staticStyle:{margin:"10px auto"},attrs:{id:"bloqueCantidadRepetir"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.cantidadRepetir,expression:"cantidadRepetir"}],staticStyle:{width:"50px","margin-right":"20px"},attrs:{type:"number",min:o.minRepetir,max:o.maxRepetir,name:"",id:"inputCantidadRepetir"},domProps:{value:o.cantidadRepetir},on:{input:function(e){e.target.composing||(o.cantidadRepetir=e.target.value)}}}),o._v(" "+o._s(o.cantidadRepetir>1?"veces":"vez")+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoQueryRepetir,expression:"!enviandoQueryRepetir"}],staticClass:"boton",staticStyle:{margin:"10px auto"},attrs:{title:"Aceptar"},on:{click:function(e){return o.repetirEvento(o.cantidadRepetir,o.periodoRepetir)}}},[n("img",{attrs:{src:i("5d24"),alt:"Aceptar"}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryRepetir,expression:"enviandoQueryRepetir"}],staticStyle:{margin:"10px auto"},attrs:{texto:""}})],1),n("div",{attrs:{id:"zonaNombre"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],ref:"inputNuevoNombre",staticClass:"inputNuevoNombre inputNombreCosa",class:{deshabilitado:o.enviandoNuevoNombre},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoNombre(e))},click:function(o){o.stopPropagation()},blur:o.guardarNuevoNombre,keydown:o.keydownInputNuevoNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],class:{deshabilitado:o.enviandoNuevoNombre,administrador:o.administrador},attrs:{id:"elNombre"},on:{click:o.toggleEditandoNombre}},[o._v(" "+o._s(o.esteEvento.nombre)+" ")])],1),n("div",{attrs:{id:"zonaTiempos"}},[n("div",{staticClass:"bloqueCampo",attrs:{id:"bloqueHorarioInicio"}},[n("div",{staticClass:"nombreCampo"},[o._v("Inicio")]),n("div",{staticClass:"valorCampo"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoFechaInicio,expression:"!editandoFechaInicio"}],attrs:{id:"fechaInicio"},on:{click:function(e){return e.stopPropagation(),o.iniciarEdicionFechaInicio(e)}}},[o._v(" "+o._s(o.fechaInicioLegible)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoFechaInicio,expression:"editandoFechaInicio"}],ref:"inputFechaInicio",attrs:{type:"date",id:"inputFechaInicio"},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.updateFechaInicioHoldDuration(e.target.value)},blur:function(e){return o.updateFechaInicioHoldDuration(e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoHoraInicio,expression:"!editandoHoraInicio"}],attrs:{id:"horaInicio"},on:{click:function(e){return e.stopPropagation(),o.iniciarEdicionHoraInicio(e)}}},[o._v(" "+o._s(o.horaInicioLegible)+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoHoraInicio,expression:"editandoHoraInicio"}],ref:"inputHoraInicio",class:{deshabilitado:o.enviandoSomeHorario},attrs:{type:"time",id:"inputHoraInicio"},on:{blur:function(e){return o.updateHoraInicioHoldDuration(e.target.value)},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.updateHoraInicioHoldDuration(e.target.value)}}})])]),n("div",{staticClass:"bloqueCampo",attrs:{id:"bloqueDuracion"}},[n("div",{staticClass:"nombreCampo"},[o._v("Duracion")]),n("div",{staticClass:"valorCampo"},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDuracion,expression:"!editandoDuracion"}],attrs:{id:"duracion"},on:{click:function(e){return e.stopPropagation(),o.iniciarEdicionDuracion(e)}}},[o._v(" "+o._s(o.duracionMinutos)+o._s(1!=o.duracionMinutos?" minutos":" minuto")+" ")]),n("input",{directives:[{name:"show",rawName:"v-show",value:o.editandoDuracion,expression:"editandoDuracion"}],ref:"inputDuracion",class:{deshabilitado:o.enviandoSomeHorario},staticStyle:{width:"100px"},attrs:{type:"number",id:"inputDuracion"},on:{blur:function(e){return o.updateDuracion(e.target.value)},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.updateDuracion(e.target.value)}}})])])]),o.esteEvento.lugar?n("div",{staticClass:"bloqueCampo",attrs:{id:"bloqueLugar"}},[n("div",{staticClass:"nombreCampo"},[o._v("Lugar")]),n("div",{staticClass:"valorCampo"},[o._v(" "+o._s(o.esteEvento.lugar)+" ")])]):o._e(),n("div",{attrs:{id:"contenedorSelectoresMostrar"}},[n("div",{staticClass:"boton",class:{deshabilitado:(!o.esteEvento.descripcion||o.esteEvento.descripcion.length<1)&&!o.administrador},style:{borderColor:"descripcion"===o.mostrando?"white":"black"},attrs:{title:"descripcion"===o.mostrando?"":"Mostrar descripción"},on:{click:function(e){o.mostrando="descripcion"}}},[n("img",{attrs:{src:i("f9b3"),alt:"Descripción"}})]),n("div",{staticClass:"boton",attrs:{title:"participantes"===o.mostrando?"Ocultar participantes":"Mostrar participantes"},on:{click:function(e){o.mostrando="participantes"===o.mostrando?null:"participantes"}}},[n("img",{attrs:{src:i("ee5c"),alt:"Participantes"}})])]),n("div",{attrs:{id:"zonaContenidoMostrando"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:"descripcion"===o.mostrando,expression:"mostrando === 'descripcion'"}],staticClass:"zonaInformacion",attrs:{id:"zonaDescripcion"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",staticClass:"contenidoTexto",attrs:{id:"descripcion"},on:{click:o.toggleEditandoDescripcion}},[o._v(" "+o._s(o.esteEvento.descripcion)+" ")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",staticClass:"inputTexto",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],staticClass:"contenedorBotonesCampo"},[n("img",{staticClass:"boton botonGuardarCampo",attrs:{src:i("206e"),alt:"Guardar",title:"Guardar descripción",id:"botonGuardarDescripcion"},on:{click:o.guardarNuevoDescripcion}}),n("img",{staticClass:"boton botonGuardarCampo",attrs:{src:i("7511"),alt:"Cancelar",title:"Cancelar edición",id:"botonCancelarEdicionDescripcion"},on:{click:function(e){o.editandoDescripcion=!1}}})]),n("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"participantes"===o.mostrando,expression:"mostrando === 'participantes'"}],staticClass:"zonaInformacion",attrs:{id:"zonaParticipantes"}},[o.esteEvento.idPersona?n("div",{attrs:{id:"listaParticipantes"}},o._l([o.esteEvento.idPersona].concat(o.esteEvento.idsParticipantes),(function(o){return n("icono-persona-autonomo",{key:"participante"+o,attrs:{idPersona:o,factorEscala:"0.7"}})})),1):o._e()])])])],1)])])},Jm=[];function Hm(){var o=Object(s["a"])(["\n  query ($idEvento: ID!) {\n    eventoPersonal(idEvento: $idEvento) {\n      ...fragEventoPersonal\n    }\n  }\n  ","\n"]);return Hm=function(){return o},o}var Zm=d()(Hm(),gt),Gm={name:"VentanaEventoPersonal",apollo:{esteEvento:{query:Zm,variables:function(){return{idEvento:this.$route.params.idEvento}},update:function(o){var e=o.eventoPersonal;return e},fetchPolicy:"cache-and-network"}},components:{Loading:mo,IconoPersonaAutonomo:Dn},mixins:[qt,Bt,Ut,Lt],data:function(){return{mostrandoZonaRepetir:!1,periodoRepetir:"diariamente",cantidadRepetir:1,esteEvento:{idsParticipantes:[]}}},methods:{},computed:{}},Km=Gm,Ym=(i("5b46"),Object(p["a"])(Km,Qm,Jm,!1,null,"350010d6",null)),Wm=Ym.exports;n["a"].use(W["a"]);var Xm=[{path:"/atlas",name:"atlas",component:je,children:[{path:"nodoConocimiento/:idNodo",component:sd,name:"visorNodoConocimiento"},{path:"repasos",component:cv,name:"ventanaRepasos"}]},{path:"/adminNodosConocimiento",name:"adminNodosConocimiento",component:Ze},{path:"/login",name:"loginArea",component:ti,beforeEnter:function(o,e,i){null!=localStorage.getItem("token")?i("/miperfil"):i()}},{path:"/miperfil",name:"perfilPersonal",component:$s,beforeEnter:function(o,e,i){null!=localStorage.getItem("token")?i():i("/miperfil")},children:[{path:"ventanaEventoPublico/:idEvento",component:Vm,name:"VentanaEventoPublico"},{path:"ventanaEventoPersonal/:idEvento",component:Wm,name:"VentanaEventoPersonal"}]},{path:"/atlasSolidaridad",component:Gv},{path:"/homeNodoSolidaridad/:id",component:Ll,children:[{path:"ventanaEventoPublico/:idEvento",component:Vm,name:"VentanaEventoPublico"},{path:"ventanaEventoPersonal/:idEvento",component:Wm,name:"VentanaEventoPersonal"}]},{path:"/foros",component:hv},{path:"/nodoConocimiento/:idNodo",component:sd},{path:"/proyectos",name:"proyectos",component:yd},{path:"/proyecto/:idProyecto",name:"verProyecto",component:Qc},{path:"/registro",name:"registro",component:tu},{path:"/personas",name:"personas",component:qu,children:[{path:"ventanaEventoPublico/:idEvento",component:Vm,name:"VentanaEventoPublico"},{path:"ventanaEventoPersonal/:idEvento",component:Wm,name:"VentanaEventoPersonal"}]},{path:"/espacios",name:"espacios",component:Im,children:[{path:"ventanaEventoPublico/:idEvento",component:Vm,name:"VentanaEventoPublico"},{path:"ventanaEventoPersonal/:idEvento",component:Wm,name:"VentanaEventoPersonal"}]},{path:"/",redirect:function(){return console.log("Redirecting"),localStorage.getItem("token")?"/miPerfil":"/login"}},{path:"/*",redirect:function(){return console.log("Redirecting"),localStorage.getItem("token")?"/miPerfil":"/login"}}],op=new W["a"]({routes:Xm});function ep(o){var e=o.split(".")[1],i=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(i).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}op.beforeEach((function(o,e,i){"/login"==o.path||localStorage.getItem("token")?i():i("/login")})),n["a"].use(k["a"]);var ip=new k["a"].Store({state:{usuario:{username:null,permisos:[],id:null,atlas:{centroVista:null,configuracion:{modo:"estudiante"}},foros:[]},token:null,refreshActividadEspecifica:0,refreshNodoVentanitaAtlasSolidaridad:0},mutations:{logearse:function(o,e){var i=ep(e);o.token=e,o.usuario.username=i.username,o.usuario.permisos=i.permisos,o.usuario.id=i.id;var n=JSON.stringify(o.usuario);localStorage.setItem("pepepe_usuario",n),localStorage.setItem("token",e),K.refetchQueries({include:"all"})},deslogearse:function(o){localStorage.clear(),o.usuario.username=null,o.usuario.permisos=null,o.usuario.id=null,o.token=null,K.cache.data.clear(),op.push("/")},refreshActividadEspecifica:function(o){o.refreshActividadEspecifica++},refreshNodoVentanitaAtlasSolidaridad:function(o){o.refreshNodoVentanitaAtlasSolidaridad++},setCentroVistaAtlas:function(o,e){o.usuario.atlas.centroVista=e},setInfoForosUsuario:function(o,e){o.usuario.foros=e},setRespuestasLeidasConversacionUsuario:function(o,e){var i=o.usuario.foros.find((function(o){return o.idForo==e.idForo}));if(!i){var n={idForo:e.idForo,conversaciones:[],__typename:"InfoForosUsuario"};o.usuario.foros.push(n),i=o.usuario.foros.find((function(o){return o.idForo==e.idForo}))}var t=i.conversaciones.find((function(o){return o.idConversacion==e.idConversacion}));if(!t){var a={idConversacion:e.idConversacion,__typename:"InfoConversacionesUsuario"};i.conversaciones.push(a),t=i.conversaciones.find((function(o){return o.idConversacion==e.idConversacion}))}t.respuestasLeidas=e.respuestasLeidas}}}),np=i("522d"),tp=z+"/pepepe";n["a"].mixin({data:function(){return{serverUrl:z,clienteUrl:tp}},computed:{authHeader:function(){var o=localStorage.getItem("sesionUsuario");return o?(o=JSON.parse(o),o.token?(console.log("introduciendo header: ".concat(o.token)),{Authorization:"Bearer "+o.token}):null):null},usuario:function(){return this.$store.state.usuario},usuarioLogeado:function(){return!!this.$store.state.token},usuarioAdministrador:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("administrador")},usuarioSuperadministrador:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("superadministrador")},usuarioAdministradorActividadesEstudiantiles:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-administrador")},usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("maestraVida-profesor")}}}),n["a"].config.productionTip=!1,n["a"].use(np["a"]),new n["a"]({render:function(o){return o(R)},store:ip,apolloProvider:Y,router:op}).$mount("#app")},"58b2":function(o,e,i){},"5b46":function(o,e,i){"use strict";i("12d9")},"5d24":function(o,e,i){o.exports=i.p+"img/check.c1f8074b.svg"},"5d77":function(o,e,i){},"5dfb":function(o,e,i){},"5e1a3":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAq1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA0NbREAAAAOHRSTlMA++QG+QNcch5C8grtzxtp3432U9mTVzusKMWDryAXwbrRop0018uXLg2zekkRiW1kKqd+RGDo04MP5iwAAAT0SURBVFjD7VjbtqIwDJUCFVAuooAC4g3vHo93+/9fNgFHgZOCnJlZa+Zh8kbblSZ7p0lI47/wRFxHhqIY0Vr8A7oU1ez0R3oPRB/1O6aq/IbWVtzszzWB5UTQev1m3PoldcqhT4SfaiRb02zp+XULD8q31Q22C4mBSMSfBmZ3p6q7rhlMffJYXWwH31JnNPXEHFt36OpDztbljxV1dDsxU28atdXJ3XGijkxdQ+bsGu6MJCrHrlwTvH0bzlsdTyzl3utYcKS9H9bRp4ZwVlt6cqUT3lKDY6H6Xh/V4eCIvo0MkY7goE7fnTMJcOgc67hydIBxYlYf+gT4SLNVM/CbBID8rLQP9M1po7bQOWg0K/bhxkm38Q3pTsAjWsqvDvaV6JPlEo1go17CtRKW3LZe0bPjnGm8LvEqVLg27IHfJl7/uIY/HzAkhQ+834TNPc9+FwhxML+7UGIvkcId5toBYjhAGWOI5yPmvZckiUk4m4UTO3mRmNMjRPjYwJYLTKPcuLRPriHKsmi4J5sbd1RjAsJqAAwvRcQhAd7N1ss7EzglyD1xCUx/zY9bgVke4h1guHcLN9zBPcSpR5iwLS4NF4x1ZB4M1+LSleee3GFsUbzmIDGCDIz8BAbsnh9xTJQOBer7jE0RgjuNtVX0nNpM2yEUp4z18yEXE2a7iL0z4LVGzwZwPeMgthmJi2DpBrr2BLg2kABeJ+SMoRegFcFjB1HSGj8OYabGLUSLAz5n1yhzJtEGT+EnJwdjhSBUYnMlA1pjZIWrRvhACyMb4nq4IkzLCDQF5uM8IiO0KpD98Jlg5nGechLQVWDzAXqjPSZcOclvCvfkOQl4Zc0CVjicWLyiGORYWY8yc9Gjj4trcZJEsDcpbKNn0EY6k7ilRLUAxWHhzQOClsotLhLTo2dU9pi9a/DkLAC6qxyXgJRw5h7d2axnPMOw96QccTdjjPmH6KcnBx8+ZygenqHXU5BCJMNEo+Tv6eVC976U6MsgwAqRy1iiqZBWJ01La5UwBWvLXUakIJ7Vzp0V5N5RxUYlKVnYYLnMbo/q2SaWRdqPenqbqY2ysKkObCVIO1+yCVxvMBwOPDfYkLRXDpTqwOY/vcsmUedv41b+z2XrC7C6uXCfXmVyoBPQt8CtvtFcwMaE8pJDVfo6WADdEhaxrBybMetQlb6GKMFSq9jJ4s7VojjBlpeAC/hrXRulcu1lXSEuAbhIKcAHAX0VGrOuEBcpkPhWKKMB6hR5XaEQFMroLc6jEsIjFV8OE9QpYhyX4IT6wmwGBre+xDnxcrsLxC/iepHakHVLZmmzpN44mZ9bn29qrlkaouJoea9d33iv0PBfvbVn4YJ7nDw7LWWCmj2+bJPQeNaeyRFtP1vibr7vwVLssLrPlhiboCRN++ARM5taP3vrzSNJDUa5rhb/VrTSY7UkSGMl/a1w8S6QkYZzdGeSW0+hK7FJBCH+CBAsw+TB0QFhba+eQq/NyIASgAgVriwl3PfJqXoKk7v3c2D4UvV7C0ha/AuxS1Z6nNDqH3pQqNQcn4DCd7/0zXTCUtfldNbSfD/EEJxjLX2OAP5i+3jFaUTFGmMWVKz4om7qD4I2l1rk/e6oCl/vPoZpM/4wLeqiYVrtcd/CocfiuO/oOgs07vsLA8nqkSnpH5RfHOp+nu5fh7rz02fc+lfGzpzB+H/hyA+HFMaZVdLdTQAAAABJRU5ErkJggg=="},6:function(o,e){},"60ac":function(o,e,i){},"60ee":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAMAAAAPdrEwAAAA3lBMVEUAAAD/9fT/6uX/4eH/7evV1Nv+7uz/7OnS1d3/9/X/6eb/6OXU2ODaztL/3t7W0Nb27u7S1d3Y2+L14+Lg1tvQ0trR1t/uu7u/n5///////v7T1d3s7PA10Zb8/v0x0JPu+vXw+/dz3rM50Zc00JWt69Ns27D2/Prz9Pb5+vrY2uHo+fLu7/K57dhX16X6/fzv7/Li+O9C05vV19/k+PDf9u3F8N+y69Sd5smI4r6E4bx437ZR1qNO1aHz+/f09PbV8+fd3+Wp6c+W5cVw3bJn261e2ald2Kla2Kfw8fNijA/eAAAAGXRSTlMA+1ka2c5B2dbCtllQTC9X59jWuWxiWQ8IBi+1PwAAAb5JREFUWMPt2GlPgzAYwHE3ZffhrStbwa2KkzHcfcGcu/3+X8hnWTaMBkalTSDpP+EFb34h5WnS9EwkEomi1Lmv/iMnMsmL093k6eVCGvmpLNHb2VjJTw1ZKtLScX/0uyxLeW60nCpyoiEpx4mGrnKcaEi6p6VRvVF26wMfaSiVo6XLsmuf9f3wHey7R0q6c4L+ejt0ffvAbEHQjq6/HrtM0NCAu1f6VSzObEKC0shXDk2/1t416oiehgnxUaccLtr3goTpN3oW4rn+E4L40EhvtXTEhVZHljVS+dBVRakKWtCC9kOjnzRiSWtd06HNrsaO1uaTvnmgzf5krrGiTcNWNoa2pzVjo9iGyYhWR4SQ5kDf0fqgCS8jlRGNZ5MaIdZwpSiroUVIbTLDbGiwe2Ow2+39Uxv3MLsJQfoCzAoE+kJne5xUh7ayoxV7qLLejdNBEz4b/uaU+UZHmrEmZG1oiDUN4f5y2cd8ziG418PROz0xprFHgWgYi2fXYFiC0N1tpeZSZdsKRsM+cYk0g9EtfrQ+fnFtrAegwX7yCIV2rqNDZ+npLMXFJ13pAtPrWqdkJsH6ktnpTCQSiSLUN5DlNzinQAMLAAAAAElFTkSuQmCC"},"60ff":function(o,e,i){},6143:function(o,e,i){},6171:function(o,e,i){},6332:function(o,e,i){"use strict";i("7f89")},"666f":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADKZyMtAAAAN3RSTlMA+xG8A8XcHzEG5EMZ0KULSvclFNM7K9fBqhcPymfntXBa6riwgn96bD6bHeFRYDgv8Ozek4tTcmkBqwAAAspJREFUWMPtlttyqjAUhlcgHqJCBEQoaFXAE9ZTq837v9kmUB1SrJChF3s6fBfqzI/f/EsHVqChoaHhj0AGnRwDAiJ0l48tXO6bhq0c4ZQKcefq5mO9XyrsaojlQJNTPsWHdybEulIm7PeYgPZUyNRBRWGgZagbcWTzMsmCDyQlRJOFmdIhIKKYKbZuyDU0oiM8wZ/3ZEY+n5OOMxt+xJq/MWY456pCNX5upNyHwo1TVaiby9cnRmXDfe7wNKosVLxVwDvYD33zzEfGEkKwlsEPHen0I/VhkBKCt3p92NHftLN+ICkEb/nOjVsxxtP2Vz9pIVhpR1UwkgX3tRJfZaHdZujiAyedmuWN5OBw354Ax2wxFlllQuvanuzTAsWOeJH42D0ma2c0xVCGZ5/I3b7u5Yw07act6C1W7CMFObx1cJ8aH0bJZ21BoAa3jnbi+0x8SN5X7Mh/xwuF3QwxNErmrUv6z8QKdFQ+L4b6WHN3NsRADmqY9qsP7ex4McLf/lN8hb9i3/8lXz+O+4lvGMfb39CRoWugyINBZCC3j+sLhy5iTN1Bx2WMucO6RtznvrcpAbL5yJ5c9Xzb0GDsde6nuyQxMnkj2eXOaNsZ7zcnAI+MZOCV2+km1I+3fvaM91sr9/3ZzhvJYhaV9+1qDF0ppNi8X5D4hA16M6Z3t25V3ynYjni/lSWcabKdQm47JfQqC/GR+4KV+I1s6smeyG+9Y4SSfsvvI/mZ8ZNICnH3hfdbFq/3p07WUU540lMfn7do/OooI8z5ilDeEU323epCm/verzshEaZGSceVU1U4iVDiuwi+YkfWM6oKjeTK88UEKDFKHdr1rsKhRZfC6ax7ksLWS0q8J0KMh3EWzAI5IUNfuGMhNtVbUHXko8MEnK4QjzUxfrHKhMpSa+fQvt17dC3ErQpHHWXczTH2QYQKsUmgoaGhoeEx/wBPl4jWb0NnEwAAAABJRU5ErkJggg=="},6823:function(o,e,i){"use strict";i("90e0")},"68d5":function(o,e,i){"use strict";i("b058")},"6a34":function(o,e,i){o.exports=i.p+"img/broom.a1cd589e.svg"},"6a45":function(o,e,i){},"6a56":function(o,e,i){o.exports=i.p+"img/alienar.a0a2ab88.svg"},"6a63":function(o,e,i){"use strict";i("743d")},"6ddb":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAABvFBMVEUAAABeJYxUIXxsLZ6KQsNkJ5SAM75kJ5RmJ5dmKJhkJ5SIOsVkJ5RqKZ1wLKdmJ5dmKJdpKZxmJ5dqKZ5kJ5RzLappKZ1rKp9mJ5eKOslmJ5dkJ5NvK6VzLatmJ5dvK6Z1Lq5qKZ5oKJpyLKlnKJlyLKhlJ5ZlJ5ZqKZ1kJ5RtKqJ1La5sKqB0Lax4L7JeJY2AMr97MLZ/MrxkJ5RsKqFwLKdtK6JoKJtnKJltKqJtKqNhJpBzLappKZ1lJ5ZiJpFxLKhrKp9eJYxmKJdeJYxiJpFoKJtpKZxwK6ZxLKdbI4eXT9BiJpFVIX5/Mb2LO8tjJ5JnKJlmKJdfJY5mKJhfJY5kJ5VrKqBrKqBsKqCfXNSveNuLPsllJ5dsKqFrKp91Lq54L7J/Mrx3L7F1Lq5pKZxjJpJlJ5doKJtpKZtiJpJqKZ5sKqFqKZ1uK6R1La1vK6VoKJp0LaxwLKZ1La1mKJdoKZtnKJlsKqJjJ5NpKZxnKJloKJtiJpFkJ5RmJ5d5L7R0LaxZIoRoKJqENMOCM8BnKJmCM8FpKZxmKJd1Lq1eJYx0La10La1mKJdeJYxvLKWKOcplJ5dkJ5RBXGG2AAAAknRSTlMAzyYCBPYL+vQH+AnxhBrv0tGkFekqvImDDvbzIRG7RjgdvKmecOnlzsGHeE5DPi8sIxe4fHdsYE4+PCAP+/rz6OjW1cS9sJKFaVhDPjs0E/zs5eHf09GAckMMCAf3zsutVDw8NtnT0MWmpaGfmJCBgXNaV1VK29rSzcnAtKqfj09KM/JDQzgw9eevfGxdL+CtQwpd6DoAAAY6SURBVFjD7VlnW9NQFK4mNOlIN23pooNCacsoMgsie0/ZMmSpIEOGigoO3Hvc/GFPklvoSNoU/aCPng99mvTc995z7tlVyCJVg9XfoFL8PmruZtnu5t8IePkSQpcu/wf8YwBJ1ah5mAMcNo+qyF9FU8Uq+u0Bf9c1hK51+QP2/orYxTEJpSvKWCfpMZZFPLHsGD1ptT9wXczElZV7/usFKIMKyjy1a8q84YrWwkYHKyDQpRMUQtREKS3gs05j2JsfJOGrDfGLWdrQYwuuDHQg1DGwErT1GGiW36R830fIx9MUm5z8stumem/N/LnZzNd46023+a2cpmKNXDxdxKCGJYuhvriZTLdD0hxnQovwc6sxopOHF7OXAb/6TnhVI27YmjXbHW7H659cctQ3svwKdKcvmWshpDyFaJkr0YMuSwMjuRU5ErgKmz+u82V3Pdc9A7BdXR7JhVf4EfBabzYu5PLlG403OcRADql19vcIaZ8Wk8nOrHEPTSE0NeTWpLx+0aMFqT/pstpLHdwH9fQlkeQw1QfMZnkBZ3qbzEG1MknbL3vgjGX1C1kupJhTzM3iMzzC3cRsjFOIM2b4oMY3mCb3+a8vluDtY2CXIp9JDQyN5NmBm3Y6nSiFnNPP4/NnUjd2sqh10yfpv3uwWl+nSRxAF3mkRkAUbWlva2u30BQCUj+K6IjEzdzTg8r3pfy60gjsJb4EXmGvhRNUa9wORl8PDr6OBreNWk54S291AtFVAluWeyXiVRhUf2cugVf1DB6R3jO7XkTgV0Xrsx495+MlXxOIp6B1R5/oEQnugI5wS+J8z7RwvFu1hSoiiUdVOPOQBSlLEmd022Bb46roAfvA5ZdWMaOvFxipK/eVGYq+f4WCjXt1eIu1ENxUrUrMR45ZVNCnwfcbsQDe3SpSJGlV3QVES3ABn4MpQKxfzF8OPyA0Hcf7Nj0Cea9UiSu76gpI/eQtlqXiCOLOAxEn2QUb3DILDzU7cHm37pMCesYZDx+COTzH2jbfBcnsmaLE/CyiP+P3p7BCX6sUxwM9zuhBmiYMX08j9iTTo+cmETJ4sV5sDtBLoRQe6NvDIiejweYLu3e+zRCjn0aop0Z4ePcELGNWxb8Xz//7YFPHhThCgUr1DWQ6i23sTBPkl3GEQuvSeArCa4CbiBKC/+22IopJN5ya75wKE5ZAIfWOUhIQaHQLWGawzLOgxMBoGocZtFJ2iq3fBBLXE5J4QEQdaGjLLTwclCLWaj6TtfkyR8NdCH0buMzTUDmLLLxlSRcxUQtiy4cE/oEJhLqG+a/NKkVD9yWeoL6iOoSvXCZv/8Etkw7GFe0QI6YE/g4KajPha3eDwsoiMWobxCqUoME20WWsNTugIn9AMZGnOJHfYKuWoDdSIidfykTypUQxYL6Xkmw2pSvYbDYhxAVzm80mNpsVMBuPOd1SA2DYQRx4whSitouy1qOcYTM4+gbFDFvFgOvZhARJHoDrGdeJLAl83QhFw6EgwDy43hijkhkcFNLBYaMaey0UEHQ/mWGpkxCEksOXBwcT6fCFJfZ2IjRZkRlgrbBPPYnRb+EAiylXgEXWWKYUdkg2pvQUIErk4RGXAtzYPkyQAhgRJ20syytJLcXxpcVvQwn2QITN5U9Ko/M502gEn0nDp9Fm0UTvSEr0OqlE33KYmuhXQ/C0p8xdilRLlSJHKaVIi20RbLaSkF8s+ZOLJe9+erE0Z4DHsPIi5dybaN22gS/nrqeVc6FK2QXnkljBedyfWnA6a4vklsQL8Z0jB0ohevr5WzKlJFabfHkU7TUVtifjaly0s2quaD9vsEiuaEcGYM+rrXj3ZcYktBWmmZS2gnx5wik0osne+LzKbHyUEo3PCadyuy5Ha7bMt2bRGzJbs+WYvObRcM+Vq3nslNc8Qnv7Edo9djxre+s+3eLa21fL0N7mpmrbB74Bt2VpwA18A26PyRwR1GUdETQx/IBDbYjo8hhiaPkhxnTaEOOG7myIoYUhxgXHLLvnY5bdk05hzOLYmPUReQ6CbMZFoexpPR8EtQoFjAMPgvIdVfUdl4mOqvx7lcoLDtMa7aLDNCXxS+M+JuARxn0eYdz3Zw0k/4oZ7D8K+Nv/XIC/P6wy//74CRM6iF15FgnzAAAAAElFTkSuQmCC"},"6eb8":function(o,e,i){o.exports=i.p+"img/uploadCloud.221b309e.svg"},"6ef0":function(o,e,i){o.exports=i.p+"img/chevronCircle.9e09bac5.svg"},7:function(o,e){},7109:function(o,e,i){o.exports=i.p+"img/teacher.78fdf712.svg"},"713c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAtFBMVEUAAAAAAAAEBAQODg4EBAQAAAAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAADAwMAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAABAQEAAAABAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAACAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEAAAAAAAABAQECAgIAAAAAAACAxK8TAAAAPHRSTlMA+5QMvAQi9/kIEe3zyybq4xUO1TUr8NtdOxrn0L9YMP1Ap6KdmIKMYh7fwnVMxrasbVBHsI+He1NwaWbdwfsCAAADOElEQVRYw+1W2ZaiMBA1CCQQdmSRRQERcd/3//+vSduONooaZZ7m9H3hADk3dasqN1X7RRVw3L9g6bvzZnUicaNK03ZlmrYcRXgvVE1MrkIVJV5VTSmUZ9BsVqRpBJBxB/a8YpJz1W8pU9DRq2nqoqElZDBoVKKxJnBt1BYaPghV6uT6aqtWU0JYSZXIQJm0ntGDZhVVlgy7Iglqp+G8Ak1LVV2u9qUKEbpPUe/BiVUjMNZIbn+uKUSp+B2Wj3Pu0zq1LimxJp+rMnqXtjMY+LEq0i6pfm0gl0pB/RYGKfORu7Yz490tEe523q+ZW4RE04/D5aR3K7JlkUhc2+AOEem9a7qdCNwBDotGxA8jMAjZIqbrHyfAm8/YGwRSpLYKNHoKgbxv80UUSix4xZ/KOLGBHN+4XIphsH/DcoXxzEZD17j5zG9N5HcbtK3anwdITWLhvtkWU0liWyKdRTMaMLd8aeeQf8jMFAob2rFkx92jHfWDjOwkrr9gIfqBxjzxMWOZSHBy1J/mNu74SJ73n5+jjQO0XvtxpvV8iOzZ+JXD624I7dXi0TJr46DBxnpdUKFJgg7KgxaWMxsOc7pbgh+ZwO+Vrd3JSE2ppx1jF6Ky21/vAG2rvNHpmeSU04RKjR5eAqYlyeFGkrN8g6YZwKysVrEjbev0mva2Ni49kCu0oncBvYNYpZR/ZDvxGyOWtCmPPXbsEW29uQMeLC6LvYXbFi4vKzDzqMdGxPJ/ZTS6Gr66kJBBM6bVJKPeWZPRYiVoI+fiQmNHolTFHbF2Nnxl6wAtzWSEO2e/5Kcg0Sk1gaF14os7KpIPfSFOMJwcvJOqrWQ2aEeskyYvn0A8W9YJn5IRe/h2ofEAUw3JnEtGYfKwegMwyKxzhG6I4HRhEFUsolIldiHRZIxXthTm4tWFUh8Goz5X39CN/m0ZMWJ/HwDcKThLfxREarfJfQ3JFKpcVc2bXR+ZI/4mzFOAbpMFHfG1ZTHI3LCSNN0Z94GuB8DprWgGLyWMsAa0denl4B0nCPtAbXEvaYZRBOW598BClgmOIuy+pDFGppYshYftoGSmP7MozGY55p9tJsYLhav94hf/Hf4ADFVKOiLjUnQAAAAASUVORK5CYII="},"743d":function(o,e,i){},7507:function(o,e,i){"use strict";i("e294")},7511:function(o,e,i){o.exports=i.p+"img/equis.2c5552a1.svg"},7634:function(o,e,i){o.exports=i.p+"img/broadcastTower.57740b52.svg"},"767e":function(o,e,i){o.exports=i.p+"img/user.a617dfb6.svg"},"775d":function(o,e,i){"use strict";i("22d5")},"77fb":function(o){o.exports=JSON.parse('{"NodoProyecto":["Objetivo","Trabajo"],"NodoDeTrabajos":["Trabajo","Objetivo"]}')},7871:function(o,e,i){"use strict";i("a74d")},"78d1":function(o,e,i){"use strict";i("d871")},"7a57":function(o,e,i){o.exports=i.p+"img/doubleUp.5881d0a9.svg"},"7aa5":function(o,e,i){"use strict";i("c5f1")},"7b0b1":function(o,e,i){o.exports=i.p+"img/link.6af56728.svg"},"7cb8":function(o,e,i){o.exports=i.p+"img/receipt.6f97adbd.svg"},"7d1d":function(o,e,i){},"7d55":function(o,e,i){o.exports=i.p+"img/minus.8503b4e4.svg"},"7e89":function(o,e,i){"use strict";i("0d4e")},"7ed5":function(o,e,i){},"7f74":function(o,e,i){"use strict";i("a66d")},"7f89":function(o,e,i){},"7fa4":function(o,e,i){o.exports=i.p+"img/lightbulb.35c6c4f7.svg"},"7ffc":function(o,e,i){"use strict";i("7ed5")},8:function(o,e){},"82e3":function(o,e,i){"use strict";i("db57")},8373:function(o,e,i){"use strict";i("4edf")},8587:function(o,e,i){o.exports=i.p+"img/clock.7f77658f.svg"},"85ec":function(o,e,i){},8664:function(o,e,i){"use strict";i("2977")},"87e0":function(o,e,i){},"8b1d":function(o,e,i){"use strict";i("9eea")},"8c38":function(o,e,i){"use strict";i("5dfb")},"8c45":function(o,e,i){"use strict";i("5d77")},"8c7c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAABg1BMVEUAAAAAAAAAAAAaGhocHBwFBQUDAwMAAAAFBQUgICBiYmIREREKCgoLCwtQUFAAAAAVFRVHR0cJCQkCAgIBAQEDAwMTExMhISE1NTUHBwcDAwMHBwcICAgHBwcCAgIVFRUYGBgUFBQSEhJeXl4EBAQFBQUFBQUBAQELCwsAAAANDQ0vLy8LCwsVFRUREREZGRkAAAAHBwcJCQkHBwcHBwcGBgYICAgMDAwCAgIAAAAQEBAaGhoKCgoVFRUKCgoQEBAQEBAZGRkHBwciIiIhISEoKCgtLS0JCQkEBAQNDQ0KCgoDAwMKCgoZGRkICAgKCgoLCwsJCQkQEBAICAgODg4dHR0YGBgTExMICAgPDw8LCwscHBwgICAtLS0ZGRktLS04ODgqKiomJiYPDw8NDQ0UFBQQEBAAAAAMDAwODg4YGBgKCgoWFhYYGBgyMjIfHx80NDQAAAAICAgzMzMkJCQrKysAAAA0NDQzMzM8PDwTExMWFhZISEgpKSlFRUUfHx8AAACEqLVPAAAAgHRSTlMA/pkLmb8f399/CtfPZRvzvxW1/PXzuh4D5dvSo41lY09HLQbw7+riyL+sdW9YS0E/+NrWy8a7sqObmI2EeXl2aWheODQcCfPm1sXCwL+tpp6Wj4eDgHJvWUhDPj0sJxkWEhDg0dC/vr2uqqqihYSDenFqY1pSTklGQ0M5NSULCM5vugoAAAJJSURBVEjH7dNnV+JAFIDhuWRR1oYbmjTpKH0BpSOCYF/b2rvbe+/1/vRNmABhYTB89/2SczjnOZc7mZCbuha1JTTPDrg+xKEFhXT2RcXifAaxbkYVkzIgbUPxmDxKrYwpJcXGlOkHSskPr0TuE6V5cnTMrJsobszuB9DzLtJHEz8rk9FYMe8wkX5yqw0aX0rZpItLIrabHA+mrdI+sd3IBBMcVcoL4pPb481o5oGeWqHHgbuWwa+2l53RA96H6E+DVVzHE8SXzCmHgEKg14pPnfER6p3iyFksEFa1oB9QymxMIeKO8KtJAw4miX1eCG+ODC4tDU4bjVYRpjhCqj7tEZHHNfoeCr15Fwp9PHN/++qurtJxlgFCjrW+qlyYbGqpFQ1NLVaRvhqvcIAR3eCAnAxosEsQ3sB62ruEfIBETU4u3w53CsOr050WeY1rHGnrVicR/kgJmiSH610IyKuTyRZRoXGog4zs3W71Io5T844MJYYTQrJoIx1EJbsP8+uAqNVRgVPn4n1RdSGkWcSL8lavyNC93mRiq01AiVxLLqxyYLBzAjH2JideukJijd/K77v+ioNtvUkY6uK4FrVlsyqaBZ972MSz2XiVo4CtnvxhE1OyQZxxTI7THqKaYxOXoUHujEB4iFaEmSs2mQMZmSQ0B2hMTLKYxi7EqV8+Y5LfFjnJjNLsekOMSZx6GUHzsBToIkziEFeBxpS5MdovK5SY5NQskMfx/3bheMy1k/1A4H3z5k9btj/xgYxAtp9+aZ5joMCRm8g/1gHtCvE8ISoAAAAASUVORK5CYII="},"8f6e":function(o,e,i){},9:function(o,e){},9053:function(o,e,i){"use strict";i("3897")},"906a":function(o,e,i){"use strict";i("87e0")},"90e0":function(o,e,i){},9253:function(o,e,i){o.exports=i.p+"img/relojArena.4c43f504.svg"},"92d5":function(o,e,i){o.exports=i.p+"img/babySolid.4375468c.svg"},9311:function(o,e,i){o.exports=i.p+"img/chart.6ba0a28d.svg"},"94c9":function(o,e,i){"use strict";i("0d63")},"94d9":function(o,e,i){o.exports=i.p+"img/network.be2a454d.svg"},"95b0":function(o,e,i){"use strict";i("6171")},"96cc":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAMAAAAPkIrYAAABEVBMVEUAAAACAgIAAAAAAAABAQE0NDR7e3sBAQEEBAR5eXkeHh4MDAwwMDADAwMGBgYVFRUKCgoPDw8ODg4ICAggICATExMPDw9QUFBZWVkGBgYBAQEJCQkCAgIZGRkLCws2NjZkZGQODg4GBgYGBgYODg4MDAwPDw8SEhIICAgRERENDQ0bGxslJSUREREWFhYbGxsdHR0cHBwvLy9vb28xMTH///8ICAgODg4ICAgGBgYSEhIUFBQYGBgjIyMaGhoEBAQMDAwoKCgoKCgtLS0kJCQ7OzsMDAwDAwMAAAAjIyMPDw8QEBANDQ0HBwcMDAwcHBwKCgohISEtLS0NDQ0HBwc4ODgVFRVAQEBYWFg1NTUAAADjrFRNAAAAWnRSTlMA/qU/eUQdwVcCH78M79mVV9HB42dXPBIF+eLSWVc/Kgvy8u7OubOwpaN6aVhYT0tENzAdHAPq4daxi4B4cF1OSUhCOSMi8cPBr6almZmSdWlkT05OQDAgHRixeboEAAABzElEQVRYw+3WWU/CQBSG4YPiUnAB29KioIgCyg6K+77v+/r9/x8iTVpGI+kMHi686Hs1SZMnnTmTphQUFBTUa2OJ6vPLfjptmpVYu9FvxWLm/kHiU1WyCpAWn1OiThbgFuqW9+xJZX9tavEoQ341821M4c2WgWWSZgAbJMsOYYYUugaOpacF7KlY78AWSXoDGqRSSH4UDUBt3EkUSFICiChZWWwqWKtK1hlyRI9Vv8szC3woWfOYItKB3KmftaJkrTnWOoDQIduadiyrFm1jzX5YTiVAp+4NAsM9WTQJ1PtlZYBtpjWPqLvScce2vLu6jlumlUXeXW3gimklseSuZrDEtICbfllNYKdjDfCsRfENiPMsrQDkqRfrdeh3R/V6rVLUgQWrF2sSPumrpGTJqeS2TWqWR42XDMNIpZyfiFjFNNPpcrlcPagdNk61H2PwszwqQkpdSCxByRvxswTFtzxqd4tveRSSFte6dDdoAPEM0+qcVQ5YK81Ztqa1Wi3tD5agyJ6CT1FNav2Y4H3WF5NYkXA4QiLteO9hp1gM/27CwYTFaqyDCYuPCYuPCYuPCYuPCYuPnQuLjUFYbExYfExY7OxUKkFBQUH/sC/SIJ/NRVDIKwAAAABJRU5ErkJggg=="},"96fc":function(o,e,i){"use strict";i("caf0")},9895:function(o,e,i){},"994c":function(o,e,i){"use strict";i("e8ae")},"9d5e":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAyCAMAAADC1sOAAAAAtFBMVEUAAAABAQEAAAAAAAAAAAAQEBAAAAAAAAADAwMQEBAAAAACAgIAAAAAAAAAAAAAAAABAQEBAQEAAAAAAAABAQECAgIEBAQEBAQAAAABAQEAAAABAQEBAQEEBAQHBwcBAQEAAAAAAAAAAAACAgICAgIDAwMCAgICAgIFBQUAAAABAQEAAAABAQECAgIEBAQFBQUAAAABAQEBAQECAgIAAAAAAAABAQEBAQECAgICAgIFBQUAAAATATehAAAAO3RSTlMAby7r/AXgxTkJ9AyjX9uCaSH37tdFGxfAu6l3VE0k6LSvlopsWDw1KeTSyY19LA/xhklA+ZyTXV9wY7WFmHcAAAIsSURBVEjHxZXZmqIwEEZRI5s0gmwCYiNIi/uuPfO//3tN0l9/gMrm1Zw7Q06KVJUU91/o22LyZ7g5+t9nXWqxf6cppkHAIDIf+mKDZEU8wQM9LxlU719EPfwwMj4p8u8P71T1/vMVKET1/KCbTtOupV1XI1A+h06ZoN8IOzDUpv180UmUn7Ce+CpMFVDc++A58klhJ43PLxGYYAztkuDS3CxRbCaoH1UZHDNl8bAW06V1wFXx5dLnSvH63zKNMOGqEd3D4eAXbi0AssbVoYuiWHitIYAN9wY7FRDSd4wtgHnTpmKdnDXNk91kTAqpD2RgyzXR4XPlCBhis4FMkVxA2LcwMkVXgRvXwsiUhUEz1cbIlNMIoyBv7m4FMTJlQiB/5T3H98o5IFOYIeaGjHr4bhajpTGkBSQYnfIGmHfKmWUCJ8ogf1vmigqU6RKIWxpUoOwFIJRaGcff71IELNNmIxe4+wVEa2HE/exfrgIzqdGIC1tugDxpMuzimZZBg+zfGkpXgHS4dzjzgGnVbpEGlKeviburEfYbQRDmBcXxqKLoNQL7Li+KS+I4Gysl6BFolZPHxcCki0J5ji3Wt72XIidsCBqb18vYvskiaCUnuaCstt3+w7DrjEExS4fRLrqAwiuaaA+kfl9yuvfIBGNmVVRSE8AghiqEXjhefRIwzK1TPVf8NcETaryob7gPRR1luy/LWSdt7jI98K8hLbGrDJNUat2cgwG9fPmzf5+aajk37m2HAAAAAElFTkSuQmCC"},"9eea":function(o,e,i){},a09f:function(o,e,i){"use strict";i("f163")},a26f:function(o,e,i){o.exports=i.p+"img/handshake.03430d88.svg"},a3f6:function(o,e,i){"use strict";i("297f")},a66d:function(o,e,i){},a6c2:function(o,e,i){},a71c:function(o,e,i){},a74d:function(o,e,i){},a979:function(o,e,i){"use strict";i("0c7b")},aa00:function(o,e,i){o.exports=i.p+"img/nodos.c2163f38.svg"},aaf2:function(o,e,i){"use strict";i("42e8")},ab5e:function(o,e,i){},ab85:function(o,e,i){"use strict";i("8f6e")},abdd:function(o,e,i){},ac77:function(o,e,i){"use strict";i("0ddc")},ad61:function(o,e,i){"use strict";i("e784")},afb2:function(o,e,i){"use strict";i("7d1d")},b058:function(o,e,i){},b11f:function(o,e,i){o.exports=i.p+"img/search.c6a0effb.svg"},b2a7:function(o,e,i){o.exports=i.p+"img/mas.b99e8ee2.svg"},b316:function(o,e,i){},b444:function(o,e,i){o.exports=i.p+"img/ellipsisVertical.23698c03.svg"},b49a:function(o,e,i){},b4de:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAjVBMVEUAAABJSUo5Tk9BSFdGTVxHTl1FTVxGTV1FTF0+RFdFTFw8RVVHTV1JUF9JT15FTF1FTVxGTV1GTVxHT15GUV9ESltITl5GTV1HTV1JUF9FTVxGTl1GTV1GTFtGTV1ITlxGTFxGTVxFTVtGTVxGTF1GTVxHTl1FTFtHTV1HT1tFTV1ITl1GTVxHR1VHTl5Dm7GSAAAALnRSTlMABgokwLbn/OMp3R73SIRVqO9tsRA0YevIwnVc8z2fLJWOQdeCfGcxyxrPT7oJm8OXKQAAAppJREFUeNrt2WuPojAYhuEiCijoCIg4nBQ8jYd5///PW0vXYLLLMmmBZSbP9c2YNDeBljYwAAAAAAAAAAAAAACARlr7mKpplE1a5+/iFVOxvlInTL9g8mKLujI+M1mXMXUnZ7LeHOrO3maSInowjZJLgmvIcEgIDS6khyRlkg5E5ETbKTeflGMt0qmM25K4PCh/pRkfeM4kLYjo4zmVTyYRHZgkm1+VsWVC4apmbZ5Z8SMrlJ8+Hs/SmRC0mzWz5aePWZOlehOVs6qbmCpnuSe7FCxJOcs86Dan56SaRcmsZJF6FpnPsVSzKupZFWQh6ztn3aJ4NbysOCRz7F36zpq9lzZ1WRkR8TD7C1nh77ES5SxrPiqtdjVZSxI+Ir0py1mPhMhs7Z24NuuzhOtx+6+sfncQS6rsD+chZhHN8qCXrOul2tg3ZAlWntZlhc9/bolqFmWnNRddG7Iqxq7Q/ppFvrfmvHsL65YpUGNWJczm2p9Z1VitL6fNWYKbBQ3Lae9Zwk4bZNZ9NcQsJxrgTXT8mA0uK1m+jdjQstzs9tn9xmYZedxh35xVLVk1WRMx1nGsnLXXmXBsyqoW+LqssHj+SPp8VVt5qg1uB8E3D4Pbb5Vbrf6yrEIrfeY1z9ai2pg2ZSWxJnimahbtJz73btZkBX64ifSvHcgsMdYk7OGcuNpehnh8HeipGlnI+llZjlUKW8kyLM5Qz0o8vVT4LWQttjp33tEP/VyweWa9DerjisiqLleW1+E3HzoySRefWruJh5dHPvXpITyedRlFRtxi2sYjH70sEAYJhiXDJeFlrCRVmtRdmelMkr2h7uyYtLVLXRkHTJ63p06Y9zlTERz9cfuy04Up0kbtYwAAAAAAAAAAAAAAAAD/yS+cHKxqoQUmgQAAAABJRU5ErkJggg=="},b559:function(o,e,i){o.exports=i.p+"img/lightbulbEmpty.4d69198c.svg"},b67b:function(o,e,i){o.exports=i.p+"img/calendarPublic.64f99cab.svg"},b728:function(o,e,i){o.exports=i.p+"img/edit.9a4d5fd5.svg"},b78a:function(o,e,i){o.exports=i.p+"img/userCog.d1b32fc2.svg"},b7a1:function(o,e,i){},b81f:function(o,e,i){"use strict";i("3951")},b9c5:function(o,e,i){"use strict";i("2cea")},b9f4:function(o,e,i){},ba99:function(o,e,i){},bc24:function(o,e,i){"use strict";i("5004")},bc60:function(o,e,i){},bd51:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs30iGAAAAN3RSTlMA/ID3Cw8F6qwT8jmmfUZAMR8Y3dGSG+/ZsJ2Gb10H5sO+u7ZnSqF1V8iZjGBrW1Iu4MyCKOxPW1J8IAAAAv9JREFUSMftltmWqjAQRUmQGUREZbgtIOI8D931/392ISl6oYLNYvVjnyfLYlNJqJxE+NPv6cv0ffOrG7t2IZe77sJqM2BKtQ6woXNYNzrAfZHDYr8t0ZN6AmqgcFgZVJPNGlqzTZBhEG05PJbxjyzYpKthEztZQi5CMbybJI/MO4aUFNmwibaAySsnKY0J2UkYnHAJVg3znQHXPwH1ASQTUDtMzuvnrV0xb8rfMHzgT3mJyaQejtTHygij/lXeXKc9Titk+eg8DQDm+zMr1cPK4lRoEMWmovnDezUmbPHjYC8JMhb2qNCoxc68jQu6r+ak52+uvpfz6uJWfPDV9va+2+S8ftFWABtqT3rSxLY2LARaJH/WraCpU4aOFTO2nRYKuA/rMvUhbrk9JBVizjqG4XA6BrPXCp6KOMbVSNdHvB0piMc3vmH0B3LZKxtW7wCFyIGN4Qompgd9Y/jkV6kuKttz8fMcA63a0EzjpS93tsu3n6Kerh9cw4dCavHckeg2ewmaQcxeaeukIDTewn51+UJgIuPs8BGAO3n1MMeFrW0YFgGmbQUeAdIsN9JeYW0ERNR1EbhGLzAK4XvMo4uD8MMjr8OGJaV0jsOW0urun7gwUlUV/4Ow2lN8wYKi5Jp4Nu5mpoOAC7aXZXkYQCF38fCpZqLohQO0XMo//ZwVltDfFJ4NPVGcrZ9c114YEbcyFa68KU3mHNxYN6Dy/oyMhT38sT0nq0/m+asJb899242hHLUsAdQsk44KqFLrLXlJCHyLJBdQFkI7UagRbc9+PpJeGxuyrbE1Lpz7K6gOOzjtCgO03hqgpaDrR4KWBQrnvXmmCdIOh2A1fyPsPW7zg/28WGqDRdIPph+ZNccNfT5u1Kj+lExqDjr6fNBdtXo4xfyuWrnlEVse7uLp+3AHCFse7uW1opyyE5I8WjrlpAmbUvOlhCZ+epBxluPHC418SP3Ect5tiqHUcJXCZPdLXHvZJWx3gIf42ZOh0EFHlznvUeikk+q66kn406/pP19rpKSAcXvNAAAAAElFTkSuQmCC"},bd7e:function(o,e,i){o.exports=i.p+"img/locationCrosshair.4d903828.svg"},c0f6:function(o,e,i){},c3cf:function(o,e,i){o.exports=i.p+"img/file.472300f7.svg"},c4d7:function(o,e,i){o.exports=i.p+"img/exclamationCircle.52dd6a0d.svg"},c51c:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAk1BMVEUAAAAmJjYoJjUjIjInJjYnJjYnJjYnJzYrITcnJTYoJDcmJjYmJjYnJzcmJTYnJjUqJzInJjYnJjUnJTYnJjUmJjYnJjYnJTYnJTYnJTYoJjYnJjYmJjYnJTUmJjYmJjUnJTUnJTckJDUnJjYnJjYnJTYmJTYnJjUoKDcnJjYnJjYnJjUmJTUpKTYmJTUoJjcnJjYD4yW0AAAAMHRSTlMAoKcQ++PfaBZMOC9kg2vECPLc9tGyrJh0WyXYyiq2k1RGDeyPiHxiHvi9QT4Z52bwjL0NAAAB50lEQVRYw+3X2W6rMBSF4Z3Y0CQ0CZQxTJnnpGe9/9MdsKCNVChbim/a8ktIGKHvxpZsU1/fn2s0CwddhdGd7S0ccHJWTG8twets8UAPkPmwq1wCAcuLASyouwOwZYETAIK6GwPy54LxYlZ31QBuhvgs1AD60AuuAThvddPnwR3wJnROygAYUg/2YA/24O8ATwxwBZxZoHCBPBs1JEhlq0E8BxIGqD60JCMqe0HdgQcKD20F4hFMbR5IInTQUpJ9gG64IbI5YJGdWV+7JupQWIKGZWUFRyJqA1mJAEX7GWCSyvIGT4Bx8UQSwLYG9xJNYAj4HPCyJ6LrO4AaHKIRjAD3xjooXwTRfd4JnlwARlmgxpuB0ZQEnFE5X8sukCJUzanIStDWv/qS0AHScfsJzly09L6gKivpAGkzPr7mJTjyUZS/fu04tukjsfseVE0LcG0AkAdixAJdCcC4kS5Q5QvSCZ4jtZCCdKcHNCfqdQn4WsBAkE7QnVHVHvA4YAosqbWF9bifwX9pKqt+UINA3TI52R5aco9UNkdVYhOr2ERbA/sBNDJiJg6p2ZAE4MUKdEwznQp6spuhdpUSnJKW7hcULVMF6mkqodIG0nqrGaTTXDNI9k6BOls5mkGKPc0g2RPq6/sL/QcOJpe5LiscHwAAAABJRU5ErkJggg=="},c5f1:function(o,e,i){},c70d:function(o,e,i){"use strict";i("bc60")},c7fd:function(o,e,i){"use strict";i("3d00")},c871:function(o,e,i){},c8fe:function(o,e,i){"use strict";i("6143")},c90f:function(o,e,i){"use strict";i("4782")},caf0:function(o,e,i){},d046:function(o,e,i){o.exports=i.p+"img/whatsapp.a8812701.svg"},d1f3:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAsVBMVEUAAAAAAAAAAAABAQEFBQUBAQEDAwMBAQECAgIBAQEAAAAAAAAFBQUAAAAAAAABAQEKCgoREREBAQECAgIBAQEHBwcBAQEBAQEBAQECAgIBAQEHBwceHh4AAAABAQEAAAABAQECAgIBAQEBAQEFBQUEBAQKCgoBAQEBAQEBAQECAgIDAwMCAgIBAQEJCQkNDQ0BAQEGBgYFBQUDAwMBAQEBAQEGBgYICAgAAAAAAAAAAABES1EIAAAAOnRSTlMA7PQwArcHQaM9qPhU/PrIHArDXVgQ1q+dhHIhBe/f28ynjn9jSA3jvrSVemxoJxirTjGZk4k1FTg3rkgIUQAAAZtJREFUSMftlVmPgjAQgEvltBQEuZFDxPu+d+f//7A12UhWbQGf9sXvhclMvobM9EAcemNHs9A79G1iJMHmDUPxcBBKoE7aKwUsRRRLWGltWDMhchx9CGVb47AUABvUICCVvVZCMQXBVsPRYp4Raq7cRqPMIV9eXPEWyrEeJLDTGowRFsIYVQz2Pph6vQGm8zTTM2R1zoraCmMZ+5trjLN0/5oVC/5MrSFErHw8p2uO4hCfvZqObfZ85CFxEKdi9JmFztS88jY2UQfMvFEgDnHqMf8spGXNPj0w0qKKxzxF7GKFnda4ivpRPsq/KLKEv7jKgqxZJwz7/LtUx7PXM3aVEh1xGQSwfElGcBwgPlrqXZ5Smzytv65DOD1lzhCiWjam8HjOlanZ9Jau6NB6aCJdoQbcnfG3P9Zc6HeaWMD6sV+J0ATJtIe+R750R6CzKs4gr2L1eW7yHetI+lWsEr0q1IzNMbqTqpF5q1fc9WEk/74FPkSoFYoNwXg7icvb10UtnTlNPDM1cNFDbdmud55nnvboHeTt1hXZpR+YEyU0uY0rZgAAAABJRU5ErkJggg=="},d232:function(o,e,i){o.exports=i.p+"img/graduationCap.6980f8ab.svg"},d25c:function(o,e,i){},d375:function(o,e,i){},d4bc:function(o,e,i){"use strict";i("6a45")},d522:function(o,e,i){"use strict";i("2840")},d871:function(o,e,i){},d8a3:function(o,e,i){"use strict";i("a6c2")},da64:function(o,e,i){"use strict";i("abdd")},db57:function(o,e,i){},dc76:function(o,e,i){o.exports=i.p+"img/folder.6d3a8b88.svg"},dd89:function(o,e,i){"use strict";i("b316")},ddf0:function(o,e,i){},dffa:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAMAAABG8BK2AAAAsVBMVEUAAAAAAAABAQEKCgoICAgEBAQHBwcEBAQAAAALCwsBAQEDAwMFBQUDAwMDAwMEBAQEBAQBAQENDQ0AAAAHBwcBAQEDAwMEBAQAAAABAQECAgICAgIODg4BAQECAgIGBgYBAQECAgICAgIDAwMEBAQBAQEEBAQCAgICAgIfHx8BAQEKCgoFBQUBAQEBAQECAgICAgIBAQEJCQkLCwsBAQEEBAQDAwMAAAACAgIDAwMAAAA7PaJUAAAAOnRSTlMA+t4VBFwodsAOonlOIX1nY68a8DLQjzrr48e2H7yBRfWynXJwyj6QhwhAGFbn16qZXycLpUlqAsKU+ypwswAAA9RJREFUWMPlWNmWojAQlX1HFBBX3Ntdu13aHv//wyYLIWkL1B7OmZfOE0rqJlV1b6VC7dcNy0vcwPB9I3ATz/onCFXXFqYcSjcypFA2F5qu/hCkqdkyQRCHJNva5gcgntGVBGvxuWt4L4Ios3lm1I4bLaOuaXWj1Yjb2Z/zmfIKijum02W7HilqHiolqtsyfTN2nyfH6ZDNm1NdhVGfmsTBjvMkbfqErDcIlBKHgwGZMNEfobz1iDtG80EOHeJa7618ytrEMxrDxzseNvAsc126F4LS6j+LX79FcEr2o2OPJP+VbPoS9ksvzNEEozivccvBOBOr6A3eqf8q0X08u2BNt4PjUm530i9bN+E8wPHpuIAQY5yjfinIR2MnSVI4T3UW5wbm8z29ZpgvpZmO7FyeXY3lHfNndqdprEajlE+DGx+dQAjm/LveDayAMu663Zs45EvG58H90k00UQpKUD72xHr0de51yNPhRF8EEvJRXFtDf5glaqzLtMxo1nWV2AQw245iosU1oQLgt9MSotFyZdLwH0mUltm7KXq2VS4DGXlcLP2UgHBBf5K6tYJ21CeKClVozFJ7PrL1XL4jBPN14l4IXi3Qq3oRyqp51PuWsuZxvGAY88Tihn4sclGiULWjolJ33u92cs8Q/F1ip84qo2UbYVqMe8jFWIF06THqxp+C8kTuKjEKDmNgEiI5qYAusnA8pVkQY8K/KE8xElaYsCWkAm1PdxyFsTWgyMuaqHOJyTwo0FMqUeru95Q3cpIjj73vIgrYM0iUtaR7aGybm/U7edQY8iARKS7swCfZF9lCLW8Tz02XrurIoZz2M+RzVLtTkV8Cc7SpxZ9milgS+tYxOR5z5BqAKXbKO1OLdKWYNBhTzf+i/y0IEaFTMMQqXTd08KyMOYxAKaUFDDFMuDYiNY4w7rrM7BkyHSDhkH6rA8nvB0vZKEfZc8cB/YAY9A524pOTuUeB2jYo+FwMUJpDbDVX+ILWxbcP77NkBUC4NGGh2OJwHtScQqnz1lcs0DmCQsHLFocZs6W9CXJenncDuBexbMFimISChqNDluiTaA3tYEnfxISsTeGYG4EGAZR0eMBQqhy2ejSN6TE5A/bwgKFbEI67iBpLO5QFRiEw+HG3KTt866FI3XgL7cXDF7YCDsNscxRTJB3sq7reg8ZkO8i02P4TQXPQmJS2SYr23t3HveVQheagTXrUtKnWRuGUg+MKmraqLWT1hrZae30F7XXVZr/61ePpRcipdhGqfi2rfkmsfmV9foFegAt0d6b8l+v86x8Xqn/qqP7h5beNvx6U8A4TgRU+AAAAAElFTkSuQmCC"},e155:function(o,e,i){o.exports=i.p+"img/clipboardList.d73ead14.svg"},e233:function(o,e,i){"use strict";i("f56f")},e294:function(o,e,i){},e376:function(o,e,i){"use strict";i("b49a")},e463:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs30iGAAAAN3RSTlMA+/cHAwr08BJt5NkkFu3fHg7qyC/nUNPOimZGKLy4s6yofEEsoJqPdVo0PTkalITAgMOlYVZKbX+RxgAAA7xJREFUWMOtmOd2ozAQhQWmmF4NphgMxGBwb9H7v9nam42DzUyyAd9/HHQ+SaM7o0J+llsljmIYin+cS2MyXNqc3iVI3HCgq9AvLUbDgWujBcz44cB3uwWcDQ8il7MtoOIOX5MZbYmVfg2wrMdviaVtOerTBH7Ajeq9E7YDHyn0UVX77zgsl5vveOPlhFL9YH5+896UPkk8aPfmZiBQJnNxnhbof+2bnFXuhmt2Bu1IXKxGH717qXD9ZmYNGr6tQP+KEf3TYRmkBksBMXIWRoWXz2zmX1xXyHwrhv6vWKHdl9OA4zsItK+SGDCwZNPeYhZaB2g6dIDYsAN8U+gQVR2H81t2AE+sSUfqnOnNE3YW6apReq/JHM6/vO8Q5QKgDVmXOY+UmrQnEC2S255LHGHAoB9QX2PAkqJiGAYfYYGVrxmSV0q63R2CxdFGOjsjwNUExO1DdTy6itdWWxkkItv/aAv17ktaqyStTiLQyACDyNUTgJesO7sO0KqE9n/Ph3JK7RSRECDqeWfSm6XCdHmOC0RmKQLEwPyaqqWZjeRArrA9cG/MKCDnrI750Y33nu2nMmyyEs7RQgbd4KenoODIZkYxTRDDcngC+GvSyOjflMdOeCLFtCSF/c1PRJspxbQjHtqbgBYRK0OBJbmwaAhj9IxWocAFqVGgoaLAHVp6MnJ5LfBEPAGtmw0G5MtvphzpaE2t0XNpggIrsp6gP7cY8M2gmHJiHikWkKmJACU0hOyZcF7qKxP4qCrBPG0Pw/SJfDIJ4bS4iXLQ+w68zkuoeyFZetFqczdCHOhAn5UFbT0KwDvWGvfkLegEa4fd7SeeAZU4UwFz7QBHyuHzGN05wEvALDWPUEIH6kOv3pEBuo1+4QbWCbV7WJrSBtqg13LXgLxzRQaXday6kZTJsF8uWEbt0dJoG4YsYnY23shLz4d4RvHJi4GbaT+g4SLASOwHZGskhGUvHP74Esl9gfY7xLvlaE8xsxgw4YIZcL09aR0gcIIYti5reQiQCbuurtgBQCd+7fVWAZfZnfXlyWeOgMR7tRGmZZ5vHQEBiH6S+DrztVFwBFbzYUVx7t12HO72dATc0ZRgdb0Ijdf5lP03PoLKnV/bGF9Pt5ud3jFIuvocT1zd/vo1R3CZlb+/jNqvQ89r3765WJIiJAVHvhNvbh4ajLOn2uc+1BO3MGEermICvHAOkZU+DFAdDOQOzGvfsbmQbXkm58hg1UILKPUC4oVc98hwWbk/0cWrdFsJNPIC8Wb89iHVIj/qD7BjzjdOJ9y+AAAAAElFTkSuQmCC"},e508:function(o,e,i){"use strict";i("ec0f")},e759c:function(o,e,i){"use strict";i("ab5e")},e784:function(o,e,i){},e802:function(o,e,i){o.exports=i.p+"img/stream.6338edbb.svg"},e8ae:function(o,e,i){},ea8b:function(o,e,i){"use strict";i("2cfe")},eaba:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAt1BMVEUAAAAJCQkBAQEBAQEAAAAFBQUBAQEMDAwgICADAwMFBQUICAgKCgoMDAwXFxcFBQUCAgIEBAQPDw8VFRUPDw8yMjIDAwMDAwMGBgYHBwcNDQ0SEhITExMCAgIDAwMICAgjIyMCAgIFBQUFBQUGBgYHBwcNDQ0CAgIDAwMCAgICAgIFBQULCwsCAgIDAwMFBQUGBgYGBgYICAgNDQ0ICAgHBwcJCQkQEBAFBQUNDQ0LCwsKCgoAAAAVYtoZAAAAPHRSTlMAHPv427ffLgjWql5bPRSg7bsYDwsD5MCnhjgzIOavfQXyrZuBairY09DGs0bqzJKOcW47iXlmJZZUT1Yx0+xAAAADDklEQVRYw+2Y2XaqMBSGA4oVRBBEQMQRnFqnWq0d8v7PdY6l+wiBNImw1rnpf6eGLzt7yhb0q19VL2fxGfveuvFXa8+P3xdOGdokOCtDGacku8o5aN6J6+r+Fhdoq+ndO3BN/amGKao96cJWtk3AFSPNtpjzjipmSD1O+HnhXsZMyXuJlzfQMJe0AR8vUDCnlIDLvifMLYXDxnCGBaSFzPjusZD2rFg/Y0E9M/JZFQUu2z/Wm4mFZf5Uha2aOLDWovMMBd8hxWAYWJ2JjpYv2OFSrXfwTdO6qrrEvjOHFuIOybNeF7YhtfsuTtQ5bCTDvrRGmVUdWqDHJM+/oETvamLeHJx9yKwbU1q+RfDc287Hr372hkBSZq1VfOaHIQEcNW+A9dX7H5SKGj4UAnWyq/ZTP0ZXiy+pHpf2t6wXAvu0MgX/Lu3bZ6lObp1XLmni1I+vMsaNMOXwXaaLFQIfcyXQTeW8nM3gbmb1YyFQzWX1nAiCdTPRzqxWC4ENTGq1QaATvurQg89hZnWDE4gtyIfJt4PPsPhlKgYEvU2+S2P9nXFg8xzfB+y8EGUeJTv0Ig7gCheoRZT52k5cqGadzUobsgYMD77YGZCW7LTRio4cEM9HX3HuKhizE7tPvYHCfwZOP5KQyETVM5sDHCWJSUw8OdiRjuFrX9jaJDtt4faIkwPDZctoX45FNuxkFNqAPe6R4hvL4boCIilJQQ94kEI514xpg2F26D8l9gEPL78c2oxzvG2bNoho2ZS5WtRap5LDRujyhnPSqMOInr1wd4Edd7LZ8aEIzSJdYnj1iDBNZ67YKIL0iocl1IzKjnPlB06VPnBClQpJPqKf1Ttws+CWYUgyRXi+hJhaiPzxeUAcGoy4eS+ISwuf87xgH1P2qcaR0PsQcas3n7J4q3mPnwfTGl1TM0CoIiC8xKgOOPQ/Yc4rD6y5ynkA1t0JVE6mt1rW68uVZ47hVVUJ4GiAeo5hS5JtOBDXMsBRJnnLA2fAKw8E+yoDgn2VAcG+yoDAqwwI561IxixaoF/9J/0BY7A5D9cSe1UAAAAASUVORK5CYII="},eac4:function(o,e,i){},eba4:function(o,e,i){"use strict";i("4599")},ec0f:function(o,e,i){},edaa:function(o,e,i){"use strict";i("c871")},ee5c:function(o,e,i){o.exports=i.p+"img/users.22e09537.svg"},ef69:function(o,e,i){"use strict";i("280a")},f063:function(o,e,i){"use strict";i("c0f6")},f0d1:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAh1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD3YishAAAALHRSTlMAHWYM844W+fbOXRF7rtQHbBPl3NiGVcSrdjLqx7M6JebtiVG2PDmSZUW4lkeFA2IAAAKHSURBVFjDpZfterIwDIZTOlS+XgTlQ1FEdLp34/yPb6R0VCjYcvX54bVR7tCmSdrAnEiaBE61aZpN5QR1SmCRPu1dM9Lu+alLewdOSzYOng5efzSz+qiVJrZX/u46s90HoQCUPNw6W/PH1+1b/HLidH6jwxF6y7mN02Wed7vZV340NRr5VbcOd463u3Gfwoyo333BnhwNAzZ4frvj5MxeCsIJ/htHNhYoZG3wvbtsgX0/PoJSx5jNYXL9e62AJfsJP7iMX4GWVsyCO9h/9G6snTAkxt16jYcT+u8I2jqiJ08v8YtT+oIFspDoo9q74v7DIp0xL/4yq8YVLawYBL2W8Ang3z4slI9f7aZwwPyhGsz/w5fYaFq02AFQO70JrNhWuYMp7Fj9w/yP1Py/rlL0mx1hfSh5EOd6POrZP8oxoPkKbtp8c++fpRj9AATnRbX55ke4EddAmJ1Mlxc+QGXt/ykk7W+tzYuA595LWCFxtXlrXAMCcNrfBwjRZ7E+3XR4KNsnDlTME71Ch725VfOd/2PAzKajzEYLah4ohibgyLC2cgtKHkLGygaEBZmXDchLEBYUPF+C7MRevszLTpS2MXqxIPPyNsqBFDk6vAikRDplIkfNi1CWkwktqHmRTHI6owUVL9JZKijcgpLnBWWupHmOiuclbbaoRo6KX7GiOl/WvUxUcVmirPODpaBT54hF5nlxsJgfbZAYHK5Gx3vhDXLYWnzBsAyvOJnxJcv0mmd60TS86uZyib0vu2ybXffz0LDhULQ8hb+abnkK0fIom6503HSlf01XdtFv+0pCw5CS0rX7tq9QetlL3jWeiWfa+mqqtPdjem+XSkxu/2Ns/2MnSObb/1/3C6xgJU1VjAAAAABJRU5ErkJggg=="},f163:function(o,e,i){},f3ed:function(o,e,i){"use strict";i("60ff")},f4f7:function(o,e,i){"use strict";i("0aba")},f56f:function(o,e,i){},f86d:function(o,e,i){"use strict";i("a71c")},f967:function(o,e,i){},f9b3:function(o,e,i){o.exports=i.p+"img/info.17861ffe.svg"},f9d9:function(o,e,i){o.exports=i.p+"img/lapiz.912bdd59.svg"},fbb8:function(o,e,i){},fbca:function(o,e,i){o.exports=i.p+"img/cog.9f07a3df.svg"},fd3d:function(o,e,i){},fe50:function(o,e,i){o.exports=i.p+"img/fireSolid.c5747f49.svg"},ff1c:function(o,e,i){o.exports=i.p+"img/comments.1f301d23.svg"}});
//# sourceMappingURL=app.8245356f.js.map