(function(o){function e(e){for(var a,s,r=e[0],c=e[1],d=e[2],l=0,v=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&v.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(o[a]=c[a]);u&&u(e);while(v.length)v.shift()();return t.push.apply(t,d||[]),i()}function i(){for(var o,e=0;e<t.length;e++){for(var i=t[e],a=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(a=!1)}a&&(t.splice(e--,1),o=s(s.s=i[0]))}return o}var a={},n={app:0},t=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return o[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=o,s.c=a,s.d=function(o,e,i){s.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:i})},s.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,e){if(1&e&&(o=s(o)),8&e)return o;if(4&e&&"object"===typeof o&&o&&o.__esModule)return o;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var a in o)s.d(i,a,function(e){return o[e]}.bind(null,a));return i},s.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return s.d(e,"a",e),e},s.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},s.p="/pepepe/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var u=c;t.push([0,"chunk-vendors"]),i()})({0:function(o,e,i){o.exports=i("56d7")},"02b9":function(o,e,i){},"034f":function(o,e,i){"use strict";i("85ec")},"052b":function(o,e,i){"use strict";i("5528")},"054e":function(o,e,i){},"064c":function(o,e,i){"use strict";i("2938")},1070:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAApVBMVEUAAADM28LI2L3h5tzj6d7R3srn7eTL2cPT38vW4s7g6uDF1bvH173C07fa4NTO3cTk7N7W4tPK2sDa5NTi7OLo8Oja5NXJ2b7M28LD1bfk7ODZ5dLY49DR38jd59fV4czT4MvP3sbP3cXK2r/H2LzW4s7S38rS38nQ3sfL2sHF1rna4tL////5+/j9/v3u8+v3+fXw9O31+PLy9u/7/Pr4+vfr8egF2h3MAAAALHRSTlMAcFEYHCQVFQUcDxkRDAh8ICBjJhEMAVc/KyjQx5XwrqiJg11Ku6Kcj2o4NHigeIkAAAKNSURBVGje3dl9U+IwEAbwR0opUKjg8S6e53nvV+RFuO//0W4SZXYYzG5owo74/COObX/QNLuGwDeDtMBBmmkDMZNkcKTZiyN8gpBWqNAIPyzie+xXJGYQEs60FU5pokpGOCGVH8ws4ND4KRCUITxSV5hbfQQnDygi0SbxX0RJ54yfg5IpGEAi/iG+Ej4/wgvT5ckBzTq0513ezWrD5FIuK5f3+OlCyKV8EP7SVxUzPqVflhWzOF4NUIuJicgJR/xb1enva+U6oyN9kltv42fA7fJV7oTbVXcgm6U567uX8dUcuiLk6OHNHcgSVrn3NdZ4IkQKIVibk79AyvWLUQ15Ve78DA4ZMAgpssEgXaQMslceJOMZPJLxCJ7NRa7dlZSMimNCypXjuN9kBCC8ckNGIIKNudQNY4QipIwZIxQhpfaWsUEUhAr55OCQRzIiIKRMQRmTEQ3B9lD5ZusuIiOlTU4GFfZoSPmaLkwm1KNiIHR+uV2Y65qWXTMv7P3bRUHIeAKs8m++fBmPpv0RByHDKCb7i+ekBCFk0JNMz+6UXvJILiBk2Mztb/uWPCGFRSYcQoYjY59S30IiIFtr8E1rzSNDZkxoosstPmDgyWDyqzQHC0jOIAtrCPlhFR6puxAyhNzbOepEOuzt2lGx4jO3SpUx2a2o7Eq5taNfMsiMWTpM4ZfP7qVDKq1P/gCnKNztGrmQ3WPNNw9HiOYSu62w+qXUz4dk0M0MZ0oC7QxxlgzEeRk/Iwh5r9/eJW8Vsg8Tna2Nhso0bCE8cs1KFYxoSiFumIano7AjlClU57bCplDxrnY9ejqdsKPSMAY67bWvs3XZ0+l57a7OfuJMaYs3KZT+NRimIxym793k/gPFdL6ma6aH6QAAAABJRU5ErkJggg=="},1333:function(o,e,i){},"1a62":function(o,e,i){"use strict";i("4733")},"1b61":function(o,e,i){"use strict";i("66e2")},"1e6e":function(o,e,i){},"1eda":function(o,e,i){},"214a":function(o,e,i){},2205:function(o,e,i){},2323:function(o,e,i){},2368:function(o,e,i){"use strict";i("1e6e")},2938:function(o,e,i){},"2c8c":function(o,e,i){},"310a":function(o,e,i){"use strict";i("1eda")},3167:function(o,e,i){},3261:function(o,e,i){},"3a9d":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAAeFBMVEUAAAAXEAoUDQhlRSs0JBYrHRJLMh9FLhxeQCcaEgtiQykyIhUlGQ85JhgsHhJTOCIpGxEgFg1ZPCU/KhpWOSN0TzF6UzQvIBNrSS14UjNPNSFjRClyTjF8VTVcPiZnRyxuSy93UTIDAgEKBwQRDAcPCgYIBQMGBAI5vVJyAAAAInRSTlMA/v6A/v79/aX+kP7+/f7d/v6+/c00Ef5iHfGLPQewd1IkgWmI6gAAAZ1JREFUaN7t1eluqzAQhuGxwxInmDVrl7N8A+b+7/AcqdCChJrUxZVazfNrBBIvBgtICCGEEOK7ecpSGtWlUtmB1pc6RYMccAyUtLq018O0Rx8XRe6Qh4v8YUT0n0V/GU61i6r05B1pen4ZGPZliHgRoAvfSI5hUK9vZbvk0Bhw4RmJMewAg4zedSyhr6EjdDRogkcoRRU+smUdPrLh9isinUS+IHKGCRdxw0apVTp+VvK1Iwd2NNfBjtfaTT2evCNHjZqmLhgPWJ6rTr4RylDRVImOlv8nJXlHCu4TelM7WFr1nYy3XtBo10JRgMjJoLPX8QmBLyEidKzQqygpHqxx0BtaOTJqOsCxA/hMFCAySGKjTZZeyTPi1Vzye91IxG6BeVo1Uugl59lKQpHIRPocPmI5Dh/JYcJHYiga/Y32U1ESIhJjrt0EiGyNmtmvvJJlEpGIRH5YJP9QpCUvEZjuVTtDXrYOj/evOic/Gpruk3D/i/wUDL2jO1hGTr4sA6xuaR1Qkb+D4R43uTaiT9k10S324ZmEEEIIIb6xf4x8QD01P3dKAAAAAElFTkSuQmCC"},"3ec9":function(o,e,i){"use strict";i("5365")},"416c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAQlBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACO4fbyAAAAFXRSTlMA90xVsh5Nf+Hgfh+8RogQ1qlCGu1joRCFAAAAwklEQVRYw+3WSw7CMBAD0EzbpIU0tHzm/ldlA7JYMVK8yMI+wJOc7yRFGTPHFE47ImB5WTT3ZwSczUOa+2VKMdBu/9uW3e2aouAcWJjNl0wE64LCFHA1FO4EUZgIZhTuBlGYA6IwCcQOc0AU5oAoTAJRmAGi8JqI4GPzPQ8Ncivj2o18bL4He+SrR34csNMjP7Cf0iN/Uh3fKKE0fxThD0vOHecKKnMGzsksfmgFChQoUKBAgQK5YDvPlqipNSmK8pM3R4cJW1AgzFsAAAAASUVORK5CYII="},"429a":function(o,e,i){"use strict";i("c49c")},4675:function(o,e,i){"use strict";i("d5bb")},4733:function(o,e,i){},"4e77":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAMAAAAPkIrYAAABjFBMVEUAAAA+MzgAAAAiHBwgGBg+OzsiIh4eGxlEPj8WFBMhHh0nIyRAPT1ORkYfGhYjHhwfGhoeGRgeGRkgGxkmHx8oIiMoJCQlIyEpJyUrJyQpKCkiICAqJiQwKyscFxggHR0dFxYhHhwhHBwgGxoeGxsmISEdGRkjHh4dGhkgHRweGhsjHR4mJCE+PTlST08rKCgbFhYjGRogGxocGBcgHhwpJiUiHRwiHxwgGRkYFBMkHx8uKCcfHBoqJycsKSkdGRchGx0hHx9fX18kHRsaFRQmISIlHx4cGBckHB4sJSYhHRwdGRkhHx0cFhgiIB8cGhoeGxkhFxYdFxQaFxYZFhYoJSYaFxQaFxQVERFXUFckGBoiGRggGRkiGhogGRcnGRsjFxgjGBciHBwjGxshHBolGRclGBkhGBolGxkmFxkjGhckGBUhGxgkGhUlFxUfGBkhFxggGBQlFxcjGhkfGhkfGxciGRYgGRYdFxUeGhMgGhslFxgiGxUiFxYdGRkhGhEfFxccGBMhFxElHR4/VDeRAAAAWnRSTlMABBD+/AoH/h7JokYZD/bx5uHcya1tZ2BSOzIpJB/7+ffr2NPMxKqnl5WOiII1Fhb9+PPx0c66sbGgjnVvW1dLPy0I+unh0MbFmYN9eXBqYFLo2Na1nldWOyk6oaQ9AAADUElEQVRYw+3VV1MaURTA8SUgEFAporRg75qYbm/pvdd7t/cGuyu9aEzyxXNXTSZPEW+cPGT2/8rwmzl7OAvh5eXl5fX/5evNF87FuZJLz04mnv41dOVSev5RfPjgILTxV07fpVdPppKjgiCIoepYFtvpCWcWl5P9FknaQFU7nepyH5YT7N15Pj1xo9qs0jZggSxLxWJgA8fJrkcm7lmKYDa/NmibHR14rSFr7PIZF9aXG5q9eU8URZ7nBdFsNKhrK+uPr3GSpC73nGVh+c35h/FhyzRNZPl5wRTpWGormgrsc1ItNNj9wjJPpxKjlEkqUFX1I0qwErPRvpcPSNvmoJnY7ca5U8g8W3nT7xeApOs6B9DWBDRiKzG3EwwvxPwKtG26utpzqrMU3ZiZ6O/ojkNT7raKbY0RBN7vv7+W9RE7KRJSQlmH9Kkj5l5EJm/4G1+bnXqdtqG7ekNiGPB9eHwBba3nxThNwzIA5bKZPGWLwcWRg5ZFIwtRkKQAsiRJBoFHz/Po48LadWhDCFmEiZEg8efCm5H4VafebB5RFPqOrqvXpgYLBGr7Ngl1eGIFhrp47rknA3fRszIViqLKFCVevz0YPlrs+n3yEMgsCgDAJfNd/TyXNlfjDZ5CCVZs5tXxunZnR0QFMIyGKJQd8XV7NdmFByPfeXJsJnOy+K2plkUqMqNpMnBDI3ZfOJ26ORc9ka48G/O7FtB+Wsn8GV8xP8fIRUb8vNhSFCCfUMKMD+99nH5YFUVBoCB6VDJgAWDt0SEsqncx1ux0dJWROY7d2+MMg1Na45dwqOh04Nu3L186KsPsGaVSyTBqNbLyHoe68K6xbyCryCCrdGzBSn8ay7po7ZdKxaKOLG3PzajR1ZsFPItEliFJrqW1223XCs0RuJZRQvetqqrWZjkUGvEjplV1nJqOjlmV2m0OutEDS7hW06lRVOCwXuPYY6oxR2BapuPogZXVqwc0hO6EkLyxjWlNmk797kI4uBir0CQLACQrt3oxrQGRnxj0oUsaeltBxw2AcnWewLX4VJQ46sO4SCqKYl3fxrVur/06va1bvEWSh5NLBGa//9tkpyuVSmjeR5xHu9OhVvwTcT59fjyMtnhOBV9mCC8vLy+vf9UP6nkGH0hHtzsAAAAASUVORK5CYII="},"4fac":function(o,e,i){},"4fc3":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAApVBMVEUAAAAFBQUKCgozMzMzMzMoKCgsLCw4ODgsLCwxMTEVFRUzMzM7Ozs2NjY0NDQzMzNMTEw1NTUlJSUxMTEvLy8xMTExMTEtLS0VFRUcHBwuLi4oKCgxMTEuLi4rKyswMDAwMDArKystLS0uLi4xMTEuLi4kJCQxMTEwMDArKysqKioxMTEuLi4rKys0NDQsLCwkJCQuLi4vLy8uLi42NjYwMDAzMzMGZa9aAAAANnRSTlMABgFL7bBzQ9VhGOAzJeq3Coku+Lr16sIMCZhO/JRC5qV2KBDKehnt2bqvoIRWPB8K0bWOjGo12immAAAA/ElEQVRIx+3Sy1LCMBiG4STUoiIeGmKVJG1paUXOnv77vzRjNlJy0AwLGKbvpjNf55ksEnSG4ZJfOes1FlHKnAohaHRrFgmWrgxRFfCTqG8sZepnHpM9sqKaTKv2nHHOE/V5AWCTtiESdKPn1vz0SimVBCWPYBg8t5NUbWNNDIMv/iLafAUTmGXBBMY4mLw1weTy+kSIvkon8T8YN6F1OTRbL8BNQAws5WAnvo5NiknsTlILmW6QJ1xYyN29j5DPcPLQkY4cQubBhHz8j4y2vwNnAGnlJQtF6p1hKwXQZdZ3F+cA70O0U7OcMRZ5Ymwgk72DN+uet36JUZfqG2Wjeg1GwVSoAAAAAElFTkSuQmCC"},5365:function(o,e,i){},5528:function(o,e,i){},"559e":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAqCAMAAAD26OlUAAAAtFBMVEUAAAAAAAAAAAAAAAAaGhoCAgIDAwMBAQEQEBAAAAABAQEBAQECAgIAAAABAQEBAQECAgIEBAQBAQEAAAAFBQUDAwMDAwMAAAAAAAACAgIDAwMFBQUGBgYAAAABAQEBAQEDAwMDAwMICAgJCQkMDAwBAQEBAQEBAQECAgIBAQECAgICAgICAgIGBgYGBgYNDQ0EBAQCAgIEBAQBAQEBAQEDAwMCAgIDAwMEBAQFBQUQEBAAAAAlv8O7AAAAO3RSTlMAvz/5B4MexQP7YBe0n+vmf03b2F0SC+DPqVlRLfbKo3lENiEP89PAu66Ja2dJOjIncUfthpmTjT4pJj+7kzoAAAIXSURBVDjLnZTnlrIwEIbHDaEI0lFAQFGkWrBty/3f16cU0Q3sd86+vybwnMnUwJ/FWGxZshbzOyVqOLN1RdHtDGviILa/2D5S7ESSEltBvn3Z92JePhPid9ezpgwztTz3PRZmuUdzZkCSgoUnsUVCAvMHxqsbRW2xDlWVjcq/pJqTZA49mickfy4AJtJ+IEGJ4O50JOkKBrRKybG1T7r9RhNtGd9s/VRbUwdtae7NGTfWFjnTyhijCUNzIzJrSGaCKiuS5JDu+JKQBxnKUgQA2mZBOSxFdtKRzGKjAcAHcul7J2xN1mm46APA4gyWjo/U5KiuGmtwFhxkh6e5mhw1VeMd+QAawjRXk2L56BzSYCuMKa7WsstxLGxhKcz7udFTt+bCErC/+y8HOx93HmnuxeNLjOKC5toYn7NmwDVors3akzO+qZZ5AFfv4/hM9sDi9HV9jALpAKZOc7DWOQsgR82mfSmkIikOTJTfU2+nR/PJnQyprbhNz66ax/Op2ZybnDVQOp2lqJ7wyiV/VbjJUpsC7RCN250pqn0rLR56VLQ7A6ERhzCoMDYefwthtB/i9iOh6E4qST/7uc+UqM+lx4Trf3s4gl8DV88ypiqzxvJZhR9yOcId1y/Y8fbJBUrlZUaMq+mJ9xdX9MyrQWaXr/6HCwc+kmMuTblYRn6AVzAkcadmgaEoRpCpOxF+FR+J399iRPXoHwT7P6mwTTR1AAAAAElFTkSuQmCC"},"56b2":function(o,e,i){},"56d7":function(o,e,i){"use strict";i.r(e);i("caad"),i("2532"),i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"navBar"}},[1==o.usuarioLogeado?a("router-link",{attrs:{to:"/actividadesVirtuales2021"}},[a("div",{staticClass:"botonNav hoverNegro",attrs:{id:"navActividadesVirtuales"}},[o._v(" Actividades virtuales ")])]):o._e(),a("div",{attrs:{id:"bloqueProyectos"}},[1==o.usuarioLogeado?a("router-link",{attrs:{to:"/proyectos"}},[a("div",{staticClass:"botonNav hoverNegro",attrs:{id:"navProyectos"}},[o._v("Proyectos")])]):o._e(),a("div",{staticClass:"contenedorHijos",attrs:{id:"enlacesHijosProyectos"}},[1==o.usuarioLogeado?a("router-link",{attrs:{to:"/trabajos"}},[a("div",{staticClass:"botonNav hoverNegro",attrs:{id:"navProyectos"}},[o._v("Buscar trabajos")])]):o._e()],1)],1),a("router-link",{attrs:{to:"/atlas"}},[a("div",{staticClass:"botonNav hoverNegro",attrs:{id:"navAtlas"}},[o._v("Atlas de conocimientos")])]),o.usuarioAdministrador||o.usuarioSuperadministrador?a("router-link",{attrs:{to:"/personas"}},[a("div",{staticClass:"botonNav hoverNegro",attrs:{id:"navActividadesVirtuales"}},[o._v("Personas")])]):o._e(),o.usuarioSuperadministrador?a("router-link",{attrs:{to:"/registro",id:"navRegistro"}},[a("div",{staticClass:"botonNav hoverNegro"},[o._v("Registrar usuario")])]):o._e(),a("div",{attrs:{id:"botonesNavDerecha"}},[o.usuarioLogeado?a("div",{directives:[{name:"show",rawName:"v-show",value:o.yo.notificaciones.length>0||o.yo.notificacionesActividadForos.length>0,expression:"\n          yo.notificaciones.length > 0 ||\n          yo.notificacionesActividadForos.length > 0\n        "}],attrs:{id:"bloqueNotificaciones"}},[a("span",{attrs:{id:"numeroNotificaciones"}},[o._v(o._s(o.yo.notificaciones.length+o.yo.notificacionesActividadForos.length))]),a("img",{attrs:{src:i("d1f3"),alt:"Notificaciones",title:o.yo.notificaciones.length+"Notificaciones",id:"imagenCampanita"},on:{click:function(e){o.mostrandoNotificaciones=!o.mostrandoNotificaciones}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoNotificaciones,expression:"mostrandoNotificaciones"}],attrs:{id:"contenedorNotificaciones"}},[o._l(o.yo.notificacionesActividadForos,(function(o){return a("notificacion-actividad-foros",{key:o.id,attrs:{estaNotificacion:o}})})),o._l(o.notificacionesOrdenadas,(function(o){return a("notificacion",{key:o.id,attrs:{estaNotificacion:o}})}))],2)]):o._e(),o.logeado?[a("div",{staticClass:"botonNav navLogin hoverNegro",attrs:{id:"navLogged"},on:{click:function(e){o.accionesLogeado=!o.accionesLogeado},mouseleave:function(e){o.accionesLogeado=!1}}},[o._v(" "+o._s(o.username)+" "),o.accionesLogeado?a("div",{attrs:{id:"botonesLogeado"}},[a("router-link",{attrs:{to:"/miperfil"}},[a("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"Perfil"}},[o._v("Perfil")])]),a("div",{staticClass:"botonesLogeado hoverNegro",attrs:{id:"desconexion"},on:{click:o.deslogeo}},[o._v(" Desconexion ")])],1):o._e()])]:[a("router-link",{staticClass:"botonNav navLogin hoverNegro",attrs:{to:"/login",id:"navLogin"}},[a("div",[o._v("Login")])])]],2)],1),a("router-view",{attrs:{id:"visorRouter"}},[o._v("asd")])],1)},t=[],s=(i("a15b"),i("d81d"),i("fb6a"),i("45fc"),i("d3b7"),i("ac1f"),i("25f0"),i("5319"),i("1276"),i("8785")),r=i("9530"),c=i.n(r),d=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"notificacion",on:{click:o.visitar}},[i("div",{attrs:{id:"info"}},[o._v(o._s(o.fechaFormateada))]),i("img",{attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaNotificacion.causante.id,alt:"",id:"caritaCausante"}}),i("div",{attrs:{id:"texto"},domProps:{innerHTML:o._s(o.mensaje)}})])},u=[];i("c740"),i("c975"),i("a434");function l(){var o=Object(s["a"])(["\n          mutation($idNotificacion: ID!) {\n            eliminarNotificacion(idNotificacion: $idNotificacion)\n          }\n        "]);return l=function(){return o},o}var v={name:"Notificacion",props:{estaNotificacion:{type:Object,default:function(){return{}}}},methods:{visitar:function(){var o=this,e="/";"actividadEstudiantil"==this.estaNotificacion.elementoTarget.tipo&&(e+="actividad/"+this.estaNotificacion.elementoTarget.id),this.eliminarse(),this.$router.push(e).catch((function(e){console.log("Error de navegación: ".concat(e.message.substr(0,28))),"Avoided redundant navigation"==e.message.substr(0,28)&&(console.log("Refreshing"),o.$store.commit("refreshActividadEspecifica"))}))},eliminarse:function(){var o=this.estaNotificacion.id;console.log("Eliminandose: ".concat(o)),this.$apollo.mutate({mutation:c()(l()),variables:{idNotificacion:o},update:function(e,i){var a=i.data.eliminarNotificacion;if(a){var n=e.readQuery({query:x,variables:{idNotificacion:o}}),t=JSON.parse(JSON.stringify(n)),s=t.yo.notificaciones.findIndex((function(e){return e.id==o}));s>-1&&t.yo.notificaciones.splice(s,1),e.writeQuery({query:x,variables:{idNotificacion:o},data:t})}}})}},computed:{mensaje:function(){var o="";return"actividadEstudiantil"==this.estaNotificacion.elementoTarget.tipo&&(this.estaNotificacion.elementoTarget.nombre?o+="Tienes una nueva respuesta en la actividad <span style='color: white' class='textoTarget'>"+this.estaNotificacion.elementoTarget.nombre+"</span>":o+="Tienes una nueva respuesta en una actividad"),o},fechaFormateada:function(){var o=new Date(this.estaNotificacion.fecha).toString(),e=o.indexOf("("),i=o.substr(0,e),a=i.indexOf("GMT");return a>-1&&(i=i.substr(0,a)),i}}},p=v,m=(i("7cdb"),i("2877")),h=Object(m["a"])(p,d,u,!1,null,"139eb77a",null),f=h.exports,A=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"notificacionActividadForos",on:{click:o.visitar}},[a("img",{attrs:{src:i("96cc"),alt:"Conversación",id:"iconoConversacion"}}),a("div",{attrs:{id:"texto"},domProps:{innerHTML:o._s(o.mensaje)}})])},b=[];function g(){var o=Object(s["a"])(["\n          mutation($idParent: ID!) {\n            eliminarNotificacionActividadForos(\n              idParent: $idParent\n            )\n          }\n        "]);return g=function(){return o},o}var N={name:"NotificacionActividadForos",props:{estaNotificacion:{type:Object,default:function(){return{}}}},methods:{visitar:function(){var o="/";o+=this.estaNotificacion.tipoParent+"/"+this.estaNotificacion.idParent,this.eliminarse(),this.$router.push(o).catch((function(o){console.log("Error de navegación: ".concat(o.message.substr(0,28))),"Avoided redundant navigation"==o.message.substr(0,28)&&console.log("Error por navegación")}))},eliminarse:function(){var o=this.estaNotificacion.idParent;console.log("Eliminandose: ".concat(o)),this.$apollo.mutate({mutation:c()(g()),variables:{idParent:o},update:function(e,i){var a=i.data.eliminarNotificacionActividadForos;if(a){var n=e.readQuery({query:x}),t=JSON.parse(JSON.stringify(n)),s=t.yo.notificacionesActividadForos.findIndex((function(e){return e.idParent==o}));s>-1&&t.yo.notificacionesActividadForos.splice(s,1),e.writeQuery({query:x,data:t})}}})}},computed:{mensaje:function(){var o=this.estaNotificacion.tipoParent;"nodoConocimiento"==o&&(o="nodo de conocimiento");var e="<span style='color:red'>"+o+"</span>",i="Hay nuevas respuestas en los foros del "+e+" "+this.estaNotificacion.nombreParent;return i}}},y=N,P=(i("c52b"),Object(m["a"])(y,A,b,!1,null,"dc862d82",null)),C=P.exports;function E(){var o=Object(s["a"])(["\n          subscription {\n            nuevaNotificacion {\n              id\n              fecha\n              texto\n              elementoTarget {\n                tipo\n                id\n                nombre\n              }\n              causante {\n                id\n                tipo\n              }\n            }\n          }\n        "]);return E=function(){return o},o}function w(){var o=Object(s["a"])(["\n  query {\n    yo {\n      id\n      nombres\n      apellidos\n      notificaciones {\n        id\n        fecha\n        texto\n        elementoTarget {\n          tipo\n          id\n          nombre\n        }\n        causante {\n          id\n          tipo\n        }\n      }\n      notificacionesActividadForos {\n        idParent\n        tipoParent\n        numeroRespuestasNuevas\n        nombreParent\n      }\n      permisos\n    }\n  }\n"]);return w=function(){return o},o}var x=c()(w());function j(o){var e=o.split(".")[1],i=e.replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(i).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}var D={name:"App",apollo:{yo:{query:x,fetchPolicy:"network-only",skip:function(){return!this.usuarioLogeado},subscribeToMore:{document:c()(E()),updateQuery:function(o,e){var i=e.subscriptionData.data;return o.yo.notificaciones.some((function(o){return o.id==i.nuevaNotificacion.id}))||o.yo.notificaciones.push(i.nuevaNotificacion),o},skip:function(){return!this.usuarioLogeado}}}},components:{Notificacion:f,NotificacionActividadForos:C},data:function(){return{accionesLogeado:!1,mostrandoNotificaciones:!1,yo:{notificaciones:[],notificacionesActividadForos:[]}}},computed:{username:function(){return this.$store.state.usuario.username},logeado:function(){return void 0!=this.username&&null!=this.username&&this.username.length>2},colorBlancoAccionLogeado:function(){return this.accionesLogeado?{backgroundColor:"white"}:{}},notificacionesOrdenadas:function(){var o=this.yo.notificaciones;return o.sort((function(o,e){return new Date(e.fecha)-new Date(o.fecha)}))}},methods:{deslogeo:function(){this.$store.commit("deslogearse"),this.$router.push("/login")}},mounted:function(){var o=localStorage.getItem("token");if(o){var e=j(o),i=parseInt(Date.now()/1e3);i<e.exp?this.$store.commit("logearse",o):this.$store.commit("deslogearse")}else console.log("")}},R=D,S=(i("034f"),i("ea17"),Object(m["a"])(R,n,t,!1,null,"47b8bd9c",null)),T=S.exports,$=i("2f62"),k=(i("99af"),i("5530")),I=i("74ca"),O=i("2bf2"),G=i("478e"),M=i("522d");function _(){var o=Object(s["a"])(["\n    \n    enum TiposUsuario{\n        USUARIO,\n        ADMINISTRADOR,\n        SUPERADMINSTRADOR\n    }\n    \n    type Usuario{\n        username:String,\n        permisos: TiposUsuario\n     }\n\n    type Mutations{ \n        setUsuario(username: String, permisos: TiposUsuario):Usuario\n    }\n"]);return _=function(){return o},o}var B=c()(_()),U={},q=i("d634"),F=i("c0cc"),z=i("4518"),Q=i("c2c3");a["a"].use(M["a"]);var V=new O["a"],L=function(){return localStorage.getItem("token")},J="https://pe-pe-pe.herokuapp.com",K="wss://"+J.substr(7)+"/subscripciones",H=Object(G["a"])({uri:J+"/graphql"}),Y=new F["a"]({uri:K,options:{reconnect:!0,connectionParams:{headers:{Authorization:"Bearer ".concat(L())}}}}),Z=Object(Q["a"])((function(o,e){var i=e.headers;return{headers:Object(k["a"])(Object(k["a"])({},i),{},{authorization:L()})}})),W=Z.concat(H),X=Object(q["d"])((function(o){var e=o.query,i=Object(z["l"])(e);return"OperationDefinition"===i.kind&&"subscription"===i.operation}),Y,W),oo=new I["a"]({link:X,cache:V,typeDefs:B,resolvers:U,connectToDevTools:!0}),eo=new M["a"]({defaultClient:oo});function io(o){var e=o.split(".")[1],i=e.replace(/-/g,"+").replace(/_/g,"/"),a=decodeURIComponent(atob(i).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(a)}a["a"].use($["a"]);var ao=new $["a"].Store({state:{usuario:{username:null,permisos:[],id:null,atlas:{centroVista:null}},token:null,refreshActividadEspecifica:0},mutations:{logearse:function(o,e){var i=io(e);o.token=e,o.usuario.username=i.username,o.usuario.permisos=i.permisos,o.usuario.id=i.id;var a=JSON.stringify(o.usuario);localStorage.setItem("pepepe_usuario",a),localStorage.setItem("token",e)},deslogearse:function(o){localStorage.clear(),o.usuario.username=null,o.usuario.permisos=null,o.usuario.id=null,o.token=null,oo.cache.data.clear()},refreshActividadEspecifica:function(o){o.refreshActividadEspecifica++},setCentroVistaAtlas:function(o,e){o.usuario.atlas.centroVista=e}}}),no=i("8c4f"),to=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"atlasConocimiento",on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:(e.stopPropagation(),void(o.panningVista=!0))},click:[function(e){o.idNodoMenuCx="-1"},function(e){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;o.idNodoSeleccionado="-1"}],mousemove:function(e){return o.panVista(e)},mouseup:function(e){o.panningVista=!1},dblclick:function(e){return e.ctrlKey&&e.shiftKey?e.target!==e.currentTarget?null:(e.stopPropagation(),o.crearNodo(e)):null},touchmove:function(e){return e.preventDefault(),e.stopPropagation(),o.movimientoMobile(e)},touchstart:o.iniciaMovimientoTouch}},[i("div",{attrs:{id:"contenedorNodos"}},[o.todosNodos.length>1?i("canvases",{attrs:{todosNodos:o.todosNodos,nodoSeleccionado:o.nodoSeleccionado,centroVista:o.centroVista}}):o._e(),o._l(o.todosNodos,(function(e){return i("nodo-conocimiento",{key:e.id,attrs:{nodoSeleccionado:o.nodoSeleccionado,todosNodos:o.todosNodos,idNodoMenuCx:o.idNodoMenuCx,usuarioAdministradorAtlas:o.usuarioAdministradorAtlas,esteNodo:e,centroVista:o.centroVista},on:{creacionVinculo:o.crearVinculo,eliminacionVinculo:o.eliminarVinculo,cambioDePosicionManual:o.cambiarCoordsManualesNodo,eliminar:o.eliminarNodo},nativeOn:{click:function(i){return i.stopPropagation(),o.seleccionNodo(e)},contextmenu:function(i){i.preventDefault(),o.idNodoMenuCx=e.id}}})}))],2)])},so=[],ro=(i("7db0"),i("b85c")),co=(i("96cf"),i("1da1")),uo=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"nodoConocimiento",style:[o.estiloPosicion,o.estiloSize,o.estiloZeta],on:{mousedown:function(e){if(!e.ctrlKey)return null;o.arrastrandoNodo=!0},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo,mouseenter:function(e){o.mostrandoCuadritoDescripcion=!0},mouseleave:function(e){o.arrastrandoNodo=!1,o.mostrandoCuadritoDescripcion=!1},dblclick:o.abrirPaginaNodo}},[a("img",{ref:"iconoNodo",staticClass:"iconoNodo",attrs:{src:this.serverUrl+"/api/atlas/iconos/"+o.esteNodo.id,alt:""}}),a("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[a("div",{staticClass:"seccionMenuCx",on:{click:o.abrirPaginaNodo}},[o._v(o._s(o.esteNodo.nombre))]),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorAtlas?a("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarEsteNodo(e)}}},[o._v("Eliminar")]):o._e(),o.usuarioSuperadministrador?a("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(" "+o._s(o.esteNodo.id)+" ")]):o._e(),-1==o.nodoSeleccionado.id||o.nodoSeleccionado.id==o.esteNodo.id||1!=o.usuarioSuperadministrador&&1!=o.usuarioAdministradorAtlas?o._e():[a("div",{staticClass:"seccionMenuCx"},[o._v(o._s(o.nodoSeleccionado.nombre))]),a("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.nodoSeleccionado,o.esteNodo)}}},[o._v(" Continua aquí ")]),a("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Continua desde aquí ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.esteNodo.vinculos.some((function(e){return e.idRef==o.nodoSeleccionado.id})),expression:"esteNodo.vinculos.some((v) => v.idRef == nodoSeleccionado.id)"}],staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Desconectar ")])]],2),a("div",{ref:"nombre",attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")]),o.esteNodo&&o.esteNodo.descripcion?a("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"cuadritoDescripcionNodo"},[a("div",{staticClass:"descripcionNodo"},[o._v(o._s(o.esteNodo.descripcion))]),a("img",{staticClass:"botonAbrirNodo",attrs:{src:i("9d5e"),alt:"Ir",title:"Abrir este nodo"},on:{click:function(e){return e.stopPropagation(),o.abrirPaginaNodo(e)}}})]):o._e()])},lo=[],vo=(i("498a"),{name:"NodoConocimiento",data:function(){return{arrastrandoNodo:!1,nombreEditable:!1,nombreEditandose:!1,mostrandoCuadritoDescripcion:!1,baseSize:{x:50,y:50},posicion:{x:0,y:0}}},props:{esteNodo:{type:Object,required:!0},centroVista:Object,idNodoMenuCx:String,nodoSeleccionado:{type:Object,default:function(){return{id:"-1",nombre:"ninguno"}}},usuarioAdministradorAtlas:{type:Boolean,default:!1}},computed:{menuCx:function(){return this.idNodoMenuCx==this.esteNodo.id},size:function(){var o=Object.assign({},this.baseSize);if(this.seleccionado){var e=this.baseSize.x,i=this.baseSize.y;o.x=Math.round(1.1*e),o.y=Math.round(1.1*i)}return Object(k["a"])({},o)},seleccionado:function(){var o=!1;return this.nodoSeleccionado.id==this.esteNodo.id&&(o=!0),o},estiloPosicion:function(){var o=Math.round(this.posicion.y-this.size.y/2),e=Math.round(this.posicion.x-this.size.x/2);return o-=this.centroVista.y,e-=this.centroVista.x,{top:o+"px",left:e+"px"}},estiloZeta:function(){var o=0;return(this.arrastrandoNodo||this.seleccionado)&&(o=10),{zIndex:o}},estiloSize:function(){return{width:this.size.x+"px",height:this.size.y+"px"}},permisosUsuario:function(){return this.$store.state.usuario.permisos}},methods:{abrirPaginaNodo:function(){this.$router.push("/nodoConocimiento/"+this.esteNodo.id)},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},eliminarEsteNodo:function(){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?this.$emit("eliminar",this.esteNodo.id):console.log("No autorizado")},arrastrarNodo:function(o){if(this.arrastrandoNodo){var e=document.getElementById("contenedorNodos").getBoundingClientRect(),i=Math.round(o.clientY-e.top+this.centroVista.y),a=Math.round(o.clientX-e.left+this.centroVista.x);this.posicion.y=i,this.posicion.x=a}},guardarPosicion:function(){this.arrastrandoNodo&&(this.$emit("cambioDePosicionManual",this.esteNodo.id,{x:this.posicion.x,y:this.posicion.y}),this.arrastrandoNodo=!1)},crearVinculo:function(o,e,i){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?(console.log("creando un vinculo tipo ".concat(o," entre ").concat(e.nombre," y ").concat(i.nombre," ")),this.$emit("creacionVinculo",{tipo:o,idNodoFrom:e.id,idNodoTo:i.id})):console.log("No autorizado")},eliminarVinculo:function(o,e){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?this.$emit("eliminacionVinculo",{idNodoFrom:o.id,idNodoTo:e.id}):console.log("No autorizado")}},mounted:function(){this.posicion.y=this.esteNodo.coordsManuales.y?this.esteNodo.coordsManuales.y:0,this.posicion.x=this.esteNodo.coordsManuales.x?this.esteNodo.coordsManuales.x:0}}),po=vo,mo=(i("1b61"),Object(m["a"])(po,uo,lo,!1,null,"2b9c8e97",null)),ho=mo.exports,fo=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"canvases"}},[i("canvas",{ref:"canvasTodosVinculos",staticClass:"canvas",style:[o.estiloPosicionRelativaCanvas,o.sizeCanvasTodosVinculos],attrs:{id:"canvasTodosVinculos"}}),i("canvas",{ref:"canvasVinculosSeleccionado",staticClass:"canvas",style:[o.estiloPosicionRelativaCanvas,o.sizeCanvasTodosVinculos],attrs:{id:"canvasVinculosSeleccionado"}})])},Ao=[],bo=(i("13d5"),i("a9e3"),{name:"Canvases",data:function(){return{montado:!1,lapiz:null,posicionCanvasTodosVinculos:{top:0,left:0},sizeCanvasTodosVinculos:{width:0,height:0},posicionCanvasActivo:{x:0,y:0}}},props:{nodoSeleccionado:{type:Object,default:function(){return{id:"-1",vinculos:[]}}},nodoRelevante:[Object],todosNodos:Array,centroVista:Object,actualizar:Number},methods:{crearImagenTodosVinculos:function(){var o=this;if(!(this.todosNodos.length<=1)){this.lapiz=this.$refs.canvasTodosVinculos.getContext("2d");var e={};e.top=this.todosNodos.reduce((function(o,e){return e.coordsManuales.y>o?e.coordsManuales.y:o}),0),e.bot=this.todosNodos.reduce((function(o,e){return e.coordsManuales.y<o?e.coordsManuales.y:o}),0),e.left=this.todosNodos.reduce((function(o,e){return e.coordsManuales.x<o?e.coordsManuales.x:o}),0),e.right=this.todosNodos.reduce((function(o,e){return e.coordsManuales.x>o?e.coordsManuales.x:o}),0);var i=parseInt(e.right-e.left),a=parseInt(e.top-e.bot);(i>5e3||a>5e3)&&console.log("ALERTA. Diagrama demasiado grande"),this.$set(this.posicionCanvasTodosVinculos,"y",e.bot),this.$set(this.posicionCanvasTodosVinculos,"x",e.left),this.posicionCanvasActivo=this.posicionCanvasTodosVinculos,this.$set(this.sizeCanvasTodosVinculos,"width",i+"px"),this.$set(this.sizeCanvasTodosVinculos,"height",a+"px"),this.lapiz.canvas.width=i,this.lapiz.canvas.height=a,this.$refs.canvasVinculosSeleccionado.width=i,this.$refs.canvasVinculosSeleccionado.height=a,this.lapiz.lineWidth=1,this.lapiz.clearRect(0,0,i,a),this.lapiz.beginPath(),this.lapiz.strokeStyle="#b3b3b3";var n,t=Object(ro["a"])(this.todosNodos);try{for(t.s();!(n=t.n()).done;){var s,r=n.value,c=Object(ro["a"])(r.vinculos);try{var d=function(){var e=s.value;if(!o.todosNodos.some((function(o){return o.id==e.idRef})))return"continue";"source"==e.rol&&o.dibujarLineaEntreNodos(r,o.todosNodos.find((function(o){return o.id==e.idRef})))};for(c.s();!(s=c.n()).done;)d()}catch(u){c.e(u)}finally{c.f()}}}catch(u){t.e(u)}finally{t.f()}this.lapiz.stroke()}},crearImagenVinculosSeleccionado:function(){var o=this;if(this.lapiz=this.$refs.canvasVinculosSeleccionado.getContext("2d"),this.lapiz.clearRect(0,0,this.lapiz.canvas.width,this.lapiz.canvas.height),this.todosNodos.some((function(e){return e.id==o.nodoSeleccionado.id}))){this.lapiz.beginPath(),this.lapiz.lineWidth=2,this.lapiz.strokeStyle="#008000";var e,i=Object(ro["a"])(this.nodoSeleccionado.vinculos);try{var a=function(){var i=e.value;if(!o.todosNodos.some((function(o){return o.id==i.idRef})))return console.log("ALERTA. Vinculo a ".concat(i.idRef," huerfano")),"continue";if("source"==i.rol){var a=o.todosNodos.find((function(o){return o.id==i.idRef}));o.dibujarLineaEntreNodos(o.nodoSeleccionado,a)}};for(i.s();!(e=i.n()).done;)a()}catch(r){i.e(r)}finally{i.f()}this.lapiz.stroke(),this.lapiz.beginPath(),this.lapiz.strokeStyle="#b80e0e";var n,t=Object(ro["a"])(this.nodoSeleccionado.vinculos);try{var s=function(){var e=n.value;if(!o.todosNodos.some((function(o){return o.id==e.idRef})))return console.log("ALERTA. Vinculo a ".concat(e.idRef," huerfano")),"continue";if("target"==e.rol){var i=o.todosNodos.find((function(o){return o.id==e.idRef}));o.dibujarLineaEntreNodos(i,o.nodoSeleccionado)}};for(t.s();!(n=t.n()).done;)s()}catch(r){t.e(r)}finally{t.f()}this.lapiz.stroke()}},dibujarLineaEntreNodos:function(o,e){var i={x:o.coordsManuales.x-this.posicionCanvasActivo.x,y:o.coordsManuales.y-this.posicionCanvasActivo.y},a={x:e.coordsManuales.x-this.posicionCanvasActivo.x,y:e.coordsManuales.y-this.posicionCanvasActivo.y};this.lapiz.moveTo(i.x,i.y),this.lapiz.lineTo(a.x,a.y);var n={x:(a.x+i.x)/2,y:(a.y+i.y)/2},t=7,s=Math.atan((a.y-i.y)/(a.x-i.x));a.y-i.y<0&&a.x-i.x<0&&(s+=Math.PI),a.y-i.y>0&&a.x-i.x<0&&(s+=Math.PI);var r={x:n.x+t*Math.cos(s-3*Math.PI/4),y:n.y+t*Math.sin(s-3*Math.PI/4)},c={x:n.x+t*Math.cos(s+3*Math.PI/4),y:n.y+t*Math.sin(s+3*Math.PI/4)};this.lapiz.moveTo(n.x,n.y),this.lapiz.lineTo(r.x,r.y),this.lapiz.moveTo(n.x,n.y),this.lapiz.lineTo(c.x,c.y)},trazarVinculosDeNodoRecursivamente:function(o,e,i,a){var n=this;i--;var t,s=this.todosNodos.find((function(e){return e.id==o})),r=Object(ro["a"])(s.vinculos);try{var c=function(){var o=t.value;if(o.rol!=e)return"continue";var r=n.todosNodos.find((function(e){return e.id==o.idRef}));if(!r)return console.log("ALERTA. idRef del vinculo no estaba entre los nodos"),"continue";a.push(r.id),"target"==e?(n.dibujarLineaEntreNodos(r,s),a.push(r.id)):"source"==e&&n.dibujarLineaEntreNodos(s,r),i>0&&!a.some((function(o){return o==r.id}))&&(a=n.trazarVinculosDeNodoRecursivamente(r.id,e,i,a))};for(r.s();!(t=r.n()).done;)c()}catch(d){r.e(d)}finally{r.f()}return a}},computed:{estiloPosicionRelativaCanvas:function(){var o=this.posicionCanvasTodosVinculos.y-this.centroVista.y,e=this.posicionCanvasTodosVinculos.x-this.centroVista.x;return{top:o+"px",left:e+"px"}}},watch:{todosNodos:function(){this.todosNodos.length<1||(console.log("Redibujando lineas"),this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado())},nodoSeleccionado:function(){this.crearImagenVinculosSeleccionado()}},mounted:function(){this.montado=!0,this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()}}),go=bo,No=(i("b48f"),Object(m["a"])(go,fo,Ao,!1,null,"60ddadd0",null)),yo=No.exports;function Po(){var o=Object(s["a"])(["\n          mutation($idUsuario: ID, $centroVista: CoordsInput) {\n            setCentroVista(idUsuario: $idUsuario, centroVista: $centroVista)\n          }\n        "]);return Po=function(){return o},o}function Co(){var o=Object(s["a"])(["\n            mutation($tipo: String!, $idNodoFrom: ID!, $idNodoTo: ID!) {\n              crearVinculo(\n                tipo: $tipo\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    rol\n                    tipo\n                  }\n                }\n              }\n            }\n          "]);return Co=function(){return o},o}function Eo(){var o=Object(s["a"])(["\n            mutation($idNodoFrom: ID!, $idNodoTo: ID!) {\n              eliminarVinculoFromTo(\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    tipo\n                    rol\n                  }\n                }\n              }\n            }\n          "]);return Eo=function(){return o},o}function wo(){var o=Object(s["a"])(["\n            query{\n              yo{\n                id\n                atlas {\n                  centroVista {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return wo=function(){return o},o}function xo(){var o=Object(s["a"])(["\n          mutation($infoNodo: NodoConocimientoInput) {\n            crearNodo(infoNodo: $infoNodo) {\n              nombre\n              descripcion\n              id\n              coordsManuales {\n                x\n                y\n              }\n              vinculos {\n                idRef\n                rol\n                tipo\n              }\n            }\n          }\n        "]);return xo=function(){return o},o}function jo(){var o=Object(s["a"])(["\n            mutation($idNodo: ID!) {\n              eliminarNodo(idNodo: $idNodo)\n            }\n          "]);return jo=function(){return o},o}function Do(){var o=Object(s["a"])(["\n            mutation($idNodo: String, $coordsManuales: CoordsInput) {\n              setCoordsManuales(\n                idNodo: $idNodo\n                coordsManuales: $coordsManuales\n              ) {\n                modificados {\n                  id\n                  coordsManuales {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return Do=function(){return o},o}function Ro(){var o=Object(s["a"])(["\n        query {\n          todosNodos {\n            nombre\n            descripcion\n            id\n            coordsManuales {\n              x\n              y\n            }\n            vinculos {\n              idRef\n              rol\n              tipo\n            }\n          }\n        }\n      "]);return Ro=function(){return o},o}var So=c()(Ro()),To={components:{NodoConocimiento:ho,Canvases:yo},name:"AtlasConocimiento",apollo:{todosNodos:{query:So,result:function(){this.dibujarVinculosGrises()},fetchPolicy:"cache-and-network"}},data:function(){return{todosNodos:[],idNodoSeleccionado:"-1",idNodoMenuCx:"-1",centroVista:{x:0,y:0},actualizarTrazos:0,panningVista:!1,nodosConectadosAlSeleccionado:{listaCompleta:[],listaPorNiveles:[]},profundidadNodosConectadosAlSeleccionado:1,actualizarVinculosGrises:0,ultimoTouchX:0,ultimoTouchY:0}},computed:{nodoSeleccionado:function(){var o=this;if(!this.todosNodos)return console.log("NO HAY NODOS"),!1;if(this.todosNodos.some((function(e){return e.id==o.idNodoSeleccionado}))){var e=this.todosNodos.findIndex((function(e){return e.id==o.idNodoSeleccionado}));return this.todosNodos[e]}return{id:"-1",vinculos:[]}},idUsuario:function(){return this.$store.state.usuario.id},usuarioAdministradorAtlas:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("atlasAdministrador")}},methods:{iniciaMovimientoTouch:function(o){this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY},movimientoMobile:function(o){var e=o.changedTouches[0].clientX-this.ultimoTouchX,i=o.changedTouches[0].clientY-this.ultimoTouchY;this.ultimoTouchX=o.changedTouches[0].clientX,this.ultimoTouchY=o.changedTouches[0].clientY,this.desplazarVista(e,i)},cambiarCoordsManualesNodo:function(o,e){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?(this.todosNodos[this.todosNodos.findIndex((function(e){return e.id==o}))].coordsManuales=e,this.$apollo.mutate({mutation:c()(Do()),variables:{idNodo:o,coordsManuales:e}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))):console.log("No autorizado")},eliminarNodo:function(o){this.usuarioSuperadministrador||this.usuarioAdministradorAtlas?confirm("¿Seguro de que quieres eliminar este nodo?")&&(console.log("enviando mutacion de eliminar nodo"),this.$apollo.mutate({mutation:c()(jo()),variables:{idNodo:o},update:function(e,i){var a=i.data.eliminarNodo;if(a){var n=e.readQuery({query:So}),t=JSON.parse(JSON.stringify(n)),s=t.todosNodos.findIndex((function(e){return e.id==o}));s>-1?(t.todosNodos.splice(s,1),e.writeQuery({query:So,data:t})):console.log("El nodo no estaba presente")}else console.log("Nodo no fue eliminado")}}).then((function(o){console.log("quitando el objeto del array. ".concat(o))}))):console.log("No autorizado")},crearNodo:function(o){if(this.usuarioSuperadministrador||this.usuarioAdministradorAtlas){console.log("enviando una mutación de crear nodo");var e=document.getElementById("contenedorNodos").getBoundingClientRect(),i=Math.round(o.clientY-e.top+this.centroVista.y),a=Math.round(o.clientX-e.left+this.centroVista.x),n={coordsManuales:{x:a,y:i}};console.log("en las coordenadas: ".concat(a,", ").concat(i," ")),this.$apollo.mutate({mutation:c()(xo()),variables:{infoNodo:n},update:function(o,e){var i=e.data.crearNodo,a=o.readQuery({query:So}),n=JSON.parse(JSON.stringify(a)),t=n.todosNodos;t.push(i),o.writeQuery({query:So,data:n})}}).then((function(o){var e=o.data.crearNodo;console.log("Creado ".concat(e.id))})).catch((function(o){console.log("Error. E: ".concat(o))}))}else console.log("Error usuario no autorizado")},descargarCentroVista:function(){var o=this;this.$apollo.query({query:c()(wo()),variables:{idUsuario:this.$store.state.usuario.id},fetchPolicy:"network-only"}).then((function(e){var i=e.data.yo,a=i.atlas.centroVista;o.$set(o.centroVista,"x",a.x),o.$set(o.centroVista,"y",a.y),o.$store.commit("setCentroVistaAtlas",a)})).catch((function(o){console.log("error fetching centro vista: ".concat(o))}))},desplazarVista:function(o,e){this.$set(this.centroVista,"x",this.centroVista.x-o),this.$set(this.centroVista,"y",this.centroVista.y-e),this.actualizarTrazos++},panVista:function(o){this.panningVista&&(this.desplazarVista(o.movementX,o.movementY),o.preventDefault())},seleccionNodo:function(o){var e=this;if(this.idNodoSeleccionado=o.id,!this.todosNodos.some((function(o){return o.id==e.idNodoSeleccionado})))return null;var i=parseInt(this.profundidadNodosConectadosAlSeleccionado),a=[],n=this.idNodoSeleccionado,t=[n];if(i>0){for(var s=0;s<i;s++)a[s]=[];var r=this.encontrarNodosConectadosRecursivamente(n,["target","source"],["continuacion"],t,a,0,i);t=r.listaCompleta,a=r.listaPorNiveles}this.nodosConectadosAlSeleccionado={listaCompleta:t,listaPorNiveles:a}},eliminarVinculo:function(o){var e=this;return Object(co["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.usuarioSuperadministrador||e.usuarioAdministradorAtlas){i.next=3;break}return console.log("No autorizado"),i.abrupt("return");case 3:return console.log("eliminando un vinculo entre ".concat(o.idNodoFrom," y ").concat(o.idNodoTo," ")),i.next=6,e.$apollo.mutate({mutation:c()(Eo()),variables:{idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 6:case"end":return i.stop()}}),i)})))()},dibujarVinculosGrises:function(){this.actualizarVinculosGrises++},crearVinculo:function(o){var e=this;return Object(co["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.usuarioSuperadministrador||e.usuarioAdministradorAtlas){i.next=3;break}return console.log("No autorizado"),i.abrupt("return");case 3:return console.log("creando un vinculo ".concat(JSON.stringify(o)," ")),i.next=6,e.$apollo.mutate({mutation:c()(Co()),variables:{tipo:"continuacion",idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 6:case"end":return i.stop()}}),i)})))()},encontrarNodosConectadosRecursivamente:function(o,e,i,a,n,t,s){var r,c=this,d=this.todosNodos.find((function(e){return e.id==o})),u=Object(ro["a"])(d.vinculos);try{var l=function(){var o=r.value;if(c.todosNodos.some((function(e){return e.id==o.idRef}))&&e.some((function(e){return e==o.rol}))&&i.some((function(e){return e==o.tipo}))&&!a.some((function(e){return e==o.idRef}))){if(n[t].push(o.idRef),a.push(o.idRef),t+1<s){var d=c.encontrarNodosConectadosRecursivamente(o.idRef,e,i,a,n,t+1,s);a=d.listaCompleta,n=d.listaPorNiveles}}else console.log("No")};for(u.s();!(r=u.n()).done;)l()}catch(v){u.e(v)}finally{u.f()}return{listaCompleta:a,listaPorNiveles:n}}},watch:{nodoSeleccionado:function(){this.actualizarTrazos++},route:function(o){console.log("cambio de navegación a ".concat(o.path))}},mounted:function(){if(!this.usuario.atlas||!this.usuario.atlas.centroVista)return console.log("No había info de centro vista en la store. Descargando"),void this.descargarCentroVista();this.$set(this.centroVista,"x",this.usuario.atlas.centroVista.x),this.$set(this.centroVista,"y",this.usuario.atlas.centroVista.y)},beforeRouteLeave:function(o,e,i){console.log("enviando nuevo centroVista para el usuario ".concat(this.usuario.id,". Centro vista: ").concat(JSON.stringify(this.centroVista))),this.$store.commit("setCentroVistaAtlas",this.centroVista),this.$apollo.mutate({mutation:c()(Po()),variables:{idUsuario:this.$store.state.usuario.id,centroVista:this.centroVista}}).then((function(){i()})).catch((function(o){console.log("error: ".concat(o)),i()}))}},$o=To,ko=(i("b6b5"),Object(m["a"])($o,to,so,!1,null,"5e756633",null)),Io=ko.exports,Oo=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"loginArea"}},[i("div",{attrs:{id:"ventanaCentral"}},[i("form",[i("p",{attrs:{id:"tituloVentana"}},[o._v("Iniciar sesion")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.username,expression:"username"}],staticClass:"inputs",style:o.colorUsername,attrs:{type:"text",name:"username",placeholder:"Nombre de usuario"},domProps:{value:o.username},on:{input:[function(e){e.target.composing||(o.username=e.target.value)},function(e){o.loginFail=!1}]}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.password,expression:"password"}],staticClass:"inputs",style:o.colorPassword,attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:o.password},on:{input:[function(e){e.target.composing||(o.password=e.target.value)},function(e){o.loginFail=!1}]}}),i("br"),i("br"),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoDatos,expression:"enviandoDatos"}],attrs:{texto:"Conectando..."}}),i("button",{staticClass:"botonEnviar",class:{loginFail:o.loginFail,desaparecido:o.enviandoDatos},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),o.iniciarSesion(e)}}},[o._v(" "+o._s(o.loginFail?o.loginFailMsg:"Conectarse")+" ")])],1)])])},Go=[],Mo=i("bc3a"),_o=i.n(Mo),Bo=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"loading"},[i("span",{staticClass:"textoLoading"},[o._v(o._s(o.texto))])])},Uo=[],qo={name:"Loading",props:{texto:{type:String,default:"Cargando..."}}},Fo=qo,zo=(i("fc23"),Object(m["a"])(Fo,Bo,Uo,!1,null,"5ff6e04b",null)),Qo=zo.exports,Vo=/[^a-zA-Z0-9_ñÑ]/g,Lo=/[^a-zA-Z0-9ñÑ*@_-]/g,Jo=6,Ko=4,Ho={name:"LoginArea",components:{Loading:Qo},data:function(){return{username:"",password:"",loginFail:!1,loginFailMsg:"",enviandoDatos:!1}},computed:{usuarioConectado:function(){return null!=this.$store.state.usuario.username},nombreUsuario:function(){return this.$store.state.usuario.username},colorUsername:function(){return{color:Vo.test(this.username)||this.username.length<Ko?"red":"black"}},colorPassword:function(){return{color:Lo.test(this.password)||this.password.length<Jo?"red":"black"}}},methods:{iniciarSesion:function(){console.log("Iniciando login");var o=this;Vo.test(this.username)||Lo.test(this.password)||this.password.length<Jo||this.username.length<Ko||(this.enviandoDatos=!0,_o.a.post(this.serverUrl+"/api/usuarios/login",{username:this.username,password:this.password}).then((function(e){console.log("Logeado"),e.data.username==o.username&&(o.$store.commit("logearse",e.data.token),window.location.href=o.clienteUrl,o.enviandoDatos=!1)})).catch((function(e){if(o.enviandoDatos=!1,o.$store.commit("deslogearse"),e.response&&e.response.data.error&&"badLogin"==e.response.data.error)return o.loginFail=!0,void(o.loginFailMsg="Datos inválidos");e.response&&e.response.data.msjUsuario&&alert(e.response.data.msjUsuario),console.log("error: ".concat(e))})))},deslogearse:function(){this.$store.commit("deslogearse"),window.location.href=this.clienteUrl}}},Yo=Ho,Zo=(i("8f1c"),Object(m["a"])(Yo,Oo,Go,!1,null,"65679040",null)),Wo=Zo.exports,Xo=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"perfilPersonal"},[a("div",{attrs:{id:"categorias"}},[a("div",{staticClass:"categorias",on:{click:function(e){o.seccion="categorias"}}},[o._v(" Datos personales ")]),a("div",{staticClass:"categorias",on:{click:function(e){o.seccion="contacto"}}},[o._v(" Información de contacto ")]),a("div",{staticClass:"categorias",on:{click:function(e){o.seccion="conocimientos"}}},[o._v(" Conocimientos ")])]),a("div",{attrs:{id:"contenidos"}},[a("div",{staticClass:"contenidos editables",attrs:{id:"datosPersonales"}},[a("img",{staticClass:"botonEditar hoverGris",attrs:{src:i("559e")},on:{click:function(e){o.editandoDatosPersonales=!o.editandoDatosPersonales}}}),a("div",{attrs:{id:"fotografia"}},[a("loading",{directives:[{name:"show",rawName:"v-show",value:o.subiendoNuevaFotoPersonal,expression:"subiendoNuevaFotoPersonal"}],attrs:{texto:"Enviando fotografía..."}}),a("img",{class:{deshabilitada:o.subiendoNuevaFotoPersonal},attrs:{id:"laFotografia",title:"Cambiar fotografia",src:o.serverUrl+"/api/usuarios/fotografias/"+o.yo.id+"?"+o.refreshImg,alt:""},on:{click:o.seleccionarFoto}}),a("input",{ref:"inputNuevaFoto",attrs:{type:"file",id:"inputNuevaFoto"},on:{change:o.subirNuevaFoto}})],1),a("div",{attrs:{id:"textosDatosPersonales"}},[o.editandoDatosPersonales?[a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.nombres,expression:"edicionDatosPersonales.nombres"}],attrs:{disabled:"",type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.edicionDatosPersonales.nombres},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"nombres",e.target.value)}}}),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.apellidos,expression:"edicionDatosPersonales.apellidos"}],attrs:{disabled:"",type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.edicionDatosPersonales.apellidos},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"apellidos",e.target.value)}}}),a("br"),a("br"),a("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.fechaNacimiento,expression:"edicionDatosPersonales.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.edicionDatosPersonales.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"fechaNacimiento",e.target.value)}}}),a("br"),a("button",{on:{click:o.enviarDatosPersonales}},[o._v("Enviar")])]:[a("div",{staticClass:"nombreApellido",attrs:{id:"miNombre"}},[o._v(o._s(o.yo.nombres))]),a("div",{staticClass:"nombreApellido",attrs:{id:"miApellido"}},[o._v(o._s(o.yo.apellidos))]),a("br"),a("div",{attrs:{id:"miEdad"}},[o._v(o._s(o.yo.edad)+" años")])]],2)]),a("div",{staticClass:"contenidos editables",attrs:{id:"informacionContacto"}},[a("img",{staticClass:"botonEditar",attrs:{src:i("559e")},on:{click:function(e){o.editandoDatosContacto=!o.editandoDatosContacto}}}),o.editandoDatosContacto?[a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.lugarResidencia,expression:"edicionDatosContacto.lugarResidencia"}],attrs:{type:"text",placeholder:"Residencia"},domProps:{value:o.edicionDatosContacto.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"lugarResidencia",e.target.value)}}}),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.email,expression:"edicionDatosContacto.email"}],attrs:{type:"email",placeholder:"Correo electronico"},domProps:{value:o.edicionDatosContacto.email},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"email",e.target.value)}}}),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.numeroTel,expression:"edicionDatosContacto.numeroTel"}],attrs:{type:"text",placeholder:"Número telefónico"},domProps:{value:o.edicionDatosContacto.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"numeroTel",e.target.value)}}}),a("br"),a("button",{on:{click:o.enviarDatosContacto}},[o._v("Enviar")])]:[a("div",{staticClass:"infoContacto",attrs:{id:"miResidencia"}},[o._v("Residencia: "+o._s(o.yo.lugarResidencia))]),a("div",{staticClass:"infoContacto",attrs:{id:"miEmail"}},[o._v("Correo electrónico: "+o._s(o.yo.email))]),a("div",{staticClass:"infoContacto",attrs:{id:"miTelefono"}},[o._v("Mi número telefónico: "+o._s(o.yo.numeroTel))])]],2),o.usuarioLogeado?a("div",{staticClass:"contenidos editables",attrs:{id:"informacionPassword"}},[a("div",{staticClass:"zonaBotonEditar"},[o._v(" Cambiar contraseña "),a("img",{staticClass:"botonEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarPassword",title:o.editandoDatosPassword?"Volver":"Cambiar contraseña"},on:{click:function(e){o.editandoDatosPassword=!o.editandoDatosPassword,o.resetearCamposPassword}}})]),o.editandoDatosPassword?a("form",{attrs:{id:"zonaInputsNuevoPassword"}},[a("label",{attrs:{for:"viejoPassword"}},[o._v("Escribe tu contraseña actual: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.viejoPassword,expression:"edicionDatosPassword.viejoPassword"}],staticClass:"inputsNuevoPassword",attrs:{name:"viejoPassword",type:"password",placeholder:"Contraseña actual"},domProps:{value:o.edicionDatosPassword.viejoPassword},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPassword,"viejoPassword",e.target.value)}}}),a("label",{attrs:{for:"nuevoPassword"}},[o._v("Escribe tu nueva contraseña: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.nuevoPassword,expression:"edicionDatosPassword.nuevoPassword"}],staticClass:"inputsNuevoPassword",attrs:{name:"nuevoPassword",type:"password",placeholder:"Nueva contraseña"},domProps:{value:o.edicionDatosPassword.nuevoPassword},on:{input:[function(e){e.target.composing||o.$set(o.edicionDatosPassword,"nuevoPassword",e.target.value)},o.compararNuevoPassConfirmacion]}}),a("label",{attrs:{for:"nuevoPasswordConfirmacion"}},[o._v("Confirma tu nueva contraseña: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPassword.nuevoPasswordConfirmacion,expression:"edicionDatosPassword.nuevoPasswordConfirmacion"}],staticClass:"inputsNuevoPassword",class:{enRojo:!o.nuevoPasswordConfirmado},attrs:{name:"nuevoPasswordConfirmacion",type:"password",placeholder:"Nueva contraseña"},domProps:{value:o.edicionDatosPassword.nuevoPasswordConfirmacion},on:{input:[function(e){e.target.composing||o.$set(o.edicionDatosPassword,"nuevoPasswordConfirmacion",e.target.value)},o.compararNuevoPassConfirmacion]}}),a("button",{attrs:{disabled:!o.nuevoPasswordConfirmado},on:{click:function(e){return e.preventDefault(),o.enviarDatosPassword(e)}}},[o._v(" Enviar ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.resultadoEdicionPassword,expression:"resultadoEdicionPassword"}],attrs:{id:"resultadoEdicionPassword"}},[o._v(" "+o._s(this.resultadoEdicionPassword)+" ")])]):void 0,a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoDatosPassword,expression:"enviandoDatosPassword"}],attrs:{texto:"Enviando..."}})],2):o._e()])])},oe=[],ee=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,ie=/[^ a-zA-ZÀ-žñÑ]/g,ae=/[^0-9+-]/g,ne=/\S+@\S+\.\S+/,te=/[12][90][0-9][0-9]-[01][0-9]-[0-3][0-9]/,se=/[^a-zA-Z0-9ñÑ*@_-]/g,re=function(o){var e=[];for(var i in o){if(!o[i])return e.push("Falta ".concat(i)),e;o[i]=o[i].trim(),"nombres"==i?(o.nombres.length<2&&e.push("Tu nombre es muy corto"),ie.test(o.nombres)&&e.push("Tu nombre contiene caracteres no permitidos")):"apellidos"==i?(o.apellidos.length<2&&e.push("Tu apellido es muy corto"),ie.test(o.apellidos)&&e.push("Tu apellido contiene caracteres no permitidos")):"fechaNacimiento"==i?te.test(o.fechaNacimiento)||e.push("Tu fecha de nacimiento es incorrecta"):"email"==i?o.email.length>0&&!ne.test(o.email)&&e.push("Tu e-mail no es válido"):"numeroTel"==i?ae.test(o.numeroTel)&&e.push("Tu número telefónico no es válido"):"lugarResidencia"==i?(o.lugarResidencia.length<2&&e.push("Tu lugar de residencia es muy corto"),ee.test(o.lugarResidencia)&&e.push("Tu lugar de residencia contiene caracteres no permitidos")):"username"==i?(o.username.length<4&&e.push("Tu nombre de usuario es muy corto"),ee.test(o.username)&&e.push("Tu nombre de usuario contiene caracteres no permitidos")):"password"==i?((o.password.length<6||o.password.length>32)&&e.push("Tu contraseña debe contener entre 6 y 32 caracteres"),se.test(o.password)&&e.push("Tu password contiene caracteres no permitidos")):e.push("El dato ".concat(i," no tenía lógica de validación. Informa al administrador del sistema por favor"))}return e};function ce(){var o=Object(s["a"])(["\n              mutation($nuevosDatos: DatosEditablesUsuario) {\n                editarDatosUsuario(nuevosDatos: $nuevosDatos) {\n                  id\n                  ...DatosContacto\n                }\n              }\n              ","\n            "]);return ce=function(){return o},o}function de(){var o=Object(s["a"])(["\n              mutation($nuevosDatos: DatosEditablesUsuario) {\n                editarDatosUsuario(nuevosDatos: $nuevosDatos) {\n                  id\n                  ...DatosPersonales\n                }\n              }\n              ","\n            "]);return de=function(){return o},o}function ue(){var o=Object(s["a"])(["\n        query {\n          yo {\n            id\n            nombres\n            apellidos\n            fechaNacimiento\n            edad\n            lugarResidencia\n            numeroTel\n            email\n            username\n            nodosConocimiento {\n              nodoConocimiento {\n                id\n                nombre\n              }\n            }\n          }\n        }\n      "]);return ue=function(){return o},o}function le(){var o=Object(s["a"])(["\n  fragment DatosContacto on Usuario {\n    lugarResidencia\n    email\n    numeroTel\n  }\n"]);return le=function(){return o},o}function ve(){var o=Object(s["a"])(["\n  fragment DatosPersonales on Usuario {\n    nombres\n    apellidos\n    fechaNacimiento\n    edad\n  }\n"]);return ve=function(){return o},o}var pe=c()(ve()),me=c()(le()),he={name:"PerfilPersonal",components:{Loading:Qo},apollo:{yo:{query:c()(ue()),fetchPolicy:"network-only",skip:function(){return!this.usuarioLogeado}}},data:function(){return{yo:{id:null,nombres:null,apellidos:null,fechaNacimiento:null,email:null,edad:null,fotografia:null,lugarResidencia:null,username:null,misNodos:[],grupoEstudiantil:""},edicionDatosPassword:{viejoPassword:"",nuevoPassword:"",nuevoPasswordConfirmacion:""},subiendoNuevaFotoPersonal:!1,editandoDatosPersonales:!1,editandoDatosContacto:!1,editandoDatosPassword:!1,nuevoPasswordConfirmado:!1,enviandoDatosPassword:!1,resultadoEdicionPassword:null,refreshImg:0}},computed:{edicionDatosPersonales:function(){return{nombres:this.yo.nombres,apellidos:this.yo.apellidos,fechaNacimiento:this.yo.fechaNacimiento.substr(0,10)}},edicionDatosContacto:function(){return{lugarResidencia:this.yo.lugarResidencia,email:this.yo.email,numeroTel:this.yo.numeroTel}}},methods:{subirNuevaFoto:function(){var o=this,e=this.$refs.inputNuevaFoto,i=new FormData,a=e.files[0],n=a["type"],t=["image/jpeg","image/png"];t.includes(n)?(i.append("nuevaFoto",a),o.subiendoNuevaFotoPersonal=!0,_o()({method:"post",url:this.serverUrl+"/api/usuarios/updateFoto",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data;o.subiendoNuevaFotoPersonal=!1,console.log("respuesta: ".concat(JSON.stringify(i))),"ok"==i.resultado&&o.refreshImg++})).catch((function(e){o.subiendoNuevaFotoPersonal=!1,console.log("Error subiendo foto. E: ".concat(e))}))):console.log("Archivo ilegal")},enviarDatosPersonales:function(){var o=this;console.log("Enviando nuevos datos personales");var e=re(this.edicionDatosPersonales);e.length<1?this.$apollo.mutate({mutation:c()(de(),pe),variables:{nuevosDatos:this.edicionDatosPersonales}}).then((function(){console.log("Datos correctamente editados"),o.editandoDatosPersonales=!1})).catch((function(o){console.log("Error: ".concat(o))})):console.log("Errores: ".concat(e))},enviarDatosContacto:function(){var o=new Object;for(var e in this.edicionDatosContacto)console.log("".concat(e," vale ").concat(this.edicionDatosContacto[e])),null!=this.edicionDatosContacto[e]&&void 0!=this.edicionDatosContacto[e]&&""!=this.edicionDatosContacto[e]&&(o[e]=this.edicionDatosContacto[e]);var i=this;console.log("Enviando nuevos datos contacto: ".concat(JSON.stringify(o)));var a=re(o);a.length<1?this.$apollo.mutate({mutation:c()(ce(),me),variables:{nuevosDatos:o}}).then((function(){console.log("Datos correctamente editados"),i.editandoDatosContacto=!1})).catch((function(o){console.log("Error: ".concat(o))})):console.log("Errores: ".concat(a))},resetearCamposPassword:function(){this.$set(this.edicionDatosPassword,"viejoPassword",""),this.$set(this.edicionDatosPassword,"nuevoPassword",""),this.$set(this.edicionDatosPassword,"nuevoPasswordConfirmacion",""),this.resultadoEdicionPassword=null},enviarDatosPassword:function(){var o=this;if(console.log("Iniciando envio de nuevo password"),this.nuevoPasswordConfirmado){var e=this,i=this.edicionDatosPassword;for(var a in this.edicionDatosPassword)if(!this.edicionDatosPassword[a])return void alert("Te faltó introducir un campo");if(i.nuevoPassword==i.nuevoPasswordConfirmacion){this.resultadoEdicionPassword=null;var n=re({password:i.viejoPassword}).concat(re({password:i.nuevoPassword}));n.length>0&&alert(n[0]),e.enviandoDatosPassword=!0,_o()({method:"post",url:this.serverUrl+"/api/usuarios/updatePassword",data:i,headers:{Authorization:"Bearer "+this.$store.state.token}}).then((function(i){var a=i.data;e.enviandoDatosPassword=!1,console.log("Contraseña cambiada"),"ok"==a.resultado&&(o.resetearCamposPassword(),a.msjUsuario&&(o.resultadoEdicionPassword=a.msjUsuario))})).catch((function(i){e.enviandoDatosPassword=!1,console.log("Error subiendo nuevo password. E: ".concat(i)),i.response&&(o.resultadoEdicionPassword=i.response.msjUsuario)}))}else alert("Debes confirmar correctamente la nueva contraseña")}else console.log("Nuevo password no confirmado")},compararNuevoPassConfirmacion:function(){this.edicionDatosPassword.nuevoPassword==this.edicionDatosPassword.nuevoPasswordConfirmacion?this.nuevoPasswordConfirmado=!0:this.nuevoPasswordConfirmado=!1},seleccionarFoto:function(){this.$refs.inputNuevaFoto.click()}}},fe=he,Ae=(i("d74c"),Object(m["a"])(fe,Xo,oe,!1,null,"c281a86e",null)),be=Ae.exports,ge=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"visorNodoConocimiento"},[a("div",{attrs:{id:"layout"}},[a("div",{attrs:{id:"zonaNombre"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExperto||o.usuarioSuperadministrador||o.usuarioAdministradorAtlas,expression:"usuarioExperto || usuarioSuperadministrador || usuarioAdministradorAtlas"}],staticClass:"controlesZona"},[a("img",{staticClass:"bEditar botonesControlesZona",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del nodo"},on:{click:o.toggleEditandoNombre}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar botonesControlesZona",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:o.guardarNuevoNombre}})]),a("p",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombre"}},[o._v(o._s(o.esteNodo.nombre))]),a("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text",id:"inputNuevoNombre"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}})],1),a("div",{attrs:{id:"barraLateral"}},o._l(o.seccionesOrganizadas,(function(e){return a("div",{key:e.nombre,staticClass:"selectorSeccion",class:{selectorSeleccionado:o.seccionSeleccionada==e.nombre},on:{click:function(i){o.seccionSeleccionada=e.nombre}}},[o._v(" "+o._s(e.texto)+" ")])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:"descripcion"==o.seccionSeleccionada,expression:"seccionSeleccionada == 'descripcion'"}],staticClass:"seccionPrimerNivel",attrs:{id:"seccionDescripcion"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioExperto||o.usuarioSuperadministrador||o.usuarioAdministradorAtlas,expression:"usuarioExperto || usuarioSuperadministrador || usuarioAdministradorAtlas"}],staticClass:"controlesZona"},[a("img",{staticClass:"bEditar botonesControlesZona",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar Descripción del nodo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar botonesControlesZona",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteNodo.descripcion)+" ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion",placeholder:"¡Escribe una descripción acerca de este tema!"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),o._l(o.esteNodo.secciones,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:o.seccionSeleccionada==e.nombre,expression:"seccionSeleccionada == seccion.nombre"}],key:e.nombre,staticClass:"seccionPrimerNivel seccionContenidoExterno",class:"seccion"+e.nombre},[1==o.usuarioExperto||1==o.usuarioAdministradorAtlas||1==o.usuarioSuperadministrador?a("div",{staticClass:"barraControlesContenidosExternos"},[a("img",{staticClass:"bEditar botonesEditarContenidosExternos",attrs:{src:i("559e"),alt:"Editar",id:"bEditarSeccion"+e.nombre,title:"Seleccionar archivos de contenido"},on:{click:function(e){e.stopPropagation(),o.editandoArchivosContenidos=!o.editandoArchivosContenidos}}})]):o._e(),a("iframe",{directives:[{name:"show",rawName:"v-show",value:!o.editandoArchivosContenidos,expression:"!editandoArchivosContenidos"}],attrs:{id:"visorContenido",src:o.direccionNodo+"/"+e.nombre+"/"}}),1==o.usuarioExperto||1==o.usuarioAdministradorAtlas||1==o.usuarioSuperadministrador?a("div",{directives:[{name:"show",rawName:"v-show",value:o.editandoArchivosContenidos,expression:"editandoArchivosContenidos"}],staticClass:"cuadroCargaArchivos"},[o._l(e.archivos,(function(i,n){return a("div",{key:n,staticClass:"archivoExistente",class:{deshabilitado:i.enviandoInfo}},[a("div",{staticClass:"botonMarcarPrimario",class:{rojo:i.primario},on:{click:function(a){return o.marcarPrimario(i,e.nombre)}}}),o._v(o._s(i.nombre)+" "),a("span",{staticClass:"botonBorrarArchivoExistente",on:{click:function(a){return o.borrarArchivoExistenteSeccionNodo(i,e.nombre)}}},[o._v("Borrar")])])})),a("input",{staticClass:"inputArchivoContenido",attrs:{type:"file"},on:{change:function(i){return o.subirArchivoContenido(i,e)}}})],2):o._e()])})),a("div",{directives:[{name:"show",rawName:"v-show",value:"expertos"==o.seccionSeleccionada,expression:"seccionSeleccionada == 'expertos'"}],staticClass:"seccionPrimerNivel",attrs:{id:"seccionExpertos"}},[a("div",{staticClass:"controlesZona",attrs:{id:"controlesExpertos"}},[a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryExpertos,expression:"enviandoQueryExpertos"}],attrs:{texto:"Esperando..."}}),1!=o.usuarioLogeado||1!=o.usuarioSuperadministrador&&1!=o.usuarioAdministradorAtlas||o.usuarioExperto?o._e():a("div",{staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},attrs:{id:"asumirExperto"},on:{click:o.asumirComoExperto}},[o._v(" Asumir ")]),!o.usuarioLogeado||o.usuarioExperto||o.usuarioPosibleExperto?o._e():a("div",{staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},attrs:{id:"botonAddExperto"},on:{click:o.entrarListaPosiblesExpertos}},[o._v(" Quiero aportar como experto ")]),1!=o.usuarioLogeado||1!=o.usuarioExperto&&1!=o.usuarioPosibleExperto?o._e():a("div",{staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},on:{click:o.abandonarListaExpertos}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioExperto||1==o.usuarioSuperadministrador?a("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idExpertoSeleccionado&&0==o.expertoSeleccionadoEstaAceptado,expression:"\n            idExpertoSeleccionado != null &&\n            expertoSeleccionadoEstaAceptado == false\n          "}],staticClass:"controlesExpertos hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryExpertos},on:{click:function(e){return o.aceptarExperto(o.idExpertoSeleccionado)}}},[o._v(" Aceptar como experto ")]):o._e()],1),a("div",{attrs:{id:"listaExpertos"}},[o._l(o.esteNodo.expertos,(function(e){return a("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idExpertoSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idExpertoSeleccionado=e,o.expertoSeleccionadoEstaAceptado=!0}}})})),o._l(o.esteNodo.posiblesExpertos,(function(e){return a("icono-persona-autonomo",{key:e,staticClass:"personaPosibleExperto",attrs:{idPersona:e,seleccionado:o.idExpertoSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idExpertoSeleccionado=e,o.expertoSeleccionadoEstaAceptado=!1},dblclick:function(i){return i.shiftKey?o.aceptarExperto(e):null}}})}))],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:"foros"==o.seccionSeleccionada,expression:"seccionSeleccionada == 'foros'"}],ref:"zonaForos",staticClass:"seccionPrimerNivel",attrs:{id:"seccionForos"}},[o.usuarioExperto?a("div",{staticClass:"nombreForo"},[o._v("Foro expertos")]):o._e(),o.usuarioExperto?a("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteNodo.idForoExpertos}}):o._e(),o.usuarioExperto?a("br"):o._e(),a("div",{staticClass:"nombreForo"},[o._v("Foro público")]),a("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteNodo.idForoPublico}})],1)],2)])},Ne=[],ye=(i("4160"),i("159b"),i("2909")),Pe=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"iconoPersonaAutonomo",class:{yo:o.soyYo,seleccionado:o.seleccionado}},[i("img",{directives:[{name:"show",rawName:"v-show",value:o.fotografiaEnabled,expression:"fotografiaEnabled"}],staticClass:"fotografia",attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.idPersona,alt:""},on:{load:function(e){o.fotografiaEnabled=!0}}}),i("div",{attrs:{id:"contenedorAlertas"}},[o._t("alertas")],2),i("div",{staticClass:"nombres",class:{nombreSeleccionado:o.seleccionado}},[o._v(" "+o._s(o.estaPersona.nombres)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.menuContextual,expression:"menuContextual"}],attrs:{id:"menuCxPersona"}},[i("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(o._s(o.idPersona))]),o.usuarioSuperadministrador?i("div",{staticClass:"botonMenuCx"},[o._v(" "+o._s(o.estaPersona.username)+" ")]):o._e(),i("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoPermiso,expression:"nuevoPermiso"}],attrs:{type:"text",placeholder:"Nuevo permiso"},domProps:{value:o.nuevoPermiso},on:{input:function(e){e.target.composing||(o.nuevoPermiso=e.target.value)}}}),i("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.addPermisos(e)}}},[o._v("Dar permiso")]),o._l(o.opcionesMenuCx,(function(e,a){return i("div",{key:a,staticClass:"botonMenuCx",on:{click:function(i){return o.$emit(e.evento)}}},[o._v(" "+o._s(e.textoVisible)+" ")])}))],2)])},Ce=[];function Ee(){var o=Object(s["a"])(["\n  fragment fragConversacion on Conversacion{\n    id\n    titulo    \n    estado\n    acceso   \n    cantidadRespuestas\n  }\n"]);return Ee=function(){return o},o}function we(){var o=Object(s["a"])(["\n  fragment fragRespuesta on RespuestaConversacionForo{\n    id\n    fecha\n    mensaje\n    infoAutor{\n      id\n      nombres\n      apellidos\n      username\n    }\n    archivo{\n      googleDriveDirectLink\n    }\n  }\n"]);return we=function(){return o},o}function xe(){var o=Object(s["a"])(["\n  fragment fragProyecto on Proyecto{\n    id\n    nombre\n    descripcion\n    idForo\n    responsables\n    posiblesResponsables\n    idsTrabajos\n    objetivos {\n      id\n      nombre\n      descripcion\n      vinculos{\n        idRef\n        tipo\n        tipoRef\n      }\n      diagramaProyecto{\n        posicion{\n          x\n          y\n        }        \n      }\n    }\n  }\n  \n"]);return xe=function(){return o},o}function je(){var o=Object(s["a"])(["\nfragment fragActividad on ActividadGrupoEstudiantil {\n  id\n  nombre\n  fechaUpload\n  hayGuia\n  infoCreador{\n    ...fragMinimoPersona\n  }\n  desarrollos {\n    ...fragDesarrollo \n  }\n}\n","\n"]);return je=function(){return o},o}function De(){var o=Object(s["a"])(["\nfragment fragDesarrollo on DesarrolloActividadGrupoEstudiantil{\n    id\n    estado\n    leidoPorProfe\n    infoEstudiante{\n      ...fragMinimoPersona\n    }\n    participaciones {\n      ...fragParticipacion\n    }\n}\n","\n"]);return De=function(){return o},o}function Re(){var o=Object(s["a"])(["\n  fragment fragParticipacion on ParticipacionActividadGrupoEstudiantil{\n    id\n      fechaUpload\n      archivo {\n        extension\n        nombre\n        googleDriveDirectLink,        \n      }\n      comentario\n      infoAutor{\n        ...fragMinimoPersona\n      }\n  }\n  ","\n"]);return Re=function(){return o},o}function Se(){var o=Object(s["a"])(["\nfragment fragMinimoPersona on PublicUsuario {\n  id\n  nombres\n  apellidos\n  username\n}\n"]);return Se=function(){return o},o}function Te(){var o=Object(s["a"])(["\nfragment fragResponsables on PublicUsuario {\n  id\n  username\n  nombres\n  apellidos\n  email\n  numeroTel\n  lugarResidencia\n}\n"]);return Te=function(){return o},o}var $e=c()(Te()),ke=c()(Se()),Ie=c()(Re(),ke),Oe=c()(De(),Ie),Ge=c()(je(),Oe),Me=c()(xe()),_e=c()(we()),Be=c()(Ee());function Ue(){var o=Object(s["a"])(["\n            mutation($nuevoPermiso: String!, $idUsuario: ID!) {\n              addPermisoUsuario(\n                nuevoPermiso: $nuevoPermiso\n                idUsuario: $idUsuario\n              ) {\n                id\n                permisos\n              }\n            }\n          "]);return Ue=function(){return o},o}function qe(){var o=Object(s["a"])(["\n  query($idUsuario: ID!) {\n    publicUsuario(idUsuario: $idUsuario) {\n      ...fragMinimoPersona\n    }\n  }\n  ","\n"]);return qe=function(){return o},o}var Fe=c()(qe(),ke),ze={name:"IconoPersonaAutonomo",apollo:{estaPersona:{query:Fe,variables:function(){return{idUsuario:this.idPersona}},update:function(o){var e=o.publicUsuario;return e},skip:function(){return!this.idPersona}}},data:function(){return{estaPersona:{permisos:[]},nuevoPermiso:null,mounted:!1,fotografiaEnabled:!1}},props:{idPersona:String,seleccionado:Boolean,menuContextual:Boolean,opcionesMenuCx:{type:Array}},computed:{soyYo:function(){return!!(this.mounted&&this.idPersona&&this.$store.state.usuario)&&this.$store.state.usuario.id==this.idPersona}},methods:{addPermisos:function(){console.log("enviando ".concat(this.nuevoPermiso," para el usuario con id ").concat(this.idPersona)),this.$apollo.mutate({mutation:c()(Ue()),variables:{nuevoPermiso:this.nuevoPermiso,idUsuario:this.idPersona}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},fotografiaCargada:function(){console.log("Fotografía cargada")}},mounted:function(){this.mounted=!0},beforeRouteUpdate:function(){console.log("Before update")}},Qe=ze,Ve=(i("052b"),Object(m["a"])(Qe,Pe,Ce,!1,null,"a5e19e52",null)),Le=Ve.exports,Je=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"foro"},[i("div",{staticClass:"barraSuperiorForo",class:{seleccionable:o.conversacionAbierta},on:{click:function(e){o.idConversacionSeleccionada=null}}},[i("div",{attrs:{id:"anuncio"}},[o._v("Conversaciones")]),i("div",{attrs:{id:"controlesForo"}},[o.usuarioLogeado&&("publico"==o.esteForo.acceso||1==o.usuarioMiembro)&&o.esteForo.id?i("div",{directives:[{name:"show",rawName:"v-show",value:!o.conversacionAbierta,expression:"!conversacionAbierta"}],staticClass:"controlesForo botonesControles",attrs:{id:"bCrearConversacion"},on:{click:function(e){o.creandoConversacion=!o.creandoConversacion}}},[o._v(" "+o._s(o.creandoConversacion?"Cancelar":"Crear conversación")+" ")]):o._e()])]),i("div",{staticClass:"zonaConversaciones"},[o.usuarioLogeado&&("publico"==o.esteForo.acceso||1==o.usuarioMiembro)&&o.esteForo.id?i("creador-conversacion",{directives:[{name:"show",rawName:"v-show",value:o.creandoConversacion,expression:"creandoConversacion"}],attrs:{idForo:o.esteForo.id},on:{hiceConversacion:function(e){return o.addConversacion(e)}}}):o._e(),o.numPaginas&&!o.conversacionAbierta?i("div",{staticClass:"zonaSelectorPagina"},o._l(o.numPaginas,(function(e){return i("div",{key:e,staticClass:"selectorPagina",class:{selectorSeleccionado:e==o.numPaginaSeleccionada},on:{click:function(i){o.numPaginaSeleccionada=e}}},[o._v(" "+o._s(e)+" ")])})),0):o._e(),o.numPaginas?i("div",{staticClass:"zonaPaginasConversaciones"},[o._l(o.numPaginas,(function(o){return i("div",{key:o,staticClass:"paginaConversaciones"})})),o._l(o.conversacionesPorPagina[o.numPaginaSeleccionada],(function(e){return i("conversacion",{directives:[{name:"show",rawName:"v-show",value:o.idConversacionSeleccionada==e.id||!o.conversacionAbierta,expression:"\n          idConversacionSeleccionada == conversacion.id ||\n          !conversacionAbierta\n        "}],key:e.id,attrs:{estaConversacion:e,seleccionado:o.idConversacionSeleccionada==e.id,usuarioMiembro:o.usuarioMiembro,parent:o.parent},on:{meElimine:o.refreshPagina},nativeOn:{click:function(i){o.idConversacionSeleccionada=e.id}}})}))],2):o._e()],1)])},Ke=[],He=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"creadorConversacion"},[a("div",{attrs:{id:"nombreAccion"}},[o._v("Creando una nueva conversacion")]),a("div",{attrs:{id:"zonaTitulo"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:o.titulo,expression:"titulo"}],staticClass:"inputTitulo",class:{letrasRojas:o.tituloIlegal},attrs:{type:"text",placeholder:"Titulo de la conversación"},domProps:{value:o.titulo},on:{input:function(e){e.target.composing||(o.titulo=e.target.value)}}})]),a("div",{attrs:{id:"zonaContenido"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:o.mensaje,expression:"mensaje"}],class:{letrasRojas:o.mensajeIlegal},attrs:{placeholder:"Escribe un mensaje",id:"inputMensaje"},domProps:{value:o.mensaje},on:{input:function(e){e.target.composing||(o.mensaje=e.target.value)}}})]),a("div",{attrs:{id:"controles"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:!o.enviandoConversacion,expression:"!enviandoConversacion"}],class:{deshabilitado:1==o.mensajeIlegal||1==o.tituloIlegal},attrs:{src:i("4e77"),alt:"Enviar",title:"Crear conversación",id:"bFinalizar"},on:{click:o.finalizar}}),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoConversacion,expression:"enviandoConversacion"}],attrs:{texto:"Creando conversación..."}})],1)])},Ye=[];function Ze(){var o=Object(s["a"])(["\n            mutation($idForo: ID!, $input: InputIniciarConversacion) {\n              iniciarConversacionConPrimerMensajeForo(\n                idForo: $idForo\n                input: $input\n              ) {\n                ...fragConversacion\n              }\n            }\n            ","\n          "]);return Ze=function(){return o},o}var We=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,Xe=/[^ a-zA-ZÀ-ž0-9_():.,-¡!¿?]/,oi={components:{Loading:Qo},name:"CreadorConversacion",props:{idForo:String},data:function(){return{titulo:null,mensaje:null,enviandoConversacion:!1}},methods:{finalizar:function(){if(!this.tituloIlegal&&!this.mensajeIlegal){var o={titulo:this.titulo,primeraRespuesta:this.mensaje};this.enviandoConversacion=!0;var e=this;this.$apollo.mutate({mutation:c()(Ze(),Be),variables:{idForo:e.idForo,input:o}}).then((function(o){var i=o.data.iniciarConversacionConPrimerMensajeForo;e.enviandoConversacion=!1,e.$emit("hiceConversacion",i)})).catch((function(o){e.enviandoConversacion=!1,console.log("Error. E: ".concat(o))}))}}},computed:{tituloIlegal:function(){return!this.titulo||this.titulo.length<1||!!Xe.test(this.titulo)},mensajeIlegal:function(){return!this.mensaje||this.mensaje.length<1||!!We.test(this.mensaje)}}},ei=oi,ii=(i("6937"),Object(m["a"])(ei,He,Ye,!1,null,"1f1dc492",null)),ai=ii.exports,ni=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"conversacion",class:{seleccionado:o.seleccionado,deshabilitado:o.seleccionado&&o.loading}},[a("div",{staticClass:"tituloConversacion"},[a("img",{staticClass:"imagenConversacion",attrs:{src:i("96cc"),alt:"Conversacion"}}),o._v(" "+o._s(o.estaConversacion.titulo)+" ")]),o.numPaginas>0?a("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"zonaSelectorPaginas"},o._l(o.numPaginas,(function(e){return a("div",{key:e,staticClass:"selectorPagina",class:{selectorSeleccionado:e==o.numPaginaSeleccionada},on:{click:function(i){o.numPaginaSeleccionada=e}}},[o._v(" "+o._s(e)+" ")])})),0):o._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],staticClass:"zonaRespuestas"},[a("div",{staticClass:"zonaPaginas"},o._l(o.numPaginas,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:o.numPaginaSeleccionada==e,expression:"numPaginaSeleccionada == index"}],key:"pagina"+e,staticClass:"pagina"},o._l(o.respuestasPorPagina[e],(function(i){return a("respuesta",{key:i.id,attrs:{idConversacion:o.estaConversacion.id,estaRespuesta:i},on:{meElimine:function(a){return o.updateRespuestaEliminada(i.id,e)}}})})),1)})),0),o.usuarioLogeado&&("publico"==o.estaConversacion.acceso||1==o.usuarioMiembro)&&o.estaConversacion.id?a("cuadro-responder",{directives:[{name:"show",rawName:"v-show",value:o.numPaginaSeleccionada==o.numPaginas,expression:"numPaginaSeleccionada == numPaginas"}],ref:"cuadroResponder",attrs:{parent:o.parent,idConversacion:o.estaConversacion.id},on:{hiceRespuesta:function(e){return o.addRespuesta(e)}}}):o._e()],1),a("div",{staticClass:"controlesConversacion"})])},ti=[],si=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"cuadroResponder"},[a("div",{attrs:{id:"barraSuperior"}},[a("img",{attrs:{src:i("1070"),alt:"Contestar",title:"Contestar en esta conversación",id:"imgMensaje"},on:{click:o.toggleCuadroAbierto}}),a("span",{attrs:{id:"tituloCuadro"}},[o._v("Envía una respuesta")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"adjuntarArchivo"}},[a("input",{ref:"inputArchivoAdjunto",attrs:{type:"file",id:"inputArchivoAdjunto"},on:{change:o.actualizarNombreDeArchivo}}),a("img",{attrs:{src:i("3a9d"),alt:"Ajuntar archivo",id:"imgAdjuntar",title:"adjuntar un archivo"},on:{click:o.abrirSelectorDeArchivos}}),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:o.nombreArchivoSeleccionado,expression:"nombreArchivoSeleccionado"}],attrs:{id:"nombreArchivoSeleccionado"}},[o._v(" "+o._s(o.nombreArchivoSeleccionado)+" ")])]),a("textarea",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"},{name:"model",rawName:"v-model",value:o.mensaje,expression:"mensaje"}],class:{letrasRojas:o.mensajeIlegal},attrs:{name:"inputMensaje",id:"inputMensaje",placeholder:"Escribe aquí tu respuesta"},domProps:{value:o.mensaje},on:{input:function(e){e.target.composing||(o.mensaje=e.target.value)}}}),a("img",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto&&!o.enviandoRespuesta,expression:"cuadroAbierto && !enviandoRespuesta"}],class:{deshabilitado:o.mensajeIlegal},attrs:{src:i("4e77"),alt:"Enviar",title:"Enviar respuesta",id:"bEnviar"},on:{click:o.evaluarAdjunto}}),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoRespuesta,expression:"enviandoRespuesta"}],attrs:{texto:"Enviando respuesta..."}})],1)},ri=[];i("b0c0");function ci(){var o=Object(s["a"])(["\n            mutation(\n              $idConversacion: ID!\n              $nuevaRespuesta: InputNuevaRespuesta,\n              $parent:InputParent\n            ) {\n              postRespuestaConversacion(\n                idConversacion: $idConversacion\n                nuevaRespuesta: $nuevaRespuesta,\n                parent:$parent\n              ) {\n                ...fragRespuesta\n              }\n            }\n            ","\n          "]);return ci=function(){return o},o}var di=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,ui={components:{Loading:Qo},name:"CuadroResponder",props:{idConversacion:String,parent:Object},data:function(){return{mensaje:null,cuadroAbierto:!1,enviandoRespuesta:!1,nombreArchivoSeleccionado:null}},methods:{evaluarAdjunto:function(){var o=this;if(!this.mensajeIlegal){this.enviandoRespuesta=!0;var e=this.$refs.inputArchivoAdjunto,i=new FormData;if(e.value){var a=e.files[0],n=a["type"];console.log("subiendo un ".concat(n)),i.append("archivoAdjunto",a);var t=this;_o()({method:"post",url:this.serverUrl+"/api/foros/adjuntarArchivoParaRespuesta",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data.infoArchivo,a={infoArchivo:{idGoogleDrive:i.idGoogleDrive,googleDriveDirectLink:i.googleDriveDirectLink,extension:i.extensionDeArchivo,nombre:i.extensionDeArchivo},mensaje:t.mensaje};o.enviarNuevaRespuesta(a)})).catch((function(e){o.enviandoRespuesta=!1,console.log("Errores: ".concat(e)),e.response&&e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))}else{console.log("El input de archivo adjunto estaba vacio");var s={infoArchivo:null,mensaje:this.mensaje};this.enviarNuevaRespuesta(s)}}},enviarNuevaRespuesta:function(o){var e=this;if(!this.mensajeIlegal){console.log("Enviando respuesta");var i=this;this.enviandoRespuesta=!0,this.$apollo.mutate({mutation:c()(ci(),_e),variables:{idConversacion:i.idConversacion,nuevaRespuesta:o,parent:i.parent}}).then((function(o){var a=o.data.postRespuestaConversacion;i.enviandoRespuesta=!1,e.$emit("hiceRespuesta",a),e.cerrarse()})).catch((function(o){i.enviandoRespuesta=!1,console.log("Error. E: ".concat(o))}))}},toggleCuadroAbierto:function(){this.cuadroAbierto=!this.cuadroAbierto},cerrarse:function(){this.mensaje=null,this.$refs.inputArchivoAdjunto.value=null,this.nombreArchivoSeleccionado=null,this.cuadroAbierto=!1},actualizarNombreDeArchivo:function(){if(!this.$refs.inputArchivoAdjunto.value)return console.log("Nullificando el nombre de archivo seleccionado"),void(this.nombreArchivoSeleccionado=null);this.nombreArchivoSeleccionado=this.$refs.inputArchivoAdjunto.files[0].name},abrirSelectorDeArchivos:function(){this.$refs.inputArchivoAdjunto.click()}},computed:{mensajeIlegal:function(){return!this.mensaje||this.mensaje.length<1||!!di.test(this.mensaje)}}},li=ui,vi=(i("f21a"),Object(m["a"])(li,si,ri,!1,null,"22eeac26",null)),pi=vi.exports,mi=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"respuesta"},[a("div",{staticClass:"infoRespuesta"},[o._v(o._s(o.fechaFormateada))]),a("img",{staticClass:"caritaAutor",attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaRespuesta.infoAutor.id,alt:o.estaRespuesta.infoAutor.nombre}}),a("div",{staticClass:"mensajeRespuesta"},[o._v(" "+o._s(o.estaRespuesta.mensaje)+" ")]),o.estaRespuesta.archivo&&o.estaRespuesta.archivo.googleDriveDirectLink?a("div",{attrs:{id:"archivo"}},[a("a",{attrs:{href:o.estaRespuesta.archivo.googleDriveDirectLink}},[a("img",{attrs:{src:i("60ee"),alt:"Descargar archivo",id:"imgDownloadArchivo"}})])]):o._e(),a("div",{staticClass:"controles"},[o.usuarioAutor||o.usuarioSuperadministrador?a("div",{staticClass:"controlRespuesta",attrs:{id:"bEliminar"},on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])])},hi=[];function fi(){var o=Object(s["a"])(["\n          mutation($idRespuesta: ID!, $idConversacion:ID!) {\n            eliminarRespuesta(idRespuesta: $idRespuesta, idConversacion:$idConversacion)\n          }\n        "]);return fi=function(){return o},o}var Ai={name:"Respuesta",props:{estaRespuesta:{type:Object},idConversacion:String},computed:{fechaFormateada:function(){var o=new Date(this.estaRespuesta.fecha).toString(),e=o.indexOf("("),i=o.substr(0,e),a=i.indexOf("GMT");return a>-1&&(i=i.substr(0,a)),i},usuarioAutor:function(){return this.usuario.id==this.estaRespuesta.infoAutor.id}},methods:{eliminarse:function(){var o=this;confirm("Eliminando respuesta ¿Continuar?")&&this.$apollo.mutate({mutation:c()(fi()),variables:{idRespuesta:this.estaRespuesta.id,idConversacion:this.idConversacion},update:function(e,i){var a=i.data.eliminarRespuesta;a&&(console.log("Respuesta eliminada"),o.$emit("meElimine"))}})}}},bi=Ai,gi=(i("fbc0"),Object(m["a"])(bi,mi,hi,!1,null,"7fabd3dd",null)),Ni=gi.exports;function yi(){var o=Object(s["a"])(["\n  query($idConversacion: ID!, $pagina: Int!) {\n    respuestasPaginaDeConversacion(\n      idConversacion: $idConversacion\n      pagina: $pagina\n    ) {\n      pagina\n      numPaginas\n      respuestas {\n        ...fragRespuesta\n      }\n    }\n  }\n  ","\n"]);return yi=function(){return o},o}var Pi=c()(yi(),_e),Ci={components:{Respuesta:Ni,CuadroResponder:pi},name:"Conversacion",apollo:{numPaginas:{query:Pi,variables:function(){return{idConversacion:this.estaConversacion.id,pagina:this.numPaginaSeleccionada}},update:function(o){var e=o.respuestasPaginaDeConversacion,i=e.pagina,a=e.numPaginas,n=e.respuestas;return console.log("Llenando con ".concat(n.length," respuestas la pagina ").concat(i," de ").concat(a)),this.$set(this.respuestasPorPagina,i,n),this.numPaginaSeleccionada!=i&&(this.numPaginaSeleccionada=i),this.loading=!1,a},skip:function(){return!this.seleccionado},fetchPolicy:"no-cache"}},data:function(){return{numPaginas:0,numPaginaSeleccionada:0,respuestasPorPagina:{},loading:!0}},props:{estaConversacion:{type:Object,default:function(){return{respuestas:[]}}},parent:Object,seleccionado:Boolean,usuarioMiembro:{type:Boolean,default:!1}},methods:{addRespuesta:function(o){var e=this.numPaginas;(this.respuestasPorPagina[e].length>=5||e<1)&&(e++,this.respuestasPorPagina[e]||this.$set(this.respuestasPorPagina,e,[])),console.log("Pushing en targetPagina ".concat(e)),this.respuestasPorPagina[e].push(o),this.$refs.cuadroResponder.cerrarse(),this.numPaginaSeleccionada!=e&&(this.numPaginaSeleccionada=e)},updateRespuestaEliminada:function(o,e){console.log("Respuesta ".concat(o," eliminada de la pagina ").concat(e)),1==this.numPaginas&&this.respuestasPorPagina[1].length<2?(console.log("Era la ultima respuesta"),this.$emit("meElimine")):(console.log("Refreshing respuestas pagina"),this.$apollo.queries.numPaginas.refresh())}}},Ei=Ci,wi=(i("3ec9"),Object(m["a"])(Ei,ni,ti,!1,null,"b7d198b8",null)),xi=wi.exports;function ji(){var o=Object(s["a"])(["\n  query($idForo: ID!, $pagina: Int!) {\n    conversacionesPaginaForo(idForo: $idForo, pagina: $pagina) {\n      pagina\n      numPaginas\n      conversaciones {\n        ...fragConversacion\n      }\n    }\n  }\n  ","\n"]);return ji=function(){return o},o}function Di(){var o=Object(s["a"])(["\n  query($idForo: ID!) {\n    foro(idForo: $idForo) {\n      id\n      acceso\n      miembros {\n        ...fragResponsables\n      }\n    }\n  }\n  ","\n"]);return Di=function(){return o},o}var Ri=c()(Di(),$e),Si=c()(ji(),Be),Ti={components:{CreadorConversacion:ai,Conversacion:xi},name:"Foro",apollo:{esteForo:{query:Ri,variables:function(){return{idForo:this.idForo}},fetchPolicy:"cache-and-network",update:function(o){return o.foro},skip:function(){return!this.idForo}},numPaginas:{query:Si,variables:function(){return{idForo:this.idForo,pagina:this.numPaginaSeleccionada}},fetchPolicy:"no-cache",skip:function(){return!this.idForo},update:function(o){var e=o.conversacionesPaginaForo,i=e.conversaciones,a=e.pagina,n=e.numPaginas;return this.numPaginaSeleccionada!=a&&(this.numPaginaSeleccionada=a),this.$set(this.conversacionesPorPagina,a,i),n}}},props:{idForo:String,parent:Object},data:function(){return{esteForo:{miembros:[],conversaciones:[]},idConversacionSeleccionada:null,creandoConversacion:!1,numPaginaSeleccionada:0,conversacionesPorPagina:{}}},methods:{addConversacion:function(o){this.creandoConversacion=!1;var e=this.numPaginas;console.log("Target página: ".concat(e)),(this.conversacionesPorPagina[e].length>=6||e<1)&&(e++,this.conversacionesPorPagina[e]||this.$set(this.conversacionesPorPagina,e,[])),console.log("Pushing en targetPagina ".concat(e)),this.conversacionesPorPagina[e].push(o),this.numPaginaSeleccionada!=e&&(this.numPaginaSeleccionada=e)},refreshPagina:function(){this.idConversacionSeleccionada=null,this.$apollo.queries.numPaginas.refresh()}},computed:{usuarioMiembro:function(){var o=this;return"publico"==this.esteForo.acceso||!("privado"!=this.esteForo.acceso||!this.esteForo.miembros.some((function(e){return e.id==o.$store.state.usuario.id})))},conversacionAbierta:function(){return this.idConversacionSeleccionada}}},$i=Ti,ki=(i("5cdb"),Object(m["a"])($i,Je,Ke,!1,null,"57fa5eb1",null)),Ii=ki.exports;function Oi(){var o=Object(s["a"])(["\n          mutation($idNodo:ID!, $nombreSeccion:String!, $nombreArchivo:String!){\n            marcarPrimarioArchivoSeccionNodo(idNodo:$idNodo, nombreSeccion:$nombreSeccion, nombreArchivo:$nombreArchivo)\n          }\n        "]);return Oi=function(){return o},o}function Gi(){var o=Object(s["a"])(["\n          mutation($idNodo:ID!, $nombreSeccion:String!, $nombreArchivo:String!){\n            eliminarArchivoSeccionNodo(idNodo:$idNodo, nombreSeccion:$nombreSeccion, nombreArchivo:$nombreArchivo)\n          }\n        "]);return Gi=function(){return o},o}function Mi(){var o=Object(s["a"])(["\n            mutation($idNodo: ID!, $nuevoNombre: String!) {\n              editarNombreNodo(idNodo: $idNodo, nuevoNombre: $nuevoNombre) {\n                modificados {\n                  id\n                  nombre\n                }\n              }\n            }\n          "]);return Mi=function(){return o},o}function _i(){var o=Object(s["a"])(["\n            mutation($idNodo: ID!, $idUsuario: ID!) {\n              addExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                expertos\n                posiblesExpertos\n              }\n            }\n          "]);return _i=function(){return o},o}function Bi(){var o=Object(s["a"])(["\n            mutation($idNodo: ID!, $idUsuario: ID!) {\n              addPosibleExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                posiblesExpertos\n              }\n            }\n          "]);return Bi=function(){return o},o}function Ui(){var o=Object(s["a"])(["\n            mutation($idNodo: ID!, $idUsuario: ID!) {\n              addExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                expertos\n                posiblesExpertos\n              }\n            }\n          "]);return Ui=function(){return o},o}function qi(){var o=Object(s["a"])(["\n            mutation($idNodo: ID!, $idUsuario: ID!) {\n              removeExpertoNodo(idNodo: $idNodo, idUsuario: $idUsuario) {\n                id\n                expertos\n                posiblesExpertos\n              }\n            }\n          "]);return qi=function(){return o},o}function Fi(){var o=Object(s["a"])(["\n            mutation($idNodo: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionNodoConocimiento(\n                idNodo: $idNodo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return Fi=function(){return o},o}function zi(){var o=Object(s["a"])(["\n  query($idNodo: ID!) {\n    nodo(idNodo: $idNodo) {\n      nombre\n      id\n      descripcion\n      expertos\n      posiblesExpertos\n      idForoPublico\n      idForoExpertos\n      secciones{\n        nombre\n        archivos{\n          nombre\n          primario\n        }\n        tipoPrimario\n      }\n      vinculos {\n        idRef\n        rol\n        tipo\n      }\n    }\n  }\n"]);return zi=function(){return o},o}var Qi=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?"@=-]/,Vi=/[^ a-zA-ZÀ-ž0-9_():.,-]/,Li=c()(zi()),Ji={components:{Loading:Qo,IconoPersonaAutonomo:Le,Foro:Ii},name:"VisorNodoConocimiento",apollo:{esteNodo:{query:Li,variables:function(){return{idNodo:this.$route.params.idNodo}},update:function(o){var e=o.nodo;return e.secciones.forEach((function(o){o.subiendoArchivo=!1,o.archivos.forEach((function(o){o.enviandoInfo=!1}))})),e}}},data:function(){return{esteNodo:{expertos:[],posiblesExpertos:[],secciones:[]},secciones:[{nombre:"descripcion",texto:"Descripción"},{nombre:"expertos",texto:"Expertos"},{nombre:"foros",texto:"Foros"}],indexInicioContenidos:1,seccionesContenidos:[{nombre:"explicacion",texto:"Explicación",editandose:!1,subiendoArchivo:!1}],seccionSeleccionada:"descripcion",nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:null,editandoDescripcion:!1,enviandoNuevoDescripcion:!1,idExpertoSeleccionado:null,expertoSeleccionadoEstaAceptado:!1,enviandoQueryExpertos:!1,editandoArchivosContenidos:!1}},computed:{seccionesOrganizadas:function(){var o=this.secciones;return o.splice.apply(o,[this.indexInicioContenidos,0].concat(Object(ye["a"])(this.seccionesContenidos))),o},direccionNodo:function(){return this.serverUrl+"/assetsAtlas/contenidosNodos/"+this.$route.params.idNodo},usuarioExperto:function(){return!!this.esteNodo.expertos&&!!this.esteNodo.expertos.includes(this.usuario.id)},usuarioPosibleExperto:function(){return!!this.esteNodo.posiblesExpertos&&!!this.esteNodo.posiblesExpertos.includes(this.usuario.id)},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!Vi.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!Qi.test(this.nuevoDescripcion)},infoAsParent:function(){return{id:this.esteNodo.id,tipo:"nodoConocimiento",nombre:this.esteNodo.nombre}},usuarioAdministradorAtlas:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("atlasAdministrador")}},methods:{toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteNodo.descripcion},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteNodo.nombre},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("Descripción ilegal"):this.nuevoDescripcion!=this.esteNodo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(Fi()),variables:{idNodo:this.esteNodo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){var i=e.graphQLErrors;o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(i))}))):this.editandoDescripcion=!1},abandonarListaExpertos:function(){var o=this;console.log("Abandonando la responsabilidad en este nodo"),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:c()(qi()),variables:{idNodo:this.esteNodo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryExpertos=!1})).catch((function(e){o.enviandoQueryExpertos=!1,console.log("error: "+e)}))},aceptarExperto:function(o){var e=this;console.log("aceptando como experto al usuario ".concat(o)),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:c()(Ui()),variables:{idNodo:this.esteNodo.id,idUsuario:o}}).then((function(){e.enviandoQueryExpertos=!1,e.expertoSeleccionadoEstaAceptado=!0})).catch((function(o){e.enviandoQueryExpertos=!1,console.log("error: "+o)}))},entrarListaPosiblesExpertos:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles expertos del nodo con id ".concat(this.esteNodo.id)),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:c()(Bi()),variables:{idNodo:this.esteNodo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryExpertos=!1})).catch((function(e){o.enviandoQueryExpertos=!1,console.log("error: "+e)}))},asumirComoExperto:function(){var o=this;console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de expertos del nodo con id ").concat(this.esteNodo.id)),this.enviandoQueryExpertos=!0,this.$apollo.mutate({mutation:c()(_i()),variables:{idNodo:this.esteNodo.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryExpertos=!1})).catch((function(e){o.enviandoQueryExpertos=!1,console.log("error: "+e)}))},guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteNodo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(Mi()),variables:{idNodo:this.esteNodo.id,nuevoNombre:this.nuevoNombre}}).then((function(e){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(e)," ")),o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},subirArchivoContenido:function(o,e){var i=this,a=o.target,n=new FormData,t=a.files[0];n.append("nuevoArchivo",t),n.append("idNodo",this.esteNodo.id),n.append("nombreSeccion",e.nombre),e.subiendoArchivo=!0,_o()({method:"post",url:this.serverUrl+"/api/atlas/subirArchivoContenidoSeccionNodo",data:n,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(o){var a=o.data.infoArchivo;e.subiendoArchivo=!1;var n=i.$apollo.provider.defaultClient,t=n.readQuery({query:Li,variables:{idNodo:i.$route.params.idNodo}}),s=JSON.parse(JSON.stringify(t)),r=s.nodo.secciones.find((function(o){return o.nombre==e.nombre}));r.archivos.push(a),n.writeQuery({query:Li,variables:{idNodo:i.$route.params.idNodo},data:s})})).catch((function(o){e.subiendoArchivo=!1,console.log("Error subiendo archivo. E: ".concat(o))}))},borrarArchivoExistenteSeccionNodo:function(o,e){var i=o.nombre;if(confirm("Borrando archivo ¿Continuar?")){var a=this;o.enviandoInfo=!0,this.$apollo.mutate({mutation:c()(Gi()),variables:{idNodo:this.$route.params.idNodo,nombreSeccion:e,nombreArchivo:i},update:function(n,t){var s=t.data.eliminarArchivoSeccionNodo;if(o.enviandoInfo=!1,s){var r=n.readQuery({query:Li,variables:{idNodo:a.$route.params.idNodo}}),c=JSON.parse(JSON.stringify(r)),d=c.nodo.secciones.find((function(o){return o.nombre==e}));if(d){var u=d.archivos.findIndex((function(o){return o.nombre==i}));u>-1?(d.archivos.splice(u,1),n.writeQuery({query:Li,variables:{idNodo:a.$route.params.idNodo},data:c})):console.log("Archivo no encontrado")}else console.log("Seccion no encontrada")}else console.log("Archivo no eliminado")}}).then((function(){})).catch((function(e){o.enviandoInfo=!1,console.log("Error. E: ".concat(e))}))}else console.log("Cancelado")},marcarPrimario:function(o,e){var i=o.nombre,a=this;o.enviandoInfo=!0,this.$apollo.mutate({mutation:c()(Oi()),variables:{idNodo:this.$route.params.idNodo,nombreSeccion:e,nombreArchivo:i},update:function(n,t){var s=t.data.marcarPrimarioArchivoSeccionNodo;if(o.enviandoInfo=!1,s){var r=n.readQuery({query:Li,variables:{idNodo:a.$route.params.idNodo}}),c=JSON.parse(JSON.stringify(r)),d=c.nodo.secciones.find((function(o){return o.nombre==e}));d?(d.archivos.forEach((function(o){o.primario=o.nombre==i})),n.writeQuery({query:Li,variables:{idNodo:a.$route.params.idNodo},data:c})):console.log("Seccion no encontrada")}else console.log("Archivo no marcado")}}).then((function(){})).catch((function(e){o.enviandoInfo=!1,console.log("Error. E: ".concat(e))}))}}},Ki=Ji,Hi=(i("cb13"),Object(m["a"])(Ki,ge,Ne,!1,null,"6c3bb0ea",null)),Yi=Hi.exports,Zi=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"proyectos"}},[i("center",[i("h3",[o._v("Proyectos")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!o.loading,expression:"!loading"}],attrs:{id:"controles"}},[o.usuarioLogeado?i("div",{staticClass:"controles hoverGris",attrs:{id:"crearProyecto"},on:{click:o.crearNuevoProyecto}},[o._v(" Crear nuevo proyecto ")]):o._e(),o.usuarioSuperadministrador&&o.proyectos.some((function(e){return e.id==o.idProyectoSeleccionado}))?i("div",{staticClass:"controles hoverGris",attrs:{id:"bEliminarProyecto"},on:{click:function(e){return o.eliminarProyecto(o.idProyectoSeleccionado)}}},[o._v(" Eliminar proyecto ")]):o._e()]),i("div",{attrs:{id:"listaProyectos"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idProyectoSeleccionado=null}}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loading,expression:"loading"}],attrs:{texto:"Cargando lista de proyectos..."}}),o._l(o.proyectos,(function(e){return i("icono-proyecto",{key:e.id,attrs:{esteProyecto:e,seleccionado:o.idProyectoSeleccionado==e.id},nativeOn:{click:function(i){o.idProyectoSeleccionado=e.id}}})}))],2)],1)},Wi=[],Xi=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"iconoProyecto",class:{proyectoPropio:o.usuarioResponsableProyecto,seleccionado:o.seleccionado},on:{dblclick:o.navegarAlProyecto}},[a("p",{ref:"nombre",attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteProyecto.nombre)+" ")]),a("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{src:i("4e77"),alt:"entrar",title:"Entrar a este proyecto",id:"bEntrarProyecto"},on:{click:function(e){return e.stopPropagation(),o.navegarAlProyecto(e)}}})])},oa=[],ea={name:"IconoProyecto",props:{esteProyecto:Object,seleccionado:Boolean},data:function(){return{nombreEditandose:!1}},computed:{usuarioResponsableProyecto:function(){return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.includes(this.usuario.id)}},methods:{navegarAlProyecto:function(){this.$router.push("/proyecto/"+this.esteProyecto.id)}}},ia=ea,aa=(i("6332"),Object(m["a"])(ia,Xi,oa,!1,null,"71c5f02f",null)),na=aa.exports;function ta(){var o=Object(s["a"])(["\n          mutation($idProyecto:ID!){\n            eliminarProyecto(idProyecto: $idProyecto)\n          }\n        "]);return ta=function(){return o},o}function sa(){var o=Object(s["a"])(["\n          mutation{\n            crearProyecto{\n              id\n              nombre\n              responsables              \n            }\n          }\n        "]);return sa=function(){return o},o}function ra(){var o=Object(s["a"])(["\nquery {\n    proyectos {\n      id\n      nombre\n      responsables\n    }\n  }\n"]);return ra=function(){return o},o}var ca=c()(ra()),da={components:{IconoProyecto:na,Loading:Qo},name:"Proyectos",apollo:{proyectos:{query:ca,fetchPolicy:"cache-and-network",update:function(o){var e=this,i=o.proyectos;return i.sort((function(o,i){var a=0;return o.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&a--,i.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&a++,e.loading=!1,a}))}}},data:function(){return{proyectos:[],idProyectoSeleccionado:null,loading:!0}},methods:{crearNuevoProyecto:function(){var o=this;console.log("Creando nuevo proyecto"),this.$apollo.mutate({mutation:c()(sa())}).then((function(e){var i=e.data.crearProyecto;o.$router.push("/proyecto/"+i.id)})).catch((function(o){console.log("Error: ".concat(o.errors))}))},eliminarProyecto:function(o){console.log("Eliminando proyecto ".concat(o)),this.$apollo.mutate({mutation:c()(ta()),variables:{idProyecto:o},update:function(e,i){var a=i.data.eliminarProyecto;if(console.log("Actualizando cache"),a){var n=e.readQuery({query:ca}),t=JSON.parse(JSON.stringify(n)),s=t.proyectos.findIndex((function(e){return e.id==o}));s>-1?(t.proyectos.splice(s,1),e.writeQuery({query:ca,data:t}),console.log("Caché actualizado")):console.log("No existía ese proyecto en el cache")}}}).then((function(){})).catch((function(o){console.log("Error. E:".concat(o))}))}},computed:{username:function(){return this.$store.state.usuario.username}}},ua=da,la=(i("d178"),Object(m["a"])(ua,Zi,Wi,!1,null,"1cae351b",null)),va=la.exports,pa=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"proyecto"},[a("loading",{directives:[{name:"show",rawName:"v-show",value:o.loading,expression:"loading"}],attrs:{texto:"Cargando proyecto..."}}),o.loading?o._e():[a("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaNombre"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[a("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del proyecto"},on:{click:o.toggleEditandoNombre}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:o.guardarNuevoNombre}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombreProyecto"}},[o._v(" "+o._s(o.esteProyecto.nombre)+" ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text",id:"inputNuevoNombre"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),a("img",{attrs:{src:i("c51c"),alt:"Enlace al foro",id:"enlaceForo",title:"Ir al foro de este proyecto"},on:{click:o.navegarAlForo}})],1),a("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[a("div",{staticClass:"nombreZona"},[o._v("Descripcion")]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[a("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrDescripcion",title:"Editar descripcion del proyecto"},on:{click:o.toggleEditandoDescripcion}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:o.guardarNuevoDescripcion}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteProyecto.descripcion)+" ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),a("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[a("div",{staticClass:"nombreZona"},[o._v("Responsables")]),a("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoQueryResponsables,expression:"enviandoQueryResponsables"}],attrs:{texto:"Esperando..."}}),1==o.usuarioLogeado&&o.esteProyecto.responsables.length<1?a("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsableProyecto&&!o.usuarioPosibleResponsableProyecto&&o.esteProyecto.responsables.length>0?a("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsableProyecto&&1!=o.usuarioPosibleResponsableProyecto?o._e():a("div",{staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]),1==o.usuarioLogeado&&1==o.usuarioResponsableProyecto?a("div",{directives:[{name:"show",rawName:"v-show",value:null!=o.idResponsableSeleccionado&&0==o.responsableSeleccionadoEstaAceptado,expression:"\n            idResponsableSeleccionado != null &&\n            responsableSeleccionadoEstaAceptado == false\n          "}],staticClass:"controlesResponsables hoverGris botonesControles",class:{deshabilitado:o.enviandoQueryResponsables},on:{click:function(e){return o.aceptarResponsable(o.idResponsableSeleccionado)}}},[o._v(" Aceptar como responsable ")]):o._e()],1),a("div",{attrs:{id:"listaResponsables"}},[o._l(o.esteProyecto.responsables,(function(e){return a("icono-persona-autonomo",{key:e,attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!0}}})})),o._l(o.esteProyecto.posiblesResponsables,(function(e){return a("icono-persona-autonomo",{key:e,staticClass:"personaPosibleResponsable",attrs:{idPersona:e,seleccionado:o.idResponsableSeleccionado==e},nativeOn:{click:function(i){i.stopPropagation(),o.idResponsableSeleccionado=e,o.responsableSeleccionadoEstaAceptado=!1},dblclick:function(i){return i.shiftKey?o.aceptarResponsable(e):null}}})}))],2)]),a("div",{ref:"zonaDiagramaFlujo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaDiagramaFlujo"}},[a("div",{staticClass:"nombreZona"},[o._v("Diagrama de flujo")]),a("div",{staticClass:"controlesZona",attrs:{id:"controlesObjetivos"}}),a("diagrama-flujo",{attrs:{idProyecto:o.esteProyecto.id,objetivos:o.esteProyecto.objetivos,idsTrabajos:o.esteProyecto.idsTrabajos,usuarioResponsableProyecto:o.usuarioResponsableProyecto,activo:null==o.idNodoAbierto},on:{crearTrabajoEnPosicion:o.crearNuevoTrabajo,crearObjetivoEnPosicion:o.crearNuevoObjetivo,nodoAbierto:o.abrirNodo},nativeOn:{click:function(e){o.idNodoAbierto=null}}}),o._l(o.esteProyecto.objetivos,(function(e){return a("iconoObjetivo",{directives:[{name:"show",rawName:"v-show",value:o.idNodoAbierto==e.id,expression:"idNodoAbierto == objetivo.id"}],key:e.id,staticClass:"ventanaNodo",attrs:{idProyecto:o.esteProyecto.id,esteObjetivo:e,usuarioResponsableProyecto:o.usuarioResponsableProyecto},on:{meElimine:function(i){return o.eliminarObjetivoDeCache(e.id)}}})})),o._l(o.esteProyecto.idsTrabajos,(function(e){return a("iconoTrabajo",{directives:[{name:"show",rawName:"v-show",value:o.idNodoAbierto==e,expression:"idNodoAbierto == idTrabajo"}],key:e,staticClass:"ventanaNodo",attrs:{idTrabajo:e,idProyecto:o.esteProyecto.id,usuarioResponsableProyecto:o.usuarioResponsableProyecto},on:{meElimine:function(i){return o.eliminarTrabajoDeCache(e)}}})}))],2),a("div",{ref:"zonaForo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaForo"}},[a("div",{staticClass:"nombreZona"},[o._v("foro")]),a("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteProyecto.idForo}})],1)]],2)},ma=[],ha=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"iconoTrabajo"},[a("img",{staticClass:"botonIr",attrs:{src:i("9d5e"),title:"Abrir la página de este trabajo"},on:{click:o.navegarAlTrabajo}}),a("div",{class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[a("div",{staticClass:"barraSuperiorZona"},[a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[a("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarrNombre",title:"Editar nombre del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),a("img",{attrs:{src:i("e463"),alt:"",id:"imagenIcono"}})],1),a("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[a("div",{staticClass:"barraSuperiorZona"},[a("span",{staticClass:"nombreZona"},[o._v("Descripcion")]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[a("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),a("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[a("div",{staticClass:"nombreZona"},[o._v("Responsables")]),a("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[1==o.usuarioLogeado&&0==o.usuarioResponsableTrabajo?a("div",{staticClass:"controlesResponsables hoverGris botonesControles",attrs:{id:"botonParticipar"},on:{click:o.asumirComoResponsable}},[o._v(" Participar ")]):o._e(),1==o.usuarioResponsableTrabajo?a("div",{staticClass:"controlesResponsables hoverGris botonesControles",on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]):o._e()]),a("div",{attrs:{id:"listaResponsables"}},o._l(o.esteTrabajo.responsables,(function(o){return a("icono-persona-autonomo",{key:o,attrs:{idPersona:o,aceptado:!0}})})),1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaNodosConocimiento"}},[a("div",{staticClass:"nombreZona"},[o._v("Nodos de conocimiento involucrados")]),a("div",{staticClass:"controlesZona",attrs:{id:"controlesNodosConocimiento"}},[1==o.usuarioResponsableProyecto?a("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Añadir ")]):o._e(),1==o.usuarioResponsableProyecto&&null!=o.idNodoSeleccionado&&o.esteTrabajo.nodosConocimiento.some((function(e){return e.id==o.idNodoSeleccionado}))?a("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Remover ")]):o._e()]),a("div",{attrs:{id:"listaNodosConocimiento"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idNodoSeleccionado=null}}},[o._l(o.esteTrabajo.nodosConocimiento,(function(e){return a("icono-nodo-conocimiento",{key:e.id,attrs:{esteNodo:e},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id}}})})),a("buscador-nodos-conocimiento")],2)]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaKeywords"}},[a("div",{staticClass:"barraSuperiorZona"},[a("span",{staticClass:"nombreZona"},[o._v("Palabras clave")]),a("div",{staticClass:"controlesZona"},[a("img",{staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarKeywords",title:"Editar palabras clave del trabajo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoKeywords(e)}}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoKeywords&&0==o.nuevoKeywordsIlegal,expression:"\n            editandoKeywords == true && nuevoKeywordsIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoKeywords"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoKeywords(e)}}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoKeywords,expression:"!editandoKeywords"}],ref:"keywords",attrs:{id:"keywords"}},[o._v(" "+o._s(o.esteTrabajo.keywords)+" ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoKeywords,expression:"nuevoKeywords"},{name:"show",rawName:"v-show",value:o.editandoKeywords,expression:"editandoKeywords"}],ref:"inputNuevoKeywords",class:{letrasRojas:o.nuevoKeywordsIlegal},attrs:{id:"inputNuevoKeywords"},domProps:{value:o.nuevoKeywords},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),o.guardarNuevoKeywords(e))},input:function(e){e.target.composing||(o.nuevoKeywords=e.target.value)}}}),o._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoKeywords,expression:"enviandoNuevoKeywords"}],attrs:{texto:"Enviando..."}})],1),a("div",{attrs:{id:"controlesTrabajo"}},[1==o.usuarioResponsableProyecto?a("div",{staticClass:"controlesTrabajo hoverGris bEliminar",on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])])},fa=[],Aa=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"buscadorNodosConocimiento"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:o.palabraBuscada,expression:"palabraBuscada"}],attrs:{type:"text",placeholder:"Buscar"},domProps:{value:o.palabraBuscada},on:{input:function(e){e.target.composing||(o.palabraBuscada=e.target.value)}}}),i("img",{attrs:{id:"imagenTentativa",src:"",alt:""}}),i("div",{staticClass:"opciones"},o._l(o.opciones,(function(e){return i("div",{key:e.id,staticClass:"opcion"},[o._v(" "+o._s(e.nombre)+" ")])})),0)])},ba=[];function ga(){var o=Object(s["a"])(["\n              query($palabrasBuscadas: [String]!) {\n                busquedaAmplia(palabrasBuscadas: $palabrasBuscadas) {\n                  id\n                  nombre\n                  resumen\n                }\n              }\n            "]);return ga=function(){return o},o}var Na=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,ya={name:"BuscadorNodosConocimiento",data:function(){return{palabraBuscada:"",cantidadPalabrasValidas:0,opciones:[]}},watch:{palabraBuscada:function(o){o=o.trim(),o=o.replace(Na,""),o=o.replace(/\s\s+/g," ");for(var e=o.split(" "),i=[],a=0,n=0;n<e.length;n++)e[n].length>=3&&(i[a]=e[n],a++);this.palabrasValidas=i,this.cantidadPalabrasValidas=i.length,console.log("cantidad palabras validas: ".concat(this.cantidadPalabrasValidas))},cantidadPalabrasValidas:function(o,e){var i=this;o>e&&(console.log("Descargando nuevas opciones"),this.$apollo.query({query:c()(ga()),variables:{palabrasBuscadas:this.palabrasValidas},fetchPolicy:"network-only"}).then((function(o){var e=o.data.busquedaAmplia;console.log("respuesta: ".concat(JSON.stringify(e))),i.opciones=e})).catch((function(o){console.log("Error: ".concat(o))})))}}},Pa=ya,Ca=Object(m["a"])(Pa,Aa,ba,!1,null,"0ee434dc",null),Ea=Ca.exports;function wa(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!) {\n              eliminarTrabajoDeProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n              )\n            }\n          "]);return wa=function(){return o},o}function xa(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return xa=function(){return o},o}function ja(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return ja=function(){return o},o}function Da(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevoKeywords: String!\n            ) {\n              editarKeywordsTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoKeywords: $nuevoKeywords\n              ) {\n                id\n                keywords\n              }\n            }\n          "]);return Da=function(){return o},o}function Ra(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return Ra=function(){return o},o}function Sa(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoNombre: String!) {\n              editarNombreTrabajoProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Sa=function(){return o},o}function Ta(){var o=Object(s["a"])(["\n  query($idTrabajo: ID!) {\n    trabajo(idTrabajo: $idTrabajo) {\n      id\n      nombre\n      descripcion\n      responsables\n      keywords\n      idProyectoParent\n    }\n  }\n"]);return Ta=function(){return o},o}var $a=/[^ a-zA-ZÀ-ž0-9_():.,-]/,ka=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,Ia=/[^ a-zA-Zñ,]/,Oa=c()(Ta()),Ga={name:"IconoTrabajo",components:{BuscadorNodosConocimiento:Ea,Loading:Qo,IconoPersonaAutonomo:Le},apollo:{esteTrabajo:{query:Oa,variables:function(){return{idTrabajo:this.idTrabajo}},update:function(o){var e=o.trabajo;return e.keywords||(e.keywords=""),e},skip:function(){return!this.idTrabajo}}},data:function(){return{esteTrabajo:{responsables:[]},idNodoSeleccionado:null,deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,nuevoKeywords:"palabras clave",editandoKeywords:!1,enviandoNuevoKeywords:!1}},props:{idProyecto:String,seleccionado:Boolean,usuarioResponsableProyecto:{type:Boolean,defaul:!1},idTrabajo:String},computed:{usuarioResponsableTrabajo:function(){return this.esteTrabajo.responsables.includes(this.usuario.id)},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!$a.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return this.nuevoDescripcion.length<1||!!ka.test(this.nuevoDescripcion)},nuevoKeywordsIlegal:function(){return this.nuevoKeywords.length<1||!!Ia.test(this.nuevoKeywords)},infoAsParent:function(){return{id:this.esteTrabajo.id,tipo:"trabajo",nombre:this.esteTrabajo.nombre}}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteTrabajo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(Sa()),variables:{idTrabajo:this.esteTrabajo.id,idProyecto:this.esteTrabajo.idProyectoParent,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteTrabajo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(Ra()),variables:{idProyecto:this.esteTrabajo.idProyectoParent,idTrabajo:this.esteTrabajo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},guardarNuevoKeywords:function(){var o=this;this.nuevoKeywordsIlegal?console.log("No enviado"):this.nuevoKeywords!=this.esteTrabajo.keywords?(console.log("guardando nuevo keywords"),this.enviandoNuevoKeywords=!0,this.$apollo.mutate({mutation:c()(Da()),variables:{idProyecto:this.esteTrabajo.idProyectoParent,idTrabajo:this.esteTrabajo.id,nuevoKeywords:this.nuevoKeywords}}).then((function(){o.enviandoNuevoKeywords=!1,o.editandoKeywords=!1})).catch((function(e){o.enviandoNuevoKeywords=!1,console.log("Error. E :".concat(e))}))):this.editandoKeywords=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteTrabajo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteTrabajo.descripcion},toggleEditandoKeywords:function(){this.$refs.inputNuevoKeywords.style.height=this.$refs.keywords.offsetHeight+"px",this.editandoKeywords=!this.editandoKeywords,this.nuevoKeywords=this.esteTrabajo.keywords},asumirComoResponsable:function(){console.log("enviando id ".concat(this.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id," en el proyecto con id ").concat(this.esteTrabajo.idProyectoParent)),this.$apollo.mutate({mutation:c()(ja()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},abandonarListaResponsables:function(){console.log("Abandonando este trabajo"),this.$apollo.mutate({mutation:c()(xa()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},eliminarse:function(){var o=this;console.log("Trabajo eliminandose"),confirm("¿Seguro de eliminar este trabajo?")&&(this.deshabilitado=!0,this.$apollo.mutate({mutation:c()(wa()),variables:{idProyecto:this.esteTrabajo.idProyectoParent,idTrabajo:this.esteTrabajo.id}}).then((function(e){var i=e.data.eliminarTrabajoDeProyecto;o.deshabilitado=!1,console.log("Resultado: ".concat(i)),o.$emit("meElimine")})).catch((function(e){o.deshabilitado=!1,console.log("Error. E: ".concat(e))})))},navegarAlTrabajo:function(){this.$router.push("/trabajo/"+this.idTrabajo)}}},Ma=Ga,_a=(i("310a"),Object(m["a"])(Ma,ha,fa,!1,null,"366059c9",null)),Ba=_a.exports,Ua=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"iconoObjetivo",class:{seleccionado:o.seleccionado}},[a("div",{staticClass:"zonaPrimerNivel",class:{bordeAbajo:o.seleccionado},attrs:{id:"zonaNombre"}},[a("div",{staticClass:"barraSuperiorZona"},[a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[a("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarNombre",title:"Editar nombre del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoNombre(e)}}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoNombre&&0==o.nuevoNombreIlegal,expression:"editandoNombre == true && nuevoNombreIlegal == false"}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoNombre"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoNombre(e)}}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoNombre,expression:"!editandoNombre"}],attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteObjetivo.nombre)+" ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"},{name:"show",rawName:"v-show",value:o.editandoNombre,expression:"editandoNombre"}],staticClass:"inputNuevoNombre",class:{letrasRojas:o.nuevoNombreIlegal},attrs:{type:"text"},domProps:{value:o.nuevoNombre},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNuevoNombre(e)},input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}}),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Enviando..."}}),a("img",{attrs:{src:i("416c"),alt:"",id:"imagenIcono"}})],1),a("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[a("div",{staticClass:"barraSuperiorZona"},[a("span",{staticClass:"nombreZona"},[o._v("Descripcion")]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"controlesZona"},[a("img",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto,expression:"usuarioResponsableProyecto"}],staticClass:"bEditar",attrs:{src:i("559e"),alt:"Editar",id:"bEditarDescripcion",title:"Editar descripcion del objetivo"},on:{click:function(e){return e.stopPropagation(),o.toggleEditandoDescripcion(e)}}}),a("img",{directives:[{name:"show",rawName:"v-show",value:1==o.editandoDescripcion&&0==o.nuevoDescripcionIlegal,expression:"\n            editandoDescripcion == true && nuevoDescripcionIlegal == false\n          "}],staticClass:"bGuardar",attrs:{src:i("4fc3"),alt:"Guardar",title:"guardar",id:"bGuardarNuevoDescripcion"},on:{click:function(e){return e.stopPropagation(),o.guardarNuevoDescripcion(e)}}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!o.editandoDescripcion,expression:"!editandoDescripcion"}],ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteObjetivo.descripcion)+" ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:o.nuevoDescripcion,expression:"nuevoDescripcion"},{name:"show",rawName:"v-show",value:o.editandoDescripcion,expression:"editandoDescripcion"}],ref:"inputNuevoDescripcion",class:{letrasRojas:o.nuevoDescripcionIlegal},attrs:{id:"inputNuevoDescripcion"},domProps:{value:o.nuevoDescripcion},on:{input:function(e){e.target.composing||(o.nuevoDescripcion=e.target.value)}}}),o._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoDescripcion,expression:"enviandoNuevoDescripcion"}],attrs:{texto:"Enviando..."}})],1),a("div",{attrs:{id:"controlesObjetivo"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:o.usuarioResponsableProyecto||o.usuarioSuperadministrador,expression:"usuarioResponsableProyecto || usuarioSuperadministrador"}],staticClass:"controlesObjetivo hoverGris bEliminar",on:{click:o.eliminarse}},[o._v(" Eliminar ")])])])},qa=[];function Fa(){var o=Object(s["a"])(["\n          mutation($idProyecto: ID!, $idObjetivo:ID!){\n            eliminarObjetivoDeProyecto(idProyecto:$idProyecto, idObjetivo: $idObjetivo)\n          }\n        "]);return Fa=function(){return o},o}function za(){var o=Object(s["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevoDescripcion: String!\n            ) {\n              editarDescripcionObjetivoProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return za=function(){return o},o}function Qa(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idObjetivo:ID!, $nuevoNombre: String!) {\n              editarNombreObjetivoProyecto(\n                idProyecto: $idProyecto,\n                idObjetivo:$idObjetivo,\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Qa=function(){return o},o}var Va=/[^ a-zA-ZÀ-ž0-9_():.,-]/,La=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,Ja={name:"IconoObjetivo",components:{Loading:Qo},data:function(){return{deshabilitado:!1,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1}},props:{idProyecto:String,esteObjetivo:Object,seleccionado:Boolean,usuarioResponsableProyecto:Boolean},computed:{nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!Va.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return this.nuevoDescripcion.length<1||!!La.test(this.nuevoDescripcion)}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteObjetivo.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(Qa()),variables:{idObjetivo:this.esteObjetivo.id,idProyecto:this.idProyecto,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteObjetivo.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(za()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteObjetivo.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteObjetivo.descripcion},eliminarse:function(){var o=this;console.log("Objetivo eliminandose"),confirm("¿Seguro de eliminar este trabajo?")&&(this.deshabilitado=!0,this.$apollo.mutate({mutation:c()(Fa()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id}}).then((function(e){var i=e.data.eliminarObjetivoDeProyecto;o.deshabilitado=!1,console.log("Resultado: ".concat(i)),o.$emit("meElimine")})).catch((function(e){o.deshabilitado=!1,console.log("Error. E: ".concat(e))})))}}},Ka=Ja,Ha=(i("abff"),Object(m["a"])(Ka,Ua,qa,!1,null,"e5f708d8",null)),Ya=Ha.exports,Za=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"diagramaFlujo",style:[o.opacidad],attrs:{id:"diagramaFlujo"},on:{contextmenu:function(e){return e.target!==e.currentTarget?null:(e.preventDefault(),o.abrirMenuCx(e))},click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.target!==e.currentTarget?null:(o.idNodoClickDerecho=null,o.idNodoSeleccionado=null,void(o.mostrandoMenuCx=!1))}}},[i("canvas-diagrama-flujo",{attrs:{todosNodos:o.infoNodos}}),o._l(o.idsTrabajos,(function(e){return i("nodo-trabajo",{key:e,attrs:{idTrabajo:e,idProyecto:o.idProyecto,usuarioResponsableProyecto:o.usuarioResponsableProyecto,seleccionado:o.idNodoSeleccionado==e,posDummy:o.posDummy,menuCx:o.idNodoClickDerecho===e,idNodoSeleccionado:o.idNodoSeleccionado},on:{empujandoDummyPorAbajo:function(e){return o.reposDummy(0,5)},empujandoDummyPorDerecha:function(e){return o.reposDummy(5,0)},saliendose:o.scrollDiagrama,miInfo:function(i){return o.actualizarInfoTrabajos(e,i)},crearRequerimento:function(e){return o.crearRequerimento("trabajo",e)},eliminarVinculo:function(e){return o.eliminarVinculo("trabajo",e)}},nativeOn:{click:function(i){o.idNodoSeleccionado=e,o.tipoNodoSeleccionado="trabajo"},dblclick:function(i){return o.$emit("nodoAbierto",e)},contextmenu:function(i){i.preventDefault(),o.idNodoClickDerecho=e}}})})),o._l(o.objetivos,(function(e){return i("nodo-objetivo",{key:e.id,attrs:{idProyecto:o.idProyecto,esteObjetivo:e,usuarioResponsableProyecto:o.usuarioResponsableProyecto,seleccionado:o.idNodoSeleccionado==e.id,idNodoSeleccionado:o.idNodoSeleccionado,posDummy:o.posDummy,menuCx:o.idNodoClickDerecho===e.id},on:{saliendose:o.scrollDiagrama,empujandoDummyPorAbajo:function(e){return o.reposDummy(0,5)},empujandoDummyPorDerecha:function(e){return o.reposDummy(5,0)},crearRequerimento:function(e){return o.crearRequerimento("objetivo",e)},eliminarVinculo:function(e){return o.eliminarVinculo("objetivo",e)}},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id,o.tipoNodoSeleccionado="objetivo"},dblclick:function(i){return o.$emit("nodoAbierto",e.id)},contextmenu:function(i){i.preventDefault(),i.stopPropagation(),o.idNodoClickDerecho=e.id}}})})),i("div",{ref:"dummy",style:[o.estiloPosDummy],attrs:{id:"dummy"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:o.mostrandoMenuCx,expression:"mostrandoMenuCx"}],style:o.posMenuCx,attrs:{id:"menuCx"}},[i("div",{staticClass:"itemMenuCx",on:{click:o.crearTrabajoAqui}},[o._v("Crear trabajo aquí")]),i("div",{staticClass:"itemMenuCx",on:{click:o.crearObjetivoAqui}},[o._v(" Crear objetivo aquí ")])])],2)},Wa=[],Xa=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{attrs:{id:"canvasDiagramaFlujo"}},[i("canvas",{ref:"canvasTodosVinculos",staticClass:"canvas",attrs:{id:"canvasTodosVinculos"}}),i("canvas",{ref:"canvasVinculosSeleccionado",staticClass:"canvas",style:[o.sizeCanvasTodosVinculos],attrs:{id:"canvasVinculosSeleccionado"}})])},on=[],en={name:"CanvasDiagramaFlujo",props:{todosNodos:Array,nodoSeleccionado:{type:Object,default:function(){return{}}}},data:function(){return{sizeCanvasTodosVinculos:{width:0,height:0}}},methods:{crearImagenTodosVinculos:function(){var o=this;if(!(this.todosNodos.length<=1)){this.lapiz=this.$refs.canvasTodosVinculos.getContext("2d");var e={};e.top=this.todosNodos.reduce((function(o,e){return e.posicion.y>o?e.posicion.y:o}),0),e.bot=this.todosNodos.reduce((function(o,e){return e.posicion.y<o?e.posicion.y:o}),0),e.left=this.todosNodos.reduce((function(o,e){return e.posicion.x<o?e.posicion.x:o}),0),e.right=this.todosNodos.reduce((function(o,e){return e.posicion.x>o?e.posicion.x:o}),0);var i=parseInt(e.right-e.left),a=parseInt(e.top-e.bot);(i>5e3||a>5e3)&&console.log("ALERTA. Diagrama demasiado grande"),this.$set(this.sizeCanvasTodosVinculos,"width",i+"px"),this.$set(this.sizeCanvasTodosVinculos,"height",a+"px"),this.lapiz.canvas.width=i,this.lapiz.canvas.height=a,this.$refs.canvasVinculosSeleccionado.width=i,this.$refs.canvasVinculosSeleccionado.height=a,this.lapiz.lineWidth=1,this.lapiz.clearRect(0,0,i,a),this.lapiz.beginPath(),this.lapiz.strokeStyle="#b3b3b3";var n,t=Object(ro["a"])(this.todosNodos);try{for(t.s();!(n=t.n()).done;){var s,r=n.value,c=Object(ro["a"])(r.vinculos);try{var d=function(){var e=s.value;if(!o.todosNodos.some((function(o){return o.id==e.idRef})))return"continue";o.dibujarLineaEntreNodos(o.todosNodos.find((function(o){return o.id==e.idRef})),r)};for(c.s();!(s=c.n()).done;)d()}catch(u){c.e(u)}finally{c.f()}}}catch(u){t.e(u)}finally{t.f()}this.lapiz.stroke()}},crearImagenVinculosSeleccionado:function(){var o=this;if(this.lapiz=this.$refs.canvasVinculosSeleccionado.getContext("2d"),this.lapiz.clearRect(0,0,this.lapiz.canvas.width,this.lapiz.canvas.height),this.todosNodos.some((function(e){return e.id==o.nodoSeleccionado.id}))){this.lapiz.beginPath(),this.lapiz.lineWidth=2,this.lapiz.strokeStyle="#008000";var e,i=Object(ro["a"])(this.nodoSeleccionado.vinculos);try{var a=function(){var i=e.value;if(!o.todosNodos.some((function(o){return o.id==i.idRef})))return console.log("ALERTA. Vinculo a ".concat(i.idRef," huerfano")),"continue";var a=o.todosNodos.find((function(o){return o.id==i.idRef}));o.dibujarLineaEntreNodos(a,o.nodoSeleccionado)};for(i.s();!(e=i.n()).done;)a()}catch(n){i.e(n)}finally{i.f()}this.lapiz.stroke()}},dibujarLineaEntreNodos:function(o,e){var i={x:o.posicion.x,y:o.posicion.y},a={x:e.posicion.x,y:e.posicion.y};this.lapiz.moveTo(i.x,i.y),this.lapiz.lineTo(a.x,a.y);var n={x:(a.x+i.x)/2,y:(a.y+i.y)/2},t=7,s=Math.atan((a.y-i.y)/(a.x-i.x));a.y-i.y<0&&a.x-i.x<0&&(s+=Math.PI),a.y-i.y>0&&a.x-i.x<0&&(s+=Math.PI);var r={x:n.x+t*Math.cos(s-3*Math.PI/4),y:n.y+t*Math.sin(s-3*Math.PI/4)},c={x:n.x+t*Math.cos(s+3*Math.PI/4),y:n.y+t*Math.sin(s+3*Math.PI/4)};this.lapiz.moveTo(n.x,n.y),this.lapiz.lineTo(r.x,r.y),this.lapiz.moveTo(n.x,n.y),this.lapiz.lineTo(c.x,c.y)}},watch:{todosNodos:function(){this.todosNodos.length<1||(this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado())},nodoSeleccionado:function(){this.crearImagenVinculosSeleccionado()}},mounted:function(){this.montado=!0,this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()}},an=en,nn=Object(m["a"])(an,Xa,on,!1,null,"30b5d218",null),tn=nn.exports,sn=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"nodoObjetivo",class:{seleccionado:o.seleccionado},style:[o.estiloPosicion,o.estiloZeta],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.agarrado=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo}},[a("div",{staticClass:"zonaNombre"},[a("div",{attrs:{id:"nombre"}},[a("img",{staticClass:"iconoObjetivo",attrs:{src:i("416c"),alt:""}}),o._v(o._s(o.esteObjetivo.nombre)+" ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[null==o.idNodoSeleccionado||o.idNodoSeleccionado==o.esteObjetivo.id||1!=o.usuarioSuperadministrador&&!o.usuarioResponsableProyecto?o._e():[a("div",{staticClass:"seccionMenuCx"},[o._v("El elemento seleccionado...")]),a("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearRequerimento(o.idNodoSeleccionado,o.esteObjetivo.id)}}},[o._v(" Requiere este elemento ")]),a("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.idNodoSeleccionado,o.esteObjetivo.id)}}},[o._v(" Desconectar ")])]],2)])},rn=[];function cn(){var o=Object(s["a"])(["\n            mutation(\n              $idObjetivo: ID!\n              $idProyecto: ID!\n              $nuevaPosicion: CoordsInput\n            ) {\n              setPosicionObjetivoDiagramaProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevaPosicion: $nuevaPosicion\n              ) {\n                id\n                diagramaProyecto {\n                  posicion {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return cn=function(){return o},o}var dn={name:"NodoObjetivo",props:{esteObjetivo:Object,idProyecto:String,usuarioResponsableProyecto:Boolean,seleccionado:Boolean,idNodoSeleccionado:String,posDummy:Object,menuCx:Boolean},data:function(){return{agarrado:!1,arrastrandoNodo:0,umbralArrastreNodo:25,posicion:{x:0,y:0},montado:!1}},methods:{arrastrarNodo:function(o){if(this.agarrado&&(!1!==this.usuarioResponsableProyecto||!1!==this.usuarioSuperadministrador)&&(this.arrastrandoNodo=this.arrastrandoNodo+Math.abs(o.movementX)+Math.abs(o.movementY),!(this.arrastrandoNodo<this.umbralArrastreNodo))){var e=this.$parent.$el,i=this.$parent.$el.getBoundingClientRect(),a=Math.round(o.clientY-i.top+e.scrollTop),n=Math.round(o.clientX-i.left+e.scrollLeft),t=25,s=15,r=Math.floor(n/t),c=Math.floor(a/s);n=r*t,a=c*s,this.$set(this.posicion,"x",n),this.$set(this.posicion,"y",a),this.posDummy.y<a+100&&(console.log("pushing dummy por abajo"),this.$emit("empujandoDummyPorAbajo")),this.posDummy.x<n+100&&(console.log("pushing dummy por la derecha"),this.$emit("empujandoDummyPorDerecha"));var d=100,u={der:i.left+e.offsetWidth-o.clientX,izq:o.clientX-i.left,top:i.top+e.offsetHeight-o.clientY,bot:o.clientY-i.top},l={x:0,y:0};u.der<d&&(console.log("der"),l.x=d-u.der),u.izq<d&&(console.log("izq"),l.x=u.izq-d),u.top<d&&(console.log("top"),l.y=d-u.top),u.bot<d&&(console.log("bot"),l.y=u.bot-d),this.$emit("saliendose",l)}},guardarPosicion:function(){this.arrastrandoNodo<this.umbralArrastreNodo?this.agarrado=!1:(this.arrastrandoNodo=0,this.agarrado=!1,this.$apollo.mutate({mutation:c()(cn()),variables:{idProyecto:this.idProyecto,idObjetivo:this.esteObjetivo.id,nuevaPosicion:this.posicion}}).then((function(){console.log("Posición guardada")})).catch((function(o){console.log("Error. E: ".concat(o))})))},crearRequerimento:function(o,e){console.log("Se fijara que ".concat(o," requiere a ").concat(e)),this.$emit("crearRequerimento",{idNodoRequiere:o,idNodoRequerido:e})},eliminarVinculo:function(o,e){console.log("Se fijara que ".concat(o," ya no requiere a ").concat(e)),this.$emit("eliminarVinculo",{idNodoRequiere:o,idNodoRequerido:e})}},computed:{estiloPosicion:function(){return this.montado?{top:this.posicion.y-this.$el.offsetHeight/2+"px",left:this.posicion.x-this.$el.offsetWidth/2+"px"}:{top:"0px",left:"0px"}},estiloZeta:function(){var o=0;return(this.arrastrandoNodo>this.umbralArrastreNodo||this.seleccionado)&&(o=100),this.menuCx&&(o=200),{zIndex:o}}},watch:{esteObjetivo:function(){console.log("Seteando posicion from network"),this.$set(this.posicion,"x",this.esteObjetivo.diagramaProyecto.posicion.x),this.$set(this.posicion,"y",this.esteObjetivo.diagramaProyecto.posicion.y)}},mounted:function(){this.montado=!0,this.$set(this.posicion,"x",this.esteObjetivo.diagramaProyecto.posicion.x),this.$set(this.posicion,"y",this.esteObjetivo.diagramaProyecto.posicion.y)}},un=dn,ln=(i("eb35"),Object(m["a"])(un,sn,rn,!1,null,"4f88114c",null)),vn=ln.exports,pn=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"nodoTrabajo",class:{seleccionado:o.seleccionado},style:[o.estiloPosicion,o.estiloZeta],on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:void(o.agarrado=!0)},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo}},[a("div",{staticClass:"zonaNombre"},[a("div",{attrs:{id:"nombre"}},[a("img",{staticClass:"iconoTrabajo",attrs:{src:i("e463"),alt:""}}),o._v(" "+o._s(o.esteTrabajo.nombre)+" ")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[null==o.idNodoSeleccionado||o.idNodoSeleccionado==o.esteTrabajo.id||1!=o.usuarioSuperadministrador&&!o.usuarioResponsableProyecto?o._e():[a("div",{staticClass:"seccionMenuCx"},[o._v("El elemento seleccionado...")]),a("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearRequerimento(o.idNodoSeleccionado,o.esteTrabajo.id)}}},[o._v(" Requiere este elemento ")]),a("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.idNodoSeleccionado,o.esteTrabajo.id)}}},[o._v(" Desconectar ")])]],2)])},mn=[];function hn(){var o=Object(s["a"])(["\n            mutation(\n              $idTrabajo: ID!\n              $idProyecto: ID!\n              $nuevaPosicion: CoordsInput\n            ) {\n              setPosicionTrabajoDiagramaProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevaPosicion: $nuevaPosicion\n              ) {\n                id\n                diagramaProyecto {\n                  posicion {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return hn=function(){return o},o}function fn(){var o=Object(s["a"])(["\n  query($idTrabajo: ID!) {\n    trabajo(idTrabajo: $idTrabajo) {\n      id\n      nombre\n      diagramaProyecto {\n        posicion {\n          x\n          y\n        }\n      }\n      vinculos {\n        idRef\n        tipo\n        tipoRef\n      }\n    }\n  }\n"]);return fn=function(){return o},o}var An=c()(fn()),bn={name:"NodoTrabajo",apollo:{esteTrabajo:{query:An,variables:function(){return{idTrabajo:this.idTrabajo}},update:function(o){var e=o.trabajo,i={id:e.id,posicion:e.diagramaProyecto.posicion,vinculos:e.vinculos};return this.$emit("miInfo",i),e},skip:function(){return!this.idTrabajo},fetchPolicy:"cache-and-network"}},data:function(){return{esteTrabajo:{vinculos:[]},agarrado:!1,arrastrandoNodo:0,umbralArrastreNodo:25,posicion:{x:0,y:0},montado:!1}},props:{idTrabajo:String,idProyecto:String,idNodoSeleccionado:String,usuarioResponsableProyecto:Boolean,seleccionado:Boolean,posDummy:Object,menuCx:Boolean},methods:{arrastrarNodo:function(o){if(this.agarrado&&(!1!==this.usuarioResponsableProyecto||!1!==this.usuarioSuperadministrador)&&(this.arrastrandoNodo=this.arrastrandoNodo+Math.abs(o.movementX)+Math.abs(o.movementY),!(this.arrastrandoNodo<this.umbralArrastreNodo))){var e=this.$parent.$el,i=e.getBoundingClientRect(),a=Math.round(o.clientY-i.top+e.scrollTop),n=Math.round(o.clientX-i.left+e.scrollLeft),t=25,s=15,r=Math.floor(n/t),c=Math.floor(a/s);n=r*t,a=c*s,this.$set(this.posicion,"x",n),this.$set(this.posicion,"y",a),this.posDummy.y<a+100&&(console.log("Saliendose por abajo"),this.$emit("empujandoDummyPorAbajo")),this.posDummy.x<n+100&&(console.log("Saliendose por la derecha"),this.$emit("empujandoDummyPorDerecha"));var d=100,u={der:i.left+e.offsetWidth-o.clientX,izq:o.clientX-i.left,top:i.top+e.offsetHeight-o.clientY,bot:o.clientY-i.top},l={x:0,y:0};u.der<d&&(console.log("der"),l.x=d-u.der),u.izq<d&&(console.log("izq"),l.x=u.izq-d),u.top<d&&(console.log("top"),l.y=d-u.top),u.bot<d&&(console.log("bot"),l.y=u.bot-d),this.$emit("saliendose",l)}},guardarPosicion:function(){var o=this;this.arrastrandoNodo<this.umbralArrastreNodo?this.agarrado=!1:(this.arrastrandoNodo=0,this.agarrado=!1,this.$apollo.mutate({mutation:c()(hn()),variables:{idProyecto:this.idProyecto,idTrabajo:this.idTrabajo,nuevaPosicion:this.posicion}}).then((function(){console.log("Posición guardada"),o.emitirMiInfo()})).catch((function(o){console.log("Error. E: ".concat(o))})))},emitirMiInfo:function(){var o={id:this.esteTrabajo.id,posicion:this.esteTrabajo.diagramaProyecto.posicion,vinculos:this.esteTrabajo.vinculos};this.$emit("miInfo",o)},crearRequerimento:function(o,e){console.log("Se fijara que ".concat(o," requiere a ").concat(e)),this.$emit("crearRequerimento",{idNodoRequiere:o,idNodoRequerido:e})},eliminarVinculo:function(o,e){console.log("Se fijara que ".concat(o," ya no requiere a ").concat(e)),this.$emit("eliminarVinculo",{idNodoRequiere:o,idNodoRequerido:e})}},computed:{estiloPosicion:function(){return this.montado?{top:this.posicion.y-this.$el.offsetHeight/2+"px",left:this.posicion.x-this.$el.offsetWidth/2+"px"}:{top:"0px",left:"0px"}},estiloZeta:function(){var o=0;return 1!=this.arrastrandoNodo&&1!=this.seleccionado||(o=100),this.menuCx&&(o=200),{zIndex:o}}},watch:{esteTrabajo:function(){this.$set(this.posicion,"x",this.esteTrabajo.diagramaProyecto.posicion.x),this.$set(this.posicion,"y",this.esteTrabajo.diagramaProyecto.posicion.y)}},mounted:function(){this.montado=!0}},gn=bn,Nn=(i("4675"),Object(m["a"])(gn,pn,mn,!1,null,"42fc6c34",null)),yn=Nn.exports;function Pn(){var o=Object(s["a"])(["\n          mutation(\n            $idProyecto:ID!,\n            $idNodoRequiere: ID!,\n            $idNodoRequerido: ID!,\n            $tipoNodoRequiere: String!,\n            $tipoNodoRequerido: String!,\n          ) {\n            desvincularNodosProyecto(\n              idProyecto:$idProyecto,\n              idNodoRequiere: $idNodoRequiere,\n              idNodoRequerido: $idNodoRequerido,\n              tipoNodoRequiere: $tipoNodoRequiere,\n              tipoNodoRequerido: $tipoNodoRequerido,\n            ) {\n              nodo {\n                ...on Objetivo{\n                  id\n                  vinculos{\n                    idRef\n                    tipoRef\n                    tipo\n                  }\n                }\n                ...on Trabajo{\n                  id\n                  vinculos{\n                    idRef\n                    tipoRef\n                    tipo\n                  }\n                }\n              }\n            }\n          }\n        "]);return Pn=function(){return o},o}function Cn(){var o=Object(s["a"])(["\n          mutation(\n            $idProyecto:ID!,\n            $idNodoRequiere: ID!,\n            $idNodoRequerido: ID!,\n            $tipoNodoRequiere: String!,\n            $tipoNodoRequerido: String!,\n          ) {\n            crearRequerimentoEntreNodosProyecto(\n              idProyecto:$idProyecto,\n              idNodoRequiere: $idNodoRequiere,\n              idNodoRequerido: $idNodoRequerido,\n              tipoNodoRequiere: $tipoNodoRequiere,\n              tipoNodoRequerido: $tipoNodoRequerido,\n            ) {\n              nodo {\n                ...on Objetivo{\n                  id\n                  vinculos{\n                    idRef\n                    tipoRef\n                    tipo\n                  }\n                }\n                ...on Trabajo{\n                  id\n                  vinculos{\n                    idRef\n                    tipoRef\n                    tipo\n                  }\n                }\n              }\n            }\n          }\n        "]);return Cn=function(){return o},o}var En={components:{NodoObjetivo:vn,NodoTrabajo:yn,CanvasDiagramaFlujo:tn},name:"DiagramaFlujo",props:{idsTrabajos:Array,objetivos:Array,idProyecto:String,usuarioResponsableProyecto:Boolean,activo:Boolean},data:function(){return{posicionMenuCx:{x:0,y:0},mostrandoMenuCx:!1,idNodoSeleccionado:null,tipoNodoSeleccionado:null,posDummy:{x:300,y:300},infoTrabajos:[],idNodoClickDerecho:null}},computed:{posMenuCx:function(){return{top:this.posicionMenuCx.y+"px",left:this.posicionMenuCx.x+"px"}},opacidad:function(){return{opacity:this.activo?1:.4}},estiloPosDummy:function(){return{top:this.posDummy.y+"px",left:this.posDummy.x+"px"}},infoObjetivos:function(){return this.objetivos.map((function(o){return{id:o.id,posicion:o.diagramaProyecto.posicion,vinculos:o.vinculos}}))},infoNodos:function(){return this.infoObjetivos.concat(this.infoTrabajos)}},methods:{abrirMenuCx:function(o){var e=this.$el,i=e.getBoundingClientRect();this.$set(this.posicionMenuCx,"x",Math.round(o.clientX-i.left+e.scrollLeft)),this.$set(this.posicionMenuCx,"y",Math.round(o.clientY-i.top+e.scrollTop)),this.mostrandoMenuCx=!0},crearTrabajoAqui:function(o){var e={x:0,y:0},i=this.$el,a=i.getBoundingClientRect();e.x=Math.round(o.clientX-a.left+i.scrollLeft),e.y=Math.round(o.clientY-a.top+i.scrollTop),this.$emit("crearTrabajoEnPosicion",e)},crearObjetivoAqui:function(o){var e={x:0,y:0},i=this.$el,a=i.getBoundingClientRect();e.x=Math.round(o.clientX-a.left+i.scrollLeft),e.y=Math.round(o.clientY-a.top+i.scrollTop),this.$emit("crearObjetivoEnPosicion",e)},reposDummy:function(o,e){this.$set(this.posDummy,"x",this.posDummy.x+20*o),this.$set(this.posDummy,"y",this.posDummy.y+20*e)},scrollDiagrama:function(o){var e=o.x,i=o.y;this.$el.scrollBy(e,i)},actualizarInfoTrabajos:function(o,e){var i=this.infoTrabajos.findIndex((function(e){return e.id===o}));i>-1&&this.infoTrabajos.splice(i,1),this.infoTrabajos.push(e)},crearRequerimento:function(o,e){var i=e.idNodoRequiere,a=e.idNodoRequerido;console.log("Preparando mutación para setear que ".concat(i," requiere a ").concat(a," de tipo ").concat(o));var n=this.tipoNodoSeleccionado;this.$apollo.mutate({mutation:c()(Cn()),variables:{idProyecto:this.idProyecto,idNodoRequiere:i,idNodoRequerido:a,tipoNodoRequiere:n,tipoNodoRequerido:o}}).then((function(o){var e=o.data.crearRequerimentoEntreNodosProyecto;console.log("Requerimento creado: ".concat(JSON.stringify(e)))})).catch((function(o){console.log("Error",o.message)}))},eliminarVinculo:function(o,e){var i=e.idNodoRequiere,a=e.idNodoRequerido;console.log("Preparando mutación para setear que ".concat(i," ya no está vinculado a ").concat(a," de tipo ").concat(o));var n=this.tipoNodoSeleccionado;this.$apollo.mutate({mutation:c()(Pn()),variables:{idProyecto:this.idProyecto,idNodoRequiere:i,idNodoRequerido:a,tipoNodoRequiere:n,tipoNodoRequerido:o}}).then((function(){console.log("Vinculo eliminado")})).catch((function(o){console.log("Error",o.message)}))}},mount:function(){this.$set(this.sizeDiagrama,"w",this.$$parent.$refs.zonaDiagramaFlujo.offsetWidth),this.$set(this.sizeDiagrama,"h",this.$$parent.$refs.zonaDiagramaFlujo.offsetHeight)}},wn=En,xn=(i("f8c2"),Object(m["a"])(wn,Za,Wa,!1,null,"05580614",null)),jn=xn.exports;function Dn(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $posicion: CoordsInput) {\n              crearObjetivoEnProyecto(\n                idProyecto: $idProyecto\n                posicion: $posicion\n              ) {\n                id\n                nombre\n                descripcion\n                vinculos{\n                  idRef\n                  tipoRef\n                  tipo\n                }\n                diagramaProyecto {\n                  posicion {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return Dn=function(){return o},o}function Rn(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $posicion: CoordsInput) {\n              crearTrabajoEnProyecto(\n                idProyecto: $idProyecto\n                posicion: $posicion\n              )\n            }\n          "]);return Rn=function(){return o},o}function Sn(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return Sn=function(){return o},o}function Tn(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addPosibleResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                posiblesResponsables\n              }\n            }\n          "]);return Tn=function(){return o},o}function $n(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return $n=function(){return o},o}function kn(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              removeResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n                posiblesResponsables\n              }\n            }\n          "]);return kn=function(){return o},o}function In(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $nuevoDescripcion: String!) {\n              editarDescripcionProyecto(\n                idProyecto: $idProyecto\n                nuevoDescripcion: $nuevoDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return In=function(){return o},o}function On(){var o=Object(s["a"])(["\n            mutation($idProyecto: ID!, $nuevoNombre: String!) {\n              editarNombreProyecto(\n                idProyecto: $idProyecto\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return On=function(){return o},o}function Gn(){var o=Object(s["a"])(["\n  query($idProyecto: ID!) {\n    proyecto(idProyecto: $idProyecto) {\n      ...fragProyecto\n    }\n  }\n  ","\n"]);return Gn=function(){return o},o}var Mn=c()(Gn(),Me),_n=/[^ a-zA-ZÀ-ž0-9_():.,-]/,Bn=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@=-]/,Un={components:{IconoTrabajo:Ba,IconoObjetivo:Ya,Loading:Qo,Foro:Ii,IconoPersonaAutonomo:Le,DiagramaFlujo:jn},name:"proyecto",apollo:{esteProyecto:{query:Mn,variables:function(){return{idProyecto:this.$route.params.idProyecto}},update:function(o){return this.loading=!1,o.proyecto},fetchPolicy:"cache-and-network"}},data:function(){return{loading:!0,esteProyecto:{responsables:[],posiblesResponsables:[]},idResponsableSeleccionado:null,responsableSeleccionadoEstaAceptado:!1,enviandoQueryResponsables:!1,creandoTrabajo:!1,idTrabajoSeleccionado:null,idObjetivoSeleccionado:null,nuevoNombre:"Nuevo nombre",editandoNombre:!1,enviandoNuevoNombre:!1,nuevoDescripcion:"Nueva descripcion",editandoDescripcion:!1,enviandoNuevoDescripcion:!1,idNodoAbierto:null}},computed:{usuarioResponsableProyecto:function(){return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.includes(this.$store.state.usuario.id)},usuarioPosibleResponsableProyecto:function(){return!!this.esteProyecto.posiblesResponsables&&!!this.esteProyecto.posiblesResponsables.includes(this.usuario.id)},permisosEdicion:function(){return!(!this.usuarioResponsableProyecto&&"superadministrador"!=this.$store.state.usuario.permisos)},nuevoNombreIlegal:function(){return this.nuevoNombre.length<1||!!_n.test(this.nuevoNombre)},nuevoDescripcionIlegal:function(){return!this.nuevoDescripcion||this.nuevoDescripcion.length<1||!!Bn.test(this.nuevoDescripcion)},infoAsParent:function(){return{id:this.esteProyecto.id,tipo:"proyecto",nombre:this.esteProyecto.nombre}}},methods:{guardarNuevoNombre:function(){var o=this;this.nuevoNombreIlegal?console.log("No enviado"):this.nuevoNombre!=this.esteProyecto.nombre?(console.log("guardando nuevo nombre"),this.enviandoNuevoNombre=!0,this.$apollo.mutate({mutation:c()(On()),variables:{idProyecto:this.esteProyecto.id,nuevoNombre:this.nuevoNombre}}).then((function(){o.enviandoNuevoNombre=!1,o.editandoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("Error. E :".concat(e))}))):this.editandoNombre=!1},guardarNuevoDescripcion:function(){var o=this;this.nuevoDescripcionIlegal?console.log("No enviado"):this.nuevoDescripcion!=this.esteProyecto.descripcion?(console.log("guardando nuevo descripcion"),this.enviandoNuevoDescripcion=!0,this.$apollo.mutate({mutation:c()(In()),variables:{idProyecto:this.esteProyecto.id,nuevoDescripcion:this.nuevoDescripcion}}).then((function(){o.enviandoNuevoDescripcion=!1,o.editandoDescripcion=!1})).catch((function(e){o.enviandoNuevoDescripcion=!1,console.log("Error. E :".concat(e))}))):this.editandoDescripcion=!1},toggleEditandoNombre:function(){this.editandoNombre=!this.editandoNombre,this.nuevoNombre=this.esteProyecto.nombre},toggleEditandoDescripcion:function(){this.$refs.inputNuevoDescripcion.style.height=this.$refs.descripcion.offsetHeight+"px",this.editandoDescripcion=!this.editandoDescripcion,this.nuevoDescripcion=this.esteProyecto.descripcion},abandonarListaResponsables:function(){var o=this;console.log("Abandonando la responsabilidad en este proyecto"),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(kn()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},aceptarResponsable:function(o){var e=this;console.log("aceptando como responsable al usuario ".concat(o)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()($n()),variables:{idProyecto:this.esteProyecto.id,idUsuario:o}}).then((function(){e.enviandoQueryResponsables=!1,e.responsableSeleccionadoEstaAceptado=!0})).catch((function(o){e.enviandoQueryResponsables=!1,console.log("error: "+o)}))},entrarListaPosiblesResponsables:function(){var o=this;console.log("Enviando peticion de entrar a la lista de posibles responsables del proyecto con id ".concat(this.esteProyecto.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Tn()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},asumirComoResponsable:function(){var o=this;console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del proyecto con id ").concat(this.esteProyecto.id)),this.enviandoQueryResponsables=!0,this.$apollo.mutate({mutation:c()(Sn()),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){o.enviandoQueryResponsables=!1})).catch((function(e){o.enviandoQueryResponsables=!1,console.log("error: "+e)}))},crearNuevoTrabajo:function(o){var e=this;console.log("enviando mutacion de crear nuevo trabajo"),this.creandoTrabajo=!0,this.$apollo.mutate({mutation:c()(Rn()),variables:{idProyecto:this.esteProyecto.id,posicion:o},update:function(o,i){var a=i.data.crearTrabajoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(a)));var n=a;try{var t=o.readQuery({query:Mn,variables:{idProyecto:e.esteProyecto.id}});console.log("Trabajos en cache: ".concat(t.proyecto.idsTrabajos.length));var s=JSON.parse(JSON.stringify(t));s.proyecto.idsTrabajos.push(n),o.writeQuery({query:Mn,variables:{idProyecto:e.esteProyecto.id},data:s}),console.log("cache actualizado"),console.log("Trabajos en cache: ".concat(s.proyecto.idsTrabajos.length))}catch(r){return void console.log("Error actualizando cache: ".concat(r))}}}).then((function(){e.creandoTrabajo=!1})).catch((function(o){e.creandoTrabajo=!1,console.log("error: ".concat(o))}))},crearNuevoObjetivo:function(o){var e=this;console.log("enviando mutacion de crear nuevo objetivo"),this.$apollo.mutate({mutation:c()(Dn()),variables:{idProyecto:this.esteProyecto.id,posicion:o},update:function(o,i){var a=i.data.crearObjetivoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(JSON.stringify(a))));var n=a;try{var t=o.readQuery({query:Mn,variables:{idProyecto:e.esteProyecto.id}}),s=JSON.parse(JSON.stringify(t));s.proyecto.objetivos.push(n),o.writeQuery({query:Mn,variables:{idProyecto:e.esteProyecto.id},data:s}),console.log("cache actualizado")}catch(r){return void console.log("Error actualizando cache: ".concat(r))}}}).then((function(o){console.log("respuesta. ".concat(o))})).catch((function(o){console.log("error: ".concat(o))}))},eliminarTrabajoDeCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Mn,variables:{idProyecto:this.esteProyecto.id}}),a=JSON.parse(JSON.stringify(i)),n=a.proyecto.idsTrabajos.indexOf(o);n>-1?a.proyecto.idsTrabajos.splice(n,1):console.log("El trabajo no existía en el proyecto"),e.writeQuery({query:Mn,variables:{idProyecto:this.esteProyecto.id},data:a})},eliminarObjetivoDeCache:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Mn,variables:{idProyecto:this.esteProyecto.id}}),a=JSON.parse(JSON.stringify(i)),n=a.proyecto.objetivos.findIndex((function(e){return e.id==o}));n>-1?a.proyecto.objetivos.splice(n,1):console.log("El objetivo no existía en el proyecto"),e.writeQuery({query:Mn,variables:{idProyecto:this.esteProyecto.id},data:a})},navegarAlForo:function(){console.log("Navegando al foro de este proyecto"),this.$refs.zonaForo.scrollIntoView()},abrirNodo:function(o){console.log("Abriendo nodo ".concat(o)),this.idNodoAbierto=o}}},qn=Un,Fn=(i("766c"),Object(m["a"])(qn,pa,ma,!1,null,"c2827922",null)),zn=Fn.exports,Qn=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"registro"},[i("form",[i("div",{attrs:{id:"zonaDatosPersonales"}},[i("h3",[o._v("Información Personal")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.nombres,expression:"datosRegistro.nombres"}],attrs:{type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.datosRegistro.nombres},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"nombres",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.apellidos,expression:"datosRegistro.apellidos"}],attrs:{type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.datosRegistro.apellidos},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"apellidos",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.fechaNacimiento,expression:"datosRegistro.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.datosRegistro.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"fechaNacimiento",e.target.value)}}}),i("br")]),i("div",{attrs:{id:"zonaContacto"}},[i("h3",[o._v("Datos de contacto")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.email,expression:"datosRegistro.email"}],attrs:{type:"email",placeholder:"Correo electrónico"},domProps:{value:o.datosRegistro.email},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"email",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"numeroTel"}},[o._v("Número telefónico")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.numeroTel,expression:"datosRegistro.numeroTel"}],attrs:{type:"text",name:"numeroTel"},domProps:{value:o.datosRegistro.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"numeroTel",e.target.value)}}}),i("br"),i("br"),i("label",{attrs:{for:"lugarResidencia"}},[o._v("Lugar de residencia")]),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.lugarResidencia,expression:"datosRegistro.lugarResidencia"}],attrs:{type:"text",placeholder:"Lugar de residencia"},domProps:{value:o.datosRegistro.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"lugarResidencia",e.target.value)}}})]),i("div",{attrs:{id:"zonaLogin"}},[i("h3",[o._v("Datos de login")]),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.username,expression:"datosRegistro.username"}],attrs:{type:"text",placeholder:"nombre de usuario",name:"username"},domProps:{value:o.datosRegistro.username},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"username",e.target.value)}}}),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.password,expression:"datosRegistro.password"}],attrs:{type:"password",placeholder:"password",name:"password"},domProps:{value:o.datosRegistro.password},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"password",e.target.value)}}}),i("br")]),i("button",{on:{click:function(e){return e.preventDefault(),o.enviarRegistro(e)}}},[o._v("Enviar")])])])},Vn=[],Ln={name:"Registro",data:function(){return{datosRegistro:{nombres:null,apellidos:null,fechaNacimiento:null,email:null,numeroTel:null,lugarResidencia:null,username:null,password:null},camposObligatorios:["nombres","apellidos","username","password"]}},methods:{enviarRegistro:function(){var o=new Object;for(var e in this.datosRegistro)this.datosRegistro[e]?o[e]=this.datosRegistro[e]:console.log("campo ".concat(e," vacio"));this.camposObligatorios.forEach((function(e){o[e]||console.log("Faltaba el campo ".concat(e))}));var i=this,a=re(o);a.length<1?_o.a.post(this.serverUrl+"/api/usuarios/registro",{usuario:o}).then((function(o){console.log("respuesta: ".concat(JSON.stringify(o.data))),o.data.registro&&(console.log("Registro ok"),i.$router.push("/login"))})).catch((function(o){console.log("error: ".concat(o))})):console.log("Errores: ".concat(a))},alertar:function(o){console.log(o)}}},Jn=Ln,Kn=(i("8ee4"),Object(m["a"])(Jn,Qn,Vn,!1,null,"40e8f437",null)),Hn=Kn.exports,Yn=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"actividadesProfes"},[i("div",{attrs:{id:"layout"}},[i("div",{staticClass:"barraSeleccion",attrs:{id:"barraGrupos"}},[o.usuarioProfe||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")?i("div",{staticClass:"selectoresActividadesByGrupo paraProfes"},[i("div",{staticClass:"categoriaSelectores"},[o._v("Grupos")]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.cargandoGruposEstudiantiles,expression:"cargandoGruposEstudiantiles"}],attrs:{texto:"Cargando grupos..."}}),o._l(o.gruposEstudiantiles,(function(e){return i("div",{key:e.id,staticClass:"selectorGrupoEstudiantil selectorBarra",class:{selectorSeleccionado:o.idGrupoEstudiantilSeleccionado==e.id},on:{click:function(i){o.abrirGrupoEstudiantil(e.id),o.idGrupoEstudiantilSeleccionado=e.id}}},[o._v(" "+o._s(e.nombre)+" "),i("div",{attrs:{id:"alertasGrupo"}})])}))],2):o._e(),o.usuarioLogeado?i("div",{staticClass:"selectoresActividadesByProfe paraEstudiantes"},[i("div",{staticClass:"categoriaSelectores"},[o._v("Profes")]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.cargandoProfes,expression:"cargandoProfes"}],attrs:{texto:"Cargando profes..."}}),o._l(o.profes,(function(e){return i("div",{key:e.id,staticClass:"selectorActividadesProfe selectorBarra",class:{selectorSeleccionado:o.idProfeSeleccionado==e.id},on:{click:function(i){o.abrirActividadesProfe(e.id),o.idProfeSeleccionado=e.id}}},[o._v(" "+o._s(e.nombres)+" ")])}))],2):o._e()]),i("router-view",{key:o.$route.fullPath})],1)])},Zn=[];function Wn(){var o=Object(s["a"])(["\n        query {\n          usuariosProfe {\n            ...fragResponsables\n          }\n        }\n        ","\n      "]);return Wn=function(){return o},o}function Xn(){var o=Object(s["a"])(["\n        query {\n          gruposEstudiantiles {\n            id\n            nombre\n          }\n        }\n      "]);return Xn=function(){return o},o}var ot={components:{Loading:Qo},name:"ActividadesEstudiantiles",apollo:{gruposEstudiantiles:{query:c()(Xn()),update:function(o){var e=o.gruposEstudiantiles;return this.cargandoGruposEstudiantiles=!1,e}},profes:{query:c()(Wn(),$e),update:function(o){var e=o.usuariosProfe;return this.cargandoProfes=!1,e}}},data:function(){return{gruposEstudiantiles:[],idGrupoEstudiantilSeleccionado:null,idProfeSeleccionado:null,outletDeshabilitado:!1,cargandoGruposEstudiantiles:!0,cargandoProfes:!0}},computed:{usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")}},methods:{abrirGrupoEstudiantil:function(o){this.$router.push("/actividadesVirtuales2021/grupoEstudiantil/"+o)},abrirActividadesProfe:function(o){this.$router.push("/actividadesVirtuales2021/actividadesProfes/"+o)},navegacionCompleta:function(){console.log("Navacion completada")}}},et=ot,it=(i("cb60"),Object(m["a"])(et,Yn,Zn,!1,null,"0ef7c45d",null)),at=it.exports,nt=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"personas"},[i("div",{attrs:{id:"listaPersonas"},on:{click:function(e){o.idPersonaMenuCx=null}}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingPersonas,expression:"loadingPersonas"}],attrs:{texto:"Cargando lista de personas..."}}),o._l(o.personas,(function(e){return i("icono-persona",{key:e.id,attrs:{estaPersona:e,seleccionado:o.idPersonaSeleccionada==e.id,opcionesMenuCx:o.opcionesEspecialesPersona,menuContextual:o.idPersonaMenuCx==e.id},on:{eliminandoseDeDatabase:function(i){return o.eliminarPersonaDeDatabase(e.id)},reseteandoPass:function(i){return o.resetearPassUsuario(e.id)}},nativeOn:{contextmenu:function(i){i.stopPropagation(),i.preventDefault(),o.idPersonaMenuCx=e.id},click:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:void(o.idPersonaSeleccionada=e.id)}}})}))],2)])},tt=[],st=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"iconoPersona",class:{yo:o.soyYo,seleccionado:o.seleccionado}},[i("img",{directives:[{name:"show",rawName:"v-show",value:o.fotografiaEnabled,expression:"fotografiaEnabled"}],staticClass:"fotografia",attrs:{src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaPersona.id,alt:""},on:{load:function(e){o.fotografiaEnabled=!0}}}),i("div",{attrs:{id:"contenedorAlertas"}},[o._t("alertas")],2),i("div",{staticClass:"nombres",class:{nombreSeleccionado:o.seleccionado}},[o._v(" "+o._s(o.estaPersona.nombres)+" ")]),i("div",{directives:[{name:"show",rawName:"v-show",value:o.menuContextual,expression:"menuContextual"}],attrs:{id:"menuCxPersona"}},[i("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(o._s(o.estaPersona.id))]),o.usuarioSuperadministrador?i("div",{staticClass:"botonMenuCx"},[o._v(o._s(o.estaPersona.username))]):o._e(),o._l(o.estaPersona.permisos,(function(e,a){return i("div",{key:a,staticClass:"infoMenuCx"},[o._v(" "+o._s(e)+" ")])})),i("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoPermiso,expression:"nuevoPermiso"}],attrs:{type:"text",placeholder:"Nuevo permiso"},domProps:{value:o.nuevoPermiso},on:{input:function(e){e.target.composing||(o.nuevoPermiso=e.target.value)}}}),i("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.addPermisos(e)}}},[o._v("Dar permiso")]),o._l(o.opcionesMenuCx,(function(e,a){return i("div",{key:a,staticClass:"botonMenuCx",on:{click:function(i){return o.$emit(e.evento)}}},[o._v(" "+o._s(e.textoVisible)+" ")])}))],2)])},rt=[];function ct(){var o=Object(s["a"])(["\n            mutation($nuevoPermiso: String!, $idUsuario: ID!) {\n              addPermisoUsuario(\n                nuevoPermiso: $nuevoPermiso\n                idUsuario: $idUsuario\n              ) {\n                id\n                permisos\n              }\n            }\n          "]);return ct=function(){return o},o}var dt={name:"IconoPersona",data:function(){return{nuevoPermiso:null,mounted:!1,fotografiaEnabled:!1}},props:{estaPersona:{type:Object,default:function(){return{id:"-1"}}},seleccionado:Boolean,menuContextual:Boolean,opcionesMenuCx:{type:Array}},computed:{soyYo:function(){return!!(this.mounted&&this.estaPersona&&this.$store.state.usuario)&&this.$store.state.usuario.id==this.estaPersona.id}},methods:{addPermisos:function(){console.log("enviando ".concat(this.nuevoPermiso," para el usuario con id ").concat(this.estaPersona.id)),this.$apollo.mutate({mutation:c()(ct()),variables:{nuevoPermiso:this.nuevoPermiso,idUsuario:this.estaPersona.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},fotografiaCargada:function(){console.log("Fotografía cargada")}},mounted:function(){this.mounted=!0},beforeRouteUpdate:function(){console.log("Before update")}},ut=dt,lt=(i("2368"),Object(m["a"])(ut,st,rt,!1,null,"98381ea0",null)),vt=lt.exports;function pt(){var o=Object(s["a"])(["\n            mutation($idUsuario: ID!) {\n              eliminarUsuario(idUsuario: $idUsuario)\n            }\n          "]);return pt=function(){return o},o}function mt(){var o=Object(s["a"])(["\n  query {\n    todosUsuarios {\n      ...fragResponsables\n    }\n  }\n  ","\n"]);return mt=function(){return o},o}var ht=c()(mt(),$e),ft={name:"Personas",components:{IconoPersona:vt,Loading:Qo},apollo:{personas:{query:ht,update:function(o){var e=o.todosUsuarios;return this.loadingPersonas=!1,e}}},data:function(){return{personas:[],idPersonaMenuCx:null,idPersonaSeleccionada:null,loadingPersonas:!0}},methods:{copiarId:function(o){var e=o.target.innerText.trim(),i=document.createElement("textarea");i.value=e,document.body.appendChild(i),i.select(),document.execCommand("copy"),document.body.removeChild(i)},eliminarPersonaDeDatabase:function(o){confirm("¿Seguro de eliminar a este individuo?")&&console.log("Se eliminara una persona con id ".concat(o," de la base de datos")),this.$apollo.mutate({mutation:c()(pt()),variables:{idUsuario:o},update:function(e,i){var a=i.data.eliminarUsuario;if(console.log("Data: ".concat(a)),a)try{var n=e.readQuery({query:ht,variables:{idUsuario:o}});console.log("cache: ".concat(n));var t=n.todosUsuarios.findIndex((function(e){return e.id==o}));t>-1&&n.todosUsuarios.splice(t,1),console.log("cache: ".concat(n)),e.writeQuery({query:ht,variables:{idUsuario:o},data:n})}catch(s){console.log("Error actualizando cache. E:".concat(s))}}}).then((function(o){console.log("Res: ".concat(JSON.stringify(o))),o.data&&console.log("Usuario eliminado exitosamente")})).catch((function(o){console.log("Error eliminando usuario: E: ".concat(o))}))},resetearPassUsuario:function(o){console.log("Evento de resetear pass de ".concat(o));var e={idUsuario:o};_o()({method:"post",url:this.serverUrl+"/api/usuarios/resetearPassUsuario",data:e,headers:{Authorization:"Bearer "+this.$store.state.token}}).then((function(o){var e=o.data;console.log("Respuesta: ".concat(e))})).catch((function(o){console.log("Error reseteando password. E:".concat(o))}))}},computed:{opcionesEspecialesPersona:function(){var o=[];return this.usuarioSuperadministrador&&(o=o.concat([{textoVisible:"Eliminar de la base de datos",evento:"eliminandoseDeDatabase"},{textoVisible:"resetear contraseña (123456)",evento:"reseteandoPass"}])),o}}},At=ft,bt=(i("a14d"),Object(m["a"])(At,nt,tt,!1,null,"6fa0ac0a",null)),gt=bt.exports,Nt=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"grupoEstudiantil",class:{deshabilitada:o.ventanaDeshabilitada}},[i("div",{staticClass:"nombreGrupo"},[o._v(o._s(o.esteGrupo.nombre))]),i("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaEstudiantes"}},[i("div",{staticClass:"nombreZona"},[o._v("Estudiantes")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesEstudiantes"}},[1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("input",{directives:[{name:"model",rawName:"v-model",value:o.idEstudianteAñadir,expression:"idEstudianteAñadir"}],ref:"idEstudianteAñadir",attrs:{type:"text",placeholder:"id de estudiante"},domProps:{value:o.idEstudianteAñadir},on:{input:function(e){e.target.composing||(o.idEstudianteAñadir=e.target.value)}}}):o._e(),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("div",{staticClass:"controlesEstudiantes hoverGris botonesControles",on:{click:o.addEstudianteGrupo}},[o._v(" Añadir estudiante ")]):o._e(),1==o.usuarioSuperadministrador||1==o.usuarioAdministradorActividadesEstudiantiles?i("div",{staticClass:"controlesEstudiantes hoverGris botonesControles",class:{desactivado:null==o.idEstudianteSeleccionado},on:{click:function(e){return o.removeEstudianteGrupo(o.idEstudianteSeleccionado)}}},[o._v(" Retirar estudiante ")]):o._e()]),i("div",{attrs:{id:"listaEstudiantes"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idEstudianteSeleccionado=null}}},o._l(o.esteGrupo.estudiantes,(function(e){return i("icono-persona",{key:e.id,attrs:{estaPersona:e,seleccionado:o.idEstudianteSeleccionado==e.id},nativeOn:{click:function(i){o.idEstudianteSeleccionado=e.id}},scopedSlots:o._u([{key:"alertas",fn:function(){},proxy:!0}],null,!0)})})),1)]),i("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaActividades"}},[i("div",{staticClass:"nombreZona"},[o._v("Actividades")]),i("div",{staticClass:"controlesZona",attrs:{id:"controlesActividades"}},[o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")?i("div",{directives:[{name:"show",rawName:"v-show",value:!o.loadingMisActividadesCreadas,expression:"!loadingMisActividadesCreadas"}],staticClass:"controlesActividades botonesControles hoverGris",on:{click:function(e){o.verTodasActividades=!o.verTodasActividades,o.activarTodasActividades=!0}}},[o._v(" "+o._s(1==o.verTodasActividades?"Ver sólo mis actividades":"Ver todas las actividades")+" ")]):o._e(),o.usuarioProfe?i("div",{directives:[{name:"show",rawName:"v-show",value:!o.loadingMisActividadesCreadas,expression:"!loadingMisActividadesCreadas"}],staticClass:"controlesActividades botonesControles hoverGris",class:{deshabilitado:o.creandoActividad},on:{click:o.crearNuevaActividad}},[o._v(" Crear actividad ")]):o._e(),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingMisActividadesCreadas,expression:"loadingMisActividadesCreadas"}],attrs:{texto:"cargandoActividades..."}})],1),o.loadingMisActividadesCreadas?o._e():i("div",{directives:[{name:"show",rawName:"v-show",value:!o.verTodasActividades,expression:"!verTodasActividades"}],staticClass:"listaActividades",attrs:{id:"listaMisActividades"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idActividadSeleccionada=null}}},[o._l(o.misActividadesCreadas.actividades,(function(e){return i("actividad",{key:e.id,attrs:{idActividad:e.id,seleccionada:o.idActividadSeleccionada==e.id,idGrupo:o.esteGrupo.id},on:{clickTrianguloSeleccion:function(i){o.idActividadSeleccionada==e.id?o.idActividadSeleccionada=null:o.idActividadSeleccionada=e.id},meElimine:o.eliminarActividadCache},nativeOn:{click:function(i){o.idActividadSeleccionada!=e.id&&(o.idActividadSeleccionada=e.id)}}})})),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingMasMisActividades,expression:"loadingMasMisActividades"}],attrs:{texto:"Cargando más actividades"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:o.misActividadesCreadas.hayMas&&!o.loadingMasMisActividades,expression:"misActividadesCreadas.hayMas && !loadingMasMisActividades"}],staticClass:"bCargarMas",attrs:{id:"finMisActividades"},on:{click:o.getMoreMisActividades}},[o._v(" Más... ")])],2),o.loadingTodasActividades?o._e():i("div",{directives:[{name:"show",rawName:"v-show",value:1==o.verTodasActividades&&(1==o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")),expression:"\n        verTodasActividades == true &&\n        (usuarioAdministradorActividadesEstudiantiles == true ||\n          $store.state.usuario.permisos.includes(\n            'actividadesEstudiantiles-guia'\n          ) ||\n          $store.state.usuario.permisos.includes(\n            'actividadesEstudiantiles-profe'\n          ))\n      "}],staticClass:"listaActividades",attrs:{id:"listaTodasActividades"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idActividadSeleccionada=null}}},[o._l(o.todasActividades.actividades,(function(e){return i("actividad",{key:e.id,attrs:{idActividad:e.id,seleccionada:o.idActividadSeleccionada==e.id,idGrupo:o.esteGrupo.id},on:{clickTrianguloSeleccion:function(i){o.idActividadSeleccionada==e.id?o.idActividadSeleccionada=null:o.idActividadSeleccionada=e.id},meElimine:o.eliminarActividadCache},nativeOn:{click:function(i){o.idActividadSeleccionada!=e.id&&(o.idActividadSeleccionada=e.id)}}})})),i("div",{directives:[{name:"show",rawName:"v-show",value:o.todasActividades.hayMas&&!o.loadingMasTodasActividades,expression:"todasActividades.hayMas && !loadingMasTodasActividades"}],staticClass:"bCargarMas",attrs:{id:"finTodasActividades"},on:{click:o.getMoreTodasActividades}},[o._v(" Más... ")]),i("loading",{directives:[{name:"show",rawName:"v-show",value:o.loadingMasTodasActividades,expression:"loadingMasTodasActividades"}],attrs:{texto:"Cargando más actividades"}})],2)])])},yt=[],Pt=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"actividad",class:{seleccionada:o.seleccionada,completada:o.usuarioCompletoActividad,deshabilitado:o.actividadDeshabilitada}},[o.usuarioCreadorActividad||o.usuarioProfe?a("div",{attrs:{id:"contenedorAvancesGrupo"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:o.estadoAvanceGrupo.numCompletados>0,expression:"estadoAvanceGrupo.numCompletados > 0"}],staticClass:"indicadorAvance"},[a("div",{staticClass:"numeroIndicadorAvance"},[o._v(" "+o._s(o.estadoAvanceGrupo.numCompletados)+" ")]),a("img",{staticClass:"imagenAvancesGrupo",attrs:{src:i("8c7c"),alt:"Estudiantes que completaron",id:"imagenEstudianteCompletado",title:"Estudiantes que completaron la actividad"}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.estadoAvanceGrupo.numDesarrollando>0,expression:"estadoAvanceGrupo.numDesarrollando > 0"}],staticClass:"indicadorAvance"},[a("div",{staticClass:"numeroIndicadorAvance"},[o._v(" "+o._s(o.estadoAvanceGrupo.numDesarrollando)+" ")]),a("img",{staticClass:"imagenAvancesGrupo",attrs:{src:i("8c7c"),alt:"Estudiantes desarrollando",id:"imagenEstudianteDesarrollando",title:"Estudiantes desarrollando actividad"}})]),o._t("avancesGrupo")],2):o._e(),a("div",{attrs:{id:"contenedorAlertas"}},[o.actividadConNuevasRespuestasParaProfe?a("img",{staticClass:"alertas alertaNuevoMensaje",attrs:{src:i("1070"),title:"Nuevo(s) mensaje(s)"}}):o._e(),o.usuarioCompletoActividad?a("img",{staticClass:"alertas alertaActividadCompletada",attrs:{src:i("f0d1"),title:"¡Completaste esta actividad!"}}):o._e()]),a("div",{class:{arrowDown:o.seleccionada},attrs:{id:"triangulito"},on:{click:function(e){return e.stopPropagation(),o.$emit("clickTrianguloSeleccion")}}}),a("div",{attrs:{id:"zonaNombre"},on:{mouseover:function(e){o.botonesNombre=!0},mouseout:function(e){o.botonesNombre=!1}}},[a("span",{ref:"nombre",staticClass:"nombreZona",class:{enEdicion:o.nombreEditandose},attrs:{id:"nombre"}},[o._v(" "+o._s(o.estaActividad.nombre)+" "),o.usuarioCreadorActividad?a("img",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],attrs:{src:i("559e"),alt:"Editar nombre",title:"Editar nombre",id:"botonEditarNombre"},on:{click:o.iniciarEdicionNombre}}):o._e()]),o.usuarioCreadorActividad?a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoNuevoNombre,expression:"enviandoNuevoNombre"}],attrs:{texto:"Guardando nombre..."}}):o._e(),o.usuarioCreadorActividad?a("div",{directives:[{name:"show",rawName:"v-show",value:1==o.nombreEditandose&&1==o.seleccionada,expression:"nombreEditandose == true && seleccionada == true"}],attrs:{id:"zonaNuevoNombre"}},[a("label",{staticStyle:{"font-style":"italic"},attrs:{for:"inputNuevoNombre"}},[o._v("Nuevo nombre: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:o.nuevoNombre,expression:"nuevoNombre"}],ref:"inputNuevoNombre",staticClass:"nuevoNombreActividad",attrs:{name:"inputNuevoNombre",type:"text"},domProps:{value:o.nuevoNombre},on:{keydown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:o.cancelarEdicionNombre(e)},keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.guardarNombre(e)},blur:o.guardarNombre,input:function(e){e.target.composing||(o.nuevoNombre=e.target.value)}}})]):o._e()],1),1==o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")?a("span",{attrs:{id:"nombreCreador"}},[o._v(o._s(o.estaActividad.infoCreador.nombres))]):o._e(),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],staticClass:"zona",attrs:{id:"zonaGuia"}},[a("div",{staticClass:"nombreZona",class:{nombreHayGuia:o.estaActividad.hayGuia,nombreNoHayGuia:!o.estaActividad.hayGuia},attrs:{id:"nombreZonaGuia"}},[o._v(" Guía ")]),o.usuarioCreadorActividad?a("input",{ref:"inputNuevaGuia",attrs:{type:"file",id:"inputNuevaGuia",accept:"application/pdf"},on:{change:o.subirNuevaGuia}}):o._e(),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.uploadingGuia,expression:"uploadingGuia"}],attrs:{texto:"Subiendo archivo..."}}),o.estaActividad.hayGuia.length>5?a("div",{attrs:{id:"descargarGuia"}},[a("a",{attrs:{href:o.estaActividad.hayGuia,download:o.estaActividad.nombre+"-Guia"}},[a("img",{attrs:{src:i("608c"),alt:"Descargar guia",id:"botonDescargarGuia"}})])]):o._e()],1),o.usuarioCreadorActividad||o.usuarioAdministradorActividadesEstudiantiles||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-guia")||o.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")?a("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada,expression:"seleccionada"}],staticClass:"zona",attrs:{id:"zonaParticipantes"}},[a("div",{staticClass:"nombreZona"},[o._v("Participantes")]),a("div",{staticClass:"controlesZona",attrs:{id:"controlesParticipantes"}}),a("div",{attrs:{id:"listaParticipantes"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idParticipanteSeleccionado=null}}},o._l(o.estaActividad.desarrollos,(function(e){return a("icono-persona",{key:e.infoEstudiante.id,attrs:{estaPersona:e.infoEstudiante,seleccionado:o.idEstudianteSeleccionado==e.infoEstudiante.id},nativeOn:{click:function(i){o.idEstudianteSeleccionado=e.infoEstudiante.id,o.marcarComoLeido(e.infoEstudiante.id)}},scopedSlots:o._u([{key:"alertas",fn:function(){return[o.idsEstudiantesConNuevaRespuestaParaProfe.includes(e.infoEstudiante.id)?a("img",{staticClass:"alertas alertaNuevoMensaje",attrs:{src:i("1070"),title:"Nuevo mensaje"}}):o._e(),"completado"==e.estado?a("img",{staticClass:"alertas alertaEstudianteCompletoDesarrollo",attrs:{src:i("f0d1"),title:"Completó esta actividad"}}):o._e()]},proxy:!0}],null,!0)})})),1)]):o._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionada&&(null!=o.idEstudianteSeleccionado||!o.usuarioCreadorActividad),expression:"\n      seleccionada &&\n      (idEstudianteSeleccionado != null || !usuarioCreadorActividad)\n    "}],staticClass:"zona",attrs:{id:"zonaDesarrollos"}},[o.usuarioCreadorActividad||o.usuarioTieneDesarrollo||o.idEstudianteSeleccionado!=this.$store.state.usuario.id?o._e():a("div",{staticClass:"desarrollo",attrs:{id:"miNuevoDesarrollo"}},[a("mi-participacion",{attrs:{idActividad:o.estaActividad.id,idGrupo:o.idGrupo,nuevoDesarrollo:!0,idDesarrollo:"0",participacionEstudiante:!0},on:{hiceDesarrollo:o.addDesarrolloCreado}})],1),a("div",{attrs:{id:"desarrollosEstudiantes"}},o._l(o.estaActividad.desarrollos,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:o.idEstudianteSeleccionado==e.infoEstudiante.id,expression:"idEstudianteSeleccionado == desarrollo.infoEstudiante.id"}],key:e.id,staticClass:"desarrollo"},[o._v(" "+o._s(e.infoEstudiante.nombres)+" "),o._l(e.participaciones,(function(i,n){return a("participacion-estudiante",{key:i.id,attrs:{indice:n,idEstudianteDesarrollo:e.infoEstudiante.id,estaParticipacion:i},on:{eliminandose:function(a){return o.eliminarParticipacion(i.id,e.id)}}})})),"completado"==e.estado?a("div",{staticClass:"anuncioActividadCompletada"},[o._v(" ¡Actividad completada! ")]):o._e(),"completado"==e.estado||!o.usuarioCreadorActividad&&e.infoEstudiante.id!=o.$store.state.usuario.id?o._e():a("mi-participacion",{attrs:{idGrupo:o.idGrupo,idActividad:o.estaActividad.id,idDesarrollo:e.id,participacionEstudiante:e.infoEstudiante.id==o.$store.state.usuario.id,nuevoDesarrollo:!1},on:{hiceRespuesta:function(i){return o.addRespuestaCreada(i,e.id)}}}),o.usuarioCreadorActividad?a("div",{attrs:{id:"toggleDesarrolloCompletado"}},[a("img",{class:{completado:"completado"==e.estado},attrs:{id:"botonToggleDesarrolloCompletado",src:i("f0d1"),alt:"Marcar como completado",title:"Marcar como completado"},on:{click:function(i){return o.toggleDesarrolloCompletado(e.id,e.estado)}}})]):o._e()],2)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==o.seleccionada,expression:"seleccionada == true"}],attrs:{id:"controlesActividad"}},[o.usuarioCreadorActividad||o.usuarioAdministradorActividadesEstudiantiles?a("div",{staticClass:"controlesActividad",attrs:{id:"botonEliminarActividad"},on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])])},Ct=[],Et=(i("4de4"),i("19de")),wt=i.n(Et),xt=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"miParticipacion",class:{participacionPropia:o.participacionEstudiante,participacionOtro:!o.participacionEstudiante}},[a("div",{attrs:{id:"titulo"}},[o._v(" Responder "),a("img",{attrs:{src:i("1070"),alt:"Enviar respuesta",id:"iconoMensaje",title:o.cuadroAbierto?"cerrar":"abrir"},on:{click:o.abrirCerrar}}),a("br")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:o.mensaje,expression:"mensaje"},{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],ref:"mensaje",class:{mensajePropio:o.participacionEstudiante,mensajeOtro:!o.participacionEstudiante,letrasRojas:o.mensajeIlegal},attrs:{name:"mensaje",id:"mensaje",cols:"30",rows:"10",placeholder:"Escribe un mensaje"},domProps:{value:o.mensaje},on:{input:function(e){e.target.composing||(o.mensaje=e.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],attrs:{id:"adjuntarArchivo"}},[a("input",{ref:"inputArchivoAdjunto",attrs:{type:"file",id:"inputArchivoAdjunto"},on:{change:o.actualizarNombreDeArchivo}}),a("img",{attrs:{src:i("3a9d"),alt:"Ajuntar archivo",id:"imgAdjuntar",title:"adjuntar un archivo"},on:{click:o.abrirSelectorDeArchivos}}),a("div",{attrs:{id:"nombreArchivoSeleccionado"}},[o._v(o._s(o.nombreArchivoSeleccionado))])]),a("loading",{directives:[{name:"show",rawName:"v-show",value:o.enviandoRespuesta,expression:"enviandoRespuesta"}],attrs:{texto:"Enviando respuesta..."}}),a("br"),a("div",{directives:[{name:"show",rawName:"v-show",value:o.cuadroAbierto,expression:"cuadroAbierto"}],class:{deshabilitado:o.mensajeIlegal},attrs:{id:"enviar"}},[a("img",{class:{deshabilitado:o.enviandoRespuesta},attrs:{src:i("4e77"),alt:"Enviar respuesta",id:"imgEnviar",title:"Enviar"},on:{click:o.evaluarAdjunto}})])],1)},jt=[];function Dt(){var o=Object(s["a"])(["\n          mutation($idGrupo:ID, $idActividad:ID, $idDesarrollo:ID, $nuevaRespuesta:InputNuevaRespuestaActividadEstudiantil, $nuevoDesarrollo: Boolean){\n            publicarRespuestaActividadEstudiantil(idGrupo: $idGrupo, idActividad: $idActividad, idDesarrollo:$idDesarrollo, nuevaRespuesta:$nuevaRespuesta, nuevoDesarrollo:$nuevoDesarrollo){\n                nuevaRespuesta{\n                  ...fragParticipacion\n                }\n                nuevoDesarrollo{\n                  ...fragDesarrollo\n                }\n              \n            }\n          }\n          ","\n        "]);return Dt=function(){return o},o}var Rt=/[^\n\r a-zA-ZÀ-ž0-9_():;.,+¡!¿?@*="-]/,St={name:"MiParticipacion",components:{Loading:Qo},data:function(){return{mensaje:"",nombreArchivoSeleccionado:null,cuadroAbierto:!1,enviandoRespuesta:!1}},props:{idActividad:String,idGrupo:String,participacionEstudiante:{type:Boolean,default:!1},idDesarrollo:String,nuevoDesarrollo:Boolean},methods:{abrirSelectorDeArchivos:function(){this.$refs.inputArchivoAdjunto.click()},evaluarAdjunto:function(){var o=this;if(!this.mensajeIlegal){this.enviandoRespuesta=!0;var e=this.$refs.inputArchivoAdjunto,i=new FormData;if(e.value){var a=e.files[0],n=a["type"];console.log("subiendo un ".concat(n)),i.append("archivoAdjunto",a);var t=this;_o()({method:"post",url:this.serverUrl+"/api/actividadesProfes/adjuntarArchivoParaRespuestaActividadEstudiantil",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data.infoArchivo,a={infoArchivo:{idGoogleDrive:i.idGoogleDrive,googleDriveDirectLink:i.googleDriveDirectLink,extension:i.extensionDeArchivo,nombre:i.extensionDeArchivo},mensaje:t.mensaje};o.enviarNuevaRespuesta(a)})).catch((function(e){o.enviandoRespuesta=!1,console.log("Errores: ".concat(e)),e.response&&e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))}else{console.log("El input de archivo adjunto estaba vacio");var s={infoArchivo:{idGoogleDrive:"",googleDriveDirectLink:"",extension:"",nombre:""},mensaje:this.mensaje};this.enviarNuevaRespuesta(s)}}},enviarNuevaRespuesta:function(o){var e=this;this.$apollo.mutate({mutation:c()(Dt(),Oe),variables:{idGrupo:this.idGrupo,idActividad:this.idActividad,idDesarrollo:this.idDesarrollo,nuevaRespuesta:o,nuevoDesarrollo:this.nuevoDesarrollo}}).then((function(o){var i=o.data.publicarRespuestaActividadEstudiantil,a=i.nuevaRespuesta,n=i.nuevoDesarrollo;e.enviandoRespuesta=!1,console.log("Respuesta publicada"),n?e.$emit("hiceDesarrollo",n):e.$emit("hiceRespuesta",a),e.mensaje="",e.$refs.inputArchivoAdjunto.value=null,e.nombreArchivoSeleccionado=null})).catch((function(o){e.enviandoRespuesta=!1,console.log("Error publicando respuesta. E: ".concat(JSON.stringify(o.errors)))}))},actualizarNombreDeArchivo:function(){if(!this.$refs.inputArchivoAdjunto.value)return console.log("Nullificando el nombre de archivo seleccionado"),void(this.nombreArchivoSeleccionado=null);this.nombreArchivoSeleccionado=this.$refs.inputArchivoAdjunto.files[0].name},abrirCerrar:function(){this.cuadroAbierto?(this.mensaje="",this.$refs.inputArchivoAdjunto.value=null,this.nombreArchivoSeleccionado=null,this.cuadroAbierto=!1):this.cuadroAbierto=!0}},computed:{mensajeIlegal:function(){return this.mensaje.length<1||!!Rt.test(this.mensaje)}}},Tt=St,$t=(i("94d2"),Object(m["a"])(Tt,xt,jt,!1,null,"02977574",null)),kt=$t.exports,It=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"participacionEstudiante",class:{participacionPropia:o.participacionDelPropioEstudiante,participacionOtro:!o.participacionDelPropioEstudiante}},[a("div",{attrs:{id:"autorParticipacion"}},[o._v(" "+o._s(o.estaParticipacion.infoAutor.nombres)+" "+o._s(o.estaParticipacion.infoAutor.apellidos)+" - "+o._s(o.fechaFormateada)+" ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:o.estaParticipacion.comentario,expression:"estaParticipacion.comentario"}],class:{comentarioPropio:o.participacionDelPropioEstudiante,comentarioOtro:!o.participacionDelPropioEstudiante},attrs:{disabled:"",id:"comentario"},domProps:{value:o.estaParticipacion.comentario},on:{input:function(e){e.target.composing||o.$set(o.estaParticipacion,"comentario",e.target.value)}}}),a("div",{attrs:{id:"archivo"}},[a("a",{attrs:{href:o.estaParticipacion.archivo.googleDriveDirectLink}},[o.estaParticipacion.archivo&&o.estaParticipacion.archivo.googleDriveDirectLink?a("img",{attrs:{src:i("60ee"),alt:"Descargar archivo",id:"imgDownloadArchivo"}}):o._e()])]),1==o.usuarioAdministradorActividadesEstudiantiles||o.usuarioSuperadministrador?a("div",{attrs:{id:"controlesParticipacion"}},[a("div",{staticClass:"controlesParticipacion hoverGris",attrs:{id:"bEliminarParticipacion"},on:{click:o.eliminarse}},[o._v(" Eliminar ")])]):o._e()])},Ot=[],Gt={name:"ParticipacionEstudiante",props:{estaParticipacion:{type:Object},indice:Number,idEstudianteDesarrollo:String},methods:{descargarArchivo:function(){var o=this,e=this.estaParticipacion.archivo.accesible;console.log("solicitando archivo a ".concat(e)),_o()({method:"get",url:e,responseType:"blob"}).then((function(e){console.log("Respuesta: ".concat(JSON.stringify(e))),wt()(e.data,parseInt(o.indice)+1+" - Respuesta_"+o.estaParticipacion.infoAutor.nombres+"."+o.estaParticipacion.archivo.extension)})).catch((function(o){console.log("Error: ".concat(JSON.stringify(o))),alert("Archivo no encontrado")}))},eliminarse:function(){confirm("¿Seguro de que quieres eliminar este mensaje?")&&this.$emit("eliminandose",this.estaParticipacion.id)}},computed:{participacionDelPropioEstudiante:function(){return this.idEstudianteDesarrollo==this.estaParticipacion.infoAutor.id},fechaFormateada:function(){return new Date(this.estaParticipacion.fechaUpload)}}},Mt=Gt,_t=(i("1a62"),Object(m["a"])(Mt,It,Ot,!1,null,"5f5157db",null)),Bt=_t.exports;function Ut(){var o=Object(s["a"])(["\n            mutation($idDesarrollo: ID!, $idActividad: ID!, $idGrupo: ID!) {\n              setLeidoPorProfeDesarrolloEstudiantil(\n                idDesarrollo: $idDesarrollo\n                idActividad: $idActividad\n                idGrupo: $idGrupo\n                nuevoLeidoPorProfe: true\n              ) {\n                id\n                leidoPorProfe\n              }\n            }\n          "]);return Ut=function(){return o},o}function qt(){var o=Object(s["a"])(["\n            mutation(\n              $idDesarrollo: ID!\n              $idActividad: ID!\n              $idGrupo: ID!\n              $nuevoEstado: String\n            ) {\n              setEstadoDesarrolloActividadEstudiantil(\n                idDesarrollo: $idDesarrollo\n                nuevoEstado: $nuevoEstado\n                idActividad: $idActividad\n                idGrupo: $idGrupo\n              ) {\n                id\n                estado\n              }\n            }\n          "]);return qt=function(){return o},o}function Ft(){var o=Object(s["a"])(["\n            mutation(\n              $idParticipacion: ID!\n              $idDesarrollo: ID!\n              $idActividad: ID!\n              $idGrupo: ID!\n            ) {\n              eliminarParticipacionActividadEstudiantil(\n                idParticipacion: $idParticipacion\n                idDesarrollo: $idDesarrollo\n                idActividad: $idActividad\n                idGrupo: $idGrupo\n              )\n            }\n          "]);return Ft=function(){return o},o}function zt(){var o=Object(s["a"])(["\n            mutation($idActividad: ID!, $nuevoNombre: String!, $idGrupo: ID!) {\n              cambiarNombreActividadEstudiantil(\n                idGrupo: $idGrupo\n                idActividad: $idActividad\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return zt=function(){return o},o}function Qt(){var o=Object(s["a"])(["\n              mutation($idActividad: ID!, $idGrupo: ID!) {\n                eliminarActividadDeGrupoEstudiantil(\n                  idGrupo: $idGrupo\n                  idActividad: $idActividad\n                )\n              }\n            "]);return Qt=function(){return o},o}function Vt(){var o=Object(s["a"])(["\n  query($idGrupo: ID!, $idActividad: ID!) {\n    actividadDeGrupoEstudiantil(idGrupo: $idGrupo, idActividad: $idActividad) {\n      ...fragActividad\n    }\n  }\n  ","\n"]);return Vt=function(){return o},o}var Lt=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,Jt=c()(Vt(),Ge),Kt={components:{MiParticipacion:kt,ParticipacionEstudiante:Bt,IconoPersona:vt,Loading:Qo},apollo:{estaActividad:{query:Jt,variables:function(){return{idGrupo:this.idGrupo,idActividad:this.idActividad}},update:function(o){var e=o.actividadDeGrupoEstudiantil;return this.loadingActividad=!1,e},skip:function(){return!this.idGrupo||!this.idActividad},fetchPolicy:"cache-and-network"}},name:"Actividad",data:function(){return{actividadDeshabilitada:!1,estaActividad:{hayGuia:"",infoCreador:{},desarrollos:[]},nombreEditandose:!1,idEstudianteSeleccionado:this.$store.state.usuario.id,uploadingGuia:!1,nuevoNombre:"",botonesNombre:!1,enviandoNuevoNombre:!1,loadingActividad:!0}},props:{seleccionada:Boolean,idActividad:String,idGrupo:String},methods:{eliminarse:function(){var o=this;if(confirm("Eliminando actividad completa. ¿Continuar?")){var e=this;this.actividadDeshabilitada=!0,this.$apollo.mutate({mutation:c()(Qt()),variables:{idActividad:this.idActividad,idGrupo:this.idGrupo}}).then((function(o){var i=o.data.eliminarActividadDeGrupoEstudiantil;console.log("Actividad eliminada: ".concat(i)),e.$router.go()})).catch((function(e){o.actividadDeshabilitada=!1,console.log("error: "+e)}))}},guardarNombre:function(){var o=this;return Object(co["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o.enviandoNuevoNombre=!0,i=o.nuevoNombre.trim(),a=o.estaActividad.id,o.nombreEditandose&&i!=o.estaActividad.nombre){e.next=7;break}return o.nombreEditandose=!1,o.enviandoNuevoNombre=!1,e.abrupt("return");case 7:o.nombreEditandose=!1,i=i.replace(Lt,""),i=i.replace(/\s\s+/g," "),o.enviandoNuevoNombre=!0,o.$apollo.mutate({mutation:c()(zt()),variables:{idActividad:a,idGrupo:o.idGrupo,nuevoNombre:i}}).then((function(){o.enviandoNuevoNombre=!1})).catch((function(e){o.enviandoNuevoNombre=!1,console.log("error: ".concat(e))}));case 12:case"end":return e.stop()}}),e)})))()},iniciarEdicionNombre:function(){var o=this;this.usuarioCreadorActividad&&this.seleccionada&&(this.nuevoNombre=this.estaActividad.nombre,this.nombreEditandose=!0,this.$nextTick((function(){o.$refs.inputNuevoNombre.focus()})))},cancelarEdicionNombre:function(){this.nombreEditandose=!1,this.$refs.inputNuevoNombre.blur()},seleccionarGuia:function(){this.$refs.inputNuevaGuia.click()},subirNuevaGuia:function(){var o=this;this.uploadingGuia=!0;var e=this.$refs.inputNuevaGuia,i=new FormData,a=e.files[0];i.append("nuevaGuia",a),i.append("idActividad",this.estaActividad.id),i.append("idGrupo",this.idGrupo),_o()({method:"post",url:this.serverUrl+"/api/actividadesProfes/updateGuia",data:i,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token}}).then((function(e){var i=e.data.enlace;o.uploadingGuia=!1,console.log("Enlace: ".concat(i)),o.estaActividad.hayGuia=i})).catch((function(e){o.uploadingGuia=!1,console.log("Errores: ".concat(e)),e.response.data.msjUsuario&&alert(e.response.data.msjUsuario)}))},descargarGuia:function(){var o=this,e=this.serverUrl+"/api/actividadesProfes/guia/"+this.idGrupo+"/"+this.estaActividad.infoCreador.id+"/"+this.estaActividad.id+"/";_o()({method:"get",url:e,responseType:"blob"}).then((function(e){wt()(e.data,o.estaActividad.nombre+"-Guia.pdf")})).catch((function(o){console.log("Error: ".concat(JSON.stringify(o))),alert("Archivo no encontrado")}))},eliminarParticipacion:function(o,e){var i=this;this.$apollo.mutate({mutation:c()(Ft()),variables:{idParticipacion:o,idDesarrollo:e,idActividad:this.idActividad,idGrupo:this.idGrupo},update:function(a,n){var t=n.data.eliminarParticipacionActividadEstudiantil;if(t){console.log("Retirando participacion");var s=a.readQuery({query:Jt,variables:{idGrupo:i.idGrupo,idActividad:i.idActividad}}),r=i.estaActividad.desarrollos.find((function(o){return o.id==e}));if(r){var c=r.participaciones.findIndex((function(e){return e.id==o}));if(c>-1){if(r.participaciones.splice(c,1),r.participaciones.length<1){console.log("Desarrollo quedó vacío");var d=i.estaActividad.desarrollos.findIndex((function(o){return o.id==e}));d>-1&&i.estaActividad.desarrollos.splice(d,1),console.log("Desarrollo no encontrado")}a.writeQuery({query:Jt,variables:{idGrupo:i.idGrupo,idActividad:i.idActividad},data:s}),console.log("Participacion retirada")}else console.log("Esa respuesta ni estaba")}else console.log("Ese desarrollo no estaba")}else console.log("No se eliminó")}}).then((function(){})).catch((function(o){console.log("errores: "+o)}))},toggleDesarrolloCompletado:function(o,e){var i="completado"==e?"desarrollando":"completado";this.$apollo.mutate({mutation:c()(qt()),variables:{idDesarrollo:o,nuevoEstado:i,idActividad:this.idActividad,idGrupo:this.idGrupo}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))},marcarComoLeido:function(o){if(this.$store.state.usuario.id==this.estaActividad.infoCreador.id){var e=this.estaActividad.desarrollos.find((function(e){return e.infoEstudiante.id==o})).id;this.$apollo.mutate({mutation:c()(Ut()),variables:{idDesarrollo:e,idActividad:this.idActividad,idGrupo:this.idGrupo}})}},addDesarrolloCreado:function(o){var e=this.$apollo.provider.defaultClient,i=e.readQuery({query:Jt,variables:{idGrupo:this.idGrupo,idActividad:this.idActividad}});this.estaActividad.desarrollos.some((function(e){return e.id==o.id}))&&console.log("Ese desarrollo ya estaba"),this.estaActividad.desarrollos.push(o),e.writeQuery({query:Jt,variables:{idGrupo:this.idGrupo,idActividad:this.idActividad},data:i}),console.log("Nuevo desarrollo añadido")},addRespuestaCreada:function(o,e){var i=this.$apollo.provider.defaultClient,a=i.readQuery({query:Jt,variables:{idGrupo:this.idGrupo,idActividad:this.idActividad}}),n=this.estaActividad.desarrollos.find((function(o){return o.id==e}));n?n.participaciones.some((function(e){return e.id==o.id}))?console.log("Una respuesta con ese id ya estaba"):(n.participaciones.push(o),i.writeQuery({query:Jt,variables:{idGrupo:this.idGrupo,idActividad:this.idActividad},data:a}),console.log("Nueva respuesta añadida")):console.log("Ese desarrollo no estaba")},refresh:function(){this.$apollo.queries.estaActividad.refetch()}},computed:{usuarioCreadorActividad:function(){return this.$store.state.usuario.id==this.estaActividad.infoCreador.id},usuarioTieneDesarrollo:function(){var o=this;return!(this.estaActividad.desarrollos.length<1)&&this.estaActividad.desarrollos.some((function(e){return e.infoEstudiante.id==o.$store.state.usuario.id}))},usuarioCompletoActividad:function(){var o=this;if(this.usuarioTieneDesarrollo){var e=this.estaActividad.desarrollos.find((function(e){return e.infoEstudiante.id==o.$store.state.usuario.id}));if("completado"==e.estado)return!0}return!1},usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")},idsDesarrollosConNuevaRespuestaParaProfe:function(){var o=this.estaActividad.desarrollos.filter((function(o){return 0==o.leidoPorProfe}));return this.usuarioCreadorActividad?o.map((function(o){return o.id})):[]},idsEstudiantesConNuevaRespuestaParaProfe:function(){var o=this.estaActividad.desarrollos.filter((function(o){return 0==o.leidoPorProfe}));return this.usuarioCreadorActividad?o.map((function(o){return o.infoEstudiante.id})):[]},actividadConNuevasRespuestasParaProfe:function(){return this.idsDesarrollosConNuevaRespuestaParaProfe.length>0},estadoAvanceGrupo:function(){var o={numCompletados:0,numDesarrollando:0};return this.estaActividad.desarrollos?(o.numCompletados=this.estaActividad.desarrollos.filter((function(o){return"completado"==o.estado})).length,o.numDesarrollando=this.estaActividad.desarrollos.filter((function(o){return"desarrollando"==o.estado})).length,o):o}},watch:{usuarioLogeado:function(){this.idEstudianteSeleccionado=this.$store.state.usuario.id},seleccionada:function(o){o&&this.$apollo.queries.estaActividad.refetch()}}},Ht=Kt,Yt=(i("6389"),Object(m["a"])(Ht,Pt,Ct,!1,null,"2656f5b3",null)),Zt=Yt.exports;function Wt(){var o=Object(s["a"])(["\n            mutation($idGrupo: ID!) {\n              crearActividadEnGrupoEstudiantil(idGrupo: $idGrupo) {\n                ...fragActividad\n              }\n            }\n            ","\n          "]);return Wt=function(){return o},o}function Xt(){var o=Object(s["a"])(["\n            mutation($idGrupo: ID!, $idEstudiante: ID!) {\n              removeEstudianteGrupoEstudiantil(\n                idGrupo: $idGrupo\n                idEstudiante: $idEstudiante\n              ) {\n                id\n                estudiantes {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return Xt=function(){return o},o}function os(){var o=Object(s["a"])(["\n            mutation($idGrupoEstudiantil: ID!, $idEstudiante: ID!) {\n              addEstudianteGrupoEstudiantil(\n                idGrupoEstudiantil: $idGrupoEstudiantil\n                idEstudiante: $idEstudiante\n              ) {\n                id\n                estudiantes {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return os=function(){return o},o}function es(){var o=Object(s["a"])(["\n  query($idGrupo: ID!) {\n    grupoEstudiantil(idGrupo: $idGrupo) {\n      id\n      nombre\n      estudiantes {\n        ...fragResponsables\n      }\n    }\n  }\n  ","\n"]);return es=function(){return o},o}function is(){var o=Object(s["a"])(["\n  query($idGrupo: ID!, $pagina: Int!) {\n    misActividadesCreadasGrupoEstudiantil(idGrupo: $idGrupo, pagina: $pagina) {\n      hayMas\n      actividades {\n        id\n        nombre\n      }\n    }\n  }\n"]);return is=function(){return o},o}function as(){var o=Object(s["a"])(["\n  query($idGrupo: ID!, $pagina: Int!) {\n    todasActividadesGrupoEstudiantil(idGrupo: $idGrupo, pagina: $pagina) {\n      hayMas\n      actividades {\n        id\n        nombre\n      }\n    }\n  }\n"]);return as=function(){return o},o}var ns=c()(as()),ts=c()(is()),ss=c()(es(),$e),rs={name:"ActividadesDeGrupo",apollo:{esteGrupo:{query:ss,variables:function(){return{idGrupo:this.$route.params.idGrupo}},update:function(o){var e=o.grupoEstudiantil;return this.ventanaDeshabilitada=!1,e},fetchPolicy:"network-only"},misActividadesCreadas:{query:ts,variables:function(){return{idGrupo:this.$route.params.idGrupo,pagina:0}},update:function(o){var e=o.misActividadesCreadasGrupoEstudiantil;return this.loadingMasMisActividades=!1,this.loadingMisActividadesCreadas=!1,this.ventanaDeshabilitada=!1,e}},todasActividades:{query:ns,variables:function(){return{idGrupo:this.$route.params.idGrupo,pagina:0}},update:function(o){var e=o.todasActividadesGrupoEstudiantil;return this.loadingMasTodasActividades=!1,this.loadingTodasActividades=!1,this.hayMasTodasActividades=e.hayMas,e}}},components:{IconoPersona:vt,Actividad:Zt,Loading:Qo},data:function(){return{"idEstudianteAñadir":null,idEstudianteSeleccionado:null,idActividadSeleccionada:null,esteGrupo:{estudiantes:[],actividades:[]},activarTodasActividades:!1,verTodasActividades:!1,ventanaDeshabilitada:!0,misActividadesCreadas:[],todasActividades:[],paginaMisActividades:0,paginaTodasActividades:0,hayMasMisActividades:!0,hayMasTodasActividades:!0,loadingMisActividadesCreadas:!0,loadingTodasActividades:!0,loadingMasMisActividades:!0,loadingMasTodasActividades:!0,creandoActividad:!1}},computed:{usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")},actividadesOrdenadas:function(){var o=this.esteGrupo.actividades;return o.sort((function(o,e){return new Date(e.fechaUpload)-new Date(o.fechaUpload)})),o}},methods:{addEstudianteGrupo:function(){console.log("añadiendo usuario a un grupo estudiantil"),this.$apollo.mutate({mutation:c()(os(),$e),variables:{idGrupoEstudiantil:this.esteGrupo.id,idEstudiante:this.idEstudianteAñadir}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},removeEstudianteGrupo:function(o){console.log("Retirando el estudiante con id ".concat(o," del grupo con id ").concat(this.esteGrupo.id)),this.$apollo.mutate({mutation:c()(Xt(),$e),variables:{idGrupo:this.esteGrupo.id,idEstudiante:o}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},crearNuevaActividad:function(){var o=this;console.log("enviando mutacion de crear nueva actividad"),this.creandoActividad=!0,this.$apollo.mutate({mutation:c()(Wt(),Ge),variables:{idGrupo:this.esteGrupo.id},update:function(e,i){var a=i.data.crearActividadEnGrupoEstudiantil;console.log("respuesta: ".concat(JSON.stringify(a)));var n=a;try{var t=e.readQuery({query:ts,variables:{idGrupo:o.$route.params.idGrupo,pagina:0}});console.log("Cache: ".concat(JSON.stringify(t))),t.misActividadesCreadasGrupoEstudiantil.actividades.unshift(n),t.misActividadesCreadasGrupoEstudiantil.actividades.pop(),e.writeQuery({query:ts,variables:{idGrupo:o.$route.params.idGrupo,pagina:0},data:t}),console.log("cache actualizado")}catch(s){return void console.log("Error actualizando cache: ".concat(s))}}}).then((function(e){o.creandoActividad=!1,console.log("resp. ".concat(e))})).catch((function(e){o.creandoActividad=!1,console.log("error: ".concat(e))}))},eliminarActividadCache:function(o){console.log("Evento de eliminar actividad ".concat(o))},getMoreMisActividades:function(){var o=this;this.paginaMisActividades++,console.log("Fetching more"),this.loadingMasMisActividades=!0,this.$apollo.queries.misActividadesCreadas.fetchMore({variables:{pagina:this.paginaMisActividades,idGrupo:this.$route.params.idGrupo},updateQuery:function(e,i){var a=i.fetchMoreResult,n=a.misActividadesCreadasGrupoEstudiantil.actividades,t=a.misActividadesCreadasGrupoEstudiantil.hayMas;return o.hayMasMisActividades=t,{misActividadesCreadasGrupoEstudiantil:{__typename:e.misActividadesCreadasGrupoEstudiantil.__typename,actividades:[].concat(Object(ye["a"])(e.misActividadesCreadasGrupoEstudiantil.actividades),Object(ye["a"])(n)),hayMas:t}}}}).then((function(){o.loadingMasMisActividades=!1})).catch((function(e){o.loadingMasMisActividades=!1,console.log("Error en fetchMore: E: ".concat(e))}))},getMoreTodasActividades:function(){var o=this;this.paginaTodasActividades++,console.log("Fetching more todasActividades"),this.loadingMasTodasActividades=!0,this.$apollo.queries.todasActividades.fetchMore({variables:{pagina:this.paginaTodasActividades,idGrupo:this.$route.params.idGrupo},updateQuery:function(e,i){var a=i.fetchMoreResult,n=a.todasActividadesGrupoEstudiantil.actividades,t=a.todasActividadesGrupoEstudiantil.hayMas;return o.hayMasTodasActividades=t,{todasActividadesGrupoEstudiantil:{__typename:e.todasActividadesGrupoEstudiantil.__typename,actividades:[].concat(Object(ye["a"])(e.todasActividadesGrupoEstudiantil.actividades),Object(ye["a"])(n)),hayMas:t}}}}).then((function(){o.loadingMasTodasActividades=!1})).catch((function(e){o.loadingMasTodasActividades=!1,console.log("Error en fetchMore: E: ".concat(e))}))},addDesarrolloActividad:function(o,e){console.log("En la actividad ".concat(e," se añadirá un desarrollo: ").concat(o))}},beforeRouteUpdate:function(o,e,i){console.log("Saliendo de ".concat(e.name," hacia ").concat(o.name," ")),"ActividadesDeGrupo"!=e.name&&"ActividadesDeProfe"!=e.name||(this.ventanaDeshabilitada=!0),i()}},cs=rs,ds=(i("bb45"),Object(m["a"])(cs,Nt,yt,!1,null,"e2428c54",null)),us=ds.exports,ls=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"actividadesDeProfe",class:{deshabilitada:o.ventanaDeshabilitada}},[i("loading",{directives:[{name:"show",rawName:"v-show",value:o.ventanaDeshabilitada,expression:"ventanaDeshabilitada"}]}),i("icono-persona",{directives:[{name:"show",rawName:"v-show",value:!o.ventanaDeshabilitada,expression:"!ventanaDeshabilitada"}],attrs:{estaPersona:o.esteProfe}}),i("div",{attrs:{id:"listaActividades"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idActividadSeleccionada=null}}},o._l(o.actividadesOrdenadas,(function(e){return i("actividad",{key:e.id,attrs:{idActividad:e.id,idGrupo:e.idGrupo,seleccionada:o.idActividadSeleccionada==e.id},on:{clickTrianguloSeleccion:function(i){o.idActividadSeleccionada==e.id?o.idActividadSeleccionada=null:o.idActividadSeleccionada=e.id}},nativeOn:{click:function(i){o.idActividadSeleccionada!=e.id&&(o.idActividadSeleccionada=e.id)}}})})),1)],1)},vs=[];function ps(){var o=Object(s["a"])(["\n        query($idProfe: ID!) {\n          publicUsuario(idUsuario: $idProfe) {\n            ...fragResponsables\n          }\n        }\n        ","\n      "]);return ps=function(){return o},o}function ms(){var o=Object(s["a"])(["\n  query($idProfe: ID!) {\n    misActividadesEstudiantilesDeProfe(idProfe: $idProfe) {\n      id\n      nombre\n      idGrupo\n    }\n  }\n"]);return ms=function(){return o},o}var hs=c()(ms()),fs={name:"ActividadesDeProfe",components:{IconoPersona:vt,Actividad:Zt,Loading:Qo},apollo:{esteProfe:{query:c()(ps(),$e),variables:function(){return{idProfe:this.$route.params.idProfe}},update:function(o){var e=o.publicUsuario;return e}},actividades:{query:hs,variables:function(){return{idProfe:this.$route.params.idProfe}},update:function(o){var e=o.misActividadesEstudiantilesDeProfe;return this.ventanaDeshabilitada=!1,e},fetchPolicy:"cache-and-network"}},data:function(){return{idActividadSeleccionada:null,actividades:[],ventanaDeshabilitada:!0}},computed:{actividadesParaMiGrupo:function(){return console.log(""),!1},actividadesOrdenadas:function(){var o=this.actividades;return o.sort((function(o,e){return new Date(e.fechaUpload)-new Date(o.fechaUpload)})),o}},methods:{eliminarParticipacionDeCache:function(o){var e=o.idParticipacion,i=o.idDesarrollo,a=o.idActividad;console.log("Eliminando participacion ".concat(e," del desarrollo ").concat(i," de la actividad ").concat(a," de cache"));var n=this.$apollo.provider.defaultClient,t=n.readQuery({query:hs,variables:{idProfe:this.$route.params.idProfe}});console.log("data: ".concat(JSON.stringify(t.misActividadesEstudiantilesDeProfe).length));var s=t.misActividadesEstudiantilesDeProfe.find((function(o){return o.id==a})).desarrollos.find((function(o){return o.id==i})),r=s.participaciones.findIndex((function(o){return o.id==e}));if(s.participaciones.splice(r,1),console.log("data: ".concat(JSON.stringify(t.misActividadesEstudiantilesDeProfe).length)),s.participaciones.length<1){console.log("Este desarrollo se quedó sin participaciones");var c=t.misActividadesEstudiantilesDeProfe.find((function(o){return o.id==a})),d=c.desarrollos.findIndex((function(o){return o.id==i}));c.desarrollos.splice(d,1)}n.writeQuery({query:hs,variables:{idProfe:this.$route.params.idProfe},data:t})},addDesarrolloActividad:function(o,e){console.log("En la actividad ".concat(e," se añadirá un desarrollo: ").concat(JSON.stringify(o)))},addRespuestaActividad:function(o,e){var i=o.nuevaRespuesta,a=o.idDesarrollo;console.log("Adding nueva respuesta ".concat(JSON.stringify(i)," al desarrollo ").concat(a," de la actividad ").concat(e));var n=this.$apollo.provider.defaultClient,t=n.readQuery({query:hs,variables:{idProfe:this.$route.params.idProfe}}),s=t.misActividadesEstudiantilesDeProfe,r=s.find((function(o){return o.id==e}));if(r){var c=r.desarrollos.find((function(o){return o.id==a}));c?(c.participaciones.some((function(o){return o.id==i.id}))||(c.participaciones.push(i),console.log("Nueva respuesta insertada")),n.writeQuery({query:hs,variables:{idProfe:this.$route.params.idProfe},data:t})):console.log("No existía el desarollo")}else console.log("No existía la actividad")}},beforeRouteUpdate:function(o,e,i){console.log("Saliendo de ".concat(e.name," hacia ").concat(o.name," ")),"ActividadesDeGrupo"!=e.name&&"ActividadesDeProfe"!=e.name||(this.ventanaDeshabilitada=!0,this.esteProfe.nombre="Profe"),i()}},As=fs,bs=(i("83d5"),Object(m["a"])(As,ls,vs,!1,null,"c67a8742",null)),gs=bs.exports,Ns=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"portadaActividadesEstudiantiles"},[i("div",{attrs:{id:"cuadroCentro"}},[i("center",[i("h3",{attrs:{id:"titulo"}},[o._v("¡Hola!")])]),i("p",[o._v("Selecciona uno de tus profes para ver las actividades que te ha enviado")])],1)])},ys=[],Ps={name:"PortadaActividadesEstudiantiles",data:function(){var o="Escoje una";return{mensaje:o}}},Cs=Ps,Es=(i("064c"),Object(m["a"])(Cs,Ns,ys,!1,null,"b57d0b6e",null)),ws=Es.exports,xs=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"actividadEspecifica"},[o.actividadLoaded?i("icono-persona",{attrs:{estaPersona:o.laActividad.infoCreador}}):o._e(),i("loading",{directives:[{name:"show",rawName:"v-show",value:!o.actividadLoaded,expression:"!actividadLoaded"}],attrs:{texto:"Cargando..."}}),o.actividadLoaded?i("actividad",{ref:"laActividad",attrs:{estaActividad:o.laActividad,seleccionada:o.seleccionarActividad&&o.actividadLoaded,idActividad:o.laActividad.id,idGrupo:o.laActividad.idGrupo},on:{participacionEliminada:o.eliminarParticipacionDeCache},nativeOn:{click:function(e){if(e.target!==e.currentTarget)return null;o.seleccionarActividad=!o.seleccionarActividad}}}):o._e()],1)},js=[];function Ds(){var o=Object(s["a"])(["\n  query($idActividad: ID!) {\n    actividadEstudiantil(idActividad: $idActividad) {\n      id\n      nombre\n      idGrupo\n      infoCreador{\n        id\n        nombres\n        apellidos\n        username\n      }\n    }\n  }\n"]);return Ds=function(){return o},o}var Rs=c()(Ds()),Ss={components:{Actividad:Zt,Loading:Qo,IconoPersona:vt},name:"ActividadEspecifica",apollo:{laActividad:{query:Rs,variables:function(){return{idActividad:this.$route.params.idActividad}},fetchPolicy:"network-only",update:function(o){var e=o.actividadEstudiantil;return this.seleccionarActividad=!0,this.actividadLoaded=!0,e}}},data:function(){return{actividadLoaded:!1,seleccionarActividad:!1}},methods:{eliminarParticipacionDeCache:function(o){var e=o.idParticipacion,i=o.idDesarrollo,a=o.idActividad;if(console.log("Eliminando participacion ".concat(e," del desarrollo ").concat(i," de la actividad ").concat(a," de cache")),a==this.laActividad.id){var n=this.$apollo.provider.defaultClient,t=n.readQuery({query:Rs,variables:{idActividad:a}});console.log("data: ".concat(JSON.stringify(t.actividadEstudiantil).length));var s=t.actividadEstudiantil.desarrollos.find((function(o){return o.id==i}));if(s){var r=s.participaciones.findIndex((function(o){return o.id==e}));if(r>-1){if(s.participaciones.splice(r,1),console.log("data: ".concat(JSON.stringify(t.actividadEstudiantil).length)),s.participaciones.length<1){console.log("Este desarrollo se quedó sin participaciones");var c=t.actividadEstudiantil,d=c.desarrollos.findIndex((function(o){return o.id==i}));c.desarrollos.splice(d,1)}n.writeQuery({query:Rs,variables:{idActividad:a},data:t})}}else console.log("Desarrollo desconocido")}else console.log("No correspondía a esta actividad")}},computed:{refresh:function(){return this.$store.state.refreshActividadEspecifica}},watch:{refresh:function(){this.$refs.laActividad.refresh()}}},Ts=Ss,$s=(i("e559"),Object(m["a"])(Ts,xs,js,!1,null,"4d579d68",null)),ks=$s.exports,Is=function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"home"},[i("div",{staticClass:"anuncio"},[i("center",[i("h3",[o._v("!Las fotos ya no se apachurran!")])]),i("p",[o._v("¿Has sufrido la desagradable sorpresa de que tu fote resulte apachurrada cuando la subes a nuestra plataforma?")]),i("p",[o._v("¡Pues ya no más!")]),i("p",[o._v("Ahora las fotos ya no se apachurrarán. Si tu foto está apachurrada, puedes intentar subirla nuevamente")])],1)])},Os=[],Gs={name:"Home"},Ms=Gs,_s=(i("8b71"),Object(m["a"])(Ms,Is,Os,!1,null,null,null)),Bs=_s.exports,Us=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"trabajo"},[a("div",{staticClass:"bordeAbajo",attrs:{id:"zonaNombre"}},[a("div",{staticClass:"barraSuperiorZona"}),a("div",{attrs:{id:"nombre"}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),a("img",{attrs:{src:i("e463"),alt:"",id:"imagenIcono"}})]),a("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaDescripcion"}},[o._m(0),a("div",{ref:"descripcion",attrs:{id:"descripcion"}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")])]),a("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[a("div",{staticClass:"nombreZona"},[o._v("Responsables")]),a("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[1==o.usuarioLogeado&&0==o.usuarioResponsableTrabajo?a("div",{staticClass:"controlesResponsables hoverGris botonesControles",attrs:{id:"botonParticipar"},on:{click:o.asumirComoResponsable}},[o._v(" Participar ")]):o._e(),1==o.usuarioResponsableTrabajo?a("div",{staticClass:"controlesResponsables hoverGris botonesControles",on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]):o._e()]),a("div",{attrs:{id:"listaResponsables"}},o._l(o.esteTrabajo.responsables,(function(o){return a("icono-persona-autonomo",{key:o,attrs:{idPersona:o,aceptado:!0}})})),1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"zonaPrimerNivel",attrs:{id:"zonaNodosConocimiento"}},[a("div",{staticClass:"nombreZona"},[o._v("Nodos de conocimiento involucrados")]),a("div",{staticClass:"controlesZona",attrs:{id:"controlesNodosConocimiento"}},[a("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Añadir ")]),null!=o.idNodoSeleccionado&&o.esteTrabajo.nodosConocimiento.some((function(e){return e.id==o.idNodoSeleccionado}))?a("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Remover ")]):o._e()]),a("div",{attrs:{id:"listaNodosConocimiento"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idNodoSeleccionado=null}}},[o._l(o.esteTrabajo.nodosConocimiento,(function(e){return a("icono-nodo-conocimiento",{key:e.id,attrs:{esteNodo:e},nativeOn:{click:function(i){o.idNodoSeleccionado=e.id}}})})),a("buscador-nodos-conocimiento")],2)]),o.esteTrabajo.idForo?a("div",{ref:"zonaForo",staticClass:"zonaPrimerNivel",attrs:{id:"zonaForo"}},[a("div",{staticClass:"nombreZona"},[o._v("foro")]),a("foro",{attrs:{parent:o.infoAsParent,idForo:o.esteTrabajo.idForo}})],1):o._e(),a("div",{attrs:{id:"controlesTrabajo"}})])},qs=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"barraSuperiorZona"},[i("span",{staticClass:"nombreZona"},[o._v("Descripcion")])])}];function Fs(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return Fs=function(){return o},o}function zs(){var o=Object(s["a"])(["\n            mutation($idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idTrabajo: $idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables\n              }\n            }\n          "]);return zs=function(){return o},o}function Qs(){var o=Object(s["a"])(["\n  query($idTrabajo: ID!) {\n    trabajo(idTrabajo: $idTrabajo) {\n      id\n      nombre\n      descripcion\n      idForo\n      responsables\n    }\n  }\n"]);return Qs=function(){return o},o}var Vs=c()(Qs()),Ls={name:"Trabajo",components:{BuscadorNodosConocimiento:Ea,Foro:Ii,IconoPersonaAutonomo:Le},apollo:{esteTrabajo:{query:Vs,variables:function(){return{idTrabajo:this.$route.params.idTrabajo}},update:function(o){var e=o.trabajo;return e},skip:function(){return!this.$route.params.idTrabajo}}},data:function(){return{esteTrabajo:{responsables:[]},idNodoSeleccionado:null,deshabilitado:!1}},computed:{usuarioResponsableTrabajo:function(){return this.esteTrabajo.responsables.includes(this.usuario.id)},infoAsParent:function(){return{id:this.esteTrabajo.id,tipo:"trabajo",nombre:this.esteTrabajo.nombre}}},methods:{asumirComoResponsable:function(){console.log("enviando id ".concat(this.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id," en el proyecto con id ").concat(this.idEsteProyecto)),this.$apollo.mutate({mutation:c()(zs()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},abandonarListaResponsables:function(){console.log("Abandonando este trabajo"),this.$apollo.mutate({mutation:c()(Fs()),variables:{idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))}}},Js=Ls,Ks=(i("429a"),Object(m["a"])(Js,Us,qs,!1,null,"1536b505",null)),Hs=Ks.exports,Ys=function(){var o=this,e=o.$createElement,a=o._self._c||e;return a("div",{staticClass:"buscadorTrabajos"},[a("div",{attrs:{id:"zonaCuadroBusqueda"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:o.textoBusqueda,expression:"textoBusqueda"}],attrs:{type:"text",id:"inputBusqueda",placeholder:"Buscar trabajo"},domProps:{value:o.textoBusqueda},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.buscarTrabajosDB(e)},input:function(e){e.target.composing||(o.textoBusqueda=e.target.value)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:o.viendoBusqueda,expression:"viendoBusqueda"}],attrs:{id:"textoBuscado"}},[o._v(" "+o._s(o.textoBuscado)+" "),a("div",{staticClass:"bCancelar",on:{click:function(e){e.stopPropagation(),o.viendoBusqueda=!1,o.anuncioTrabajosBuscados=null}}},[o._m(0)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:o.anuncioTrabajosBuscados,expression:"anuncioTrabajosBuscados"}],attrs:{id:"anuncioTrabajosBuscados"}},[o._v(" "+o._s(o.anuncioTrabajosBuscados)+" ")]),a("div",{ref:"zonaListaTrabajos",attrs:{id:"zonaListaTrabajos"},on:{scroll:function(e){return o.setPosicionIconoTrabajo()},click:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button||e.target!==e.currentTarget?null:void(o.idTrabajoSeleccionado=null)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1===o.viendoBusqueda,expression:"viendoBusqueda === false"}],staticClass:"listaTrabajos",class:{opaco:null!=o.idTrabajoSeleccionado},attrs:{id:"listaTodosTrabajos"},on:{click:function(e){o.idTrabajoSeleccionado=null}}},o._l(o.todosTrabajos.infoTrabajos,(function(e){return a("div",{key:"nombreT-"+e.id,staticClass:"nombreTrabajo"},[a("img",{staticClass:"simboloTrabajo",attrs:{src:i("e463"),alt:""}}),o._v(" "+o._s(e.nombre)+" "),a("img",{staticClass:"iconoAbrirTrabajo",attrs:{src:i("9d5e"),alt:""},on:{click:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.stopPropagation(),o.idTrabajoSeleccionado=e.id,void o.setPosicionIconoTrabajo())}}})])})),0),a("div",{directives:[{name:"show",rawName:"v-show",value:!0===o.viendoBusqueda,expression:"viendoBusqueda === true"}],staticClass:"listaTrabajos",class:{opaco:null!=o.idTrabajoSeleccionado},attrs:{id:"listaTrabajosBuscados"},on:{click:function(e){o.idTrabajoSeleccionado=null}}},o._l(o.trabajosBuscados,(function(e){return a("div",{key:"nombreTB-"+e.id,staticClass:"nombreTrabajo"},[a("img",{staticClass:"simboloTrabajo",attrs:{src:i("e463"),alt:""}}),o._v(" "+o._s(e.nombre)+" "),a("img",{staticClass:"iconoAbrirTrabajo",attrs:{src:i("9d5e"),alt:""},on:{click:function(i){return!i.type.indexOf("key")&&o._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])||"button"in i&&0!==i.button?null:(i.stopPropagation(),o.idTrabajoSeleccionado=e.id,void o.setPosicionIconoTrabajo())}}})])})),0),o._l(o.todosTrabajos.infoTrabajos,(function(e){return a("icono-trabajo",{directives:[{name:"show",rawName:"v-show",value:o.idTrabajoSeleccionado===e.id,expression:"idTrabajoSeleccionado === infoTrabajo.id"}],key:e.id,style:o.posicionIconoTrabajo,attrs:{idTrabajo:e.id}})}))],2)])},Zs=[function(){var o=this,e=o.$createElement,i=o._self._c||e;return i("div",{staticClass:"linea1"},[i("div",{staticClass:"linea2"})])}];function Ws(){var o=Object(s["a"])(["\n  query($textoBusqueda: String!) {\n    busquedaTrabajosProyectos(textoBusqueda: $textoBusqueda) {\n      id\n      nombre\n    }\n  }\n"]);return Ws=function(){return o},o}function Xs(){var o=Object(s["a"])(["\n  query($pagina: Int!) {\n    listaTodosTrabajosProyectos(pagina: $pagina) {\n      hayMas\n      infoTrabajos {\n        id\n        nombre\n      }\n    }\n  }\n"]);return Xs=function(){return o},o}var or=c()(Xs()),er=c()(Ws()),ir={components:{IconoTrabajo:Ba},name:"BuscadorTrabajos",apollo:{todosTrabajos:{query:or,variables:{pagina:0},update:function(o){var e=o.listaTodosTrabajosProyectos;return e}}},data:function(){return{todosTrabajos:{hayMas:!0,infoTrabajos:[]},trabajosBuscados:[],textoBusqueda:null,textoBuscado:null,paginaTodosTrabajos:0,loadingMasTodosTrabajos:!1,hayMasTodosTrabajos:!0,idTrabajoSeleccionado:null,posicionIconoTrabajo:{top:"0px"},viendoBusqueda:!1,buscando:!1,anuncioTrabajosBuscados:null}},methods:{getMoreTodasActividades:function(){var o=this;this.paginaTodosTrabajos++,console.log("Fetching more todosTrabajos"),this.loadingMasTodosTrabajos=!0,this.$apollo.queries.todosTrabajos.fetchMore({variables:{pagina:this.paginaTodosTrabajos},updateQuery:function(e,i){var a=i.fetchMoreResult,n=a.listaTodosTrabajosProyectos.infoTrabajos,t=a.listaTodosTrabajosProyectos.hayMas;return o.hayMasTodosTrabajos=t,{listaTodosTrabajosProyectos:{__typename:e.listaTodosTrabajosProyectos.__typename,infoTrabajos:[].concat(Object(ye["a"])(e.listaTodosTrabajosProyectos.infoTrabajos),Object(ye["a"])(n)),hayMas:t}}}}).then((function(){o.loadingMasTodasActividades=!1})).catch((function(e){o.loadingMasTodasActividades=!1,console.log("Error en fetchMore: E: ".concat(e))}))},setPosicionIconoTrabajo:function(){var o=this.$refs.zonaListaTrabajos.scrollTop;this.$set(this.posicionIconoTrabajo,"top",o+"px")},buscarTrabajosDB:function(){var o=this;this.anuncioTrabajosBuscados="Buscando...",console.log("Refetching búsqueda"),this.$apollo.query({query:er,variables:{textoBusqueda:this.textoBusqueda},error:function(o){console.log("Error: ".concat(o))}}).then((function(e){var i=e.data.busquedaTrabajosProyectos;i.length<1?o.anuncioTrabajosBuscados="¡No se encontraron trabajos!":o.anuncioTrabajosBuscados=null,o.textoBuscado=o.textoBusqueda,o.trabajosBuscados=i,o.viendoBusqueda=!0})).catch((function(e){o.anuncioTrabajosBuscados="¡Ocurrió un error con tu búsqueda!",console.log("Error. E: ".concat(e))}))}}},ar=ir,nr=(i("9c0b"),Object(m["a"])(ar,Ys,Zs,!1,null,"50537782",null)),tr=nr.exports;a["a"].use(no["a"]);var sr=[{path:"/home",name:"home",component:Bs},{path:"/atlas",name:"atlas",component:Io},{path:"/login",name:"loginArea",component:Wo,beforeEnter:function(o,e,i){null!=ao.state.usuario.id?i("/miperfil"):i()}},{path:"/miperfil",name:"perfilPersonal",component:be,beforeEnter:function(o,e,i){null!=ao.state.usuario.id?i():i("/login")}},{path:"/trabajos",component:tr},{path:"/nodoConocimiento/:idNodo",component:Yi},{path:"/proyectos",name:"proyectos",component:va},{path:"/proyecto/:idProyecto",name:"verProyecto",component:zn},{path:"/trabajo/:idTrabajo",name:"verTrabajo",component:Hs},{path:"/registro",name:"registro",component:Hn},{path:"/actividadesVirtuales2021",component:at,children:[{path:"grupoEstudiantil/:idGrupo",component:us,name:"ActividadesDeGrupo"},{path:"actividadesProfes/:idProfe",component:gs,name:"ActividadesDeProfe"},{path:"",component:ws}]},{path:"/actividad/:idActividad",name:"actividadEspecifica",component:ks},{path:"/personas",name:"personas",component:gt},{path:"/",redirect:"/home"}],rr=new no["a"]({routes:sr}),cr=J+"/pepepe";a["a"].mixin({data:function(){return{serverUrl:J,clienteUrl:cr}},computed:{authHeader:function(){var o=localStorage.getItem("sesionUsuario");return o?(o=JSON.parse(o),o.token?(console.log("introduciendo header: ".concat(o.token)),{Authorization:"Bearer "+o.token}):null):null},usuario:function(){return this.$store.state.usuario},usuarioLogeado:function(){return!!this.$store.state.token},usuarioAdministrador:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("administrador")},usuarioSuperadministrador:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("superadministrador")},usuarioAdministradorActividadesEstudiantiles:function(){return!!this.$store.state.usuario.permisos&&!!this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-administrador")},usuarioProfe:function(){return!!this.$store.state.usuario.permisos&&this.$store.state.usuario.permisos.includes("actividadesEstudiantiles-profe")}}}),a["a"].config.productionTip=!1,new a["a"]({render:function(o){return o(T)},store:ao,apolloProvider:eo,router:rr}).$mount("#app")},"58f2":function(o,e,i){},"5bd3":function(o,e,i){},"5cdb":function(o,e,i){"use strict";i("2205")},"5d21":function(o,e,i){},"5efe":function(o,e,i){},"608c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAA21BMVEUAAADe1cXe2sj+qKbf38/UxrHf3s/gyKv/1Krm1cXg2sm+taS7tab149PsyKj47OHsyKrcwKHf3c3e28rZw6be1sPh077bz7jbzbja1cLd1L/b1MLi0rrZ0Lzd1sTOqo/t6N3f18PRzLvEvKy+uarg0rvQuaLMzLLg4NG6ua3e3s/////c3M29vLDZ2cq/vrLMzL7S0cPFxLfX1snJyLvPz8HPzsHFxLjw7+jFxLrz8/D89vLHx7n79O7T08T9/fvCwbS4t6vv7OTk49eysaX5+Pbq6ODy8vD68+36XNSUAAAAKHRSTlMAH98C+Gz7lQYf3x/fphyUKhX0/TPfp3lQ6a2VYlg5HPbp39/fhQsKsqhnhgAAAgRJREFUaN7t2VlT4lAQhuEDOPs4MwkIuM+MG2lONkIMaowgbv//F+lFyi5jFTmQprWwn9tcvMUHOUkVSgghhBBCfGyNr7M11FK0up0vs+1Yil7r6J+99nm2v+t/FDWr3eyVGj2s/1LEdrA7I9y/+E1ctrZ6RuH+BfHatQ3DcP+Sdu1a3TSMazOHcW3mMK7NHMa1mcO4NnMY12YO49rcYVybO4xrc4dxbbbwFWZxbYbwNYZxbbow6CLIr9xhGNcmC0OQFKRRXp7eYhPXpgrrxClwQ3i9Na7NEZ6O8DPj2lThoV8wzuD56vRudP7C/XXbogmD94rGizo+Kzr4QRAupwPXeeknTxh07HOGEUA4Xk4YSmVjZ0Ifhiwuc5pObibkYZ065W6WEU4cA37K+olR4gUu+Xd8aiADHbiMv2r0NE3sk4bnuqFZwwiyAWsYQZTQhUF7BjTkj7KULKyHvoGh7uXl4JD1ABno54H+c4dzUK9RvWUODAT4NvT9G9l7tQHs0oTNSZjtIUEfhnhoIIZCmO8+XqFw6hpI6cPgRQY8WJ1ftRwgfAdIFBqIYHVup3d+ciX0YQgDA6EcIBKW8CqF628WrpH+cW1uo0rYasOiXdiyVAW7zUW7zV1Vxcm2DQt17e1jVcl+Z9Nem5u92dlXVbX2up/m1N1rKQqNuSkhhBBCCPGhPQIr3ZzxPqpFsgAAAABJRU5ErkJggg=="},"60ee":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAMAAAAPdrEwAAAA3lBMVEUAAAD/9fT/6uX/4eH/7evV1Nv+7uz/7OnS1d3/9/X/6eb/6OXU2ODaztL/3t7W0Nb27u7S1d3Y2+L14+Lg1tvQ0trR1t/uu7u/n5///////v7T1d3s7PA10Zb8/v0x0JPu+vXw+/dz3rM50Zc00JWt69Ns27D2/Prz9Pb5+vrY2uHo+fLu7/K57dhX16X6/fzv7/Li+O9C05vV19/k+PDf9u3F8N+y69Sd5smI4r6E4bx437ZR1qNO1aHz+/f09PbV8+fd3+Wp6c+W5cVw3bJn261e2ald2Kla2Kfw8fNijA/eAAAAGXRSTlMA+1ka2c5B2dbCtllQTC9X59jWuWxiWQ8IBi+1PwAAAb5JREFUWMPt2GlPgzAYwHE3ZffhrStbwa2KkzHcfcGcu/3+X8hnWTaMBkalTSDpP+EFb34h5WnS9EwkEomi1Lmv/iMnMsmL093k6eVCGvmpLNHb2VjJTw1ZKtLScX/0uyxLeW60nCpyoiEpx4mGrnKcaEi6p6VRvVF26wMfaSiVo6XLsmuf9f3wHey7R0q6c4L+ejt0ffvAbEHQjq6/HrtM0NCAu1f6VSzObEKC0shXDk2/1t416oiehgnxUaccLtr3goTpN3oW4rn+E4L40EhvtXTEhVZHljVS+dBVRakKWtCC9kOjnzRiSWtd06HNrsaO1uaTvnmgzf5krrGiTcNWNoa2pzVjo9iGyYhWR4SQ5kDf0fqgCS8jlRGNZ5MaIdZwpSiroUVIbTLDbGiwe2Ow2+39Uxv3MLsJQfoCzAoE+kJne5xUh7ayoxV7qLLejdNBEz4b/uaU+UZHmrEmZG1oiDUN4f5y2cd8ziG418PROz0xprFHgWgYi2fXYFiC0N1tpeZSZdsKRsM+cYk0g9EtfrQ+fnFtrAegwX7yCIV2rqNDZ+npLMXFJ13pAtPrWqdkJsH6ktnpTCQSiSLUN5DlNzinQAMLAAAAAElFTkSuQmCC"},6332:function(o,e,i){"use strict";i("7f89")},6389:function(o,e,i){"use strict";i("3261")},"66e2":function(o,e,i){},6937:function(o,e,i){"use strict";i("ec42")},"6c67":function(o,e,i){},"766c":function(o,e,i){"use strict";i("58f2")},"78ae":function(o,e,i){},"7cdb":function(o,e,i){"use strict";i("6c67")},"7f89":function(o,e,i){},8232:function(o,e,i){},"83d5":function(o,e,i){"use strict";i("e58f")},"85ec":function(o,e,i){},"88d7":function(o,e,i){},"8b71":function(o,e,i){"use strict";i("88d7")},"8c7c":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAABg1BMVEUAAAAAAAAAAAAaGhocHBwFBQUDAwMAAAAFBQUgICBiYmIREREKCgoLCwtQUFAAAAAVFRVHR0cJCQkCAgIBAQEDAwMTExMhISE1NTUHBwcDAwMHBwcICAgHBwcCAgIVFRUYGBgUFBQSEhJeXl4EBAQFBQUFBQUBAQELCwsAAAANDQ0vLy8LCwsVFRUREREZGRkAAAAHBwcJCQkHBwcHBwcGBgYICAgMDAwCAgIAAAAQEBAaGhoKCgoVFRUKCgoQEBAQEBAZGRkHBwciIiIhISEoKCgtLS0JCQkEBAQNDQ0KCgoDAwMKCgoZGRkICAgKCgoLCwsJCQkQEBAICAgODg4dHR0YGBgTExMICAgPDw8LCwscHBwgICAtLS0ZGRktLS04ODgqKiomJiYPDw8NDQ0UFBQQEBAAAAAMDAwODg4YGBgKCgoWFhYYGBgyMjIfHx80NDQAAAAICAgzMzMkJCQrKysAAAA0NDQzMzM8PDwTExMWFhZISEgpKSlFRUUfHx8AAACEqLVPAAAAgHRSTlMA/pkLmb8f399/CtfPZRvzvxW1/PXzuh4D5dvSo41lY09HLQbw7+riyL+sdW9YS0E/+NrWy8a7sqObmI2EeXl2aWheODQcCfPm1sXCwL+tpp6Wj4eDgHJvWUhDPj0sJxkWEhDg0dC/vr2uqqqihYSDenFqY1pSTklGQ0M5NSULCM5vugoAAAJJSURBVEjH7dNnV+JAFIDhuWRR1oYbmjTpKH0BpSOCYF/b2rvbe+/1/vRNmABhYTB89/2SczjnOZc7mZCbuha1JTTPDrg+xKEFhXT2RcXifAaxbkYVkzIgbUPxmDxKrYwpJcXGlOkHSskPr0TuE6V5cnTMrJsobszuB9DzLtJHEz8rk9FYMe8wkX5yqw0aX0rZpItLIrabHA+mrdI+sd3IBBMcVcoL4pPb481o5oGeWqHHgbuWwa+2l53RA96H6E+DVVzHE8SXzCmHgEKg14pPnfER6p3iyFksEFa1oB9QymxMIeKO8KtJAw4miX1eCG+ODC4tDU4bjVYRpjhCqj7tEZHHNfoeCr15Fwp9PHN/++qurtJxlgFCjrW+qlyYbGqpFQ1NLVaRvhqvcIAR3eCAnAxosEsQ3sB62ruEfIBETU4u3w53CsOr050WeY1rHGnrVicR/kgJmiSH610IyKuTyRZRoXGog4zs3W71Io5T844MJYYTQrJoIx1EJbsP8+uAqNVRgVPn4n1RdSGkWcSL8lavyNC93mRiq01AiVxLLqxyYLBzAjH2JideukJijd/K77v+ioNtvUkY6uK4FrVlsyqaBZ972MSz2XiVo4CtnvxhE1OyQZxxTI7THqKaYxOXoUHujEB4iFaEmSs2mQMZmSQ0B2hMTLKYxi7EqV8+Y5LfFjnJjNLsekOMSZx6GUHzsBToIkziEFeBxpS5MdovK5SY5NQskMfx/3bheMy1k/1A4H3z5k9btj/xgYxAtp9+aZ5joMCRm8g/1gHtCvE8ISoAAAAASUVORK5CYII="},"8ee4":function(o,e,i){"use strict";i("4fac")},"8f1c":function(o,e,i){"use strict";i("02b9")},"94d2":function(o,e,i){"use strict";i("e4f6")},"94dd":function(o,e,i){},"96cc":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABLCAMAAAAPkIrYAAABEVBMVEUAAAACAgIAAAAAAAABAQE0NDR7e3sBAQEEBAR5eXkeHh4MDAwwMDADAwMGBgYVFRUKCgoPDw8ODg4ICAggICATExMPDw9QUFBZWVkGBgYBAQEJCQkCAgIZGRkLCws2NjZkZGQODg4GBgYGBgYODg4MDAwPDw8SEhIICAgRERENDQ0bGxslJSUREREWFhYbGxsdHR0cHBwvLy9vb28xMTH///8ICAgODg4ICAgGBgYSEhIUFBQYGBgjIyMaGhoEBAQMDAwoKCgoKCgtLS0kJCQ7OzsMDAwDAwMAAAAjIyMPDw8QEBANDQ0HBwcMDAwcHBwKCgohISEtLS0NDQ0HBwc4ODgVFRVAQEBYWFg1NTUAAADjrFRNAAAAWnRSTlMA/qU/eUQdwVcCH78M79mVV9HB42dXPBIF+eLSWVc/Kgvy8u7OubOwpaN6aVhYT0tENzAdHAPq4daxi4B4cF1OSUhCOSMi8cPBr6almZmSdWlkT05OQDAgHRixeboEAAABzElEQVRYw+3WWU/CQBSG4YPiUnAB29KioIgCyg6K+77v+/r9/x8iTVpGI+kMHi686Hs1SZMnnTmTphQUFBTUa2OJ6vPLfjptmpVYu9FvxWLm/kHiU1WyCpAWn1OiThbgFuqW9+xJZX9tavEoQ341821M4c2WgWWSZgAbJMsOYYYUugaOpacF7KlY78AWSXoDGqRSSH4UDUBt3EkUSFICiChZWWwqWKtK1hlyRI9Vv8szC3woWfOYItKB3KmftaJkrTnWOoDQIduadiyrFm1jzX5YTiVAp+4NAsM9WTQJ1PtlZYBtpjWPqLvScce2vLu6jlumlUXeXW3gimklseSuZrDEtICbfllNYKdjDfCsRfENiPMsrQDkqRfrdeh3R/V6rVLUgQWrF2sSPumrpGTJqeS2TWqWR42XDMNIpZyfiFjFNNPpcrlcPagdNk61H2PwszwqQkpdSCxByRvxswTFtzxqd4tveRSSFte6dDdoAPEM0+qcVQ5YK81Ztqa1Wi3tD5agyJ6CT1FNav2Y4H3WF5NYkXA4QiLteO9hp1gM/27CwYTFaqyDCYuPCYuPCYuPCYuPCYuPnQuLjUFYbExYfExY7OxUKkFBQUH/sC/SIJ/NRVDIKwAAAABJRU5ErkJggg=="},"9c0b":function(o,e,i){"use strict";i("2323")},"9d5e":function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAyCAMAAADC1sOAAAAAtFBMVEUAAAABAQEAAAAAAAAAAAAQEBAAAAAAAAADAwMQEBAAAAACAgIAAAAAAAAAAAAAAAABAQEBAQEAAAAAAAABAQECAgIEBAQEBAQAAAABAQEAAAABAQEBAQEEBAQHBwcBAQEAAAAAAAAAAAACAgICAgIDAwMCAgICAgIFBQUAAAABAQEAAAABAQECAgIEBAQFBQUAAAABAQEBAQECAgIAAAAAAAABAQEBAQECAgICAgIFBQUAAAATATehAAAAO3RSTlMAby7r/AXgxTkJ9AyjX9uCaSH37tdFGxfAu6l3VE0k6LSvlopsWDw1KeTSyY19LA/xhklA+ZyTXV9wY7WFmHcAAAIsSURBVEjHxZXZmqIwEEZRI5s0gmwCYiNIi/uuPfO//3tN0l9/gMrm1Zw7Q06KVJUU91/o22LyZ7g5+t9nXWqxf6cppkHAIDIf+mKDZEU8wQM9LxlU719EPfwwMj4p8u8P71T1/vMVKET1/KCbTtOupV1XI1A+h06ZoN8IOzDUpv180UmUn7Ce+CpMFVDc++A58klhJ43PLxGYYAztkuDS3CxRbCaoH1UZHDNl8bAW06V1wFXx5dLnSvH63zKNMOGqEd3D4eAXbi0AssbVoYuiWHitIYAN9wY7FRDSd4wtgHnTpmKdnDXNk91kTAqpD2RgyzXR4XPlCBhis4FMkVxA2LcwMkVXgRvXwsiUhUEz1cbIlNMIoyBv7m4FMTJlQiB/5T3H98o5IFOYIeaGjHr4bhajpTGkBSQYnfIGmHfKmWUCJ8ogf1vmigqU6RKIWxpUoOwFIJRaGcff71IELNNmIxe4+wVEa2HE/exfrgIzqdGIC1tugDxpMuzimZZBg+zfGkpXgHS4dzjzgGnVbpEGlKeviburEfYbQRDmBcXxqKLoNQL7Li+KS+I4Gysl6BFolZPHxcCki0J5ji3Wt72XIidsCBqb18vYvskiaCUnuaCstt3+w7DrjEExS4fRLrqAwiuaaA+kfl9yuvfIBGNmVVRSE8AghiqEXjhefRIwzK1TPVf8NcETaryob7gPRR1luy/LWSdt7jI98K8hLbGrDJNUat2cgwG9fPmzf5+aajk37m2HAAAAAElFTkSuQmCC"},a14d:function(o,e,i){"use strict";i("8232")},abff:function(o,e,i){"use strict";i("56b2")},b48f:function(o,e,i){"use strict";i("cdeb")},b6b5:function(o,e,i){"use strict";i("5d21")},bb45:function(o,e,i){"use strict";i("f8a8")},c12b:function(o,e,i){},c49c:function(o,e,i){},c51c:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAk1BMVEUAAAAmJjYoJjUjIjInJjYnJjYnJjYnJzYrITcnJTYoJDcmJjYmJjYnJzcmJTYnJjUqJzInJjYnJjUnJTYnJjUmJjYnJjYnJTYnJTYnJTYoJjYnJjYmJjYnJTUmJjYmJjUnJTUnJTckJDUnJjYnJjYnJTYmJTYnJjUoKDcnJjYnJjYnJjUmJTUpKTYmJTUoJjcnJjYD4yW0AAAAMHRSTlMAoKcQ++PfaBZMOC9kg2vECPLc9tGyrJh0WyXYyiq2k1RGDeyPiHxiHvi9QT4Z52bwjL0NAAAB50lEQVRYw+3X2W6rMBSF4Z3Y0CQ0CZQxTJnnpGe9/9MdsKCNVChbim/a8ktIGKHvxpZsU1/fn2s0CwddhdGd7S0ccHJWTG8twets8UAPkPmwq1wCAcuLASyouwOwZYETAIK6GwPy54LxYlZ31QBuhvgs1AD60AuuAThvddPnwR3wJnROygAYUg/2YA/24O8ATwxwBZxZoHCBPBs1JEhlq0E8BxIGqD60JCMqe0HdgQcKD20F4hFMbR5IInTQUpJ9gG64IbI5YJGdWV+7JupQWIKGZWUFRyJqA1mJAEX7GWCSyvIGT4Bx8UQSwLYG9xJNYAj4HPCyJ6LrO4AaHKIRjAD3xjooXwTRfd4JnlwARlmgxpuB0ZQEnFE5X8sukCJUzanIStDWv/qS0AHScfsJzly09L6gKivpAGkzPr7mJTjyUZS/fu04tukjsfseVE0LcG0AkAdixAJdCcC4kS5Q5QvSCZ4jtZCCdKcHNCfqdQn4WsBAkE7QnVHVHvA4YAosqbWF9bifwX9pKqt+UINA3TI52R5aco9UNkdVYhOr2ERbA/sBNDJiJg6p2ZAE4MUKdEwznQp6spuhdpUSnJKW7hcULVMF6mkqodIG0nqrGaTTXDNI9k6BOls5mkGKPc0g2RPq6/sL/QcOJpe5LiscHwAAAABJRU5ErkJggg=="},c52b:function(o,e,i){"use strict";i("5efe")},cb13:function(o,e,i){"use strict";i("94dd")},cb60:function(o,e,i){"use strict";i("214a")},cdeb:function(o,e,i){},d178:function(o,e,i){"use strict";i("f3c6")},d1f3:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAsVBMVEUAAAAAAAAAAAABAQEFBQUBAQEDAwMBAQECAgIBAQEAAAAAAAAFBQUAAAAAAAABAQEKCgoREREBAQECAgIBAQEHBwcBAQEBAQEBAQECAgIBAQEHBwceHh4AAAABAQEAAAABAQECAgIBAQEBAQEFBQUEBAQKCgoBAQEBAQEBAQECAgIDAwMCAgIBAQEJCQkNDQ0BAQEGBgYFBQUDAwMBAQEBAQEGBgYICAgAAAAAAAAAAABES1EIAAAAOnRSTlMA7PQwArcHQaM9qPhU/PrIHArDXVgQ1q+dhHIhBe/f28ynjn9jSA3jvrSVemxoJxirTjGZk4k1FTg3rkgIUQAAAZtJREFUSMftlVmPgjAQgEvltBQEuZFDxPu+d+f//7A12UhWbQGf9sXvhclMvobM9EAcemNHs9A79G1iJMHmDUPxcBBKoE7aKwUsRRRLWGltWDMhchx9CGVb47AUABvUICCVvVZCMQXBVsPRYp4Raq7cRqPMIV9eXPEWyrEeJLDTGowRFsIYVQz2Pph6vQGm8zTTM2R1zoraCmMZ+5trjLN0/5oVC/5MrSFErHw8p2uO4hCfvZqObfZ85CFxEKdi9JmFztS88jY2UQfMvFEgDnHqMf8spGXNPj0w0qKKxzxF7GKFnda4ivpRPsq/KLKEv7jKgqxZJwz7/LtUx7PXM3aVEh1xGQSwfElGcBwgPlrqXZ5Smzytv65DOD1lzhCiWjam8HjOlanZ9Jau6NB6aCJdoQbcnfG3P9Zc6HeaWMD6sV+J0ATJtIe+R750R6CzKs4gr2L1eW7yHetI+lWsEr0q1IzNMbqTqpF5q1fc9WEk/74FPkSoFYoNwXg7icvb10UtnTlNPDM1cNFDbdmud55nnvboHeTt1hXZpR+YEyU0uY0rZgAAAABJRU5ErkJggg=="},d5bb:function(o,e,i){},d74c:function(o,e,i){"use strict";i("5bd3")},e048:function(o,e,i){},e463:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAMAAAC5zwKfAAAAqFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs30iGAAAAN3RSTlMA+/cHAwr08BJt5NkkFu3fHg7qyC/nUNPOimZGKLy4s6yofEEsoJqPdVo0PTkalITAgMOlYVZKbX+RxgAAA7xJREFUWMOtmOd2ozAQhQWmmF4NphgMxGBwb9H7v9nam42DzUyyAd9/HHQ+SaM7o0J+llsljmIYin+cS2MyXNqc3iVI3HCgq9AvLUbDgWujBcz44cB3uwWcDQ8il7MtoOIOX5MZbYmVfg2wrMdviaVtOerTBH7Ajeq9E7YDHyn0UVX77zgsl5vveOPlhFL9YH5+896UPkk8aPfmZiBQJnNxnhbof+2bnFXuhmt2Bu1IXKxGH717qXD9ZmYNGr6tQP+KEf3TYRmkBksBMXIWRoWXz2zmX1xXyHwrhv6vWKHdl9OA4zsItK+SGDCwZNPeYhZaB2g6dIDYsAN8U+gQVR2H81t2AE+sSUfqnOnNE3YW6apReq/JHM6/vO8Q5QKgDVmXOY+UmrQnEC2S255LHGHAoB9QX2PAkqJiGAYfYYGVrxmSV0q63R2CxdFGOjsjwNUExO1DdTy6itdWWxkkItv/aAv17ktaqyStTiLQyACDyNUTgJesO7sO0KqE9n/Ph3JK7RSRECDqeWfSm6XCdHmOC0RmKQLEwPyaqqWZjeRArrA9cG/MKCDnrI750Y33nu2nMmyyEs7RQgbd4KenoODIZkYxTRDDcngC+GvSyOjflMdOeCLFtCSF/c1PRJspxbQjHtqbgBYRK0OBJbmwaAhj9IxWocAFqVGgoaLAHVp6MnJ5LfBEPAGtmw0G5MtvphzpaE2t0XNpggIrsp6gP7cY8M2gmHJiHikWkKmJACU0hOyZcF7qKxP4qCrBPG0Pw/SJfDIJ4bS4iXLQ+w68zkuoeyFZetFqczdCHOhAn5UFbT0KwDvWGvfkLegEa4fd7SeeAZU4UwFz7QBHyuHzGN05wEvALDWPUEIH6kOv3pEBuo1+4QbWCbV7WJrSBtqg13LXgLxzRQaXday6kZTJsF8uWEbt0dJoG4YsYnY23shLz4d4RvHJi4GbaT+g4SLASOwHZGskhGUvHP74Esl9gfY7xLvlaE8xsxgw4YIZcL09aR0gcIIYti5reQiQCbuurtgBQCd+7fVWAZfZnfXlyWeOgMR7tRGmZZ5vHQEBiH6S+DrztVFwBFbzYUVx7t12HO72dATc0ZRgdb0Ijdf5lP03PoLKnV/bGF9Pt5ud3jFIuvocT1zd/vo1R3CZlb+/jNqvQ89r3765WJIiJAVHvhNvbh4ajLOn2uc+1BO3MGEermICvHAOkZU+DFAdDOQOzGvfsbmQbXkm58hg1UILKPUC4oVc98hwWbk/0cWrdFsJNPIC8Wb89iHVIj/qD7BjzjdOJ9y+AAAAAElFTkSuQmCC"},e4f6:function(o,e,i){},e559:function(o,e,i){"use strict";i("054e")},e58f:function(o,e,i){},ea17:function(o,e,i){"use strict";i("c12b")},eb35:function(o,e,i){"use strict";i("3167")},ec42:function(o,e,i){},f0d1:function(o,e){o.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAh1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD3YishAAAALHRSTlMAHWYM844W+fbOXRF7rtQHbBPl3NiGVcSrdjLqx7M6JebtiVG2PDmSZUW4lkeFA2IAAAKHSURBVFjDpZfterIwDIZTOlS+XgTlQ1FEdLp34/yPb6R0VCjYcvX54bVR7tCmSdrAnEiaBE61aZpN5QR1SmCRPu1dM9Lu+alLewdOSzYOng5efzSz+qiVJrZX/u46s90HoQCUPNw6W/PH1+1b/HLidH6jwxF6y7mN02Wed7vZV340NRr5VbcOd463u3Gfwoyo333BnhwNAzZ4frvj5MxeCsIJ/htHNhYoZG3wvbtsgX0/PoJSx5jNYXL9e62AJfsJP7iMX4GWVsyCO9h/9G6snTAkxt16jYcT+u8I2jqiJ08v8YtT+oIFspDoo9q74v7DIp0xL/4yq8YVLawYBL2W8Ang3z4slI9f7aZwwPyhGsz/w5fYaFq02AFQO70JrNhWuYMp7Fj9w/yP1Py/rlL0mx1hfSh5EOd6POrZP8oxoPkKbtp8c++fpRj9AATnRbX55ke4EddAmJ1Mlxc+QGXt/ykk7W+tzYuA595LWCFxtXlrXAMCcNrfBwjRZ7E+3XR4KNsnDlTME71Ch725VfOd/2PAzKajzEYLah4ohibgyLC2cgtKHkLGygaEBZmXDchLEBYUPF+C7MRevszLTpS2MXqxIPPyNsqBFDk6vAikRDplIkfNi1CWkwktqHmRTHI6owUVL9JZKijcgpLnBWWupHmOiuclbbaoRo6KX7GiOl/WvUxUcVmirPODpaBT54hF5nlxsJgfbZAYHK5Gx3vhDXLYWnzBsAyvOJnxJcv0mmd60TS86uZyib0vu2ybXffz0LDhULQ8hb+abnkK0fIom6503HSlf01XdtFv+0pCw5CS0rX7tq9QetlL3jWeiWfa+mqqtPdjem+XSkxu/2Ns/2MnSObb/1/3C6xgJU1VjAAAAABJRU5ErkJggg=="},f21a:function(o,e,i){"use strict";i("78ae")},f3c6:function(o,e,i){},f8a8:function(o,e,i){},f8c2:function(o,e,i){"use strict";i("2c8c")},fbc0:function(o,e,i){"use strict";i("1333")},fc23:function(o,e,i){"use strict";i("e048")}});
//# sourceMappingURL=app.96a2b508.js.map