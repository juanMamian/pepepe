{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/personaVistaLista.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/personaVistaLista.vue","mtime":1675084065131},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgQ2FsZW5kYXJpbyBmcm9tICIuLi91dGlsaWRhZGVzL0NhbGVuZGFyaW8udnVlIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAiLi4vdXRpbGlkYWRlcy9Mb2FkaW5nLnZ1ZSI7CmltcG9ydCBWZW50YW5hTGlzdGEgZnJvbSAiLi4vYXRsYXNTb2xpZGFyaWRhZC92ZW50YW5hTGlzdGEvdmVudGFuYUxpc3RhLnZ1ZSI7CmltcG9ydCB7CiAgQWxpZ25tZW50VHlwZSwKICBEb2N1bWVudCwKICBIZWFkaW5nTGV2ZWwsCiAgUGFja2VyLAogIFBhcmFncmFwaCwKICBUYWJsZVJvdywKICBUYWJsZUNlbGwsCiAgVGFibGUsCiAgV2lkdGhUeXBlLAogIFRleHRSdW4sCn0gZnJvbSAiZG9jeCI7CmltcG9ydCB7IHNhdmVBcyB9IGZyb20gImZpbGUtc2F2ZXIiOwppbXBvcnQgUnV0YUdyYWRvIGZyb20gJy4vUnV0YUdyYWRvLnZ1ZSc7Cgpjb25zdCBRVUVSWV9JTkZPUk1FUyA9IGdxbGAKICBxdWVyeSAoJGlkVXN1YXJpbzogSUQhKSB7CiAgICBVc3VhcmlvKGlkVXN1YXJpbzogJGlkVXN1YXJpbykgewogICAgICBpZAogICAgICBpbmZvcm1lc01hZXN0cmFWaWRhIHsKICAgICAgICBpZAogICAgICAgIHllYXIKICAgICAgICBwZXJpb2RvCiAgICAgICAgaWRQcm9mZQogICAgICAgIG5vbWJyZVByb2ZlCiAgICAgICAgY2F0ZWdvcmlhCiAgICAgICAgdGV4dG8KICAgICAgfQogICAgfQogIH0KYDsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IENhbGVuZGFyaW8sIExvYWRpbmcsIFZlbnRhbmFMaXN0YSwgUnV0YUdyYWRvIH0sCiAgcHJvcHM6IHsKICAgIHBlcnNvbmFzQ29uRXNwYWNpbzpBcnJheSwKICAgIG1vc3RyYXJFc3BhY2lvQWN0dWFsOkJvb2xlYW4sCiAgICBlc3RhUGVyc29uYTogT2JqZWN0LAogICAgc2VsZWNjaW9uYWRvOiBCb29sZWFuLAogICAgbm9kb3NTb2xpZGFyaWRhZFB1YmxpY2l0YWRvczogQXJyYXksCiAgfSwKICBuYW1lOiAiUGVyc29uYVZpc3RhTGlzdGEiLAogIGFwb2xsbzogewogICAgaW5mb3JtZXM6IHsKICAgICAgcXVlcnk6IFFVRVJZX0lORk9STUVTLAogICAgICB2YXJpYWJsZXMoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkVXN1YXJpbzogdGhpcy5lc3RhUGVyc29uYS5pZCwKICAgICAgICB9OwogICAgICB9LAogICAgICBza2lwKCkgewogICAgICAgIHJldHVybiB0aGlzLm1vc3RyYW5kbyAhPSAiaW5mb3JtZSI7CiAgICAgIH0sCiAgICAgIHVwZGF0ZSh7IFVzdWFyaW8gfSkgewogICAgICAgIHJldHVybiBVc3VhcmlvLmluZm9ybWVzTWFlc3RyYVZpZGE7CiAgICAgIH0sCiAgICB9LAogICAgb2JqZXRpdm9zOnsKICAgICAgcXVlcnk6IGdxbGAKICAgICAgICBxdWVyeSgkaWRVc3VhcmlvOiBJRCEpewogICAgICAgICAgVXN1YXJpbyhpZFVzdWFyaW86ICRpZFVzdWFyaW8pewogICAgICAgICAgICBpZAogICAgICAgICAgICBvYmpldGl2b3NFc3R1ZGlhbnRlewogICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgbm9tYnJlCiAgICAgICAgICAgICAgZXN0YWRvRGVzYXJyb2xsbwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBgLAogICAgICB2YXJpYWJsZXMoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWRVc3VhcmlvOiB0aGlzLmVzdGFQZXJzb25hLmlkCiAgICAgICAgfQogICAgICB9LAogICAgICB1cGRhdGUoe1VzdWFyaW99KXsKICAgICAgICByZXR1cm4gVXN1YXJpby5vYmpldGl2b3NFc3R1ZGlhbnRlCiAgICAgIH0sCiAgICAgIHNraXAoKXsKICAgICAgICByZXR1cm4gdGhpcy5tb3N0cmFuZG8hPSJpbmZvcm1lIgogICAgICB9CiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBlcm1pc29zUG9zaWJsZXM6IFsKICAgICAgICAidXN1YXJpbyIsCiAgICAgICAgImFkbWluaXN0cmFkb3IiLAogICAgICAgICJhdGxhc0FkbWluaXN0cmFkb3IiLAogICAgICAgICJzdXBlcmFkbWluaXN0cmFkb3IiLAogICAgICAgICJtYWVzdHJhVmlkYSIsCiAgICAgICAgIm1hZXN0cmFWaWRhLWVzdHVkaWFudGUiLAogICAgICAgICJtYWVzdHJhVmlkYS1wcm9mZXNvciIsCiAgICAgICAgIm1hZXN0cmFWaWRhLWFjb21wYcOxYW50ZSIsCiAgICAgICAgIm1hZXN0cmFWaWRhLWdyYWR1YWRvIiwKICAgICAgXSwKICAgICAgaW5mb3JtZXM6IFtdLAogICAgICBvYmpldGl2b3M6IFtdLAoKICAgICAgbW9zdHJhbmRvOiBudWxsLAogICAgICByZXNldGVhbmRvUGFzc3dvcmQ6IGZhbHNlLAogICAgICBhbGllbmFuZG86IGZhbHNlLAoKICAgICAgbW9zdHJhbmRvUGVybWlzb3M6IGZhbHNlLAogICAgICB0b2dnbGluZ1Blcm1pc286IGZhbHNlLAoKICAgICAgc2V0dGluZ1ByZXNlbmNpYU5vZG9Tb2xpZGFyaWRhZDogZmFsc2UsCgogICAgICBndWFyZGFuZG9JbmZvcm1lT2JqZXRpdm9zOiBmYWxzZSwKICAgICAgZ3VhcmRhbmRvSW5mb3JtZUVzcGFjaW9zOiBmYWxzZSwKICAgICAgZ3VhcmRhbmRvSW5mb3JtZUNvbWVudGFyaW86IGZhbHNlLAogICAgICBndWFyZGFuZG9JbmZvcm1lUHJveWVjdG9zOiBmYWxzZSwKICAgICAgY3JlYW5kb0RvY3VtZW50b0luZm9ybWU6IGZhbHNlLAoKICAgICAgbnVldm9JbmZvcm1lT2JqZXRpdm9zOiBudWxsLAogICAgICBudWV2b0luZm9ybWVQcm95ZWN0b3M6IG51bGwsCiAgICAgIG51ZXZvSW5mb3JtZUVzcGFjaW9zOiBudWxsLAogICAgICBudWV2b0luZm9ybWVDb21lbnRhcmlvOiBudWxsLAoKICAgICAgcGVyaW9kb0luZm9ybWU6ICJwcmltZXJvIiwKICAgICAgYWN0aXZhYmxlOiAwLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlc2V0ZWFyUGFzc3dvcmQoKSB7CiAgICAgIGlmICgKICAgICAgICAhY29uZmlybSgKICAgICAgICAgICLCv0NvbmZpcm1hciByZXNldGVhciBlbCBwYXNzd29yZCBkZSAiICsgdGhpcy5lc3RhUGVyc29uYS5ub21icmVzICsgIj8iCiAgICAgICAgKQogICAgICApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coYFJlc2V0ZWFuZG8gcGFzc3dvcmQgdXN1YXJpb2ApOwogICAgICB0aGlzLnJlc2V0ZWFuZG9QYXNzd29yZCA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKCRpZFVzdWFyaW86IElEISkgewogICAgICAgICAgICAgIHJlc2V0ZWFyUGFzc3dvcmRVc3VhcmlvKGlkVXN1YXJpbzogJGlkVXN1YXJpbykKICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZFVzdWFyaW86IHRoaXMuZXN0YVBlcnNvbmEuaWQsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5yZXNldGVhbmRvUGFzc3dvcmQgPSBmYWxzZTsKICAgICAgICAgIGFsZXJ0KCJDb250cmFzZcOxYSByZXNldGVhZGEiKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgICB0aGlzLnJlc2V0ZWFuZG9QYXNzd29yZCA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIGFsaWVuYXIoKSB7CiAgICAgIGlmICghdGhpcy51c3VhcmlvUHJvZmUgJiYgIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5hbGllbmFuZG8gPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAucXVlcnkoewogICAgICAgICAgcXVlcnk6IGdxbGAKICAgICAgICAgICAgcXVlcnkgKCRpZEFsaWVuYWRvOiBJRCEpIHsKICAgICAgICAgICAgICBhbGllbmFyVXN1YXJpbyhpZEFsaWVuYWRvOiAkaWRBbGllbmFkbykKICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZEFsaWVuYWRvOiB0aGlzLmVzdGFQZXJzb25hLmlkLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGE6IHsgYWxpZW5hclVzdWFyaW8gfSB9KSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgQWxpZW5hbmRvYCk7CiAgICAgICAgICB0aGlzLmFsaWVuYW5kbyA9IHRydWU7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImxvZ2VhcnNlIiwgYWxpZW5hclVzdWFyaW8pOwogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9taVBlcmZpbCIpOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApOwogICAgICAgICAgdGhpcy5hbGllbmFuZG8gPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGVQZXJtaXNvKHBlcm1pc28pIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy50b2dnbGluZ1Blcm1pc28gPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uICgkcGVybWlzbzogU3RyaW5nISwgJGlkVXN1YXJpbzogSUQhKSB7CiAgICAgICAgICAgICAgdG9nZ2xlUGVybWlzb1VzdWFyaW8ocGVybWlzbzogJHBlcm1pc28sIGlkVXN1YXJpbzogJGlkVXN1YXJpbykgewogICAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICAgIHBlcm1pc29zCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICBgLAogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIHBlcm1pc28sCiAgICAgICAgICAgIGlkVXN1YXJpbzogdGhpcy5lc3RhUGVyc29uYS5pZCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnRvZ2dsaW5nUGVybWlzbyA9IGZhbHNlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApOwogICAgICAgICAgdGhpcy50b2dnbGluZ1Blcm1pc28gPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGVSZXNwb25zYWJsZU5vZG9Tb2xpZGFyaWRhZChub2RvKSB7CiAgICAgIGNvbnNvbGUubG9nKAogICAgICAgIGBTZXR0aW5nIHByZXNlbmNpYSBkZSAke3RoaXMuZXN0YVBlcnNvbmEuaWR9IGVuIGVsIG5vZG8gJHtub2RvLmlkfWAKICAgICAgKTsKICAgICAgY29uc3QgcGVyc29uYUVuUmVzcG9uc2FibGVzID0gbm9kby5yZXNwb25zYWJsZXMuaW5jbHVkZXMoCiAgICAgICAgdGhpcy5lc3RhUGVyc29uYS5pZAogICAgICApOwoKICAgICAgaWYgKHBlcnNvbmFFblJlc3BvbnNhYmxlcykgewogICAgICAgIGNvbnNvbGUubG9nKGBTYWPDoW5kb2xvYCk7CgogICAgICAgIHRoaXMuc2V0dGluZ1ByZXNlbmNpYU5vZG9Tb2xpZGFyaWRhZCA9IHRydWU7CiAgICAgICAgdGhpcy4kYXBvbGxvCiAgICAgICAgICAubXV0YXRlKHsKICAgICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkTm9kbzogSUQhLCAkaWRVc3VhcmlvOiBJRCEpIHsKICAgICAgICAgICAgICAgIHJlbW92ZVJlc3BvbnNhYmxlTm9kb1NvbGlkYXJpZGFkKAogICAgICAgICAgICAgICAgICBpZE5vZG86ICRpZE5vZG8KICAgICAgICAgICAgICAgICAgaWRVc3VhcmlvOiAkaWRVc3VhcmlvCiAgICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICAgICAgcmVzcG9uc2FibGVzCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBgLAogICAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgICBpZE5vZG86IG5vZG8uaWQsCiAgICAgICAgICAgICAgaWRVc3VhcmlvOiB0aGlzLmVzdGFQZXJzb25hLmlkLAogICAgICAgICAgICB9LAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5zZXR0aW5nUHJlc2VuY2lhTm9kb1NvbGlkYXJpZGFkID0gZmFsc2U7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7CiAgICAgICAgICAgIHRoaXMuc2V0dGluZ1ByZXNlbmNpYU5vZG9Tb2xpZGFyaWRhZCA9IGZhbHNlOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coYERlbnRyw6FuZG9sb2ApOwogICAgICAgIHRoaXMuc2V0dGluZ1ByZXNlbmNpYU5vZG9Tb2xpZGFyaWRhZCA9IHRydWU7CgogICAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgICAgLm11dGF0ZSh7CiAgICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISwgJGlkVXN1YXJpbzogSUQhKSB7CiAgICAgICAgICAgICAgICBhZGRSZXNwb25zYWJsZU5vZG9Tb2xpZGFyaWRhZCgKICAgICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvCiAgICAgICAgICAgICAgICAgIGlkVXN1YXJpbzogJGlkVXN1YXJpbwogICAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICAgIHJlc3BvbnNhYmxlcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgYCwKICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgaWROb2RvOiBub2RvLmlkLAogICAgICAgICAgICAgIGlkVXN1YXJpbzogdGhpcy5lc3RhUGVyc29uYS5pZCwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuc2V0dGluZ1ByZXNlbmNpYU5vZG9Tb2xpZGFyaWRhZCA9IGZhbHNlOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApOwogICAgICAgICAgICB0aGlzLnNldHRpbmdQcmVzZW5jaWFOb2RvU29saWRhcmlkYWQgPSBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZ3VhcmRhckluZm9ybWUoY2F0ZWdvcmlhKSB7CiAgICAgIGNvbnNvbGUubG9nKCJHdWFyZGFuZG8gaW5mb3JtZSIpOwogICAgICB2YXIgdGV4dG8gPSBudWxsOwogICAgICBpZiAoY2F0ZWdvcmlhID09PSAib2JqZXRpdm9zIikgewogICAgICAgIHRleHRvID0gdGhpcy4kcmVmcy5pbnB1dEluZm9ybWVDYXRlZ29yaWFPYmpldGl2b3MudmFsdWU7CiAgICAgICAgaWYgKHRleHRvID09PSB0aGlzLm1pc0luZm9ybWVzQWN0aXZvcy5vYmpldGl2b3MpIHJldHVybjsKICAgICAgICB0aGlzLmd1YXJkYW5kb0luZm9ybWVPYmpldGl2b3MgPSB0cnVlOwogICAgICAgIGlmICh0ZXh0bykgewogICAgICAgICAgdGV4dG8gPSB0ZXh0by50cmltKCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubnVldm9JbmZvcm1lT2JqZXRpdm9zID0gdGV4dG87CiAgICAgIH0KICAgICAgaWYgKGNhdGVnb3JpYSA9PT0gImVzcGFjaW9zIikgewogICAgICAgIHRleHRvID0gdGhpcy4kcmVmcy5pbnB1dEluZm9ybWVDYXRlZ29yaWFFc3BhY2lvcy52YWx1ZTsKICAgICAgICBpZiAodGV4dG8gPT09IHRoaXMubWlzSW5mb3JtZXNBY3Rpdm9zLmVzcGFjaW9zKSByZXR1cm47CiAgICAgICAgdGhpcy5ndWFyZGFuZG9JbmZvcm1lRXNwYWNpb3MgPSB0cnVlOwogICAgICAgIGlmICh0ZXh0bykgewogICAgICAgICAgdGV4dG8gPSB0ZXh0by50cmltKCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubnVldm9JbmZvcm1lRXNwYWNpb3MgPSB0ZXh0bzsKICAgICAgfQogICAgICBpZiAoY2F0ZWdvcmlhID09PSAiY29tZW50YXJpbyIpIHsKICAgICAgICB0ZXh0byA9IHRoaXMuJHJlZnMuaW5wdXRJbmZvcm1lQ2F0ZWdvcmlhQ29tZW50YXJpby52YWx1ZTsKICAgICAgICBpZiAodGV4dG8gPT09IHRoaXMubWlzSW5mb3JtZXNBY3Rpdm9zLmNvbWVudGFyaW8pIHJldHVybjsKICAgICAgICB0aGlzLmd1YXJkYW5kb0luZm9ybWVDb21lbnRhcmlvID0gdHJ1ZTsKICAgICAgICBpZiAodGV4dG8pIHsKICAgICAgICAgIHRleHRvID0gdGV4dG8udHJpbSgpOwogICAgICAgIH0KICAgICAgICB0aGlzLm51ZXZvSW5mb3JtZUNvbWVudGFyaW8gPSB0ZXh0bzsKICAgICAgfQogICAgICBpZiAoY2F0ZWdvcmlhID09PSAicHJveWVjdG9zIikgewogICAgICAgIHRleHRvID0gdGhpcy4kcmVmcy5pbnB1dEluZm9ybWVDYXRlZ29yaWFQcm95ZWN0b3MudmFsdWU7CiAgICAgICAgaWYgKHRleHRvID09PSB0aGlzLm1pc0luZm9ybWVzQWN0aXZvcy5wcm95ZWN0b3MpIHJldHVybjsKICAgICAgICB0aGlzLmd1YXJkYW5kb0luZm9ybWVQcm95ZWN0b3MgPSB0cnVlOwogICAgICAgIGlmICh0ZXh0bykgewogICAgICAgICAgdGV4dG8gPSB0ZXh0by50cmltKCk7CiAgICAgICAgfQogICAgICAgIHRoaXMubnVldm9JbmZvcm1lUHJveWVjdG9zID0gdGV4dG87CiAgICAgIH0KCiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKAogICAgICAgICAgICAgICRpZFVzdWFyaW86IElEIQogICAgICAgICAgICAgICR5ZWFyOiBJbnQhCiAgICAgICAgICAgICAgJHBlcmlvZG86IFN0cmluZyEKICAgICAgICAgICAgICAkaWRQcm9mZTogSUQhCiAgICAgICAgICAgICAgJGNhdGVnb3JpYTogU3RyaW5nIQogICAgICAgICAgICAgICR0ZXh0bzogU3RyaW5nIQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBndWFyZGFySW5mb3JtZUVzdHVkaWFudGVNYWVzdHJhVmlkYSgKICAgICAgICAgICAgICAgIGlkVXN1YXJpbzogJGlkVXN1YXJpbwogICAgICAgICAgICAgICAgeWVhcjogJHllYXIKICAgICAgICAgICAgICAgIHBlcmlvZG86ICRwZXJpb2RvCiAgICAgICAgICAgICAgICBpZFByb2ZlOiAkaWRQcm9mZQogICAgICAgICAgICAgICAgY2F0ZWdvcmlhOiAkY2F0ZWdvcmlhCiAgICAgICAgICAgICAgICB0ZXh0bzogJHRleHRvCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgICAgeWVhcgogICAgICAgICAgICAgICAgcGVyaW9kbwogICAgICAgICAgICAgICAgaWRQcm9mZQogICAgICAgICAgICAgICAgbm9tYnJlUHJvZmUKICAgICAgICAgICAgICAgIGNhdGVnb3JpYQogICAgICAgICAgICAgICAgdGV4dG8KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWRVc3VhcmlvOiB0aGlzLmVzdGFQZXJzb25hLmlkLAogICAgICAgICAgICB5ZWFyOiAyMDIzLAogICAgICAgICAgICBwZXJpb2RvOiB0aGlzLnBlcmlvZG9JbmZvcm1lLAogICAgICAgICAgICBpZFByb2ZlOiB0aGlzLnVzdWFyaW8uaWQsCiAgICAgICAgICAgIGNhdGVnb3JpYSwKICAgICAgICAgICAgdGV4dG8sCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgZGF0YTogeyBndWFyZGFySW5mb3JtZUVzdHVkaWFudGVNYWVzdHJhVmlkYSB9IH0pID0+IHsKICAgICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy4kYXBvbGxvLnByb3ZpZGVyLmRlZmF1bHRDbGllbnQ7CiAgICAgICAgICBjb25zdCBjYWNoZSA9IHN0b3JlLnJlYWRRdWVyeSh7CiAgICAgICAgICAgIHF1ZXJ5OiBRVUVSWV9JTkZPUk1FUywKICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgaWRVc3VhcmlvOiB0aGlzLmVzdGFQZXJzb25hLmlkLAogICAgICAgICAgICB9LAogICAgICAgICAgfSk7CgogICAgICAgICAgdmFyIG51ZXZvQ2FjaGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNhY2hlKSk7CiAgICAgICAgICB2YXIgZWxJbmZvcm1lID0gbnVldm9DYWNoZS5Vc3VhcmlvLmluZm9ybWVzTWFlc3RyYVZpZGEuZmluZCgKICAgICAgICAgICAgKGkpID0+IGkuaWQgPT09IGd1YXJkYXJJbmZvcm1lRXN0dWRpYW50ZU1hZXN0cmFWaWRhLmlkCiAgICAgICAgICApOwogICAgICAgICAgaWYgKCFlbEluZm9ybWUpIHsKICAgICAgICAgICAgLy9BZGQgYWwgY2FjaGUKICAgICAgICAgICAgbnVldm9DYWNoZS5Vc3VhcmlvLmluZm9ybWVzTWFlc3RyYVZpZGEucHVzaCgKICAgICAgICAgICAgICBndWFyZGFySW5mb3JtZUVzdHVkaWFudGVNYWVzdHJhVmlkYQogICAgICAgICAgICApOwoKICAgICAgICAgICAgc3RvcmUud3JpdGVRdWVyeSh7CiAgICAgICAgICAgICAgcXVlcnk6IFFVRVJZX0lORk9STUVTLAogICAgICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICAgICAgaWRVc3VhcmlvOiB0aGlzLmVzdGFQZXJzb25hLmlkLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgZGF0YTogbnVldm9DYWNoZSwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGNhdGVnb3JpYSA9PT0gIm9iamV0aXZvcyIpIHsKICAgICAgICAgICAgdGhpcy5ndWFyZGFuZG9JbmZvcm1lT2JqZXRpdm9zID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY2F0ZWdvcmlhID09PSAiZXNwYWNpb3MiKSB7CiAgICAgICAgICAgIHRoaXMuZ3VhcmRhbmRvSW5mb3JtZUVzcGFjaW9zID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoY2F0ZWdvcmlhID09PSAiY29tZW50YXJpbyIpIHsKICAgICAgICAgICAgdGhpcy5ndWFyZGFuZG9JbmZvcm1lQ29tZW50YXJpbyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNhdGVnb3JpYSA9PT0gInByb3llY3RvcyIpIHsKICAgICAgICAgICAgdGhpcy5ndWFyZGFuZG9JbmZvcm1lUHJveWVjdG9zID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBhbGVydCgiwqFFcnJvciBndWFyZGFuZG8gaW5mb3JtZSEiKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJlcnJvcjogIiArIGVycm9yKTsKICAgICAgICAgIGlmIChjYXRlZ29yaWEgPT09ICJvYmpldGl2b3MiKSB7CiAgICAgICAgICAgIHRoaXMuZ3VhcmRhbmRvSW5mb3JtZU9iamV0aXZvcyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNhdGVnb3JpYSA9PT0gImVzcGFjaW9zIikgewogICAgICAgICAgICB0aGlzLmd1YXJkYW5kb0luZm9ybWVFc3BhY2lvcyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgICAgaWYgKGNhdGVnb3JpYSA9PT0gImNvbWVudGFyaW8iKSB7CiAgICAgICAgICAgIHRoaXMuZ3VhcmRhbmRvSW5mb3JtZUNvbWVudGFyaW8gPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChjYXRlZ29yaWEgPT09ICJwcm95ZWN0b3MiKSB7CiAgICAgICAgICAgIHRoaXMuZ3VhcmRhbmRvSW5mb3JtZVByb3llY3RvcyA9IGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIGRlc2NhcmdhckFyY2hpdm9JbmZvcm1lKCkgewogICAgICBjb25zb2xlLmxvZygKICAgICAgICAiQ3JlYW5kbyBkb2N1bWVudG8gZG9jeCBkZSBpbmZvcm1lIHBhcmEgIiArIHRoaXMuZXN0YVBlcnNvbmEubm9tYnJlcwogICAgICApOwoKICAgICAgdGhpcy5jcmVhbmRvRG9jdW1lbnRvSW5mb3JtZSA9IHRydWU7CgogICAgICB2YXIgZmlsYU9iamV0aXZvcyA9IG5ldyBUYWJsZVJvdyh7CiAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgIG5ldyBUYWJsZUNlbGwoewogICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgdGV4dDogIkFjZXJjYSBkZSBsb3Mgb2JqZXRpdm9zIiwKICAgICAgICAgICAgICAgIHN0eWxlOiAibm9tYnJlU2VjY2lvbiIsCiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICBdLAogICAgICAgICAgICB3aWR0aDogewogICAgICAgICAgICAgIHNpemU6IDMwMCwKICAgICAgICAgICAgICB0eXBlOiBXaWR0aFR5cGUuRFhBLAogICAgICAgICAgICB9LAogICAgICAgICAgfSksCiAgICAgICAgICBuZXcgVGFibGVDZWxsKHsKICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAuLi50aGlzLmluZm9ybWVzCiAgICAgICAgICAgICAgICAuZmlsdGVyKAogICAgICAgICAgICAgICAgICAoaSkgPT4KICAgICAgICAgICAgICAgICAgICBpLnllYXIgPT0gMjAyMyAmJgogICAgICAgICAgICAgICAgICAgIGkucGVyaW9kbyA9PT0gdGhpcy5wZXJpb2RvSW5mb3JtZSAmJgogICAgICAgICAgICAgICAgICAgIGkuY2F0ZWdvcmlhID09PSAib2JqZXRpdm9zIiAmJgogICAgICAgICAgICAgICAgICAgIGkudGV4dG8gJiYKICAgICAgICAgICAgICAgICAgICBpLnRleHRvLmxlbmd0aCA+IDEwCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIGluZm9ybWUpID0+IHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoWwogICAgICAgICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IGluZm9ybWUudGV4dG8uc3BsaXQoIlxuIikubWFwKCh0ZXh0UikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRleHRSdW4oewogICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHRSLAogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOiAxLAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICJ0ZXh0b1Byb2ZlIiwgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGluZm9ybWUubm9tYnJlUHJvZmUsCiAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogImZpcm1hUHJvZmUiLAogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgIH0sIFtdKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICBzaXplOiA3MDAsCiAgICAgICAgICAgICAgdHlwZTogV2lkdGhUeXBlLkRYQSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pLAogICAgICAgIF0sCiAgICAgIH0pOwoKICAgICAgdmFyIGZpbGFQcm95ZWN0b3MgPSBuZXcgVGFibGVSb3coewogICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICBuZXcgVGFibGVDZWxsKHsKICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICBzaXplOiAzMDAwLAogICAgICAgICAgICAgIHR5cGU6IFdpZHRoVHlwZS5EWEEsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiUHJveWVjdG9zIHBlZGFnw7NnaWNvcyBwcm9kdWN0aXZvcyIsCiAgICAgICAgICAgICAgICBzdHlsZTogIm5vbWJyZVNlY2Npb24iLAogICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH0pLAogICAgICAgICAgbmV3IFRhYmxlQ2VsbCh7CiAgICAgICAgICAgIHdpZHRoOiB7CiAgICAgICAgICAgICAgc2l6ZTogMjcwMCwKICAgICAgICAgICAgICB0eXBlOiBXaWR0aFR5cGUuRFhBLAogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgIC4uLnRoaXMuaW5mb3JtZXMKICAgICAgICAgICAgICAgIC5maWx0ZXIoCiAgICAgICAgICAgICAgICAgIChpKSA9PgogICAgICAgICAgICAgICAgICAgIGkueWVhciA9PSAyMDIzICYmCiAgICAgICAgICAgICAgICAgICAgaS5wZXJpb2RvID09PSB0aGlzLnBlcmlvZG9JbmZvcm1lICYmCiAgICAgICAgICAgICAgICAgICAgaS5jYXRlZ29yaWEgPT09ICJwcm95ZWN0b3MiICYmCiAgICAgICAgICAgICAgICAgICAgaS50ZXh0byAmJgogICAgICAgICAgICAgICAgICAgIGkudGV4dG8ubGVuZ3RoID4gMTAKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgaW5mb3JtZSkgPT4gewogICAgICAgICAgICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChbCiAgICAgICAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogaW5mb3JtZS50ZXh0by5zcGxpdCgiXG4iKS5tYXAoKHRleHRSKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dFJ1bih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dFIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogInRleHRvUHJvZmUiLCAKICAgICAgICAgICAgICAgICAgICAgIC8vIHRleHQ6IGluZm9ybWUudGV4dG8sCiAgICAgICAgICAgICAgICAgICAgICAvLyBzdHlsZTogInRleHRvUHJvZmUiLAogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgICAgICAgdGV4dDogaW5mb3JtZS5ub21icmVQcm9mZSwKICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAiZmlybWFQcm9mZSIsCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgfSwgW10pLAogICAgICAgICAgICBdLAogICAgICAgICAgfSksCiAgICAgICAgXSwKICAgICAgfSk7CgogICAgICB2YXIgZmlsYUVzcGFjaW9zID0gbmV3IFRhYmxlUm93KHsKICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgbmV3IFRhYmxlQ2VsbCh7CiAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiQWNlcmNhIGRlIGxvcyBlc3BhY2lvcyIsCiAgICAgICAgICAgICAgICBzdHlsZTogIm5vbWJyZVNlY2Npb24iLAogICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICBzaXplOiAzMDAsCiAgICAgICAgICAgICAgdHlwZTogV2lkdGhUeXBlLkRYQSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pLAogICAgICAgICAgbmV3IFRhYmxlQ2VsbCh7CiAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgLi4udGhpcy5pbmZvcm1lcwogICAgICAgICAgICAgICAgLmZpbHRlcigKICAgICAgICAgICAgICAgICAgKGkpID0+CiAgICAgICAgICAgICAgICAgICAgaS55ZWFyID09IDIwMjMgJiYKICAgICAgICAgICAgICAgICAgICBpLnBlcmlvZG8gPT09IHRoaXMucGVyaW9kb0luZm9ybWUgJiYKICAgICAgICAgICAgICAgICAgICBpLmNhdGVnb3JpYSA9PT0gImVzcGFjaW9zIiAmJgogICAgICAgICAgICAgICAgICAgIGkudGV4dG8gJiYKICAgICAgICAgICAgICAgICAgICBpLnRleHRvLmxlbmd0aCA+IDEwCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIGluZm9ybWUpID0+IHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYy5jb25jYXQoWwogICAgICAgICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IGluZm9ybWUudGV4dG8uc3BsaXQoIlxuIikubWFwKCh0ZXh0UikgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRleHRSdW4oewogICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHRleHRSLAogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOiAxLAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgICAgc3R5bGU6ICJ0ZXh0b1Byb2ZlIiwgCiAgICAgICAgICAgICAgICAgICAgICAvLyB0ZXh0OiBpbmZvcm1lLnRleHRvLAogICAgICAgICAgICAgICAgICAgICAgLy8gc3R5bGU6ICJ0ZXh0b1Byb2ZlIiwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IGluZm9ybWUubm9tYnJlUHJvZmUsCiAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogImZpcm1hUHJvZmUiLAogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICBdKTsKICAgICAgICAgICAgICAgIH0sIFtdKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICBzaXplOiA3MDAsCiAgICAgICAgICAgICAgdHlwZTogV2lkdGhUeXBlLkRYQSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pLAogICAgICAgIF0sCiAgICAgIH0pOwoKICAgICAgdmFyIGZpbGFDb21lbnRhcmlvID0gbmV3IFRhYmxlUm93KHsKICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgbmV3IFRhYmxlQ2VsbCh7CiAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiQ29tZW50YXJpbyIsCiAgICAgICAgICAgICAgICBzdHlsZTogIm5vbWJyZVNlY2Npb24iLAogICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICBzaXplOiAzMDAsCiAgICAgICAgICAgICAgdHlwZTogV2lkdGhUeXBlLkRYQSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pLAogICAgICAgICAgbmV3IFRhYmxlQ2VsbCh7CiAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgLi4udGhpcy5pbmZvcm1lcwogICAgICAgICAgICAgICAgLmZpbHRlcigKICAgICAgICAgICAgICAgICAgKGkpID0+CiAgICAgICAgICAgICAgICAgICAgaS55ZWFyID09IDIwMjMgJiYKICAgICAgICAgICAgICAgICAgICBpLnBlcmlvZG8gPT09IHRoaXMucGVyaW9kb0luZm9ybWUgJiYKICAgICAgICAgICAgICAgICAgICBpLmNhdGVnb3JpYSA9PT0gImNvbWVudGFyaW8iICYmCiAgICAgICAgICAgICAgICAgICAgaS50ZXh0byAmJgogICAgICAgICAgICAgICAgICAgIGkudGV4dG8ubGVuZ3RoID4gMTAKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIC5yZWR1Y2UoKGFjYywgaW5mb3JtZSkgPT4gewogICAgICAgICAgICAgICAgICByZXR1cm4gYWNjLmNvbmNhdChbCiAgICAgICAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogaW5mb3JtZS50ZXh0by5zcGxpdCgiXG4iKS5tYXAoKHRleHRSKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVGV4dFJ1bih7CiAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGV4dFIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs6IDEsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgICAgICBzdHlsZTogInRleHRvUHJvZmUiLCAKICAgICAgICAgICAgICAgICAgICAgIC8vIHRleHQ6IGluZm9ybWUudGV4dG8sCiAgICAgICAgICAgICAgICAgICAgICAvLyBzdHlsZTogInRleHRvUHJvZmUiLAogICAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgICAgICAgdGV4dDogaW5mb3JtZS5ub21icmVQcm9mZSwKICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiAiZmlybWFQcm9mZSIsCiAgICAgICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgfSwgW10pLAogICAgICAgICAgICBdLAogICAgICAgICAgICB3aWR0aDogewogICAgICAgICAgICAgIHNpemU6IDcwMCwKICAgICAgICAgICAgICB0eXBlOiBXaWR0aFR5cGUuRFhBLAogICAgICAgICAgICB9LAogICAgICAgICAgfSksCiAgICAgICAgXSwKICAgICAgfSk7CgogICAgICB2YXIgZmlsYUFwcm9iYWRvID0gbmV3IFRhYmxlUm93KHsKICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgbmV3IFRhYmxlQ2VsbCh7CiAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiUHJvbW9jaW9uYWRvOiBTSSIsCiAgICAgICAgICAgICAgICBzdHlsZTogIm5vbWJyZVNlY2Npb24iLAogICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgXSwKICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICBzaXplOiAzMDAsCiAgICAgICAgICAgICAgdHlwZTogV2lkdGhUeXBlLkRYQSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pLCAgICAgICAgICAKICAgICAgICBdLAogICAgICB9KTsKCiAgICAgIHZhciB0YWJsYUZpbmFsID0gbmV3IFRhYmxlKHsKICAgICAgICByb3dzOiBbZmlsYU9iamV0aXZvcywgZmlsYVByb3llY3RvcywgZmlsYUVzcGFjaW9zLCBmaWxhQ29tZW50YXJpbywgZmlsYUFwcm9iYWRvXSwKICAgICAgICB3aWR0aDogewogICAgICAgICAgc2l6ZTogODUwMCwKICAgICAgICAgIHR5cGU6IFdpZHRoVHlwZS5EWEEsCiAgICAgICAgfSwKICAgICAgfSk7CgogICAgICB2YXIgYXJjaGl2byA9IG5ldyBEb2N1bWVudCh7CiAgICAgICAgc3R5bGVzOiB7CiAgICAgICAgICBwYXJhZ3JhcGhTdHlsZXM6IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIGlkOiAiZXN0aWxvR2xvYmFsIiwKICAgICAgICAgICAgICBuYW1lOiAiRXN0aWxvIGdsb2JhbCIsCiAgICAgICAgICAgICAgcnVuOiB7CiAgICAgICAgICAgICAgICBmb250OiAiTWFpYW5kcmEgR0QiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpZDogInRpdHVsb3MiLAogICAgICAgICAgICAgIG5hbWU6ICJ0aXR1bG9zIiwKICAgICAgICAgICAgICBiYXNlZE9uOiAiZXN0aWxvR2xvYmFsIiwKICAgICAgICAgICAgICBydW46IHsKICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsCiAgICAgICAgICAgICAgICBzaXplOiAyNCwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIHBhcmFncmFwaDogewogICAgICAgICAgICAgICAgc3BhY2luZzogewogICAgICAgICAgICAgICAgICBhZnRlcjogMjAwLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgaWQ6ICJub21icmVFc3R1ZGlhbnRlIiwKICAgICAgICAgICAgICBuYW1lOiAibm9tYnJlIGRlbCBlc3R1ZGlhbnRlIiwKICAgICAgICAgICAgICBiYXNlZE9uOiAiZXN0aWxvR2xvYmFsIiwKICAgICAgICAgICAgICBydW46IHsKICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsCiAgICAgICAgICAgICAgICBhbGxDYXBzOiB0cnVlLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgcGFyYWdyYXBoOiB7CiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7CiAgICAgICAgICAgICAgICAgIGFmdGVyOiAxMjAsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpZDogIm5vbWJyZVNlY2Npb24iLAogICAgICAgICAgICAgIG5hbWU6ICJub21icmUgZGUgc2VjY2lvbiIsCiAgICAgICAgICAgICAgYmFzZWRPbjogImVzdGlsb0dsb2JhbCIsCiAgICAgICAgICAgICAgcnVuOiB7CiAgICAgICAgICAgICAgICBib2xkOiB0cnVlLAogICAgICAgICAgICAgICAgc2l6ZTogMjQsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwYXJhZ3JhcGg6IHsKICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsKICAgICAgICAgICAgICAgICAgYWZ0ZXI6IDEyMCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGlkOiAib2JqZXRpdm8iLAogICAgICAgICAgICAgIG5hbWU6ICJPYmpldGl2byBkZWwgZXN0dWRpYW50ZSIsCiAgICAgICAgICAgICAgYmFzZWRPbjogImVzdGlsb0dsb2JhbCIsCiAgICAgICAgICAgICAgcnVuOiB7IHNpemU6IDI0IH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpZDogInRleHRvUHJvZmUiLAogICAgICAgICAgICAgIG5hbWU6ICJUZXh0byBlc2NyaXRvIHBvciB1biBwcm9mZSIsCiAgICAgICAgICAgICAgYmFzZWRPbjogImVzdGlsb0dsb2JhbCIsCiAgICAgICAgICAgICAgcnVuOiB7IHNpemU6IDI0IH0sCiAgICAgICAgICAgICAgcGFyYWdyYXBoOiB7CiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7CiAgICAgICAgICAgICAgICAgIGFmdGVyOiAzMCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGlkOiAiZmlybWFQcm9mZSIsCiAgICAgICAgICAgICAgbmFtZTogIkZpcm1hIGRlbCBwcm9mZSIsCiAgICAgICAgICAgICAgYmFzZWRPbjogImVzdGlsb0dsb2JhbCIsCiAgICAgICAgICAgICAgcnVuOiB7CiAgICAgICAgICAgICAgICBpdGFsaWNzOiB0cnVlLAogICAgICAgICAgICAgICAgc2l6ZTogMTgsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwYXJhZ3JhcGg6IHsKICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsKICAgICAgICAgICAgICAgICAgYWZ0ZXI6IDEwMCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgfSwKICAgICAgICBzZWN0aW9uczogWwogICAgICAgICAgewogICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgdGV4dDogIklOU1RJVFVDScOTTiBFRFVDQVRJVkEgTUFFU1RSQSBWSURBIiwKICAgICAgICAgICAgICAgIGhlYWRpbmc6IEhlYWRpbmdMZXZlbC5USVRMRSwKICAgICAgICAgICAgICAgIHN0eWxlOiAidGl0dWxvcyIsCiAgICAgICAgICAgICAgICBhbGlnbm1lbnQ6IEFsaWdubWVudFR5cGUuQ0VOVEVSLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgdGV4dDogIlJFU09MVUNJw5NOIERFIEFQUk9CQUNJw5NOIE7CsCA1NTQ5IERFIEpVTklPIERFIDIwMTMiLAogICAgICAgICAgICAgICAgaGVhZGluZzogSGVhZGluZ0xldmVsLlRJVExFLAogICAgICAgICAgICAgICAgc3R5bGU6ICJ0aXR1bG9zIiwKICAgICAgICAgICAgICAgIGFsaWdubWVudDogQWxpZ25tZW50VHlwZS5DRU5URVIsCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiRVZBTFVBQ0nDk04gREUgQ09OT0NJTUlFTlRPIFkgREVTRU1QRcORTyIsCiAgICAgICAgICAgICAgICBoZWFkaW5nOiBIZWFkaW5nTGV2ZWwuVElUTEUsCiAgICAgICAgICAgICAgICBzdHlsZTogInRpdHVsb3MiLAogICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgICAgICAgICAgIHRleHQ6ICJQRVJJT0RPIEFHT1NUTyAtIE9DVFVCUkUgREUgMjAyMyIsCiAgICAgICAgICAgICAgICBzdHlsZTogInRpdHVsb3MiLAogICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBuZXcgUGFyYWdyYXBoKHsKICAgICAgICAgICAgICAgIHRleHQ6CiAgICAgICAgICAgICAgICAgICJOb21icmU6ICAiICsKICAgICAgICAgICAgICAgICAgdGhpcy5lc3RhUGVyc29uYS5ub21icmVzICsKICAgICAgICAgICAgICAgICAgIiAiICsKICAgICAgICAgICAgICAgICAgdGhpcy5lc3RhUGVyc29uYS5hcGVsbGlkb3MsCiAgICAgICAgICAgICAgICBzdHlsZTogIm5vbWJyZUVzdHVkaWFudGUiLAogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgdGV4dDogIk9iamV0aXZvcyIsCiAgICAgICAgICAgICAgICBzdHlsZTogIm5vbWJyZVNlY2Npb24iLAogICAgICAgICAgICAgIH0pLAoKICAgICAgICAgICAgICAuLi50aGlzLm9iamV0aXZvcy5maWx0ZXIob2JqPT5vYmoubm9tYnJlIT0nTnVldm8gbm9kbyBkZSBzb2xpZGFyaWRhZCcpLm1hcCgob2JqZXRpdm8pID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFyYWdyYXBoKHsKICAgICAgICAgICAgICAgICAgdGV4dDogb2JqZXRpdm8ubm9tYnJlLAogICAgICAgICAgICAgICAgICBzdHlsZTogIm9iamV0aXZvIiwKICAgICAgICAgICAgICAgICAgYnVsbGV0OiB7CiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IDAsCiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KSwKCiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiIiwKICAgICAgICAgICAgICAgIHNwYWNpbmc6IHsKICAgICAgICAgICAgICAgICAgYWZ0ZXI6IDIwMCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSksCgogICAgICAgICAgICAgIHRhYmxhRmluYWwsICAgICAgICAgICAgCgogICAgICAgICAgICAgIG5ldyBQYXJhZ3JhcGgoewogICAgICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAgICAgbmV3IFRleHRSdW4oewogICAgICAgICAgICAgICAgICAgIHRleHQ6ICJFUVVJUE8gUEVEQUfDk0dJQ08iLAogICAgICAgICAgICAgICAgICAgIGJvbGQ6IHRydWUsCiAgICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIGFsaWdubWVudDogQWxpZ25tZW50VHlwZS5DRU5URVIsCiAgICAgICAgICAgICAgICBzdHlsZTogImVzdGlsb0dsb2JhbCIsCiAgICAgICAgICAgICAgICBzcGFjaW5nOiB7CiAgICAgICAgICAgICAgICAgIGJlZm9yZTogMTUwMCwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbmV3IFBhcmFncmFwaCh7CiAgICAgICAgICAgICAgICB0ZXh0OiAiQ29ycG9yYWNpw7NuIE1hZXN0cmEgVmlkYSIsCiAgICAgICAgICAgICAgICBoZWFkaW5nOiBIZWFkaW5nTGV2ZWwuVElUTEUsCiAgICAgICAgICAgICAgICBzdHlsZTogInRpdHVsb3MiLAogICAgICAgICAgICAgICAgYWxpZ25tZW50OiBBbGlnbm1lbnRUeXBlLkNFTlRFUiwKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgXSwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSk7CgogICAgICBzYXZlRG9jdW1lbnRUb0ZpbGUoYXJjaGl2bywgYGluZm9ybWUke3RoaXMuZXN0YVBlcnNvbmEudXNlcm5hbWV9LmRvY3hgKTsKICAgICAgdGhpcy5jcmVhbmRvRG9jdW1lbnRvSW5mb3JtZSA9IGZhbHNlOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBtaXNJbmZvcm1lc0FjdGl2b3MoKSB7CiAgICAgIGlmICghdGhpcy5pbmZvcm1lcykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBvYmpldGl2b3M6IG51bGwsCiAgICAgICAgICBlc3BhY2lvczogbnVsbCwKICAgICAgICAgIGNvbWVudGFyaW86IG51bGwsCiAgICAgICAgICBwcm95ZWN0b3M6IG51bGwsCiAgICAgICAgfTsKICAgICAgfQogICAgICB2YXIgbWlJbmZvcm1lT2JqZXRpdm9zID0gdGhpcy5pbmZvcm1lcy5maW5kKAogICAgICAgIChpKSA9PgogICAgICAgICAgaS55ZWFyID09PSAyMDIzICYmCiAgICAgICAgICBpLnBlcmlvZG8gPT09IHRoaXMucGVyaW9kb0luZm9ybWUgJiYKICAgICAgICAgIGkuaWRQcm9mZSA9PT0gdGhpcy51c3VhcmlvLmlkICYmCiAgICAgICAgICBpLmNhdGVnb3JpYSA9PT0gIm9iamV0aXZvcyIKICAgICAgKTsKICAgICAgdmFyIG1pSW5mb3JtZUVzcGFjaW9zID0gdGhpcy5pbmZvcm1lcy5maW5kKAogICAgICAgIChpKSA9PgogICAgICAgICAgaS55ZWFyID09PSAyMDIzICYmCiAgICAgICAgICBpLnBlcmlvZG8gPT09IHRoaXMucGVyaW9kb0luZm9ybWUgJiYKICAgICAgICAgIGkuaWRQcm9mZSA9PT0gdGhpcy51c3VhcmlvLmlkICYmCiAgICAgICAgICBpLmNhdGVnb3JpYSA9PT0gImVzcGFjaW9zIgogICAgICApOwogICAgICB2YXIgbWlJbmZvcm1lQ29tZW50YXJpbyA9IHRoaXMuaW5mb3JtZXMuZmluZCgKICAgICAgICAoaSkgPT4KICAgICAgICAgIGkueWVhciA9PT0gMjAyMyAmJgogICAgICAgICAgaS5wZXJpb2RvID09PSB0aGlzLnBlcmlvZG9JbmZvcm1lICYmCiAgICAgICAgICBpLmlkUHJvZmUgPT09IHRoaXMudXN1YXJpby5pZCAmJgogICAgICAgICAgaS5jYXRlZ29yaWEgPT09ICJjb21lbnRhcmlvIgogICAgICApOwogICAgICB2YXIgbWlJbmZvcm1lUHJveWVjdG9zID0gdGhpcy5pbmZvcm1lcy5maW5kKAogICAgICAgIChpKSA9PgogICAgICAgICAgaS55ZWFyID09PSAyMDIzICYmCiAgICAgICAgICBpLnBlcmlvZG8gPT09IHRoaXMucGVyaW9kb0luZm9ybWUgJiYKICAgICAgICAgIGkuaWRQcm9mZSA9PT0gdGhpcy51c3VhcmlvLmlkICYmCiAgICAgICAgICBpLmNhdGVnb3JpYSA9PT0gInByb3llY3RvcyIKICAgICAgKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBvYmpldGl2b3M6IG1pSW5mb3JtZU9iamV0aXZvcyA/IG1pSW5mb3JtZU9iamV0aXZvcy50ZXh0byA6IG51bGwsCiAgICAgICAgZXNwYWNpb3M6IG1pSW5mb3JtZUVzcGFjaW9zID8gbWlJbmZvcm1lRXNwYWNpb3MudGV4dG8gOiBudWxsLAogICAgICAgIGNvbWVudGFyaW86IG1pSW5mb3JtZUNvbWVudGFyaW8gPyBtaUluZm9ybWVDb21lbnRhcmlvLnRleHRvIDogbnVsbCwKICAgICAgICBwcm95ZWN0b3M6IG1pSW5mb3JtZVByb3llY3RvcyA/IG1pSW5mb3JtZVByb3llY3Rvcy50ZXh0byA6IG51bGwsCiAgICAgIH07CiAgICB9LAogICAgbWlFc3BhY2lvQWN0dWFsKCl7CiAgICAgIGNvbnN0IG1pUGVyc29uYUNvbkVzcGFjaW89dGhpcy5wZXJzb25hc0NvbkVzcGFjaW8uZmluZChwPT5wLmlkPT09dGhpcy5lc3RhUGVyc29uYS5pZCk7CgogICAgICBpZighbWlQZXJzb25hQ29uRXNwYWNpbyl7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiBtaVBlcnNvbmFDb25Fc3BhY2lvLmVzcGFjaW9BY3R1YWw7CiAgICB9LAogICAgY29sb3JCYXJyYVN1cGVyaW9yKCkgewoKICAgICAgaWYgKAogICAgICAgICF0aGlzLnVzdWFyaW9Mb2dlYWRvIHx8CiAgICAgICAgIXRoaXMuZXN0YVBlcnNvbmEucGVybWlzb3MgfHwKICAgICAgICAhdGhpcy5lc3RhUGVyc29uYS5wZXJtaXNvcy5pbmNsdWRlcygibWFlc3RyYVZpZGEtZXN0dWRpYW50ZSIpCiAgICAgICkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgICB2YXIgZWxDb2xvciA9ICJyZ2IoMTYxLCAyNDAsIDgyKSI7CiAgICAgIC8vIGlmICh0aGlzLmNhbnRpZGFkTWlzSW5mb3JtZXNFc2NyaXRvcyA8IDQpIHsKICAgICAgLy8gICBlbENvbG9yID0gIiNmMmFhODciOwogICAgICAvLyB9CiAgICAgIC8vIGlmICh0aGlzLmNhbnRpZGFkTWlzSW5mb3JtZXNFc2NyaXRvcyA8IDEpIHsKICAgICAgLy8gICBlbENvbG9yID0gIiM5NzJiMmIiOwogICAgICAvLyB9CiAgICAgIHJldHVybiB7CiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBlbENvbG9yLAogICAgICB9OwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY2Npb25hZG8oc2VsZWNjaW9uYWRvKSB7CiAgICAgIGlmICghc2VsZWNjaW9uYWRvKSB7CiAgICAgICAgdGhpcy5tb3N0cmFuZG8gPSBudWxsOwogICAgICB9CiAgICB9LAogICAgaW5mb3JtZXM6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5hY3RpdmFibGUrKzsKICAgIH0sCiAgICBtaXNJbmZvcm1lc0FjdGl2b3MoKSB7CiAgICAgIHRoaXMubnVldm9JbmZvcm1lT2JqZXRpdm9zID0gdGhpcy5taXNJbmZvcm1lc0FjdGl2b3Mub2JqZXRpdm9zOwogICAgICB0aGlzLm51ZXZvSW5mb3JtZVByb3llY3RvcyA9IHRoaXMubWlzSW5mb3JtZXNBY3Rpdm9zLnByb3llY3RvczsKICAgICAgdGhpcy5udWV2b0luZm9ybWVFc3BhY2lvcyA9IHRoaXMubWlzSW5mb3JtZXNBY3Rpdm9zLmVzcGFjaW9zOwogICAgICB0aGlzLm51ZXZvSW5mb3JtZUNvbWVudGFyaW8gPSB0aGlzLm1pc0luZm9ybWVzQWN0aXZvcy5jb21lbnRhcmlvOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5hY3RpdmFibGUrKzsKICAgIH0sIDEwMDApOwoKICAgIHRoaXMubnVldm9JbmZvcm1lT2JqZXRpdm9zID0gdGhpcy5taXNJbmZvcm1lc0FjdGl2b3Mub2JqZXRpdm9zOwogICAgdGhpcy5udWV2b0luZm9ybWVQcm95ZWN0b3MgPSB0aGlzLm1pc0luZm9ybWVzQWN0aXZvcy5wcm95ZWN0b3M7CiAgICB0aGlzLm51ZXZvSW5mb3JtZUVzcGFjaW9zID0gdGhpcy5taXNJbmZvcm1lc0FjdGl2b3MuZXNwYWNpb3M7CiAgICB0aGlzLm51ZXZvSW5mb3JtZUNvbWVudGFyaW8gPSB0aGlzLm1pc0luZm9ybWVzQWN0aXZvcy5jb21lbnRhcmlvOwogIH0sCn07CgpmdW5jdGlvbiBzYXZlRG9jdW1lbnRUb0ZpbGUoZG9jLCBmaWxlTmFtZSkgewogIC8vIENyZWF0ZSBhIG1pbWUgdHlwZSB0aGF0IHdpbGwgYXNzb2NpYXRlIHRoZSBuZXcgZmlsZSB3aXRoIE1pY3Jvc29mdCBXb3JkCiAgY29uc3QgbWltZVR5cGUgPQogICAgImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC53b3JkcHJvY2Vzc2luZ21sLmRvY3VtZW50IjsKICAvLyBDcmVhdGUgYSBCbG9iIG9iamVjdCBmcm9tIFBhY2tlciBjb250YWluaW5nIHRoZSBEb2N1bWVudCBpbnN0YW5jZSBhbmQgdGhlIG1pbWVUeXBlCiAgUGFja2VyLnRvQmxvYihkb2MpLnRoZW4oKGJsb2IpID0+IHsKICAgIGNvbnN0IGRvY2Jsb2IgPSBibG9iLnNsaWNlKDAsIGJsb2Iuc2l6ZSwgbWltZVR5cGUpOwogICAgLy8gU2F2ZSB0aGUgZmlsZSB1c2luZyBzYXZlQXMgZnJvbSB0aGUgZmlsZS1zYXZlciBwYWNrYWdlCiAgICBzYXZlQXMoZG9jYmxvYiwgZmlsZU5hbWUpOwogIH0pOwp9Cg=="},{"version":3,"sources":["personaVistaLista.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"personaVistaLista.vue","sourceRoot":"src/components/usuario","sourcesContent":["<template>\n  <div class=\"personaVistaLista\" :class=\"{ seleccionado }\">\n    <div id=\"barraSuperior\">\n      <div class=\"iconoPersona\">\n        <img\n          src=\"@/assets/iconos/teacher.svg\"\n          alt=\"Profesor\"\n          v-if=\"estaPersona.permisos.includes('maestraVida-profesor')\"\n        />\n        <img\n          src=\"@/assets/iconos/graduationCap.svg\"\n          alt=\"CapGraduacion\"\n          @click=\"\n            usuarioSuperadministrador\n              ? togglePermiso('maestraVida-estudiante')\n              : ''\n          \"\n          v-if=\"estaPersona.permisos.includes('maestraVida-estudiante')\"\n        />\n        <img\n          src=\"@/assets/iconos/user.svg\"\n          alt=\"Usuario\"\n          @click=\"\n            usuarioSuperadministrador\n              ? togglePermiso('maestraVida-estudiante')\n              : ''\n          \"\n          v-if=\"\n            !estaPersona.permisos.includes('maestraVida-profesor') &&\n            !estaPersona.permisos.includes('maestraVida-estudiante')\n          \"\n        />\n      </div>\n      <div id=\"zonaNombres\">\n        <div id=\"nombres\">{{ estaPersona.nombres }} <span class=\"espacioActual\" v-if=\"miEspacioActual\" v-show=\"mostrarEspacioActual\">({{miEspacioActual}})</span> </div>\n      </div>\n      <div id=\"zonaApellidos\">\n        <div id=\"apellidos\">{{ estaPersona.apellidos }}</div>\n      </div>\n\n      <div\n        id=\"contenedorControlesPersona\"\n        class=\"contenedorControles\"\n        v-show=\"seleccionado\"\n      >\n      <div class=\"boton\" @click=\"mostrando=mostrando==='rutaGrado'?null:'rutaGrado'\" :class=\"{activo:mostrando==='rutaGrado'}\">\n        <img src='@/assets/iconos/routeSolid.svg' alt='Ruta' style='' />\n      </div>\n        <div\n          class=\"boton selector\"\n          :title=\"\n            mostrando === 'calendario'\n              ? 'Ocultar calendario'\n              : 'Mostrar calendario'\n          \"\n          :class=\"{ activo: mostrando === 'calendario' }\"\n          v-show=\"\n            usuario &&\n            (usuarioProfe ||\n              usuario.id === estaPersona.id ||\n              usuarioSuperadministrador)\n          \"\n          @click=\"mostrando = mostrando === 'calendario' ? null : 'calendario'\"\n        >\n          <img src=\"@/assets/iconos/calendar.svg\" alt=\"calendario\" />\n        </div>\n        <div\n          class=\"boton selector\"\n          v-if=\"usuarioSuperadministrador || usuarioProfe\"\n          :title=\"\n            mostrando === 'nodosSolidaridadPublicitados'\n              ? 'Ocultar nodosSolidaridadPublicitados'\n              : 'Mostrar nodosSolidaridadPublicitados'\n          \"\n          :class=\"{ activo: mostrando === 'nodosSolidaridadPublicitados' }\"\n          @click=\"\n            mostrando =\n              mostrando === 'nodosSolidaridadPublicitados'\n                ? null\n                : 'nodosSolidaridadPublicitados'\n          \"\n        >\n          <img src=\"@/assets/iconos/productHunt.svg\" alt=\"P\" />\n        </div>\n        <div\n          class=\"boton selector\"\n          v-if=\"usuarioSuperadministrador\"\n          :title=\"\n            mostrando === 'administracion'\n              ? 'Ocultar administracion'\n              : 'Mostrar administracion'\n          \"\n          :class=\"{ activo: mostrando === 'administracion' }\"\n          @click=\"\n            mostrando = mostrando === 'administracion' ? null : 'administracion'\n          \"\n        >\n          <img src=\"@/assets/iconos/cog.svg\" alt=\"Cog\" />\n        </div>\n        <div\n          class=\"boton\"\n          @click=\"alienar\"\n          title=\"alienar\"\n          v-show=\"usuarioProfe || usuarioAdministrador\"\n        >\n          <img src=\"@/assets/iconos/alienar.svg\" alt=\"Virus\" />\n        </div>\n        <div\n          class=\"boton selector\"\n          v-if=\"usuarioLogeado && usuarioProfe\"\n          style=\"width: 100px\"\n          :title=\"\n            mostrando === 'informe' ? 'Ocultar informe' : 'Mostrar informe'\n          \"\n          @click=\"mostrando = mostrando === 'informe' ? null : 'informe'\"\n          :class=\"{ activo: mostrando === 'informe' }\"\n        >\n          Informes\n        </div>\n        <div\n          class=\"boton selector\"\n          v-if=\"usuarioLogeado\"\n          :title=\"\n            mostrando === 'objetivos'\n              ? 'Ocultar objetivos'\n              : 'Mostrar objetivos'\n          \"\n          @click=\"mostrando = mostrando === 'objetivos' ? null : 'objetivos'\"\n          :class=\"{ activo: mostrando === 'objetivos' }\"\n        >\n          <img src=\"@/assets/iconos/starSolid.svg\" alt=\"Cog\" />\n        </div>\n      </div>\n    </div>\n\n    <div id=\"zonaContenidosMostrando\">\n      <div id=\"zonaAdministracion\" v-show=\"mostrando === 'administracion'\">\n        <div id=\"barraInfoAdicional\" v-show=\"seleccionado\">\n          <div id=\"username\" v-if=\"usuarioSuperadministrador\">\n            {{ estaPersona.username }}\n          </div>\n        </div>\n        <div id=\"contenedorAcciones\" class=\"contenedorControles\">\n          <div\n            class=\"boton selector\"\n            v-if=\"usuarioSuperadministrador\"\n            :class=\"{ activo: mostrandoPermisos }\"\n            @click=\"mostrandoPermisos = !mostrandoPermisos\"\n            :title=\"mostrandoPermisos ? 'Ocultar permisos' : 'Mostrar permisos'\"\n          >\n            <img src=\"@/assets/iconos/idBadge.svg\" alt=\"Id\" />\n          </div>\n          <div\n            class=\"boton\"\n            title=\"Restaurar password (123456)\"\n            v-show=\"!reseteandoPassword\"\n            @click=\"resetearPassword\"\n          >\n            <img src=\"@/assets/iconos/key.svg\" alt=\"Llave\" />\n          </div>\n          <loading texto=\"\" v-show=\"reseteandoPassword\" />\n          \n        </div>\n        <div\n          id=\"listaPermisos\"\n          v-if=\"usuarioSuperadministrador\"\n          v-show=\"mostrandoPermisos\"\n          :class=\"{ deshabilitado: togglingPermiso }\"\n        >\n          <div\n            class=\"activadorPermiso\"\n            @click=\"togglePermiso(permiso)\"\n            :class=\"{ permisoGranted: estaPersona.permisos.includes(permiso) }\"\n            v-for=\"permiso of permisosPosibles\"\n            :key=\"permiso + 'permiso'\"\n          >\n            {{ permiso }}\n          </div>\n        </div>\n      </div>\n      <div id=\"zonaInforme\" v-show=\"mostrando === 'informe'\">\n        <loading v-show=\"$apollo.queries.informes.loading\" />\n        <div\n          v-if=\"!$apollo.queries.informes.loading\"\n          class=\"contenedorSeccionInforme\"\n        >\n          <div class=\"contenedorControles\">\n            <div\n              id=\"selectoresPeriodo\"\n              style=\"display: flex\"\n              v-show=\"usuarioProfe\"\n            >\n              <div\n                class=\"boton selector\"\n                @click=\"periodoInforme = 'primero'\"\n                :class=\"{ activo: periodoInforme === 'primero' }\"\n              >\n                I\n              </div>\n              <div\n                class=\"boton selector\"\n                @click=\"periodoInforme = 'segundo'\"\n                :class=\"{ activo: periodoInforme === 'segundo' }\"\n              >\n                II\n              </div>\n              <div\n                class=\"boton selector\"\n                @click=\"periodoInforme = 'tercero'\"\n                :class=\"{ activo: periodoInforme === 'tercero' }\"\n              >\n                III\n              </div>\n              <div\n                class=\"boton selector\"\n                @click=\"periodoInforme = 'total'\"\n                :class=\"{ activo: periodoInforme === 'total' }\"\n              >\n                Total\n              </div>\n            </div>\n\n            <div\n              class=\"boton\"\n              @click=\"descargarArchivoInforme\"\n              v-show=\"!creandoDocumentoInforme\"\n            >\n              <img src=\"@/assets/iconos/file.svg\" alt=\"archivo\" />\n            </div>\n            <loading texto=\"\" v-show=\"creandoDocumentoInforme\" />\n          </div>\n          <div class=\"tituloSeccionInforme\">Sobre objetivos</div>\n          <textarea\n            id=\"textAreaInformeObjetivos\"\n            @blur=\"guardarInforme('objetivos')\"\n            ref=\"inputInformeCategoriaObjetivos\"\n            class=\"seccionInforme\"\n            v-model=\"nuevoInformeObjetivos\"\n            :class=\"{\n              deshabilitado: guardandoInformeObjetivos,\n              guardado: nuevoInformeObjetivos == misInformesActivos.objetivos,\n            }\"\n          ></textarea>\n          <div class=\"controlesSeccionInforme\">\n            <div\n              :class=\"{\n                guardado: nuevoInformeObjetivos === misInformesActivos.objetivos,\n              }\"\n              v-show=\"!guardandoInformeObjetivos\"\n              class=\"boton botonGuardarSeccion\"\n              @click=\"guardarInforme('objetivos')\"\n            >\n              <img src=\"@/assets/iconos/guardar.png\" alt=\"Guardar\" />\n            </div>\n            <loading v-show=\"guardandoInformeObjetivos\" />\n          </div>\n\n          <div class=\"tituloSeccionInforme\">Sobre proyectos</div>\n          <textarea\n            id=\"textAreaInformeProyectos\"\n            @blur=\"guardarInforme('proyectos')\"\n            ref=\"inputInformeCategoriaProyectos\"\n            class=\"seccionInforme\"\n            v-model=\"nuevoInformeProyectos\"\n            :class=\"{\n              deshabilitado: guardandoInformeProyectos,\n              guardado: nuevoInformeProyectos == misInformesActivos.proyectos,\n            }\"\n          ></textarea>\n          <div class=\"controlesSeccionInforme\">\n            <div\n              :class=\"{\n                guardado: nuevoInformeProyectos === misInformesActivos.proyectos,\n              }\"\n              v-show=\"!guardandoInformeProyectos\"\n              class=\"boton botonGuardarSeccion\"\n              @click=\"guardarInforme('proyectos')\"\n            >\n              <img src=\"@/assets/iconos/guardar.png\" alt=\"Guardar\" />\n            </div>\n            <loading v-show=\"guardandoInformeProyectos\" />\n          </div>\n\n          <div class=\"tituloSeccionInforme\">Sobre espacios</div>\n          <textarea\n            id=\"textAreaInformeProyectos\"\n            @blur=\"guardarInforme('espacios')\"\n            ref=\"inputInformeCategoriaEspacios\"\n            class=\"seccionInforme\"\n            v-model=\"nuevoInformeEspacios\"\n            :class=\"{\n              deshabilitado: guardandoInformeEspacios,\n              guardado: nuevoInformeEspacios == misInformesActivos.espacios,\n            }\"\n          ></textarea>\n          <div class=\"controlesSeccionInforme\">\n            <div\n              :class=\"{\n                guardado: nuevoInformeEspacios === misInformesActivos.espacios,\n              }\"\n              v-show=\"!guardandoInformeEspacios\"\n              class=\"boton botonGuardarSeccion\"\n              @click=\"guardarInforme('espacios')\"\n            >\n              <img src=\"@/assets/iconos/guardar.png\" alt=\"Guardar\" />\n            </div>\n            <loading v-show=\"guardandoInformeEspacios\" />\n          </div>\n\n          <div class=\"tituloSeccionInforme\">Comentario</div>\n          <textarea\n            id=\"textAreaInformeComentario\"\n            @blur=\"guardarInforme('comentario')\"\n            ref=\"inputInformeCategoriaComentario\"\n            class=\"seccionInforme\"\n            v-model=\"nuevoInformeComentario\"\n            :class=\"{\n              deshabilitado: guardandoInformeComentario,\n              guardado: nuevoInformeComentario == misInformesActivos.comentario,\n            }\"\n          ></textarea>\n          <div class=\"controlesSeccionInforme\">\n            <div\n              :class=\"{\n                guardado: nuevoInformeComentario === misInformesActivos.comentario,\n              }\"\n              v-show=\"!guardandoInformeComentario\"\n              class=\"boton botonGuardarSeccion\"\n              @click=\"guardarInforme('comentario')\"\n            >\n              <img src=\"@/assets/iconos/guardar.png\" alt=\"Guardar\" />\n            </div>\n            <loading v-show=\"guardandoInformeComentario\" />\n          </div>\n        </div>\n      </div>\n      <div\n        v-show=\"mostrando === 'nodosSolidaridadPublicitados'\"\n        id=\"zonaNodosSolidaridadPublicitados\"\n        class=\"zonaPrimerNivel\"\n      >\n        <div\n          class=\"selectorNodoSolidaridad\"\n          :class=\"{\n            deshabilitado: settingPresenciaNodoSolidaridad,\n            activo: nodoSolidaridadPublicitado.responsables.includes(\n              estaPersona.id\n            ),\n          }\"\n          @click=\"toggleResponsableNodoSolidaridad(nodoSolidaridadPublicitado)\"\n          v-for=\"nodoSolidaridadPublicitado of nodosSolidaridadPublicitados\"\n          :key=\"nodoSolidaridadPublicitado.id\"\n        >\n          {{ nodoSolidaridadPublicitado.nombre }}\n        </div>\n      </div>\n      <div\n        id=\"zonaCalendario\"\n        class=\"zonaPrimerNivel\"\n        v-if=\"mostrando === 'calendario'\"\n      >\n        <calendario\n          :idUsuarioTarget=\"estaPersona.id\"\n          ref=\"calendario\"\n          enfasis=\"eventosPersonales\"\n        />\n      </div>\n      <div\n        id=\"zonaObjetivos\"\n        class=\"zonaPrimerNivel\"\n        v-if=\"mostrando === 'objetivos'\"\n      >\n        <ventana-lista\n          ref=\"ventanaLista\"\n          :idNodoRoot=\"estaPersona.id\"\n          tipoNodoRoot=\"usuario\"\n        />\n      </div>\n\n      <div id=\"zonaRutaGrado\" v-show=\"mostrando==='rutaGrado'\" v-if=\"mostrando==='rutaGrado'\">\n        <ruta-grado :idUsuario=\"estaPersona.id\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Calendario from \"../utilidades/Calendario.vue\";\nimport Loading from \"../utilidades/Loading.vue\";\nimport VentanaLista from \"../atlasSolidaridad/ventanaLista/ventanaLista.vue\";\nimport {\n  AlignmentType,\n  Document,\n  HeadingLevel,\n  Packer,\n  Paragraph,\n  TableRow,\n  TableCell,\n  Table,\n  WidthType,\n  TextRun,\n} from \"docx\";\nimport { saveAs } from \"file-saver\";\nimport RutaGrado from './RutaGrado.vue';\n\nconst QUERY_INFORMES = gql`\n  query ($idUsuario: ID!) {\n    Usuario(idUsuario: $idUsuario) {\n      id\n      informesMaestraVida {\n        id\n        year\n        periodo\n        idProfe\n        nombreProfe\n        categoria\n        texto\n      }\n    }\n  }\n`;\n\nexport default {\n  components: { Calendario, Loading, VentanaLista, RutaGrado },\n  props: {\n    personasConEspacio:Array,\n    mostrarEspacioActual:Boolean,\n    estaPersona: Object,\n    seleccionado: Boolean,\n    nodosSolidaridadPublicitados: Array,\n  },\n  name: \"PersonaVistaLista\",\n  apollo: {\n    informes: {\n      query: QUERY_INFORMES,\n      variables() {\n        return {\n          idUsuario: this.estaPersona.id,\n        };\n      },\n      skip() {\n        return this.mostrando != \"informe\";\n      },\n      update({ Usuario }) {\n        return Usuario.informesMaestraVida;\n      },\n    },\n    objetivos:{\n      query: gql`\n        query($idUsuario: ID!){\n          Usuario(idUsuario: $idUsuario){\n            id\n            objetivosEstudiante{\n              id\n              nombre\n              estadoDesarrollo\n            }\n          }\n        }\n      `,\n      variables(){\n        return {\n          idUsuario: this.estaPersona.id\n        }\n      },\n      update({Usuario}){\n        return Usuario.objetivosEstudiante\n      },\n      skip(){\n        return this.mostrando!=\"informe\"\n      }\n    },\n  },\n  data() {\n    return {\n      permisosPosibles: [\n        \"usuario\",\n        \"administrador\",\n        \"atlasAdministrador\",\n        \"superadministrador\",\n        \"maestraVida\",\n        \"maestraVida-estudiante\",\n        \"maestraVida-profesor\",\n        \"maestraVida-acompaante\",\n        \"maestraVida-graduado\",\n      ],\n      informes: [],\n      objetivos: [],\n\n      mostrando: null,\n      reseteandoPassword: false,\n      alienando: false,\n\n      mostrandoPermisos: false,\n      togglingPermiso: false,\n\n      settingPresenciaNodoSolidaridad: false,\n\n      guardandoInformeObjetivos: false,\n      guardandoInformeEspacios: false,\n      guardandoInformeComentario: false,\n      guardandoInformeProyectos: false,\n      creandoDocumentoInforme: false,\n\n      nuevoInformeObjetivos: null,\n      nuevoInformeProyectos: null,\n      nuevoInformeEspacios: null,\n      nuevoInformeComentario: null,\n\n      periodoInforme: \"primero\",\n      activable: 0,\n    };\n  },\n  methods: {\n    resetearPassword() {\n      if (\n        !confirm(\n          \"Confirmar resetear el password de \" + this.estaPersona.nombres + \"?\"\n        )\n      ) {\n        return;\n      }\n      console.log(`Reseteando password usuario`);\n      this.reseteandoPassword = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!) {\n              resetearPasswordUsuario(idUsuario: $idUsuario)\n            }\n          `,\n          variables: {\n            idUsuario: this.estaPersona.id,\n          },\n        })\n        .then(() => {\n          this.reseteandoPassword = false;\n          alert(\"Contrasea reseteada\");\n        })\n        .catch(() => {\n          this.reseteandoPassword = false;\n        });\n    },\n    alienar() {\n      if (!this.usuarioProfe && !this.usuarioSuperadministrador) {\n        return;\n      }\n\n      this.alienando = true;\n      this.$apollo\n        .query({\n          query: gql`\n            query ($idAlienado: ID!) {\n              alienarUsuario(idAlienado: $idAlienado)\n            }\n          `,\n          variables: {\n            idAlienado: this.estaPersona.id,\n          },\n        })\n        .then(({ data: { alienarUsuario } }) => {\n          console.log(`Alienando`);\n          this.alienando = true;\n          this.$store.commit(\"logearse\", alienarUsuario);\n          this.$router.push(\"/miPerfil\");\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.alienando = false;\n        });\n    },\n    togglePermiso(permiso) {\n      if (!this.usuarioSuperadministrador) {\n        return;\n      }\n      this.togglingPermiso = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($permiso: String!, $idUsuario: ID!) {\n              togglePermisoUsuario(permiso: $permiso, idUsuario: $idUsuario) {\n                id\n                permisos\n              }\n            }\n          `,\n          variables: {\n            permiso,\n            idUsuario: this.estaPersona.id,\n          },\n        })\n        .then(() => {\n          this.togglingPermiso = false;\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.togglingPermiso = false;\n        });\n    },\n    toggleResponsableNodoSolidaridad(nodo) {\n      console.log(\n        `Setting presencia de ${this.estaPersona.id} en el nodo ${nodo.id}`\n      );\n      const personaEnResponsables = nodo.responsables.includes(\n        this.estaPersona.id\n      );\n\n      if (personaEnResponsables) {\n        console.log(`Sacndolo`);\n\n        this.settingPresenciaNodoSolidaridad = true;\n        this.$apollo\n          .mutate({\n            mutation: gql`\n              mutation ($idNodo: ID!, $idUsuario: ID!) {\n                removeResponsableNodoSolidaridad(\n                  idNodo: $idNodo\n                  idUsuario: $idUsuario\n                ) {\n                  id\n                  responsables\n                }\n              }\n            `,\n            variables: {\n              idNodo: nodo.id,\n              idUsuario: this.estaPersona.id,\n            },\n          })\n          .then(() => {\n            this.settingPresenciaNodoSolidaridad = false;\n          })\n          .catch((error) => {\n            console.log(`Error: ${error}`);\n            this.settingPresenciaNodoSolidaridad = false;\n          });\n      } else {\n        console.log(`Dentrndolo`);\n        this.settingPresenciaNodoSolidaridad = true;\n\n        this.$apollo\n          .mutate({\n            mutation: gql`\n              mutation ($idNodo: ID!, $idUsuario: ID!) {\n                addResponsableNodoSolidaridad(\n                  idNodo: $idNodo\n                  idUsuario: $idUsuario\n                ) {\n                  id\n                  responsables\n                }\n              }\n            `,\n            variables: {\n              idNodo: nodo.id,\n              idUsuario: this.estaPersona.id,\n            },\n          })\n          .then(() => {\n            this.settingPresenciaNodoSolidaridad = false;\n          })\n          .catch((error) => {\n            console.log(`Error: ${error}`);\n            this.settingPresenciaNodoSolidaridad = false;\n          });\n      }\n    },\n    guardarInforme(categoria) {\n      console.log(\"Guardando informe\");\n      var texto = null;\n      if (categoria === \"objetivos\") {\n        texto = this.$refs.inputInformeCategoriaObjetivos.value;\n        if (texto === this.misInformesActivos.objetivos) return;\n        this.guardandoInformeObjetivos = true;\n        if (texto) {\n          texto = texto.trim();\n        }\n        this.nuevoInformeObjetivos = texto;\n      }\n      if (categoria === \"espacios\") {\n        texto = this.$refs.inputInformeCategoriaEspacios.value;\n        if (texto === this.misInformesActivos.espacios) return;\n        this.guardandoInformeEspacios = true;\n        if (texto) {\n          texto = texto.trim();\n        }\n        this.nuevoInformeEspacios = texto;\n      }\n      if (categoria === \"comentario\") {\n        texto = this.$refs.inputInformeCategoriaComentario.value;\n        if (texto === this.misInformesActivos.comentario) return;\n        this.guardandoInformeComentario = true;\n        if (texto) {\n          texto = texto.trim();\n        }\n        this.nuevoInformeComentario = texto;\n      }\n      if (categoria === \"proyectos\") {\n        texto = this.$refs.inputInformeCategoriaProyectos.value;\n        if (texto === this.misInformesActivos.proyectos) return;\n        this.guardandoInformeProyectos = true;\n        if (texto) {\n          texto = texto.trim();\n        }\n        this.nuevoInformeProyectos = texto;\n      }\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation (\n              $idUsuario: ID!\n              $year: Int!\n              $periodo: String!\n              $idProfe: ID!\n              $categoria: String!\n              $texto: String!\n            ) {\n              guardarInformeEstudianteMaestraVida(\n                idUsuario: $idUsuario\n                year: $year\n                periodo: $periodo\n                idProfe: $idProfe\n                categoria: $categoria\n                texto: $texto\n              ) {\n                id\n                year\n                periodo\n                idProfe\n                nombreProfe\n                categoria\n                texto\n              }\n            }\n          `,\n          variables: {\n            idUsuario: this.estaPersona.id,\n            year: 2023,\n            periodo: this.periodoInforme,\n            idProfe: this.usuario.id,\n            categoria,\n            texto,\n          },\n        })\n        .then(({ data: { guardarInformeEstudianteMaestraVida } }) => {\n          const store = this.$apollo.provider.defaultClient;\n          const cache = store.readQuery({\n            query: QUERY_INFORMES,\n            variables: {\n              idUsuario: this.estaPersona.id,\n            },\n          });\n\n          var nuevoCache = JSON.parse(JSON.stringify(cache));\n          var elInforme = nuevoCache.Usuario.informesMaestraVida.find(\n            (i) => i.id === guardarInformeEstudianteMaestraVida.id\n          );\n          if (!elInforme) {\n            //Add al cache\n            nuevoCache.Usuario.informesMaestraVida.push(\n              guardarInformeEstudianteMaestraVida\n            );\n\n            store.writeQuery({\n              query: QUERY_INFORMES,\n              variables: {\n                idUsuario: this.estaPersona.id,\n              },\n              data: nuevoCache,\n            });\n          }\n\n          if (categoria === \"objetivos\") {\n            this.guardandoInformeObjetivos = false;\n          }\n          if (categoria === \"espacios\") {\n            this.guardandoInformeEspacios = false;\n          }\n          if (categoria === \"comentario\") {\n            this.guardandoInformeComentario = false;\n          }\n          if (categoria === \"proyectos\") {\n            this.guardandoInformeProyectos = false;\n          }\n        })\n        .catch((error) => {\n          alert(\"Error guardando informe!\");\n          console.log(\"error: \" + error);\n          if (categoria === \"objetivos\") {\n            this.guardandoInformeObjetivos = false;\n          }\n          if (categoria === \"espacios\") {\n            this.guardandoInformeEspacios = false;\n          }\n          if (categoria === \"comentario\") {\n            this.guardandoInformeComentario = false;\n          }\n          if (categoria === \"proyectos\") {\n            this.guardandoInformeProyectos = false;\n          }\n        });\n    },\n    descargarArchivoInforme() {\n      console.log(\n        \"Creando documento docx de informe para \" + this.estaPersona.nombres\n      );\n\n      this.creandoDocumentoInforme = true;\n\n      var filaObjetivos = new TableRow({\n        children: [\n          new TableCell({\n            children: [\n              new Paragraph({\n                text: \"Acerca de los objetivos\",\n                style: \"nombreSeccion\",\n                alignment: AlignmentType.CENTER,\n              }),\n            ],\n            width: {\n              size: 300,\n              type: WidthType.DXA,\n            },\n          }),\n          new TableCell({\n            children: [\n              ...this.informes\n                .filter(\n                  (i) =>\n                    i.year == 2023 &&\n                    i.periodo === this.periodoInforme &&\n                    i.categoria === \"objetivos\" &&\n                    i.texto &&\n                    i.texto.length > 10\n                )\n                .reduce((acc, informe) => {\n                  return acc.concat([\n                    new Paragraph({\n                      children: informe.texto.split(\"\\n\").map((textR) => {\n                        return new TextRun({\n                          text: textR,\n                          break: 1,\n                        });\n                      }),\n                      style: \"textoProfe\",                     \n                    }),\n                    new Paragraph({\n                      text: informe.nombreProfe,\n                      style: \"firmaProfe\",\n                    }),\n                  ]);\n                }, []),\n            ],\n            width: {\n              size: 700,\n              type: WidthType.DXA,\n            },\n          }),\n        ],\n      });\n\n      var filaProyectos = new TableRow({\n        children: [\n          new TableCell({\n            width: {\n              size: 3000,\n              type: WidthType.DXA,\n            },\n            children: [\n              new Paragraph({\n                text: \"Proyectos pedaggicos productivos\",\n                style: \"nombreSeccion\",\n                alignment: AlignmentType.CENTER,\n              }),\n            ],\n          }),\n          new TableCell({\n            width: {\n              size: 2700,\n              type: WidthType.DXA,\n            },\n            children: [\n              ...this.informes\n                .filter(\n                  (i) =>\n                    i.year == 2023 &&\n                    i.periodo === this.periodoInforme &&\n                    i.categoria === \"proyectos\" &&\n                    i.texto &&\n                    i.texto.length > 10\n                )\n                .reduce((acc, informe) => {\n                  return acc.concat([\n                    new Paragraph({\n                      children: informe.texto.split(\"\\n\").map((textR) => {\n                        return new TextRun({\n                          text: textR,\n                          break: 1,\n                        });\n                      }),\n                      style: \"textoProfe\", \n                      // text: informe.texto,\n                      // style: \"textoProfe\",\n                    }),\n                    new Paragraph({\n                      text: informe.nombreProfe,\n                      style: \"firmaProfe\",\n                    }),\n                  ]);\n                }, []),\n            ],\n          }),\n        ],\n      });\n\n      var filaEspacios = new TableRow({\n        children: [\n          new TableCell({\n            children: [\n              new Paragraph({\n                text: \"Acerca de los espacios\",\n                style: \"nombreSeccion\",\n                alignment: AlignmentType.CENTER,\n              }),\n            ],\n            width: {\n              size: 300,\n              type: WidthType.DXA,\n            },\n          }),\n          new TableCell({\n            children: [\n              ...this.informes\n                .filter(\n                  (i) =>\n                    i.year == 2023 &&\n                    i.periodo === this.periodoInforme &&\n                    i.categoria === \"espacios\" &&\n                    i.texto &&\n                    i.texto.length > 10\n                )\n                .reduce((acc, informe) => {\n                  return acc.concat([\n                    new Paragraph({\n                      children: informe.texto.split(\"\\n\").map((textR) => {\n                        return new TextRun({\n                          text: textR,\n                          break: 1,\n                        });\n                      }),\n                      style: \"textoProfe\", \n                      // text: informe.texto,\n                      // style: \"textoProfe\",\n                    }),\n                    new Paragraph({\n                      text: informe.nombreProfe,\n                      style: \"firmaProfe\",\n                    }),\n                  ]);\n                }, []),\n            ],\n            width: {\n              size: 700,\n              type: WidthType.DXA,\n            },\n          }),\n        ],\n      });\n\n      var filaComentario = new TableRow({\n        children: [\n          new TableCell({\n            children: [\n              new Paragraph({\n                text: \"Comentario\",\n                style: \"nombreSeccion\",\n                alignment: AlignmentType.CENTER,\n              }),\n            ],\n            width: {\n              size: 300,\n              type: WidthType.DXA,\n            },\n          }),\n          new TableCell({\n            children: [\n              ...this.informes\n                .filter(\n                  (i) =>\n                    i.year == 2023 &&\n                    i.periodo === this.periodoInforme &&\n                    i.categoria === \"comentario\" &&\n                    i.texto &&\n                    i.texto.length > 10\n                )\n                .reduce((acc, informe) => {\n                  return acc.concat([\n                    new Paragraph({\n                      children: informe.texto.split(\"\\n\").map((textR) => {\n                        return new TextRun({\n                          text: textR,\n                          break: 1,\n                        });\n                      }),\n                      style: \"textoProfe\", \n                      // text: informe.texto,\n                      // style: \"textoProfe\",\n                    }),\n                    new Paragraph({\n                      text: informe.nombreProfe,\n                      style: \"firmaProfe\",\n                    }),\n                  ]);\n                }, []),\n            ],\n            width: {\n              size: 700,\n              type: WidthType.DXA,\n            },\n          }),\n        ],\n      });\n\n      var filaAprobado = new TableRow({\n        children: [\n          new TableCell({\n            children: [\n              new Paragraph({\n                text: \"Promocionado: SI\",\n                style: \"nombreSeccion\",\n                alignment: AlignmentType.CENTER,\n              }),\n            ],\n            width: {\n              size: 300,\n              type: WidthType.DXA,\n            },\n          }),          \n        ],\n      });\n\n      var tablaFinal = new Table({\n        rows: [filaObjetivos, filaProyectos, filaEspacios, filaComentario, filaAprobado],\n        width: {\n          size: 8500,\n          type: WidthType.DXA,\n        },\n      });\n\n      var archivo = new Document({\n        styles: {\n          paragraphStyles: [\n            {\n              id: \"estiloGlobal\",\n              name: \"Estilo global\",\n              run: {\n                font: \"Maiandra GD\",\n              },\n            },\n            {\n              id: \"titulos\",\n              name: \"titulos\",\n              basedOn: \"estiloGlobal\",\n              run: {\n                bold: true,\n                size: 24,\n              },\n              paragraph: {\n                spacing: {\n                  after: 200,\n                },\n              },\n            },\n            {\n              id: \"nombreEstudiante\",\n              name: \"nombre del estudiante\",\n              basedOn: \"estiloGlobal\",\n              run: {\n                bold: true,\n                allCaps: true,\n              },\n              paragraph: {\n                spacing: {\n                  after: 120,\n                },\n              },\n            },\n            {\n              id: \"nombreSeccion\",\n              name: \"nombre de seccion\",\n              basedOn: \"estiloGlobal\",\n              run: {\n                bold: true,\n                size: 24,\n              },\n              paragraph: {\n                spacing: {\n                  after: 120,\n                },\n              },\n            },\n            {\n              id: \"objetivo\",\n              name: \"Objetivo del estudiante\",\n              basedOn: \"estiloGlobal\",\n              run: { size: 24 },\n            },\n            {\n              id: \"textoProfe\",\n              name: \"Texto escrito por un profe\",\n              basedOn: \"estiloGlobal\",\n              run: { size: 24 },\n              paragraph: {\n                spacing: {\n                  after: 30,\n                },\n              },\n            },\n            {\n              id: \"firmaProfe\",\n              name: \"Firma del profe\",\n              basedOn: \"estiloGlobal\",\n              run: {\n                italics: true,\n                size: 18,\n              },\n              paragraph: {\n                spacing: {\n                  after: 100,\n                },\n              },\n            },\n          ],\n        },\n        sections: [\n          {\n            children: [\n              new Paragraph({\n                text: \"INSTITUCIN EDUCATIVA MAESTRA VIDA\",\n                heading: HeadingLevel.TITLE,\n                style: \"titulos\",\n                alignment: AlignmentType.CENTER,\n              }),\n              new Paragraph({\n                text: \"RESOLUCIN DE APROBACIN N 5549 DE JUNIO DE 2013\",\n                heading: HeadingLevel.TITLE,\n                style: \"titulos\",\n                alignment: AlignmentType.CENTER,\n              }),\n              new Paragraph({\n                text: \"EVALUACIN DE CONOCIMIENTO Y DESEMPEO\",\n                heading: HeadingLevel.TITLE,\n                style: \"titulos\",\n                alignment: AlignmentType.CENTER,\n              }),\n              new Paragraph({\n                text: \"PERIODO AGOSTO - OCTUBRE DE 2023\",\n                style: \"titulos\",\n                alignment: AlignmentType.CENTER,\n              }),\n              new Paragraph({\n                text:\n                  \"Nombre:  \" +\n                  this.estaPersona.nombres +\n                  \" \" +\n                  this.estaPersona.apellidos,\n                style: \"nombreEstudiante\",\n              }),\n              new Paragraph({\n                text: \"Objetivos\",\n                style: \"nombreSeccion\",\n              }),\n\n              ...this.objetivos.filter(obj=>obj.nombre!='Nuevo nodo de solidaridad').map((objetivo) => {\n                return new Paragraph({\n                  text: objetivo.nombre,\n                  style: \"objetivo\",\n                  bullet: {\n                    level: 0,\n                  },\n                });\n              }),\n\n              new Paragraph({\n                text: \"\",\n                spacing: {\n                  after: 200,\n                },\n              }),\n\n              tablaFinal,            \n\n              new Paragraph({\n                children: [\n                  new TextRun({\n                    text: \"EQUIPO PEDAGGICO\",\n                    bold: true,\n                  }),\n                ],\n                alignment: AlignmentType.CENTER,\n                style: \"estiloGlobal\",\n                spacing: {\n                  before: 1500,\n                },\n              }),\n              new Paragraph({\n                text: \"Corporacin Maestra Vida\",\n                heading: HeadingLevel.TITLE,\n                style: \"titulos\",\n                alignment: AlignmentType.CENTER,\n              }),\n            ],\n          },\n        ],\n      });\n\n      saveDocumentToFile(archivo, `informe${this.estaPersona.username}.docx`);\n      this.creandoDocumentoInforme = false;\n    },\n  },\n  computed: {\n    misInformesActivos() {\n      if (!this.informes) {\n        return {\n          objetivos: null,\n          espacios: null,\n          comentario: null,\n          proyectos: null,\n        };\n      }\n      var miInformeObjetivos = this.informes.find(\n        (i) =>\n          i.year === 2023 &&\n          i.periodo === this.periodoInforme &&\n          i.idProfe === this.usuario.id &&\n          i.categoria === \"objetivos\"\n      );\n      var miInformeEspacios = this.informes.find(\n        (i) =>\n          i.year === 2023 &&\n          i.periodo === this.periodoInforme &&\n          i.idProfe === this.usuario.id &&\n          i.categoria === \"espacios\"\n      );\n      var miInformeComentario = this.informes.find(\n        (i) =>\n          i.year === 2023 &&\n          i.periodo === this.periodoInforme &&\n          i.idProfe === this.usuario.id &&\n          i.categoria === \"comentario\"\n      );\n      var miInformeProyectos = this.informes.find(\n        (i) =>\n          i.year === 2023 &&\n          i.periodo === this.periodoInforme &&\n          i.idProfe === this.usuario.id &&\n          i.categoria === \"proyectos\"\n      );\n      return {\n        objetivos: miInformeObjetivos ? miInformeObjetivos.texto : null,\n        espacios: miInformeEspacios ? miInformeEspacios.texto : null,\n        comentario: miInformeComentario ? miInformeComentario.texto : null,\n        proyectos: miInformeProyectos ? miInformeProyectos.texto : null,\n      };\n    },\n    miEspacioActual(){\n      const miPersonaConEspacio=this.personasConEspacio.find(p=>p.id===this.estaPersona.id);\n\n      if(!miPersonaConEspacio){\n        return null;\n      }\n\n      return miPersonaConEspacio.espacioActual;\n    },\n    colorBarraSuperior() {\n\n      if (\n        !this.usuarioLogeado ||\n        !this.estaPersona.permisos ||\n        !this.estaPersona.permisos.includes(\"maestraVida-estudiante\")\n      ) {\n        return {};\n      }\n      var elColor = \"rgb(161, 240, 82)\";\n      // if (this.cantidadMisInformesEscritos < 4) {\n      //   elColor = \"#f2aa87\";\n      // }\n      // if (this.cantidadMisInformesEscritos < 1) {\n      //   elColor = \"#972b2b\";\n      // }\n      return {\n        backgroundColor: elColor,\n      };\n    },\n  },\n  watch: {\n    seleccionado(seleccionado) {\n      if (!seleccionado) {\n        this.mostrando = null;\n      }\n    },\n    informes: function () {\n      this.activable++;\n    },\n    misInformesActivos() {\n      this.nuevoInformeObjetivos = this.misInformesActivos.objetivos;\n      this.nuevoInformeProyectos = this.misInformesActivos.proyectos;\n      this.nuevoInformeEspacios = this.misInformesActivos.espacios;\n      this.nuevoInformeComentario = this.misInformesActivos.comentario;\n    },\n  },\n  mounted() {\n    setTimeout(() => {\n      this.activable++;\n    }, 1000);\n\n    this.nuevoInformeObjetivos = this.misInformesActivos.objetivos;\n    this.nuevoInformeProyectos = this.misInformesActivos.proyectos;\n    this.nuevoInformeEspacios = this.misInformesActivos.espacios;\n    this.nuevoInformeComentario = this.misInformesActivos.comentario;\n  },\n};\n\nfunction saveDocumentToFile(doc, fileName) {\n  // Create a mime type that will associate the new file with Microsoft Word\n  const mimeType =\n    \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\n  // Create a Blob object from Packer containing the Document instance and the mimeType\n  Packer.toBlob(doc).then((blob) => {\n    const docblob = blob.slice(0, blob.size, mimeType);\n    // Save the file using saveAs from the file-saver package\n    saveAs(docblob, fileName);\n  });\n}\n</script>\n\n<style scoped>\n.personaVistaLista {\n  width: 100%;\n  font-family: Salsa, cursive;\n  color: gray;\n}\n\n.personaVistaLista.seleccionado {\n  background-color: rgba(128, 128, 128, 0.342);\n}\n\n#barraSuperior {\n  display: flex;\n  font-size: 15px;\n  padding: 25px 15px;\n  flex-wrap: wrap;\n}\n\n.iconoPersona {\n  height: 20px;\n  width: 20px;\n}\n\n.iconoPersona img {\n  height: 100%;\n}\n\n#zonaNombres {\n  margin: 0px 15px;\n}\n\n#espacioActual{\n  font-size: 14px;\n}\n\n#barraInfoAdicional {\n  display: flex;\n}\n\n#contenedorControlesPersona {\n  margin-left: auto;\n}\n\n#listaPermisos {\n  max-width: 150px;\n  margin-left: auto;\n}\n\n.activadorPermiso {\n  padding: 5px 15px;\n  cursor: pointer;\n  font-size: 13px;\n}\n\n.activadorPermiso.permisoGranted {\n  background-color: var(--paletaSelect);\n  color: whitesmoke;\n}\n\n.selectorNodoSolidaridad {\n  padding: 5px 15px;\n  cursor: pointer;\n}\n\n.selectorNodoSolidaridad.activo {\n  background-color: var(--paletaSelect);\n  color: white;\n}\n\n#selectoresPeriodo .selector.activo {\n  border-color: transparent;\n  color: black;\n}\n\n.contenedorSeccionInforme {\n  padding: 15px 2vw;\n}\n\n.seccionInforme {\n  height: 150px;\n  width: 90%;\n  margin: 10px 15px;\n  margin-bottom: 5px;\n  border-radius: 10px;\n  padding: 5px;\n  border: 2px solid #4f4f4f;\n  font-size: 20px;\n}\n\n.seccionInforme.guardado {\n  border-color: rgb(37 118 34);\n  background-color: rgb(24 120 24 / 18%);\n}\n\n.tituloSeccionInforme {\n  font-weight: bold;\n  color: #2f2f2f;\n}\n\n.controlesSeccionInforme {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px 10px;\n  margin-bottom: 30px;\n}\n\n.controlesSeccionInforme .boton {\n  height: 30px;\n  width: 30px;\n}\n\n.botonGuardarSeccion.guardado {\n  filter: var(--filtroVerde);\n  pointer-events: none;\n}\n.botonGuardarSeccion:not(.guardado) {\n  filter: unset;\n}\n</style>"]}]}