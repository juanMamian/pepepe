{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/NodoConocimiento.vue?vue&type=style&index=0&id=821729e8&scoped=true&lang=css&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/NodoConocimiento.vue","mtime":1657890630251},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmljb25vTm9kbyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogMHB4OwogIGxlZnQ6IDBweDsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwMCU7CiAgei1pbmRleDogMTsKICBwb2ludGVyLWV2ZW50czogbm9uZTsKICBib3gtc2hhZG93OiAycHggMnB4IDJweCAycHggZ3JleTsKICBib3JkZXItcmFkaXVzOiA1MCU7Cn0KLm5vZG9Db25vY2ltaWVudG8gewogIHdpZHRoOiA2MHB4OwogIGhlaWdodDogNjBweDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgYmFja2dyb3VuZC1zaXplOiAxMDAlIDEwMCU7CiAgY3Vyc29yOiBwb2ludGVyOwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBwb2ludGVyLWV2ZW50czogYWxsOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTI4LCAxMjgsIDEyOCwgMC4zNDkpOwp9CiN6b25hQXJyYXN0cmUgewogIHdpZHRoOiA1MDBweDsKICBoZWlnaHQ6IDUwMHB4OwogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTsKfQouc2VsZWNjaW9uYWRvIHsKICB6LWluZGV4OiAxMDsKfQouZmFudGFzbWVhZG8gewogIGZpbHRlcjogc2F0dXJhdGUoNTAlKTsKfQouZmFudGFzbWVhZG8uaW1nU2VsZWNjaW9uYWRvIHsKICBmaWx0ZXI6IHNhdHVyYXRlKDEwJSk7Cn0KLmVzY29uZGlkbyB7CiAgdmlzaWJpbGl0eTogaGlkZGVuOwp9CiNub21icmUgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDEwNSU7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIGxlZnQ6IDUwJTsKICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoLTUwJSk7CiAgYm9yZGVyLXdpZHRoOiAxcHg7CiAgYm9yZGVyLXN0eWxlOiBzb2xpZDsKfQoKI21lbnVDb250ZXh0dWFsIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAxMTAlOwogIGxlZnQ6IDExMCU7CiAgbWluLXdpZHRoOiAxNDBweDsKICBwYWRkaW5nOiA1cHggMHB4OwogIHotaW5kZXg6IDExMDsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTc3LCAxNzcsIDE1OSk7CiAgYm94LXNoYWRvdzogMCAycHggMnB4IDAgcmdiYSgwLCAwLCAwLCAwLjE0KSwgMCAzcHggMXB4IC0ycHggcmdiYSgwLCAwLCAwLCAwLjIpLAogICAgMCAxcHggNXB4IDAgcmdiYSgwLCAwLCAwLCAwLjEyKTsKfQouYm90b25NZW51Q3ggewogIGN1cnNvcjogcG9pbnRlcjsKICBmb250LXNpemU6IDE0cHg7CiAgcGFkZGluZzogMTNweCAxMHB4OwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQouaWNvbm9NZW51Q3ggewogIGhlaWdodDogMTNweDsKICBtYXJnaW46IDBweCA1cHg7Cn0KLnNlY2Npb25NZW51Q3ggewogIGZvbnQtc2l6ZTogMTVweDsKICBjb2xvcjogcmdiKDcxLCA3MSwgNzEpOwogIHBhZGRpbmc6IDVweDsKfQouYm90b25NZW51Q3g6aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6IGdyYXk7Cn0KLnNlbGVjdG9yU3Vic2VjY2lvbk1lbnVDeCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwp9Cgouc3Vic2VjY2lvbk1lbnVDeCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6IDEwMCU7CiAgdG9wOiAwJTsKICBkaXNwbGF5OiBub25lOwogIGJhY2tncm91bmQtY29sb3I6IHJnYigxNzcsIDE3NywgMTU5KTsKfQouc2VsZWN0b3JTdWJzZWNjaW9uTWVudUN4OmhvdmVyID4gLnN1YnNlY2Npb25NZW51Q3ggewogIGRpc3BsYXk6IGJsb2NrOwp9Ci5lbkNvbGVjY2lvbiB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDExNywgMTgyLCAxMTcpOwp9Ci5lbkNvbGVjY2lvbjpob3ZlciB7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDEzNiwgMTY4LCAxMzYpOwp9Ci5jdWFkcml0b0Rlc2NyaXBjaW9uTm9kbyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogNTAlOwogIGxlZnQ6IDEwNCU7CiAgd2lkdGg6IDE3MHB4OwogIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZkYmFmOwogIGJvcmRlcjogMXB4IHNvbGlkIHJnYigwLCAwLCA0NCk7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQoKLmRlc2NyaXBjaW9uTm9kbyB7CiAgZm9udC1zaXplOiAxNXB4OwogIHBhZGRpbmc6IDEwcHg7CiAgbWluLWhlaWdodDogMzBweDsKICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7Cn0KLmJvdG9uQWJyaXJOb2RvIHsKICBkaXNwbGF5OiBibG9jazsKICB3aWR0aDogMjRweDsKICBoZWlnaHQ6IDI0cHg7CiAgY3Vyc29yOiBwb2ludGVyOwogIG1hcmdpbjogMTBweCBhdXRvOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKICBwYWRkaW5nOiAxMHB4OwogIGJhY2tncm91bmQtY29sb3I6IHJnYigyMTQsIDE3NiwgMTMwKTsKfQouYm90b25BYnJpck5vZG86aG92ZXIgewogIGJhY2tncm91bmQtY29sb3I6IHJnYigxOTAsIDE0NSwgODgpOwp9CgouaW1hZ2VuVGFyZ2V0IHsKICB3aWR0aDogMTgwJTsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiAtNDAlOwogIGxlZnQ6IC00MCU7CiAgei1pbmRleDogMTA7CiAgb3BhY2l0eTogMC44NjsKfQouaW1hZ2VuVGFyZ2V0OmhvdmVyIHsKICBvcGFjaXR5OiAwLjE2Owp9Ci5pbWFnZW5BcHJlbmRpZG8gewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMzMsIDE2OCwgMzMpOwogIGJvcmRlci1yYWRpdXM6IDUwJTsKfQojYm90b25DZXJyYXJEZXNjcmlwY2lvbiB7CiAgbGVmdDogMTAxJTsKICBib3R0b206IDEwMSU7CiAgd2lkdGg6IDE1cHg7CiAgaGVpZ2h0OiAxNXB4OwogIAp9Ci5mdWVyemFNb3ZpbWllbnRvIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybS1vcmlnaW46IDAlIDAlOwogIHotaW5kZXg6IDIwMDsKfQojZnVlcnphQ2VudHJvTWFzYSB7CiAgYmFja2dyb3VuZC1jb2xvcjogYmx1ZTsKfQojZnVlcnphQ29saXNpb24gewogIGJhY2tncm91bmQtY29sb3I6IHJlZDsKfQouZmxlY2hpdGFGdWVyemEgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICBsZWZ0OiAxMDAlOwogIHdpZHRoOiAxcHg7CiAgaGVpZ2h0OiAxcHg7CiAgYm9yZGVyOiA1cHggc29saWQgdHJhbnNwYXJlbnQ7CiAgYm9yZGVyLWxlZnQtY29sb3I6IGJsYWNrOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9Cg=="},{"version":3,"sources":["NodoConocimiento.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAivBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NodoConocimiento.vue","sourceRoot":"src/components/atlasConocimiento","sourcesContent":["<template>\n  <div\n    class=\"nodoConocimiento\"\n    :style=\"[estiloPosicion, estiloSize, estiloZeta]\"\n    :class=\"{ escondido }\"\n    @mousedown.ctrl.stop=\"arrastrandoNodo = true\"\n    @click.ctrl.capture=\"stopProp\"\n    @mouseup.left=\"guardarPosicion\"\n    @mousemove=\"arrastrarNodo\"\n    @mouseleave=\"arrastrandoNodo = false\"\n    @dblclick=\"abrirPaginaNodo\"\n  >\n    <div id=\"zonaArrastre\" v-show=\"arrastrandoNodo\"></div>\n\n    <div\n      v-if=\"usuarioSuperadministrador\"\n      v-show=\"configuracionAtlas.posicionando\"\n      id=\"fuerzaCentroMasa\"\n      class=\"fuerzaMovimiento\"\n      :style=\"[estiloFuerzaCentroMasa]\"\n    >\n      <div class=\"flechitaFuerza\"></div>\n    </div>\n    <div\n      v-if=\"usuarioSuperadministrador\"\n      v-show=\"configuracionAtlas.posicionando\"\n      id=\"fuerzaColision\"\n      class=\"fuerzaMovimiento\"\n      :style=\"[estiloFuerzaColision]\"\n    >\n      <div class=\"flechitaFuerza\"></div>\n    </div>\n\n    <img\n      src=\"@/assets/iconos/nodoConocimientoDefault.png\"\n      :class=\"{\n        fantasmeado:\n          usuarioLogeado &&\n          !aprendible &&\n          modoAtlas === 'estudiante' &&\n          !callingPosiciones,\n        deNodoSeleccionado: seleccionado,\n      }\"\n      alt=\"\"\n      class=\"iconoNodo\"\n      ref=\"iconoNodo\"\n    />\n    <img\n      src=\"@/assets/iconos/success.png\"\n      alt=\"Aprendido\"\n      title=\"Este tema ya ha sido aprendido\"\n      v-show=\"nodoAprendido && modoAtlas === 'estudiante'\"\n      :style=\"[\n        {\n          width: parseInt(20 * factorZoom) + 'px',\n          left: parseInt(-10 * factorZoom) + 'px',\n          top: parseInt(-10 * factorZoom) + 'px',\n        },\n      ]\"\n      class=\"imagenAprendido\"\n    />\n    <img\n      src=\"@/assets/iconos/target.png\"\n      alt=\"Objetivo\"\n      v-show=\"esTarget\"\n      class=\"imagenTarget\"\n    />\n\n    <div\n      id=\"menuContextual\"\n      v-show=\"menuCx\"\n      @mousedown.stop=\"\"\n      @mouseup.stop=\"\"\n    >\n      <div class=\"seccionMenuCx\" @click=\"abrirPaginaNodo\">\n        {{ esteNodo.nombre }}\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"\n          usuarioSuperadministrador == true || usuarioAdministradorAtlas == true\n        \"\n        @click.stop=\"eliminarEsteNodo\"\n      >\n        Eliminar\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioSuperadministrador\"\n        @click.stop=\"copiarId\"\n      >\n        {{ esteNodo.id }}\n      </div>\n      <div\n        class=\"botonMenuCx selectorSubseccionMenuCx\"\n        v-show=\"\n          yo.atlas && yo.atlas.colecciones && yo.atlas.colecciones.length > 0\n        \"\n      >\n        <img\n          src=\"@/assets/iconos/userNodes.png\"\n          alt=\"nodos\"\n          class=\"iconoMenuCx\"\n        />\n        Colecciones\n        <div class=\"subseccionMenuCx\">\n          <div\n            class=\"botonMenuCx\"\n            v-for=\"coleccion of yo.atlas.colecciones\"\n            :key=\"coleccion.id\"\n            @click.stop=\"toggleNodoEnColeccion(coleccion.id)\"\n            :class=\"{ enColeccion: coleccion.idsNodos.includes(esteNodo.id) }\"\n          >\n            {{ coleccion.nombre }}\n          </div>\n        </div>\n      </div>\n      <!-- <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado && !esNodoObjetivo\"\n        @click.stop=\"setNodoObjetivo(true)\"\n      >\n        Añadir a objetivos\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado && esNodoObjetivo\"\n        @click.stop=\"setNodoObjetivo(false)\"\n      >\n        Retirar de objetivos\n      </div> -->\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado\"\n        @click.stop=\"toggleAprendido\"\n      >\n        <img\n          src=\"@/assets/iconos/check.svg\"\n          alt=\"check\"\n          class=\"iconoMenuCx\"\n          style=\"border-radius: 50%\"\n          v-show=\"!togglingAprendido\"\n          :style=\"[\n            {\n              backgroundColor: nodoAprendido\n                ? 'var(--atlasConocimientoCheck)'\n                : '',\n            },\n          ]\"\n        />\n        <loading v-show=\"togglingAprendido\" texto=\"\"/>\n        {{ nodoAprendido ? \"Desm\" : \"M\" }}arcar como aprendido\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado\"\n        @click.stop=\"marcarEstudiado\"\n        v-show=\"aprendible\"\n        :class=\"{ deshabilitado: enviandoFechaEstudiado }\"\n      >\n        <img src=\"@/assets/iconos/readme.svg\" alt=\"Read\" class=\"iconoMenuCx\" v-show=\"!enviandoFechaEstudiado\" />\n        <loading v-show=\"enviandoFechaEstudiado\" texto=\"\" />\n        Estudiado\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado\"\n        @click.stop=\"iniciarGestionRepasos\"\n        v-show=\"nodoEstudiado && !nodoAprendido\"\n        :class=\"{ deshabilitado: creandoIteracionRepaso }\"\n      >\n        <img\n          src=\"@/assets/iconos/clock.svg\"\n          alt=\"Reloj\"\n          class=\"iconoMenuCx\"\n        />Repasos\n        <loading texto=\"\" v-show=\"creandoIteracionRepaso\" />\n      </div>\n      <template\n        v-if=\"\n          nodoSeleccionado &&\n          nodoSeleccionado.id != esteNodo.id &&\n          (usuarioSuperadministrador == true ||\n            usuarioAdministradorAtlas == true)\n        \"\n      >\n        <div class=\"seccionMenuCx\">{{ nodoSeleccionado.nombre }}</div>\n        <div\n          class=\"botonMenuCx\"\n          @click.stop=\"crearVinculo('continuacion', nodoSeleccionado, esteNodo)\"\n        >\n          Continua aquí\n        </div>\n        <div\n          class=\"botonMenuCx\"\n          @click.stop=\"crearVinculo('continuacion', esteNodo, nodoSeleccionado)\"\n        >\n          Continua desde aquí\n        </div>\n        <div\n          class=\"botonMenuCx\"\n          v-show=\"esteNodo.vinculos.some((v) => v.idRef == nodoSeleccionado.id)\"\n          @click.stop=\"eliminarVinculo(esteNodo, nodoSeleccionado)\"\n        >\n          Desconectar\n        </div>\n      </template>\n    </div>\n    <div id=\"nombre\" :style=\"[estiloCartelNombre]\" ref=\"nombre\">\n      {{ callingPosiciones ? esteNodo.puntaje : esteNodo.nombre }}\n    </div>\n\n    <div\n      class=\"cuadritoDescripcionNodo\"\n      v-if=\"esteNodo && esteNodo.descripcion\"\n      v-show=\"seleccionado && !callingPosiciones && mostrarDescripcion\"\n    >\n      <div class=\"descripcionNodo\">{{ esteNodo.descripcion }}</div>\n      <img\n        @click.stop=\"abrirPaginaNodo\"\n        src=\"@/assets/iconos/ir.png\"\n        alt=\"Ir\"\n        title=\"Abrir este nodo\"\n        class=\"botonAbrirNodo\"\n      />\n      <div\n        class=\"botonEquis\"\n        @click.stop=\"mostrarDescripcion = false\"\n        @mousedown.stop=\"\"\n        @mouseup.stop=\"\"\n        id=\"botonCerrarDescripcion\"\n      >\n        <div class=\"linea1\"></div>\n        <div class=\"linea2\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from \"../utilidades/Loading.vue\";\nimport { fragmentoDatoNodoConocimiento } from \"./fragsAtlasConocimiento\";\nimport { QUERY_DATOS_USUARIO_NODOS } from \"./AtlasConocimiento.vue\";\nexport default {\n  components: { Loading },\n  name: \"NodoConocimiento\",\n  data() {\n    return {\n      arrastrandoNodo: false,\n      nombreEditable: false,\n      nombreEditandose: false,\n\n      baseSize: {\n        x: 50,\n        y: 50,\n      },\n\n      posicion: {\n        x: 0,\n        y: 0,\n      },\n\n      estiloNombreBase: {\n        minWidth: 20,\n        fontSize: 12,\n        minHeight: 10,\n        padding: 5,\n        borderRadius: 4,\n      },\n      mostrarDescripcion: true,\n      creandoIteracionRepaso: false,\n\n      enviandoFechaEstudiado: false,\n      togglingAprendido:false,\n    };\n  },\n  props: {\n    esteNodo: {\n      type: Object,\n      required: true,\n    },\n    esNodoObjetivo: Boolean,\n    esTarget: Boolean,\n    yo: Object,\n    modoAtlas: String,\n    escondido: Boolean,\n    centroVista: Object,\n    idNodoMenuCx: String,\n    idsNodosAprendidos: Array,\n    idsNodosEstudiados: Array,\n    idsNodosFrescos: Array,\n    idsNodosPresentesCabeza: Array,\n    nodoSeleccionado: Object,\n    seleccionado: Boolean,\n    usuarioAdministradorAtlas: {\n      type: Boolean,\n      default: false,\n    },\n    esquinasDiagrama: Object,\n    callingPosiciones: Boolean,\n    factorZoom: Number,\n    configuracionAtlas: Object,\n  },\n  computed: {\n    menuCx() {\n      return this.idNodoMenuCx == this.esteNodo.id ? true : false;\n    },\n    size() {\n      let fSize = Object.assign({}, this.baseSize);\n      if (this.seleccionado) {\n        let baseX = this.baseSize.x;\n        let baseY = this.baseSize.y;\n        fSize.x = Math.round(baseX * 1.1);\n        fSize.y = Math.round(baseY * 1.1);\n      }\n      return { ...fSize };\n    },\n    estiloPosicion() {\n      //Posicion ajustada a las esquinas del diagrama:\n      const posXAjustada = this.posicion.x - this.esquinasDiagrama.x1;\n      const posYAjustada = this.posicion.y - this.esquinasDiagrama.y1;\n\n      //Posicion absoluta\n      const posY = Math.round(\n        (posYAjustada - this.size.y / 2) * this.factorZoom\n      );\n      const posX = Math.round(\n        (posXAjustada - this.size.x / 2) * this.factorZoom\n      );\n\n      //Ajustar respecto del centro de la vista\n      // posY -= this.centroVista.y;\n      // posX -= this.centroVista.x;\n      return {\n        top: posY + \"px\",\n        left: posX + \"px\",\n      };\n    },\n    estiloZeta() {\n      let valorZ = 0;\n      if (this.arrastrandoNodo || this.seleccionado) {\n        valorZ = 10;\n      }\n      if (this.menuCx) {\n        valorZ = 11;\n      }\n      return {\n        zIndex: valorZ,\n      };\n    },\n    estiloSize() {\n      return {\n        width: this.size.x * this.factorZoom + \"px\",\n        height: this.size.y * this.factorZoom + \"px\",\n      };\n    },\n    permisosUsuario: function () {\n      return this.$store.state.usuario.permisos;\n    },\n    aprendible() {\n      if (!this.esteNodo.vinculos.some((v) => v.rol == \"target\")) {\n        return true;\n      }\n      var idsNecesarios = this.esteNodo.vinculos\n        .filter((v) => v.rol == \"target\")\n        .map((v) => v.idRef);\n      return idsNecesarios.every((id) =>\n        this.idsNodosPresentesCabeza.includes(id)\n      );\n    },\n    fantasmeado() {\n      return !this.aprendible;\n    },\n    nodoAprendido() {\n      return this.idsNodosAprendidos.includes(this.esteNodo.id);\n    },\n    nodoEstudiado(){\n      return this.idsNodosEstudiados.includes(this.esteNodo.id);\n    },\n    nodoRepasar(){\n      return !this.idNodoAprendido && this.nodoEstudiado && !this.idsNodosFrescos.includes(this.esteNodo.id);\n    },\n    nodoPresenteCabeza() {\n      return this.idsNodosPresentesCabeza.includes(this.esteNodo.id);\n    },\n    estiloCartelNombre() {\n      var bColor = \"var(--atlasConocimientoOff)\";      \n      var color=\"black\";\n      if (this.modoAtlas === \"estudiante\") {\n        if (this.nodoPresenteCabeza) {\n          bColor = \"var(--atlasConocimientoCheck)\";          \n        }\n        else if(this.nodoRepasar){\n          bColor=\"var(--atlasConocimientoRepaso)\";          \n        } \n        else if (this.aprendible) {\n          bColor = \"var(--atlasConocimientoAvailable)\";          \n        }\n        else{\n          color= \"#313131\"\n        }\n        \n      } else if (this.modoAtlas === \"experto\") {        \n        if (this.usuarioExpertoNodo) {\n          bColor = \"var(--atlasConocimientoCheck)\";          \n        }\n      }\n\n      return {\n        backgroundColor: bColor,  \n        color,      \n        minWidth:\n          parseInt(this.estiloNombreBase.minWidth * this.factorZoom) + \"px\",\n        fontSize:\n          parseInt(this.estiloNombreBase.fontSize * this.factorZoom) + \"px\",\n        minHeight:\n          parseInt(this.estiloNombreBase.minHeight * this.factorZoom) + \"px\",\n        padding:\n          parseInt(this.estiloNombreBase.padding * this.factorZoom) + \"px\",\n        borderRadius:\n          parseInt(this.estiloNombreBase.borderRadius * this.factorZoom) + \"px\",\n      };\n    },\n    usuarioExpertoNodo() {\n      if (!this.usuario || !this.usuario.id) return false;\n      return this.esteNodo.expertos.includes(this.usuario.id);\n    },\n    estiloFuerzaCentroMasa() {\n      return {\n        width:\n          Math.round(this.esteNodo.fuerzaCentroMasa.fuerza * this.factorZoom) +\n          \"px\",\n        height: Math.round(3 * this.factorZoom) + \"px\",\n        transform:\n          \"rotate(\" + this.esteNodo.fuerzaCentroMasa.direccion + \"rad)\",\n      };\n    },\n    estiloFuerzaColision() {\n      return {\n        width:\n          Math.round(this.factorZoom * this.esteNodo.fuerzaColision.fuerza) +\n          \"px\",\n        height: Math.round(3 * this.factorZoom) + \"px\",\n        transform: \"rotate(\" + this.esteNodo.fuerzaColision.direccion + \"rad)\",\n      };\n    },\n    \n  },\n  methods: {\n    toggleAprendido() {\n      var nuevoEstadoAprendido = this.nodoAprendido ? false : true;\n      this.togglingAprendido=true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!, $nuevoEstadoAprendido: Boolean!) {\n              setNodoAtlasAprendidoUsuario(\n                idNodo: $idNodo\n                nuevoEstadoAprendido: $nuevoEstadoAprendido\n              ){\n                ...fragDatoNodoConocimiento\n                \n              }\n            }\n            ${fragmentoDatoNodoConocimiento}\n          `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            nuevoEstadoAprendido,\n          },\n        })\n        .then(({ data: { setNodoAtlasAprendidoUsuario } }) => {\n          console.log(`${setNodoAtlasAprendidoUsuario.length} nodos modificados`);\n          this.togglingAprendido=false;\n\n        }).catch((error)=>{\n          console.log(`Error: ${error}`);\n          this.togglingAprendido=false;\n        })\n    },\n    // setNodoObjetivo(nuevoEstadoObjetivo) {\n    //   this.$apollo\n    //     .mutate({\n    //       mutation: gql`\n    //         mutation ($idNodo: ID!, $nuevoEstadoObjetivo: Boolean!) {\n    //           setNodoObjetivo(\n    //             idNodo: $idNodo\n    //             nuevoEstadoObjetivo: $nuevoEstadoObjetivo\n    //           )\n    //         }\n    //       `,\n    //       variables: {\n    //         idNodo: this.esteNodo.id,\n    //         nuevoEstadoObjetivo,\n    //       },\n    //     })\n    //     .then(({ data: { setNodoObjetivo } }) => {\n    //       if (setNodoObjetivo) {\n    //         this.$emit(\"cambieEstadoObjetivo\", nuevoEstadoObjetivo);\n    //       }\n    //     });\n    // },\n    abrirPaginaNodo() {\n      if (\n        !this.aprendible &&\n        !this.usuarioSuperadministrador &&\n        this.modoAtlas === \"estudiante\"\n      )\n        return alert(\"¡Aún no puedes estudiar este nodo!\");\n      this.$router.push(\n        this.$route.path + \"/nodoConocimiento/\" + this.esteNodo.id\n      );\n    },\n    copiarId(e) {\n      let str = e.target.innerText.trim();\n      const el = document.createElement(\"textarea\");\n      el.value = str;\n      document.body.appendChild(el);\n      el.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(el);\n    },\n    eliminarEsteNodo() {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      this.$emit(\"eliminar\", this.esteNodo.id);\n    },\n    arrastrarNodo(e) {\n      if (!this.arrastrandoNodo) {\n        return;\n      }\n      //console.log(`mouse move en ${e.pageX}, ${e.pageY}`);\n      let posContenedor = document\n        .getElementById(\"contenedorNodos\")\n        .getBoundingClientRect();\n      let nuevoTop = Math.round(\n        (e.clientY - posContenedor.top) / this.factorZoom\n      );\n      let nuevoLeft = Math.round(\n        (e.clientX - posContenedor.left) / this.factorZoom\n      );\n      this.posicion.y = nuevoTop;\n      this.posicion.x = nuevoLeft;\n    },\n    guardarPosicion() {\n      if (!this.arrastrandoNodo) return;\n      this.$emit(\"cambioDePosicionManual\", this.esteNodo.id, {\n        x: this.posicion.x,\n        y: this.posicion.y,\n      });\n\n      this.arrastrandoNodo = false;\n    },\n    crearVinculo(tipo, nodoFrom, nodoTo) {\n      console.log(`Creando vinculo entre ${nodoFrom} y ${nodoTo}`);\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      console.log(\n        `creando un vinculo tipo ${tipo} entre ${nodoFrom.nombre} y ${nodoTo.nombre} `\n      );\n      this.$emit(\"creacionVinculo\", {\n        tipo,\n        idNodoFrom: nodoFrom.id,\n        idNodoTo: nodoTo.id,\n      });\n    },\n    eliminarVinculo(nodoFrom, nodoTo) {\n      console.log(`Desconectando`);\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      this.$emit(\"eliminacionVinculo\", {\n        idNodoFrom: nodoFrom.id,\n        idNodoTo: nodoTo.id,\n      });\n    },\n    stopProp(e) {\n      console.log(`Stopping`);\n      e.stopPropagation();\n    },\n    toggleNodoEnColeccion(idColeccion) {\n      if (!this.usuario || !this.usuario.id) {\n        return;\n      }\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation ($idNodo: ID!, $idColeccion: ID!, $idUsuario: ID!) {\n            toggleNodoColeccionNodosAtlasConocimientoUsuario(\n              idNodo: $idNodo\n              idColeccion: $idColeccion\n              idUsuario: $idUsuario\n            ) {\n              id\n              idsNodos\n              nodos {\n                id\n                nombre\n              }\n            }\n          }\n        `,\n        variables: {\n          idNodo: this.esteNodo.id,\n          idColeccion,\n          idUsuario: this.usuario.id,\n        },\n      });\n    },\n    iniciarGestionRepasos() {\n      var elDatoNodo = this.yo.atlas.datosNodos.find(\n        (dn) =>\n          dn.idNodo === this.esteNodo.id && dn.iteracionesRepaso.length > 0\n      );\n      if (elDatoNodo) {\n        console.log(`Este nodo ya tenía repasos`);\n        this.$router.push({\n          name: \"ventanaRepasos\",\n          params: { idRepaso: elDatoNodo.id },\n        });\n      } else {\n        console.log(`Este nodo no tenía repasos. Creando`);\n        this.addIteracionRepaso();\n      }\n    },\n    addIteracionRepaso() {\n      console.log(`Enviando para add to lista repasos`);\n      this.creandoIteracionRepaso = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!, $idNodo: ID!) {\n              crearIteracionRepasoNodoConocimientoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n              ) {\n                id\n                iteracionesRepaso {\n                  id\n                  intervalo\n                }\n              }\n            }\n          `,\n          variables: {\n            idUsuario: this.usuario.id,\n            idNodo: this.esteNodo.id,\n          },\n        })\n        .then(({ data: { crearIteracionRepasoNodoConocimientoUsuario } }) => {\n          this.creandoIteracionRepaso = false;\n          this.$router.push({\n            name: \"ventanaRepasos\",\n            params: {\n              idRepaso: crearIteracionRepasoNodoConocimientoUsuario.id,\n            },\n          });\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.creandoIteracionRepaso = false;\n        });\n    },\n    marcarEstudiado() {\n      if (!this.usuarioLogeado) {\n        return;\n      }\n\n      var fechaEstudiado = new Date();\n      // fechaEstudiado.setDate(7);\n\n\n      // fechaEstudiado.setHours(0);\n      // fechaEstudiado.setMinutes(0);\n      // fechaEstudiado.setSeconds(0);\n      // fechaEstudiado.setMilliseconds(0);\n\n      this.enviandoFechaEstudiado = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!, $idNodo: ID!, $fecha: Date!) {\n              setDateNodoConocimientoEstudiadoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n                fecha: $fecha\n              ) {\n                ...fragDatoNodoConocimiento\n              }\n            }\n            ${fragmentoDatoNodoConocimiento}\n          `,\n          variables: {\n            idUsuario: this.usuario.id,\n            idNodo: this.esteNodo.id,\n            fecha: fechaEstudiado,\n          },\n        })\n        .then(({ data: { setDateNodoConocimientoEstudiadoUsuario } }) => {\n          this.enviandoFechaEstudiado = false;\n          if (\n            !this.yo.atlas.datosNodos.some(\n              (dn) => dn.id === setDateNodoConocimientoEstudiadoUsuario.id\n            )\n          ) {\n            console.log(\n              `No estaba en caché. Pushing ${JSON.stringify(\n                setDateNodoConocimientoEstudiadoUsuario\n              )}`\n            );\n            const store = this.$apollo.provider.defaultClient;\n            const cache = store.readQuery({\n              query: QUERY_DATOS_USUARIO_NODOS,\n            });\n            var nuevoCache = JSON.parse(JSON.stringify(cache));\n\n            nuevoCache.yo.atlas.datosNodos.push(\n              setDateNodoConocimientoEstudiadoUsuario\n            );\n            store.writeQuery({\n              query: QUERY_DATOS_USUARIO_NODOS,\n              data: nuevoCache,\n            });\n          }\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.enviandoFechaEstudiado = false;\n        });\n    },\n  },\n  watch: {\n    esteNodo() {\n      this.posicion = { ...this.esteNodo.coords };\n    },\n    seleccionado(estado) {\n      if (estado) {\n        this.mostrarDescripcion = true;\n      }\n    },\n  },\n  mounted() {\n    this.posicion = { ...this.esteNodo.autoCoords };\n  },\n};\n</script>\n\n<style scoped>\n.iconoNodo {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  pointer-events: none;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  pointer-events: none;\n  box-shadow: 2px 2px 2px 2px grey;\n  border-radius: 50%;\n}\n.nodoConocimiento {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background-size: 100% 100%;\n  cursor: pointer;\n  position: absolute;\n  pointer-events: all;\n  background-color: rgba(128, 128, 128, 0.349);\n}\n#zonaArrastre {\n  width: 500px;\n  height: 500px;\n  position: absolute;\n  transform: translate(-50%, -50%);\n}\n.seleccionado {\n  z-index: 10;\n}\n.fantasmeado {\n  filter: saturate(50%);\n}\n.fantasmeado.imgSeleccionado {\n  filter: saturate(10%);\n}\n.escondido {\n  visibility: hidden;\n}\n#nombre {\n  position: absolute;\n  top: 105%;\n  text-align: center;\n  left: 50%;\n  transform: translateX(-50%);\n  border-width: 1px;\n  border-style: solid;\n}\n\n#menuContextual {\n  position: absolute;\n  top: 110%;\n  left: 110%;\n  min-width: 140px;\n  padding: 5px 0px;\n  z-index: 110;\n  background-color: rgb(177, 177, 159);\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2),\n    0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.botonMenuCx {\n  cursor: pointer;\n  font-size: 14px;\n  padding: 13px 10px;\n  display: flex;\n  align-items: center;\n}\n.iconoMenuCx {\n  height: 13px;\n  margin: 0px 5px;\n}\n.seccionMenuCx {\n  font-size: 15px;\n  color: rgb(71, 71, 71);\n  padding: 5px;\n}\n.botonMenuCx:hover {\n  background-color: gray;\n}\n.selectorSubseccionMenuCx {\n  position: relative;\n}\n\n.subseccionMenuCx {\n  position: absolute;\n  left: 100%;\n  top: 0%;\n  display: none;\n  background-color: rgb(177, 177, 159);\n}\n.selectorSubseccionMenuCx:hover > .subseccionMenuCx {\n  display: block;\n}\n.enColeccion {\n  background-color: rgb(117, 182, 117);\n}\n.enColeccion:hover {\n  background-color: rgb(136, 168, 136);\n}\n.cuadritoDescripcionNodo {\n  position: absolute;\n  top: 50%;\n  left: 104%;\n  width: 170px;\n  transform: translateY(-50%);\n  background-color: #ffdbaf;\n  border: 1px solid rgb(0, 0, 44);\n  border-radius: 10px;\n}\n\n.descripcionNodo {\n  font-size: 15px;\n  padding: 10px;\n  min-height: 30px;\n  white-space: pre-wrap;\n}\n.botonAbrirNodo {\n  display: block;\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n  margin: 10px auto;\n  border-radius: 50%;\n  padding: 10px;\n  background-color: rgb(214, 176, 130);\n}\n.botonAbrirNodo:hover {\n  background-color: rgb(190, 145, 88);\n}\n\n.imagenTarget {\n  width: 180%;\n  position: absolute;\n  top: -40%;\n  left: -40%;\n  z-index: 10;\n  opacity: 0.86;\n}\n.imagenTarget:hover {\n  opacity: 0.16;\n}\n.imagenAprendido {\n  position: absolute;\n  background-color: rgb(33, 168, 33);\n  border-radius: 50%;\n}\n#botonCerrarDescripcion {\n  left: 101%;\n  bottom: 101%;\n  width: 15px;\n  height: 15px;\n  \n}\n.fuerzaMovimiento {\n  background-color: black;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform-origin: 0% 0%;\n  z-index: 200;\n}\n#fuerzaCentroMasa {\n  background-color: blue;\n}\n#fuerzaColision {\n  background-color: red;\n}\n.flechitaFuerza {\n  position: absolute;\n  top: 50%;\n  left: 100%;\n  width: 1px;\n  height: 1px;\n  border: 5px solid transparent;\n  border-left-color: black;\n  transform: translate(-50%, -50%);\n}\n</style>"]}]}