{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasSolidaridad/homeNodo/RecursoExternoNodo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasSolidaridad/homeNodo/RecursoExternoNodo.vue","mtime":1643654906499},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGNoYXJQcm9oaWJpZG9zTm9tYnJlQ29zYSB9IGZyb20gIi4uL2NvbmZpZ3VyYWNpb24iOwppbXBvcnQgZ3FsIGZyb20gImdyYXBocWwtdGFnIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAiLi4vLi4vdXRpbGlkYWRlcy9Mb2FkaW5nLnZ1ZSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBMb2FkaW5nIH0sCiAgbmFtZTogIlJlY3Vyc29FeHRlcm5vTm9kbyIsCiAgcHJvcHM6IHsKICAgIGVzdGVSZWN1cnNvOiBPYmplY3QsCiAgICBzZWxlY2Npb25hZG86IEJvb2xlYW4sCiAgICB1c3VhcmlvUmVzcG9uc2FibGVBbXBsaW86IEJvb2xlYW4sCiAgICBpZE5vZG86IFN0cmluZywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBudWV2b05vbWJyZTogIk51ZXZvIG5vbWJyZSIsCiAgICAgIGVudmlhbmRvTnVldm9Ob21icmU6IGZhbHNlLAoKICAgICAgbnVldm9MaW5rOiBudWxsLAogICAgICBlbnZpYW5kb051ZXZvTGluazogZmFsc2UsCgogICAgICBlZGl0YW5kb1JlY3Vyc286IGZhbHNlLAogICAgICBlbGltaW5hbmRvOiBmYWxzZSwKICAgICAgc2V0dGluZ1RhcmdldDogbnVsbCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgbnVldm9Ob21icmVJbGVnYWwoKSB7CiAgICAgIGlmICh0aGlzLm51ZXZvTm9tYnJlLmxlbmd0aCA8IDEpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoY2hhclByb2hpYmlkb3NOb21icmVDb3NhLnRlc3QodGhpcy5udWV2b05vbWJyZSkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgbnVldm9MaW5rSWxlZ2FsKCkgewogICAgICBpZiAodGhpcy5udWV2b0xpbmsubGVuZ3RoIDwgNSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBjbGlja0VuUmVjdXJzbygpIHsKICAgICAgaWYodGhpcy5lZGl0YW5kb1JlY3Vyc28pewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIGlmICh0aGlzLmVzdGVSZWN1cnNvLnRpcG8gPT09ICJlbmxhY2UiKSB7CiAgICAgICAgd2luZG93Lm9wZW4odGhpcy5lc3RlUmVjdXJzby5saW5rLCAiX2JsYW5rIik7CiAgICAgIH0KICAgIH0sCiAgICBndWFyZGFyTnVldm9Ob21icmUoKSB7CiAgICAgIHRoaXMubnVldm9Ob21icmU9dGhpcy4kcmVmcy5pbnB1dE51ZXZvTm9tYnJlLnZhbHVlOwoKICAgICAgaWYgKHRoaXMubnVldm9Ob21icmVJbGVnYWwpIHsKICAgICAgICBjb25zb2xlLmxvZyhgTm8gZW52aWFkb2ApOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5udWV2b05vbWJyZSA9PSB0aGlzLmVzdGVSZWN1cnNvLm5vbWJyZSkgewogICAgICAgIHRoaXMuZWRpdGFuZG8KICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coYGd1YXJkYW5kbyBudWV2byBub21icmVgKTsKICAgICAgdGhpcy5lbnZpYW5kb051ZXZvTm9tYnJlID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvCiAgICAgICAgLm11dGF0ZSh7CiAgICAgICAgICBtdXRhdGlvbjogZ3FsYAogICAgICAgICAgICBtdXRhdGlvbiAoCiAgICAgICAgICAgICAgJGlkTm9kbzogSUQhCiAgICAgICAgICAgICAgJGlkUmVjdXJzb0V4dGVybm86IElEIQogICAgICAgICAgICAgICRudWV2b05vbWJyZTogU3RyaW5nIQogICAgICAgICAgICApIHsKICAgICAgICAgICAgICBlZGl0YXJOb21icmVSZWN1cnNvRXh0ZXJub05vZG9Tb2xpZGFyaWRhZCgKICAgICAgICAgICAgICAgIGlkTm9kbzogJGlkTm9kbwogICAgICAgICAgICAgICAgaWRSZWN1cnNvRXh0ZXJubzogJGlkUmVjdXJzb0V4dGVybm8KICAgICAgICAgICAgICAgIG51ZXZvTm9tYnJlOiAkbnVldm9Ob21icmUKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICBub21icmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWROb2RvOiB0aGlzLmlkTm9kbywKICAgICAgICAgICAgaWRSZWN1cnNvRXh0ZXJubzogdGhpcy5lc3RlUmVjdXJzby5pZCwKICAgICAgICAgICAgbnVldm9Ob21icmU6IHRoaXMubnVldm9Ob21icmUsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5lbnZpYW5kb051ZXZvTm9tYnJlID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmVkaXRhbmRvUmVjdXJzbyA9IGZhbHNlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5lbnZpYW5kb051ZXZvTm9tYnJlID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IuIEUgOiR7ZXJyb3J9YCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgZ3VhcmRhck51ZXZvTGluaygpIHsKICAgICAgaWYgKHRoaXMubnVldm9MaW5rSWxlZ2FsKSB7CiAgICAgICAgY29uc29sZS5sb2coYE5vIGVudmlhZG9gKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMubnVldm9MaW5rID09IHRoaXMuZXN0ZVJlY3Vyc28ubGluaykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zb2xlLmxvZyhgZ3VhcmRhbmRvIG51ZXZvIGxpbmtgKTsKICAgICAgdGhpcy5lbnZpYW5kb051ZXZvTGluayA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKAogICAgICAgICAgICAgICRpZE5vZG86IElEIQogICAgICAgICAgICAgICRpZFJlY3Vyc29FeHRlcm5vOiBJRCEKICAgICAgICAgICAgICAkbnVldm9MaW5rOiBTdHJpbmchCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGVkaXRhckxpbmtSZWN1cnNvRXh0ZXJub05vZG9Tb2xpZGFyaWRhZCgKICAgICAgICAgICAgICAgIGlkTm9kbzogJGlkTm9kbwogICAgICAgICAgICAgICAgaWRSZWN1cnNvRXh0ZXJubzogJGlkUmVjdXJzb0V4dGVybm8KICAgICAgICAgICAgICAgIG51ZXZvTGluazogJG51ZXZvTGluawogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICAgIGxpbmsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWROb2RvOiB0aGlzLmlkTm9kbywKICAgICAgICAgICAgaWRSZWN1cnNvRXh0ZXJubzogdGhpcy5lc3RlUmVjdXJzby5pZCwKICAgICAgICAgICAgbnVldm9MaW5rOiB0aGlzLm51ZXZvTGluaywKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLmVudmlhbmRvTnVldm9MaW5rID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNldHRpbmdUYXJnZXQgPSBudWxsOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy5lbnZpYW5kb051ZXZvTGluayA9IGZhbHNlOwogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yLiBFIDoke2Vycm9yfWApOwogICAgICAgIH0pOwogICAgfSwKICAgIGluaWNpYXJFZGl0YW5kb1JlY3Vyc28oKSB7CiAgICAgIHRoaXMubnVldm9Ob21icmUgPSB0aGlzLmVzdGVSZWN1cnNvLm5vbWJyZTsKICAgICAgdGhpcy5lZGl0YW5kb1JlY3Vyc28gPSB0cnVlOwogICAgfSwKICAgIGVsaW1pbmFyc2UoKSB7CiAgICAgIGlmICgKICAgICAgICAhY29uZmlybSgKICAgICAgICAgICLCv0NvbmZpcm1hciBsYSBlbGltaW5hY2nDs24gZGUgZXN0ZSBlbGVtZW50bz8gKEVzdGEgYWNjacOzbiBubyBwdWVkZSBkZXNoYWNlcnNlKSIKICAgICAgICApCiAgICAgICkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmVsaW1pbmFuZG8gPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBJRCEsICRpZFJlY3Vyc29FeHRlcm5vOiBJRCEpIHsKICAgICAgICAgICAgICBlbGltaW5hclJlY3Vyc29FeHRlcm5vTm9kb1NvbGlkYXJpZGFkKAogICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvCiAgICAgICAgICAgICAgICBpZFJlY3Vyc29FeHRlcm5vOiAkaWRSZWN1cnNvRXh0ZXJubwogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZE5vZG86IHRoaXMuaWROb2RvLAogICAgICAgICAgICBpZFJlY3Vyc29FeHRlcm5vOiB0aGlzLmVzdGVSZWN1cnNvLmlkLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuZWxpbWluYW5kbyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kZW1pdCgnbWVFbGltaW5lJykKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTsKICAgICAgICAgIHRoaXMuZWxpbWluYW5kbyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIGluaWNpYXJJbnB1dExpbmsoKSB7CiAgICAgIHRoaXMuc2V0dGluZ1RhcmdldCA9ICJsaW5rIjsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuaW5wdXROdWV2b0xpbmsuZm9jdXMoKTsKICAgICAgfSk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHNldHRpbmdUYXJnZXQobW9kbywgcHJldikgewogICAgICBpZiAobW9kbyA9PT0gImxpbmsiICYmIHByZXYgIT0gImxpbmsiKSB7CiAgICAgICAgdGhpcy5udWV2b0xpbmsgPSB0aGlzLmVzdGVSZWN1cnNvLmxpbms7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dE51ZXZvTGluay5mb2N1cygpOwogICAgICB9CiAgICB9LAogICAgZWRpdGFuZG9SZWN1cnNvKGVkaXRhbmRvKSB7CiAgICAgIGlmICghZWRpdGFuZG8pIHsKICAgICAgICB0aGlzLnNldHRpbmdUYXJnZXQgPSBudWxsOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["RecursoExternoNodo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"RecursoExternoNodo.vue","sourceRoot":"src/components/atlasSolidaridad/homeNodo","sourcesContent":["<template>\n  <div\n    class=\"recursoExternoNodo\"\n    :class=\"{ deshabilitado: eliminando, editandose: editandoRecurso }\"\n  >\n    <div id=\"barraSuperior\" @click=\"clickEnRecurso\">\n      <img\n        id=\"iconoTipoRecurso\"\n        src=\"@/assets/iconos/link.svg\"\n        v-if=\"esteRecurso.tipo === 'enlace'\"\n      />\n      <img id=\"iconoTipoRecurso\" src=\"@/assets/iconos/file.svg\" v-else />\n      <div id=\"zonaNombre\">\n        <input\n          @keypress.enter.prevent=\"guardarNuevoNombre\"\n          ref=\"inputNuevoNombre\"\n          v-model=\"nuevoNombre\"\n          v-show=\"editandoRecurso\"\n          type=\"text\"\n          class=\"inputNuevoNombre inputNombreCosa\"\n          :class=\"{deshabilitado: enviandoNuevoNombre}\"\n          @click.stop=\"\"\n        />\n        <div id=\"elNombre\" v-show=\"!editandoRecurso\">\n          {{ esteRecurso.nombre }}\n        </div>\n      </div>\n\n      <div id=\"zonaBotonesControl\" v-show=\"usuarioResponsableAmplio\">\n        <img\n          src=\"@/assets/iconos/lapiz.svg\"\n          alt=\"Editar\"\n          title=\"Editar recurso\"\n          v-show=\"!editandoRecurso\"\n          @click.stop=\"iniciarEditandoRecurso\"\n          class=\"botonControl\"\n        />\n        <img\n          src=\"@/assets/iconos/equis.svg\"\n          alt=\"Cancelar\"\n          title=\"Cancelar edición\"\n          v-show=\"editandoRecurso\"\n          @click.stop=\"editandoRecurso = false\"\n          class=\"botonControl\"\n        />\n        <img\n          src=\"@/assets/iconos/trash.svg\"\n          alt=\"Eliminar\"\n          title=\"Eliminar recurso\"\n          v-show=\"!editandoRecurso\"\n          class=\"botonControl\"\n          @click.stop=\"eliminarse\"\n        />\n      </div>\n      <loading texto=\"\" v-show=\"eliminando\" />\n    </div>\n    <div id=\"zonaEdicionRecurso\" v-show=\"editandoRecurso\">\n      <div id=\"bloqueBotonesSetTarget\">\n        <div\n          class=\"boton botonSetTarget\"\n          :style=\"[\n            { borderColor: settingTarget === 'file' ? 'white' : 'transparent' },\n          ]\"\n          title=\"Subir archivo\"\n        >\n          <img src=\"@/assets/iconos/uploadCloud.svg\" alt=\"Upload\" />\n        </div>\n        <div\n          class=\"boton botonSetTarget\"\n          @click.stop=\"iniciarInputLink\"\n          :style=\"[\n            { borderColor: settingTarget === 'link' ? 'white' : 'transparent' },\n          ]\"\n          title=\"Introducir enlace\"\n        >\n          <img src=\"@/assets/iconos/link.svg\" alt=\"Enlace\" />\n        </div>\n      </div>\n      <div id=\"zonaInputNuevoLink\">\n        <input\n          ref=\"inputNuevoLink\"\n          @click.stop=\"\"\n          @keypress.enter=\"guardarNuevoLink\"\n          v-show=\"settingTarget === 'link'\"\n          type=\"text\"\n          placeholder=\"Introduce el enlace\"\n          class=\"inputNuevoLink\"\n          style=\"width: 90%\"\n          v-model=\"nuevoLink\"\n          :class=\"{deshabilitado:enviandoNuevoLink}\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { charProhibidosNombreCosa } from \"../configuracion\";\nimport gql from \"graphql-tag\";\nimport Loading from \"../../utilidades/Loading.vue\";\n\nexport default {\n  components: { Loading },\n  name: \"RecursoExternoNodo\",\n  props: {\n    esteRecurso: Object,\n    seleccionado: Boolean,\n    usuarioResponsableAmplio: Boolean,\n    idNodo: String,\n  },\n  data() {\n    return {\n      nuevoNombre: \"Nuevo nombre\",\n      enviandoNuevoNombre: false,\n\n      nuevoLink: null,\n      enviandoNuevoLink: false,\n\n      editandoRecurso: false,\n      eliminando: false,\n      settingTarget: null,\n    };\n  },\n  computed: {\n    nuevoNombreIlegal() {\n      if (this.nuevoNombre.length < 1) {\n        return true;\n      }\n      if (charProhibidosNombreCosa.test(this.nuevoNombre)) {\n        return true;\n      }\n      return false;\n    },\n    nuevoLinkIlegal() {\n      if (this.nuevoLink.length < 5) {\n        return true;\n      }\n      return false;\n    },\n  },\n  methods: {\n    clickEnRecurso() {\n      if(this.editandoRecurso){\n        return\n      }\n      if (this.esteRecurso.tipo === \"enlace\") {\n        window.open(this.esteRecurso.link, \"_blank\");\n      }\n    },\n    guardarNuevoNombre() {\n      this.nuevoNombre=this.$refs.inputNuevoNombre.value;\n\n      if (this.nuevoNombreIlegal) {\n        console.log(`No enviado`);\n        return;\n      }\n      if (this.nuevoNombre == this.esteRecurso.nombre) {\n        this.editando\n        return;\n      }\n      console.log(`guardando nuevo nombre`);\n      this.enviandoNuevoNombre = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation (\n              $idNodo: ID!\n              $idRecursoExterno: ID!\n              $nuevoNombre: String!\n            ) {\n              editarNombreRecursoExternoNodoSolidaridad(\n                idNodo: $idNodo\n                idRecursoExterno: $idRecursoExterno\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          `,\n          variables: {\n            idNodo: this.idNodo,\n            idRecursoExterno: this.esteRecurso.id,\n            nuevoNombre: this.nuevoNombre,\n          },\n        })\n        .then(() => {\n          this.enviandoNuevoNombre = false;\n          this.editandoRecurso = false;\n        })\n        .catch((error) => {\n          this.enviandoNuevoNombre = false;\n          console.log(`Error. E :${error}`);\n        });\n    },\n    guardarNuevoLink() {\n      if (this.nuevoLinkIlegal) {\n        console.log(`No enviado`);\n        return;\n      }\n      if (this.nuevoLink == this.esteRecurso.link) {\n        return;\n      }\n      console.log(`guardando nuevo link`);\n      this.enviandoNuevoLink = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation (\n              $idNodo: ID!\n              $idRecursoExterno: ID!\n              $nuevoLink: String!\n            ) {\n              editarLinkRecursoExternoNodoSolidaridad(\n                idNodo: $idNodo\n                idRecursoExterno: $idRecursoExterno\n                nuevoLink: $nuevoLink\n              ) {\n                id\n                link\n              }\n            }\n          `,\n          variables: {\n            idNodo: this.idNodo,\n            idRecursoExterno: this.esteRecurso.id,\n            nuevoLink: this.nuevoLink,\n          },\n        })\n        .then(() => {\n          this.enviandoNuevoLink = false;\n          this.settingTarget = null;\n        })\n        .catch((error) => {\n          this.enviandoNuevoLink = false;\n          console.log(`Error. E :${error}`);\n        });\n    },\n    iniciarEditandoRecurso() {\n      this.nuevoNombre = this.esteRecurso.nombre;\n      this.editandoRecurso = true;\n    },\n    eliminarse() {\n      if (\n        !confirm(\n          \"¿Confirmar la eliminación de este elemento? (Esta acción no puede deshacerse)\"\n        )\n      ) {\n        return;\n      }\n      this.eliminando = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!, $idRecursoExterno: ID!) {\n              eliminarRecursoExternoNodoSolidaridad(\n                idNodo: $idNodo\n                idRecursoExterno: $idRecursoExterno\n              )\n            }\n          `,\n          variables: {\n            idNodo: this.idNodo,\n            idRecursoExterno: this.esteRecurso.id,\n          },\n        })\n        .then(() => {\n          this.eliminando = false;\n          this.$emit('meElimine')\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.eliminando = false;\n        });\n    },\n    iniciarInputLink() {\n      this.settingTarget = \"link\";\n      this.$nextTick(() => {\n        this.$refs.inputNuevoLink.focus();\n      });\n    },\n  },\n  watch: {\n    settingTarget(modo, prev) {\n      if (modo === \"link\" && prev != \"link\") {\n        this.nuevoLink = this.esteRecurso.link;\n        this.$refs.inputNuevoLink.focus();\n      }\n    },\n    editandoRecurso(editando) {\n      if (!editando) {\n        this.settingTarget = null;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.recursoExternoNodo {\n  cursor: pointer;\n}\n.recursoExternoNodo:hover,\n.recursoExternoNodo.editandose {\n  background-color: rgba(0, 0, 0, 0.062);\n}\n.recursoExternoNodo #zonaBotonesControl {\n  visibility: hidden;\n}\n\n.recursoExternoNodo:hover #zonaBotonesControl {\n  visibility: visible;\n}\n#barraSuperior {\n  padding: 2% 5%;\n  display: flex;\n  align-items: center;\n}\n#iconoTipoRecurso {\n  height: 15px;\n  margin-right: 2%;\n}\n.inputNuevoNombre{\n  width: 80%;\n}\n#zonaBotonesControl {\n  display: flex;\n  margin-left: auto;\n  position: relative;\n}\n.botonControl {\n  height: 15px;\n  opacity: 0.5;\n  cursor: pointer;\n  margin: 0px 5px;\n}\n.botonControl:hover {\n  opacity: 1;\n}\n#zonaEdicionRecurso {\n  padding-bottom: 10px;\n  padding-left: 5%;\n}\n.botonSetTarget {\n  height: 25px;\n  margin-right: 2%;\n  border-width: 1px;\n  border-style: solid;\n  border-radius: 50%;\n  padding: 3px;\n  display: flex;\n  align-items: center;\n}\n.botonSetTarget > img {\n  height: 90%;\n}\n#bloqueBotonesSetTarget {\n  display: flex;\n}\n\n@media (hover: none) and (pointer: coarse) {\n  .recursoExternoNodo #zonaBotonesControl {\n    visibility: visible;\n  }\n}\n</style>"]}]}