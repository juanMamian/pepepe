{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/BuscadorNodosConocimiento.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/BuscadorNodosConocimiento.vue","mtime":1648741729541},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTG9hZGluZyBmcm9tICIuLi91dGlsaWRhZGVzL0xvYWRpbmcudnVlIjsKLy8gaW1wb3J0IHRocm90dGxlIGZyb20gImxvZGFzaC90aHJvdHRsZSI7Ci8vIGltcG9ydCBkZWJvdW5jZSBmcm9tICJsb2Rhc2gvZGVib3VuY2UiCgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBMb2FkaW5nIH0sCiAgbmFtZTogIkJ1c2NhZG9yTm9kb3NDb25vY2ltaWVudG8iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0ZXh0b0J1c3F1ZWRhOiAiIiwKICAgICAgY2FudGlkYWRQYWxhYnJhc1ZhbGlkYXM6IDAsCiAgICAgIHJlc3VsdGFkb3M6IFtdLAoKICAgICAgbW9zdHJhbmRvSW5wdXQ6IGZhbHNlLAogICAgICBtb3N0cmFuZG9MaXN0YTogZmFsc2UsCgogICAgICBlc3BlcmFuZG9SZXN1bHRhZG9zOiBmYWxzZSwKICAgIH07CiAgfSwKICBwcm9wczogewogICAgY2VycmFyQnVzcXVlZGE6IE51bWJlciwKICB9LAogIG1ldGhvZHM6IHsKICAgIGNlcnJhcigpIHsKICAgICAgdGhpcy5tb3N0cmFuZG9JbnB1dCA9IGZhbHNlOwogICAgfSwKICAgIGJ1c2NhckRhdGFiYXNlKCkgewogICAgICBjb25zb2xlLmxvZyhgKioqKioqRGVzY2FyZ2FuZG8gcmVzdWx0YWRvcyBkZSBiw7pzcXVlZGFgKTsKICAgICAgdGhpcy5lc3BlcmFuZG9SZXN1bHRhZG9zID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvCiAgICAgICAgLnF1ZXJ5KHsKICAgICAgICAgIHF1ZXJ5OiBncWxgCiAgICAgICAgICAgIHF1ZXJ5ICgkcGFsYWJyYXNCdXNjYWRhczogU3RyaW5nISkgewogICAgICAgICAgICAgIGJ1c3F1ZWRhQW1wbGlhKHBhbGFicmFzQnVzY2FkYXM6ICRwYWxhYnJhc0J1c2NhZGFzKSB7CiAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgICAgbm9tYnJlCiAgICAgICAgICAgICAgICByZXN1bWVuCiAgICAgICAgICAgICAgICBhdXRvQ29vcmRzIHsKICAgICAgICAgICAgICAgICAgeAogICAgICAgICAgICAgICAgICB5CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICBgLAogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIHBhbGFicmFzQnVzY2FkYXM6IHRoaXMudGV4dG9CdXNxdWVkYSwKICAgICAgICAgIH0sCiAgICAgICAgICBmZXRjaFBvbGljeTogIm5ldHdvcmstb25seSIsCiAgICAgICAgfSkKICAgICAgICAudGhlbigoeyBkYXRhOiB7IGJ1c3F1ZWRhQW1wbGlhIH0gfSkgPT4gewogICAgICAgICAgdGhpcy5yZXN1bHRhZG9zID0gYnVzcXVlZGFBbXBsaWE7CiAgICAgICAgICB0aGlzLmVzcGVyYW5kb1Jlc3VsdGFkb3MgPSBmYWxzZTsKICAgICAgICAgIHRoaXMubW9zdHJhbmRvTGlzdGEgPSB0cnVlOwogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApOwogICAgICAgICAgdGhpcy5lc3BlcmFuZG9SZXN1bHRhZG9zID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHRleHRvQnVzcXVlZGE6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5tb3N0cmFuZG9MaXN0YSA9IGZhbHNlOwogICAgfSwKICAgIGNlcnJhckJ1c3F1ZWRhKCkgewogICAgICB0aGlzLm1vc3RyYW5kb0lucHV0ID0gZmFsc2U7CiAgICAgIHRoaXMubW9zdHJhbmRvTGlzdGEgPSBmYWxzZTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["BuscadorNodosConocimiento.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BuscadorNodosConocimiento.vue","sourceRoot":"src/components/atlasConocimiento","sourcesContent":["<template>\n  <div id=\"buscadorNodosConocimiento\" :style=\"[{width: mostrandoInput?'min(100vh, 350px)':'30px'}]\">\n    <div id=\"barraSuperior\">\n      <img\n        src=\"@/assets/iconos/search.png\"\n        alt=\"Lupa\"\n        title=\"Buscar nodos de conocimiento\"\n        id=\"imagenLupa\"\n        :class=\"{ opaco: !mostrandoInput }\"\n        @click.stop=\"mostrandoInput = true\"\n      />\n      <transition name=\"unfold\">\n        <input\n          type=\"text\"\n          placeholder=\"Buscar\"\n          v-model=\"textoBusqueda\"\n          id=\"inputBuscador\"\n          v-show=\"mostrandoInput\"\n          autocomplete=\"off\"\n          @click.stop=\"\"\n          @keypress.enter=\"buscarDatabase\"\n        />\n      </transition>\n      \n    </div>\n    <loading texto=\"Buscando\" v-show=\"esperandoResultados\" />\n\n    <div id=\"listaResultados\" v-show=\"mostrandoLista\">\n      <div\n        class=\"resultado\"\n        :key=\"resultado.id\"\n        v-for=\"resultado of resultados\"\n        @click.stop=\"\n          $emit('nodoSeleccionado', resultado);\n          mostrandoInput = false;\n          mostrandoLista = false;\n        \"\n      >\n        {{ resultado.nombre }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from \"../utilidades/Loading.vue\";\n// import throttle from \"lodash/throttle\";\n// import debounce from \"lodash/debounce\"\n\nexport default {\n  components: { Loading },\n  name: \"BuscadorNodosConocimiento\",\n  data() {\n    return {\n      textoBusqueda: \"\",\n      cantidadPalabrasValidas: 0,\n      resultados: [],\n\n      mostrandoInput: false,\n      mostrandoLista: false,\n\n      esperandoResultados: false,\n    };\n  },\n  props: {\n    cerrarBusqueda: Number,\n  },\n  methods: {\n    cerrar() {\n      this.mostrandoInput = false;\n    },\n    buscarDatabase() {\n      console.log(`******Descargando resultados de bÃºsqueda`);\n      this.esperandoResultados = true;\n      this.$apollo\n        .query({\n          query: gql`\n            query ($palabrasBuscadas: String!) {\n              busquedaAmplia(palabrasBuscadas: $palabrasBuscadas) {\n                id\n                nombre\n                resumen\n                autoCoords {\n                  x\n                  y\n                }\n              }\n            }\n          `,\n          variables: {\n            palabrasBuscadas: this.textoBusqueda,\n          },\n          fetchPolicy: \"network-only\",\n        })\n        .then(({ data: { busquedaAmplia } }) => {\n          this.resultados = busquedaAmplia;\n          this.esperandoResultados = false;\n          this.mostrandoLista = true;\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.esperandoResultados = false;\n        });\n    },\n  },\n  watch: {\n    textoBusqueda: function () {\n      this.mostrandoLista = false;\n    },\n    cerrarBusqueda() {\n      this.mostrandoInput = false;\n      this.mostrandoLista = false;\n    },\n  },\n};\n</script>\n\n<style scoped>\n#barraSuperior{\n  display:flex;\n  align-items: center;\n  flex-direction: row-reverse;\n  \n}\n\n#inputBuscador {\n  font-size: 20px;\n  border-radius: 4px;\n  width: 280px;\n}\n\n#imagenLupa {\n  width: 30px;\n  cursor: pointer;\n  border-radius: 50%;\n  padding: 3px;\n}\n\n#imagenLupa:hover {\n  opacity: 1;\n}\n.opaco {\n  opacity: 0.5;\n}\n#listaResultados {\n  margin: 2px auto;\n  width: 100%;\n}\n\n.resultado {\n  padding: 5px 15px;\n  font-size: 18px;\n  background-color: lightblue;\n  cursor: pointer;\n}\n.resultado:hover {\n  background-color: rgb(133, 179, 194);\n}\n\n.unfold-enter {\n  width: 0px;\n}\n.unfold-enter-active {\n  transition: width 1s;\n}\n.unfold-enter-to {\n  width: 281px;\n}\n</style>"]}]}