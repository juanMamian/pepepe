{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/Registro.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/Registro.vue","mtime":1644587546122},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IHZhbGlkYXJEYXRvc1VzdWFyaW8gfSBmcm9tICIuL3V0aWxpZGFkZXMvdmFsaWRhY2lvbkRhdG9zVXN1YXJpbyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJlZ2lzdHJvIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0b3NSZWdpc3RybzogewogICAgICAgIG5vbWJyZXM6IG51bGwsCiAgICAgICAgYXBlbGxpZG9zOiBudWxsLAogICAgICAgIGZlY2hhTmFjaW1pZW50bzogbnVsbCwKICAgICAgICBlbWFpbDogbnVsbCwKICAgICAgICBudW1lcm9UZWw6IG51bGwsCiAgICAgICAgbHVnYXJSZXNpZGVuY2lhOiBudWxsLAogICAgICAgIHVzZXJuYW1lOiBudWxsLAogICAgICAgIHBhc3N3b3JkOiBudWxsLAogICAgICB9LAogICAgICBjYW1wb3NPYmxpZ2F0b3Jpb3M6IFsibm9tYnJlcyIsICJhcGVsbGlkb3MiLCAidXNlcm5hbWUiLCAicGFzc3dvcmQiXSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBlbnZpYXJSZWdpc3RybygpIHsKICAgICAgbGV0IGRhdG9zSW50cm9kdWNpZG9zID0gbmV3IE9iamVjdCgpOwogICAgICBpZighdGhpcy5kYXRvc1JlZ2lzdHJvLnVzZXJuYW1lKXsKICAgICAgICB0aGlzLmRhdG9zUmVnaXN0cm8udXNlcm5hbWUgPSB0aGlzLmRhdG9zUmVnaXN0cm8ubm9tYnJlcy5zcGxpdCgnICcpWzBdICsgdGhpcy5kYXRvc1JlZ2lzdHJvLmFwZWxsaWRvcy5zcGxpdCgnICcpWzBdCiAgICAgIH0KICAgICAgaWYoIXRoaXMuZGF0b3NSZWdpc3Ryby5wYXNzd29yZCl7CiAgICAgICAgdGhpcy5kYXRvc1JlZ2lzdHJvLnBhc3N3b3JkID10aGlzLmRhdG9zUmVnaXN0cm8ubm9tYnJlcy5zcGxpdCgnICcpWzBdICsgdGhpcy5kYXRvc1JlZ2lzdHJvLmFwZWxsaWRvcy5zcGxpdCgnICcpWzBdCiAgICAgIH0KCgogICAgICBmb3IgKGxldCBjYW1wbyBpbiB0aGlzLmRhdG9zUmVnaXN0cm8pIHsKICAgICAgICBpZiAoIXRoaXMuZGF0b3NSZWdpc3Ryb1tjYW1wb10pIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBjYW1wbyAke2NhbXBvfSB2YWNpb2ApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBkYXRvc0ludHJvZHVjaWRvc1tjYW1wb10gPSB0aGlzLmRhdG9zUmVnaXN0cm9bY2FtcG9dOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5jYW1wb3NPYmxpZ2F0b3Jpb3MuZm9yRWFjaCgoY2FtcG9PYmxpZ2F0b3JpbykgPT4gewogICAgICAgIGlmICghZGF0b3NJbnRyb2R1Y2lkb3NbY2FtcG9PYmxpZ2F0b3Jpb10pIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBGYWx0YWJhIGVsIGNhbXBvICR7Y2FtcG9PYmxpZ2F0b3Jpb31gKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBsZXQgZGlzID0gdGhpczsKCiAgICAgIGxldCBlcnJvcmVzID0gdmFsaWRhckRhdG9zVXN1YXJpbyhkYXRvc0ludHJvZHVjaWRvcyk7CiAgICAgIGlmIChlcnJvcmVzLmxlbmd0aCA8IDEpIHsKICAgICAgICBheGlvcwogICAgICAgICAgLnBvc3QodGhpcy5zZXJ2ZXJVcmwgKyAiL2FwaS91c3Vhcmlvcy9yZWdpc3RybyIsIHsKICAgICAgICAgICAgdXN1YXJpbzogZGF0b3NJbnRyb2R1Y2lkb3MsCiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3B1ZXN0YSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgcmVzcHVlc3RhOiAke0pTT04uc3RyaW5naWZ5KHJlc3B1ZXN0YS5kYXRhKX1gKTsKICAgICAgICAgICAgaWYgKHJlc3B1ZXN0YS5kYXRhLnJlZ2lzdHJvKSB7CiAgICAgICAgICAgICAgYWxlcnQoIlJlZ2lzdHJvIG9rIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGlzLnZhY2lhckNhbXBvcygpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coYGVycm9yOiAke2Vycm9yfWApOwogICAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coYEVycm9yZXM6ICR7ZXJyb3Jlc31gKTsKICAgICAgfQogICAgfSwKICAgIHZhY2lhckNhbXBvcygpIHsKICAgICAgY29uc29sZS5sb2coYFZhY2lhbmRvIGNhbXBvc2ApOwogICAgICB0aGlzLmRhdG9zUmVnaXN0cm8gPSB7CiAgICAgICAgbm9tYnJlczogbnVsbCwKICAgICAgICBhcGVsbGlkb3M6IG51bGwsCiAgICAgICAgZmVjaGFOYWNpbWllbnRvOiBudWxsLAogICAgICAgIGVtYWlsOiBudWxsLAogICAgICAgIG51bWVyb1RlbDogbnVsbCwKICAgICAgICBsdWdhclJlc2lkZW5jaWE6IG51bGwsCiAgICAgICAgdXNlcm5hbWU6IG51bGwsCiAgICAgICAgcGFzc3dvcmQ6IG51bGwsCiAgICAgIH07CiAgICB9LAogICAgYWxlcnRhcihtc2opIHsKICAgICAgY29uc29sZS5sb2cobXNqKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Registro.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Registro.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"registro\">\n    <form>\n      <div id=\"zonaDatosPersonales\">\n        <h3>Información Personal</h3>\n        <input\n          v-model=\"datosRegistro.nombres\"\n          type=\"text\"\n          name=\"nombres\"\n          placeholder=\"Nombres\"\n        /><br />\n        <input\n          v-model=\"datosRegistro.apellidos\"\n          type=\"text\"\n          name=\"apellidos\"\n          placeholder=\"Apellidos\"\n        /><br /><br />\n        <label for=\"fechaNacimiento\">Fecha de nacimiento</label><br />\n        <input\n          v-model=\"datosRegistro.fechaNacimiento\"\n          type=\"date\"\n          name=\"fechaNacimiento\"\n        /><br />\n      </div>\n\n      <div id=\"zonaContacto\">\n        <h3>Datos de contacto</h3>\n        <input\n          v-model=\"datosRegistro.email\"\n          type=\"email\"\n          placeholder=\"Correo electrónico\"\n        /><br /><br />\n        <label for=\"numeroTel\">Número telefónico</label><br />\n        <input\n          v-model=\"datosRegistro.numeroTel\"\n          type=\"text\"\n          name=\"numeroTel\"\n        /><br /><br />\n        <label for=\"lugarResidencia\">Lugar de residencia</label><br />\n        <input\n          v-model=\"datosRegistro.lugarResidencia\"\n          type=\"text\"\n          placeholder=\"Lugar de residencia\"\n        />\n      </div>\n\n      <div id=\"zonaLogin\">\n        <h3>Datos de login</h3>\n        <input\n          type=\"text\"\n          placeholder=\"nombre de usuario\"\n          name=\"username\"\n          v-model=\"datosRegistro.username\"\n        /><br />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          name=\"password\"\n          v-model=\"datosRegistro.password\"\n        /><br />\n      </div>\n\n      <button @click.prevent=\"enviarRegistro\">Enviar</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { validarDatosUsuario } from \"./utilidades/validacionDatosUsuario\";\n\nexport default {\n  name: \"Registro\",\n  data() {\n    return {\n      datosRegistro: {\n        nombres: null,\n        apellidos: null,\n        fechaNacimiento: null,\n        email: null,\n        numeroTel: null,\n        lugarResidencia: null,\n        username: null,\n        password: null,\n      },\n      camposObligatorios: [\"nombres\", \"apellidos\", \"username\", \"password\"],\n    };\n  },\n  methods: {\n    enviarRegistro() {\n      let datosIntroducidos = new Object();\n      if(!this.datosRegistro.username){\n        this.datosRegistro.username = this.datosRegistro.nombres.split(' ')[0] + this.datosRegistro.apellidos.split(' ')[0]\n      }\n      if(!this.datosRegistro.password){\n        this.datosRegistro.password =this.datosRegistro.nombres.split(' ')[0] + this.datosRegistro.apellidos.split(' ')[0]\n      }\n\n\n      for (let campo in this.datosRegistro) {\n        if (!this.datosRegistro[campo]) {\n          console.log(`campo ${campo} vacio`);\n        } else {\n          datosIntroducidos[campo] = this.datosRegistro[campo];\n        }\n      }\n\n      this.camposObligatorios.forEach((campoObligatorio) => {\n        if (!datosIntroducidos[campoObligatorio]) {\n          console.log(`Faltaba el campo ${campoObligatorio}`);\n          return;\n        }\n      });\n      let dis = this;\n\n      let errores = validarDatosUsuario(datosIntroducidos);\n      if (errores.length < 1) {\n        axios\n          .post(this.serverUrl + \"/api/usuarios/registro\", {\n            usuario: datosIntroducidos,\n          })\n          .then(function (respuesta) {\n            console.log(`respuesta: ${JSON.stringify(respuesta.data)}`);\n            if (respuesta.data.registro) {\n              alert(\"Registro ok\");\n            }\n            dis.vaciarCampos();\n          })\n          .catch(function (error) {\n            console.log(`error: ${error}`);\n          });\n      } else {\n        console.log(`Errores: ${errores}`);\n      }\n    },\n    vaciarCampos() {\n      console.log(`Vaciando campos`);\n      this.datosRegistro = {\n        nombres: null,\n        apellidos: null,\n        fechaNacimiento: null,\n        email: null,\n        numeroTel: null,\n        lugarResidencia: null,\n        username: null,\n        password: null,\n      };\n    },\n    alertar(msj) {\n      console.log(msj);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.registro {\n  padding-left: 15%;\n  padding-top: 5%;\n}\n</style>"]}]}