{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/Personas.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/Personas.vue","mtime":1674484905022},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTG9hZGluZyBmcm9tICIuL3V0aWxpZGFkZXMvTG9hZGluZy52dWUiOwppbXBvcnQgUGVyc29uYVZpc3RhTGlzdGEgZnJvbSAiLi91c3VhcmlvL3BlcnNvbmFWaXN0YUxpc3RhLnZ1ZSI7CmltcG9ydCBkZWJvdW5jZSBmcm9tICJkZWJvdW5jZSI7Ci8vIGltcG9ydCB7IHNpbWlsYXJpdHkgfSBmcm9tICIuL3V0aWxpZGFkZXMvZnVuY2lvbmVzIjsKdmFyIHN0cmluZ1NpbWlsYXJpdHkgPSByZXF1aXJlKCJzdHJpbmctc2ltaWxhcml0eSIpOwoKY29uc3QgY2hhclByb2hpYmlkb3NQZXJtaXNvID0gL1teIGEtekEtWi1dLzsKCmV4cG9ydCBjb25zdCBRVUVSWV9QRVJTT05BUyA9IGdxbGAKICBxdWVyeSB7CiAgICB0b2Rvc1VzdWFyaW9zIHsKICAgICAgaWQKICAgICAgbm9tYnJlcwogICAgICBhcGVsbGlkb3MKICAgICAgcGVybWlzb3MKICAgICAgdXNlcm5hbWUKICAgIH0KICB9CmA7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBlcnNvbmFzIiwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nLAogICAgUGVyc29uYVZpc3RhTGlzdGEsCiAgfSwKICBhcG9sbG86IHsKICAgIHBlcnNvbmFzOiB7CiAgICAgIHF1ZXJ5OiBRVUVSWV9QRVJTT05BUywKICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoeyB0b2Rvc1VzdWFyaW9zIH0pIHsKICAgICAgICByZXR1cm4gdG9kb3NVc3VhcmlvczsKICAgICAgfSwKICAgICAgZmV0Y2hQb2xpY3k6ICJjYWNoZS1maXJzdCIsCiAgICB9LAogICAgbm9kb3NTb2xpZGFyaWRhZFB1YmxpY2l0YWRvczogewogICAgICBxdWVyeTogZ3FsYAogICAgICAgIHF1ZXJ5IHsKICAgICAgICAgIG5vZG9zU29saWRhcmlkYWRQdWJsaWNpdGFkb3MgewogICAgICAgICAgICBpZAogICAgICAgICAgICBub21icmUKICAgICAgICAgICAgcmVzcG9uc2FibGVzCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBgLAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwZXJzb25hczogW10sCiAgICAgIG5vZG9zU29saWRhcmlkYWRQdWJsaWNpdGFkb3M6IFtdLAogICAgICBpZFBlcnNvbmFNZW51Q3g6IG51bGwsCiAgICAgIGlkUGVyc29uYVNlbGVjY2lvbmFkYTogbnVsbCwKICAgICAgdGlwb01vc3RyYXJVc3VhcmlvczogInRvZG9zIiwKCiAgICAgIHBlcm1pc29JbnB1dDogIiIsCiAgICAgIHRleHRvQnVzY2FyOiBudWxsLAogICAgICB0ZXh0b0J1c3F1ZWRhVXNhZG86IG51bGwsCiAgICAgIG1vc3RyYW5kb0lucHV0QnVzY2FyOiBmYWxzZSwKICAgICAgYnVzY2Fkb3M6IFtdLAoKICAgICAgZGVib3VuY2luZ0J1c3F1ZWRhOiBmYWxzZSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjb3BpYXJJZChlKSB7CiAgICAgIGxldCBzdHIgPSBlLnRhcmdldC5pbm5lclRleHQudHJpbSgpOwogICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIik7CiAgICAgIGVsLnZhbHVlID0gc3RyOwogICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTsKICAgICAgZWwuc2VsZWN0KCk7CiAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCJjb3B5Iik7CiAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZWwpOwogICAgfSwKICAgIGVsaW1pbmFyUGVyc29uYURlRGF0YWJhc2UoaWRQZXJzb25hKSB7CiAgICAgIGlmIChjb25maXJtKCLCv1NlZ3VybyBkZSBlbGltaW5hciBhIGVzdGUgaW5kaXZpZHVvPyIpKSB7CiAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICBgU2UgZWxpbWluYXJhIHVuYSBwZXJzb25hIGNvbiBpZCAke2lkUGVyc29uYX0gZGUgbGEgYmFzZSBkZSBkYXRvc2AKICAgICAgICApOwogICAgICB9CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKCRpZFVzdWFyaW86IElEISkgewogICAgICAgICAgICAgIGVsaW1pbmFyVXN1YXJpbyhpZFVzdWFyaW86ICRpZFVzdWFyaW8pCiAgICAgICAgICAgIH0KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWRVc3VhcmlvOiBpZFBlcnNvbmEsCiAgICAgICAgICB9LAogICAgICAgICAgdXBkYXRlOiAoc3RvcmUsIHsgZGF0YTogeyBlbGltaW5hclVzdWFyaW8gfSB9KSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBEYXRhOiAke2VsaW1pbmFyVXN1YXJpb31gKTsKICAgICAgICAgICAgaWYgKGVsaW1pbmFyVXN1YXJpbykgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBsZXQgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgICAgICAgICAgICBxdWVyeTogUVVFUllfUEVSU09OQVMsCiAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogeyBpZFVzdWFyaW86IGlkUGVyc29uYSB9LAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FjaGU6ICR7Y2FjaGV9YCk7CgogICAgICAgICAgICAgICAgbGV0IGluZGV4RSA9IGNhY2hlLnRvZG9zVXN1YXJpb3MuZmluZEluZGV4KAogICAgICAgICAgICAgICAgICAocCkgPT4gcC5pZCA9PSBpZFBlcnNvbmEKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICBpZiAoaW5kZXhFID4gLTEpIHsKICAgICAgICAgICAgICAgICAgY2FjaGUudG9kb3NVc3Vhcmlvcy5zcGxpY2UoaW5kZXhFLCAxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBjYWNoZTogJHtjYWNoZX1gKTsKICAgICAgICAgICAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgICAgICAgICAgICBxdWVyeTogUVVFUllfUEVSU09OQVMsCiAgICAgICAgICAgICAgICAgIHZhcmlhYmxlczogeyBpZFVzdWFyaW86IGlkUGVyc29uYSB9LAogICAgICAgICAgICAgICAgICBkYXRhOiBjYWNoZSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgYWN0dWFsaXphbmRvIGNhY2hlLiBFOiR7ZXJyb3J9YCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYFJlczogJHtKU09OLnN0cmluZ2lmeShyZXMpfWApOwogICAgICAgICAgaWYgKHJlcy5kYXRhKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBVc3VhcmlvIGVsaW1pbmFkbyBleGl0b3NhbWVudGVgKTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBlbGltaW5hbmRvIHVzdWFyaW86IEU6ICR7ZXJyb3J9YCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgYXNpZ25hclBlcm1pc29Ub2RvcygpIHsKICAgICAgaWYgKHRoaXMucGVybWlzb0lsZWdhbCkgewogICAgICAgIGNvbnNvbGUubG9nKGBObyBlbnZpYWRvYCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIWNvbmZpcm0oIsK/QXNpZ25hciBlc3RlIHBlcm1pc28gYSB0b2RhcyBsYXMgcGVyc29uYXM/IikpIHJldHVybjsKCiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKCRudWV2b1Blcm1pc286IFN0cmluZyEpIHsKICAgICAgICAgICAgICBhc2lnbmFyUGVybWlzb1RvZG9zVXN1YXJpb3MobnVldm9QZXJtaXNvOiAkbnVldm9QZXJtaXNvKQogICAgICAgICAgICB9CiAgICAgICAgICBgLAogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIG51ZXZvUGVybWlzbzogdGhpcy5wZXJtaXNvSW5wdXQsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgYWxlcnQoCiAgICAgICAgICAgICJQZXJtaXNvICIgKyB0aGlzLnBlcm1pc29JbnB1dCArICIgYXNpZ25hZG8gcGFyYSB0b2RvcyBsb3MgdXN1YXJpb3MiCiAgICAgICAgICApOwogICAgICAgIH0pOwogICAgfSwKICAgIGluaWNpYXJCdXNjYXIoKSB7CiAgICAgIHRoaXMubW9zdHJhbmRvSW5wdXRCdXNjYXIgPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dEJ1c2Nhci5mb2N1cygpOwogICAgICB9KTsKICAgIH0sCiAgICBjYW5jZWxhckJ1c3F1ZWRhKCkgewogICAgICB0aGlzLmJ1c2NhZG9zID0gW107CiAgICAgIHRoaXMudGV4dG9CdXNjYXIgPSBudWxsOwogICAgICB0aGlzLm1vc3RyYW5kb0lucHV0QnVzY2FyID0gZmFsc2U7CiAgICAgIHRoaXMudGV4dG9CdXNxdWVkYVVzYWRvID0gbnVsbDsKICAgIH0sCiAgICBjYWxjdWxhckJ1c2NhZG9zOiBkZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnNvbGUubG9nKGBTZXR0aW5nIHRleHRvQnVzcXVlZGFVc2Fkb2ApOwogICAgICB0aGlzLnRleHRvQnVzcXVlZGFVc2FkbyA9IHRoaXMudGV4dG9CdXNjYXI7CiAgICAgIC8vIGNvbnNvbGUubG9nKGBDYWxjdWxhbmRvIGJ1c2NhZG9zYCk7CiAgICAgIC8vIGlmICghdGhpcy50ZXh0b0J1c2NhcikgcmV0dXJuOwogICAgICAvLyB2YXIgbGlzdGEgPSBbXTsKICAgICAgLy8gdmFyIHRleHRvID0gdGhpcy50ZXh0b0J1c2Nhci50cmltKCk7CiAgICAgIC8vIHZhciBjYW1wb1BlcnNvbmFzID0KICAgICAgLy8gICB0aGlzLm1vc3RyYXJQZXJzb25hcyA9PT0gInByb2ZlcyIKICAgICAgLy8gICAgID8gdGhpcy5wZXJzb25hcy5maWx0ZXIoKHApID0+CiAgICAgIC8vICAgICAgICAgcC5wZXJtaXNvcy5pbmNsdWRlcygibWFlc3RyYVZpZGEtcHJvZmVzb3IiKQogICAgICAvLyAgICAgICApCiAgICAgIC8vICAgICA6IHRoaXMucGVyc29uYXM7CgogICAgICAvLyBjYW1wb1BlcnNvbmFzLmZvckVhY2goKHBlcnNvbmEpID0+IHsKICAgICAgLy8gICAvLyBjb25zb2xlLmxvZyhgQnVzY2FuZG8gJHt0ZXh0b30gZW4gJHtub21icmVMYXJnb31gKTsKICAgICAgLy8gICB2YXIgcHVudGFqZVNpbWlsYXJpZGFkPXNpbWlsYXJpdHkodGV4dG8sIG5vbWJyZUxhcmdvKTsKICAgICAgLy8gICB2YXIgb2JqPXt9OwogICAgICAvLyAgIG9ialtwZXJzb25hLmlkXT1wdW50YWplU2ltaWxhcmlkYWQ7CiAgICAgIC8vICAgbGlzdGEucHVzaCh7b2JqfSk7CiAgICAgIC8vICAgY29uc29sZS5sb2coYEJJTkdPYCk7CiAgICAgIC8vIH0pOwoKICAgICAgLy8gdGhpcy5idXNjYWRvcz1saXN0YTsKICAgIH0sIDgwMCksCiAgfSwKICBjb21wdXRlZDogewogICAgb3BjaW9uZXNFc3BlY2lhbGVzUGVyc29uYTogZnVuY3Rpb24gKCkgewogICAgICBsZXQgb3BjaW9uZXMgPSBbXTsKICAgICAgaWYgKHRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvcikgewogICAgICAgIG9wY2lvbmVzID0gb3BjaW9uZXMuY29uY2F0KFsKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dG9WaXNpYmxlOiAiRWxpbWluYXIgZGUgbGEgYmFzZSBkZSBkYXRvcyIsCiAgICAgICAgICAgIGV2ZW50bzogImVsaW1pbmFuZG9zZURlRGF0YWJhc2UiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdGV4dG9WaXNpYmxlOiAicmVzZXRlYXIgY29udHJhc2XDsWEgKDEyMzQ1NikiLAogICAgICAgICAgICBldmVudG86ICJyZXNldGVhbmRvUGFzcyIsCiAgICAgICAgICB9LAogICAgICAgIF0pOwogICAgICB9CiAgICAgIHJldHVybiBvcGNpb25lczsKICAgIH0sCiAgICBwZXJtaXNvSWxlZ2FsKCkgewogICAgICBpZiAodGhpcy5wZXJtaXNvSW5wdXQubGVuZ3RoIDwgMSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIGlmIChjaGFyUHJvaGliaWRvc1Blcm1pc28udGVzdCh0aGlzLnBlcm1pc29JbnB1dCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgcGVyc29uYXNWaXNpYmxlcygpIHsKICAgICAgdmFyIHZpc2libGVzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnBlcnNvbmFzKSk7CiAgICAgIGlmICh0aGlzLnRpcG9Nb3N0cmFyVXN1YXJpb3MgPT09ICJwcm9mZXNvcmVzIikgewogICAgICAgIHZpc2libGVzID0gdmlzaWJsZXMuZmlsdGVyKChwKSA9PgogICAgICAgICAgcC5wZXJtaXNvcy5pbmNsdWRlcygibWFlc3RyYVZpZGEtcHJvZmVzb3IiKQogICAgICAgICk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50aXBvTW9zdHJhclVzdWFyaW9zID09PSAiZXN0dWRpYW50ZXMiKSB7CiAgICAgICAgdmlzaWJsZXMgPSB2aXNpYmxlcy5maWx0ZXIoKHApID0+CiAgICAgICAgICBwLnBlcm1pc29zLmluY2x1ZGVzKCJtYWVzdHJhVmlkYS1lc3R1ZGlhbnRlIikKICAgICAgICApOwogICAgICB9IGVsc2UgaWYgKHRoaXMudGlwb01vc3RyYXJVc3VhcmlvcyA9PT0gImdyYWR1YWRvcyIpIHsKICAgICAgICB2aXNpYmxlcyA9IHZpc2libGVzLmZpbHRlcigocCkgPT4KICAgICAgICAgIHAucGVybWlzb3MuaW5jbHVkZXMoIm1hZXN0cmFWaWRhLWdyYWR1YWRvIikKICAgICAgICApOwogICAgICB9CgogICAgICBpZiAodGhpcy50ZXh0b0J1c3F1ZWRhVXNhZG8pIHsKICAgICAgICB2aXNpYmxlcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICBsZXQgcmVzID0KICAgICAgICAgICAgc3RyaW5nU2ltaWxhcml0eS5jb21wYXJlVHdvU3RyaW5ncygKICAgICAgICAgICAgICBiLm5vbWJyZXMgKyBiLmFwZWxsaWRvcywKICAgICAgICAgICAgICB0aGlzLnRleHRvQnVzcXVlZGFVc2FkbwogICAgICAgICAgICApIC0KICAgICAgICAgICAgc3RyaW5nU2ltaWxhcml0eS5jb21wYXJlVHdvU3RyaW5ncygKICAgICAgICAgICAgICBhLm5vbWJyZXMgKyBhLmFwZWxsaWRvcywKICAgICAgICAgICAgICB0aGlzLnRleHRvQnVzcXVlZGFVc2FkbwogICAgICAgICAgICApOwogICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZpc2libGVzOwogICAgfSwKICB9LAogIHdhdGNoOiB7fSwKfTsK"},{"version":3,"sources":["Personas.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Personas.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"personas\">\n    <router-view> </router-view>\n\n    <div class=\"zonaConfiguracion\">\n      <div class=\"contenedorBloquesConfiguracion\">\n        <div class=\"bloqueConfiguracion\">\n          <div class=\"campoConfiguracion\" id=\"campoUsuariosMostrados\">\n            <span style=\"width: 100%\"> Mostrar:</span>\n            <div class=\"opcion\">\n              <label for=\"mostrarTodos\">Todos</label>\n              <input\n                type=\"radio\"\n                name=\"radioMostrarTodos\"\n                ref=\"mostrarTodos\"\n                value=\"todos\"\n                v-model=\"tipoMostrarUsuarios\"\n                id=\"radioMostrarTodos\"\n              />\n            </div>\n            <div class=\"opcion\">\n              <label for=\"mostrarEstudiantes\">Estudiantes</label>\n              <input\n                type=\"radio\"\n                name=\"radioMostrarEstudiantes\"\n                ref=\"mostrarEstudiantes\"\n                value=\"estudiantes\"\n                v-model=\"tipoMostrarUsuarios\"\n                id=\"radioMostrarEstudiantes\"\n              />\n            </div>\n\n            <div class=\"opcion\">\n              <label for=\"mostrarProfesores\">Profesorxs</label>\n              <input\n                type=\"radio\"\n                name=\"radioMostrarProfesores\"\n                ref=\"mostrarProfesores\"\n                value=\"profesores\"\n                v-model=\"tipoMostrarUsuarios\"\n                id=\"radioMostrarProfesores\"\n              />\n            </div>\n\n            <div class=\"opcion\">\n              <label for=\"mostrarGraduados\">Graduados</label>\n              <input\n                type=\"radio\"\n                name=\"radioMostrarGraduados\"\n                ref=\"mostrarGraduados\"\n                value=\"graduados\"\n                v-model=\"tipoMostrarUsuarios\"\n                id=\"radioMostrarGraduados\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div id=\"zonaBuscar\">\n      <div class=\"barraSuperior\">\n        <input\n          type=\"text\"\n          ref=\"inputBuscar\"\n          v-model=\"textoBuscar\"\n          @input=\"calcularBuscados\"\n          v-show=\"mostrandoInputBuscar\"\n        />\n        <div\n          class=\"boton\"\n          @click=\"iniciarBuscar\"\n          v-show=\"!mostrandoInputBuscar\"\n        >\n          <img src=\"@/assets/iconos/search.svg\" alt=\"Lupa\" />\n        </div>\n\n        <div\n          class=\"boton\"\n          title=\"Cancelar\"\n          @click=\"cancelarBusqueda\"\n          v-show=\"mostrandoInputBuscar\"\n        >\n          <img src=\"@/assets/iconos/equis.svg\" alt=\"Equis\" />\n        </div>\n      </div>\n    </div>\n\n    <div id=\"listaPersonas\" @click=\"idPersonaMenuCx = null\">\n      <loading\n        v-show=\"$apollo.queries.personas.loading\"\n        texto=\"Cargando lista de personas...\"\n      />\n      <persona-vista-lista\n        :seleccionado=\"idPersonaSeleccionada === persona.id\"\n        @click.native=\"idPersonaSeleccionada = persona.id\"\n        :estaPersona=\"persona\"\n        :nodosSolidaridadPublicitados=\"nodosSolidaridadPublicitados\"\n        v-for=\"persona of personasVisibles\"\n        :key=\"persona.id\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from \"./utilidades/Loading.vue\";\nimport PersonaVistaLista from \"./usuario/personaVistaLista.vue\";\nimport debounce from \"debounce\";\n// import { similarity } from \"./utilidades/funciones\";\nvar stringSimilarity = require(\"string-similarity\");\n\nconst charProhibidosPermiso = /[^ a-zA-Z-]/;\n\nexport const QUERY_PERSONAS = gql`\n  query {\n    todosUsuarios {\n      id\n      nombres\n      apellidos\n      permisos\n      username\n    }\n  }\n`;\n\nexport default {\n  name: \"Personas\",\n  components: {\n    Loading,\n    PersonaVistaLista,\n  },\n  apollo: {\n    personas: {\n      query: QUERY_PERSONAS,\n      update: function ({ todosUsuarios }) {\n        return todosUsuarios;\n      },\n      fetchPolicy: \"cache-first\",\n    },\n    nodosSolidaridadPublicitados: {\n      query: gql`\n        query {\n          nodosSolidaridadPublicitados {\n            id\n            nombre\n            responsables\n          }\n        }\n      `,\n    },\n  },\n  data() {\n    return {\n      personas: [],\n      nodosSolidaridadPublicitados: [],\n      idPersonaMenuCx: null,\n      idPersonaSeleccionada: null,\n      tipoMostrarUsuarios: \"todos\",\n\n      permisoInput: \"\",\n      textoBuscar: null,\n      textoBusquedaUsado: null,\n      mostrandoInputBuscar: false,\n      buscados: [],\n\n      debouncingBusqueda: false,\n    };\n  },\n  methods: {\n    copiarId(e) {\n      let str = e.target.innerText.trim();\n      const el = document.createElement(\"textarea\");\n      el.value = str;\n      document.body.appendChild(el);\n      el.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(el);\n    },\n    eliminarPersonaDeDatabase(idPersona) {\n      if (confirm(\"¿Seguro de eliminar a este individuo?\")) {\n        console.log(\n          `Se eliminara una persona con id ${idPersona} de la base de datos`\n        );\n      }\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!) {\n              eliminarUsuario(idUsuario: $idUsuario)\n            }\n          `,\n          variables: {\n            idUsuario: idPersona,\n          },\n          update: (store, { data: { eliminarUsuario } }) => {\n            console.log(`Data: ${eliminarUsuario}`);\n            if (eliminarUsuario) {\n              try {\n                let cache = store.readQuery({\n                  query: QUERY_PERSONAS,\n                  variables: { idUsuario: idPersona },\n                });\n                console.log(`cache: ${cache}`);\n\n                let indexE = cache.todosUsuarios.findIndex(\n                  (p) => p.id == idPersona\n                );\n                if (indexE > -1) {\n                  cache.todosUsuarios.splice(indexE, 1);\n                }\n                console.log(`cache: ${cache}`);\n                store.writeQuery({\n                  query: QUERY_PERSONAS,\n                  variables: { idUsuario: idPersona },\n                  data: cache,\n                });\n              } catch (error) {\n                console.log(`Error actualizando cache. E:${error}`);\n              }\n            }\n          },\n        })\n        .then((res) => {\n          console.log(`Res: ${JSON.stringify(res)}`);\n          if (res.data) {\n            console.log(`Usuario eliminado exitosamente`);\n          }\n        })\n        .catch((error) => {\n          console.log(`Error eliminando usuario: E: ${error}`);\n        });\n    },\n    asignarPermisoTodos() {\n      if (this.permisoIlegal) {\n        console.log(`No enviado`);\n        return;\n      }\n\n      if (!confirm(\"¿Asignar este permiso a todas las personas?\")) return;\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($nuevoPermiso: String!) {\n              asignarPermisoTodosUsuarios(nuevoPermiso: $nuevoPermiso)\n            }\n          `,\n          variables: {\n            nuevoPermiso: this.permisoInput,\n          },\n        })\n        .then(() => {\n          alert(\n            \"Permiso \" + this.permisoInput + \" asignado para todos los usuarios\"\n          );\n        });\n    },\n    iniciarBuscar() {\n      this.mostrandoInputBuscar = true;\n      this.$nextTick(() => {\n        this.$refs.inputBuscar.focus();\n      });\n    },\n    cancelarBusqueda() {\n      this.buscados = [];\n      this.textoBuscar = null;\n      this.mostrandoInputBuscar = false;\n      this.textoBusquedaUsado = null;\n    },\n    calcularBuscados: debounce(function () {\n      console.log(`Setting textoBusquedaUsado`);\n      this.textoBusquedaUsado = this.textoBuscar;\n      // console.log(`Calculando buscados`);\n      // if (!this.textoBuscar) return;\n      // var lista = [];\n      // var texto = this.textoBuscar.trim();\n      // var campoPersonas =\n      //   this.mostrarPersonas === \"profes\"\n      //     ? this.personas.filter((p) =>\n      //         p.permisos.includes(\"maestraVida-profesor\")\n      //       )\n      //     : this.personas;\n\n      // campoPersonas.forEach((persona) => {\n      //   // console.log(`Buscando ${texto} en ${nombreLargo}`);\n      //   var puntajeSimilaridad=similarity(texto, nombreLargo);\n      //   var obj={};\n      //   obj[persona.id]=puntajeSimilaridad;\n      //   lista.push({obj});\n      //   console.log(`BINGO`);\n      // });\n\n      // this.buscados=lista;\n    }, 800),\n  },\n  computed: {\n    opcionesEspecialesPersona: function () {\n      let opciones = [];\n      if (this.usuarioSuperadministrador) {\n        opciones = opciones.concat([\n          {\n            textoVisible: \"Eliminar de la base de datos\",\n            evento: \"eliminandoseDeDatabase\",\n          },\n          {\n            textoVisible: \"resetear contraseña (123456)\",\n            evento: \"reseteandoPass\",\n          },\n        ]);\n      }\n      return opciones;\n    },\n    permisoIlegal() {\n      if (this.permisoInput.length < 1) {\n        return true;\n      }\n      if (charProhibidosPermiso.test(this.permisoInput)) {\n        return true;\n      }\n      return false;\n    },\n    personasVisibles() {\n      var visibles = JSON.parse(JSON.stringify(this.personas));\n      if (this.tipoMostrarUsuarios === \"profesores\") {\n        visibles = visibles.filter((p) =>\n          p.permisos.includes(\"maestraVida-profesor\")\n        );\n      } else if (this.tipoMostrarUsuarios === \"estudiantes\") {\n        visibles = visibles.filter((p) =>\n          p.permisos.includes(\"maestraVida-estudiante\")\n        );\n      } else if (this.tipoMostrarUsuarios === \"graduados\") {\n        visibles = visibles.filter((p) =>\n          p.permisos.includes(\"maestraVida-graduado\")\n        );\n      }\n\n      if (this.textoBusquedaUsado) {\n        visibles.sort((a, b) => {\n          let res =\n            stringSimilarity.compareTwoStrings(\n              b.nombres + b.apellidos,\n              this.textoBusquedaUsado\n            ) -\n            stringSimilarity.compareTwoStrings(\n              a.nombres + a.apellidos,\n              this.textoBusquedaUsado\n            );\n          return res;\n        });\n      }\n\n      return visibles;\n    },\n  },\n  watch: {},\n};\n</script>\n\n<style scoped>\n#listaPersonas {\n  display: flex;\n  padding-bottom: 50px;\n  flex-flow: row wrap;\n}\n#campoUsuariosMostrados{\n  display: flex;\n  flex-wrap: wrap;\n}\n#campoUsuariosMostrados .opcion {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n#zonaBuscar {\n  padding: 10px 5px;\n}\n#zonaBuscar .barraSuperior {\n  display: flex;\n  align-items: center;\n}\n#zonaBuscar .barraSuperior input {\n  font-size: 20px;\n  border: 2px solid gray;\n  border-radius: 5px;\n  padding: 5px;\n  margin-right: 10px;\n}\n\n.personaVistaLista {\n}\n.personaVistaLista:hover {\n  background-color: rgba(128, 128, 128, 0.178);\n}\n\n.loading {\n  margin: 20px auto;\n}\n.botonPermisos {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  padding: 3px;\n  cursor: pointer;\n}\n\n.botonPermisos:hover {\n  background-color: rgba(128, 128, 128, 0.726);\n}\n</style>"]}]}