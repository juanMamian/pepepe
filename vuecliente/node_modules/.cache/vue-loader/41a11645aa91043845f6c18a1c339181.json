{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/personaVistaLista.vue?vue&type=style&index=0&id=1504756e&scoped=true&lang=css&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/personaVistaLista.vue","mtime":1644587546122},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoucGVyc29uYVZpc3RhTGlzdGEgewogIHdpZHRoOiAxMDAlOwogIGZvbnQtZmFtaWx5OiBTYWxzYSwgY3Vyc2l2ZTsKICBjb2xvcjogZ3JheTsKfQoucGVyc29uYVZpc3RhTGlzdGEuc2VsZWNjaW9uYWRvIHsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDEyOCwgMTI4LCAxMjgsIDAuMzQyKTsKfQojYmFycmFTdXBlcmlvciB7CiAgZGlzcGxheTogZmxleDsKICBmb250LXNpemU6IDE1cHg7CiAgcGFkZGluZzogMjVweCAxNXB4OwogIGZsZXgtd3JhcDogd3JhcDsKICB3aWR0aDogMTAwJTsKfQouaWNvbm9QZXJzb25hIHsKICBoZWlnaHQ6IDIwcHg7CiAgd2lkdGg6IDIwcHg7Cn0KLmljb25vUGVyc29uYSBpbWcgewogIGhlaWdodDogMTAwJTsKfQojem9uYU5vbWJyZXMgewogIG1hcmdpbjogMHB4IDE1cHg7Cn0KI2JhcnJhSW5mb0FkaWNpb25hbHsKICBkaXNwbGF5OiBmbGV4Owp9CiNjb250ZW5lZG9yQ29udHJvbGVzUGVyc29uYSB7CiAgbWFyZ2luLWxlZnQ6IGF1dG87Cn0K"},{"version":3,"sources":["personaVistaLista.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"personaVistaLista.vue","sourceRoot":"src/components/usuario","sourcesContent":["<template>\n  <div class=\"personaVistaLista\" :class=\"{ seleccionado }\">\n    <div id=\"barraSuperior\">\n      <div class=\"iconoPersona\">\n        <img\n          src=\"@/assets/iconos/teacher.svg\"\n          alt=\"Profesor\"\n          v-if=\"estaPersona.permisos.includes('maestraVida-profesor')\"\n        />\n        <img\n          src=\"@/assets/iconos/user.svg\"\n          alt=\"Usuario\"\n          v-if=\"!estaPersona.permisos.includes('maestraVida-profesor')\"\n        />\n      </div>\n      <div id=\"zonaNombres\">\n        <div id=\"nombres\">{{ estaPersona.nombres }}</div>\n      </div>\n      <div id=\"zonaApellidos\">\n        <div id=\"apellidos\">{{ estaPersona.apellidos }}</div>\n      </div>\n\n      <div\n        id=\"contenedorControlesPersona\"\n        class=\"contenedorControles\"\n        v-show=\"seleccionado\"\n      >\n        <div\n          class=\"boton selector\"\n          :title=\"\n            mostrando === 'calendario'\n              ? 'Ocultar calendario'\n              : 'Mostrar calendario'\n          \"\n          :class=\"{ activo: mostrando === 'calendario' }\"\n          v-show=\"\n            usuario &&\n            (usuarioProfe ||\n              usuario.id === estaPersona.id ||\n              usuarioSuperadministrador)\n          \"\n          @click=\"mostrando = mostrando === 'calendario' ? null : 'calendario'\"\n        >\n          <img src=\"@/assets/iconos/calendar.svg\" alt=\"calendario\" />\n        </div>\n\n        <div\n          class=\"boton selector\"\n          v-if=\"usuarioSuperadministrador\"\n          :title=\"\n            mostrando === 'administracion'\n              ? 'Ocultar administracion'\n              : 'Mostrar administracion'\n          \"\n          :class=\"{activo:mostrando==='administracion'}\"\n          @click=\"\n            mostrando = mostrando === 'administracion' ? null : 'administracion'\n          \"\n        >\n          <img src=\"@/assets/iconos/cog.svg\" alt=\"Cog\" />\n        </div>\n        <div class=\"boton\" @click=\"alienar\" title=\"alienar\" v-show=\"usuarioProfe || usuarioAdministrador\">\n          <img src=\"@/assets/iconos/alienar.svg\" alt=\"Virus\">\n        </div>\n         <div\n          class=\"boton selector\"\n          v-if=\"usuarioLogeado\"\n          :title=\"\n            mostrando === 'objetivos'\n              ? 'Ocultar objetivos'\n              : 'Mostrar objetivos'\n          \"\n          @click=\"\n            mostrando = mostrando === 'objetivos' ? null : 'objetivos'\n          \"\n          :class=\"{activo:mostrando==='objetivos'}\"\n        >\n          <img src=\"@/assets/iconos/starSolid.svg\" alt=\"Cog\" />\n        </div>\n      </div>\n    </div>\n\n    <div id=\"zonaContenidosMostrando\">\n      <div id=\"zonaAdministracion\" v-show=\"mostrando === 'administracion'\">\n        <div id=\"barraInfoAdicional\" v-show=\"seleccionado\">\n          <div id=\"username\" v-if=\"usuarioSuperadministrador\">\n            {{ estaPersona.username }}\n          </div>\n        </div>\n        <div id=\"contenedorAcciones\" class=\"contenedorControles\">\n          <div\n            class=\"boton\"\n            title=\"Restaurar password (123456)\"\n            v-show=\"!reseteandoPassword\"\n            @click=\"resetearPassword\"\n          >\n            <img src=\"@/assets/iconos/key.svg\" alt=\"Llave\" />\n          </div>\n          <loading texto=\"\" v-show=\"reseteandoPassword\" />\n        </div>\n      </div>\n      <div\n        id=\"zonaCalendario\"\n        class=\"zonaPrimerNivel\"\n        v-if=\"mostrando === 'calendario'\"\n      >\n        <calendario\n          :idUsuarioTarget=\"estaPersona.id\"\n          ref=\"calendario\"\n          enfasis=\"eventosPersonales\"\n        />\n      </div>\n      <div id=\"zonaObjetivos\" class=\"zonaPrimerNivel\" v-if=\"mostrando==='objetivos'\">\n        <ventana-lista\n          ref=\"ventanaLista\"\n          :idNodoRoot=\"estaPersona.id\"\n          tipoNodoRoot=\"usuario\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Calendario from \"../utilidades/Calendario.vue\";\nimport Loading from \"../utilidades/Loading.vue\";\nimport VentanaLista from '../atlasSolidaridad/ventanaLista/ventanaLista.vue';\nexport default {\n  components: { Calendario, Loading, VentanaLista },\n  props: {\n    estaPersona: Object,\n    seleccionado: Boolean,\n  },\n  name: \"PersonaVistaLista\",\n  data() {\n    return {\n      mostrando: null,\n      reseteandoPassword: false,\n      alienando:false,\n    };\n  },\n  methods: {\n    resetearPassword() {\n      if (\n        !confirm(\n          \"¿Confirmar resetear el password de \" + this.estaPersona.nombres + \"?\"\n        )\n      ) {\n        return;\n      }\n      console.log(`Reseteando password usuario`);\n      this.reseteandoPassword = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!) {\n              resetearPasswordUsuario(idUsuario: $idUsuario)\n            }\n          `,\n          variables: {\n            idUsuario: this.estaPersona.id,\n          },\n        })\n        .then(() => {\n          this.reseteandoPassword = false;\n          alert(\"Contraseña reseteada\");\n        })\n        .catch(() => {\n          this.reseteandoPassword = false;\n        });\n    },\n    alienar(){\n      if(!this.usuarioProfe && !this.usuarioSuperadministrador){\n        return;\n      }\n\n      this.alienando=true;\n      this.$apollo.query({\n        query:gql`\n          query($idAlienado:ID!){\n            alienarUsuario(idAlienado: $idAlienado)          \n          }\n        `,\n        variables:{\n          idAlienado:this.estaPersona.id\n        }\n      }).then(({data:{alienarUsuario}})=>{\n        console.log(`Alienando`);\n        this.alienando=true;\n        this.$store.commit(\"logearse\", alienarUsuario);     \n        this.$router.push(\"/miPerfil\");\n      }).catch((error)=>{\n        console.log(`Error: ${error}`);\n        this.alienando=false;\n      })\n    }\n  },\n  watch: {\n    seleccionado(seleccionado) {\n      if (!seleccionado) {\n        this.mostrando = null;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.personaVistaLista {\n  width: 100%;\n  font-family: Salsa, cursive;\n  color: gray;\n}\n.personaVistaLista.seleccionado {\n  background-color: rgba(128, 128, 128, 0.342);\n}\n#barraSuperior {\n  display: flex;\n  font-size: 15px;\n  padding: 25px 15px;\n  flex-wrap: wrap;\n  width: 100%;\n}\n.iconoPersona {\n  height: 20px;\n  width: 20px;\n}\n.iconoPersona img {\n  height: 100%;\n}\n#zonaNombres {\n  margin: 0px 15px;\n}\n#barraInfoAdicional{\n  display: flex;\n}\n#contenedorControlesPersona {\n  margin-left: auto;\n}\n</style>"]}]}