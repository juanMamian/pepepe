{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/visorNodoConocimiento/archivoSeccionNodo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/visorNodoConocimiento/archivoSeccionNodo.vue","mtime":1644587546126},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTG9hZGluZyBmcm9tICcuLi91dGlsaWRhZGVzL0xvYWRpbmcudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgTG9hZGluZyB9LAogIG5hbWU6ICJBcmNoaXZvU2VjY2lvbk5vZG8iLAogIHByb3BzOiB7CiAgICBlc3RlQXJjaGl2bzogT2JqZWN0LAogICAgdXN1YXJpb0V4cGVydG86IEJvb2xlYW4sCiAgICBpZE5vZG86IFN0cmluZywKICAgIGlkU2VjY2lvbjogU3RyaW5nLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVsaW1pbmFuZG9zZTogZmFsc2UsCiAgICAgIG1hcmNhbmRvUHJpbWFyaW86ZmFsc2UsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZWxpbWluYXJzZSgpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9FeHBlcnRvKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghY29uZmlybSgiQm9ycmFuZG8gYXJjaGl2byDCv0NvbnRpbnVhcj8iKSkgewogICAgICAgIGNvbnNvbGUubG9nKGBDYW5jZWxhZG9gKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5lbGltaW5hbmRvc2UgPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBJRCEsICRpZFNlY2Npb246IElEISwgJG5vbWJyZUFyY2hpdm86IFN0cmluZyEpIHsKICAgICAgICAgICAgICBlbGltaW5hckFyY2hpdm9TZWNjaW9uTm9kbygKICAgICAgICAgICAgICAgIGlkTm9kbzogJGlkTm9kbwogICAgICAgICAgICAgICAgaWRTZWNjaW9uOiAkaWRTZWNjaW9uCiAgICAgICAgICAgICAgICBub21icmVBcmNoaXZvOiAkbm9tYnJlQXJjaGl2bwogICAgICAgICAgICAgICkKICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZE5vZG86IHRoaXMuaWROb2RvLAogICAgICAgICAgICBpZFNlY2Npb246IHRoaXMuaWRTZWNjaW9uLAogICAgICAgICAgICBub21icmVBcmNoaXZvOiB0aGlzLmVzdGVBcmNoaXZvLm5vbWJyZSwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoeyBkYXRhOiB7IGVsaW1pbmFyQXJjaGl2b1NlY2Npb25Ob2RvIH0gfSkgPT4gewogICAgICAgICAgdGhpcy5lbGltaW5hbmRvc2UgPSBmYWxzZTsKCiAgICAgICAgICBpZiAoIWVsaW1pbmFyQXJjaGl2b1NlY2Npb25Ob2RvKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBcmNoaXZvIG5vIGVsaW1pbmFkb2ApOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRlbWl0KCJtZUVsaW1pbmUiKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuZWxpbWluYW5kb3NlID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IuIEU6ICR7ZXJyb3J9YCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgbWFyY2FyUHJpbWFyaW8oKXsKICAgICAgdGhpcy5tYXJjYW5kb1ByaW1hcmlvPXRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOmdxbGAKICAgICAgICAgIG11dGF0aW9uKCRpZE5vZG86SUQhLCAkaWRTZWNjaW9uOiBJRCEsICRub21icmVBcmNoaXZvOlN0cmluZyEpewogICAgICAgICAgICBtYXJjYXJQcmltYXJpb0FyY2hpdm9TZWNjaW9uTm9kbyhpZE5vZG86JGlkTm9kbywgaWRTZWNjaW9uOiRpZFNlY2Npb24sIG5vbWJyZUFyY2hpdm86ICRub21icmVBcmNoaXZvKQogICAgICAgICAgfQogICAgICAgIGAsCiAgICAgICAgdmFyaWFibGVzOnsKICAgICAgICAgIGlkTm9kbzogdGhpcy5pZE5vZG8sCiAgICAgICAgICBpZFNlY2Npb246dGhpcy5pZFNlY2Npb24sCiAgICAgICAgICBub21icmVBcmNoaXZvOnRoaXMuZXN0ZUFyY2hpdm8ubm9tYnJlCiAgICAgICAgfQogICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgdGhpcy5tYXJjYW5kb1ByaW1hcmlvPWZhbHNlOwogICAgICAgIHRoaXMuJGVtaXQoJ3NveVByaW1hcmlvJyk7CiAgICAgIH0pLmNhdGNoKCgpPT57CiAgICAgICAgdGhpcy5tYXJjYW5kb1ByaW1hcmlvPWZhbHNlOwogICAgICB9KQogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["archivoSeccionNodo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"archivoSeccionNodo.vue","sourceRoot":"src/components/visorNodoConocimiento","sourcesContent":["<template>\n  <div class=\"archivoSeccionNodo\" :class=\"{deshabilitado: eliminandose}\">\n    <div id=\"barraSuperior\">\n      <div id=\"icono\">\n        <img src=\"@/assets/iconos/file.svg\" alt=\"Archivo\" />\n      </div>\n      <div id=\"nombre\">\n        {{ esteArchivo.nombre }}\n      </div>\n\n      <div\n        class=\"contenedorControles\"\n        style=\"margin-left: auto; margin-right: 10px\"\n      >\n        <div class=\"boton\" title=\"Eliminar\" @click=\"eliminarse\">\n          <img src=\"@/assets/iconos/trash.svg\" alt=\"Basura\" />\n        </div>\n        <div class=\"boton\" @click=\"marcarPrimario\" v-show=\"!esteArchivo.primario && !marcandoPrimario\">\n          <img src=\"@/assets/iconos/arrowUp.svg\" alt=\"Subir\" />\n        </div>\n        <loading texto=\"\" v-show=\"marcandoPrimario\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from '../utilidades/Loading.vue';\nexport default {\n  components: { Loading },\n  name: \"ArchivoSeccionNodo\",\n  props: {\n    esteArchivo: Object,\n    usuarioExperto: Boolean,\n    idNodo: String,\n    idSeccion: String,\n  },\n  data() {\n    return {\n      eliminandose: false,\n      marcandoPrimario:false,\n    };\n  },\n  methods: {\n    eliminarse() {\n      if (!this.usuarioExperto) {\n        return;\n      }\n      if (!confirm(\"Borrando archivo Â¿Continuar?\")) {\n        console.log(`Cancelado`);\n        return;\n      }\n      this.eliminandose = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!, $idSeccion: ID!, $nombreArchivo: String!) {\n              eliminarArchivoSeccionNodo(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                nombreArchivo: $nombreArchivo\n              )\n            }\n          `,\n          variables: {\n            idNodo: this.idNodo,\n            idSeccion: this.idSeccion,\n            nombreArchivo: this.esteArchivo.nombre,\n          },\n        })\n        .then(({ data: { eliminarArchivoSeccionNodo } }) => {\n          this.eliminandose = false;\n\n          if (!eliminarArchivoSeccionNodo) {\n            console.log(`Archivo no eliminado`);\n            return;\n          }\n          this.$emit(\"meElimine\");\n        })\n        .catch((error) => {\n          this.eliminandose = false;\n          console.log(`Error. E: ${error}`);\n        });\n    },\n    marcarPrimario(){\n      this.marcandoPrimario=true;\n      this.$apollo.mutate({\n        mutation:gql`\n          mutation($idNodo:ID!, $idSeccion: ID!, $nombreArchivo:String!){\n            marcarPrimarioArchivoSeccionNodo(idNodo:$idNodo, idSeccion:$idSeccion, nombreArchivo: $nombreArchivo)\n          }\n        `,\n        variables:{\n          idNodo: this.idNodo,\n          idSeccion:this.idSeccion,\n          nombreArchivo:this.esteArchivo.nombre\n        }\n      }).then(()=>{\n        this.marcandoPrimario=false;\n        this.$emit('soyPrimario');\n      }).catch(()=>{\n        this.marcandoPrimario=false;\n      })\n    }\n  },\n};\n</script>\n\n<style scoped>\n.archivoSeccionNodo {\n}\n#barraSuperior {\n  padding: 10px 0px;\n  display: flex;\n  align-items: center;\n}\n#icono {\n  margin-left: 30px;\n  width: 15px;\n  height: 15px;\n}\n#icono img {\n  height: 100%;\n  opacity: 0.7;\n}\n</style>"]}]}