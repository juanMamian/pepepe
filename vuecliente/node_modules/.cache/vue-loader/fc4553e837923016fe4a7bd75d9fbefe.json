{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/PerfilPersonal.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/PerfilPersonal.vue","mtime":1644587546122},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgbWluTGVuZ3RoUGFzc3dvcmQsCiAgbWF4TGVuZ3RoUGFzc3dvcmQsCiAgY2hhclByb2hpYmlkb3NQYXNzd29yZCwKfSBmcm9tICIuL2NvbmZpZ3VyYWNpb24iOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgZ3FsIGZyb20gImdyYXBocWwtdGFnIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAiLi4vdXRpbGlkYWRlcy9Mb2FkaW5nLnZ1ZSI7CmltcG9ydCBWZW50YW5hTGlzdGEgZnJvbSAiLi4vYXRsYXNTb2xpZGFyaWRhZC92ZW50YW5hTGlzdGEvdmVudGFuYUxpc3RhLnZ1ZSI7CmltcG9ydCB7CiAgZnJhZ21lbnRvTm9kb1NvbGlkYXJpZGFkLAogIGZyYWdtZW50b1BlcnNvbmFBdGxhcywKfSBmcm9tICIuLi9hdGxhc1NvbGlkYXJpZGFkL2ZyYWdzIjsKaW1wb3J0IENhbGVuZGFyaW8gZnJvbSAiLi4vdXRpbGlkYWRlcy9DYWxlbmRhcmlvLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IExvYWRpbmcsIFZlbnRhbmFMaXN0YSwgQ2FsZW5kYXJpbyB9LAogIG5hbWU6ICJQZXJmaWxQZXJzb25hbCIsCiAgYXBvbGxvOiB7CiAgICBlc3RlVXN1YXJpbzogewogICAgICBxdWVyeTogZ3FsYAogICAgICAgIHF1ZXJ5IHsKICAgICAgICAgIHlvIHsKICAgICAgICAgICAgbm9tYnJlcwogICAgICAgICAgICBhcGVsbGlkb3MKICAgICAgICAgICAgdXNlcm5hbWUKICAgICAgICAgICAgZW1haWwKICAgICAgICAgICAgbnVtZXJvVGVsCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICBgLAogICAgICB1cGRhdGUoeyB5byB9KSB7CiAgICAgICAgcmV0dXJuIHlvOwogICAgICB9LAogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWNjaW9uOiAiaW5mb3JtYWNpb25QZXJzb25hbCIsCiAgICAgIGVzdGVVc3VhcmlvOiB7CiAgICAgICAgcGVybWlzb3M6IFtdLAogICAgICAgIGlkOiBudWxsLAogICAgICB9LAoKICAgICAgaW5wdXRDdXJyZW50UGFzczogbnVsbCwKICAgICAgbmV3UGFzczogbnVsbCwKICAgICAgbmV3UGFzczI6IG51bGwsCiAgICAgIGVudmlhbmRvQ2FtYmlvUGFzczogZmFsc2UsCgogICAgICB0ZXh0b1Jlc3VsdGFkb0NhbWJpb1Bhc3M6IG51bGwsCgogICAgICBtb3N0cmFuZG9PcGNpb25lc0NyZWFyU3ViTm9kbzogZmFsc2UsCiAgICAgIGNyZWFuZG9TdWJOb2RvOiBmYWxzZSwKICAgICAgdmVyc2lvbkZvdG86MCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaW5wdXRDdXJyZW50UGFzc0lsZWdhbCgpIHsKICAgICAgcmV0dXJuICgKICAgICAgICAhdGhpcy5pbnB1dEN1cnJlbnRQYXNzIHx8CiAgICAgICAgdGhpcy5pbnB1dEN1cnJlbnRQYXNzLmxlbmd0aCA8IG1pbkxlbmd0aFBhc3N3b3JkCiAgICAgICk7CiAgICB9LAogICAgbmV3UGFzc0lsZWdhbCgpIHsKICAgICAgaWYgKAogICAgICAgICF0aGlzLm5ld1Bhc3MgfHwKICAgICAgICB0aGlzLm5ld1Bhc3MubGVuZ3RoIDwgbWluTGVuZ3RoUGFzc3dvcmQgfHwKICAgICAgICB0aGlzLm5ld1Bhc3MubGVuZ3RoID4gbWF4TGVuZ3RoUGFzc3dvcmQgfHwKICAgICAgICBjaGFyUHJvaGliaWRvc1Bhc3N3b3JkLnRlc3QodGhpcy5uZXdQYXNzKQogICAgICApIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIG5ld1Bhc3MySWxlZ2FsKCkgewogICAgICBpZiAoIXRoaXMubmV3UGFzczIgfHwgIXRoaXMubmV3UGFzcyB8fCB0aGlzLm5ld1Bhc3MgIT0gdGhpcy5uZXdQYXNzMikgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBlbnZpYXJDYW1iaW9QYXNzKCkgewogICAgICBpZiAodGhpcy5uZXdQYXNzSWxlZ2FsIHx8IHRoaXMubmV3UGFzczJJbGVnYWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy50ZXh0b1Jlc3VsdGFkb0NhbWJpb1Bhc3MgPSBudWxsOwoKICAgICAgaWYgKHRoaXMubmV3UGFzcyA9PT0gdGhpcy5pbnB1dEN1cnJlbnRQYXNzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLmVudmlhbmRvQ2FtYmlvUGFzcyA9IHRydWU7CgogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uICgkZGl6cXVlQ3VycmVudFBhc3N3b3JkOiBTdHJpbmchLCAkbmV3UGFzc3dvcmQ6IFN0cmluZyEpIHsKICAgICAgICAgICAgICBjYW1iaWFyUGFzc3dvcmQoCiAgICAgICAgICAgICAgICBkaXpxdWVDdXJyZW50UGFzc3dvcmQ6ICRkaXpxdWVDdXJyZW50UGFzc3dvcmQKICAgICAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiAkbmV3UGFzc3dvcmQKICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgZGl6cXVlQ3VycmVudFBhc3N3b3JkOiB0aGlzLmlucHV0Q3VycmVudFBhc3MsCiAgICAgICAgICAgIG5ld1Bhc3N3b3JkOiB0aGlzLm5ld1Bhc3MsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgZGF0YTogeyBjYW1iaWFyUGFzc3dvcmQgfSB9KSA9PiB7CiAgICAgICAgICBpZiAoY2FtYmlhclBhc3N3b3JkKSB7CiAgICAgICAgICAgIGFsZXJ0KCJDb250cmFzZcOxYSBjYW1iaWFkYSIpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5lbnZpYW5kb0NhbWJpb1Bhc3MgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuaW5wdXRDdXJyZW50UGFzcyA9IG51bGw7CiAgICAgICAgICB0aGlzLm5ld1Bhc3MgPSBudWxsOwogICAgICAgICAgdGhpcy5uZXdQYXNzMiA9IG51bGw7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgY2FtYmlhbmRvIHBhc3M6ICR7ZXJyb3J9YCk7CiAgICAgICAgICB0aGlzLmVudmlhbmRvQ2FtYmlvUGFzcyA9IGZhbHNlOwogICAgICAgICAgdGhpcy50ZXh0b1Jlc3VsdGFkb0NhbWJpb1Bhc3MgPSAiRXJyb3IiOwogICAgICAgIH0pOwogICAgfSwKICAgIGFmdGVyQ3JlYXJOb2RvVW5kZXIobnVldm9Ob2RvKSB7CiAgICAgIHRoaXMuJHJlZnMudmVudGFuYUxpc3RhLmFkZE5vZG9Ub05vZG9zU29saWRhcmlkYWQobnVldm9Ob2RvKTsKICAgIH0sCiAgICBjcmVhck51ZXZvTm9kb1VuZGVyKGluZm9Ob2RvKSB7CiAgICAgIGNvbnNvbGUubG9nKGBDcmVhbmRvIG5vZG8gdW5kZXIgeW9gKTsKICAgICAgdGhpcy5jcmVhbmRvU3ViTm9kbyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKAogICAgICAgICAgICAgICRpbmZvTm9kbzogTm9kb1NvbGlkYXJpZGFkSW5wdXQhCiAgICAgICAgICAgICAgJGlkTm9kb1BhcmVudDogSUQhCiAgICAgICAgICAgICAgJHRpcG9QYXJlbnQ6IFN0cmluZyEKICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgY3JlYXJOdWV2b05vZG9Tb2xpZGFyaWRhZFVuZGVyTm9kbygKICAgICAgICAgICAgICAgIGluZm9Ob2RvOiAkaW5mb05vZG8KICAgICAgICAgICAgICAgIGlkTm9kb1BhcmVudDogJGlkTm9kb1BhcmVudAogICAgICAgICAgICAgICAgdGlwb1BhcmVudDogJHRpcG9QYXJlbnQKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIG51ZXZvTm9kbyB7CiAgICAgICAgICAgICAgICAgIC4uLmZyYWdOb2RvU29saWRhcmlkYWQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIG5vZG9zTW9kaWZpY2Fkb3MgewogICAgICAgICAgICAgICAgICAuLi5mcmFnTm9kb1NvbGlkYXJpZGFkCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB1c3Vhcmlvc01vZGlmaWNhZG9zIHsKICAgICAgICAgICAgICAgICAgLi4uZnJhZ1BlcnNvbmFBdGxhcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAke2ZyYWdtZW50b05vZG9Tb2xpZGFyaWRhZH0KICAgICAgICAgICAgJHtmcmFnbWVudG9QZXJzb25hQXRsYXN9CiAgICAgICAgICBgLAogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIGluZm9Ob2RvLAogICAgICAgICAgICBpZE5vZG9QYXJlbnQ6IHRoaXMudXN1YXJpby5pZCwKICAgICAgICAgICAgdGlwb1BhcmVudDogInVzdWFyaW8iLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCh7IGRhdGE6IHsgY3JlYXJOdWV2b05vZG9Tb2xpZGFyaWRhZFVuZGVyTm9kbyB9IH0pID0+IHsKICAgICAgICAgIHRoaXMuY3JlYW5kb1N1Yk5vZG8gPSBmYWxzZTsKICAgICAgICAgIHRoaXMuYWZ0ZXJDcmVhck5vZG9VbmRlcigKICAgICAgICAgICAgY3JlYXJOdWV2b05vZG9Tb2xpZGFyaWRhZFVuZGVyTm9kby5udWV2b05vZG8KICAgICAgICAgICk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmNyZWFuZG9TdWJOb2RvID0gZmFsc2U7CiAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgdXBsb2FkTnVldmFGb3RvKGUpIHsKICAgICAgY29uc29sZS5sb2coYFVwbG9hZGluZyBmb3RvYCk7CiAgICAgIGNvbnN0IGlucHV0QXJjaGl2byA9IGUudGFyZ2V0OwogICAgICB2YXIgZGF0b3MgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgY29uc3QgbnVldm9BcmNoaXZvID0gaW5wdXRBcmNoaXZvLmZpbGVzWzBdOwoKICAgICAgZGF0b3MuYXBwZW5kKCJudWV2YUZvdG8iLCBudWV2b0FyY2hpdm8pOwogICAgICB0aGlzLnN1YmllbmRvTnVldmFGb3RvID0gdHJ1ZTsKICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHVybDogdGhpcy5zZXJ2ZXJVcmwgKyAiL2FwaS91c3Vhcmlvcy91cGRhdGVGb3RvIiwKICAgICAgICBkYXRhOiBkYXRvcywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiLAogICAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4sCiAgICAgICAgfSwKICAgICAgfSkKICAgICAgICAudGhlbigoeyBkYXRhOiB7IHJlc3VsdGFkbyB9IH0pID0+IHsKICAgICAgICAgIHRoaXMuc3ViaWVuZG9OdWV2YUZvdG8gPSBmYWxzZTsgICAgICAgICAgCiAgICAgICAgICBpZihyZXN1bHRhZG8pewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRm90byBhY3R1YWxpemFkYWApOwogICAgICAgICAgICB0aGlzLnZlcnNpb25Gb3RvKys7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLnN1YmllbmRvTnVldmFGb3RvID0gZmFsc2U7ICAgICAgICAgIAogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIHN1YmllbmRvIGFyY2hpdm8uIEU6ICR7ZXJyb3J9YCk7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["PerfilPersonal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PerfilPersonal.vue","sourceRoot":"src/components/usuario","sourcesContent":["<template>\n  <div class=\"perfilPersonal\" v-if=\"usuarioLogeado\">\n    <loading texto=\"Cargando\" v-show=\"$apollo.queries.esteUsuario.loading\" />\n    <div id=\"zonaSelectores\" class=\"contenedorControles\">\n      <div\n        class=\"boton\"\n        title=\"Información personal\"\n        @click=\"seccion = 'informacionPersonal'\"\n      >\n        <img src=\"@/assets/iconos/info.svg\" alt=\"Informacion\" />\n      </div>\n      <div\n        class=\"boton\"\n        title=\"Cambiar contraseña\"\n        @click=\"seccion = 'cambiarPass'\"\n      >\n        <img src=\"@/assets/iconos/key.svg\" alt=\"Pass\" />\n      </div>\n      <div\n        class=\"boton\"\n        title=\"Mis objetivos y trabajos\"\n        @click=\"seccion = 'misNodos'\"\n      >\n        <img src=\"@/assets/iconos/starSolid.svg\" alt=\"Estrella\" />\n      </div>\n      <div class=\"boton\" title=\"Mi calendario\" @click=\"seccion = 'calendario'\">\n        <img src=\"@/assets/iconos/calendar.svg\" alt=\"Calendario\" />\n      </div>\n    </div>\n    <div id=\"contenido\" v-if=\"!$apollo.queries.esteUsuario.loading\">\n      <div\n        id=\"zonaInformacionPersonal\"\n        v-show=\"seccion === 'informacionPersonal'\"\n      >\n        <div id=\"fotografia\" @click=\"$refs.inputFotoUsuario.click()\">\n          <img\n            :src=\"this.serverUrl + '/api/usuarios/fotografias/' + usuario.id+'?v='+versionFoto\"\n            alt=\"Fotografía\"\n          />\n          <input\n            type=\"file\"\n            ref=\"inputFotoUsuario\"\n            v-show=\"false\"\n            @change=\"uploadNuevaFoto\"\n          />\n        </div>\n        <div id=\"zonaCamposEditablesInformacionPersonal\">\n          <div\n            class=\"informacionPersonal\"\n            id=\"nombres\"\n            style=\"align-self: center\"\n          >\n            {{ esteUsuario.nombres }}\n          </div>\n          <div\n            class=\"informacionPersonal\"\n            id=\"apellidos\"\n            style=\"align-self: center\"\n          >\n            {{ esteUsuario.apellidos }}\n          </div>\n          <div class=\"informacionPersonal\" id=\"email\">\n            <img\n              src=\"@/assets/iconos/envelope.svg\"\n              alt=\"Mail\"\n              class=\"iconoInformacionPersonal\"\n              title=\"Correo electrónico\"\n            />\n            <span> {{ esteUsuario.email }}</span>\n          </div>\n          <img\n            src=\"@/assets/iconos/whatsapp.svg\"\n            alt=\"Mail\"\n            class=\"iconoInformacionPersonal\"\n            title=\"Añdir un número móvil\"\n          />\n          <div\n            class=\"informacionPersonal numeroMovil\"\n            v-for=\"numeroMovil of esteUsuario.numerosMovil\"\n            :key=\"numeroMovil.id\"\n          >\n            <span>\n              {{ esteUsuario.numeroMovil }}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div id=\"zonaCambiarPass\" v-show=\"seccion === 'cambiarPass'\">\n        <div class=\"tituloSeccion\">Cambio de contraseña</div>\n        <input\n          v-model=\"inputCurrentPass\"\n          placeholder=\"Contraseña actual\"\n          type=\"password\"\n          id=\"inputCurrentPass\"\n          class=\"inputCambiarPass\"\n        />\n        <div\n          id=\"instruccionesNuevoPass\"\n          v-show=\"newPassIlegal && !inputCurrentPassIlegal\"\n        >\n          La contraseña debe tener al menos 8 caracteres y no contener espacios.\n        </div>\n        <input\n          v-model=\"newPass\"\n          v-show=\"!inputCurrentPassIlegal\"\n          placeholder=\"Nueva contraseña\"\n          type=\"password\"\n          id=\"inputNuevoPass\"\n          class=\"inputCambiarPass\"\n          :class=\"{ aprobado: !newPassIlegal }\"\n        />\n        <input\n          :disabled=\"newPassIlegal\"\n          v-model=\"newPass2\"\n          v-show=\"!newPassIlegal\"\n          placeholder=\"Nueva contraseña (Otra vez)\"\n          type=\"password\"\n          id=\"inputNuevoPass2\"\n          class=\"inputCambiarPass\"\n          :class=\"{ aprobado: !newPassIlegal && !newPass2Ilegal }\"\n          @keypress.enter=\"enviarCambioPass\"\n        />\n\n        <div\n          id=\"botonEnviarNuevoPass\"\n          @click=\"enviarCambioPass\"\n          :class=\"{\n            deshabilitado:\n              newPassIlegal || newPass2Ilegal || enviandoCambioPass,\n          }\"\n        >\n          <span> Enviar</span><loading texto=\"\" v-show=\"enviandoCambioPass\" />\n        </div>\n\n        <div id=\"textoResultadoCambioPass\">\n          {{ textoResultadoCambioPass }}\n        </div>\n      </div>\n\n      <div id=\"zonaMisNodos\" v-show=\"seccion === 'misNodos'\">\n        <div class=\"barraSuperiorGeneral\">\n          <div class=\"tituloBloque\">Mis Nodos</div>\n          <div class=\"controlesBloque\" id=\"controlesRecursosExternos\">\n            <div\n              class=\"botonBarraSuperiorGeneral\"\n              @click=\"mostrandoOpcionesCrearSubNodo = true\"\n              v-show=\"!mostrandoOpcionesCrearSubNodo\"\n            >\n              <img\n                src=\"@/assets/iconos/plusCircle.svg\"\n                alt=\"Nuevo\"\n                title=\"Crear nuevo nodo\"\n                :class=\"{ deshabilitado: creandoSubNodo }\"\n              />\n              <loading texto=\"\" v-show=\"creandoSubNodo\" />\n            </div>\n            <div\n              id=\"contenedorOpcionesCrear\"\n              v-show=\"mostrandoOpcionesCrearSubNodo\"\n              :class=\"{ deshabilitado: creandoSubNodo }\"\n            >\n              <img\n                src=\"@/assets/iconos/starSolid.svg\"\n                alt=\"Objetivo\"\n                title=\"Crear nuevo objetivo\"\n                class=\"botonBarraSuperiorGeneral opcionCrear\"\n                @click=\"crearNuevoNodoUnder({ tipoNodo: 'objetivo' })\"\n              />\n              <img\n                src=\"@/assets/iconos/cog.svg\"\n                alt=\"Trabajo\"\n                title=\"Crear nuevo trabajo\"\n                class=\"botonBarraSuperiorGeneral opcionCrear\"\n                @click=\"crearNuevoNodoUnder({ tipoNodo: 'trabajo' })\"\n              />\n              <loading texto=\"\" v-show=\"creandoSubNodo\" />\n            </div>\n          </div>\n        </div>\n        <ventana-lista\n          ref=\"ventanaLista\"\n          :idNodoRoot=\"usuario.id\"\n          tipoNodoRoot=\"usuario\"\n        />\n      </div>\n\n      <div id=\"zonaCalendario\" v-if=\"seccion === 'calendario'\">\n        <calendario\n          v-if=\"usuarioLogeado\"\n          :enfasis=\"'eventosPersonales'\"\n          :idUsuarioTarget=\"this.usuario.id\"\n        />\n      </div>\n    </div>\n\n    <router-view />\n  </div>\n</template>\n\n<script>\nimport {\n  minLengthPassword,\n  maxLengthPassword,\n  charProhibidosPassword,\n} from \"./configuracion\";\nimport axios from \"axios\";\nimport gql from \"graphql-tag\";\nimport Loading from \"../utilidades/Loading.vue\";\nimport VentanaLista from \"../atlasSolidaridad/ventanaLista/ventanaLista.vue\";\nimport {\n  fragmentoNodoSolidaridad,\n  fragmentoPersonaAtlas,\n} from \"../atlasSolidaridad/frags\";\nimport Calendario from \"../utilidades/Calendario.vue\";\nexport default {\n  components: { Loading, VentanaLista, Calendario },\n  name: \"PerfilPersonal\",\n  apollo: {\n    esteUsuario: {\n      query: gql`\n        query {\n          yo {\n            nombres\n            apellidos\n            username\n            email\n            numeroTel\n          }\n        }\n      `,\n      update({ yo }) {\n        return yo;\n      },\n    },\n  },\n  data() {\n    return {\n      seccion: \"informacionPersonal\",\n      esteUsuario: {\n        permisos: [],\n        id: null,\n      },\n\n      inputCurrentPass: null,\n      newPass: null,\n      newPass2: null,\n      enviandoCambioPass: false,\n\n      textoResultadoCambioPass: null,\n\n      mostrandoOpcionesCrearSubNodo: false,\n      creandoSubNodo: false,\n      versionFoto:0,\n    };\n  },\n  computed: {\n    inputCurrentPassIlegal() {\n      return (\n        !this.inputCurrentPass ||\n        this.inputCurrentPass.length < minLengthPassword\n      );\n    },\n    newPassIlegal() {\n      if (\n        !this.newPass ||\n        this.newPass.length < minLengthPassword ||\n        this.newPass.length > maxLengthPassword ||\n        charProhibidosPassword.test(this.newPass)\n      ) {\n        return true;\n      }\n\n      return false;\n    },\n    newPass2Ilegal() {\n      if (!this.newPass2 || !this.newPass || this.newPass != this.newPass2) {\n        return true;\n      }\n      return false;\n    },\n  },\n  methods: {\n    enviarCambioPass() {\n      if (this.newPassIlegal || this.newPass2Ilegal) {\n        return;\n      }\n      this.textoResultadoCambioPass = null;\n\n      if (this.newPass === this.inputCurrentPass) {\n        return;\n      }\n\n      this.enviandoCambioPass = true;\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($dizqueCurrentPassword: String!, $newPassword: String!) {\n              cambiarPassword(\n                dizqueCurrentPassword: $dizqueCurrentPassword\n                newPassword: $newPassword\n              )\n            }\n          `,\n          variables: {\n            dizqueCurrentPassword: this.inputCurrentPass,\n            newPassword: this.newPass,\n          },\n        })\n        .then(({ data: { cambiarPassword } }) => {\n          if (cambiarPassword) {\n            alert(\"Contraseña cambiada\");\n          }\n          this.enviandoCambioPass = false;\n          this.inputCurrentPass = null;\n          this.newPass = null;\n          this.newPass2 = null;\n        })\n        .catch((error) => {\n          console.log(`Error cambiando pass: ${error}`);\n          this.enviandoCambioPass = false;\n          this.textoResultadoCambioPass = \"Error\";\n        });\n    },\n    afterCrearNodoUnder(nuevoNodo) {\n      this.$refs.ventanaLista.addNodoToNodosSolidaridad(nuevoNodo);\n    },\n    crearNuevoNodoUnder(infoNodo) {\n      console.log(`Creando nodo under yo`);\n      this.creandoSubNodo = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation (\n              $infoNodo: NodoSolidaridadInput!\n              $idNodoParent: ID!\n              $tipoParent: String!\n            ) {\n              crearNuevoNodoSolidaridadUnderNodo(\n                infoNodo: $infoNodo\n                idNodoParent: $idNodoParent\n                tipoParent: $tipoParent\n              ) {\n                nuevoNodo {\n                  ...fragNodoSolidaridad\n                }\n                nodosModificados {\n                  ...fragNodoSolidaridad\n                }\n                usuariosModificados {\n                  ...fragPersonaAtlas\n                }\n              }\n            }\n            ${fragmentoNodoSolidaridad}\n            ${fragmentoPersonaAtlas}\n          `,\n          variables: {\n            infoNodo,\n            idNodoParent: this.usuario.id,\n            tipoParent: \"usuario\",\n          },\n        })\n        .then(({ data: { crearNuevoNodoSolidaridadUnderNodo } }) => {\n          this.creandoSubNodo = false;\n          this.afterCrearNodoUnder(\n            crearNuevoNodoSolidaridadUnderNodo.nuevoNodo\n          );\n        })\n        .catch((error) => {\n          this.creandoSubNodo = false;\n          console.log(`Error: ${error}`);\n        });\n    },\n    uploadNuevaFoto(e) {\n      console.log(`Uploading foto`);\n      const inputArchivo = e.target;\n      var datos = new FormData();\n      const nuevoArchivo = inputArchivo.files[0];\n\n      datos.append(\"nuevaFoto\", nuevoArchivo);\n      this.subiendoNuevaFoto = true;\n      axios({\n        method: \"post\",\n        url: this.serverUrl + \"/api/usuarios/updateFoto\",\n        data: datos,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: \"Bearer \" + this.$store.state.token,\n        },\n      })\n        .then(({ data: { resultado } }) => {\n          this.subiendoNuevaFoto = false;          \n          if(resultado){\n            console.log(`Foto actualizada`);\n            this.versionFoto++;\n          }\n        })\n        .catch((error) => {\n          this.subiendoNuevaFoto = false;          \n          console.log(`Error subiendo archivo. E: ${error}`);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.perfilPersonal {\n}\n\n#contenido {\n  width: 100%;\n}\n#zonaInformacionPersonal {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n#fotografia {\n  width: 200px;\n  height: 200px;\n  border-radius: 50%;\n  overflow: hidden;\n  margin: 8vh 0px;\n  margin-bottom: 2vh;\n}\n#fotografia img {\n  width: 100%;\n  height: 100%;\n}\n#apellidos {\n  margin-bottom: 30px;\n}\n#zonaCamposEditablesInformacionPersonal {\n  display: flex;\n  flex-direction: column;\n  width: min(300px, 90vw);\n}\n.informacionPersonal {\n  margin: 10px 0px;\n  display: flex;\n  align-items: center;\n}\n#nombres {\n  margin-bottom: 0px;\n}\n.iconoInformacionPersonal {\n  width: 20px;\n  margin-right: 10px;\n}\n\n#zonaSelectores .boton {\n  margin: 0px min(10px, 2%);\n}\n\n.tituloSeccion {\n  font-size: 22px;\n  text-align: center;\n  margin-bottom: 8vh;\n}\n\n#zonaCambiarPass {\n  display: flex;\n  flex-direction: column;\n  margin-top: 5vh;\n}\n#instruccionesNuevoPass {\n  font-size: 11px;\n  font-style: italic;\n  color: rgb(78, 78, 78);\n  text-align: center;\n}\n.inputCambiarPass {\n  margin: 15px auto;\n  font-size: 20px;\n  width: min(300px, 90%);\n  font-family: Poppins, Helvetica, Arial, sans-serif;\n  border-radius: 7px;\n  padding: 3px 10px;\n}\n.inputCambiarPass.aprobado {\n  border-color: var(--mainColorLight);\n  border-style: solid;\n  background-color: #6da83236;\n}\n.inputCambiarPass.aprobado:active {\n  border-color: var(--mainColorDark) !important;\n}\n#inputCurrentPass {\n  margin-bottom: 50px;\n}\n#textoResultadoCambioPass {\n  font-size: 13px;\n  font-style: italic;\n  text-align: center;\n}\n#botonEnviarNuevoPass {\n  border-radius: 30px;\n  height: 60px;\n  width: 200px;\n  background-color: var(--mainColorLight);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 60px auto;\n  color: whitesmoke;\n}\n#botonEnviarNuevoPass:hover {\n  background-color: var(--mainColorDark);\n}\n\n#zonaMisNodos {\n  width: min(900px, 90%);\n  margin: 10px auto;\n}\n.tituloBloque {\n  font-weight: bold;\n  font-size: 14px;\n}\n.barraSuperiorGeneral {\n  height: 30px;\n  display: flex;\n  padding: 5px 20px;\n}\n.botonBarraSuperiorGeneral {\n  opacity: 0.7;\n  height: 15px;\n  box-sizing: border-box;\n  user-select: none;\n  cursor: pointer;\n}\n.botonBarraSuperiorGeneral:hover {\n  opacity: 1;\n}\n.botonBarraSuperiorGeneral img {\n  height: 100%;\n}\n.opcionCrear {\n  margin: 0px 5px;\n}\n.controlesBloque {\n  margin-left: auto;\n  display: flex;\n}\n</style>"]}]}