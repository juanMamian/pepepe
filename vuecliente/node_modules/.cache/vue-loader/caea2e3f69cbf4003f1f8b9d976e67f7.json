{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/NodoConocimiento.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/NodoConocimiento.vue","mtime":1675186564539},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTG9hZGluZyBmcm9tICIuLi91dGlsaWRhZGVzL0xvYWRpbmcudnVlIjsKaW1wb3J0IHsgZnJhZ21lbnRvRGF0b05vZG9Db25vY2ltaWVudG8gfSBmcm9tICIuL2ZyYWdzQXRsYXNDb25vY2ltaWVudG8iOwppbXBvcnQgeyBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TIH0gZnJvbSAiLi9BdGxhc0Nvbm9jaW1pZW50by52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBMb2FkaW5nIH0sCiAgbmFtZTogIk5vZG9Db25vY2ltaWVudG8iLAogIHByb3BzOiB7CiAgICBlc3RlTm9kbzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKICAgIGRhdG9zVXN1YXJpb0VzdGVOb2RvOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgIH0sCiAgICBlbnZpYW5kb1F1ZXJ5VGFyZ2V0OiBCb29sZWFuLAogICAgZXNOb2RvT2JqZXRpdm86IEJvb2xlYW4sCiAgICBlc1RhcmdldDogQm9vbGVhbiwKICAgIHlvOiBPYmplY3QsCiAgICBtb2RvQXRsYXM6IFN0cmluZywKICAgIGVzY29uZGlkbzogQm9vbGVhbiwKICAgIGNlbnRyb1Zpc3RhOiBPYmplY3QsCiAgICBpZE5vZG9NZW51Q3g6IFN0cmluZywKICAgIGlkc05vZG9zQXByZW5kaWRvczogQXJyYXksCiAgICBpZHNOb2Rvc0VzdHVkaWFkb3M6IEFycmF5LAogICAgaWRzTm9kb3NGcmVzY29zOiBBcnJheSwKICAgIGlkc05vZG9zUHJlc2VudGVzQ2FiZXphOiBBcnJheSwKICAgIGlkc05vZG9zUmVwYXNhcjpBcnJheSwKICAgIG5vZG9TZWxlY2Npb25hZG86IE9iamVjdCwKICAgIHNlbGVjY2lvbmFkbzogQm9vbGVhbiwKICAgIGZhbnRhc21lYWRvOiBCb29sZWFuLAogICAgcHJldmlvRGVTZWxlY2Npb25hZG86IEJvb2xlYW4sCiAgICB1c3VhcmlvQWRtaW5pc3RyYWRvckF0bGFzOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIGVzcXVpbmFzRGlhZ3JhbWE6IE9iamVjdCwKICAgIGNhbGxpbmdQb3NpY2lvbmVzOiBCb29sZWFuLAogICAgZmFjdG9yWm9vbTogTnVtYmVyLAogICAgY29uZmlndXJhY2lvbkF0bGFzOiBPYmplY3QsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXJyYXN0cmFuZG9Ob2RvOiBmYWxzZSwKICAgICAgbm9tYnJlRWRpdGFibGU6IGZhbHNlLAogICAgICBub21icmVFZGl0YW5kb3NlOiBmYWxzZSwKCiAgICAgIGJhc2VTaXplOiB7CiAgICAgICAgeDogNTAsCiAgICAgICAgeTogNTAsCiAgICAgIH0sCgogICAgICBwb3NpY2lvbjogewogICAgICAgIHg6IDAsCiAgICAgICAgeTogMCwKICAgICAgfSwKICAgICAgdG9nZ2xpbmdOb2RvRW5Db2xlY2Npb246IG51bGwsCgogICAgICBlc3RpbG9Ob21icmVCYXNlOiB7CiAgICAgICAgbWluV2lkdGg6IDIwLAogICAgICAgIGZvbnRTaXplOiAxMiwKICAgICAgICBtaW5IZWlnaHQ6IDEwLAogICAgICAgIHBhZGRpbmc6IDUsCiAgICAgICAgYm9yZGVyUmFkaXVzOiA0LAogICAgICB9LAogICAgICBtb3N0cmFyRGVzY3JpcGNpb246IGZhbHNlLAogICAgICBjcmVhbmRvSXRlcmFjaW9uUmVwYXNvOiBmYWxzZSwKCiAgICAgIGVudmlhbmRvRmVjaGFFc3R1ZGlhZG86IGZhbHNlLAogICAgICB0b2dnbGluZ0FwcmVuZGlkbzogZmFsc2UsCgogICAgICBzZXR0aW5nVGlwb05vZG86IGZhbHNlLAoKICAgICAgZWRpdGFuZG9EaWFzUmVwYXNvOiBmYWxzZSwKICAgICAgc2V0dGluZ1BlcmlvZG9SZXBhc286IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBtZW51Q3goKSB7CiAgICAgIHJldHVybiB0aGlzLmlkTm9kb01lbnVDeCA9PSB0aGlzLmVzdGVOb2RvLmlkID8gdHJ1ZSA6IGZhbHNlOwogICAgfSwKICAgIHNpemUoKSB7CiAgICAgIGxldCBmU2l6ZSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYmFzZVNpemUpOwogICAgICBpZiAodGhpcy5zZWxlY2Npb25hZG8pIHsKICAgICAgICBsZXQgYmFzZVggPSB0aGlzLmJhc2VTaXplLng7CiAgICAgICAgbGV0IGJhc2VZID0gdGhpcy5iYXNlU2l6ZS55OwogICAgICAgIGZTaXplLnggPSBNYXRoLnJvdW5kKGJhc2VYICogMS4xKTsKICAgICAgICBmU2l6ZS55ID0gTWF0aC5yb3VuZChiYXNlWSAqIDEuMSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHsgLi4uZlNpemUgfTsKICAgIH0sCiAgICBlc3RpbG9Qb3NpY2lvbigpIHsKICAgICAgLy9Qb3NpY2lvbiBhanVzdGFkYSBhIGxhcyBlc3F1aW5hcyBkZWwgZGlhZ3JhbWE6CiAgICAgIGNvbnN0IHBvc1hBanVzdGFkYSA9IHRoaXMucG9zaWNpb24ueCAtIHRoaXMuZXNxdWluYXNEaWFncmFtYS54MTsKICAgICAgY29uc3QgcG9zWUFqdXN0YWRhID0gdGhpcy5wb3NpY2lvbi55IC0gdGhpcy5lc3F1aW5hc0RpYWdyYW1hLnkxOwoKICAgICAgLy9Qb3NpY2lvbiBhYnNvbHV0YQogICAgICBjb25zdCBwb3NZID0gTWF0aC5yb3VuZCgKICAgICAgICAocG9zWUFqdXN0YWRhIC0gdGhpcy5zaXplLnkgLyAyKSAqIHRoaXMuZmFjdG9yWm9vbQogICAgICApOwogICAgICBjb25zdCBwb3NYID0gTWF0aC5yb3VuZCgKICAgICAgICAocG9zWEFqdXN0YWRhIC0gdGhpcy5zaXplLnggLyAyKSAqIHRoaXMuZmFjdG9yWm9vbQogICAgICApOwoKICAgICAgLy9BanVzdGFyIHJlc3BlY3RvIGRlbCBjZW50cm8gZGUgbGEgdmlzdGEKICAgICAgLy8gcG9zWSAtPSB0aGlzLmNlbnRyb1Zpc3RhLnk7CiAgICAgIC8vIHBvc1ggLT0gdGhpcy5jZW50cm9WaXN0YS54OwogICAgICByZXR1cm4gewogICAgICAgIHRvcDogcG9zWSArICJweCIsCiAgICAgICAgbGVmdDogcG9zWCArICJweCIsCiAgICAgIH07CiAgICB9LAogICAgZXN0aWxvWmV0YSgpIHsKICAgICAgbGV0IHZhbG9yWiA9IDA7CiAgICAgIGlmICh0aGlzLmFycmFzdHJhbmRvTm9kbyB8fCB0aGlzLnNlbGVjY2lvbmFkbykgewogICAgICAgIHZhbG9yWiA9IDEwOwogICAgICB9CiAgICAgIGlmICh0aGlzLm1lbnVDeCkgewogICAgICAgIHZhbG9yWiA9IDExOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgekluZGV4OiB2YWxvclosCiAgICAgIH07CiAgICB9LAogICAgZXN0aWxvU2l6ZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogdGhpcy5zaXplLnggKiB0aGlzLmZhY3Rvclpvb20gKyAicHgiLAogICAgICAgIGhlaWdodDogdGhpcy5zaXplLnkgKiB0aGlzLmZhY3Rvclpvb20gKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIHBlcm1pc29zVXN1YXJpbzogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXN1YXJpby5wZXJtaXNvczsKICAgIH0sCiAgICBhcHJlbmRpYmxlKCkgewogICAgICBpZiAoIXRoaXMuZXN0ZU5vZG8udmluY3Vsb3Muc29tZSgodikgPT4gdi5yb2wgPT0gInRhcmdldCIpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgdmFyIGlkc05lY2VzYXJpb3MgPSB0aGlzLmVzdGVOb2RvLnZpbmN1bG9zCiAgICAgICAgLmZpbHRlcigodikgPT4gdi5yb2wgPT0gInRhcmdldCIpCiAgICAgICAgLm1hcCgodikgPT4gdi5pZFJlZik7CiAgICAgIHJldHVybiBpZHNOZWNlc2FyaW9zLmV2ZXJ5KChpZCkgPT4KICAgICAgICB0aGlzLmlkc05vZG9zUHJlc2VudGVzQ2FiZXphLmluY2x1ZGVzKGlkKQogICAgICApOwogICAgfSwKICAgIG5vZG9BcHJlbmRpZG8oKSB7CiAgICAgIHJldHVybiB0aGlzLmlkc05vZG9zQXByZW5kaWRvcy5pbmNsdWRlcyh0aGlzLmVzdGVOb2RvLmlkKTsKICAgIH0sCiAgICBub2RvRXN0dWRpYWRvKCkgewogICAgICByZXR1cm4gdGhpcy5pZHNOb2Rvc0VzdHVkaWFkb3MuaW5jbHVkZXModGhpcy5lc3RlTm9kby5pZCk7CiAgICB9LAogICAgbm9kb1JlcGFzYXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmlkc05vZG9zUmVwYXNhci5pbmNsdWRlcyh0aGlzLmVzdGVOb2RvLmlkKTsKICAgIH0sCiAgICBub2RvUHJlc2VudGVDYWJlemEoKSB7CiAgICAgIHJldHVybiB0aGlzLmlkc05vZG9zUHJlc2VudGVzQ2FiZXphLmluY2x1ZGVzKHRoaXMuZXN0ZU5vZG8uaWQpOwogICAgfSwKICAgIGVzdGlsb0NhcnRlbE5vbWJyZSgpIHsKICAgICAgdmFyIGJDb2xvciA9ICJ2YXIoLS1hdGxhc0Nvbm9jaW1pZW50b09mZikiOwogICAgICB2YXIgY29sb3IgPSAiYmxhY2siOwogICAgICBpZiAodGhpcy5tb2RvQXRsYXMgPT09ICJlc3R1ZGlhbnRlIikgewogICAgICAgIGlmICh0aGlzLm5vZG9QcmVzZW50ZUNhYmV6YSkgewogICAgICAgICAgYkNvbG9yID0gInZhcigtLWF0bGFzQ29ub2NpbWllbnRvQ2hlY2spIjsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMubm9kb1JlcGFzYXIpIHsKICAgICAgICAgIGJDb2xvciA9ICJ2YXIoLS1hdGxhc0Nvbm9jaW1pZW50b1JlcGFzbykiOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5hcHJlbmRpYmxlKSB7CiAgICAgICAgICBiQ29sb3IgPSAidmFyKC0tYXRsYXNDb25vY2ltaWVudG9BdmFpbGFibGUpIjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29sb3IgPSAiIzMxMzEzMSI7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMubW9kb0F0bGFzID09PSAiZXhwZXJ0byIpIHsKICAgICAgICBpZiAodGhpcy51c3VhcmlvRXhwZXJ0b05vZG8pIHsKICAgICAgICAgIGJDb2xvciA9ICJ2YXIoLS1hdGxhc0Nvbm9jaW1pZW50b0NoZWNrKSI7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGJhY2tncm91bmRDb2xvcjogYkNvbG9yLAogICAgICAgIGNvbG9yLAogICAgICAgIG1pbldpZHRoOgogICAgICAgICAgcGFyc2VJbnQodGhpcy5lc3RpbG9Ob21icmVCYXNlLm1pbldpZHRoICogdGhpcy5mYWN0b3Jab29tKSArICJweCIsCiAgICAgICAgZm9udFNpemU6CiAgICAgICAgICBwYXJzZUludCh0aGlzLmVzdGlsb05vbWJyZUJhc2UuZm9udFNpemUgKiB0aGlzLmZhY3Rvclpvb20pICsgInB4IiwKICAgICAgICBtaW5IZWlnaHQ6CiAgICAgICAgICBwYXJzZUludCh0aGlzLmVzdGlsb05vbWJyZUJhc2UubWluSGVpZ2h0ICogdGhpcy5mYWN0b3Jab29tKSArICJweCIsCiAgICAgICAgcGFkZGluZzoKICAgICAgICAgIHBhcnNlSW50KHRoaXMuZXN0aWxvTm9tYnJlQmFzZS5wYWRkaW5nICogdGhpcy5mYWN0b3Jab29tKSArICJweCIsCiAgICAgICAgYm9yZGVyUmFkaXVzOgogICAgICAgICAgcGFyc2VJbnQodGhpcy5lc3RpbG9Ob21icmVCYXNlLmJvcmRlclJhZGl1cyAqIHRoaXMuZmFjdG9yWm9vbSkgKyAicHgiLAogICAgICB9OwogICAgfSwKICAgIHVzdWFyaW9FeHBlcnRvTm9kbygpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW8gfHwgIXRoaXMudXN1YXJpby5pZCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5lc3RlTm9kby5leHBlcnRvcy5pbmNsdWRlcyh0aGlzLnVzdWFyaW8uaWQpOwogICAgfSwKICAgIGVzdGlsb0Z1ZXJ6YUNlbnRyb01hc2EoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6CiAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMuZXN0ZU5vZG8uZnVlcnphQ2VudHJvTWFzYS5mdWVyemEgKiB0aGlzLmZhY3Rvclpvb20pICsKICAgICAgICAgICJweCIsCiAgICAgICAgaGVpZ2h0OiBNYXRoLnJvdW5kKDMgKiB0aGlzLmZhY3Rvclpvb20pICsgInB4IiwKICAgICAgICB0cmFuc2Zvcm06CiAgICAgICAgICAicm90YXRlKCIgKyB0aGlzLmVzdGVOb2RvLmZ1ZXJ6YUNlbnRyb01hc2EuZGlyZWNjaW9uICsgInJhZCkiLAogICAgICB9OwogICAgfSwKICAgIGVzdGlsb0Z1ZXJ6YUNvbGlzaW9uKCkgewogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOgogICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLmZhY3Rvclpvb20gKiB0aGlzLmVzdGVOb2RvLmZ1ZXJ6YUNvbGlzaW9uLmZ1ZXJ6YSkgKwogICAgICAgICAgInB4IiwKICAgICAgICBoZWlnaHQ6IE1hdGgucm91bmQoMyAqIHRoaXMuZmFjdG9yWm9vbSkgKyAicHgiLAogICAgICAgIHRyYW5zZm9ybTogInJvdGF0ZSgiICsgdGhpcy5lc3RlTm9kby5mdWVyemFDb2xpc2lvbi5kaXJlY2Npb24gKyAicmFkKSIsCiAgICAgIH07CiAgICB9LAogICAgZXN0aWxvQm9saXRhKCkgewogICAgICBsZXQgYm9yZGVyID0gIjJweCBzb2xpZCB0cmFuc3BhcmVudCI7CiAgICAgIGxldCBiYWNrZ3JvdW5kQ29sb3IgPSAicmdiKDE5NSAxOTUgMTk1KSI7CgogICAgICBpZiAodGhpcy5wcmV2aW9EZVNlbGVjY2lvbmFkbykgewogICAgICAgIGJvcmRlciA9ICIycHggc29saWQgdmFyKC0tYXRsYXNDb25vY2ltaWVudG9TZWxlY2Npb24pIjsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAicmdiKDE5NSAxOTUgMTk1KSI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc2VsZWNjaW9uYWRvKSB7CiAgICAgICAgYm9yZGVyID0gIjJweCBzb2xpZCB0cmFuc3BhcmVudCI7CiAgICAgICAgYmFja2dyb3VuZENvbG9yID0gInZhcigtLWF0bGFzQ29ub2NpbWllbnRvU2VsZWNjaW9uKSI7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgYm9yZGVyLAogICAgICAgIGJhY2tncm91bmRDb2xvciwKICAgICAgfTsKICAgIH0sCiAgICBkaWFzUmVwYXNvKCkgewogICAgICBpZiAoIXRoaXMuZGF0b3NVc3VhcmlvRXN0ZU5vZG8/LnBlcmlvZG9SZXBhc28pIHsKICAgICAgICByZXR1cm4gMjsKICAgICAgfQogICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLmRhdG9zVXN1YXJpb0VzdGVOb2RvLnBlcmlvZG9SZXBhc28gLyA4NjQwMDAwMCk7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgc2V0VGlwb05vZG8obnVldm9UaXBvTm9kbykgewogICAgICBpZiAoIXRoaXMudXN1YXJpb0V4cGVydG9Ob2RvKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5lc3RlTm9kby50aXBvTm9kbyA9PT0gbnVldm9UaXBvTm9kbykgewogICAgICAgIGNvbnNvbGUubG9nKCJPcGVyYWNpw7NuIGlubmVjZXNhcmlhIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuc2V0dGluZ1RpcG9Ob2RvID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvCiAgICAgICAgLm11dGF0ZSh7CiAgICAgICAgICBtdXRhdGlvbjogZ3FsYAogICAgICAgICAgICBtdXRhdGlvbiAoJGlkTm9kbzogSUQhLCAkbnVldm9UaXBvTm9kbzogU3RyaW5nISkgewogICAgICAgICAgICAgIHNldFRpcG9Ob2RvKGlkTm9kbzogJGlkTm9kbywgbnVldm9UaXBvTm9kbzogJG51ZXZvVGlwb05vZG8pIHsKICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICB0aXBvTm9kbwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZE5vZG86IHRoaXMuZXN0ZU5vZG8uaWQsCiAgICAgICAgICAgIG51ZXZvVGlwb05vZG8sCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5zZXR0aW5nVGlwb05vZG8gPSBmYWxzZTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuc2V0dGluZ1RpcG9Ob2RvID0gZmFsc2U7CgogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApOwogICAgICAgIH0pOwogICAgfSwKICAgIHNldFBlcmlvZG9SZXBhc28oKSB7CiAgICAgIGNvbnN0IGRpYXNSZXBhc28gPSBwYXJzZUludCh0aGlzLiRyZWZzLmlucHV0RGlhc1JlcGFzby52YWx1ZSk7CgogICAgICBpZiAoZGlhc1JlcGFzbyA8IDEpIHsKICAgICAgICBjb25zb2xlLmxvZygiUGVyaW9kbyBpbGVnYWwiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBudWV2b1BlcmlvZG9SZXBhc28gPSBkaWFzUmVwYXNvICogODY0MDAwMDA7CgogICAgICBpZiAobnVldm9QZXJpb2RvUmVwYXNvID09PSB0aGlzLmRhdG9zVXN1YXJpb0VzdGVOb2RvLnBlcmlvZG9SZXBhc28pIHsKICAgICAgICB0aGlzLmVkaXRhbmRvRGlhc1JlcGFzbyA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5zZXR0aW5nUGVyaW9kb1JlcGFzbyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISwgJG51ZXZvUGVyaW9kb1JlcGFzbzogSW50ISkgewogICAgICAgICAgICAgIHNldFBlcmlvZG9SZXBhc29Ob2RvQ29ub2NpbWllbnRvVXN1YXJpbygKICAgICAgICAgICAgICAgIGlkTm9kbzogJGlkTm9kbwogICAgICAgICAgICAgICAgbnVldm9QZXJpb2RvUmVwYXNvOiAkbnVldm9QZXJpb2RvUmVwYXNvCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgICAgaWROb2RvCiAgICAgICAgICAgICAgICBwZXJpb2RvUmVwYXNvCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICBgLAogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIGlkTm9kbzogdGhpcy5lc3RlTm9kby5pZCwKICAgICAgICAgICAgbnVldm9QZXJpb2RvUmVwYXNvLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuc2V0dGluZ1BlcmlvZG9SZXBhc28gPSBmYWxzZTsKICAgICAgICAgIHRoaXMuZWRpdGFuZG9EaWFzUmVwYXNvID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3I6ICR7ZXJyb3J9YCk7CiAgICAgICAgICB0aGlzLnNldHRpbmdQZXJpb2RvUmVwYXNvID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogICAgY2xpY2tDYXJ0ZWxOb21icmUoZSkgewogICAgICBpZiAodGhpcy5zZWxlY2Npb25hZG8pIHsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHRoaXMubW9zdHJhckRlc2NyaXBjaW9uID0gIXRoaXMubW9zdHJhckRlc2NyaXBjaW9uOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlQXByZW5kaWRvKCkgewogICAgICB2YXIgbnVldm9Fc3RhZG9BcHJlbmRpZG8gPSB0aGlzLm5vZG9BcHJlbmRpZG8gPyBmYWxzZSA6IHRydWU7CiAgICAgIHRoaXMudG9nZ2xpbmdBcHJlbmRpZG8gPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBJRCEsICRudWV2b0VzdGFkb0FwcmVuZGlkbzogQm9vbGVhbiEpIHsKICAgICAgICAgICAgICBzZXROb2RvQXRsYXNBcHJlbmRpZG9Vc3VhcmlvKAogICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvCiAgICAgICAgICAgICAgICBudWV2b0VzdGFkb0FwcmVuZGlkbzogJG51ZXZvRXN0YWRvQXByZW5kaWRvCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICAuLi5mcmFnRGF0b05vZG9Db25vY2ltaWVudG8KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHtmcmFnbWVudG9EYXRvTm9kb0Nvbm9jaW1pZW50b30KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWROb2RvOiB0aGlzLmVzdGVOb2RvLmlkLAogICAgICAgICAgICBudWV2b0VzdGFkb0FwcmVuZGlkbywKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoeyBkYXRhOiB7IHNldE5vZG9BdGxhc0FwcmVuZGlkb1VzdWFyaW8gfSB9KSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgYCR7c2V0Tm9kb0F0bGFzQXByZW5kaWRvVXN1YXJpby5sZW5ndGh9IG5vZG9zIG1vZGlmaWNhZG9zYAogICAgICAgICAgKTsKCiAgICAgICAgICBmb3IgKGNvbnN0IHJlcyBvZiBzZXROb2RvQXRsYXNBcHJlbmRpZG9Vc3VhcmlvKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBOb21icmU6IGAgKyByZXMubm9tYnJlTm9kbyk7CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy50b2dnbGluZ0FwcmVuZGlkbyA9IGZhbHNlOwoKICAgICAgICAgIGNvbnN0IHN0b3JlID0gdGhpcy4kYXBvbGxvLnByb3ZpZGVyLmRlZmF1bHRDbGllbnQ7CiAgICAgICAgICBjb25zdCBjYWNoZSA9IHN0b3JlLnJlYWRRdWVyeSh7CiAgICAgICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TLAogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKCiAgICAgICAgICB2YXIgbW9kaWZpY2FjaW9uZXNSZWFsaXphZGFzID0gZmFsc2U7CiAgICAgICAgICBmb3IgKGNvbnN0IGRhdG9Ob2RvIG9mIHNldE5vZG9BdGxhc0FwcmVuZGlkb1VzdWFyaW8pIHsKICAgICAgICAgICAgaWYgKCF0aGlzLnlvLmF0bGFzLmRhdG9zTm9kb3Muc29tZSgoZG4pID0+IGRuLmlkID09PSBkYXRvTm9kby5pZCkpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygKICAgICAgICAgICAgICAgIGBObyBlc3RhYmEgZW4gY2FjaMOpLiBQdXNoaW5nICR7SlNPTi5zdHJpbmdpZnkoZGF0b05vZG8pfWAKICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIG1vZGlmaWNhY2lvbmVzUmVhbGl6YWRhcyA9IHRydWU7CiAgICAgICAgICAgICAgbnVldm9DYWNoZS55by5hdGxhcy5kYXRvc05vZG9zLnB1c2goZGF0b05vZG8pOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKG1vZGlmaWNhY2lvbmVzUmVhbGl6YWRhcykgewogICAgICAgICAgICBzdG9yZS53cml0ZVF1ZXJ5KHsKICAgICAgICAgICAgICBxdWVyeTogUVVFUllfREFUT1NfVVNVQVJJT19OT0RPUywKICAgICAgICAgICAgICBkYXRhOiBudWV2b0NhY2hlLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTsKICAgICAgICAgIHRoaXMudG9nZ2xpbmdBcHJlbmRpZG8gPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgICAvLyBzZXROb2RvT2JqZXRpdm8obnVldm9Fc3RhZG9PYmpldGl2bykgewogICAgLy8gICB0aGlzLiRhcG9sbG8KICAgIC8vICAgICAubXV0YXRlKHsKICAgIC8vICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAvLyAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBJRCEsICRudWV2b0VzdGFkb09iamV0aXZvOiBCb29sZWFuISkgewogICAgLy8gICAgICAgICAgIHNldE5vZG9PYmpldGl2bygKICAgIC8vICAgICAgICAgICAgIGlkTm9kbzogJGlkTm9kbwogICAgLy8gICAgICAgICAgICAgbnVldm9Fc3RhZG9PYmpldGl2bzogJG51ZXZvRXN0YWRvT2JqZXRpdm8KICAgIC8vICAgICAgICAgICApCiAgICAvLyAgICAgICAgIH0KICAgIC8vICAgICAgIGAsCiAgICAvLyAgICAgICB2YXJpYWJsZXM6IHsKICAgIC8vICAgICAgICAgaWROb2RvOiB0aGlzLmVzdGVOb2RvLmlkLAogICAgLy8gICAgICAgICBudWV2b0VzdGFkb09iamV0aXZvLAogICAgLy8gICAgICAgfSwKICAgIC8vICAgICB9KQogICAgLy8gICAgIC50aGVuKCh7IGRhdGE6IHsgc2V0Tm9kb09iamV0aXZvIH0gfSkgPT4gewogICAgLy8gICAgICAgaWYgKHNldE5vZG9PYmpldGl2bykgewogICAgLy8gICAgICAgICB0aGlzLiRlbWl0KCJjYW1iaWVFc3RhZG9PYmpldGl2byIsIG51ZXZvRXN0YWRvT2JqZXRpdm8pOwogICAgLy8gICAgICAgfQogICAgLy8gICAgIH0pOwogICAgLy8gfSwKICAgIGFicmlyUGFnaW5hTm9kbygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goCiAgICAgICAgdGhpcy4kcm91dGUucGF0aCArICIvbm9kb0Nvbm9jaW1pZW50by8iICsgdGhpcy5lc3RlTm9kby5pZAogICAgICApOwogICAgfSwKICAgIGNvcGlhcklkKGUpIHsKICAgICAgbGV0IHN0ciA9IGUudGFyZ2V0LmlubmVyVGV4dC50cmltKCk7CiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKTsKICAgICAgZWwudmFsdWUgPSBzdHI7CiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpOwogICAgICBlbC5zZWxlY3QoKTsKICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoImNvcHkiKTsKICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChlbCk7CiAgICB9LAogICAgZWxpbWluYXJFc3RlTm9kbygpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcykgewogICAgICAgIGNvbnNvbGUubG9nKGBObyBhdXRvcml6YWRvYCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoImVsaW1pbmFyIiwgdGhpcy5lc3RlTm9kby5pZCk7CiAgICB9LAogICAgYXJyYXN0cmFyTm9kbyhlKSB7CiAgICAgIGlmICghdGhpcy5hcnJhc3RyYW5kb05vZG8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgLy9jb25zb2xlLmxvZyhgbW91c2UgbW92ZSBlbiAke2UucGFnZVh9LCAke2UucGFnZVl9YCk7CiAgICAgIGxldCBwb3NDb250ZW5lZG9yID0gZG9jdW1lbnQKICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoImNvbnRlbmVkb3JOb2RvcyIpCiAgICAgICAgLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBsZXQgbnVldm9Ub3AgPSBNYXRoLnJvdW5kKAogICAgICAgIChlLmNsaWVudFkgLSBwb3NDb250ZW5lZG9yLnRvcCkgLyB0aGlzLmZhY3Rvclpvb20KICAgICAgKTsKICAgICAgbGV0IG51ZXZvTGVmdCA9IE1hdGgucm91bmQoCiAgICAgICAgKGUuY2xpZW50WCAtIHBvc0NvbnRlbmVkb3IubGVmdCkgLyB0aGlzLmZhY3Rvclpvb20KICAgICAgKTsKICAgICAgdGhpcy5wb3NpY2lvbi55ID0gbnVldm9Ub3A7CiAgICAgIHRoaXMucG9zaWNpb24ueCA9IG51ZXZvTGVmdDsKICAgIH0sCiAgICBndWFyZGFyUG9zaWNpb24oKSB7CiAgICAgIGlmICghdGhpcy5hcnJhc3RyYW5kb05vZG8pIHJldHVybjsKICAgICAgdGhpcy4kZW1pdCgiY2FtYmlvRGVQb3NpY2lvbk1hbnVhbCIsIHRoaXMuZXN0ZU5vZG8uaWQsIHsKICAgICAgICB4OiB0aGlzLnBvc2ljaW9uLngsCiAgICAgICAgeTogdGhpcy5wb3NpY2lvbi55LAogICAgICB9KTsKCiAgICAgIHRoaXMuYXJyYXN0cmFuZG9Ob2RvID0gZmFsc2U7CiAgICB9LAogICAgY3JlYXJWaW5jdWxvKHRpcG8sIG5vZG9Gcm9tLCBub2RvVG8pIHsKICAgICAgY29uc29sZS5sb2coYENyZWFuZG8gdmluY3VsbyBlbnRyZSAke25vZG9Gcm9tfSB5ICR7bm9kb1RvfWApOwogICAgICBpZiAoIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvQWRtaW5pc3RyYWRvckF0bGFzKSB7CiAgICAgICAgY29uc29sZS5sb2coYE5vIGF1dG9yaXphZG9gKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc29sZS5sb2coCiAgICAgICAgYGNyZWFuZG8gdW4gdmluY3VsbyB0aXBvICR7dGlwb30gZW50cmUgJHtub2RvRnJvbS5ub21icmV9IHkgJHtub2RvVG8ubm9tYnJlfSBgCiAgICAgICk7CiAgICAgIHRoaXMuJGVtaXQoImNyZWFjaW9uVmluY3VsbyIsIHsKICAgICAgICB0aXBvLAogICAgICAgIGlkTm9kb0Zyb206IG5vZG9Gcm9tLmlkLAogICAgICAgIGlkTm9kb1RvOiBub2RvVG8uaWQsCiAgICAgIH0pOwogICAgfSwKICAgIGVsaW1pbmFyVmluY3Vsbyhub2RvRnJvbSwgbm9kb1RvKSB7CiAgICAgIGNvbnNvbGUubG9nKGBEZXNjb25lY3RhbmRvYCk7CiAgICAgIGlmICghdGhpcy51c3VhcmlvU3VwZXJhZG1pbmlzdHJhZG9yICYmICF0aGlzLnVzdWFyaW9BZG1pbmlzdHJhZG9yQXRsYXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhgTm8gYXV0b3JpemFkb2ApOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCJlbGltaW5hY2lvblZpbmN1bG8iLCB7CiAgICAgICAgaWROb2RvRnJvbTogbm9kb0Zyb20uaWQsCiAgICAgICAgaWROb2RvVG86IG5vZG9Uby5pZCwKICAgICAgfSk7CiAgICB9LAogICAgc3RvcFByb3AoZSkgewogICAgICBjb25zb2xlLmxvZyhgU3RvcHBpbmdgKTsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0sCiAgICB0b2dnbGVOb2RvRW5Db2xlY2Npb24oaWRDb2xlY2Npb24pIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW8gfHwgIXRoaXMudXN1YXJpby5pZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy50b2dnbGluZ05vZG9FbkNvbGVjY2lvbiA9IGlkQ29sZWNjaW9uOwogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBJRCEsICRpZENvbGVjY2lvbjogSUQhLCAkaWRVc3VhcmlvOiBJRCEpIHsKICAgICAgICAgICAgICB0b2dnbGVOb2RvQ29sZWNjaW9uTm9kb3NBdGxhc0Nvbm9jaW1pZW50b1VzdWFyaW8oCiAgICAgICAgICAgICAgICBpZE5vZG86ICRpZE5vZG8KICAgICAgICAgICAgICAgIGlkQ29sZWNjaW9uOiAkaWRDb2xlY2Npb24KICAgICAgICAgICAgICAgIGlkVXN1YXJpbzogJGlkVXN1YXJpbwogICAgICAgICAgICAgICkgewogICAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICAgIGlkc05vZG9zCiAgICAgICAgICAgICAgICBub2RvcyB7CiAgICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICAgIG5vbWJyZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZE5vZG86IHRoaXMuZXN0ZU5vZG8uaWQsCiAgICAgICAgICAgIGlkQ29sZWNjaW9uLAogICAgICAgICAgICBpZFVzdWFyaW86IHRoaXMudXN1YXJpby5pZCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLnRvZ2dsaW5nTm9kb0VuQ29sZWNjaW9uID0gbnVsbDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMudG9nZ2xpbmdOb2RvRW5Db2xlY2Npb24gPSBudWxsOwogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApOwogICAgICAgIH0pOwogICAgfSwKICAgIGluaWNpYXJHZXN0aW9uUmVwYXNvcygpIHsKICAgICAgdmFyIGVsRGF0b05vZG8gPSB0aGlzLnlvLmF0bGFzLmRhdG9zTm9kb3MuZmluZCgKICAgICAgICAoZG4pID0+CiAgICAgICAgICBkbi5pZE5vZG8gPT09IHRoaXMuZXN0ZU5vZG8uaWQgJiYgZG4uaXRlcmFjaW9uZXNSZXBhc28ubGVuZ3RoID4gMAogICAgICApOwogICAgICBpZiAoZWxEYXRvTm9kbykgewogICAgICAgIGNvbnNvbGUubG9nKGBFc3RlIG5vZG8geWEgdGVuw61hIHJlcGFzb3NgKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAidmVudGFuYVJlcGFzb3MiLAogICAgICAgICAgcGFyYW1zOiB7IGlkUmVwYXNvOiBlbERhdG9Ob2RvLmlkIH0sCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coYEVzdGUgbm9kbyBubyB0ZW7DrWEgcmVwYXNvcy4gQ3JlYW5kb2ApOwogICAgICAgIHRoaXMuYWRkSXRlcmFjaW9uUmVwYXNvKCk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRJdGVyYWNpb25SZXBhc28oKSB7CiAgICAgIGNvbnNvbGUubG9nKGBFbnZpYW5kbyBwYXJhIGFkZCB0byBsaXN0YSByZXBhc29zYCk7CiAgICAgIHRoaXMuY3JlYW5kb0l0ZXJhY2lvblJlcGFzbyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKCRpZFVzdWFyaW86IElEISwgJGlkTm9kbzogSUQhKSB7CiAgICAgICAgICAgICAgY3JlYXJJdGVyYWNpb25SZXBhc29Ob2RvQ29ub2NpbWllbnRvVXN1YXJpbygKICAgICAgICAgICAgICAgIGlkVXN1YXJpbzogJGlkVXN1YXJpbwogICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgICAgaXRlcmFjaW9uZXNSZXBhc28gewogICAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgICAgICBpbnRlcnZhbG8KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWRVc3VhcmlvOiB0aGlzLnVzdWFyaW8uaWQsCiAgICAgICAgICAgIGlkTm9kbzogdGhpcy5lc3RlTm9kby5pZCwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoeyBkYXRhOiB7IGNyZWFySXRlcmFjaW9uUmVwYXNvTm9kb0Nvbm9jaW1pZW50b1VzdWFyaW8gfSB9KSA9PiB7CiAgICAgICAgICB0aGlzLmNyZWFuZG9JdGVyYWNpb25SZXBhc28gPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgbmFtZTogInZlbnRhbmFSZXBhc29zIiwKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgaWRSZXBhc286IGNyZWFySXRlcmFjaW9uUmVwYXNvTm9kb0Nvbm9jaW1pZW50b1VzdWFyaW8uaWQsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9KTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTsKICAgICAgICAgIHRoaXMuY3JlYW5kb0l0ZXJhY2lvblJlcGFzbyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICAgIG1hcmNhckVzdHVkaWFkbygpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9Mb2dlYWRvKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgZmVjaGFFc3R1ZGlhZG8gPSBuZXcgRGF0ZSgpOwogICAgICAvLyBmZWNoYUVzdHVkaWFkby5zZXREYXRlKDcpOwoKICAgICAgLy8gZmVjaGFFc3R1ZGlhZG8uc2V0SG91cnMoMCk7CiAgICAgIC8vIGZlY2hhRXN0dWRpYWRvLnNldE1pbnV0ZXMoMCk7CiAgICAgIC8vIGZlY2hhRXN0dWRpYWRvLnNldFNlY29uZHMoMCk7CiAgICAgIC8vIGZlY2hhRXN0dWRpYWRvLnNldE1pbGxpc2Vjb25kcygwKTsKCiAgICAgIHRoaXMuZW52aWFuZG9GZWNoYUVzdHVkaWFkbyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKCRpZFVzdWFyaW86IElEISwgJGlkTm9kbzogSUQhLCAkZmVjaGE6IERhdGUhKSB7CiAgICAgICAgICAgICAgc2V0RGF0ZU5vZG9Db25vY2ltaWVudG9Fc3R1ZGlhZG9Vc3VhcmlvKAogICAgICAgICAgICAgICAgaWRVc3VhcmlvOiAkaWRVc3VhcmlvCiAgICAgICAgICAgICAgICBpZE5vZG86ICRpZE5vZG8KICAgICAgICAgICAgICAgIGZlY2hhOiAkZmVjaGEKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIC4uLmZyYWdEYXRvTm9kb0Nvbm9jaW1pZW50bwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAke2ZyYWdtZW50b0RhdG9Ob2RvQ29ub2NpbWllbnRvfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZFVzdWFyaW86IHRoaXMudXN1YXJpby5pZCwKICAgICAgICAgICAgaWROb2RvOiB0aGlzLmVzdGVOb2RvLmlkLAogICAgICAgICAgICBmZWNoYTogZmVjaGFFc3R1ZGlhZG8sCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgZGF0YTogeyBzZXREYXRlTm9kb0Nvbm9jaW1pZW50b0VzdHVkaWFkb1VzdWFyaW8gfSB9KSA9PiB7CiAgICAgICAgICB0aGlzLmVudmlhbmRvRmVjaGFFc3R1ZGlhZG8gPSBmYWxzZTsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgIXRoaXMueW8uYXRsYXMuZGF0b3NOb2Rvcy5zb21lKAogICAgICAgICAgICAgIChkbikgPT4gZG4uaWQgPT09IHNldERhdGVOb2RvQ29ub2NpbWllbnRvRXN0dWRpYWRvVXN1YXJpby5pZAogICAgICAgICAgICApCiAgICAgICAgICApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coCiAgICAgICAgICAgICAgYE5vIGVzdGFiYSBlbiBjYWNow6kuIFB1c2hpbmcgJHtKU09OLnN0cmluZ2lmeSgKICAgICAgICAgICAgICAgIHNldERhdGVOb2RvQ29ub2NpbWllbnRvRXN0dWRpYWRvVXN1YXJpbwogICAgICAgICAgICAgICl9YAogICAgICAgICAgICApOwogICAgICAgICAgICBjb25zdCBzdG9yZSA9IHRoaXMuJGFwb2xsby5wcm92aWRlci5kZWZhdWx0Q2xpZW50OwogICAgICAgICAgICBjb25zdCBjYWNoZSA9IHN0b3JlLnJlYWRRdWVyeSh7CiAgICAgICAgICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjb25zb2xlLmxvZygiQ2FjaGU6ICIrSlNPTi5zdHJpbmdpZnkpCiAgICAgICAgICAgIHZhciBudWV2b0NhY2hlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjYWNoZSkpOwogICAgICAgICAgICAKICAgICAgICAgICAgbnVldm9DYWNoZS55by5hdGxhcy5kYXRvc05vZG9zLnB1c2goCiAgICAgICAgICAgICAgc2V0RGF0ZU5vZG9Db25vY2ltaWVudG9Fc3R1ZGlhZG9Vc3VhcmlvCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TLAogICAgICAgICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yOiAke2Vycm9yfWApOwogICAgICAgICAgdGhpcy5lbnZpYW5kb0ZlY2hhRXN0dWRpYWRvID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGVzdGVOb2RvKCkgewogICAgICB0aGlzLnBvc2ljaW9uID0geyAuLi50aGlzLmVzdGVOb2RvLmNvb3JkcyB9OwogICAgfSwKICAgIGVkaXRhbmRvRGlhc1JlcGFzbyhlZGl0YW5kbykgewogICAgICBpZiAoZWRpdGFuZG8pIHsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICB0aGlzLiRyZWZzLmlucHV0RGlhc1JlcGFzby52YWx1ZSA9IHRoaXMuZGlhc1JlcGFzbzsKICAgICAgICAgIHRoaXMuJHJlZnMuaW5wdXREaWFzUmVwYXNvLmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBtZW51Q3gobW9zdHJhbmRvKSB7CiAgICAgIGlmICghbW9zdHJhbmRvKSB7CiAgICAgICAgdGhpcy5lZGl0YW5kb0RpYXNSZXBhc28gPSBmYWxzZTsKICAgICAgfQogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnBvc2ljaW9uID0geyAuLi50aGlzLmVzdGVOb2RvLmF1dG9Db29yZHMgfTsKICB9LAp9Owo="},{"version":3,"sources":["NodoConocimiento.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NodoConocimiento.vue","sourceRoot":"src/components/atlasConocimiento","sourcesContent":["<template>\n  <div\n    class=\"nodoConocimiento\"\n    :style=\"[estiloPosicion, estiloSize, estiloZeta, estiloBolita]\"\n    :class=\"{ escondido, deNodoSeleccionado: seleccionado, fantasmeado }\"\n    @click.ctrl.capture=\"stopProp\"\n    @mouseup.left=\"guardarPosicion\"\n    @mousemove=\"arrastrarNodo\"\n    @mouseleave=\"arrastrandoNodo = false\"\n    @dblclick=\"abrirPaginaNodo\"\n  >\n    <div\n      class=\"boton\"\n      id=\"botonAbrirMenuCx\"\n      @click.stop=\"$emit('abroMenuContextual')\"\n      v-show=\"seleccionado && !menuCx\"\n    >\n      <img src=\"@/assets/iconos/ellipsisVertical.svg\" alt=\"Opciones\" />\n    </div>\n    <div id=\"zonaArrastre\" v-show=\"arrastrandoNodo\"></div>\n\n    <div\n      v-if=\"usuarioSuperadministrador\"\n      v-show=\"configuracionAtlas.posicionando\"\n      id=\"fuerzaCentroMasa\"\n      class=\"fuerzaMovimiento\"\n      :style=\"[estiloFuerzaCentroMasa]\"\n    >\n      <div class=\"flechitaFuerza\"></div>\n    </div>\n    <div\n      v-if=\"usuarioSuperadministrador\"\n      v-show=\"configuracionAtlas.posicionando\"\n      id=\"fuerzaColision\"\n      class=\"fuerzaMovimiento\"\n      :style=\"[estiloFuerzaColision]\"\n    >\n      <div class=\"flechitaFuerza\"></div>\n    </div>\n\n    <div\n      id=\"iconoNodo\"\n      :class=\"{\n        deNodoSeleccionado: seleccionado,\n        previoDeSeleccionado,\n      }\"\n    >\n      <img\n        v-if=\"esteNodo.tipoNodo === 'concepto'\"\n        src=\"@/assets/iconos/atlas/lightbulbEmpty.svg\"\n      />\n      <img v-else src=\"@/assets/iconos/atlas/fireSolid.svg\" />\n    </div>\n    <img\n      src=\"@/assets/iconos/success.png\"\n      alt=\"Aprendido\"\n      title=\"Este tema ya ha sido aprendido\"\n      v-show=\"nodoAprendido && modoAtlas === 'estudiante'\"\n      :style=\"[\n        {\n          width: parseInt(20 * factorZoom) + 'px',\n          left: parseInt(-10 * factorZoom) + 'px',\n          top: parseInt(-10 * factorZoom) + 'px',\n        },\n      ]\"\n      class=\"imagenAprendido\"\n    />\n    <img\n      src=\"@/assets/iconos/target.png\"\n      alt=\"Objetivo\"\n      v-show=\"esTarget\"\n      class=\"imagenTarget\"\n    />\n\n    <div\n      id=\"menuContextual\"\n      v-show=\"menuCx\"\n      @mousedown.stop=\"\"\n      @dblclick.stop=\"\"\n      @click.stop=\"\"\n      @mouseup.stop=\"\"\n    >\n      <div class=\"seccionMenuCx\" @click=\"abrirPaginaNodo\">\n        {{ esteNodo.nombre }}\n      </div>\n      <div\n        id=\"opcionesTipoNodo\"\n        :class=\"{ deshabilitado: settingTipoNodo }\"\n        v-if=\"usuarioExpertoNodo\"\n      >\n        <div\n          class=\"boton selector\"\n          :class=\"{ activo: esteNodo.tipoNodo === 'concepto' }\"\n          @click.stop=\"setTipoNodo('concepto')\"\n        >\n          <img src=\"@/assets/iconos/atlas/lightbulbEmpty.svg\" alt=\"Concepto\" />\n        </div>\n\n        <div\n          class=\"boton selector\"\n          :class=\"{ activo: esteNodo.tipoNodo === 'skill' }\"\n          @click.stop=\"setTipoNodo('skill')\"\n        >\n          <img src=\"@/assets/iconos/atlas/fireSolid.svg\" alt=\"Habilidad\" />\n        </div>\n      </div>\n      <loading v-show=\"settingTipoNodo\" style=\"margin: 5px auto\" />\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"\n          usuarioSuperadministrador == true || usuarioAdministradorAtlas == true\n        \"\n        @click.stop=\"eliminarEsteNodo\"\n      >\n        Eliminar\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        :class=\"{ deshabilitado: esTarget }\"\n        @click.stop=\"$emit('mePongoEnMira')\"\n      >\n        <img\n          class=\"iconoMenuCx\"\n          src=\"@/assets/iconos/target.png\"\n          alt=\"mira\"\n          v-show=\"!enviandoQueryTarget\"\n        />\n        <loading v-show=\"enviandoQueryTarget\" />\n        Poner en la mira\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioSuperadministrador\"\n        @click.stop=\"copiarId\"\n      >\n        {{ esteNodo.id }}\n      </div>\n      <div\n        class=\"botonMenuCx selectorSubseccionMenuCx\"\n        v-show=\"\n          yo.atlas && yo.atlas.colecciones && yo.atlas.colecciones.length > 0\n        \"\n      >\n        <img\n          src=\"@/assets/iconos/userNodes.png\"\n          alt=\"nodos\"\n          class=\"iconoMenuCx\"\n        />\n        Colecciones\n        <div class=\"subseccionMenuCx\">\n          <div\n            class=\"botonMenuCx\"\n            v-for=\"coleccion of yo.atlas.colecciones\"\n            :key=\"coleccion.id\"\n            @click.stop=\"toggleNodoEnColeccion(coleccion.id)\"\n          >\n            <img\n              src=\"@/assets/iconos/check.svg\"\n              alt=\"Check\"\n              style=\"height: 12px; margin-right: 10px; border-radius: 50%\"\n              v-show=\"togglingNodoEnColeccion != coleccion.id\"\n              :style=\"[\n                {\n                  backgroundColor: coleccion.idsNodos.includes(esteNodo.id)\n                    ? 'var(--atlasVerde)'\n                    : '',\n                },\n              ]\"\n            />\n            <loading v-show=\"togglingNodoEnColeccion === coleccion.id\" />\n            {{ coleccion.nombre }}\n          </div>\n        </div>\n      </div>\n      <!-- <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado && !esNodoObjetivo\"\n        @click.stop=\"setNodoObjetivo(true)\"\n      >\n        Añadir a objetivos\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado && esNodoObjetivo\"\n        @click.stop=\"setNodoObjetivo(false)\"\n      >\n        Retirar de objetivos\n      </div> -->\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado\"\n        @click.stop=\"toggleAprendido\"\n      >\n        <img\n          src=\"@/assets/iconos/check.svg\"\n          alt=\"check\"\n          class=\"iconoMenuCx\"\n          style=\"border-radius: 50%\"\n          v-show=\"!togglingAprendido\"\n          :style=\"[\n            {\n              backgroundColor: nodoAprendido\n                ? 'var(--atlasConocimientoCheck)'\n                : '',\n            },\n          ]\"\n        />\n        <loading v-show=\"togglingAprendido\" texto=\"\" />\n        {{ nodoAprendido ? \"Desm\" : \"M\" }}arcar como aprendido\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado\"\n        @click.stop=\"marcarEstudiado\"\n        v-show=\"aprendible\"\n        :class=\"{ deshabilitado: enviandoFechaEstudiado }\"\n        \n      >\n        <img\n          src=\"@/assets/iconos/readme.svg\"\n          alt=\"Read\"\n          class=\"iconoMenuCx\"\n          v-show=\"!enviandoFechaEstudiado\"\n        />\n        <loading v-show=\"enviandoFechaEstudiado\" texto=\"\" />\n        <span>\n           {{\"Estudiado \" +enrichedToReadableDate(datosUsuarioEsteNodo.estudiado)}}\n        </span>\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioLogeado\"\n        v-show=\"nodoEstudiado && !nodoAprendido && !editandoDiasRepaso\"\n        :class=\"{ deshabilitado: creandoIteracionRepaso }\"\n        @click.stop=\"editandoDiasRepaso = !editandoDiasRepaso\"\n      >\n        <img src=\"@/assets/iconos/clock.svg\" alt=\"Reloj\" class=\"iconoMenuCx\" />\n        <span v-show=\"diasRepaso > 1\">{{\n          \"Repaso cada \" + diasRepaso + \" dia\"\n        }}</span>\n        <span v-show=\"diasRepaso > 1\">s</span>\n        <span></span>\n        <loading texto=\"\" v-show=\"creandoIteracionRepaso\" />\n      </div>\n      <div class=\"seccionMenuCx\" v-show=\"editandoDiasRepaso\">\n        <loading v-show=\"settingPeriodoRepaso\" />\n        <label for=\"inputDiasRepaso\">Dias de repaso: </label\n        ><input\n          style=\"width: min(70px, 80vw)\"\n          type=\"number\"\n          name=\"inputDiasRepaso\"\n          :class=\"{ deshabilitado: settingPeriodoRepaso }\"\n          ref=\"inputDiasRepaso\"\n          min=\"1\"\n          id=\"inputDiasRepaso\"\n          @focus=\"$event.target.select()\"\n          @blur=\"editandoDiasRepaso=false;\"\n          @keypress.enter=\"setPeriodoRepaso\"\n        />\n      </div>\n      <template\n        v-if=\"\n          nodoSeleccionado &&\n          nodoSeleccionado.id != esteNodo.id &&\n          (usuarioSuperadministrador == true ||\n            usuarioAdministradorAtlas == true)\n        \"\n      >\n        <div class=\"seccionMenuCx\">{{ nodoSeleccionado.nombre }}</div>\n        <div\n          class=\"botonMenuCx\"\n          @click.stop=\"crearVinculo('continuacion', nodoSeleccionado, esteNodo)\"\n        >\n          Continua aquí\n        </div>\n        <div\n          class=\"botonMenuCx\"\n          @click.stop=\"crearVinculo('continuacion', esteNodo, nodoSeleccionado)\"\n        >\n          Continua desde aquí\n        </div>\n        <div\n          class=\"botonMenuCx\"\n          v-show=\"esteNodo.vinculos.some((v) => v.idRef == nodoSeleccionado.id)\"\n          @click.stop=\"eliminarVinculo(esteNodo, nodoSeleccionado)\"\n        >\n          Desconectar\n        </div>\n      </template>\n    </div>\n    <div\n      @click=\"clickCartelNombre\"\n      id=\"nombre\"\n      :style=\"[estiloCartelNombre]\"\n      ref=\"nombre\"\n    >\n      {{ callingPosiciones ? esteNodo.puntaje : esteNodo.nombre }}\n    </div>\n\n    <div\n      class=\"cuadritoDescripcionNodo\"\n      v-if=\"esteNodo && esteNodo.descripcion\"\n      v-show=\"seleccionado && !callingPosiciones && mostrarDescripcion\"\n    >\n      <div class=\"descripcionNodo\">{{ esteNodo.descripcion }}</div>\n      <img\n        @click.stop=\"abrirPaginaNodo\"\n        src=\"@/assets/iconos/ir.png\"\n        alt=\"Ir\"\n        title=\"Abrir este nodo\"\n        class=\"botonAbrirNodo\"\n      />\n      <div\n        class=\"botonEquis\"\n        @click.stop=\"mostrarDescripcion = false\"\n        @mousedown.stop=\"\"\n        @mouseup.stop=\"\"\n        id=\"botonCerrarDescripcion\"\n      >\n        <div class=\"linea1\"></div>\n        <div class=\"linea2\"></div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from \"../utilidades/Loading.vue\";\nimport { fragmentoDatoNodoConocimiento } from \"./fragsAtlasConocimiento\";\nimport { QUERY_DATOS_USUARIO_NODOS } from \"./AtlasConocimiento.vue\";\nexport default {\n  components: { Loading },\n  name: \"NodoConocimiento\",\n  props: {\n    esteNodo: {\n      type: Object,\n      required: true,\n    },\n    datosUsuarioEsteNodo: {\n      type: Object,\n    },\n    enviandoQueryTarget: Boolean,\n    esNodoObjetivo: Boolean,\n    esTarget: Boolean,\n    yo: Object,\n    modoAtlas: String,\n    escondido: Boolean,\n    centroVista: Object,\n    idNodoMenuCx: String,\n    idsNodosAprendidos: Array,\n    idsNodosEstudiados: Array,\n    idsNodosFrescos: Array,\n    idsNodosPresentesCabeza: Array,\n    idsNodosRepasar:Array,\n    nodoSeleccionado: Object,\n    seleccionado: Boolean,\n    fantasmeado: Boolean,\n    previoDeSeleccionado: Boolean,\n    usuarioAdministradorAtlas: {\n      type: Boolean,\n      default: false,\n    },\n    esquinasDiagrama: Object,\n    callingPosiciones: Boolean,\n    factorZoom: Number,\n    configuracionAtlas: Object,\n  },\n  data() {\n    return {\n      arrastrandoNodo: false,\n      nombreEditable: false,\n      nombreEditandose: false,\n\n      baseSize: {\n        x: 50,\n        y: 50,\n      },\n\n      posicion: {\n        x: 0,\n        y: 0,\n      },\n      togglingNodoEnColeccion: null,\n\n      estiloNombreBase: {\n        minWidth: 20,\n        fontSize: 12,\n        minHeight: 10,\n        padding: 5,\n        borderRadius: 4,\n      },\n      mostrarDescripcion: false,\n      creandoIteracionRepaso: false,\n\n      enviandoFechaEstudiado: false,\n      togglingAprendido: false,\n\n      settingTipoNodo: false,\n\n      editandoDiasRepaso: false,\n      settingPeriodoRepaso: false,\n    };\n  },\n  computed: {\n    menuCx() {\n      return this.idNodoMenuCx == this.esteNodo.id ? true : false;\n    },\n    size() {\n      let fSize = Object.assign({}, this.baseSize);\n      if (this.seleccionado) {\n        let baseX = this.baseSize.x;\n        let baseY = this.baseSize.y;\n        fSize.x = Math.round(baseX * 1.1);\n        fSize.y = Math.round(baseY * 1.1);\n      }\n      return { ...fSize };\n    },\n    estiloPosicion() {\n      //Posicion ajustada a las esquinas del diagrama:\n      const posXAjustada = this.posicion.x - this.esquinasDiagrama.x1;\n      const posYAjustada = this.posicion.y - this.esquinasDiagrama.y1;\n\n      //Posicion absoluta\n      const posY = Math.round(\n        (posYAjustada - this.size.y / 2) * this.factorZoom\n      );\n      const posX = Math.round(\n        (posXAjustada - this.size.x / 2) * this.factorZoom\n      );\n\n      //Ajustar respecto del centro de la vista\n      // posY -= this.centroVista.y;\n      // posX -= this.centroVista.x;\n      return {\n        top: posY + \"px\",\n        left: posX + \"px\",\n      };\n    },\n    estiloZeta() {\n      let valorZ = 0;\n      if (this.arrastrandoNodo || this.seleccionado) {\n        valorZ = 10;\n      }\n      if (this.menuCx) {\n        valorZ = 11;\n      }\n      return {\n        zIndex: valorZ,\n      };\n    },\n    estiloSize() {\n      return {\n        width: this.size.x * this.factorZoom + \"px\",\n        height: this.size.y * this.factorZoom + \"px\",\n      };\n    },\n    permisosUsuario: function () {\n      return this.$store.state.usuario.permisos;\n    },\n    aprendible() {\n      if (!this.esteNodo.vinculos.some((v) => v.rol == \"target\")) {\n        return true;\n      }\n      var idsNecesarios = this.esteNodo.vinculos\n        .filter((v) => v.rol == \"target\")\n        .map((v) => v.idRef);\n      return idsNecesarios.every((id) =>\n        this.idsNodosPresentesCabeza.includes(id)\n      );\n    },\n    nodoAprendido() {\n      return this.idsNodosAprendidos.includes(this.esteNodo.id);\n    },\n    nodoEstudiado() {\n      return this.idsNodosEstudiados.includes(this.esteNodo.id);\n    },\n    nodoRepasar() {\n      return this.idsNodosRepasar.includes(this.esteNodo.id);\n    },\n    nodoPresenteCabeza() {\n      return this.idsNodosPresentesCabeza.includes(this.esteNodo.id);\n    },\n    estiloCartelNombre() {\n      var bColor = \"var(--atlasConocimientoOff)\";\n      var color = \"black\";\n      if (this.modoAtlas === \"estudiante\") {\n        if (this.nodoPresenteCabeza) {\n          bColor = \"var(--atlasConocimientoCheck)\";\n        } else if (this.nodoRepasar) {\n          bColor = \"var(--atlasConocimientoRepaso)\";\n        } else if (this.aprendible) {\n          bColor = \"var(--atlasConocimientoAvailable)\";\n        } else {\n          color = \"#313131\";\n        }\n      } else if (this.modoAtlas === \"experto\") {\n        if (this.usuarioExpertoNodo) {\n          bColor = \"var(--atlasConocimientoCheck)\";\n        }\n      }\n\n      return {\n        backgroundColor: bColor,\n        color,\n        minWidth:\n          parseInt(this.estiloNombreBase.minWidth * this.factorZoom) + \"px\",\n        fontSize:\n          parseInt(this.estiloNombreBase.fontSize * this.factorZoom) + \"px\",\n        minHeight:\n          parseInt(this.estiloNombreBase.minHeight * this.factorZoom) + \"px\",\n        padding:\n          parseInt(this.estiloNombreBase.padding * this.factorZoom) + \"px\",\n        borderRadius:\n          parseInt(this.estiloNombreBase.borderRadius * this.factorZoom) + \"px\",\n      };\n    },\n    usuarioExpertoNodo() {\n      if (!this.usuario || !this.usuario.id) return false;\n      return this.esteNodo.expertos.includes(this.usuario.id);\n    },\n    estiloFuerzaCentroMasa() {\n      return {\n        width:\n          Math.round(this.esteNodo.fuerzaCentroMasa.fuerza * this.factorZoom) +\n          \"px\",\n        height: Math.round(3 * this.factorZoom) + \"px\",\n        transform:\n          \"rotate(\" + this.esteNodo.fuerzaCentroMasa.direccion + \"rad)\",\n      };\n    },\n    estiloFuerzaColision() {\n      return {\n        width:\n          Math.round(this.factorZoom * this.esteNodo.fuerzaColision.fuerza) +\n          \"px\",\n        height: Math.round(3 * this.factorZoom) + \"px\",\n        transform: \"rotate(\" + this.esteNodo.fuerzaColision.direccion + \"rad)\",\n      };\n    },\n    estiloBolita() {\n      let border = \"2px solid transparent\";\n      let backgroundColor = \"rgb(195 195 195)\";\n\n      if (this.previoDeSeleccionado) {\n        border = \"2px solid var(--atlasConocimientoSeleccion)\";\n        backgroundColor = \"rgb(195 195 195)\";\n      }\n      if (this.seleccionado) {\n        border = \"2px solid transparent\";\n        backgroundColor = \"var(--atlasConocimientoSeleccion)\";\n      }\n\n      return {\n        border,\n        backgroundColor,\n      };\n    },\n    diasRepaso() {\n      if (!this.datosUsuarioEsteNodo?.periodoRepaso) {\n        return 2;\n      }\n      return Math.floor(this.datosUsuarioEsteNodo.periodoRepaso / 86400000);\n    },\n  },\n  methods: {\n    setTipoNodo(nuevoTipoNodo) {\n      if (!this.usuarioExpertoNodo) {\n        return;\n      }\n\n      if (this.esteNodo.tipoNodo === nuevoTipoNodo) {\n        console.log(\"Operación innecesaria\");\n        return;\n      }\n      this.settingTipoNodo = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!, $nuevoTipoNodo: String!) {\n              setTipoNodo(idNodo: $idNodo, nuevoTipoNodo: $nuevoTipoNodo) {\n                id\n                tipoNodo\n              }\n            }\n          `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            nuevoTipoNodo,\n          },\n        })\n        .then(() => {\n          this.settingTipoNodo = false;\n        })\n        .catch((error) => {\n          this.settingTipoNodo = false;\n\n          console.log(`Error: ${error}`);\n        });\n    },\n    setPeriodoRepaso() {\n      const diasRepaso = parseInt(this.$refs.inputDiasRepaso.value);\n\n      if (diasRepaso < 1) {\n        console.log(\"Periodo ilegal\");\n        return;\n      }\n\n      var nuevoPeriodoRepaso = diasRepaso * 86400000;\n\n      if (nuevoPeriodoRepaso === this.datosUsuarioEsteNodo.periodoRepaso) {\n        this.editandoDiasRepaso = false;\n        return;\n      }\n\n      this.settingPeriodoRepaso = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!, $nuevoPeriodoRepaso: Int!) {\n              setPeriodoRepasoNodoConocimientoUsuario(\n                idNodo: $idNodo\n                nuevoPeriodoRepaso: $nuevoPeriodoRepaso\n              ) {\n                id\n                idNodo\n                periodoRepaso\n              }\n            }\n          `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            nuevoPeriodoRepaso,\n          },\n        })\n        .then(() => {\n          this.settingPeriodoRepaso = false;\n          this.editandoDiasRepaso = false;\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.settingPeriodoRepaso = false;\n        });\n    },\n    clickCartelNombre(e) {\n      if (this.seleccionado) {\n        e.stopPropagation();\n        this.mostrarDescripcion = !this.mostrarDescripcion;\n      }\n    },\n    toggleAprendido() {\n      var nuevoEstadoAprendido = this.nodoAprendido ? false : true;\n      this.togglingAprendido = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!, $nuevoEstadoAprendido: Boolean!) {\n              setNodoAtlasAprendidoUsuario(\n                idNodo: $idNodo\n                nuevoEstadoAprendido: $nuevoEstadoAprendido\n              ) {\n                ...fragDatoNodoConocimiento\n              }\n            }\n            ${fragmentoDatoNodoConocimiento}\n          `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            nuevoEstadoAprendido,\n          },\n        })\n        .then(({ data: { setNodoAtlasAprendidoUsuario } }) => {\n          console.log(\n            `${setNodoAtlasAprendidoUsuario.length} nodos modificados`\n          );\n\n          for (const res of setNodoAtlasAprendidoUsuario) {\n            console.log(`Nombre: ` + res.nombreNodo);\n          }\n\n          this.togglingAprendido = false;\n\n          const store = this.$apollo.provider.defaultClient;\n          const cache = store.readQuery({\n            query: QUERY_DATOS_USUARIO_NODOS,\n          });\n          var nuevoCache = JSON.parse(JSON.stringify(cache));\n\n          var modificacionesRealizadas = false;\n          for (const datoNodo of setNodoAtlasAprendidoUsuario) {\n            if (!this.yo.atlas.datosNodos.some((dn) => dn.id === datoNodo.id)) {\n              console.log(\n                `No estaba en caché. Pushing ${JSON.stringify(datoNodo)}`\n              );\n              modificacionesRealizadas = true;\n              nuevoCache.yo.atlas.datosNodos.push(datoNodo);\n            }\n          }\n\n          if (modificacionesRealizadas) {\n            store.writeQuery({\n              query: QUERY_DATOS_USUARIO_NODOS,\n              data: nuevoCache,\n            });\n          }\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.togglingAprendido = false;\n        });\n    },\n    // setNodoObjetivo(nuevoEstadoObjetivo) {\n    //   this.$apollo\n    //     .mutate({\n    //       mutation: gql`\n    //         mutation ($idNodo: ID!, $nuevoEstadoObjetivo: Boolean!) {\n    //           setNodoObjetivo(\n    //             idNodo: $idNodo\n    //             nuevoEstadoObjetivo: $nuevoEstadoObjetivo\n    //           )\n    //         }\n    //       `,\n    //       variables: {\n    //         idNodo: this.esteNodo.id,\n    //         nuevoEstadoObjetivo,\n    //       },\n    //     })\n    //     .then(({ data: { setNodoObjetivo } }) => {\n    //       if (setNodoObjetivo) {\n    //         this.$emit(\"cambieEstadoObjetivo\", nuevoEstadoObjetivo);\n    //       }\n    //     });\n    // },\n    abrirPaginaNodo() {\n      this.$router.push(\n        this.$route.path + \"/nodoConocimiento/\" + this.esteNodo.id\n      );\n    },\n    copiarId(e) {\n      let str = e.target.innerText.trim();\n      const el = document.createElement(\"textarea\");\n      el.value = str;\n      document.body.appendChild(el);\n      el.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(el);\n    },\n    eliminarEsteNodo() {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      this.$emit(\"eliminar\", this.esteNodo.id);\n    },\n    arrastrarNodo(e) {\n      if (!this.arrastrandoNodo) {\n        return;\n      }\n      //console.log(`mouse move en ${e.pageX}, ${e.pageY}`);\n      let posContenedor = document\n        .getElementById(\"contenedorNodos\")\n        .getBoundingClientRect();\n      let nuevoTop = Math.round(\n        (e.clientY - posContenedor.top) / this.factorZoom\n      );\n      let nuevoLeft = Math.round(\n        (e.clientX - posContenedor.left) / this.factorZoom\n      );\n      this.posicion.y = nuevoTop;\n      this.posicion.x = nuevoLeft;\n    },\n    guardarPosicion() {\n      if (!this.arrastrandoNodo) return;\n      this.$emit(\"cambioDePosicionManual\", this.esteNodo.id, {\n        x: this.posicion.x,\n        y: this.posicion.y,\n      });\n\n      this.arrastrandoNodo = false;\n    },\n    crearVinculo(tipo, nodoFrom, nodoTo) {\n      console.log(`Creando vinculo entre ${nodoFrom} y ${nodoTo}`);\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      console.log(\n        `creando un vinculo tipo ${tipo} entre ${nodoFrom.nombre} y ${nodoTo.nombre} `\n      );\n      this.$emit(\"creacionVinculo\", {\n        tipo,\n        idNodoFrom: nodoFrom.id,\n        idNodoTo: nodoTo.id,\n      });\n    },\n    eliminarVinculo(nodoFrom, nodoTo) {\n      console.log(`Desconectando`);\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      this.$emit(\"eliminacionVinculo\", {\n        idNodoFrom: nodoFrom.id,\n        idNodoTo: nodoTo.id,\n      });\n    },\n    stopProp(e) {\n      console.log(`Stopping`);\n      e.stopPropagation();\n    },\n    toggleNodoEnColeccion(idColeccion) {\n      if (!this.usuario || !this.usuario.id) {\n        return;\n      }\n\n      this.togglingNodoEnColeccion = idColeccion;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!, $idColeccion: ID!, $idUsuario: ID!) {\n              toggleNodoColeccionNodosAtlasConocimientoUsuario(\n                idNodo: $idNodo\n                idColeccion: $idColeccion\n                idUsuario: $idUsuario\n              ) {\n                id\n                idsNodos\n                nodos {\n                  id\n                  nombre\n                }\n              }\n            }\n          `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            idColeccion,\n            idUsuario: this.usuario.id,\n          },\n        })\n        .then(() => {\n          this.togglingNodoEnColeccion = null;\n        })\n        .catch((error) => {\n          this.togglingNodoEnColeccion = null;\n          console.log(`Error: ${error}`);\n        });\n    },\n    iniciarGestionRepasos() {\n      var elDatoNodo = this.yo.atlas.datosNodos.find(\n        (dn) =>\n          dn.idNodo === this.esteNodo.id && dn.iteracionesRepaso.length > 0\n      );\n      if (elDatoNodo) {\n        console.log(`Este nodo ya tenía repasos`);\n        this.$router.push({\n          name: \"ventanaRepasos\",\n          params: { idRepaso: elDatoNodo.id },\n        });\n      } else {\n        console.log(`Este nodo no tenía repasos. Creando`);\n        this.addIteracionRepaso();\n      }\n    },\n    addIteracionRepaso() {\n      console.log(`Enviando para add to lista repasos`);\n      this.creandoIteracionRepaso = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!, $idNodo: ID!) {\n              crearIteracionRepasoNodoConocimientoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n              ) {\n                id\n                iteracionesRepaso {\n                  id\n                  intervalo\n                }\n              }\n            }\n          `,\n          variables: {\n            idUsuario: this.usuario.id,\n            idNodo: this.esteNodo.id,\n          },\n        })\n        .then(({ data: { crearIteracionRepasoNodoConocimientoUsuario } }) => {\n          this.creandoIteracionRepaso = false;\n          this.$router.push({\n            name: \"ventanaRepasos\",\n            params: {\n              idRepaso: crearIteracionRepasoNodoConocimientoUsuario.id,\n            },\n          });\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.creandoIteracionRepaso = false;\n        });\n    },\n    marcarEstudiado() {\n      if (!this.usuarioLogeado) {\n        return;\n      }\n\n      var fechaEstudiado = new Date();\n      // fechaEstudiado.setDate(7);\n\n      // fechaEstudiado.setHours(0);\n      // fechaEstudiado.setMinutes(0);\n      // fechaEstudiado.setSeconds(0);\n      // fechaEstudiado.setMilliseconds(0);\n\n      this.enviandoFechaEstudiado = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!, $idNodo: ID!, $fecha: Date!) {\n              setDateNodoConocimientoEstudiadoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n                fecha: $fecha\n              ) {\n                ...fragDatoNodoConocimiento\n              }\n            }\n            ${fragmentoDatoNodoConocimiento}\n          `,\n          variables: {\n            idUsuario: this.usuario.id,\n            idNodo: this.esteNodo.id,\n            fecha: fechaEstudiado,\n          },\n        })\n        .then(({ data: { setDateNodoConocimientoEstudiadoUsuario } }) => {\n          this.enviandoFechaEstudiado = false;\n          if (\n            !this.yo.atlas.datosNodos.some(\n              (dn) => dn.id === setDateNodoConocimientoEstudiadoUsuario.id\n            )\n          ) {\n            console.log(\n              `No estaba en caché. Pushing ${JSON.stringify(\n                setDateNodoConocimientoEstudiadoUsuario\n              )}`\n            );\n            const store = this.$apollo.provider.defaultClient;\n            const cache = store.readQuery({\n              query: QUERY_DATOS_USUARIO_NODOS,\n            });\n            console.log(\"Cache: \"+JSON.stringify)\n            var nuevoCache = JSON.parse(JSON.stringify(cache));\n            \n            nuevoCache.yo.atlas.datosNodos.push(\n              setDateNodoConocimientoEstudiadoUsuario\n            );\n            store.writeQuery({\n              query: QUERY_DATOS_USUARIO_NODOS,\n              data: nuevoCache,\n            });\n          }\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.enviandoFechaEstudiado = false;\n        });\n    },\n  },\n  watch: {\n    esteNodo() {\n      this.posicion = { ...this.esteNodo.coords };\n    },\n    editandoDiasRepaso(editando) {\n      if (editando) {\n        this.$nextTick(() => {\n          this.$refs.inputDiasRepaso.value = this.diasRepaso;\n          this.$refs.inputDiasRepaso.focus();\n        });\n      }\n    },\n    menuCx(mostrando) {\n      if (!mostrando) {\n        this.editandoDiasRepaso = false;\n      }\n    },\n  },\n  mounted() {\n    this.posicion = { ...this.esteNodo.autoCoords };\n  },\n};\n</script>\n\n<style scoped>\n#iconoNodo {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  pointer-events: none;\n  width: 55%;\n  height: 55%;\n  z-index: 1;\n  pointer-events: none;\n  border-radius: 50%;\n}\n\n#iconoNodo img {\n  width: 100%;\n  height: 100%;\n}\n#iconoNodo.deNodoSeleccionado img {\n  filter: var(--filtroBlanco);\n}\n.nodoConocimiento {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background-size: 100% 100%;\n  cursor: pointer;\n  position: absolute;\n  pointer-events: all;\n}\n.nodoConocimiento:not(.deNodoSeleccionado) {\n  background-color: rgba(128, 128, 128, 0.349);\n}\n.nodoConocimiento.deNodoSeleccionado {\n  background-color: var(--atlasConocimientoSeleccion);\n}\n\n#botonAbrirMenuCx {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n\n  right: -40px;\n}\n#zonaArrastre {\n  width: 500px;\n  height: 500px;\n  position: absolute;\n  transform: translate(-50%, -50%);\n}\n.seleccionado {\n  z-index: 10;\n}\n.fantasmeado {\n  opacity: 0.2;\n}\n\n.escondido {\n  visibility: hidden;\n}\n#nombre {\n  position: absolute;\n  top: 105%;\n  text-align: center;\n  left: 50%;\n  transform: translateX(-50%);\n  border-width: 1px;\n  border-style: solid;\n}\n\n#menuContextual {\n  position: absolute;\n  top: 110%;\n  left: 110%;\n  min-width: 140px;\n  padding: 5px 0px;\n  z-index: 110;\n  background-color: rgb(177, 177, 159);\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2),\n    0 1px 5px 0 rgba(0, 0, 0, 0.12);\n}\n.botonMenuCx {\n  cursor: pointer;\n  font-size: 14px;\n  padding: 13px 10px;\n  display: flex;\n  align-items: center;\n}\n\n.iconoMenuCx {\n  height: 13px;\n  margin: 0px 5px;\n}\n.seccionMenuCx {\n  font-size: 15px;\n  color: rgb(71, 71, 71);\n  padding: 5px;\n}\n.botonMenuCx:hover {\n  background-color: gray;\n}\n.selectorSubseccionMenuCx {\n  position: relative;\n}\n\n.subseccionMenuCx {\n  position: absolute;\n  left: 100%;\n  top: 0%;\n  display: none;\n  background-color: rgb(177, 177, 159);\n}\n.selectorSubseccionMenuCx:hover > .subseccionMenuCx {\n  display: block;\n}\n#opcionesTipoNodo {\n  display: flex;\n  justify-content: center;\n  gap: 20px;\n  align-items: center;\n  padding: 10px 20px;\n}\n\n.cuadritoDescripcionNodo {\n  position: absolute;\n  top: 50%;\n  left: 104%;\n  width: 170px;\n  transform: translateY(-50%);\n  background-color: #ffdbaf;\n  border: 1px solid rgb(0, 0, 44);\n  border-radius: 10px;\n}\n\n.descripcionNodo {\n  font-size: 15px;\n  padding: 10px;\n  min-height: 30px;\n  white-space: pre-wrap;\n}\n.botonAbrirNodo {\n  display: block;\n  width: 24px;\n  height: 24px;\n  cursor: pointer;\n  margin: 10px auto;\n  border-radius: 50%;\n  padding: 10px;\n  background-color: rgb(214, 176, 130);\n}\n.botonAbrirNodo:hover {\n  background-color: rgb(190, 145, 88);\n}\n\n.imagenTarget {\n  width: 180%;\n  position: absolute;\n  top: -40%;\n  left: -40%;\n  z-index: 10;\n  opacity: 0.86;\n}\n.imagenTarget:hover {\n  opacity: 0.16;\n}\n.imagenAprendido {\n  position: absolute;\n  background-color: rgb(33, 168, 33);\n  border-radius: 50%;\n}\n#botonCerrarDescripcion {\n  left: 101%;\n  bottom: 101%;\n  width: 15px;\n  height: 15px;\n}\n.fuerzaMovimiento {\n  background-color: black;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform-origin: 0% 0%;\n  z-index: 200;\n}\n#fuerzaCentroMasa {\n  background-color: blue;\n}\n#fuerzaColision {\n  background-color: red;\n}\n.flechitaFuerza {\n  position: absolute;\n  top: 50%;\n  left: 100%;\n  width: 1px;\n  height: 1px;\n  border: 5px solid transparent;\n  border-left-color: black;\n  transform: translate(-50%, -50%);\n}\n</style>"]}]}