{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/proyecto/CanvasDiagramaFlujo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/proyecto/CanvasDiagramaFlujo.vue","mtime":1643654906503},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ2FudmFzRGlhZ3JhbWFGbHVqbyIsCiAgcHJvcHM6IHsKICAgIHRvZG9zTm9kb3M6IEFycmF5LAogICAgZmFjdG9yWm9vbTpOdW1iZXIsCiAgICBub2RvU2VsZWNjaW9uYWRvOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0sCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNpemVDYW52YXNUb2Rvc1ZpbmN1bG9zOiB7CiAgICAgICAgd2lkdGg6IDAsCiAgICAgICAgaGVpZ2h0OiAwLAogICAgICB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNyZWFySW1hZ2VuVG9kb3NWaW5jdWxvczogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZyhgQ3JlYW5kbyBpbWFnZW4gdG9kb3MgdsOtbmN1bG9zYCk7CiAgICAgIGlmICh0aGlzLnRvZG9zTm9kb3MubGVuZ3RoIDw9IDEpIHJldHVybjsKICAgICAgdmFyIGxhcGl6ID0gdGhpcy4kcmVmcy5jYW52YXNUb2Rvc1ZpbmN1bG9zLmdldENvbnRleHQoIjJkIik7CiAgICAgIC8vQ2FsY3VsYXIgZWwgdGFtYcOxbyBkZWwgZGlhZ3JhbWEgICAgICAKICAgICAgY29uc3QgcG9zaWNpb25DYW52YXM9ewogICAgICAgIHg6IHRoaXMuZXNxdWluYXNDYW52YXNUb2Rvc1ZpbmN1bG9zLngxLAogICAgICAgIHk6IHRoaXMuZXNxdWluYXNDYW52YXNUb2Rvc1ZpbmN1bG9zLnkxLAogICAgICB9CgogICAgICBsYXBpei5jYW52YXMud2lkdGggPSB0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy54MiAtIHRoaXMuZXNxdWluYXNDYW52YXNUb2Rvc1ZpbmN1bG9zLngxOwogICAgICBsYXBpei5jYW52YXMuaGVpZ2h0ID0gdGhpcy5lc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MueTIgLSB0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy55MTsgICAKCiAgICAgIGxhcGl6LmxpbmVXaWR0aCA9IDE7CiAgICAgIGxhcGl6LmNsZWFyUmVjdCgwLCAwLCBsYXBpei5jYW52YXMud2lkdGgsIGxhcGl6LmNhbnZhcy5oZWlnaHQpOwogICAgICBsYXBpei5iZWdpblBhdGgoKTsKICAgICAgbGFwaXouc3Ryb2tlU3R5bGUgPSAiI2IzYjNiMyI7CiAgICAgIGZvciAobGV0IG5vZG8gb2YgdGhpcy50b2Rvc05vZG9zKSB7CiAgICAgICAgZm9yIChsZXQgdmluY3VsbyBvZiBub2RvLnZpbmN1bG9zKSB7CiAgICAgICAgICBpZiAoIXRoaXMudG9kb3NOb2Rvcy5zb21lKChuKSA9PiBuLmlkID09IHZpbmN1bG8uaWRSZWYpKSBjb250aW51ZTsKCiAgICAgICAgICB0aGlzLmRpYnVqYXJMaW5lYUVudHJlTm9kb3MoCiAgICAgICAgICAgIHRoaXMudG9kb3NOb2Rvcy5maW5kKChub2RvKSA9PiBub2RvLmlkID09IHZpbmN1bG8uaWRSZWYpLAogICAgICAgICAgICBub2RvLAogICAgICAgICAgICBsYXBpeiwKICAgICAgICAgICAgcG9zaWNpb25DYW52YXMKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGxhcGl6LnN0cm9rZSgpOwogICAgfSwKICAgIGNyZWFySW1hZ2VuVmluY3Vsb3NTZWxlY2Npb25hZG86IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5sYXBpeiA9IHRoaXMuJHJlZnMuY2FudmFzVmluY3Vsb3NTZWxlY2Npb25hZG8uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgdGhpcy5sYXBpei5jbGVhclJlY3QoCiAgICAgICAgMCwKICAgICAgICAwLAogICAgICAgIHRoaXMubGFwaXouY2FudmFzLndpZHRoLAogICAgICAgIHRoaXMubGFwaXouY2FudmFzLmhlaWdodAogICAgICApOwoKICAgICAgaWYgKHRoaXMudG9kb3NOb2Rvcy5zb21lKChuKSA9PiBuLmlkID09IHRoaXMubm9kb1NlbGVjY2lvbmFkby5pZCkpIHsKICAgICAgICAvL0xpbmVhcyB2ZXJkZXMgZGUgcG9zaWJsaWRhZGVzCiAgICAgICAgdGhpcy5sYXBpei5iZWdpblBhdGgoKTsKICAgICAgICB0aGlzLmxhcGl6LmxpbmVXaWR0aCA9IDI7CiAgICAgICAgdGhpcy5sYXBpei5zdHJva2VTdHlsZSA9ICIjMDA4MDAwIjsKCiAgICAgICAgLy9MaW5lYXMgdmVyZGVzIGRlIHNhbGlkYQogICAgICAgIGZvciAobGV0IHZpbmN1bG8gb2YgdGhpcy5ub2RvU2VsZWNjaW9uYWRvLnZpbmN1bG9zKSB7CiAgICAgICAgICBpZiAoIXRoaXMudG9kb3NOb2Rvcy5zb21lKChuKSA9PiBuLmlkID09IHZpbmN1bG8uaWRSZWYpKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBBTEVSVEEuIFZpbmN1bG8gYSAke3ZpbmN1bG8uaWRSZWZ9IGh1ZXJmYW5vYCk7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgfQoKICAgICAgICAgIGxldCBvdHJvTm9kbyA9IHRoaXMudG9kb3NOb2Rvcy5maW5kKChuKSA9PiBuLmlkID09IHZpbmN1bG8uaWRSZWYpOwogICAgICAgICAgdGhpcy5kaWJ1amFyTGluZWFFbnRyZU5vZG9zKG90cm9Ob2RvLCB0aGlzLm5vZG9TZWxlY2Npb25hZG8pOwogICAgICAgIH0KICAgICAgICB0aGlzLmxhcGl6LnN0cm9rZSgpOwogICAgICAgIC8vTGluZWFzIHJvamFzIGRlIGRlcGVuZGVuY2lhcwoKICAgICAgICAKICAgICAgfQogICAgfSwKICAgIGRpYnVqYXJMaW5lYUVudHJlTm9kb3Mobm9kb0Zyb20sIG5vZG9UbywgbGFwaXosIHBvc2ljaW9uQ2FudmFzKSB7CiAgICAgIGxldCBpbmljaW8gPSB7CiAgICAgICAgeDogKG5vZG9Gcm9tLmNvb3Jkcy54KnRoaXMuZmFjdG9yWm9vbSktcG9zaWNpb25DYW52YXMueCwKICAgICAgICB5OiAobm9kb0Zyb20uY29vcmRzLnkqdGhpcy5mYWN0b3Jab29tKS1wb3NpY2lvbkNhbnZhcy55LAogICAgICB9OwogICAgICBsZXQgZmluYWwgPSB7CiAgICAgICAgeDogKG5vZG9Uby5jb29yZHMueCp0aGlzLmZhY3Rvclpvb20pLXBvc2ljaW9uQ2FudmFzLngsCiAgICAgICAgeTogKG5vZG9Uby5jb29yZHMueSp0aGlzLmZhY3Rvclpvb20pLXBvc2ljaW9uQ2FudmFzLnksCiAgICAgIH07CgogICAgICBjb25zdCBkaXN0YW5jaWFWZXJ0aWNhbD1maW5hbC55LWluaWNpby55OwogICAgICBjb25zdCBsYXJnb0NvZG89TWF0aC5yb3VuZChkaXN0YW5jaWFWZXJ0aWNhbCowLjUpOwoKICAgICAgY29uc3QgcHJpbWVyYUVzcXVpbmE9ewogICAgICAgIHg6aW5pY2lvLngsCiAgICAgICAgeTppbmljaW8ueStsYXJnb0NvZG8KICAgICAgfQoKICAgICAgY29uc3Qgc2VndW5kYUVzcXVpbmE9ewogICAgICAgIHg6ZmluYWwueCwKICAgICAgICB5OmZpbmFsLnktbGFyZ29Db2RvCiAgICAgIH0KCiAgICAgIGxhcGl6Lm1vdmVUbyhpbmljaW8ueCwgaW5pY2lvLnkpOwogICAgICBsYXBpei5saW5lVG8ocHJpbWVyYUVzcXVpbmEueCwgcHJpbWVyYUVzcXVpbmEueSk7CiAgICAgIGxhcGl6LmxpbmVUbyhzZWd1bmRhRXNxdWluYS54LCBzZWd1bmRhRXNxdWluYS55KTsKICAgICAgbGFwaXoubGluZVRvKGZpbmFsLngsIGZpbmFsLnkpOwogICAgICAvL2Fob3JhIGxhIGZsZWNoaXRhCiAgICAgIC8vIGxldCBjZW50cm8gPSB7CiAgICAgIC8vICAgeDogKGZpbmFsLnggKyBpbmljaW8ueCkgLyAyLAogICAgICAvLyAgIHk6IChmaW5hbC55ICsgaW5pY2lvLnkpIC8gMiwKICAgICAgLy8gfTsKICAgICAgLy8gbGV0IGxvbmdpdHVkQWxhID0gNzsKICAgICAgLy8gbGV0IGFuZ3Vsb1ZpbmN1bG8gPSBNYXRoLmF0YW4oCiAgICAgIC8vICAgKGZpbmFsLnkgLSBpbmljaW8ueSkgLyAoZmluYWwueCAtIGluaWNpby54KQogICAgICAvLyApOwogICAgICAvLyBpZiAoZmluYWwueSAtIGluaWNpby55IDwgMCAmJiBmaW5hbC54IC0gaW5pY2lvLnggPCAwKQogICAgICAvLyAgIGFuZ3Vsb1ZpbmN1bG8gKz0gTWF0aC5QSTsKICAgICAgLy8gaWYgKGZpbmFsLnkgLSBpbmljaW8ueSA+IDAgJiYgZmluYWwueCAtIGluaWNpby54IDwgMCkKICAgICAgLy8gICBhbmd1bG9WaW5jdWxvICs9IE1hdGguUEk7CiAgICAgIC8vIC8vYW5ndWxvVmluY3Vsbz1hbmd1bG9WaW5jdWxvKjE4MC9NYXRoLlBJOwoKICAgICAgLy8gbGV0IHB1bnRhQWxhSXpxdWllcmRhID0gewogICAgICAvLyAgIHg6IGNlbnRyby54ICsgbG9uZ2l0dWRBbGEgKiBNYXRoLmNvcyhhbmd1bG9WaW5jdWxvIC0gKDMgKiBNYXRoLlBJKSAvIDQpLAogICAgICAvLyAgIHk6IGNlbnRyby55ICsgbG9uZ2l0dWRBbGEgKiBNYXRoLnNpbihhbmd1bG9WaW5jdWxvIC0gKDMgKiBNYXRoLlBJKSAvIDQpLAogICAgICAvLyB9OwogICAgICAvLyBsZXQgcHVudGFBbGFEZXJlY2hhID0gewogICAgICAvLyAgIHg6IGNlbnRyby54ICsgbG9uZ2l0dWRBbGEgKiBNYXRoLmNvcyhhbmd1bG9WaW5jdWxvICsgKDMgKiBNYXRoLlBJKSAvIDQpLAogICAgICAvLyAgIHk6IGNlbnRyby55ICsgbG9uZ2l0dWRBbGEgKiBNYXRoLnNpbihhbmd1bG9WaW5jdWxvICsgKDMgKiBNYXRoLlBJKSAvIDQpLAogICAgICAvLyB9OwogICAgICAvLyB0aGlzLmxhcGl6Lm1vdmVUbyhjZW50cm8ueCwgY2VudHJvLnkpOwogICAgICAvLyB0aGlzLmxhcGl6LmxpbmVUbyhwdW50YUFsYUl6cXVpZXJkYS54LCBwdW50YUFsYUl6cXVpZXJkYS55KTsKICAgICAgLy8gdGhpcy5sYXBpei5tb3ZlVG8oY2VudHJvLngsIGNlbnRyby55KTsKICAgICAgLy8gdGhpcy5sYXBpei5saW5lVG8ocHVudGFBbGFEZXJlY2hhLngsIHB1bnRhQWxhRGVyZWNoYS55KTsKICAgIH0sCiAgfSwKICBjb21wdXRlZDp7CiAgICBlc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MoKXsKICAgICAgdmFyIG5vZG9zUmVsZXZhbnRlcz10aGlzLnRvZG9zTm9kb3M7CgogICAgICBpZiAobm9kb3NSZWxldmFudGVzLmxlbmd0aCA8PSAxKSByZXR1cm4gewogICAgICAgIHgxOiAwLAogICAgICAgIHkxOiAwLAogICAgICAgIHgyOiAwLAogICAgICAgIHkyOiAwLCAgICAgICAgCiAgICAgIH07CgogICAgICBsZXQgYm9yZGVzID0ge307CiAgICAgIGJvcmRlcy50b3AgPSBub2Rvc1JlbGV2YW50ZXMucmVkdWNlKChhY2MsIG4pID0+IHsKICAgICAgICAvL2NvbnNvbGUubG9nKGBSZWR1Y2llbmRvICR7bi5ub21icmV9IGNvbiBjb29yZHM6ICR7bi5wb3NpY2lvbn1gKTsKICAgICAgICByZXR1cm4gbi5jb29yZHMueSA+IGFjYyA/IG4uY29vcmRzLnkgOiBhY2M7CiAgICAgIH0sIDApOwogICAgICBib3JkZXMuYm90ID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZSgoYWNjLCBuKSA9PiB7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzLnkgPCBhY2MgPyBuLmNvb3Jkcy55IDogYWNjOwogICAgICB9LCAwKTsKICAgICAgYm9yZGVzLmxlZnQgPSBub2Rvc1JlbGV2YW50ZXMucmVkdWNlKChhY2MsIG4pID0+IHsKICAgICAgICByZXR1cm4gbi5jb29yZHMueCA8IGFjYyA/IG4uY29vcmRzLnggOiBhY2M7CiAgICAgIH0sIDApOwogICAgICBib3JkZXMucmlnaHQgPSBub2Rvc1JlbGV2YW50ZXMucmVkdWNlKChhY2MsIG4pID0+IHsKICAgICAgICByZXR1cm4gbi5jb29yZHMueCA+IGFjYyA/IG4uY29vcmRzLnggOiBhY2M7CiAgICAgIH0sIDApOwoKICAgICAgcmV0dXJuIHsKICAgICAgICB4MTogYm9yZGVzLmxlZnQqdGhpcy5mYWN0b3Jab29tLAogICAgICAgIHkxOiBib3JkZXMuYm90KnRoaXMuZmFjdG9yWm9vbSwKICAgICAgICB4MjogKGJvcmRlcy5yaWdodCsyKSp0aGlzLmZhY3Rvclpvb20sCiAgICAgICAgeTI6IChib3JkZXMudG9wKzIpKnRoaXMuZmFjdG9yWm9vbQogICAgICB9CiAgICB9LAogICAgb2Zmc2V0Q2FudmFzVG9kb3NWaW5jdWxvcygpewogICAgICByZXR1cm4gewogICAgICAgIGxlZnQ6ICB0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy54MSArICJweCIsCiAgICAgICAgdG9wOiB0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy55MSArICJweCIsCgogICAgICAgIHdpZHRoOiAodGhpcy5lc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MueDItdGhpcy5lc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MueDEpICsgInB4IiwKICAgICAgICBoZWlnaHQ6ICh0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy55Mi10aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy55MSkgKyAicHgiLAogICAgICB9CiAgICB9CgogIH0sCiAgd2F0Y2g6IHsKICAgIHRvZG9zTm9kb3M6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMudG9kb3NOb2Rvcy5sZW5ndGggPCAxKSByZXR1cm47CiAgICAgIHRoaXMuY3JlYXJJbWFnZW5Ub2Rvc1ZpbmN1bG9zKCk7CiAgICAgIHRoaXMuY3JlYXJJbWFnZW5WaW5jdWxvc1NlbGVjY2lvbmFkbygpOwogICAgfSwKICAgIG5vZG9TZWxlY2Npb25hZG86IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5jcmVhckltYWdlblZpbmN1bG9zU2VsZWNjaW9uYWRvKCk7CiAgICB9LAogICAgZmFjdG9yWm9vbSgpewogICAgICB0aGlzLmNyZWFySW1hZ2VuVG9kb3NWaW5jdWxvcygpOwogICAgICB0aGlzLmNyZWFySW1hZ2VuVmluY3Vsb3NTZWxlY2Npb25hZG8oKTsKICAgIH0sCgogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMubW9udGFkbyA9IHRydWU7CiAgICB0aGlzLmNyZWFySW1hZ2VuVG9kb3NWaW5jdWxvcygpOwogICAgdGhpcy5jcmVhckltYWdlblZpbmN1bG9zU2VsZWNjaW9uYWRvKCk7ICAgIAogIH0sCiAgCgp9Owo="},{"version":3,"sources":["CanvasDiagramaFlujo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA","file":"CanvasDiagramaFlujo.vue","sourceRoot":"src/components/proyecto","sourcesContent":["<template>\n  <div id=\"canvasDiagramaFlujo\">\n    <canvas\n      id=\"canvasTodosVinculos\"\n      ref=\"canvasTodosVinculos\"\n      :style=\"[offsetCanvasTodosVinculos]\"\n      class=\"canvas\"\n    ></canvas>\n    <canvas\n      id=\"canvasVinculosSeleccionado\"\n      ref=\"canvasVinculosSeleccionado\"\n      :style=\"[sizeCanvasTodosVinculos]\"\n      class=\"canvas\"\n    ></canvas>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"CanvasDiagramaFlujo\",\n  props: {\n    todosNodos: Array,\n    factorZoom:Number,\n    nodoSeleccionado: {\n      type: Object,\n      default() {\n        return {};\n      },\n    },\n  },\n  data() {\n    return {\n      sizeCanvasTodosVinculos: {\n        width: 0,\n        height: 0,\n      },\n    };\n  },\n  methods: {\n    crearImagenTodosVinculos: function () {\n      console.log(`Creando imagen todos vínculos`);\n      if (this.todosNodos.length <= 1) return;\n      var lapiz = this.$refs.canvasTodosVinculos.getContext(\"2d\");\n      //Calcular el tamaño del diagrama      \n      const posicionCanvas={\n        x: this.esquinasCanvasTodosVinculos.x1,\n        y: this.esquinasCanvasTodosVinculos.y1,\n      }\n\n      lapiz.canvas.width = this.esquinasCanvasTodosVinculos.x2 - this.esquinasCanvasTodosVinculos.x1;\n      lapiz.canvas.height = this.esquinasCanvasTodosVinculos.y2 - this.esquinasCanvasTodosVinculos.y1;   \n\n      lapiz.lineWidth = 1;\n      lapiz.clearRect(0, 0, lapiz.canvas.width, lapiz.canvas.height);\n      lapiz.beginPath();\n      lapiz.strokeStyle = \"#b3b3b3\";\n      for (let nodo of this.todosNodos) {\n        for (let vinculo of nodo.vinculos) {\n          if (!this.todosNodos.some((n) => n.id == vinculo.idRef)) continue;\n\n          this.dibujarLineaEntreNodos(\n            this.todosNodos.find((nodo) => nodo.id == vinculo.idRef),\n            nodo,\n            lapiz,\n            posicionCanvas\n          );\n        }\n      }\n      lapiz.stroke();\n    },\n    crearImagenVinculosSeleccionado: function () {\n      this.lapiz = this.$refs.canvasVinculosSeleccionado.getContext(\"2d\");\n      this.lapiz.clearRect(\n        0,\n        0,\n        this.lapiz.canvas.width,\n        this.lapiz.canvas.height\n      );\n\n      if (this.todosNodos.some((n) => n.id == this.nodoSeleccionado.id)) {\n        //Lineas verdes de posiblidades\n        this.lapiz.beginPath();\n        this.lapiz.lineWidth = 2;\n        this.lapiz.strokeStyle = \"#008000\";\n\n        //Lineas verdes de salida\n        for (let vinculo of this.nodoSeleccionado.vinculos) {\n          if (!this.todosNodos.some((n) => n.id == vinculo.idRef)) {\n            console.log(`ALERTA. Vinculo a ${vinculo.idRef} huerfano`);\n            continue;\n          }\n\n          let otroNodo = this.todosNodos.find((n) => n.id == vinculo.idRef);\n          this.dibujarLineaEntreNodos(otroNodo, this.nodoSeleccionado);\n        }\n        this.lapiz.stroke();\n        //Lineas rojas de dependencias\n\n        \n      }\n    },\n    dibujarLineaEntreNodos(nodoFrom, nodoTo, lapiz, posicionCanvas) {\n      let inicio = {\n        x: (nodoFrom.coords.x*this.factorZoom)-posicionCanvas.x,\n        y: (nodoFrom.coords.y*this.factorZoom)-posicionCanvas.y,\n      };\n      let final = {\n        x: (nodoTo.coords.x*this.factorZoom)-posicionCanvas.x,\n        y: (nodoTo.coords.y*this.factorZoom)-posicionCanvas.y,\n      };\n\n      const distanciaVertical=final.y-inicio.y;\n      const largoCodo=Math.round(distanciaVertical*0.5);\n\n      const primeraEsquina={\n        x:inicio.x,\n        y:inicio.y+largoCodo\n      }\n\n      const segundaEsquina={\n        x:final.x,\n        y:final.y-largoCodo\n      }\n\n      lapiz.moveTo(inicio.x, inicio.y);\n      lapiz.lineTo(primeraEsquina.x, primeraEsquina.y);\n      lapiz.lineTo(segundaEsquina.x, segundaEsquina.y);\n      lapiz.lineTo(final.x, final.y);\n      //ahora la flechita\n      // let centro = {\n      //   x: (final.x + inicio.x) / 2,\n      //   y: (final.y + inicio.y) / 2,\n      // };\n      // let longitudAla = 7;\n      // let anguloVinculo = Math.atan(\n      //   (final.y - inicio.y) / (final.x - inicio.x)\n      // );\n      // if (final.y - inicio.y < 0 && final.x - inicio.x < 0)\n      //   anguloVinculo += Math.PI;\n      // if (final.y - inicio.y > 0 && final.x - inicio.x < 0)\n      //   anguloVinculo += Math.PI;\n      // //anguloVinculo=anguloVinculo*180/Math.PI;\n\n      // let puntaAlaIzquierda = {\n      //   x: centro.x + longitudAla * Math.cos(anguloVinculo - (3 * Math.PI) / 4),\n      //   y: centro.y + longitudAla * Math.sin(anguloVinculo - (3 * Math.PI) / 4),\n      // };\n      // let puntaAlaDerecha = {\n      //   x: centro.x + longitudAla * Math.cos(anguloVinculo + (3 * Math.PI) / 4),\n      //   y: centro.y + longitudAla * Math.sin(anguloVinculo + (3 * Math.PI) / 4),\n      // };\n      // this.lapiz.moveTo(centro.x, centro.y);\n      // this.lapiz.lineTo(puntaAlaIzquierda.x, puntaAlaIzquierda.y);\n      // this.lapiz.moveTo(centro.x, centro.y);\n      // this.lapiz.lineTo(puntaAlaDerecha.x, puntaAlaDerecha.y);\n    },\n  },\n  computed:{\n    esquinasCanvasTodosVinculos(){\n      var nodosRelevantes=this.todosNodos;\n\n      if (nodosRelevantes.length <= 1) return {\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: 0,        \n      };\n\n      let bordes = {};\n      bordes.top = nodosRelevantes.reduce((acc, n) => {\n        //console.log(`Reduciendo ${n.nombre} con coords: ${n.posicion}`);\n        return n.coords.y > acc ? n.coords.y : acc;\n      }, 0);\n      bordes.bot = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.y < acc ? n.coords.y : acc;\n      }, 0);\n      bordes.left = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.x < acc ? n.coords.x : acc;\n      }, 0);\n      bordes.right = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.x > acc ? n.coords.x : acc;\n      }, 0);\n\n      return {\n        x1: bordes.left*this.factorZoom,\n        y1: bordes.bot*this.factorZoom,\n        x2: (bordes.right+2)*this.factorZoom,\n        y2: (bordes.top+2)*this.factorZoom\n      }\n    },\n    offsetCanvasTodosVinculos(){\n      return {\n        left:  this.esquinasCanvasTodosVinculos.x1 + \"px\",\n        top: this.esquinasCanvasTodosVinculos.y1 + \"px\",\n\n        width: (this.esquinasCanvasTodosVinculos.x2-this.esquinasCanvasTodosVinculos.x1) + \"px\",\n        height: (this.esquinasCanvasTodosVinculos.y2-this.esquinasCanvasTodosVinculos.y1) + \"px\",\n      }\n    }\n\n  },\n  watch: {\n    todosNodos: function () {\n      if (this.todosNodos.length < 1) return;\n      this.crearImagenTodosVinculos();\n      this.crearImagenVinculosSeleccionado();\n    },\n    nodoSeleccionado: function () {\n      this.crearImagenVinculosSeleccionado();\n    },\n    factorZoom(){\n      this.crearImagenTodosVinculos();\n      this.crearImagenVinculosSeleccionado();\n    },\n\n  },\n  mounted() {\n    this.montado = true;\n    this.crearImagenTodosVinculos();\n    this.crearImagenVinculosSeleccionado();    \n  },\n  \n\n};\n</script>\n\n<style scoped>\n#canvasDiagramaFlujo{\n  position: relative;\n}\n.canvas{\n  position: absolute\n}\n</style>"]}]}