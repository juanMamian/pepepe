{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/Personas.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/Personas.vue","mtime":1652112483439},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTG9hZGluZyBmcm9tICIuL3V0aWxpZGFkZXMvTG9hZGluZy52dWUiOwppbXBvcnQgUGVyc29uYVZpc3RhTGlzdGEgZnJvbSAiLi91c3VhcmlvL3BlcnNvbmFWaXN0YUxpc3RhLnZ1ZSI7CmltcG9ydCBkZWJvdW5jZSBmcm9tICJkZWJvdW5jZSI7Ci8vIGltcG9ydCB7IHNpbWlsYXJpdHkgfSBmcm9tICIuL3V0aWxpZGFkZXMvZnVuY2lvbmVzIjsKCmNvbnN0IGNoYXJQcm9oaWJpZG9zUGVybWlzbyA9IC9bXiBhLXpBLVotXS87CgpleHBvcnQgY29uc3QgUVVFUllfUEVSU09OQVMgPSBncWxgCiAgcXVlcnkgewogICAgdG9kb3NVc3VhcmlvcyB7CiAgICAgIGlkCiAgICAgIG5vbWJyZXMKICAgICAgYXBlbGxpZG9zCiAgICAgIHBlcm1pc29zCiAgICAgIHVzZXJuYW1lCiAgICAgIGluZm9ybWVzTWFlc3RyYVZpZGF7CiAgICAgICAgaWQKICAgICAgICB5ZWFyCiAgICAgICAgcGVyaW9kbwogICAgICAgIGlkUHJvZmUKICAgICAgICBub21icmVQcm9mZQogICAgICAgIGNhdGVnb3JpYQogICAgICAgIHRleHRvCiAgICAgIH0KICAgICAgb2JqZXRpdm9zRXN0dWRpYW50ZXsKICAgICAgICBpZAogICAgICAgIG5vbWJyZQogICAgICAgIGVzdGFkb0Rlc2Fycm9sbG8KICAgICAgfQogICAgfQogIH0KYDsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiUGVyc29uYXMiLAogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmcsCiAgICBQZXJzb25hVmlzdGFMaXN0YSwKICB9LAogIGFwb2xsbzogewogICAgcGVyc29uYXM6IHsKICAgICAgcXVlcnk6IFFVRVJZX1BFUlNPTkFTLAogICAgICB1cGRhdGU6IGZ1bmN0aW9uICh7IHRvZG9zVXN1YXJpb3MgfSkgewogICAgICAgIHRoaXMubG9hZGluZ1BlcnNvbmFzID0gZmFsc2U7CiAgICAgICAgcmV0dXJuIHRvZG9zVXN1YXJpb3M7CiAgICAgIH0sCiAgICB9LAogICAgbm9kb3NTb2xpZGFyaWRhZFB1YmxpY2l0YWRvczp7CiAgICAgIHF1ZXJ5OmdxbGAKICAgICAgICBxdWVyeXsKICAgICAgICAgIG5vZG9zU29saWRhcmlkYWRQdWJsaWNpdGFkb3N7CiAgICAgICAgICAgIGlkCiAgICAgICAgICAgIG5vbWJyZSAgICAgICAKICAgICAgICAgICAgcmVzcG9uc2FibGVzICAgICAKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIGAsCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGVyc29uYXM6IFtdLAogICAgICBub2Rvc1NvbGlkYXJpZGFkUHVibGljaXRhZG9zOltdLAogICAgICBpZFBlcnNvbmFNZW51Q3g6IG51bGwsCiAgICAgIGlkUGVyc29uYVNlbGVjY2lvbmFkYTogbnVsbCwKICAgICAgbG9hZGluZ1BlcnNvbmFzOiB0cnVlLAogICAgICBtb3N0cmFyUGVyc29uYXM6ICJ0b2RvcyIsCgogICAgICBwZXJtaXNvSW5wdXQ6ICIiLAogICAgICB0ZXh0b0J1c2NhcjogbnVsbCwKICAgICAgdGV4dG9CdXNxdWVkYVVzYWRvOiBudWxsLAogICAgICBtb3N0cmFuZG9JbnB1dEJ1c2NhcjogZmFsc2UsCiAgICAgIGJ1c2NhZG9zOiBbXSwKCiAgICAgIGRlYm91bmNpbmdCdXNxdWVkYTogZmFsc2UsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY29waWFySWQoZSkgewogICAgICBsZXQgc3RyID0gZS50YXJnZXQuaW5uZXJUZXh0LnRyaW0oKTsKICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpOwogICAgICBlbC52YWx1ZSA9IHN0cjsKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7CiAgICAgIGVsLnNlbGVjdCgpOwogICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgiY29weSIpOwogICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGVsKTsKICAgIH0sCiAgICBlbGltaW5hclBlcnNvbmFEZURhdGFiYXNlKGlkUGVyc29uYSkgewogICAgICBpZiAoY29uZmlybSgiwr9TZWd1cm8gZGUgZWxpbWluYXIgYSBlc3RlIGluZGl2aWR1bz8iKSkgewogICAgICAgIGNvbnNvbGUubG9nKAogICAgICAgICAgYFNlIGVsaW1pbmFyYSB1bmEgcGVyc29uYSBjb24gaWQgJHtpZFBlcnNvbmF9IGRlIGxhIGJhc2UgZGUgZGF0b3NgCiAgICAgICAgKTsKICAgICAgfQogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uICgkaWRVc3VhcmlvOiBJRCEpIHsKICAgICAgICAgICAgICBlbGltaW5hclVzdWFyaW8oaWRVc3VhcmlvOiAkaWRVc3VhcmlvKQogICAgICAgICAgICB9CiAgICAgICAgICBgLAogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIGlkVXN1YXJpbzogaWRQZXJzb25hLAogICAgICAgICAgfSwKICAgICAgICAgIHVwZGF0ZTogKHN0b3JlLCB7IGRhdGE6IHsgZWxpbWluYXJVc3VhcmlvIH0gfSkgPT4gewogICAgICAgICAgICBjb25zb2xlLmxvZyhgRGF0YTogJHtlbGltaW5hclVzdWFyaW99YCk7CiAgICAgICAgICAgIGlmIChlbGltaW5hclVzdWFyaW8pIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbGV0IGNhY2hlID0gc3RvcmUucmVhZFF1ZXJ5KHsKICAgICAgICAgICAgICAgICAgcXVlcnk6IFFVRVJZX1BFUlNPTkFTLAogICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsgaWRVc3VhcmlvOiBpZFBlcnNvbmEgfSwKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYGNhY2hlOiAke2NhY2hlfWApOwoKICAgICAgICAgICAgICAgIGxldCBpbmRleEUgPSBjYWNoZS50b2Rvc1VzdWFyaW9zLmZpbmRJbmRleCgKICAgICAgICAgICAgICAgICAgKHApID0+IHAuaWQgPT0gaWRQZXJzb25hCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgaWYgKGluZGV4RSA+IC0xKSB7CiAgICAgICAgICAgICAgICAgIGNhY2hlLnRvZG9zVXN1YXJpb3Muc3BsaWNlKGluZGV4RSwgMSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgY2FjaGU6ICR7Y2FjaGV9YCk7CiAgICAgICAgICAgICAgICBzdG9yZS53cml0ZVF1ZXJ5KHsKICAgICAgICAgICAgICAgICAgcXVlcnk6IFFVRVJZX1BFUlNPTkFTLAogICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHsgaWRVc3VhcmlvOiBpZFBlcnNvbmEgfSwKICAgICAgICAgICAgICAgICAgZGF0YTogY2FjaGUsCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIGFjdHVhbGl6YW5kbyBjYWNoZS4gRToke2Vycm9yfWApOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKChyZXMpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBSZXM6ICR7SlNPTi5zdHJpbmdpZnkocmVzKX1gKTsKICAgICAgICAgIGlmIChyZXMuZGF0YSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhgVXN1YXJpbyBlbGltaW5hZG8gZXhpdG9zYW1lbnRlYCk7CiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgRXJyb3IgZWxpbWluYW5kbyB1c3VhcmlvOiBFOiAke2Vycm9yfWApOwogICAgICAgIH0pOwogICAgfSwKICAgIGFzaWduYXJQZXJtaXNvVG9kb3MoKSB7CiAgICAgIGlmICh0aGlzLnBlcm1pc29JbGVnYWwpIHsKICAgICAgICBjb25zb2xlLmxvZyhgTm8gZW52aWFkb2ApOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFjb25maXJtKCLCv0FzaWduYXIgZXN0ZSBwZXJtaXNvIGEgdG9kYXMgbGFzIHBlcnNvbmFzPyIpKSByZXR1cm47CgogICAgICB0aGlzLiRhcG9sbG8KICAgICAgICAubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBncWxgCiAgICAgICAgICAgIG11dGF0aW9uICgkbnVldm9QZXJtaXNvOiBTdHJpbmchKSB7CiAgICAgICAgICAgICAgYXNpZ25hclBlcm1pc29Ub2Rvc1VzdWFyaW9zKG51ZXZvUGVybWlzbzogJG51ZXZvUGVybWlzbykKICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBudWV2b1Blcm1pc286IHRoaXMucGVybWlzb0lucHV0LAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGFsZXJ0KAogICAgICAgICAgICAiUGVybWlzbyAiICsgdGhpcy5wZXJtaXNvSW5wdXQgKyAiIGFzaWduYWRvIHBhcmEgdG9kb3MgbG9zIHVzdWFyaW9zIgogICAgICAgICAgKTsKICAgICAgICB9KTsKICAgIH0sCiAgICBpbmljaWFyQnVzY2FyKCkgewogICAgICB0aGlzLm1vc3RyYW5kb0lucHV0QnVzY2FyID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuaW5wdXRCdXNjYXIuZm9jdXMoKTsKICAgICAgfSk7CiAgICB9LAogICAgY2FuY2VsYXJCdXNxdWVkYSgpIHsKICAgICAgdGhpcy5idXNjYWRvcyA9IFtdOwogICAgICB0aGlzLnRleHRvQnVzY2FyID0gbnVsbDsKICAgICAgdGhpcy5tb3N0cmFuZG9JbnB1dEJ1c2NhciA9IGZhbHNlOwogICAgICB0aGlzLnRleHRvQnVzcXVlZGFVc2FkbyA9IG51bGw7CiAgICB9LAogICAgY2FsY3VsYXJCdXNjYWRvczogZGVib3VuY2UoZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZyhgU2V0dGluZyB0ZXh0b0J1c3F1ZWRhVXNhZG9gKTsKICAgICAgdGhpcy50ZXh0b0J1c3F1ZWRhVXNhZG8gPSB0aGlzLnRleHRvQnVzY2FyOwogICAgICAvLyBjb25zb2xlLmxvZyhgQ2FsY3VsYW5kbyBidXNjYWRvc2ApOwogICAgICAvLyBpZiAoIXRoaXMudGV4dG9CdXNjYXIpIHJldHVybjsKICAgICAgLy8gdmFyIGxpc3RhID0gW107CiAgICAgIC8vIHZhciB0ZXh0byA9IHRoaXMudGV4dG9CdXNjYXIudHJpbSgpOwogICAgICAvLyB2YXIgY2FtcG9QZXJzb25hcyA9CiAgICAgIC8vICAgdGhpcy5tb3N0cmFyUGVyc29uYXMgPT09ICJwcm9mZXMiCiAgICAgIC8vICAgICA/IHRoaXMucGVyc29uYXMuZmlsdGVyKChwKSA9PgogICAgICAvLyAgICAgICAgIHAucGVybWlzb3MuaW5jbHVkZXMoIm1hZXN0cmFWaWRhLXByb2Zlc29yIikKICAgICAgLy8gICAgICAgKQogICAgICAvLyAgICAgOiB0aGlzLnBlcnNvbmFzOwoKICAgICAgLy8gY2FtcG9QZXJzb25hcy5mb3JFYWNoKChwZXJzb25hKSA9PiB7CiAgICAgIC8vICAgLy8gY29uc29sZS5sb2coYEJ1c2NhbmRvICR7dGV4dG99IGVuICR7bm9tYnJlTGFyZ299YCk7CiAgICAgIC8vICAgdmFyIHB1bnRhamVTaW1pbGFyaWRhZD1zaW1pbGFyaXR5KHRleHRvLCBub21icmVMYXJnbyk7CiAgICAgIC8vICAgdmFyIG9iaj17fTsKICAgICAgLy8gICBvYmpbcGVyc29uYS5pZF09cHVudGFqZVNpbWlsYXJpZGFkOwogICAgICAvLyAgIGxpc3RhLnB1c2goe29ian0pOwogICAgICAvLyAgIGNvbnNvbGUubG9nKGBCSU5HT2ApOwogICAgICAvLyB9KTsKCiAgICAgIC8vIHRoaXMuYnVzY2Fkb3M9bGlzdGE7CiAgICB9LCA4MDApLAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG9wY2lvbmVzRXNwZWNpYWxlc1BlcnNvbmE6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IG9wY2lvbmVzID0gW107CiAgICAgIGlmICh0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IpIHsKICAgICAgICBvcGNpb25lcyA9IG9wY2lvbmVzLmNvbmNhdChbCiAgICAgICAgICB7CiAgICAgICAgICAgIHRleHRvVmlzaWJsZTogIkVsaW1pbmFyIGRlIGxhIGJhc2UgZGUgZGF0b3MiLAogICAgICAgICAgICBldmVudG86ICJlbGltaW5hbmRvc2VEZURhdGFiYXNlIiwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIHRleHRvVmlzaWJsZTogInJlc2V0ZWFyIGNvbnRyYXNlw7FhICgxMjM0NTYpIiwKICAgICAgICAgICAgZXZlbnRvOiAicmVzZXRlYW5kb1Bhc3MiLAogICAgICAgICAgfSwKICAgICAgICBdKTsKICAgICAgfQogICAgICByZXR1cm4gb3BjaW9uZXM7CiAgICB9LAogICAgcGVybWlzb0lsZWdhbCgpIHsKICAgICAgaWYgKHRoaXMucGVybWlzb0lucHV0Lmxlbmd0aCA8IDEpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoY2hhclByb2hpYmlkb3NQZXJtaXNvLnRlc3QodGhpcy5wZXJtaXNvSW5wdXQpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHBlcnNvbmFzVmlzaWJsZXMoKSB7CiAgICAgIHZhciB2aXNpYmxlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5wZXJzb25hcykpOwogICAgICBpZiAodGhpcy5tb3N0cmFyUGVyc29uYXMgPT09ICJwcm9mZXMiKSB7CiAgICAgICAgdmlzaWJsZXMgPSB2aXNpYmxlcy5maWx0ZXIoKHApID0+CiAgICAgICAgICBwLnBlcm1pc29zLmluY2x1ZGVzKCJtYWVzdHJhVmlkYS1wcm9mZXNvciIpCiAgICAgICAgKTsKICAgICAgfQogICAgICBlbHNlIGlmKHRoaXMubW9zdHJhclBlcnNvbmFzPT09J2VzdHVkaWFudGVzJyl7CiAgICAgICAgdmlzaWJsZXMgPSB2aXNpYmxlcy5maWx0ZXIoKHApID0+CiAgICAgICAgICBwLnBlcm1pc29zLmluY2x1ZGVzKCJtYWVzdHJhVmlkYS1lc3R1ZGlhbnRlIikKICAgICAgICApOwogICAgICB9CiAgICAgIGlmICh0aGlzLnRleHRvQnVzcXVlZGFVc2FkbykgewogICAgICAgIGNvbnN0IHRleHRvQnVzcXVlZGFTdHJpcHBlZD10aGlzLnRleHRvQnVzcXVlZGFVc2Fkby5ub3JtYWxpemUoIk5GRCIpLnJlcGxhY2UoL1xwe0RpYWNyaXRpY30vZ3UsICIiKTsKCiAgICAgICAgdmlzaWJsZXMuc29ydCgoYSwgYikgPT4gewogICAgICAgICAgdmFyIHJlcyA9IDA7CiAgICAgICAgICB2YXIgYVN0cmlwcGVkPShhLm5vbWJyZXMgKyAiICIgKyBhLmFwZWxsaWRvcykubm9ybWFsaXplKCJORkQiKS5yZXBsYWNlKC9ccHtEaWFjcml0aWN9L2d1LCAiIik7CiAgICAgICAgICB2YXIgYlN0cmlwcGVkPShiLm5vbWJyZXMgKyAiICIgKyBiLmFwZWxsaWRvcykubm9ybWFsaXplKCJORkQiKS5yZXBsYWNlKC9ccHtEaWFjcml0aWN9L2d1LCAiIik7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIChhU3RyaXBwZWQpLnRvTG93ZXJDYXNlKCkuc2VhcmNoKHRleHRvQnVzcXVlZGFTdHJpcHBlZC50b0xvd2VyQ2FzZSgpKSA+IC0xCiAgICAgICAgICApIHsKICAgICAgICAgICAgcmVzKys7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIChiU3RyaXBwZWQpLnRvTG93ZXJDYXNlKCkuc2VhcmNoKHRleHRvQnVzcXVlZGFTdHJpcHBlZC50b0xvd2VyQ2FzZSgpKSA+IC0xCiAgICAgICAgICApIHsKICAgICAgICAgICAgcmVzLS07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gLXJlczsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZpc2libGVzOwogICAgfSwKICB9LAogIHdhdGNoOiB7fSwKfTsK"},{"version":3,"sources":["Personas.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Personas.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"personas\">\n    <router-view> </router-view>\n    <div id=\"zonaBuscar\">\n      <div class=\"barraSuperior\">\n        <input\n          type=\"text\"\n          ref=\"inputBuscar\"\n          v-model=\"textoBuscar\"\n          @input=\"calcularBuscados\"\n          v-show=\"mostrandoInputBuscar\"\n        />\n        <div\n          class=\"boton\"\n          @click=\"iniciarBuscar\"\n          v-show=\"!mostrandoInputBuscar\"\n        >\n          <img src=\"@/assets/iconos/search.svg\" alt=\"Lupa\" />\n        </div>\n\n        <div\n          class=\"boton\"\n          title=\"Cancelar\"\n          @click=\"cancelarBusqueda\"\n          v-show=\"mostrandoInputBuscar\"\n        >\n          <img src=\"@/assets/iconos/equis.svg\" alt=\"Equis\" />\n        </div>\n      </div>\n    </div>\n    <div id=\"controlesPersonas\" class=\"contenedorControles\">\n      <div\n        class=\"boton\"\n        @click=\"\n          mostrarPersonas = mostrarPersonas === 'todos' ? 'profes' : mostrarPersonas==='profes'?'estudiantes': 'todos'\n        \"\n      >\n        <img\n          src=\"@/assets/iconos/users.svg\"\n          alt=\"Todos\"\n          v-show=\"mostrarPersonas === 'todos'\"\n        />\n        <img\n          src=\"@/assets/iconos/teacher.svg\"\n          alt=\"Profes\"\n          v-show=\"mostrarPersonas === 'profes'\"\n        />\n        <img\n          src=\"@/assets/iconos/graduationCap.svg\"\n          alt=\"Estudiantes\"\n          v-show=\"mostrarPersonas === 'estudiantes'\"\n        />\n      </div>\n    </div>\n    <div id=\"listaPersonas\" @click=\"idPersonaMenuCx = null\">\n      <loading v-show=\"loadingPersonas\" texto=\"Cargando lista de personas...\" />\n      <persona-vista-lista\n        :seleccionado=\"idPersonaSeleccionada === persona.id\"\n        @click.native=\"idPersonaSeleccionada = persona.id\"\n        :estaPersona=\"persona\"\n        :nodosSolidaridadPublicitados=\"nodosSolidaridadPublicitados\"\n        v-for=\"persona of personasVisibles\"\n        :key=\"persona.id\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from \"./utilidades/Loading.vue\";\nimport PersonaVistaLista from \"./usuario/personaVistaLista.vue\";\nimport debounce from \"debounce\";\n// import { similarity } from \"./utilidades/funciones\";\n\nconst charProhibidosPermiso = /[^ a-zA-Z-]/;\n\nexport const QUERY_PERSONAS = gql`\n  query {\n    todosUsuarios {\n      id\n      nombres\n      apellidos\n      permisos\n      username\n      informesMaestraVida{\n        id\n        year\n        periodo\n        idProfe\n        nombreProfe\n        categoria\n        texto\n      }\n      objetivosEstudiante{\n        id\n        nombre\n        estadoDesarrollo\n      }\n    }\n  }\n`;\n\nexport default {\n  name: \"Personas\",\n  components: {\n    Loading,\n    PersonaVistaLista,\n  },\n  apollo: {\n    personas: {\n      query: QUERY_PERSONAS,\n      update: function ({ todosUsuarios }) {\n        this.loadingPersonas = false;\n        return todosUsuarios;\n      },\n    },\n    nodosSolidaridadPublicitados:{\n      query:gql`\n        query{\n          nodosSolidaridadPublicitados{\n            id\n            nombre       \n            responsables     \n          }\n        }\n      `,\n    }\n  },\n  data() {\n    return {\n      personas: [],\n      nodosSolidaridadPublicitados:[],\n      idPersonaMenuCx: null,\n      idPersonaSeleccionada: null,\n      loadingPersonas: true,\n      mostrarPersonas: \"todos\",\n\n      permisoInput: \"\",\n      textoBuscar: null,\n      textoBusquedaUsado: null,\n      mostrandoInputBuscar: false,\n      buscados: [],\n\n      debouncingBusqueda: false,\n    };\n  },\n  methods: {\n    copiarId(e) {\n      let str = e.target.innerText.trim();\n      const el = document.createElement(\"textarea\");\n      el.value = str;\n      document.body.appendChild(el);\n      el.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(el);\n    },\n    eliminarPersonaDeDatabase(idPersona) {\n      if (confirm(\"¿Seguro de eliminar a este individuo?\")) {\n        console.log(\n          `Se eliminara una persona con id ${idPersona} de la base de datos`\n        );\n      }\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!) {\n              eliminarUsuario(idUsuario: $idUsuario)\n            }\n          `,\n          variables: {\n            idUsuario: idPersona,\n          },\n          update: (store, { data: { eliminarUsuario } }) => {\n            console.log(`Data: ${eliminarUsuario}`);\n            if (eliminarUsuario) {\n              try {\n                let cache = store.readQuery({\n                  query: QUERY_PERSONAS,\n                  variables: { idUsuario: idPersona },\n                });\n                console.log(`cache: ${cache}`);\n\n                let indexE = cache.todosUsuarios.findIndex(\n                  (p) => p.id == idPersona\n                );\n                if (indexE > -1) {\n                  cache.todosUsuarios.splice(indexE, 1);\n                }\n                console.log(`cache: ${cache}`);\n                store.writeQuery({\n                  query: QUERY_PERSONAS,\n                  variables: { idUsuario: idPersona },\n                  data: cache,\n                });\n              } catch (error) {\n                console.log(`Error actualizando cache. E:${error}`);\n              }\n            }\n          },\n        })\n        .then((res) => {\n          console.log(`Res: ${JSON.stringify(res)}`);\n          if (res.data) {\n            console.log(`Usuario eliminado exitosamente`);\n          }\n        })\n        .catch((error) => {\n          console.log(`Error eliminando usuario: E: ${error}`);\n        });\n    },\n    asignarPermisoTodos() {\n      if (this.permisoIlegal) {\n        console.log(`No enviado`);\n        return;\n      }\n\n      if (!confirm(\"¿Asignar este permiso a todas las personas?\")) return;\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($nuevoPermiso: String!) {\n              asignarPermisoTodosUsuarios(nuevoPermiso: $nuevoPermiso)\n            }\n          `,\n          variables: {\n            nuevoPermiso: this.permisoInput,\n          },\n        })\n        .then(() => {\n          alert(\n            \"Permiso \" + this.permisoInput + \" asignado para todos los usuarios\"\n          );\n        });\n    },\n    iniciarBuscar() {\n      this.mostrandoInputBuscar = true;\n      this.$nextTick(() => {\n        this.$refs.inputBuscar.focus();\n      });\n    },\n    cancelarBusqueda() {\n      this.buscados = [];\n      this.textoBuscar = null;\n      this.mostrandoInputBuscar = false;\n      this.textoBusquedaUsado = null;\n    },\n    calcularBuscados: debounce(function () {\n      console.log(`Setting textoBusquedaUsado`);\n      this.textoBusquedaUsado = this.textoBuscar;\n      // console.log(`Calculando buscados`);\n      // if (!this.textoBuscar) return;\n      // var lista = [];\n      // var texto = this.textoBuscar.trim();\n      // var campoPersonas =\n      //   this.mostrarPersonas === \"profes\"\n      //     ? this.personas.filter((p) =>\n      //         p.permisos.includes(\"maestraVida-profesor\")\n      //       )\n      //     : this.personas;\n\n      // campoPersonas.forEach((persona) => {\n      //   // console.log(`Buscando ${texto} en ${nombreLargo}`);\n      //   var puntajeSimilaridad=similarity(texto, nombreLargo);\n      //   var obj={};\n      //   obj[persona.id]=puntajeSimilaridad;\n      //   lista.push({obj});\n      //   console.log(`BINGO`);\n      // });\n\n      // this.buscados=lista;\n    }, 800),\n  },\n  computed: {\n    opcionesEspecialesPersona: function () {\n      let opciones = [];\n      if (this.usuarioSuperadministrador) {\n        opciones = opciones.concat([\n          {\n            textoVisible: \"Eliminar de la base de datos\",\n            evento: \"eliminandoseDeDatabase\",\n          },\n          {\n            textoVisible: \"resetear contraseña (123456)\",\n            evento: \"reseteandoPass\",\n          },\n        ]);\n      }\n      return opciones;\n    },\n    permisoIlegal() {\n      if (this.permisoInput.length < 1) {\n        return true;\n      }\n      if (charProhibidosPermiso.test(this.permisoInput)) {\n        return true;\n      }\n      return false;\n    },\n    personasVisibles() {\n      var visibles = JSON.parse(JSON.stringify(this.personas));\n      if (this.mostrarPersonas === \"profes\") {\n        visibles = visibles.filter((p) =>\n          p.permisos.includes(\"maestraVida-profesor\")\n        );\n      }\n      else if(this.mostrarPersonas==='estudiantes'){\n        visibles = visibles.filter((p) =>\n          p.permisos.includes(\"maestraVida-estudiante\")\n        );\n      }\n      if (this.textoBusquedaUsado) {\n        const textoBusquedaStripped=this.textoBusquedaUsado.normalize(\"NFD\").replace(/\\p{Diacritic}/gu, \"\");\n\n        visibles.sort((a, b) => {\n          var res = 0;\n          var aStripped=(a.nombres + \" \" + a.apellidos).normalize(\"NFD\").replace(/\\p{Diacritic}/gu, \"\");\n          var bStripped=(b.nombres + \" \" + b.apellidos).normalize(\"NFD\").replace(/\\p{Diacritic}/gu, \"\");\n          if (\n            (aStripped).toLowerCase().search(textoBusquedaStripped.toLowerCase()) > -1\n          ) {\n            res++;\n          }\n          if (\n            (bStripped).toLowerCase().search(textoBusquedaStripped.toLowerCase()) > -1\n          ) {\n            res--;\n          }\n          return -res;\n        });\n      }\n\n      return visibles;\n    },\n  },\n  watch: {},\n};\n</script>\n\n<style scoped>\n#listaPersonas {\n  display: flex;\n  padding-bottom: 50px;\n  flex-flow: row wrap;\n}\n\n#zonaBuscar {\n  padding: 10px 5px;\n}\n#zonaBuscar .barraSuperior {\n  display: flex;\n  align-items: center;\n}\n#zonaBuscar .barraSuperior input {\n  font-size: 20px;\n  border: 2px solid gray;\n  border-radius: 5px;\n  padding: 5px;\n  margin-right: 10px;\n}\n\n.personaVistaLista {\n}\n.personaVistaLista:hover {\n  background-color: rgba(128, 128, 128, 0.178);\n}\n\n.loading {\n  margin: 20px auto;\n}\n.botonPermisos {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  padding: 3px;\n  cursor: pointer;\n}\n\n.botonPermisos:hover {\n  background-color: rgba(128, 128, 128, 0.726);\n}\n</style>"]}]}