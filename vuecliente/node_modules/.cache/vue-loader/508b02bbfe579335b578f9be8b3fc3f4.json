{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/NodoGrado.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/NodoGrado.vue","mtime":1676563818640},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTG9hZGluZyBmcm9tICIuLi91dGlsaWRhZGVzL0xvYWRpbmcudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgTG9hZGluZyB9LAogIG5hbWU6ICJOb2RvR3JhZG8iLAogIHByb3BzOiB7CiAgICBlc3RlTm9kbzogT2JqZWN0LAogICAgY29tcGxldGFkbzogQm9vbGVhbiwKICAgIGNvbG9yU3VicnV0YTogU3RyaW5nLAogICAgc2VsZWNjaW9uYWRvOiBCb29sZWFuLAogICAgaWRVc3VhcmlvOiBTdHJpbmcsCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVudUN4OiBmYWxzZSwKICAgICAgbW9zdHJhbmRvRGVzY3JpcGNpb246IGZhbHNlLAoKICAgICAgdG9nZ2xpbmdFc3RhZG9Db21wbGV0YWRvOiBmYWxzZSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29sb3JCb2xpdGEoKSB7CiAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLmNvbG9yU3VicnV0YTsKCiAgICAgIGlmICh0aGlzLmNvbXBsZXRhZG8pIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSAidmFyKC0tYXRsYXNWZXJkZSkiOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGJhY2tncm91bmRDb2xvciwKICAgICAgfTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBhYnJpckRlc2NyaXBjaW9uKCkgewogICAgICB0aGlzLiRlbWl0KCJzZWxlY2Npb25hbWUiKTsKICAgICAgdGhpcy5tb3N0cmFuZG9EZXNjcmlwY2lvbiA9IHRydWU7CiAgICAgIHRoaXMubWVudUN4ID0gZmFsc2U7CiAgICB9LAogICAgYWJyaXJNZW51Q3goKSB7CiAgICAgIHRoaXMuJGVtaXQoInNlbGVjY2lvbmFtZSIpOwogICAgICB0aGlzLm1lbnVDeCA9IHRydWU7CiAgICB9LAogICAgdG9nZ2xlQ29tcGxldGFkbygpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb1Byb2ZlKSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGF1dG9yaXphZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnN0IG51ZXZvRXN0YWRvID0gIXRoaXMuY29tcGxldGFkbzsKCiAgICAgIHRoaXMudG9nZ2xpbmdFc3RhZG9Db21wbGV0YWRvID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvCiAgICAgICAgLm11dGF0ZSh7CiAgICAgICAgICBtdXRhdGlvbjogZ3FsYAogICAgICAgICAgICBtdXRhdGlvbiAoJGlkVXN1YXJpbzogSUQhLCAkaWROb2RvOiBJRCEsICRudWV2b0VzdGFkbzogQm9vbGVhbiEpIHsKICAgICAgICAgICAgICBzZXROb2RvR3JhZG9Db21wbGV0YWRvVXN1YXJpbygKICAgICAgICAgICAgICAgIGlkVXN1YXJpbzogJGlkVXN1YXJpbwogICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvCiAgICAgICAgICAgICAgICBudWV2b0VzdGFkbzogJG51ZXZvRXN0YWRvCiAgICAgICAgICAgICAgKSB7CiAgICAgICAgICAgICAgICBpZAogICAgICAgICAgICAgICAgbm9kb3NDb21wbGV0YWRvc1J1dGFHcmFkbwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgYCwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZFVzdWFyaW86IHRoaXMuaWRVc3VhcmlvLAogICAgICAgICAgICBpZE5vZG86IHRoaXMuZXN0ZU5vZG8uaWQsCiAgICAgICAgICAgIG51ZXZvRXN0YWRvLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMudG9nZ2xpbmdFc3RhZG9Db21wbGV0YWRvID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIgKyBlcnJvcik7CiAgICAgICAgICB0aGlzLnRvZ2dsaW5nRXN0YWRvQ29tcGxldGFkbyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY2Npb25hZG8oc2VsZWNjaW9uYWRvKSB7CiAgICAgIGlmICghc2VsZWNjaW9uYWRvKSB7CiAgICAgICAgdGhpcy5tZW51Q3ggPSBmYWxzZTsKICAgICAgICB0aGlzLm1vc3RyYW5kb0Rlc2NyaXBjaW9uID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["NodoGrado.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NodoGrado.vue","sourceRoot":"src/components/usuario","sourcesContent":["<template>\n  <div\n    class=\"nodoGrado\"\n    :class=\"seleccionado\"\n    @contextmenu.prevent=\"abrirMenuCx\"\n    @dblclick.stop=\"abrirDescripcion\"\n  >\n    <div id=\"laBolita\" :class=\"{ seleccionado }\" :style=\"[colorBolita]\"></div>\n\n    <div id=\"cartel\">\n      {{ esteNodo.nombre }}\n      <div\n        class=\"boton\"\n        id=\"botonOpciones\"\n        v-if=\"usuarioSuperadministrador || usuarioProfe\"\n        v-show=\"seleccionado\"\n        @click.stop=\"abrirMenuCx\"\n      >\n        <img\n          src=\"@/assets/iconos/ellipsisVertical.svg\"\n          alt=\"Opciones\"\n          style=\"\"\n        />\n      </div>\n    </div>\n\n    <div class=\"menuContextual\" @click.stop=\"\" v-show=\"menuCx\">\n      <div class=\"botonMenuCx\" @click=\"abrirDescripcion\">Ver descripci√≥n</div>\n      <div\n        v-if=\"usuarioSuperadministrador\"\n        class=\"botonMenuCx\"\n        @click=\"$emit('setColorSubruta')\"\n      >\n        Set color subruta\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioSuperadministrador || usuarioProfe\"\n        :class=\"{ deshabilitado: togglingEstadoCompletado }\"\n        @click=\"toggleCompletado\"\n      >\n        <loading v-show=\"togglingEstadoCompletado\" />\n        {{\n          completado ? \"Desmarcar como completado\" : \"Marcar como completado\"\n        }}\n      </div>\n    </div>\n\n    <div id=\"descripcion\" v-show=\"mostrandoDescripcion\">\n      {{ esteNodo.descripcion }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from \"../utilidades/Loading.vue\";\nexport default {\n  components: { Loading },\n  name: \"NodoGrado\",\n  props: {\n    esteNodo: Object,\n    completado: Boolean,\n    colorSubruta: String,\n    seleccionado: Boolean,\n    idUsuario: String,\n  },\n  data() {\n    return {\n      menuCx: false,\n      mostrandoDescripcion: false,\n\n      togglingEstadoCompletado: false,\n    };\n  },\n  computed: {\n    colorBolita() {\n      var backgroundColor = this.colorSubruta;\n\n      if (this.completado) {\n        backgroundColor = \"var(--atlasVerde)\";\n      }\n\n      return {\n        backgroundColor,\n      };\n    },\n  },\n  methods: {\n    abrirDescripcion() {\n      this.$emit(\"seleccioname\");\n      this.mostrandoDescripcion = true;\n      this.menuCx = false;\n    },\n    abrirMenuCx() {\n      this.$emit(\"seleccioname\");\n      this.menuCx = true;\n    },\n    toggleCompletado() {\n      if (!this.usuarioSuperadministrador && !this.usuarioProfe) {\n        console.log(\"No autorizado\");\n        return;\n      }\n\n      const nuevoEstado = !this.completado;\n\n      this.togglingEstadoCompletado = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!, $idNodo: ID!, $nuevoEstado: Boolean!) {\n              setNodoGradoCompletadoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n                nuevoEstado: $nuevoEstado\n              ) {\n                id\n                nodosCompletadosRutaGrado\n              }\n            }\n          `,\n          variables: {\n            idUsuario: this.idUsuario,\n            idNodo: this.esteNodo.id,\n            nuevoEstado,\n          },\n        })\n        .then(() => {\n          this.togglingEstadoCompletado = false;\n        })\n        .catch((error) => {\n          console.log(\"Error: \" + error);\n          this.togglingEstadoCompletado = false;\n        });\n    },\n  },\n  watch: {\n    seleccionado(seleccionado) {\n      if (!seleccionado) {\n        this.menuCx = false;\n        this.mostrandoDescripcion = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.nodoGrado {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  align-items: center;\n  position: relative;\n}\n\n.nodoGrado.seleccionado {\n  z-index: 1;\n}\n\n#laBolita {\n  border-radius: 50%;\n  border: 1px solid var(--gris);\n  width: 30px;\n  height: 30px;\n  flex-shrink: 0;\n  background-color: var(--gris);\n}\n\n#laBolita:not(.seleccionado) {\n  border-color: var(--gris);\n}\n\n#laBolita.seleccionado {\n  border-color: black;\n}\n\n#cartel {\n  font-size: 15px;\n  text-align: center;\n  border-radius: 10px;\n  background-color: whitesmoke;\n  padding: 10px 10px;\n  color: rgb(59, 59, 59);\n  position: relative;\n  max-width: 160px;\n}\n\n#botonOpciones {\n  position: absolute;\n  top: 50%;\n  left: calc(100% + 5px);\n  transform: translateY(-50%);\n}\n\n.menuContextual {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n}\n\n#descripcion {\n  position: absolute;\n  top: calc(100% - 10px);\n  z-index: 1;\n  padding: 10px 10px;\n  background-color: whitesmoke;\n}\n</style>"]}]}