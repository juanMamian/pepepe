{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/visorNodoConocimiento/SeccionNodoConocimiento.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/visorNodoConocimiento/SeccionNodoConocimiento.vue","mtime":1650491284149},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgppbXBvcnQgQXJjaGl2b1NlY2Npb25Ob2RvIGZyb20gIi4vYXJjaGl2b1NlY2Npb25Ob2RvLnZ1ZSI7CmltcG9ydCBMb2FkaW5nIGZyb20gIi4uL3V0aWxpZGFkZXMvTG9hZGluZy52dWUiOwppbXBvcnQgeyBjaGFyUHJvaGliaWRvc05vbWJyZUNvc2EgfSBmcm9tICIuLi9jb25maWdzIjsKaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGVzdGFTZWNjaW9uOiBPYmplY3QsCiAgICBpZE5vZG86IFN0cmluZywKICAgIHVzdWFyaW9FeHBlcnRvOiBCb29sZWFuLAogIH0sCiAgY29tcG9uZW50czogewogICAgQXJjaGl2b1NlY2Npb25Ob2RvLAogICAgTG9hZGluZywKICB9LAogIG5hbWU6ICJTZWNjaW9uTm9kb0Nvbm9jaW1pZW50byIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVkaXRhbmRvOiBmYWxzZSwKICAgICAgc3ViaWVuZG9BcmNoaXZvOiBmYWxzZSwKICAgICAgdmVyc2lvbkFyY2hpdm86IDAsCgogICAgICBlZGl0YW5kb05vbWJyZTogZmFsc2UsCiAgICAgIGVudmlhbmRvTnVldm9Ob21icmU6IGZhbHNlLAogICAgICBndWFyZGFuZG9OdWV2b0VubGFjZTpmYWxzZSwKICAgICAgaW5wdXROdWV2b0VubGFjZTp0aGlzLmVzdGFTZWNjaW9uLmVubGFjZSwKICAgICAgbW9kbzoiIiwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBzdWJpckFyY2hpdm9Db250ZW5pZG8oZSkgewogICAgICBjb25zdCBpbnB1dEFyY2hpdm8gPSBlLnRhcmdldDsKICAgICAgdmFyIGRhdG9zID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGNvbnN0IG51ZXZvQXJjaGl2byA9IGlucHV0QXJjaGl2by5maWxlc1swXTsKCiAgICAgIGRhdG9zLmFwcGVuZCgibnVldm9BcmNoaXZvIiwgbnVldm9BcmNoaXZvKTsKICAgICAgZGF0b3MuYXBwZW5kKCJpZE5vZG8iLCB0aGlzLmlkTm9kbyk7CiAgICAgIGRhdG9zLmFwcGVuZCgiaWRTZWNjaW9uIiwgdGhpcy5lc3RhU2VjY2lvbi5pZCk7CiAgICAgIHRoaXMuc3ViaWVuZG9BcmNoaXZvID0gdHJ1ZTsKICAgICAgYXhpb3MoewogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHVybDogdGhpcy5zZXJ2ZXJVcmwgKyAiL2FwaS9hdGxhcy9zdWJpckFyY2hpdm9Db250ZW5pZG9TZWNjaW9uTm9kbyIsCiAgICAgICAgZGF0YTogZGF0b3MsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJtdWx0aXBhcnQvZm9ybS1kYXRhIiwKICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuLAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHsgZGF0YTogeyBpbmZvQXJjaGl2byB9IH0pID0+IHsKICAgICAgICAgIHRoaXMuc3ViaWVuZG9BcmNoaXZvID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnZlcnNpb25BcmNoaXZvKys7CiAgICAgICAgICB0aGlzLiRlbWl0KCJzdWJpQXJjaGl2byIsIGluZm9BcmNoaXZvKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMuc3ViaWVuZG9BcmNoaXZvID0gZmFsc2U7CgogICAgICAgICAgY29uc29sZS5sb2coYEVycm9yIHN1YmllbmRvIGFyY2hpdm8uIEU6ICR7ZXJyb3J9YCk7CiAgICAgICAgfSk7CiAgICB9LAogICAgaW5pY2lhckVkaWNpb25Ob21icmUoKSB7CiAgICAgIHRoaXMuJHJlZnMuaW5wdXROdWV2b05vbWJyZS52YWx1ZSA9IHRoaXMuZXN0YVNlY2Npb24ubm9tYnJlOwogICAgICB0aGlzLmVkaXRhbmRvTm9tYnJlID0gdHJ1ZTsKICAgIH0sCiAgICBndWFyZGFyTnVldm9Ob21icmUoKSB7CiAgICAgIHZhciBudWV2b05vbWJyZSA9IHRoaXMuJHJlZnMuaW5wdXROdWV2b05vbWJyZS52YWx1ZS50cmltKCk7CiAgICAgIGlmIChudWV2b05vbWJyZSA9PSB0aGlzLmVzdGFTZWNjaW9uLm5vbWJyZSkgewogICAgICAgIHRoaXMuZWRpdGFuZG9Ob21icmUgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChudWV2b05vbWJyZS5sZW5ndGggPCAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChjaGFyUHJvaGliaWRvc05vbWJyZUNvc2EudGVzdChudWV2b05vbWJyZSkpIHsKICAgICAgICBjb25zb2xlLmxvZyhgQ2FyYWN0ZXJlcyBpbGVnYWxlc2ApOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coYGd1YXJkYW5kbyBudWV2byBub21icmVgKTsKICAgICAgdGhpcy5lbnZpYW5kb051ZXZvTm9tYnJlID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvCiAgICAgICAgLm11dGF0ZSh7CiAgICAgICAgICBtdXRhdGlvbjogZ3FsYAogICAgICAgICAgICBtdXRhdGlvbiAoCiAgICAgICAgICAgICAgJGlkTm9kbzogSUQhCiAgICAgICAgICAgICAgJGlkU2VjY2lvbjogSUQhCiAgICAgICAgICAgICAgJG51ZXZvTm9tYnJlOiBTdHJpbmchCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGVkaXRhck5vbWJyZVNlY2Npb25Ob2RvQ29ub2NpbWllbnRvKAogICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvCiAgICAgICAgICAgICAgICBpZFNlY2Npb246ICRpZFNlY2Npb24KICAgICAgICAgICAgICAgIG51ZXZvTm9tYnJlOiAkbnVldm9Ob21icmUKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIGlkCiAgICAgICAgICAgICAgICBub21icmUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWROb2RvOiB0aGlzLmlkTm9kbywKICAgICAgICAgICAgaWRTZWNjaW9uOiB0aGlzLmVzdGFTZWNjaW9uLmlkLAogICAgICAgICAgICBudWV2b05vbWJyZTogbnVldm9Ob21icmUsCiAgICAgICAgICB9LAogICAgICAgIH0pCiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBmaW4gZGUgbGEgbXV0YWNpb24uIERhdGE6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9IGApOwogICAgICAgICAgdGhpcy5lbnZpYW5kb051ZXZvTm9tYnJlID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmVkaXRhbmRvTm9tYnJlID0gZmFsc2U7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICB0aGlzLmVudmlhbmRvTnVldm9Ob21icmUgPSBmYWxzZTsKICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvci4gRSA6JHtlcnJvcn1gKTsKICAgICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGVNb2RvKCl7CiAgICAgIGNvbnN0IG51ZXZvTW9kbz10aGlzLm1vZG89PT0nYXJjaGl2byc/J2VubGFjZSc6J2FyY2hpdm8nOwogICAgICBjb25zb2xlLmxvZygiQ2FtYmlhbmRvIGEgIitudWV2b01vZG8pOwogICAgICB0aGlzLm1vZG89bnVldm9Nb2RvOwogICAgfSwKICAgIGd1YXJkYXJOdWV2b0VubGFjZSgpewogICAgICBjb25zb2xlLmxvZygiZ3VhcmRhciBudWV2byBlbmxhY2UiKTsKICAgICAgdmFyIG51ZXZvRW5sYWNlPXRoaXMuJHJlZnMuaW5wdXROdWV2b0VubGFjZS52YWx1ZS50cmltKCk7CiAgICAgIGNvbnNvbGUubG9nKG51ZXZvRW5sYWNlKTsKCiAgICAgIGlmKG51ZXZvRW5sYWNlPT09dGhpcy5lc3RhU2VjY2lvbi5lbmxhY2UgfHwgIW51ZXZvRW5sYWNlIHx8IG51ZXZvRW5sYWNlLmxlbmd0aDw1KXsKICAgICAgICByZXR1cm4gCiAgICAgIH0KCiAgICAgIGlmKCF0aGlzLnVzdWFyaW9FeHBlcnRvICYmICF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IpewogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIHRoaXMuZ3VhcmRhbmRvTnVldm9FbmxhY2U9dHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgIG11dGF0aW9uKCRpZE5vZG86IElEISwgJGlkU2VjY2lvbjpJRCEsICRudWV2b0VubGFjZTpTdHJpbmchKXsKICAgICAgICAgICAgc2V0TnVldm9FbmxhY2VTZWNjaW9uTm9kbyhpZE5vZG86ICRpZE5vZG8sIGlkU2VjY2lvbjogJGlkU2VjY2lvbiwgbnVldm9FbmxhY2U6ICRudWV2b0VubGFjZSl7CiAgICAgICAgICAgICAgaWQKICAgICAgICAgICAgICBtb2RvCiAgICAgICAgICAgICAgZW5sYWNlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICBgLAogICAgICAgIHZhcmlhYmxlczp7CiAgICAgICAgICBpZE5vZG86dGhpcy5pZE5vZG8sCiAgICAgICAgICBpZFNlY2Npb246IHRoaXMuZXN0YVNlY2Npb24uaWQsCiAgICAgICAgICBudWV2b0VubGFjZSwKICAgICAgICB9CgogICAgICB9KS50aGVuKCgpPT57CiAgICAgICAgdGhpcy5ndWFyZGFuZG9OdWV2b0VubGFjZT1mYWxzZTsKICAgICAgfSkuY2F0Y2goKGVycm9yKT0+ewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogIitlcnJvcik7CiAgICAgICAgdGhpcy5ndWFyZGFuZG9OdWV2b0VubGFjZT10cnVlOwoKICAgICAgfSkKCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZGlyZWNjaW9uTm9kbzogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5zZXJ2ZXJVcmwgKyAiL2Fzc2V0c0F0bGFzL2NvbnRlbmlkb3NOb2Rvcy8iICsgdGhpcy5pZE5vZG87CiAgICB9LAogICAgYXJjaGl2b3NPcmRlbmFkb3MoKSB7CiAgICAgIHZhciBhcmNoaXZvcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5lc3RhU2VjY2lvbi5hcmNoaXZvcykpOwogICAgICBhcmNoaXZvcy5zb3J0KChhKSA9PiB7CiAgICAgICAgaWYgKGEucHJpbWFyaW8pIHJldHVybiAtMTsKICAgICAgICByZXR1cm4gMDsKICAgICAgfSk7CiAgICAgIHJldHVybiBhcmNoaXZvczsKICAgIH0sCiAgICBzcmNJZnJhbWUoKXsKICAgICAgaWYodGhpcy5lc3RhU2VjY2lvbi5tb2RvPT09J2VubGFjZScgJiYgdGhpcy5lc3RhU2VjY2lvbi5lbmxhY2UpewogICAgICAgIHJldHVybiB0aGlzLmVzdGFTZWNjaW9uLmVubGFjZTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5kaXJlY2Npb25Ob2RvICsgJy8nICsgdGhpcy5lc3RhU2VjY2lvbi5pZCArICcvP3Y9JyArIHRoaXMudmVyc2lvbkFyY2hpdm87CiAgICB9LAogICAgCiAgfSwKICB3YXRjaDp7CiAgICAnZXN0YVNlY2Npb24ubW9kbyc6ewogICAgICBoYW5kbGVyOiBmdW5jdGlvbigpewogICAgICAgIHRoaXMubW9kbz10aGlzLmVzdGFTZWNjaW9uLm1vZG8KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgfQogIH0KfTsK"},{"version":3,"sources":["SeccionNodoConocimiento.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SeccionNodoConocimiento.vue","sourceRoot":"src/components/visorNodoConocimiento","sourcesContent":["<template>\n  <div class=\"seccionNodoConocimiento\">\n    <div class=\"contenedorControles\">\n      <div class=\"boton\" v-if=\"usuarioExperto || usuarioSuperadministrador\" @click=\"editando = !editando\">\n        <img src=\"@/assets/iconos/edit.svg\" alt=\"Editar\" />\n      </div>\n    </div>\n    <div id=\"zonaFront\" class=\"frontDeSeccion\" v-show=\"!editando\" :key=\"versionArchivo\">\n      <iframe\n        id=\"iframeSeccion\"\n        :src=\"srcIframe\"\n        v-if=\"estaSeccion.modo==='enlace' || (estaSeccion.tipoPrimario && estaSeccion.tipoPrimario.substring(0,5)!='image')\"\n        frameborder=\"0\"\n      ></iframe>\n      <img\n      :src=\"direccionNodo + '/' + estaSeccion.id + '/?v=' + versionArchivo\"\n      v-if=\"estaSeccion.modo==='archivo' && estaSeccion.tipoPrimario && estaSeccion.tipoPrimario.substring(0,5)==='image'\"\n      />\n    </div>\n\n    <div id=\"zonaAdministracion\" v-if=\"usuarioExperto || usuarioSuperadministrador\" v-show=\"editando\">\n      <div id=\"nombre\" v-show=\"!editandoNombre\" @click=\"iniciarEdicionNombre\">\n        {{ estaSeccion.nombre }}\n      </div>\n      <input\n        v-show=\"editandoNombre\"\n        type=\"text\"\n        name=\"\"\n        :value=\"estaSeccion.nombre\"\n        id=\"inputNuevoNombre\"\n        ref=\"inputNuevoNombre\"\n        :class=\"{deshabilitado: enviandoNuevoNombre}\"\n        @blur=\"guardarNuevoNombre\"\n        @keypress.enter=\"guardarNuevoNombre\"\n      />\n      <loading texto=\"\" v-show=\"enviandoNuevoNombre\"/>\n      <div class=\"contenedorControles\">\n        <div\n          class=\"boton\"\n          title=\"Subir un archivo\"\n          @click=\"$refs.inputArchivoContenido.click()\"\n          v-if=\"modo==='archivo'\"\n          v-show=\"!subiendoArchivo\"\n        >\n          <img src=\"@/assets/iconos/plusCircle.svg\" alt=\"Plus\" />\n        </div>\n        <loading texto=\"\" v-show=\"subiendoArchivo\" />\n\n        <div\n          class=\"boton\"\n          :title=\"\n            estaSeccion.modo === 'archivo'\n              ? 'Cambiar modo a enlace'\n              : 'Cambiar modo a archivo'\n          \"\n          @click.stop=\"toggleModo\"\n        >\n          <img\n            src=\"@/assets/iconos/file.svg\"\n            v-show=\"modo === 'archivo'\"\n            alt=\"Archivo\"\n          />\n          <img\n            src=\"@/assets/iconos/link.svg\"\n            v-show=\"modo === 'enlace'\"\n            alt=\"Archivo\"\n          />\n        </div>\n      </div>\n\n      <div id=\"listaArchivos\" v-show=\"modo === 'archivo'\">\n        <input\n          type=\"file\"\n          class=\"inputArchivoContenido\"\n          ref=\"inputArchivoContenido\"\n          v-show=\"false\"\n          @change=\"subirArchivoContenido($event)\"\n        />\n        <archivo-seccion-nodo\n          :esteArchivo=\"archivo\"\n          :usuarioExperto=\"usuarioExperto\"\n          :idNodo=\"idNodo\"\n          :idSeccion=\"estaSeccion.id\"\n          v-for=\"archivo of archivosOrdenados\"\n          :key=\"archivo.id\"\n          @meElimine=\"$emit('archivoEliminado', archivo.nombre)\"\n          @soyPrimario=\"\n            $emit('tengoNuevoPrimario', archivo.nombre);\n            versionArchivo++;\n          \"\n        />\n      </div>\n\n      <div id=\"zonaEnlace\" v-show=\"modo==='enlace'\">\n        \n        <input type=\"text\" id=\"inputNuevoEnlace\" ref=\"inputNuevoEnlace\" v-model=\"inputNuevoEnlace\" @blur=\"guardarNuevoEnlace\" placeholder=\"Enlace al recurso\" @keypress.enter=\"guardarNuevoEnlace\">\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nimport ArchivoSeccionNodo from \"./archivoSeccionNodo.vue\";\nimport Loading from \"../utilidades/Loading.vue\";\nimport { charProhibidosNombreCosa } from \"../configs\";\nimport gql from \"graphql-tag\";\n\nexport default {\n  props: {\n    estaSeccion: Object,\n    idNodo: String,\n    usuarioExperto: Boolean,\n  },\n  components: {\n    ArchivoSeccionNodo,\n    Loading,\n  },\n  name: \"SeccionNodoConocimiento\",\n  data() {\n    return {\n      editando: false,\n      subiendoArchivo: false,\n      versionArchivo: 0,\n\n      editandoNombre: false,\n      enviandoNuevoNombre: false,\n      guardandoNuevoEnlace:false,\n      inputNuevoEnlace:this.estaSeccion.enlace,\n      modo:\"\",\n    };\n  },\n  methods: {\n    subirArchivoContenido(e) {\n      const inputArchivo = e.target;\n      var datos = new FormData();\n      const nuevoArchivo = inputArchivo.files[0];\n\n      datos.append(\"nuevoArchivo\", nuevoArchivo);\n      datos.append(\"idNodo\", this.idNodo);\n      datos.append(\"idSeccion\", this.estaSeccion.id);\n      this.subiendoArchivo = true;\n      axios({\n        method: \"post\",\n        url: this.serverUrl + \"/api/atlas/subirArchivoContenidoSeccionNodo\",\n        data: datos,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: \"Bearer \" + this.$store.state.token,\n        },\n      })\n        .then(({ data: { infoArchivo } }) => {\n          this.subiendoArchivo = false;\n          this.versionArchivo++;\n          this.$emit(\"subiArchivo\", infoArchivo);\n        })\n        .catch((error) => {\n          this.subiendoArchivo = false;\n\n          console.log(`Error subiendo archivo. E: ${error}`);\n        });\n    },\n    iniciarEdicionNombre() {\n      this.$refs.inputNuevoNombre.value = this.estaSeccion.nombre;\n      this.editandoNombre = true;\n    },\n    guardarNuevoNombre() {\n      var nuevoNombre = this.$refs.inputNuevoNombre.value.trim();\n      if (nuevoNombre == this.estaSeccion.nombre) {\n        this.editandoNombre = false;\n        return;\n      }\n\n      if (nuevoNombre.length < 1) {\n        return;\n      }\n      if (charProhibidosNombreCosa.test(nuevoNombre)) {\n        console.log(`Caracteres ilegales`);\n        return;\n      }\n\n      console.log(`guardando nuevo nombre`);\n      this.enviandoNuevoNombre = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation (\n              $idNodo: ID!\n              $idSeccion: ID!\n              $nuevoNombre: String!\n            ) {\n              editarNombreSeccionNodoConocimiento(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          `,\n          variables: {\n            idNodo: this.idNodo,\n            idSeccion: this.estaSeccion.id,\n            nuevoNombre: nuevoNombre,\n          },\n        })\n        .then((data) => {\n          console.log(`fin de la mutacion. Data: ${JSON.stringify(data)} `);\n          this.enviandoNuevoNombre = false;\n          this.editandoNombre = false;\n        })\n        .catch((error) => {\n          this.enviandoNuevoNombre = false;\n          console.log(`Error. E :${error}`);\n        });\n    },\n    toggleModo(){\n      const nuevoModo=this.modo==='archivo'?'enlace':'archivo';\n      console.log(\"Cambiando a \"+nuevoModo);\n      this.modo=nuevoModo;\n    },\n    guardarNuevoEnlace(){\n      console.log(\"guardar nuevo enlace\");\n      var nuevoEnlace=this.$refs.inputNuevoEnlace.value.trim();\n      console.log(nuevoEnlace);\n\n      if(nuevoEnlace===this.estaSeccion.enlace || !nuevoEnlace || nuevoEnlace.length<5){\n        return \n      }\n\n      if(!this.usuarioExperto && !this.usuarioSuperadministrador){\n        return\n      }\n      this.guardandoNuevoEnlace=true;\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation($idNodo: ID!, $idSeccion:ID!, $nuevoEnlace:String!){\n            setNuevoEnlaceSeccionNodo(idNodo: $idNodo, idSeccion: $idSeccion, nuevoEnlace: $nuevoEnlace){\n              id\n              modo\n              enlace\n            }\n          }\n        `,\n        variables:{\n          idNodo:this.idNodo,\n          idSeccion: this.estaSeccion.id,\n          nuevoEnlace,\n        }\n\n      }).then(()=>{\n        this.guardandoNuevoEnlace=false;\n      }).catch((error)=>{\n        console.log(\"Error: \"+error);\n        this.guardandoNuevoEnlace=true;\n\n      })\n\n    }\n  },\n  computed: {\n    direccionNodo: function () {\n      return this.serverUrl + \"/assetsAtlas/contenidosNodos/\" + this.idNodo;\n    },\n    archivosOrdenados() {\n      var archivos = JSON.parse(JSON.stringify(this.estaSeccion.archivos));\n      archivos.sort((a) => {\n        if (a.primario) return -1;\n        return 0;\n      });\n      return archivos;\n    },\n    srcIframe(){\n      if(this.estaSeccion.modo==='enlace' && this.estaSeccion.enlace){\n        return this.estaSeccion.enlace;\n      }\n      return this.direccionNodo + '/' + this.estaSeccion.id + '/?v=' + this.versionArchivo;\n    },\n    \n  },\n  watch:{\n    'estaSeccion.modo':{\n      handler: function(){\n        this.modo=this.estaSeccion.modo\n      },\n      immediate: true,\n    }\n  }\n};\n</script>\n\n<style scoped>\n.seccionNodoConocimiento {\n  width: 100%;  \n}\n#zonaFront{  \n  max-width:100vw;\n  margin: 5px auto;\n}\n#zonaFront iframe{\n  \n  width: 100%;\n}\n#zonaFront img{\n  max-width: 100%;\n  margin: 0px auto;\n  display:block;\n}\n#inputNuevoEnlace{\n  margin: 10px auto;\n  display: block;\n}\n#iframeSeccion {\n  width: 100%;\n  height: 100vh;\n}\n#zonaAdministracion {\n  width: min(500px, 90vw);\n  border-radius: 10px;\n  margin: 0px auto;\n  background-color: var(--paletaMain);\n  padding: 10px 0px;\n  min-height: 300px;\n}\n#nombre {\n  text-align: center;\n}\n#inputNuevoNombre {\n  display: block;\n  margin: 15px auto;\n  padding: 5px;\n  border-radius: 5px;\n  font-size: 16px;\n  color: rgb(48, 48, 48);\n}\n</style>\n"]}]}