{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/calendario/DiaOrganizadorHorario.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/calendario/DiaOrganizadorHorario.vue","mtime":1674568326919},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBjb25zdCBmcmFnbWVudG9CbG9xdWVIb3JhcmlvID0gZ3FsYAogIGZyYWdtZW50IGZyYWdCbG9xdWVIb3JhcmlvIG9uIEl0ZXJhY2lvblNlbWFuYWxFc3BhY2lvIHsKICAgIGlkCiAgICBtaWxsaXNJbmljaW8KICAgIG1pbGxpc0ZpbmFsCiAgICBpZHNQYXJ0aWNpcGFudGVzQ29uc3RhbnRlcwogICAgZGlhU2VtYW5hCiAgICBub21icmVFc3BhY2lvCiAgICBpZEFkbWluaXN0cmFkb3JFc3BhY2lvCiAgICBpZEVzcGFjaW8KICAgIHBhcmFDaGlxdWlzCiAgfQpgOwoKaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CmltcG9ydCBCbG9xdWVIb3JhcmlvIGZyb20gIi4vQmxvcXVlSG9yYXJpby52dWUiOwppbXBvcnQgQmxvcXVlQ3JlYWNpb25Ib3JhcmlvIGZyb20gIi4vQmxvcXVlQ3JlYWNpb25Ib3JhcmlvLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEJsb3F1ZUhvcmFyaW8sIEJsb3F1ZUNyZWFjaW9uSG9yYXJpbyB9LAogIG5hbWU6ICJEaWFPcmdhbml6YWRvckhvcmFyaW8iLAogIHByb3BzOiB7CiAgICBtb3N0cmFyQ2FudGlkYWRBc2lzdGVudGVzOkJvb2xlYW4sCiAgICBub21icmVEaWE6IFN0cmluZywKICAgIG51bWVyb0RpYTogTnVtYmVyLAogICAgaWRFc3BhY2lvQ3JlYXI6IFN0cmluZywKICAgIGlkQmxvcXVlU2VsZWNjaW9uYWRvOiBTdHJpbmcsCiAgICBibG9xdWVzSG9yYXJpbzogQXJyYXksCiAgICBpZEJsb3F1ZU1lbnVDb250ZXh0dWFsOiBTdHJpbmcsCiAgICBmYWN0b3Jab29tOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfSwKICAgIH0sCiAgICBvZmZzZXQ6IE51bWJlciwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWludXRvc1JlbGV2YW50ZXNCYXNlOiBbNDgwLCA1NDAsIDYwMCwgNjMwLCA3NTAsIDgxMCwgODcwLCA5MzBdLAogICAgICBjcmVhbmRvQmxvcXVlSG9yYXJpbzogZmFsc2UsCiAgICAgIGFuY2hvRGlhTWludXRvczogNDkwLAoKICAgICAgaGVpZ2h0QmxvcXVlczogMTAwLAogICAgICBnYXBGaWxhczogMTAsCgogICAgICBibG9xdWVDcmVhY2lvbkhvcmFyaW86IG51bGwsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG1pbnV0b3NSZWxldmFudGVzKCkgewogICAgICByZXR1cm4gdGhpcy5taW51dG9zUmVsZXZhbnRlc0Jhc2U7CiAgICB9LAogICAgYmxvcXVlc0hvcmFyaW9Qcmlvcml6YWRvcygpIHsKICAgICAgdmFyIGxpc3RhRmluYWwgPSBbLi4udGhpcy5ibG9xdWVzSG9yYXJpb10uc29ydCgoYSwgYikgPT4gewogICAgICAgIHZhciByZXMgPSAwOwoKICAgICAgICBpZiAoYS5pZEFkbWluaXN0cmFkb3JFc3BhY2lvID09PSB0aGlzLnVzdWFyaW8uaWQpIHsKICAgICAgICAgIHJlcysrOwogICAgICAgIH0KCiAgICAgICAgaWYgKGIuaWRBZG1pbmlzdHJhZG9yRXNwYWNpbyA9PT0gdGhpcy51c3VhcmlvLmlkKSB7CiAgICAgICAgICByZXMtLTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAtcmVzOwogICAgICB9KTsKCiAgICAgIHJldHVybiBsaXN0YUZpbmFsOwogICAgfSwKICAgIGJsb3F1ZXNIb3JhcmlvRW5yaXF1ZWNpZG9zKCkgewogICAgICB2YXIgbGlzdGFGaW5hbCA9IFsKICAgICAgICAuLi50aGlzLmJsb3F1ZXNIb3JhcmlvUHJpb3JpemFkb3MubWFwKChibG9xdWUpID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC4uLmJsb3F1ZSwKICAgICAgICAgICAgZmlsYTogMCwKICAgICAgICAgIH07CiAgICAgICAgfSksCiAgICAgIF07CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdGFGaW5hbC5sZW5ndGg7IGkrKykgewogICAgICAgIC8vQ2hlY2sgYW50ZXJpb3JlcyBwYXJhIHNhYmVyIHNpIGhheSBjaG9xdWUKICAgICAgICBsZXQgZXN0ZUJsb3F1ZSA9IGxpc3RhRmluYWxbaV07CiAgICAgICAgZm9yICh2YXIgaiA9IGk7IGogPj0gMDsgai0tKSB7CiAgICAgICAgICBsZXQgYmxvcXVlQW50ZXJpb3IgPSBsaXN0YUZpbmFsW2pdOwogICAgICAgICAgbGV0IGNvbGlzaW9uID0KICAgICAgICAgICAgKGJsb3F1ZUFudGVyaW9yLm1pbGxpc0luaWNpbyA+PSBlc3RlQmxvcXVlLm1pbGxpc0luaWNpbyAmJgogICAgICAgICAgICAgIGJsb3F1ZUFudGVyaW9yLm1pbGxpc0luaWNpbyA8IGVzdGVCbG9xdWUubWlsbGlzRmluYWwpIHx8CiAgICAgICAgICAgIChibG9xdWVBbnRlcmlvci5taWxsaXNGaW5hbCA+IGVzdGVCbG9xdWUubWlsbGlzSW5pY2lvICYmCiAgICAgICAgICAgICAgYmxvcXVlQW50ZXJpb3IubWlsbGlzRmluYWwgPD0gZXN0ZUJsb3F1ZS5taWxsaXNGaW5hbCkgfHwKICAgICAgICAgICAgKGJsb3F1ZUFudGVyaW9yLm1pbGxpc0luaWNpbyA8PSBlc3RlQmxvcXVlLm1pbGxpc0luaWNpbyAmJgogICAgICAgICAgICAgIGJsb3F1ZUFudGVyaW9yLm1pbGxpc0ZpbmFsID49IGVzdGVCbG9xdWUubWlsbGlzRmluYWwpOwogICAgICAgICAgaWYgKGNvbGlzaW9uICYmIGJsb3F1ZUFudGVyaW9yLmZpbGEgPj0gZXN0ZUJsb3F1ZS5maWxhKSB7CiAgICAgICAgICAgIGxldCBudWV2YUZpbGEgPSBibG9xdWVBbnRlcmlvci5maWxhICsgMTsKICAgICAgICAgICAgZXN0ZUJsb3F1ZS5maWxhID0gbnVldmFGaWxhOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGxpc3RhRmluYWw7CiAgICB9LAoKICAgIG1heEZpbGEoKSB7CiAgICAgIHZhciBtYXhGaWxhID0gdGhpcy5ibG9xdWVzSG9yYXJpb0VucmlxdWVjaWRvcy5yZWR1Y2UoKGFjYywgYmxvcXVlKSA9PiB7CiAgICAgICAgaWYgKGJsb3F1ZS5maWxhID4gYWNjKSB7CiAgICAgICAgICByZXR1cm4gYmxvcXVlLmZpbGE7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYWNjOwogICAgICB9LCAwKTsKCiAgICAgIHJldHVybiBtYXhGaWxhOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIHRvVGllbXBvRm9ybWF0ZWFkbyhtaW51dG9zKSB7CiAgICAgIHZhciBob3JhcyA9IE1hdGguZmxvb3IobWludXRvcyAvIDYwKTsKICAgICAgaWYgKFN0cmluZyhob3JhcykubGVuZ3RoIDwgMikgewogICAgICAgIGhvcmFzID0gIjAiICsgaG9yYXM7CiAgICAgIH0KCiAgICAgIHZhciBtaW51dG9zU29sb3MgPSBTdHJpbmcoTWF0aC5yb3VuZChtaW51dG9zIC0gaG9yYXMgKiA2MCkpOwoKICAgICAgaWYgKG1pbnV0b3NTb2xvcy5sZW5ndGggPCAyKSB7CiAgICAgICAgbWludXRvc1NvbG9zID0gIjAiICsgbWludXRvc1NvbG9zOwogICAgICB9CgogICAgICByZXR1cm4gaG9yYXMgKyAiOiIgKyBtaW51dG9zU29sb3M7CiAgICB9LAoKICAgIG1vc3RyYXJDYWxjdWxvTWludXRvcygpIHt9LAoKICAgIGluaWNpYXJDcmVhY2lvbkJsb3F1ZUhvcmFyaW8oZSkgewogICAgICBjb25zdCBwb3NEaWEgPSB0aGlzLiRyZWZzLnpvbmFCbG9xdWVzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBjb25zdCB4TW91c2UgPSBlLmNsaWVudFg7CgogICAgICBjb25zdCB4UmVzID0geE1vdXNlIC0gcG9zRGlhLmxlZnQ7CgogICAgICBjb25zdCBtaW51dG9zSW5pY2lvID0KICAgICAgICAodGhpcy5hbmNob0RpYU1pbnV0b3MgLyBwb3NEaWEud2lkdGgpICogeFJlcyArIHRoaXMub2Zmc2V0OwoKICAgICAgY29uc29sZS5sb2coCiAgICAgICAgIkNyZWFuZG8gYmxvcXVlIGRlIGhvcmFyaW8gZW4gIiArIHRoaXMudG9UaWVtcG9Gb3JtYXRlYWRvKG1pbnV0b3NJbmljaW8pCiAgICAgICk7CgogICAgICB2YXIgbWludXRvc0luaWNpb0NvcnJlZ2lkbyA9IG1pbnV0b3NJbmljaW87CiAgICAgIHZhciBtaW51dG9zRmluYWxDb3JyZWdpZG8gPSBtaW51dG9zSW5pY2lvQ29ycmVnaWRvICsgNjA7CgogICAgICBpZiAobWludXRvc0luaWNpbyA+PSA0ODAgJiYgbWludXRvc0luaWNpbyA8IDU0MCkgewogICAgICAgIC8vRXN0YW1vcyBlbiBlbCBwcmltZXIgYmxvcXVlCiAgICAgICAgbWludXRvc0luaWNpb0NvcnJlZ2lkbyA9IDQ4MDsKICAgICAgICBtaW51dG9zRmluYWxDb3JyZWdpZG8gPSA1NDA7CiAgICAgIH0gZWxzZSBpZiAobWludXRvc0luaWNpbyA+PSA1NDAgJiYgbWludXRvc0luaWNpbyA8IDYwMCkgewogICAgICAgIC8vU2VndW5kbyBibG9xdWUgcGVybyBhbnRlcyBkZSByZWZyaWdlcmlvLgogICAgICAgIG1pbnV0b3NJbmljaW9Db3JyZWdpZG8gPSA1NDA7CiAgICAgICAgbWludXRvc0ZpbmFsQ29ycmVnaWRvID0gNjAwOwogICAgICB9IGVsc2UgaWYgKG1pbnV0b3NJbmljaW8gPj0gNjMwICYmIG1pbnV0b3NJbmljaW8gPCA3NTApIHsKICAgICAgICAvL0Jsb3F1ZSBpbnRlcm1lZGlvLgogICAgICAgIG1pbnV0b3NJbmljaW9Db3JyZWdpZG8gPSA2MzA7CiAgICAgICAgbWludXRvc0ZpbmFsQ29ycmVnaWRvID0gNzUwOwogICAgICB9IGVsc2UgaWYgKG1pbnV0b3NJbmljaW8gPj0gODEwICYmIG1pbnV0b3NJbmljaW8gPCA4NzApIHsKICAgICAgICAvL1NlZ3VuZG8gYmxvcXVlIHBlcm8gYW50ZXMgZGUgcmVmcmlnZXJpby4KICAgICAgICBtaW51dG9zSW5pY2lvQ29ycmVnaWRvID0gODEwOwogICAgICAgIG1pbnV0b3NGaW5hbENvcnJlZ2lkbyA9IDg3MDsKICAgICAgfSBlbHNlIGlmIChtaW51dG9zSW5pY2lvID49IDg3MCAmJiBtaW51dG9zSW5pY2lvIDwgOTMwKSB7CiAgICAgICAgLy9TZWd1bmRvIGJsb3F1ZSBwZXJvIGFudGVzIGRlIHJlZnJpZ2VyaW8uCiAgICAgICAgbWludXRvc0luaWNpb0NvcnJlZ2lkbyA9IDg3MDsKICAgICAgICBtaW51dG9zRmluYWxDb3JyZWdpZG8gPSA5MzA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIkVuIHpvbmEgbm8gY29uc2lkZXJhZGEiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKAogICAgICAgIGBDb3JyZWdpZG8gYSAke3RoaXMudG9UaWVtcG9Gb3JtYXRlYWRvKG1pbnV0b3NJbmljaW9Db3JyZWdpZG8pfWAKICAgICAgKTsKCiAgICAgIHZhciBtaWxsaXNJbmljaW8gPSBtaW51dG9zSW5pY2lvQ29ycmVnaWRvICogNjAwMDA7CiAgICAgIHZhciBtaWxsaXNGaW5hbCA9IG1pbnV0b3NGaW5hbENvcnJlZ2lkbyAqIDYwMDAwOwoKICAgICAgdGhpcy5ibG9xdWVDcmVhY2lvbkhvcmFyaW8gPSB7CiAgICAgICAgbWlsbGlzSW5pY2lvLAogICAgICAgIG1pbGxpc0ZpbmFsLAogICAgICB9OwogICAgfSwKCiAgICBjcmVhckJsb3F1ZUhvcmFyaW8oaWRFc3BhY2lvQ3JlYXIpIHsKICAgICAgaWYgKCF0aGlzLmlkRXNwYWNpb0NyZWFyIHx8ICF0aGlzLmJsb3F1ZUNyZWFjaW9uSG9yYXJpbykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5jcmVhbmRvQmxvcXVlSG9yYXJpbyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsbwogICAgICAgIC5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGdxbGAKICAgICAgICAgICAgbXV0YXRpb24gKAogICAgICAgICAgICAgICRpZEVzcGFjaW86IElEIQogICAgICAgICAgICAgICRtaWxsaXNJbmljaW86IEludCEKICAgICAgICAgICAgICAkZGlhU2VtYW5hOiBJbnQhCiAgICAgICAgICAgICAgJG1pbGxpc0ZpbmFsOiBJbnQhCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIGNyZWFyQmxvcXVlSG9yYXJpbygKICAgICAgICAgICAgICAgIGlkRXNwYWNpbzogJGlkRXNwYWNpbwogICAgICAgICAgICAgICAgbWlsbGlzSW5pY2lvOiAkbWlsbGlzSW5pY2lvCiAgICAgICAgICAgICAgICBkaWFTZW1hbmE6ICRkaWFTZW1hbmEKICAgICAgICAgICAgICAgIG1pbGxpc0ZpbmFsOiAkbWlsbGlzRmluYWwKICAgICAgICAgICAgICApIHsKICAgICAgICAgICAgICAgIC4uLmZyYWdCbG9xdWVIb3JhcmlvCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgICR7ZnJhZ21lbnRvQmxvcXVlSG9yYXJpb30KICAgICAgICAgIGAsCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWRFc3BhY2lvOiBpZEVzcGFjaW9DcmVhciwKICAgICAgICAgICAgbWlsbGlzSW5pY2lvOiB0aGlzLmJsb3F1ZUNyZWFjaW9uSG9yYXJpby5taWxsaXNJbmljaW8sCiAgICAgICAgICAgIG1pbGxpc0ZpbmFsOiB0aGlzLmJsb3F1ZUNyZWFjaW9uSG9yYXJpby5taWxsaXNGaW5hbCwKICAgICAgICAgICAgZGlhU2VtYW5hOiB0aGlzLm51bWVyb0RpYSwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICAudGhlbigoeyBkYXRhOiB7IGNyZWFyQmxvcXVlSG9yYXJpbyB9IH0pID0+IHsKICAgICAgICAgIHRoaXMuY3JlYW5kb0Jsb3F1ZUhvcmFyaW8gPSBmYWxzZTsKICAgICAgICAgIHRoaXMuJGVtaXQoImJsb3F1ZUhvcmFyaW9DcmVhZG8iLCBjcmVhckJsb3F1ZUhvcmFyaW8pOwogICAgICAgICAgdGhpcy5ibG9xdWVDcmVhY2lvbkhvcmFyaW89bnVsbDsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogIiArIGVycm9yKTsKICAgICAgICAgIHRoaXMuY3JlYW5kb0Jsb3F1ZUhvcmFyaW8gPSBmYWxzZTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["DiaOrganizadorHorario.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DiaOrganizadorHorario.vue","sourceRoot":"src/components/calendario","sourcesContent":["<template>\n  <div class=\"diaOrganizadorHorario\" >\n    <div id=\"nombreDia\">\n      {{ nombreDia }}\n    </div>\n\n    \n\n    <div\n      id=\"zonaBloques\"\n      ref=\"zonaBloques\"\n      :style=\"[\n        {\n          width: Math.round(anchoDiaMinutos * factorZoom) + 'px',\n          height: maxFila * (heightBloques + 6 * gapFilas) + 'px',\n        },\n      ]\"\n      @dblclick.self=\"iniciarCreacionBloqueHorario\"\n      @click.self=\"bloqueCreacionHorario=null\"\n    >\n    <bloque-creacion-horario\n    v-if=\"bloqueCreacionHorario\"\n    style=\"z-index: 100000\"\n      :style=\"[\n        {\n          left: (bloqueCreacionHorario.millisInicio / 60000 - offset) * factorZoom + 'px',\n          top:\n            ((1 * gapFilas) - 5) +\n            'px',          \n        },\n      ]\"\n      :esteBloque=\"bloqueCreacionHorario\"\n      @espacioSeleccionado=\"crearBloqueHorario\"\n    />\n      <bloque-horario\n        v-for=\"bloque of bloquesHorarioEnriquecidos\"\n        :key=\"bloque.id\"\n        :esteBloque=\"bloque\"\n        :factorZoom=\"factorZoom\"\n        :style=\"[\n          {\n            left: (bloque.millisInicio / 60000 - offset) * factorZoom + 'px',\n            top:\n              1 * gapFilas +\n              (bloque.fila - 1) * (heightBloques + gapFilas) +\n              'px',\n            zIndex:\n              bloque.id === idBloqueMenuContextual\n                ? 10000\n                : bloque.id === idBloqueSeleccionado\n                ? 1000\n                : 100 - bloque.fila,\n          },\n        ]\"\n        :idBloqueMenuContextual=\"idBloqueMenuContextual\"\n        :idBloqueSeleccionado=\"idBloqueSeleccionado\"\n        :mostrarCantidadAsistentes=\"mostrarCantidadAsistentes\"\n        @meElimine=\"$emit('bloqueEliminado', bloque.id)\"\n        @menuContextual=\"$emit('menuContextualBloque', $event)\"\n        @seleccionado=\"$emit('bloqueSeleccionado', bloque.id)\"\n        @expandirme=\"$emit('expandirBloque', bloque.id)\"\n      />\n    </div>\n    <div id=\"barraHoras\">\n      <div\n        class=\"marcaTiempo\"\n        v-for=\"minutos of minutosRelevantes\"\n        :key=\"'minuto' + minutos\"\n        :style=\"[{ left: Math.round((minutos - offset) * factorZoom) + 'px' }]\"\n      >\n        {{ toTiempoFormateado(minutos) }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport const fragmentoBloqueHorario = gql`\n  fragment fragBloqueHorario on IteracionSemanalEspacio {\n    id\n    millisInicio\n    millisFinal\n    idsParticipantesConstantes\n    diaSemana\n    nombreEspacio\n    idAdministradorEspacio\n    idEspacio\n    paraChiquis\n  }\n`;\n\nimport gql from \"graphql-tag\";\nimport BloqueHorario from \"./BloqueHorario.vue\";\nimport BloqueCreacionHorario from \"./BloqueCreacionHorario.vue\";\nexport default {\n  components: { BloqueHorario, BloqueCreacionHorario },\n  name: \"DiaOrganizadorHorario\",\n  props: {\n    mostrarCantidadAsistentes:Boolean,\n    nombreDia: String,\n    numeroDia: Number,\n    idEspacioCrear: String,\n    idBloqueSeleccionado: String,\n    bloquesHorario: Array,\n    idBloqueMenuContextual: String,\n    factorZoom: {\n      type: Number,\n      default() {\n        return 1;\n      },\n    },\n    offset: Number,\n  },\n\n  data() {\n    return {\n      minutosRelevantesBase: [480, 540, 600, 630, 750, 810, 870, 930],\n      creandoBloqueHorario: false,\n      anchoDiaMinutos: 490,\n\n      heightBloques: 100,\n      gapFilas: 10,\n\n      bloqueCreacionHorario: null,\n    };\n  },\n  computed: {\n    minutosRelevantes() {\n      return this.minutosRelevantesBase;\n    },\n    bloquesHorarioPriorizados() {\n      var listaFinal = [...this.bloquesHorario].sort((a, b) => {\n        var res = 0;\n\n        if (a.idAdministradorEspacio === this.usuario.id) {\n          res++;\n        }\n\n        if (b.idAdministradorEspacio === this.usuario.id) {\n          res--;\n        }\n\n        return -res;\n      });\n\n      return listaFinal;\n    },\n    bloquesHorarioEnriquecidos() {\n      var listaFinal = [\n        ...this.bloquesHorarioPriorizados.map((bloque) => {\n          return {\n            ...bloque,\n            fila: 0,\n          };\n        }),\n      ];\n      for (var i = 0; i < listaFinal.length; i++) {\n        //Check anteriores para saber si hay choque\n        let esteBloque = listaFinal[i];\n        for (var j = i; j >= 0; j--) {\n          let bloqueAnterior = listaFinal[j];\n          let colision =\n            (bloqueAnterior.millisInicio >= esteBloque.millisInicio &&\n              bloqueAnterior.millisInicio < esteBloque.millisFinal) ||\n            (bloqueAnterior.millisFinal > esteBloque.millisInicio &&\n              bloqueAnterior.millisFinal <= esteBloque.millisFinal) ||\n            (bloqueAnterior.millisInicio <= esteBloque.millisInicio &&\n              bloqueAnterior.millisFinal >= esteBloque.millisFinal);\n          if (colision && bloqueAnterior.fila >= esteBloque.fila) {\n            let nuevaFila = bloqueAnterior.fila + 1;\n            esteBloque.fila = nuevaFila;\n          }\n        }\n      }\n\n      return listaFinal;\n    },\n\n    maxFila() {\n      var maxFila = this.bloquesHorarioEnriquecidos.reduce((acc, bloque) => {\n        if (bloque.fila > acc) {\n          return bloque.fila;\n        }\n\n        return acc;\n      }, 0);\n\n      return maxFila;\n    },\n  },\n  methods: {\n    toTiempoFormateado(minutos) {\n      var horas = Math.floor(minutos / 60);\n      if (String(horas).length < 2) {\n        horas = \"0\" + horas;\n      }\n\n      var minutosSolos = String(Math.round(minutos - horas * 60));\n\n      if (minutosSolos.length < 2) {\n        minutosSolos = \"0\" + minutosSolos;\n      }\n\n      return horas + \":\" + minutosSolos;\n    },\n\n    mostrarCalculoMinutos() {},\n\n    iniciarCreacionBloqueHorario(e) {\n      const posDia = this.$refs.zonaBloques.getBoundingClientRect();\n      const xMouse = e.clientX;\n\n      const xRes = xMouse - posDia.left;\n\n      const minutosInicio =\n        (this.anchoDiaMinutos / posDia.width) * xRes + this.offset;\n\n      console.log(\n        \"Creando bloque de horario en \" + this.toTiempoFormateado(minutosInicio)\n      );\n\n      var minutosInicioCorregido = minutosInicio;\n      var minutosFinalCorregido = minutosInicioCorregido + 60;\n\n      if (minutosInicio >= 480 && minutosInicio < 540) {\n        //Estamos en el primer bloque\n        minutosInicioCorregido = 480;\n        minutosFinalCorregido = 540;\n      } else if (minutosInicio >= 540 && minutosInicio < 600) {\n        //Segundo bloque pero antes de refrigerio.\n        minutosInicioCorregido = 540;\n        minutosFinalCorregido = 600;\n      } else if (minutosInicio >= 630 && minutosInicio < 750) {\n        //Bloque intermedio.\n        minutosInicioCorregido = 630;\n        minutosFinalCorregido = 750;\n      } else if (minutosInicio >= 810 && minutosInicio < 870) {\n        //Segundo bloque pero antes de refrigerio.\n        minutosInicioCorregido = 810;\n        minutosFinalCorregido = 870;\n      } else if (minutosInicio >= 870 && minutosInicio < 930) {\n        //Segundo bloque pero antes de refrigerio.\n        minutosInicioCorregido = 870;\n        minutosFinalCorregido = 930;\n      } else {\n        console.log(\"En zona no considerada\");\n        return;\n      }\n\n      console.log(\n        `Corregido a ${this.toTiempoFormateado(minutosInicioCorregido)}`\n      );\n\n      var millisInicio = minutosInicioCorregido * 60000;\n      var millisFinal = minutosFinalCorregido * 60000;\n\n      this.bloqueCreacionHorario = {\n        millisInicio,\n        millisFinal,\n      };\n    },\n\n    crearBloqueHorario(idEspacioCrear) {\n      if (!this.idEspacioCrear || !this.bloqueCreacionHorario) {\n        return;\n      }\n\n      this.creandoBloqueHorario = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation (\n              $idEspacio: ID!\n              $millisInicio: Int!\n              $diaSemana: Int!\n              $millisFinal: Int!\n            ) {\n              crearBloqueHorario(\n                idEspacio: $idEspacio\n                millisInicio: $millisInicio\n                diaSemana: $diaSemana\n                millisFinal: $millisFinal\n              ) {\n                ...fragBloqueHorario\n              }\n            }\n            ${fragmentoBloqueHorario}\n          `,\n          variables: {\n            idEspacio: idEspacioCrear,\n            millisInicio: this.bloqueCreacionHorario.millisInicio,\n            millisFinal: this.bloqueCreacionHorario.millisFinal,\n            diaSemana: this.numeroDia,\n          },\n        })\n        .then(({ data: { crearBloqueHorario } }) => {\n          this.creandoBloqueHorario = false;\n          this.$emit(\"bloqueHorarioCreado\", crearBloqueHorario);\n          this.bloqueCreacionHorario=null;\n        })\n        .catch((error) => {\n          console.log(\"Error: \" + error);\n          this.creandoBloqueHorario = false;\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.diaOrganizadorHorario {\n  width: 100%;\n  position: relative;\n  min-height: 100px;\n  margin: 30px 0px;\n}\n#nombreDia {\n  position: absolute;\n  bottom: 100%;\n  font-size: 18px;\n  background-color: gray;\n  color: white;\n  width: 100%;\n  padding: 5px 10px;\n}\n#zonaBloques {\n  height: 100%;\n  background-color: rgb(218, 218, 218);\n  min-height: 100px;\n  z-index: 1;\n}\n#barraHoras {\n  position: absolute;\n  top: 100%;\n  z-index: 0;\n}\n\n.marcaTiempo {\n  position: absolute;\n}\n</style>"]}]}