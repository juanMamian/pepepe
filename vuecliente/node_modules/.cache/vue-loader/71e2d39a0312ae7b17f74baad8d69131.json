{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasSolidaridad/EnlacesNodo.vue?vue&type=style&index=0&id=05d6656a&scoped=true&lang=css&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasSolidaridad/EnlacesNodo.vue","mtime":1643654906499},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZW5sYWNlc05vZG8gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQouZW5sYWNlcyB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIHBvaW50ZXItZXZlbnRzOiBub25lOwp9Ci52aW5jdWxvIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdHJhbnNmb3JtLW9yaWdpbjogMCUgMCU7CiAgLyogdHJhbnNpdGlvbjogbGVmdCAzcywgdG9wIDNzOyAqLwp9Ci5mdWVyemEgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0cmFuc2Zvcm0tb3JpZ2luOiAwJSAwJTsKICBoZWlnaHQ6IDNweDsKfQojZnVlcnphQ29saXNpb24gewogIGJhY2tncm91bmQtY29sb3I6IHJlZDsKfQojZnVlcnphQ2VudHJvTWFzYSB7CiAgYmFja2dyb3VuZC1jb2xvcjogeWVsbG93Owp9Ci5mbGVjaGFWaW5jdWxvIHsKICB3aWR0aDogMXB4OwogIGhlaWdodDogMXB4OwogIGJvcmRlci1zdHlsZTogc29saWQ7CiAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudDsKICBib3JkZXItbGVmdC1jb2xvcjogaW5oZXJpdDsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgdG9wOiA1MCU7CiAgbGVmdDogNTAlOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9CgoudmluY3Vsb0dyaXMgewogIGJhY2tncm91bmQtY29sb3I6IGJsYWNrOwp9Ci5mYWRlLWVudGVyLWFjdGl2ZSB7CiAgYW5pbWF0aW9uOiBmYWRlIDAuNXM7Cn0KLmZhZGUtbGVhdmUtYWN0aXZlIHsKICBhbmltYXRpb246IGZhZGUgMC41cyByZXZlcnNlOwp9CgpAa2V5ZnJhbWVzIGZhZGUgewogIDAlIHsKICAgIG9wYWNpdHk6IDA7CiAgfQogIDEwMCUgewogICAgb3BhY2l0eTogMTsKICB9Cn0K"},{"version":3,"sources":["EnlacesNodo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EnlacesNodo.vue","sourceRoot":"src/components/atlasSolidaridad","sourcesContent":["<template>\n  <div class=\"enlacesNodo\" v-show=\"nodoRender\" :style=\"[estiloPosicion]\">\n    <transition-group tag=\"div\">\n      <div\n        class=\"vinculo vinculoGris\"\n        v-for=\"vinculo of vinculosGrises\"\n        :key=\"vinculo.id\"\n        :style=\"[vinculo.estilo, altoVinculos]\"\n      >\n        <div class=\"flechaVinculo\" :style=\"[sizeFlecha]\"></div>\n      </div>\n    </transition-group>\n    <div\n      class=\"fuerza\"\n      v-show=\"callingPosiciones\"\n      :style=\"[estiloFuerzaColision, { opacity: nodoSeleccionado ? 1 : 0.3 }]\"\n      id=\"fuerzaColision\"\n    ></div>\n    <div\n      class=\"fuerza\"\n      v-show=\"callingPosiciones\"\n      :style=\"[estiloFuerzaCentroMasa, { opacity: nodoSeleccionado ? 1 : 0.3 }]\"\n      id=\"fuerzaCentroMasa\"\n    ></div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"EnlacesNodo\",\n  props: {\n    yo: Object,\n    idNodoSeleccionado: String,\n    esteNodo: Object,\n    todosNodos: Array,\n    factorZoom: Number,\n    callingPosiciones: Boolean,\n    nodoSeleccionado: Object,\n    childSeleccionado: Boolean,\n    idsTodosNodosRender: Array,\n    transicionarPosicionNodos: Boolean,\n    redibujarEnlaces: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data() {\n    return {\n      esquinasSeleccionado: {\n        x1: 0,\n        x2: 0,\n        y1: 0,\n        y2: 0,\n      },\n      posicionSeleccionado: {\n        x: 0,\n        y: 0,\n      },\n      factorFuerza: 15,\n    };\n  },\n\n  computed: {\n    parentDeSeleccionado() {\n      if (!this.nodoSeleccionado) return false;\n      if (this.nodoSeleccionado.nodoParent === this.esteNodo.id) return true;\n      return false;\n    },\n    estiloPosicion() {\n      return {\n        left: this.esteNodo.coords.x * this.factorZoom + \"px\",\n        top: this.esteNodo.coords.y * this.factorZoom + \"px\",\n      };\n    },\n    vinculosGrises() {\n      var vGrises = JSON.parse(\n        JSON.stringify(\n          this.esteNodo.vinculos\n            .concat(\n              this.esteNodo.responsables.map((r) => {\n                return { id: this.esteNodo.id + r, idRef: r };\n              })\n            )\n            .filter((v) => this.idsTodosNodosRender.includes(v.idRef))\n        )\n      );\n\n      vGrises.forEach((v) => {\n        const coordsFrom = this.todosNodos.find((n) => n.id === v.idRef).coords;\n        const paralelas = {\n          x: coordsFrom.x - this.posNodo.x,\n          y: coordsFrom.y - this.posNodo.y,\n        };\n        const angulo = Math.PI + Math.atan2(paralelas.y, paralelas.x);\n        const modulo = Math.hypot(paralelas.x, paralelas.y);\n        const vSeleccionado = this.idNodoSeleccionado === v.idRef;\n\n        v.estilo = {\n          transform: \"rotate(\" + angulo + \"rad)\",\n          top: Math.round((paralelas.y - 1) * this.factorZoom) + \"px\",\n          left: Math.round(paralelas.x * this.factorZoom) + \"px\",\n          width: Math.round(modulo * this.factorZoom) + \"px\",\n          backgroundColor: this.seleccionado\n            ? \"#ef7229\"\n            : vSeleccionado &&\n              (this.parentDeSeleccionado ||\n                this.esteNodo.responsables.includes(this.idNodoSeleccionado))\n            ? \"var(--atlasParent)\"\n            : \"black\",\n          opacity:\n            this.seleccionado ||\n            (vSeleccionado &&\n              (this.parentDeSeleccionado ||\n                this.esteNodo.responsables.includes(this.idNodoSeleccionado)))\n              ? 1\n              : !this.nodoSeleccionado\n              ? 0.3\n              : 0.05,\n          borderLeftColor: this.seleccionado\n            ? \"#ef7229\"\n            : vSeleccionado &&\n              (this.parentDeSeleccionado ||\n                this.esteNodo.responsables.includes(this.idNodoSeleccionado))\n            ? \"var(--atlasParent)\"\n            : \"black\",\n        };\n      });\n\n      return vGrises;\n    },\n\n    estiloFuerzaColision() {\n      // var paralelas={\n      //   x: this.esteNodo.fuerzaColision.fuerza*Math.cos(this.esteNodo.fuerzaColision.direccion),\n      //   y: this.esteNodo.fuerzaColision.fuerza*Math.sin(this.esteNodo.fuerzaColision.direccion),\n      // }\n      return {\n        transform: \"rotate(\" + this.esteNodo.fuerzaColision.direccion + \"rad)\",\n        // top: Math.round((paralelas.y - 1) * this.factorZoom) + \"px\",\n        // left: Math.round(paralelas.x * this.factorZoom) + \"px\",\n        top: \"0px\",\n        left: \"0px\",\n        width:\n          Math.ceil(\n            this.esteNodo.fuerzaColision.fuerza *\n              this.factorFuerza *\n              this.factorZoom\n          ) + \"px\",\n      };\n    },\n    estiloFuerzaCentroMasa() {\n      // var paralelas={\n      //   x: this.esteNodo.fuerzaCentroMasa.fuerza*Math.cos(this.esteNodo.fuerzaCentroMasa.direccion),\n      //   y: this.esteNodo.fuerzaCentroMasa.fuerza*Math.sin(this.esteNodo.fuerzaCentroMasa.direccion),\n      // }\n      return {\n        transform:\n          \"rotate(\" + this.esteNodo.fuerzaCentroMasa.direccion + \"rad)\",\n        // top: Math.round((paralelas.y - 1) * this.factorZoom) + \"px\",\n        // left: Math.round(paralelas.x * this.factorZoom) + \"px\",\n        top: \"0px\",\n        left: \"0px\",\n        width:\n          Math.round(\n            this.esteNodo.fuerzaCentroMasa.fuerza *\n              this.factorFuerza *\n              this.factorZoom\n          ) + \"px\",\n      };\n    },\n\n    altoVinculos() {\n      return {\n        height: Math.ceil(1 * this.factorZoom) + \"px\",\n      };\n    },\n    sizeFlecha() {\n      return {\n        borderWidth: Math.round(7 * this.factorZoom) + \"px\",\n      };\n    },\n\n    posNodo() {\n      return this.esteNodo.coords;\n    },\n\n    seleccionado() {\n      if (!this.nodoSeleccionado) {\n        return false;\n      }\n      return this.nodoSeleccionado.id === this.esteNodo.id;\n    },\n    desplegado() {\n      if (\n        !this.usuario ||\n        !this.usuario.id ||\n        !this.yo ||\n        !this.yo.atlasSolidaridad ||\n        !this.yo.atlasSolidaridad.idsNodosDesplegados\n      )\n        return false;\n\n      return this.yo.atlasSolidaridad.idsNodosDesplegados.includes(\n        this.esteNodo.id\n      );\n    },\n    nodoRender() {\n      if (this.usuario && this.esteNodo.id === this.usuario.id) return true;\n      return this.idsTodosNodosRender.includes(this.esteNodo.id);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.enlacesNodo {\n  position: relative;\n}\n.enlaces {\n  position: absolute;\n  pointer-events: none;\n}\n.vinculo {\n  position: absolute;\n  transform-origin: 0% 0%;\n  /* transition: left 3s, top 3s; */\n}\n.fuerza {\n  position: absolute;\n  transform-origin: 0% 0%;\n  height: 3px;\n}\n#fuerzaColision {\n  background-color: red;\n}\n#fuerzaCentroMasa {\n  background-color: yellow;\n}\n.flechaVinculo {\n  width: 1px;\n  height: 1px;\n  border-style: solid;\n  border-color: transparent;\n  border-left-color: inherit;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n\n.vinculoGris {\n  background-color: black;\n}\n.fade-enter-active {\n  animation: fade 0.5s;\n}\n.fade-leave-active {\n  animation: fade 0.5s reverse;\n}\n\n@keyframes fade {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n</style>"]}]}