{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/AtlasConocimiento.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/AtlasConocimiento.vue","mtime":1644587546118},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hdGguaHlwb3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIudG8tZml4ZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL3ZpZGExL3dlYnBqL3BlcGVwZS92dWVjbGllbnRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL2hvbWUvdmlkYTEvd2VicGovcGVwZXBlL3Z1ZWNsaWVudGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCBmcm9tICIvaG9tZS92aWRhMS93ZWJwai9wZXBlcGUvdnVlY2xpZW50ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdGFnZ2VkVGVtcGxhdGVMaXRlcmFsIjsKCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDEyKCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24gKCR0aXBvOiBTdHJpbmchLCAkaWROb2RvRnJvbTogSUQhLCAkaWROb2RvVG86IElEISkge1xuICAgICAgICAgICAgICBjcmVhclZpbmN1bG8oXG4gICAgICAgICAgICAgICAgdGlwbzogJHRpcG9cbiAgICAgICAgICAgICAgICBpZFNvdXJjZTogJGlkTm9kb0Zyb21cbiAgICAgICAgICAgICAgICBpZFRhcmdldDogJGlkTm9kb1RvXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIG1vZGlmaWNhZG9zIHtcbiAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICB2aW5jdWxvcyB7XG4gICAgICAgICAgICAgICAgICAgIGlkUmVmXG4gICAgICAgICAgICAgICAgICAgIHJvbFxuICAgICAgICAgICAgICAgICAgICB0aXBvXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3QxMiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDEyKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDExKCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG9Gcm9tOiBJRCEsICRpZE5vZG9UbzogSUQhKSB7XG4gICAgICAgICAgICAgIGVsaW1pbmFyVmluY3Vsb0Zyb21UbyhcbiAgICAgICAgICAgICAgICBpZFNvdXJjZTogJGlkTm9kb0Zyb21cbiAgICAgICAgICAgICAgICBpZFRhcmdldDogJGlkTm9kb1RvXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIG1vZGlmaWNhZG9zIHtcbiAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICB2aW5jdWxvcyB7XG4gICAgICAgICAgICAgICAgICAgIGlkUmVmXG4gICAgICAgICAgICAgICAgICAgIHRpcG9cbiAgICAgICAgICAgICAgICAgICAgcm9sXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3QxMSA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDExKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDEwKCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgcXVlcnkge1xuICAgICAgICAgICAgICB5byB7XG4gICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICBhdGxhcyB7XG4gICAgICAgICAgICAgICAgICBjZW50cm9WaXN0YSB7XG4gICAgICAgICAgICAgICAgICAgIHhcbiAgICAgICAgICAgICAgICAgICAgeVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTAgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q5KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24gKCRpbmZvTm9kbzogTm9kb0Nvbm9jaW1pZW50b0lucHV0KSB7XG4gICAgICAgICAgICAgIGNyZWFyTm9kbyhpbmZvTm9kbzogJGluZm9Ob2RvKSB7XG4gICAgICAgICAgICAgICAgLi4uZnJhZ05vZG9Db25vY2ltaWVudG9cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIiwgIlxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0OSA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDkoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0OCgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBJRCEpIHtcbiAgICAgICAgICAgICAgZWxpbWluYXJOb2RvKGlkTm9kbzogJGlkTm9kbylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDggPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q4KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDcoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICBtdXRhdGlvbiAoJGlkTm9kbzogU3RyaW5nLCAkY29vcmRzTWFudWFsZXM6IENvb3Jkc0lucHV0KSB7XG4gICAgICAgICAgICAgIHNldENvb3Jkc01hbnVhbGVzKFxuICAgICAgICAgICAgICAgIGlkTm9kbzogJGlkTm9kb1xuICAgICAgICAgICAgICAgIGNvb3Jkc01hbnVhbGVzOiAkY29vcmRzTWFudWFsZXNcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbW9kaWZpY2Fkb3Mge1xuICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgIGNvb3Jkc01hbnVhbGVzIHtcbiAgICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgICB5XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBjb29yZHMge1xuICAgICAgICAgICAgICAgICAgICB4XG4gICAgICAgICAgICAgICAgICAgIHlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDcgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q3KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDYoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICBtdXRhdGlvbiAoJG5vbWJyZUF0bGFzOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZVBvc2ljaW9uYW1pZW50b0F1dG9tYXRpY29BdGxhcyhub21icmVBdGxhczogJG5vbWJyZUF0bGFzKSB7XG4gICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICBwb3NpY2lvbmFuZG9cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0NiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDYoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NSgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkY2ljbG9zOiBJbnQhKSB7XG4gICAgICAgICAgICAgIHBvc2ljaW9uYXJOb2Rvc0Nvbm9jaW1pZW50b0J5RnVlcnphcyhjaWNsb3M6ICRjaWNsb3MpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q1ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NSgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICBxdWVyeSAoJG5vbWJyZUF0bGFzOiBTdHJpbmchKSB7XG4gICAgICAgICAgY29uZmlndXJhY2lvbkF0bGFzKG5vbWJyZUF0bGFzOiAkbm9tYnJlQXRsYXMpIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBwb3NpY2lvbmFuZG9cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0NCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDQoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MygpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgcXVlcnkge1xuICAgIHlvIHtcbiAgICAgIGlkXG4gICAgICBhdGxhcyB7XG4gICAgICAgIGRhdG9zTm9kb3Mge1xuICAgICAgICAgIGlkTm9kb1xuICAgICAgICAgIG9iamV0aXZvXG4gICAgICAgICAgYXByZW5kaWRvXG4gICAgICAgIH1cbiAgICAgICAgY29uZmlndXJhY2lvbiB7XG4gICAgICAgICAgbW9kb1xuICAgICAgICB9XG4gICAgICAgIGlkTm9kb1RhcmdldFxuICAgICAgICBjb2xlY2Npb25lcyB7XG4gICAgICAgICAgaWRcbiAgICAgICAgICBub21icmVcbiAgICAgICAgICBpZHNOb2Rvc1xuICAgICAgICAgIG5vZG9zIHtcbiAgICAgICAgICAgIGlkXG4gICAgICAgICAgICBub21icmVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MyA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDMoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MigpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgcXVlcnkge1xuICAgIHRvZG9zTm9kb3Mge1xuICAgICAgLi4uZnJhZ05vZG9Db25vY2ltaWVudG9cbiAgICB9XG4gIH1cbiAgIiwgIlxuIl0pOwoKICBfdGVtcGxhdGVPYmplY3QyID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MigpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gIGZyYWdtZW50IGZyYWdOb2RvQ29ub2NpbWllbnRvIG9uIE5vZG9Db25vY2ltaWVudG8ge1xuICAgIGlkXG4gICAgbm9tYnJlXG4gICAgZGVzY3JpcGNpb25cbiAgICBleHBlcnRvc1xuICAgIGNsYXNlcyB7XG4gICAgICBpZFxuICAgICAgbm9tYnJlXG4gICAgICBpZEV4cGVydG9cbiAgICAgIGludGVyZXNhZG9zXG4gICAgfVxuICAgIGNvb3Jkc01hbnVhbGVzIHtcbiAgICAgIHhcbiAgICAgIHlcbiAgICB9XG4gICAgY29vcmRzIHtcbiAgICAgIHhcbiAgICAgIHlcbiAgICB9XG4gICAgYXV0b0Nvb3JkcyB7XG4gICAgICB4XG4gICAgICB5XG4gICAgfVxuICAgIGNlbnRyb01hc2Ege1xuICAgICAgeFxuICAgICAgeVxuICAgIH1cbiAgICBzdHVja1xuICAgIGFuZ3Vsb1xuICAgIHB1bnRhamVcbiAgICB2aW5jdWxvcyB7XG4gICAgICBpZFJlZlxuICAgICAgcm9sXG4gICAgICB0aXBvXG4gICAgfVxuICAgIGZ1ZXJ6YUNlbnRyb01hc2Ege1xuICAgICAgZnVlcnphXG4gICAgICBkaXJlY2Npb25cbiAgICB9XG4gICAgZnVlcnphQ29saXNpb24ge1xuICAgICAgZnVlcnphXG4gICAgICBkaXJlY2Npb25cbiAgICB9XG4gIH1cbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTm9kb0Nvbm9jaW1pZW50byBmcm9tICIuL2F0bGFzQ29ub2NpbWllbnRvL05vZG9Db25vY2ltaWVudG8udnVlIjsKaW1wb3J0IENhbnZhc2VzIGZyb20gIi4vYXRsYXNDb25vY2ltaWVudG8vQ2FudmFzZXMudnVlIjsKaW1wb3J0IEJ1c2NhZG9yTm9kb3NDb25vY2ltaWVudG8gZnJvbSAiLi9hdGxhc0Nvbm9jaW1pZW50by9CdXNjYWRvck5vZG9zQ29ub2NpbWllbnRvLnZ1ZSI7CmltcG9ydCBMb2FkaW5nIGZyb20gIi4vdXRpbGlkYWRlcy9Mb2FkaW5nLnZ1ZSI7CmltcG9ydCBQYW5lbENvbmp1bnRvc05vZG9zIGZyb20gIi4vYXRsYXNDb25vY2ltaWVudG8vUGFuZWxDb25qdW50b3NOb2Rvcy52dWUiOwppbXBvcnQgUGFuZWxDb25maWd1cmFjaW9uQXRsYXMgZnJvbSAiLi9hdGxhc0Nvbm9jaW1pZW50by9QYW5lbENvbmZpZ3VyYWNpb25BdGxhcy52dWUiOwoKdmFyIGRlYm91bmNlID0gcmVxdWlyZSgiZGVib3VuY2UiKTsKCnZhciBmcmFnbWVudG9Ob2RvQ29ub2NpbWllbnRvID0gZ3FsKF90ZW1wbGF0ZU9iamVjdCgpKTsKdmFyIFFVRVJZX05PRE9TID0gZ3FsKF90ZW1wbGF0ZU9iamVjdDIoKSwgZnJhZ21lbnRvTm9kb0Nvbm9jaW1pZW50byk7CnZhciBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TID0gZ3FsKF90ZW1wbGF0ZU9iamVjdDMoKSk7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBOb2RvQ29ub2NpbWllbnRvOiBOb2RvQ29ub2NpbWllbnRvLAogICAgQ2FudmFzZXM6IENhbnZhc2VzLAogICAgQnVzY2Fkb3JOb2Rvc0Nvbm9jaW1pZW50bzogQnVzY2Fkb3JOb2Rvc0Nvbm9jaW1pZW50bywKICAgIExvYWRpbmc6IExvYWRpbmcsCiAgICBQYW5lbENvbmp1bnRvc05vZG9zOiBQYW5lbENvbmp1bnRvc05vZG9zLAogICAgUGFuZWxDb25maWd1cmFjaW9uQXRsYXM6IFBhbmVsQ29uZmlndXJhY2lvbkF0bGFzCiAgfSwKICBuYW1lOiAiQXRsYXNDb25vY2ltaWVudG8iLAogIGFwb2xsbzogewogICAgdG9kb3NOb2RvczogewogICAgICBxdWVyeTogUVVFUllfTk9ET1MsCiAgICAgIHJlc3VsdDogZnVuY3Rpb24gcmVzdWx0KCkgewogICAgICAgIHRoaXMuZGlidWphclZpbmN1bG9zR3Jpc2VzKCk7CiAgICAgIH0sCiAgICAgIHBvbGxJbnRlcnZhbDogZnVuY3Rpb24gcG9sbEludGVydmFsKCkgewogICAgICAgIHJldHVybiB0aGlzLmNhbGxpbmdQb3NpY2lvbmVzID8gNTAwMCA6IG51bGw7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKF9yZWYpIHsKICAgICAgICB2YXIgdG9kb3NOb2RvcyA9IF9yZWYudG9kb3NOb2RvczsKICAgICAgICB0aGlzLm5vZG9zRGVzY2FyZ2Fkb3MgPSB0cnVlOwogICAgICAgIHZhciBudWV2b1RvZG9zTm9kb3MgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRvZG9zTm9kb3MpKTsKICAgICAgICBudWV2b1RvZG9zTm9kb3MuZm9yRWFjaChmdW5jdGlvbiAobm9kbykgewogICAgICAgICAgbm9kby5jb29yZHNNYW51YWxlcyA9IG5vZG8uYXV0b0Nvb3JkczsKICAgICAgICAgIG5vZG8uY29vcmRzID0gbm9kby5hdXRvQ29vcmRzOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiBudWV2b1RvZG9zTm9kb3M7CiAgICAgIH0sCiAgICAgIGZldGNoUG9saWN5OiAiY2FjaGUtYW5kLW5ldHdvcmsiCiAgICB9LAogICAgeW86IHsKICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MsCiAgICAgIHNraXA6IGZ1bmN0aW9uIHNraXAoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLnVzdWFyaW9Mb2dlYWRvIHx8IHRoaXMudG9kb3NOb2Rvcy5sZW5ndGggPCAxOwogICAgICB9CiAgICB9LAogICAgY29uZmlndXJhY2lvbkF0bGFzOiB7CiAgICAgIHF1ZXJ5OiBncWwoX3RlbXBsYXRlT2JqZWN0NCgpKSwKICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgbm9tYnJlQXRsYXM6ICJjb25vY2ltaWVudG8iCiAgICAgIH0sCiAgICAgIGZldGNoUG9saWN5OiAibmV0d29yay1vbmx5IgogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbmZpZ3VyYWNpb25BdGxhczogewogICAgICAgIHBvc2ljaW9uYW5kbzogZmFsc2UKICAgICAgfSwKICAgICAgaG92ZXJlZDogZmFsc2UsCiAgICAgIHRvZG9zTm9kb3M6IFtdLAogICAgICBub2Rvc0Rlc2NhcmdhZG9zOiBmYWxzZSwKICAgICAgaWROb2RvU2VsZWNjaW9uYWRvOiAiLTEiLAogICAgICBpZE5vZG9NZW51Q3g6ICItMSIsCiAgICAgIGlkc05lY2VzYXJpb3NQYXJhVGFyZ2V0OiBbXSwKICAgICAgeW86IHsKICAgICAgICBhdGxhczogewogICAgICAgICAgZGF0b3NOb2RvczogW10sCiAgICAgICAgICBjb25maWd1cmFjaW9uOiB7CiAgICAgICAgICAgIG1vZG86ICJlc3R1ZGlhbnRlIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwKICAgICAgY2VudHJvVmlzdGFEZWNpbWFsOiB7CiAgICAgICAgeDogMjE4LAogICAgICAgIHk6IDM5CiAgICAgIH0sCiAgICAgIHNob3dpbmdab29tSW5mbzogZmFsc2UsCiAgICAgIHpvb206IDgwLAogICAgICBtaW5ab29tOiAyMCwKICAgICAgbWF4Wm9vbTogMjAwLAogICAgICBwaW5jaGluZzogZmFsc2UsCiAgICAgIGxhc3RQaW5jaERpc3RhbmNlOiAwLAogICAgICBhY3R1YWxpemFyVHJhem9zOiAwLAogICAgICBwYW5uaW5nVmlzdGE6IGZhbHNlLAogICAgICB2aXN0YVBhbm5lZDogZmFsc2UsCiAgICAgIG5vZG9zQ29uZWN0YWRvc0FsU2VsZWNjaW9uYWRvOiB7CiAgICAgICAgbGlzdGFDb21wbGV0YTogW10sCiAgICAgICAgbGlzdGFQb3JOaXZlbGVzOiBbXQogICAgICB9LAogICAgICBwcm9mdW5kaWRhZE5vZG9zQ29uZWN0YWRvc0FsU2VsZWNjaW9uYWRvOiAxLAogICAgICBhY3R1YWxpemFyVmluY3Vsb3NHcmlzZXM6IDAsCiAgICAgIHVsdGltb1RvdWNoWDogMCwKICAgICAgdWx0aW1vVG91Y2hZOiAwLAogICAgICBjZXJyYXJCdXNxdWVkYTogMCwKICAgICAgY2FsbGluZ1Bvc2ljaW9uZXM6IGZhbHNlLAogICAgICBtb3N0cmFuZG9NZW51Q29udGV4dHVhbDogZmFsc2UsCiAgICAgIG9mZnNldE1lbnVDb250ZXh0dWFsOiB7CiAgICAgICAgdG9wOiAiMHB4IiwKICAgICAgICBsZWZ0OiAiMHB4IgogICAgICB9LAogICAgICBlbnZpYW5kb1F1ZXJ5Q29uZmlndXJhY2lvbkF0bGFzOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpZHNOb2Rvc09iamV0aXZvczogZnVuY3Rpb24gaWRzTm9kb3NPYmpldGl2b3MoKSB7CiAgICAgIGlmICghdGhpcy55byB8fCAhdGhpcy55by5hdGxhcyB8fCAhdGhpcy55by5hdGxhcy5kYXRvc05vZG9zKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy55by5hdGxhcy5kYXRvc05vZG9zLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLm9iamV0aXZvID09IHRydWU7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkTm9kbzsKICAgICAgfSk7CiAgICB9LAogICAgbm9kb3NPYmpldGl2bzogZnVuY3Rpb24gbm9kb3NPYmpldGl2bygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy50b2Rvc05vZG9zKSByZXR1cm4gW107CiAgICAgIHJldHVybiB0aGlzLnRvZG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIF90aGlzLmlkc05vZG9zT2JqZXRpdm9zLmluY2x1ZGVzKG4uaWQpOwogICAgICB9KTsKICAgIH0sCiAgICBub2RvU2VsZWNjaW9uYWRvOiBmdW5jdGlvbiBub2RvU2VsZWNjaW9uYWRvKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICghdGhpcy50b2Rvc05vZG9zKSB7CiAgICAgICAgY29uc29sZS5sb2coIk5PIEhBWSBOT0RPUyIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudG9kb3NOb2Rvcy5zb21lKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4uaWQgPT0gX3RoaXMyLmlkTm9kb1NlbGVjY2lvbmFkbzsKICAgICAgfSkpIHsKICAgICAgICB2YXIgaW5kZXhTZWxlY2Npb25hZG8gPSB0aGlzLnRvZG9zTm9kb3MuZmluZEluZGV4KGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICByZXR1cm4gbi5pZCA9PSBfdGhpczIuaWROb2RvU2VsZWNjaW9uYWRvOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiB0aGlzLnRvZG9zTm9kb3NbaW5kZXhTZWxlY2Npb25hZG9dOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGlkOiAiLTEiLAogICAgICAgIHZpbmN1bG9zOiBbXQogICAgICB9OwogICAgfSwKICAgIGlkVXN1YXJpbzogZnVuY3Rpb24gaWRVc3VhcmlvKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXN1YXJpby5pZDsKICAgIH0sCiAgICB1c3VhcmlvQWRtaW5pc3RyYWRvckF0bGFzOiBmdW5jdGlvbiB1c3VhcmlvQWRtaW5pc3RyYWRvckF0bGFzKCkgewogICAgICBpZiAoIXRoaXMuJHN0b3JlLnN0YXRlLnVzdWFyaW8ucGVybWlzb3MpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzdWFyaW8ucGVybWlzb3MuaW5jbHVkZXMoImF0bGFzQWRtaW5pc3RyYWRvciIpID8gdHJ1ZSA6IGZhbHNlOwogICAgfSwKICAgIGlkTm9kb1RhcmdldDogZnVuY3Rpb24gaWROb2RvVGFyZ2V0KCkgewogICAgICBpZiAoIXRoaXMueW8gfHwgIXRoaXMueW8uYXRsYXMpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gdGhpcy55by5hdGxhcy5pZE5vZG9UYXJnZXQ7CiAgICB9LAogICAgaWRzTm9kb3NBcHJlbmRpZG9zOiBmdW5jdGlvbiBpZHNOb2Rvc0FwcmVuZGlkb3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnlvLmF0bGFzLmRhdG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4uYXByZW5kaWRvID09IHRydWU7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkTm9kbzsKICAgICAgfSk7CiAgICB9LAogICAgY2VudHJvVmlzdGE6IGZ1bmN0aW9uIGNlbnRyb1Zpc3RhKCkgewogICAgICByZXR1cm4gewogICAgICAgIHg6IE1hdGgucm91bmQodGhpcy5jZW50cm9WaXN0YURlY2ltYWwueCksCiAgICAgICAgeTogTWF0aC5yb3VuZCh0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbC55KQogICAgICB9OwogICAgfSwKICAgIGZhY3Rvclpvb206IGZ1bmN0aW9uIGZhY3Rvclpvb20oKSB7CiAgICAgIHJldHVybiBOdW1iZXIoKHRoaXMuem9vbSAvIDEwMCkudG9GaXhlZCgyKSk7CiAgICB9LAogICAgb2Zmc2V0Q29udGVuZWRvck5vZG9zOiBmdW5jdGlvbiBvZmZzZXRDb250ZW5lZG9yTm9kb3MoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGVmdDogLSh0aGlzLmNlbnRyb1Zpc3RhLnggKiB0aGlzLmZhY3Rvclpvb20pICsgInB4IiwKICAgICAgICB0b3A6IC0odGhpcy5jZW50cm9WaXN0YS55ICogdGhpcy5mYWN0b3Jab29tKSArICJweCIKICAgICAgfTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGluaWNpYXJDYWxsaW5nUG9zaWNpb25lczogZnVuY3Rpb24gaW5pY2lhckNhbGxpbmdQb3NpY2lvbmVzKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBjaWNsb3MgPSBwcm9tcHQoIsK/Q3VhbnRvcyBjaWNsb3M/Iik7CgogICAgICBpZiAoaXNOYU4oY2ljbG9zKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY2ljbG9zID0gTWF0aC5yb3VuZChjaWNsb3MpOwoKICAgICAgaWYgKGNpY2xvcyA8IDEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJFbnZpYW5kbyByZXBvc2ljaW9uYW1pZW50byBkZSAiLmNvbmNhdChjaWNsb3MsICIgY2ljbG9zIikpOwogICAgICB0aGlzLmNhbGxpbmdQb3NpY2lvbmVzID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3Q1KCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgY2ljbG9zOiBjaWNsb3MKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5jYWxsaW5nUG9zaWNpb25lcyA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczMuY2FsbGluZ1Bvc2ljaW9uZXMgPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfSwKICAgIHRvZ2dsZVBvc2ljaW9uYW1pZW50bzogZnVuY3Rpb24gdG9nZ2xlUG9zaWNpb25hbWllbnRvKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHRoaXMuZW52aWFuZG9RdWVyeUNvbmZpZ3VyYWNpb25BdGxhcyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0NigpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIG5vbWJyZUF0bGFzOiAiY29ub2NpbWllbnRvIgogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LmVudmlhbmRvUXVlcnlDb25maWd1cmFjaW9uQXRsYXMgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNC5lbnZpYW5kb1F1ZXJ5Q29uZmlndXJhY2lvbkF0bGFzID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGFicmlyTWVudUNvbnRleHR1YWw6IGZ1bmN0aW9uIGFicmlyTWVudUNvbnRleHR1YWwoZSkgewogICAgICB2YXIgcG9zQ2FsZW5kYXJpbyA9IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB2YXIgdG9wQ2xpY2sgPSBNYXRoLnJvdW5kKGUucGFnZVkgLSBwb3NDYWxlbmRhcmlvLnRvcCk7CiAgICAgIHZhciBsZWZ0Q2xpY2sgPSBNYXRoLnJvdW5kKGUucGFnZVggLSBwb3NDYWxlbmRhcmlvLmxlZnQpOwogICAgICB0aGlzLiRzZXQodGhpcy5vZmZzZXRNZW51Q29udGV4dHVhbCwgInRvcCIsIHRvcENsaWNrICsgInB4Iik7CiAgICAgIHRoaXMuJHNldCh0aGlzLm9mZnNldE1lbnVDb250ZXh0dWFsLCAibGVmdCIsIGxlZnRDbGljayArICJweCIpOwogICAgICB0aGlzLm1vc3RyYW5kb01lbnVDb250ZXh0dWFsID0gdHJ1ZTsgLy90aGlzLmNyZWFyTm9kbyh7eDogbGVmdENsaWNrLCB5OiB0b3BDbGlja30pOwogICAgfSwKICAgIGNyZWFyTm9kb0VuTWVudUNvbnRleHR1YWw6IGZ1bmN0aW9uIGNyZWFyTm9kb0VuTWVudUNvbnRleHR1YWwoKSB7CiAgICAgIHZhciBwb3NDb250ZW5lZG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvbnRlbmVkb3JOb2RvcyIpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICBjb25zb2xlLmxvZygiT2Zmc2V0IG1lblx4RkEgY3g6ICIuY29uY2F0KHRoaXMub2Zmc2V0TWVudUNvbnRleHR1YWwudG9wKSk7CiAgICAgIGNvbnNvbGUubG9nKCJPZmZzZXQgbWVuXHhGQSBjeDogIi5jb25jYXQocGFyc2VJbnQodGhpcy5vZmZzZXRNZW51Q29udGV4dHVhbC50b3ApKSk7CiAgICAgIHZhciBwb3NpY2lvbk51ZXZvTm9kbyA9IHsKICAgICAgICB4OiBwYXJzZUludCgocGFyc2VJbnQodGhpcy5vZmZzZXRNZW51Q29udGV4dHVhbC5sZWZ0KSAtIHBvc0NvbnRlbmVkb3IubGVmdCkgLyB0aGlzLmZhY3Rvclpvb20pLAogICAgICAgIHk6IHBhcnNlSW50KChwYXJzZUludCh0aGlzLm9mZnNldE1lbnVDb250ZXh0dWFsLnRvcCkgLSBwb3NDb250ZW5lZG9yLnRvcCkgLyB0aGlzLmZhY3Rvclpvb20pCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKCJDcmVhbmRvIG51ZXZvIG5vZG8gZW4gIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkocG9zaWNpb25OdWV2b05vZG8pKSk7CiAgICAgIHRoaXMuY3JlYXJOb2RvKHBvc2ljaW9uTnVldm9Ob2RvKTsKICAgIH0sCiAgICBlbmNvbnRyYXJOb2Rvc05lY2VzYXJpb3NEZU5vZG86IGZ1bmN0aW9uIGVuY29udHJhck5vZG9zTmVjZXNhcmlvc0RlTm9kbyhpZE5vZG8sIGxpc3RhVG90YWwpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgZWxOb2RvID0gdGhpcy50b2Rvc05vZG9zLmZpbmQoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5pZCA9PSBpZE5vZG87CiAgICAgIH0pOwoKICAgICAgaWYgKCFlbE5vZG8pIHsKICAgICAgICByZXR1cm4gbGlzdGFUb3RhbDsKICAgICAgfQoKICAgICAgdmFyIG5lY2VzYXJpb3MgPSBlbE5vZG8udmluY3Vsb3MuZmlsdGVyKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIHYucm9sID09ICJ0YXJnZXQiOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gdi5pZFJlZjsKICAgICAgfSk7CiAgICAgIG5lY2VzYXJpb3MuZm9yRWFjaChmdW5jdGlvbiAobmVjZXNhcmlvKSB7CiAgICAgICAgaWYgKCFsaXN0YVRvdGFsLmluY2x1ZGVzKG5lY2VzYXJpbykpIHsKICAgICAgICAgIGxpc3RhVG90YWwucHVzaChuZWNlc2FyaW8pOwogICAgICAgICAgbGlzdGFUb3RhbCA9IF90aGlzNS5lbmNvbnRyYXJOb2Rvc05lY2VzYXJpb3NEZU5vZG8obmVjZXNhcmlvLCBsaXN0YVRvdGFsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gbGlzdGFUb3RhbDsKICAgIH0sCiAgICBjbGlja0ZvbmRvQXRsYXM6IGZ1bmN0aW9uIGNsaWNrRm9uZG9BdGxhcygpIHsKICAgICAgY29uc29sZS5sb2coIkNsaWNrIGVuIGVsIGZvbmRvIGRlbCBhdGxhcyIpOwogICAgICBpZiAoIXRoaXMudmlzdGFQYW5uZWQpIHRoaXMuaWROb2RvU2VsZWNjaW9uYWRvID0gIi0xIjsKICAgICAgdGhpcy5wYW5uaW5nVmlzdGEgPSBmYWxzZTsKICAgICAgdGhpcy52aXN0YVBhbm5lZCA9IGZhbHNlOwogICAgICB0aGlzLiRyZWZzLnBhbmVsQ29uanVudG9zTm9kb3MuYWJpZXJ0byA9IGZhbHNlOwogICAgICB0aGlzLiRyZWZzLnBhbmVsQ29uZmlndXJhY2lvbkF0bGFzLmFiaWVydG8gPSBmYWxzZTsKICAgICAgdGhpcy5tb3N0cmFuZG9NZW51Q29udGV4dHVhbCA9IGZhbHNlOwogICAgfSwKICAgIHNldEVzdGFkb09iamV0aXZvTm9kb0NhY2hlOiBmdW5jdGlvbiBzZXRFc3RhZG9PYmpldGl2b05vZG9DYWNoZShudWV2b0VzdGFkbywgaWROb2RvKSB7CiAgICAgIGNvbnNvbGUubG9nKCJTZXRpbmcgZW4gY2FjaGUgYWwgbm9kbyAiLmNvbmNhdChpZE5vZG8sICIgY29uIGVzdGFkbyBvYmpldGl2bzogIikuY29uY2F0KG51ZXZvRXN0YWRvKSk7CiAgICAgIHZhciBzdG9yZSA9IHRoaXMuJGFwb2xsby5wcm92aWRlci5kZWZhdWx0Q2xpZW50OwogICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TCiAgICAgIH0pOwogICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKICAgICAgdmFyIGluZGV4TiA9IG51ZXZvQ2FjaGUueW8uYXRsYXMuZGF0b3NOb2Rvcy5maW5kSW5kZXgoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5pZE5vZG8gPT0gaWROb2RvOwogICAgICB9KTsKCiAgICAgIGlmIChpbmRleE4gPiAtMSkgewogICAgICAgIG51ZXZvQ2FjaGUueW8uYXRsYXMuZGF0b3NOb2Rvc1tpbmRleE5dLm9iamV0aXZvID0gbnVldm9Fc3RhZG87CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGVzdGFiYSBlbiBjYWNoXHhFOS4gUHVzaGluZyIpOwogICAgICAgIG51ZXZvQ2FjaGUueW8uYXRsYXMuZGF0b3NOb2Rvcy5wdXNoKHsKICAgICAgICAgIF9fdHlwZW5hbWU6ICJEYXRvTm9kb1VzdWFyaW8iLAogICAgICAgICAgaWROb2RvOiBpZE5vZG8sCiAgICAgICAgICBvYmpldGl2bzogbnVldm9Fc3RhZG8sCiAgICAgICAgICBhcHJlbmRpZG86IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TLAogICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgfSk7CiAgICB9LAogICAgc2V0Tm9kb0FwcmVuZGlkb0NhY2hlOiBmdW5jdGlvbiBzZXROb2RvQXByZW5kaWRvQ2FjaGUobnVldm9Fc3RhZG8sIGlkTm9kbykgewogICAgICBjb25zb2xlLmxvZygiU2V0aW5nIGVuIGNhY2hlIGFsIG5vZG8gIi5jb25jYXQoaWROb2RvLCAiIGNvbiBlc3RhZG8gYXByZW5kaWRvOiAiKS5jb25jYXQobnVldm9Fc3RhZG8pKTsKICAgICAgdmFyIHN0b3JlID0gdGhpcy4kYXBvbGxvLnByb3ZpZGVyLmRlZmF1bHRDbGllbnQ7CiAgICAgIHZhciBjYWNoZSA9IHN0b3JlLnJlYWRRdWVyeSh7CiAgICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MKICAgICAgfSk7CiAgICAgIHZhciBudWV2b0NhY2hlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjYWNoZSkpOwogICAgICB2YXIgaW5kZXhOID0gbnVldm9DYWNoZS55by5hdGxhcy5kYXRvc05vZG9zLmZpbmRJbmRleChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkTm9kbyA9PSBpZE5vZG87CiAgICAgIH0pOwoKICAgICAgaWYgKGluZGV4TiA+IC0xKSB7CiAgICAgICAgbnVldm9DYWNoZS55by5hdGxhcy5kYXRvc05vZG9zW2luZGV4Tl0uYXByZW5kaWRvID0gbnVldm9Fc3RhZG87CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGVzdGFiYSBlbiBjYWNoXHhFOS4gUHVzaGluZyIpOwogICAgICAgIG51ZXZvQ2FjaGUueW8uYXRsYXMuZGF0b3NOb2Rvcy5wdXNoKHsKICAgICAgICAgIF9fdHlwZW5hbWU6ICJEYXRvTm9kb1VzdWFyaW8iLAogICAgICAgICAgaWROb2RvOiBpZE5vZG8sCiAgICAgICAgICBvYmpldGl2bzogZmFsc2UsCiAgICAgICAgICBhcHJlbmRpZG86IG51ZXZvRXN0YWRvCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TLAogICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgfSk7CiAgICB9LAogICAgc2V0Tm9kb1RhcmdldENhY2hlOiBmdW5jdGlvbiBzZXROb2RvVGFyZ2V0Q2FjaGUoaWROb2RvKSB7CiAgICAgIGNvbnNvbGUubG9nKCJTZXRpbmcgZW4gY2FjaGUgYWwgbm9kbyAiLmNvbmNhdChpZE5vZG8sICIgY29tbyB0YXJnZXQiKSk7CiAgICAgIHZhciBzdG9yZSA9IHRoaXMuJGFwb2xsby5wcm92aWRlci5kZWZhdWx0Q2xpZW50OwogICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TCiAgICAgIH0pOwogICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKICAgICAgbnVldm9DYWNoZS55by5hdGxhcy5pZE5vZG9UYXJnZXQgPSBpZE5vZG87CiAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TLAogICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgfSk7CiAgICB9LAogICAgY2VudHJhckVuTm9kbzogZnVuY3Rpb24gY2VudHJhckVuTm9kbyhuKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbCwgIngiLCBuLmNvb3Jkcy54IC0gdGhpcy4kZWwub2Zmc2V0V2lkdGggLyAoMiAqIHRoaXMuZmFjdG9yWm9vbSkpOwogICAgICB0aGlzLiRzZXQodGhpcy5jZW50cm9WaXN0YURlY2ltYWwsICJ5Iiwgbi5jb29yZHMueSAtIHRoaXMuJGVsLm9mZnNldEhlaWdodCAvICgyICogdGhpcy5mYWN0b3Jab29tKSk7CiAgICAgIHRoaXMuc2VsZWNjaW9uTm9kbyhuKTsgLy90aGlzLmNlbnRyb1Zpc3RhPWU7CiAgICB9LAogICAgaW5pY2lhTW92aW1pZW50b1RvdWNoOiBmdW5jdGlvbiBpbmljaWFNb3ZpbWllbnRvVG91Y2goZSkgewogICAgICBpZiAoZS50b3VjaGVzLmxlbmd0aCA9PT0gMikgewogICAgICAgIHZhciBkaXN0ID0gTWF0aC5oeXBvdChlLnRvdWNoZXNbMF0ucGFnZVggLSBlLnRvdWNoZXNbMV0ucGFnZVgsIGUudG91Y2hlc1swXS5wYWdlWSAtIGUudG91Y2hlc1sxXS5wYWdlWSk7CiAgICAgICAgdGhpcy5sYXN0UGluY2hEaXN0YW5jZSA9IGRpc3Q7CiAgICAgICAgdGhpcy5waW5jaGluZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnVsdGltb1RvdWNoWCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WDsKICAgICAgdGhpcy51bHRpbW9Ub3VjaFkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFk7CiAgICB9LAogICAgbW92aW1pZW50b01vYmlsZTogZnVuY3Rpb24gbW92aW1pZW50b01vYmlsZShlKSB7CiAgICAgIGlmICh0aGlzLnBpbmNoaW5nKSB7CiAgICAgICAgdmFyIGNvbnRlbmVkb3IgPSB0aGlzLiRlbDsKICAgICAgICB2YXIgcG9zQ29udGVuZWRvciA9IGNvbnRlbmVkb3IuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgdmFyIHBvc1pvb20gPSB7CiAgICAgICAgICB4OiBNYXRoLnJvdW5kKHBvc0NvbnRlbmVkb3Iud2lkdGggLyAyIC8gdGhpcy5mYWN0b3Jab29tKSArIHRoaXMuY2VudHJvVmlzdGEueCwKICAgICAgICAgIHk6IE1hdGgucm91bmQocG9zQ29udGVuZWRvci5oZWlnaHQgLyAyIC8gdGhpcy5mYWN0b3Jab29tKSArIHRoaXMuY2VudHJvVmlzdGEueQogICAgICAgIH07CiAgICAgICAgdmFyIHByb3BvcmNpb25lcyA9IHsKICAgICAgICAgIHg6IChwb3Nab29tLnggLSB0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbC54KSAvIChwb3NDb250ZW5lZG9yLndpZHRoIC8gdGhpcy5mYWN0b3Jab29tKSwKICAgICAgICAgIHk6IChwb3Nab29tLnkgLSB0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbC55KSAvIChwb3NDb250ZW5lZG9yLmhlaWdodCAvIHRoaXMuZmFjdG9yWm9vbSkKICAgICAgICB9OwogICAgICAgIHZhciBkaXN0ID0gTWF0aC5oeXBvdChlLnRvdWNoZXNbMF0ucGFnZVggLSBlLnRvdWNoZXNbMV0ucGFnZVgsIGUudG91Y2hlc1swXS5wYWdlWSAtIGUudG91Y2hlc1sxXS5wYWdlWSk7CiAgICAgICAgdmFyIHBpbmNoID0gZGlzdCAtIHRoaXMubGFzdFBpbmNoRGlzdGFuY2U7CiAgICAgICAgcGluY2ggPSBwaW5jaCAqIDAuNTsKICAgICAgICB0aGlzLnpvb21WaXN0YShwaW5jaCk7CiAgICAgICAgdGhpcy5sYXN0UGluY2hEaXN0YW5jZSA9IGRpc3Q7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuY2VudHJvVmlzdGFEZWNpbWFsLCAieCIsIHBvc1pvb20ueCAtIHBvc0NvbnRlbmVkb3Iud2lkdGggLyB0aGlzLmZhY3Rvclpvb20gKiBwcm9wb3JjaW9uZXMueCk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuY2VudHJvVmlzdGFEZWNpbWFsLCAieSIsIHBvc1pvb20ueSAtIHBvc0NvbnRlbmVkb3IuaGVpZ2h0IC8gdGhpcy5mYWN0b3Jab29tICogcHJvcG9yY2lvbmVzLnkpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGRlbHRhWCA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCAtIHRoaXMudWx0aW1vVG91Y2hYOwogICAgICB2YXIgZGVsdGFZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZIC0gdGhpcy51bHRpbW9Ub3VjaFk7CiAgICAgIHRoaXMudWx0aW1vVG91Y2hYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYOwogICAgICB0aGlzLnVsdGltb1RvdWNoWSA9IGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WTsKICAgICAgdGhpcy5kZXNwbGF6YXJWaXN0YShkZWx0YVgsIGRlbHRhWSk7CiAgICB9LAogICAgZmluVG91Y2g6IGZ1bmN0aW9uIGZpblRvdWNoKCkgewogICAgICB0aGlzLnBpbmNoaW5nID0gZmFsc2U7CiAgICB9LAogICAgY2FtYmlhckNvb3Jkc01hbnVhbGVzTm9kbzogZnVuY3Rpb24gY2FtYmlhckNvb3Jkc01hbnVhbGVzTm9kbyhpZE5vZG8sIGNvb3Jkc01hbnVhbGVzKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcykgewogICAgICAgIGNvbnNvbGUubG9nKCJObyBhdXRvcml6YWRvIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnRvZG9zTm9kb3NbdGhpcy50b2Rvc05vZG9zLmZpbmRJbmRleChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkID09IGlkTm9kbzsKICAgICAgfSldLmNvb3JkcyA9IGNvb3Jkc01hbnVhbGVzOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDcoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZE5vZG86IGlkTm9kbywKICAgICAgICAgIGNvb3Jkc01hbnVhbGVzOiBjb29yZHNNYW51YWxlcwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM2LiRyZWZzLmNhbnZhc2VzLmNyZWFySW1hZ2VuVG9kb3NWaW5jdWxvcygpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGVsaW1pbmFyTm9kbzogZnVuY3Rpb24gZWxpbWluYXJOb2RvKGlkTm9kbykgewogICAgICBpZiAoIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvQWRtaW5pc3RyYWRvckF0bGFzKSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGF1dG9yaXphZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghY29uZmlybSgiwr9TZWd1cm8gZGUgcXVlIHF1aWVyZXMgZWxpbWluYXIgZXN0ZSBub2RvPyIpKSByZXR1cm47CiAgICAgIGNvbnNvbGUubG9nKCJlbnZpYW5kbyBtdXRhY2lvbiBkZSBlbGltaW5hciBub2RvIik7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0OCgpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkTm9kbzogaWROb2RvCiAgICAgICAgfSwKICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShzdG9yZSwgX3JlZjIpIHsKICAgICAgICAgIHZhciBlbGltaW5hck5vZG8gPSBfcmVmMi5kYXRhLmVsaW1pbmFyTm9kbzsKCiAgICAgICAgICBpZiAoIWVsaW1pbmFyTm9kbykgewogICAgICAgICAgICBjb25zb2xlLmxvZygiTm9kbyBubyBmdWUgZWxpbWluYWRvIik7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgICAgICBxdWVyeTogUVVFUllfTk9ET1MKICAgICAgICAgIH0pOwogICAgICAgICAgdmFyIG51ZXZvQ2FjaGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNhY2hlKSk7CiAgICAgICAgICB2YXIgaW5kZXhOID0gbnVldm9DYWNoZS50b2Rvc05vZG9zLmZpbmRJbmRleChmdW5jdGlvbiAobikgewogICAgICAgICAgICByZXR1cm4gbi5pZCA9PSBpZE5vZG87CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoaW5kZXhOID4gLTEpIHsKICAgICAgICAgICAgbnVldm9DYWNoZS50b2Rvc05vZG9zLnNwbGljZShpbmRleE4sIDEpOwogICAgICAgICAgICBzdG9yZS53cml0ZVF1ZXJ5KHsKICAgICAgICAgICAgICBxdWVyeTogUVVFUllfTk9ET1MsCiAgICAgICAgICAgICAgZGF0YTogbnVldm9DYWNoZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFbCBub2RvIG5vIGVzdGFiYSBwcmVzZW50ZSIpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGNvbnNvbGUubG9nKCJxdWl0YW5kbyBlbCBvYmpldG8gZGVsIGFycmF5LiAiLmNvbmNhdChkYXRhKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNyZWFyTm9kbzogZnVuY3Rpb24gY3JlYXJOb2RvKHBvc2ljaW9uKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcykgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciB1c3VhcmlvIG5vIGF1dG9yaXphZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJlbnZpYW5kbyB1bmEgbXV0YWNpXHhGM24gZGUgY3JlYXIgbm9kbyIpOwogICAgICB2YXIgaW5mb05vZG8gPSB7CiAgICAgICAgY29vcmRzTWFudWFsZXM6IHsKICAgICAgICAgIHg6IHBvc2ljaW9uLngsCiAgICAgICAgICB5OiBwb3NpY2lvbi55CiAgICAgICAgfSwKICAgICAgICBjb29yZHM6IHsKICAgICAgICAgIHg6IHBvc2ljaW9uLngsCiAgICAgICAgICB5OiBwb3NpY2lvbi55CiAgICAgICAgfSwKICAgICAgICBhdXRvQ29vcmRzOiB7CiAgICAgICAgICB4OiBwb3NpY2lvbi54LAogICAgICAgICAgeTogcG9zaWNpb24ueQogICAgICAgIH0KICAgICAgfTsKICAgICAgY29uc29sZS5sb2coImVuIGxhcyBjb29yZGVuYWRhczogIi5jb25jYXQocG9zaWNpb24ueCwgIiwgIikuY29uY2F0KHBvc2ljaW9uLnksICIgIikpOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDkoKSwgZnJhZ21lbnRvTm9kb0Nvbm9jaW1pZW50byksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpbmZvTm9kbzogaW5mb05vZG8KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgICAgdmFyIGNyZWFyTm9kbyA9IF9yZWYzLmRhdGEuY3JlYXJOb2RvOwogICAgICAgIGNvbnNvbGUubG9nKCJDcmVhZG8gIi5jb25jYXQoY3JlYXJOb2RvLmlkKSk7CiAgICAgICAgdmFyIHN0b3JlID0gX3RoaXM3LiRhcG9sbG8ucHJvdmlkZXIuZGVmYXVsdENsaWVudDsKICAgICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgICAgcXVlcnk6IFFVRVJZX05PRE9TCiAgICAgICAgfSk7CiAgICAgICAgdmFyIG51ZXZvQ2FjaGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNhY2hlKSk7CiAgICAgICAgdmFyIGxvc05vZG9zID0gbnVldm9DYWNoZS50b2Rvc05vZG9zOwogICAgICAgIHZhciBpbmRleE4gPSBsb3NOb2Rvcy5maW5kSW5kZXgoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIHJldHVybiBuLmlkID09PSBjcmVhck5vZG8uaWQ7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChpbmRleE4gPiAtMSkgewogICAgICAgICAgY29uc29sZS5sb2coIkVsIG5vZG8geWEgZXN0YWJhIGVuIGNhY2hceEU5Iik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGxvc05vZG9zLnB1c2goY3JlYXJOb2RvKTsKICAgICAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgICAgICBxdWVyeTogUVVFUllfTk9ET1MsCiAgICAgICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgICAgIH0pOwogICAgICAgIH0gLy90aGlzLiRyb3V0ZXIucHVzaCgiL25vZG9Db25vY2ltaWVudG8vIitjcmVhck5vZG8uaWQpOwoKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yLiBFOiAiLmNvbmNhdChlcnJvcikpOwogICAgICB9KTsKICAgIH0sCiAgICBkZXNjYXJnYXJDZW50cm9WaXN0YTogZnVuY3Rpb24gZGVzY2FyZ2FyQ2VudHJvVmlzdGEoKSB7CiAgICAgIHZhciBkaXMgPSB0aGlzOwogICAgICB0aGlzLiRhcG9sbG8ucXVlcnkoewogICAgICAgIHF1ZXJ5OiBncWwoX3RlbXBsYXRlT2JqZWN0MTAoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZFVzdWFyaW86IHRoaXMuJHN0b3JlLnN0YXRlLnVzdWFyaW8uaWQKICAgICAgICB9LAogICAgICAgIGZldGNoUG9saWN5OiAibmV0d29yay1vbmx5IgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmNCkgewogICAgICAgIHZhciB5byA9IF9yZWY0LmRhdGEueW87CiAgICAgICAgdmFyIGNvb3JkcyA9IHlvLmF0bGFzLmNlbnRyb1Zpc3RhOwogICAgICAgIGRpcy4kc2V0KGRpcy5jZW50cm9WaXN0YSwgIngiLCBjb29yZHMueCk7CiAgICAgICAgZGlzLiRzZXQoZGlzLmNlbnRyb1Zpc3RhLCAieSIsIGNvb3Jkcy55KTsKICAgICAgICBkaXMuJHN0b3JlLmNvbW1pdCgic2V0Q2VudHJvVmlzdGFBdGxhcyIsIGNvb3Jkcyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBmZXRjaGluZyBjZW50cm8gdmlzdGE6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGRlc3BsYXphclZpc3RhOiBmdW5jdGlvbiBkZXNwbGF6YXJWaXN0YShkZWx0YVgsIGRlbHRhWSkgewogICAgICB0aGlzLiRzZXQodGhpcy5jZW50cm9WaXN0YURlY2ltYWwsICJ4IiwgTWF0aC5yb3VuZCh0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbC54IC0gZGVsdGFYIC8gdGhpcy5mYWN0b3Jab29tKSk7CiAgICAgIHRoaXMuJHNldCh0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbCwgInkiLCBNYXRoLnJvdW5kKHRoaXMuY2VudHJvVmlzdGFEZWNpbWFsLnkgLSBkZWx0YVkgLyB0aGlzLmZhY3Rvclpvb20pKTsKICAgICAgdGhpcy5hY3R1YWxpemFyVHJhem9zKys7CiAgICB9LAogICAgcGFuVmlzdGE6IGZ1bmN0aW9uIHBhblZpc3RhKGUpIHsKICAgICAgaWYgKCF0aGlzLnBhbm5pbmdWaXN0YSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5kZXNwbGF6YXJWaXN0YShlLm1vdmVtZW50WCwgZS5tb3ZlbWVudFkpOwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMudmlzdGFQYW5uZWQgPSB0cnVlOwogICAgICAvKnRoaXMuY2VudHJvVmlzdGEueCAtPSBlLm1vdmVtZW50WDsKICAgICAgdGhpcy5jZW50cm9WaXN0YS55IC09IGUubW92ZW1lbnRZOwogICAgICAqLwogICAgfSwKICAgIHNlbGVjY2lvbk5vZG86IGZ1bmN0aW9uIHNlbGVjY2lvbk5vZG8obm9kbykgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHRoaXMuaWROb2RvU2VsZWNjaW9uYWRvID0gbm9kby5pZDsKCiAgICAgIGlmICghdGhpcy50b2Rvc05vZG9zLnNvbWUoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5pZCA9PSBfdGhpczguaWROb2RvU2VsZWNjaW9uYWRvOwogICAgICB9KSkgewogICAgICAgIGNvbnNvbGUubG9nKCJObyBlbmNvbnRyYWRvIik7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHZhciBwcm9mdW5kaWRhZCA9IHBhcnNlSW50KHRoaXMucHJvZnVuZGlkYWROb2Rvc0NvbmVjdGFkb3NBbFNlbGVjY2lvbmFkbyk7CiAgICAgIHZhciBsaXN0YVBvck5pdmVsZXMgPSBbXTsKICAgICAgdmFyIGlkTm9kb1NlbCA9IHRoaXMuaWROb2RvU2VsZWNjaW9uYWRvOwogICAgICB2YXIgbGlzdGFDb21wbGV0YSA9IFtpZE5vZG9TZWxdOwoKICAgICAgaWYgKHByb2Z1bmRpZGFkID4gMCkgewogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvZnVuZGlkYWQ7IGkrKykgewogICAgICAgICAgbGlzdGFQb3JOaXZlbGVzW2ldID0gW107CiAgICAgICAgfQoKICAgICAgICB2YXIgX3RoaXMkZW5jb250cmFyTm9kb3NDID0gdGhpcy5lbmNvbnRyYXJOb2Rvc0NvbmVjdGFkb3NSZWN1cnNpdmFtZW50ZShpZE5vZG9TZWwsIFsidGFyZ2V0IiwgInNvdXJjZSJdLCBbImNvbnRpbnVhY2lvbiJdLCBsaXN0YUNvbXBsZXRhLCBsaXN0YVBvck5pdmVsZXMsIDAsIHByb2Z1bmRpZGFkKTsKCiAgICAgICAgbGlzdGFDb21wbGV0YSA9IF90aGlzJGVuY29udHJhck5vZG9zQy5saXN0YUNvbXBsZXRhOwogICAgICAgIGxpc3RhUG9yTml2ZWxlcyA9IF90aGlzJGVuY29udHJhck5vZG9zQy5saXN0YVBvck5pdmVsZXM7CiAgICAgIH0KCiAgICAgIHRoaXMubm9kb3NDb25lY3RhZG9zQWxTZWxlY2Npb25hZG8gPSB7CiAgICAgICAgbGlzdGFDb21wbGV0YTogbGlzdGFDb21wbGV0YSwKICAgICAgICBsaXN0YVBvck5pdmVsZXM6IGxpc3RhUG9yTml2ZWxlcwogICAgICB9OwogICAgfSwKICAgIGVsaW1pbmFyVmluY3VsbzogZnVuY3Rpb24gZWxpbWluYXJWaW5jdWxvKGFyZ3MpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKCFfdGhpczkudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhX3RoaXM5LnVzdWFyaW9BZG1pbmlzdHJhZG9yQXRsYXMpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTm8gYXV0b3JpemFkbyIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJlbGltaW5hbmRvIHVuIHZpbmN1bG8gZW50cmUgIi5jb25jYXQoYXJncy5pZE5vZG9Gcm9tLCAiIHkgIikuY29uY2F0KGFyZ3MuaWROb2RvVG8sICIgIikpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM5LiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgICAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QxMSgpKSwKICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgICAgICAgaWROb2RvRnJvbTogYXJncy5pZE5vZG9Gcm9tLAogICAgICAgICAgICAgICAgICAgIGlkTm9kb1RvOiBhcmdzLmlkTm9kb1RvCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge30pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGRpYnVqYXJWaW5jdWxvc0dyaXNlczogZnVuY3Rpb24gZGlidWphclZpbmN1bG9zR3Jpc2VzKCkgewogICAgICB0aGlzLmFjdHVhbGl6YXJWaW5jdWxvc0dyaXNlcysrOwogICAgfSwKICAgIGNyZWFyVmluY3VsbzogZnVuY3Rpb24gY3JlYXJWaW5jdWxvKGFyZ3MpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKCFfdGhpczEwLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIV90aGlzMTAudXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTm8gYXV0b3JpemFkbyIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiY3JlYW5kbyB1biB2aW5jdWxvICIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGFyZ3MpLCAiICIpKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgICAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QxMigpKSwKICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgICAgICAgdGlwbzogImNvbnRpbnVhY2lvbiIsCiAgICAgICAgICAgICAgICAgICAgaWROb2RvRnJvbTogYXJncy5pZE5vZG9Gcm9tLAogICAgICAgICAgICAgICAgICAgIGlkTm9kb1RvOiBhcmdzLmlkTm9kb1RvCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge30pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZW5jb250cmFyTm9kb3NDb25lY3RhZG9zUmVjdXJzaXZhbWVudGU6IGZ1bmN0aW9uIGVuY29udHJhck5vZG9zQ29uZWN0YWRvc1JlY3Vyc2l2YW1lbnRlKGlkTm9kbywgcm9sZXMsIHRpcG9zLCBsaXN0YUNvbXBsZXRhLCBsaXN0YVBvck5pdmVsZXMsIG5pdmVsLCBwcm9mdW5kaWRhZCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICAvLyBSb2wgZGViZSBzZXIgdW4gYXJyYXkgcXVlIGluY2x1eWUgbG9zIHJvbGVzIHZhbGlkb3MgZW4gZXN0YSBiw7pzcXVlZGEuCiAgICAgIC8vIFRpcG8gZGViZXIgc2VyIHVuIGFycmF5IHF1ZSBpbmNsdXllIHRvZG9zIGxvcyB0aXBvcyB2w6FsaWRvcyBlbiBlc3RhIGLDunNxdWVkYQogICAgICB2YXIgbm9kbyA9IHRoaXMudG9kb3NOb2Rvcy5maW5kKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4uaWQgPT0gaWROb2RvOwogICAgICB9KTsKCiAgICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RvLnZpbmN1bG9zKSwKICAgICAgICAgIF9zdGVwOwoKICAgICAgdHJ5IHsKICAgICAgICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcCgpIHsKICAgICAgICAgIHZhciB2aW5jdWxvID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgaWYgKF90aGlzMTEudG9kb3NOb2Rvcy5zb21lKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHJldHVybiBuLmlkID09IHZpbmN1bG8uaWRSZWY7CiAgICAgICAgICB9KSAmJiByb2xlcy5zb21lKGZ1bmN0aW9uIChyKSB7CiAgICAgICAgICAgIHJldHVybiByID09IHZpbmN1bG8ucm9sOwogICAgICAgICAgfSkgJiYgdGlwb3Muc29tZShmdW5jdGlvbiAodCkgewogICAgICAgICAgICByZXR1cm4gdCA9PSB2aW5jdWxvLnRpcG87CiAgICAgICAgICB9KSAmJiAhbGlzdGFDb21wbGV0YS5zb21lKGZ1bmN0aW9uIChpZE4pIHsKICAgICAgICAgICAgcmV0dXJuIGlkTiA9PSB2aW5jdWxvLmlkUmVmOwogICAgICAgICAgfSkpIHsKICAgICAgICAgICAgbGlzdGFQb3JOaXZlbGVzW25pdmVsXS5wdXNoKHZpbmN1bG8uaWRSZWYpOwogICAgICAgICAgICBsaXN0YUNvbXBsZXRhLnB1c2godmluY3Vsby5pZFJlZik7CgogICAgICAgICAgICBpZiAobml2ZWwgKyAxIDwgcHJvZnVuZGlkYWQpIHsKICAgICAgICAgICAgICB2YXIgX3RoaXMxMSRlbmNvbnRyYXJOb2RvID0gX3RoaXMxMS5lbmNvbnRyYXJOb2Rvc0NvbmVjdGFkb3NSZWN1cnNpdmFtZW50ZSh2aW5jdWxvLmlkUmVmLCByb2xlcywgdGlwb3MsIGxpc3RhQ29tcGxldGEsIGxpc3RhUG9yTml2ZWxlcywgbml2ZWwgKyAxLCBwcm9mdW5kaWRhZCk7CgogICAgICAgICAgICAgIGxpc3RhQ29tcGxldGEgPSBfdGhpczExJGVuY29udHJhck5vZG8ubGlzdGFDb21wbGV0YTsKICAgICAgICAgICAgICBsaXN0YVBvck5pdmVsZXMgPSBfdGhpczExJGVuY29udHJhck5vZG8ubGlzdGFQb3JOaXZlbGVzOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygiTm8iKTsKICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgX2xvb3AoKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBsaXN0YUNvbXBsZXRhOiBsaXN0YUNvbXBsZXRhLAogICAgICAgIGxpc3RhUG9yTml2ZWxlczogbGlzdGFQb3JOaXZlbGVzCiAgICAgIH07CiAgICB9LAogICAgem9vbVZpc3RhOiBmdW5jdGlvbiB6b29tVmlzdGEoZGVsdGFab29tKSB7CiAgICAgIHZhciBudWV2b1pvb20gPSB0aGlzLnpvb20gKyBkZWx0YVpvb207CgogICAgICBpZiAobnVldm9ab29tIDwgdGhpcy5taW5ab29tKSB7CiAgICAgICAgdGhpcy56b29tID0gdGhpcy5taW5ab29tOwogICAgICB9IGVsc2UgaWYgKG51ZXZvWm9vbSA+IHRoaXMubWF4Wm9vbSkgewogICAgICAgIHRoaXMuem9vbSA9IHRoaXMubWF4Wm9vbTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnpvb20gPSBudWV2b1pvb207CiAgICAgIH0gLy9QYW4gdmlzdGEgZGUgYWN1ZXJkbyBjb24gbGEgcG9zaWNpw7NuIGRlbCBtb3VzZSByZXNwZWN0byBkZWwgYXRsYXMKCiAgICB9LAogICAgem9vbVdoZWVsOiBmdW5jdGlvbiB6b29tV2hlZWwoZSkgewogICAgICBpZiAoIXRoaXMuaG92ZXJlZCB8fCAhZS5jdHJsS2V5KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBjb250ZW5lZG9yID0gdGhpcy4kZWw7CiAgICAgIHZhciBwb3NDb250ZW5lZG9yID0gY29udGVuZWRvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdmFyIHBvc1pvb20gPSB7CiAgICAgICAgeDogTWF0aC5yb3VuZCgoZS5jbGllbnRYIC0gcG9zQ29udGVuZWRvci5sZWZ0KSAvIHRoaXMuZmFjdG9yWm9vbSkgKyB0aGlzLmNlbnRyb1Zpc3RhLngsCiAgICAgICAgeTogTWF0aC5yb3VuZCgoZS5jbGllbnRZIC0gcG9zQ29udGVuZWRvci50b3ApIC8gdGhpcy5mYWN0b3Jab29tKSArIHRoaXMuY2VudHJvVmlzdGEueQogICAgICB9OwogICAgICB2YXIgcHJvcG9yY2lvbmVzID0gewogICAgICAgIHg6IChwb3Nab29tLnggLSB0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbC54KSAvIChwb3NDb250ZW5lZG9yLndpZHRoIC8gdGhpcy5mYWN0b3Jab29tKSwKICAgICAgICB5OiAocG9zWm9vbS55IC0gdGhpcy5jZW50cm9WaXN0YURlY2ltYWwueSkgLyAocG9zQ29udGVuZWRvci5oZWlnaHQgLyB0aGlzLmZhY3Rvclpvb20pCiAgICAgIH07CiAgICAgIHZhciBmYWN0b3Jab29tID0gMC4yOwogICAgICB0aGlzLnpvb21WaXN0YSgtTWF0aC5yb3VuZChlLmRlbHRhWSAqIGZhY3Rvclpvb20pLCB7CiAgICAgICAgeDogcG9zWm9vbS54LAogICAgICAgIHk6IHBvc1pvb20ueQogICAgICB9KTsKICAgICAgdGhpcy4kc2V0KHRoaXMuY2VudHJvVmlzdGFEZWNpbWFsLCAieCIsIHBvc1pvb20ueCAtIHBvc0NvbnRlbmVkb3Iud2lkdGggLyB0aGlzLmZhY3Rvclpvb20gKiBwcm9wb3JjaW9uZXMueCk7CiAgICAgIHRoaXMuJHNldCh0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbCwgInkiLCBwb3Nab29tLnkgLSBwb3NDb250ZW5lZG9yLmhlaWdodCAvIHRoaXMuZmFjdG9yWm9vbSAqIHByb3BvcmNpb25lcy55KTsKICAgIH0sCiAgICBoaWRlWm9vbUluZm86IGRlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zaG93aW5nWm9vbUluZm8gPSBmYWxzZTsKICAgIH0sIDEwMDApCiAgfSwKICB3YXRjaDogewogICAgbm9kb1NlbGVjY2lvbmFkbzogZnVuY3Rpb24gbm9kb1NlbGVjY2lvbmFkbygpIHsKICAgICAgdGhpcy5hY3R1YWxpemFyVHJhem9zKys7CiAgICB9LAogICAgcm91dGU6IGZ1bmN0aW9uIHJvdXRlKHRvKSB7CiAgICAgIGNvbnNvbGUubG9nKCJjYW1iaW8gZGUgbmF2ZWdhY2lceEYzbiBhICIuY29uY2F0KHRvLnBhdGgpKTsKICAgIH0sCiAgICBpZE5vZG9UYXJnZXQ6IGZ1bmN0aW9uIGlkTm9kb1RhcmdldChfaWROb2RvVGFyZ2V0KSB7CiAgICAgIGlmICghX2lkTm9kb1RhcmdldCkgewogICAgICAgIHRoaXMuaWRzTmVjZXNhcmlvc1BhcmFUYXJnZXQgPSBbXTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJpbmljaWFuZG8gYnVzcXVlZGEgZGUgcmVxdWVyaWRvcyBkZSBub2RvICIuY29uY2F0KF9pZE5vZG9UYXJnZXQpKTsKICAgICAgdGhpcy5pZHNOZWNlc2FyaW9zUGFyYVRhcmdldCA9IHRoaXMuZW5jb250cmFyTm9kb3NOZWNlc2FyaW9zRGVOb2RvKF9pZE5vZG9UYXJnZXQsIFtdKTsKICAgIH0sCiAgICB6b29tOiBmdW5jdGlvbiB6b29tKCkgewogICAgICB0aGlzLnNob3dpbmdab29tSW5mbyA9IHRydWU7CiAgICAgIHRoaXMuaGlkZVpvb21JbmZvKCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgLy8gaWYgKCF0aGlzLnVzdWFyaW8uYXRsYXMgfHwgIXRoaXMudXN1YXJpby5hdGxhcy5jZW50cm9WaXN0YSkgewogICAgLy8gICBjb25zb2xlLmxvZyhgTm8gaGFiw61hIGluZm8gZGUgY2VudHJvIHZpc3RhIGVuIGxhIHN0b3JlLiBEZXNjYXJnYW5kb2ApOwogICAgLy8gICB0aGlzLmRlc2NhcmdhckNlbnRyb1Zpc3RhKCk7CiAgICAvLyAgIHJldHVybjsKICAgIC8vIH0KICAgIC8vIHRoaXMuJHNldCh0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbCwgIngiLCB0aGlzLnVzdWFyaW8uYXRsYXMuY2VudHJvVmlzdGEueCk7CiAgICAvLyB0aGlzLiRzZXQodGhpcy5jZW50cm9WaXN0YURlY2ltYWwsICJ5IiwgdGhpcy51c3VhcmlvLmF0bGFzLmNlbnRyb1Zpc3RhLnkpOwogICAgaWYgKHNjcmVlbi53aWR0aCA8IDYwMCkgewogICAgICB0aGlzLnpvb20gPSA3MDsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigid2hlZWwiLCB0aGlzLnpvb21XaGVlbCwgewogICAgICBwYXNzaXZlOiBmYWxzZQogICAgfSk7CiAgfSwKICByZW1vdmVkOiBmdW5jdGlvbiByZW1vdmVkKCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIndoZWVsIiwgdGhpcy56b29tV2hlZWwpOwogIH0gLy8gYmVmb3JlUm91dGVMZWF2ZShfLCBfXywgbmV4dCkgewogIC8vICAgY29uc29sZS5sb2coCiAgLy8gICAgIGBlbnZpYW5kbyBudWV2byBjZW50cm9WaXN0YSBwYXJhIGVsIHVzdWFyaW8gJHsKICAvLyAgICAgICB0aGlzLnVzdWFyaW8uaWQKICAvLyAgICAgfS4gQ2VudHJvIHZpc3RhOiAke0pTT04uc3RyaW5naWZ5KHRoaXMuY2VudHJvVmlzdGEpfWAKICAvLyAgICk7CiAgLy8gICB0aGlzLiRzdG9yZS5jb21taXQoInNldENlbnRyb1Zpc3RhQXRsYXMiLCB0aGlzLmNlbnRyb1Zpc3RhKTsKICAvLyAgIHRoaXMuJGFwb2xsbwogIC8vICAgICAubXV0YXRlKHsKICAvLyAgICAgICBtdXRhdGlvbjogZ3FsYAogIC8vICAgICAgICAgbXV0YXRpb24oJGlkVXN1YXJpbzogSUQsICRjZW50cm9WaXN0YTogQ29vcmRzSW5wdXQpIHsKICAvLyAgICAgICAgICAgc2V0Q2VudHJvVmlzdGEoaWRVc3VhcmlvOiAkaWRVc3VhcmlvLCBjZW50cm9WaXN0YTogJGNlbnRyb1Zpc3RhKQogIC8vICAgICAgICAgfQogIC8vICAgICAgIGAsCiAgLy8gICAgICAgdmFyaWFibGVzOiB7CiAgLy8gICAgICAgICBpZFVzdWFyaW86IHRoaXMuJHN0b3JlLnN0YXRlLnVzdWFyaW8uaWQsCiAgLy8gICAgICAgICBjZW50cm9WaXN0YTogdGhpcy5jZW50cm9WaXN0YSwKICAvLyAgICAgICB9LAogIC8vICAgICB9KQogIC8vICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgLy8gICAgICAgbmV4dCgpOwogIC8vICAgICB9KQogIC8vICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gICAgICAgY29uc29sZS5sb2coYGVycm9yOiAke2Vycm9yfWApOwogIC8vICAgICAgIG5leHQoKTsKICAvLyAgICAgfSk7CiAgLy8gfSwKCn07"},{"version":3,"sources":["AtlasConocimiento.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    class=\"atlasConocimiento\"\n    @mousedown.left.exact.stop=\"panningVista = true\"\n    @mouseenter=\"hovered = true\"\n    @mouseleave=\"hovered = false\"\n    @click=\"\n      idNodoMenuCx = '-1';\n      cerrarBusqueda++;\n    \"\n    @mousemove=\"panVista($event)\"\n    @mouseup.left=\"clickFondoAtlas\"\n    @touchmove.prevent.stop=\"movimientoMobile\"\n    @touchstart=\"iniciaMovimientoTouch\"\n    @touchend=\"finTouch\"\n    @contextmenu.self.exact.prevent=\"abrirMenuContextual\"\n  >\n    <transition name=\"fadeOut\">\n      <div v-show=\"showingZoomInfo\" id=\"infoZoom\">x{{ factorZoom }}</div>\n    </transition>\n    <div\n      id=\"menuContextual\"\n      :style=\"[offsetMenuContextual]\"\n      v-show=\"mostrandoMenuContextual\"\n    >\n      <div\n        class=\"botonMenuContextual\"\n        id=\"botonCrearNuevoNodo\"\n        @click=\"crearNodoEnMenuContextual\"\n      >\n        Crear Nodo de conocimiento\n      </div>\n    </div>\n    <div\n      id=\"botonCallingPosiciones\"\n      v-if=\"usuarioSuperadministrador && usuario.username == 'juanMamian'\"\n      @click.stop=\"iniciarCallingPosiciones\"\n      :class=\"{ deshabilitado: callingPosiciones }\"\n      :style=\"[\n        { backgroundColor: callingPosiciones ? 'green' : 'transparent' },\n      ]\"\n    ></div>\n    <buscador-nodos-conocimiento\n      @nodoSeleccionado=\"centrarEnNodo\"\n      ref=\"buscadorNodos\"\n      :cerrarBusqueda=\"cerrarBusqueda\"\n    />\n\n    <panel-conjuntos-nodos\n      ref=\"panelConjuntosNodos\"\n      :yo=\"yo\"\n      :todosNodos=\"todosNodos\"\n      :idNodoTarget=\"idNodoTarget\"\n      @targetSeleccionado=\"setNodoTargetCache\"\n      @centrarEnNodo=\"centrarEnNodo(todosNodos.find((n) => n.id == $event))\"\n    />\n    <panel-configuracion-atlas ref=\"panelConfiguracionAtlas\" :yo=\"yo\" />\n    <canvases\n      :todosNodos=\"todosNodos\"\n      :nodoSeleccionado=\"nodoSeleccionado\"\n      :idNodoTarget=\"idNodoTarget\"\n      :idsNecesariosParaTarget=\"idsNecesariosParaTarget\"\n      :centroVista=\"centroVista\"\n      :callingPosiciones=\"callingPosiciones\"\n      :factorZoom=\"factorZoom\"\n      :style=\"[offsetContenedorNodos]\"\n      ref=\"canvases\"\n      v-if=\"todosNodos.length > 1\"\n    />\n    <div id=\"contenedorNodos\" :style=\"[offsetContenedorNodos]\">\n      <nodo-conocimiento\n        :nodoSeleccionado=\"nodoSeleccionado\"\n        :todosNodos=\"todosNodos\"\n        :idNodoMenuCx=\"idNodoMenuCx\"\n        :usuarioAdministradorAtlas=\"usuarioAdministradorAtlas\"\n        :yo=\"yo\"\n        :key=\"nodo.id\"\n        v-for=\"nodo of todosNodos\"\n        :esteNodo=\"nodo\"\n        :centroVista=\"centroVista\"\n        :esNodoObjetivo=\"idsNodosObjetivos.includes(nodo.id)\"\n        :esTarget=\"idNodoTarget == nodo.id\"\n        :idsNodosAprendidos=\"idsNodosAprendidos\"\n        :factorZoom=\"factorZoom\"\n        :escondido=\"\n          idNodoTarget &&\n          !idsNecesariosParaTarget.includes(nodo.id) &&\n          idNodoTarget != nodo.id\n        \"\n        :configuracionAtlas=\"configuracionAtlas\"\n        :callingPosiciones=\"callingPosiciones\"\n        @click.right.native.exact.stop.prevent=\"idNodoMenuCx = nodo.id\"\n        @click.native.stop=\"seleccionNodo(nodo)\"\n        @creacionVinculo=\"crearVinculo\"\n        @eliminacionVinculo=\"eliminarVinculo\"\n        @cambioDePosicionManual=\"cambiarCoordsManualesNodo\"\n        @eliminar=\"eliminarNodo\"\n        @cambieEstadoObjetivo=\"setEstadoObjetivoNodoCache($event, nodo.id)\"\n        @tengoNuevoValorAprendido=\"setNodoAprendidoCache($event, nodo.id)\"\n      />\n    </div>\n\n    <loading\n      id=\"simboloDescargandoNodos\"\n      v-show=\"!nodosDescargados\"\n      texto=\"descargando nodos de conocimiento\"\n    />\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport NodoConocimiento from \"./atlasConocimiento/NodoConocimiento.vue\";\nimport Canvases from \"./atlasConocimiento/Canvases.vue\";\nimport BuscadorNodosConocimiento from \"./atlasConocimiento/BuscadorNodosConocimiento.vue\";\nimport Loading from \"./utilidades/Loading.vue\";\nimport PanelConjuntosNodos from \"./atlasConocimiento/PanelConjuntosNodos.vue\";\nimport PanelConfiguracionAtlas from \"./atlasConocimiento/PanelConfiguracionAtlas.vue\";\nconst debounce = require(\"debounce\");\n\nconst fragmentoNodoConocimiento = gql`\n  fragment fragNodoConocimiento on NodoConocimiento {\n    id\n    nombre\n    descripcion\n    expertos\n    clases {\n      id\n      nombre\n      idExperto\n      interesados\n    }\n    coordsManuales {\n      x\n      y\n    }\n    coords {\n      x\n      y\n    }\n    autoCoords {\n      x\n      y\n    }\n    centroMasa {\n      x\n      y\n    }\n    stuck\n    angulo\n    puntaje\n    vinculos {\n      idRef\n      rol\n      tipo\n    }\n    fuerzaCentroMasa {\n      fuerza\n      direccion\n    }\n    fuerzaColision {\n      fuerza\n      direccion\n    }\n  }\n`;\n\nconst QUERY_NODOS = gql`\n  query {\n    todosNodos {\n      ...fragNodoConocimiento\n    }\n  }\n  ${fragmentoNodoConocimiento}\n`;\n\nconst QUERY_DATOS_USUARIO_NODOS = gql`\n  query {\n    yo {\n      id\n      atlas {\n        datosNodos {\n          idNodo\n          objetivo\n          aprendido\n        }\n        configuracion {\n          modo\n        }\n        idNodoTarget\n        colecciones {\n          id\n          nombre\n          idsNodos\n          nodos {\n            id\n            nombre\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default {\n  components: {\n    NodoConocimiento,\n    Canvases,\n    BuscadorNodosConocimiento,\n    Loading,\n    PanelConjuntosNodos,\n    PanelConfiguracionAtlas,\n  },\n  name: \"AtlasConocimiento\",\n  apollo: {\n    todosNodos: {\n      query: QUERY_NODOS,\n      result: function () {\n        this.dibujarVinculosGrises();\n      },\n      pollInterval() {\n        return this.callingPosiciones ? 5000 : null;\n      },\n      update({ todosNodos }) {\n        this.nodosDescargados = true;\n        var nuevoTodosNodos = JSON.parse(JSON.stringify(todosNodos));\n        nuevoTodosNodos.forEach((nodo) => {\n          nodo.coordsManuales = nodo.autoCoords;\n          nodo.coords = nodo.autoCoords;\n        });\n        return nuevoTodosNodos;\n      },\n      fetchPolicy: \"cache-and-network\",\n    },\n    yo: {\n      query: QUERY_DATOS_USUARIO_NODOS,\n      skip() {\n        return !this.usuarioLogeado || this.todosNodos.length < 1;\n      },\n    },\n    configuracionAtlas: {\n      query: gql`\n        query ($nombreAtlas: String!) {\n          configuracionAtlas(nombreAtlas: $nombreAtlas) {\n            id\n            posicionando\n          }\n        }\n      `,\n      variables: {\n        nombreAtlas: \"conocimiento\",\n      },\n      fetchPolicy: \"network-only\",\n    },\n  },\n  data() {\n    return {\n      configuracionAtlas: {\n        posicionando: false,\n      },\n      hovered: false,\n      todosNodos: [],\n      nodosDescargados: false,\n      idNodoSeleccionado: \"-1\",\n      idNodoMenuCx: \"-1\",\n      idsNecesariosParaTarget: [],\n\n      yo: {\n        atlas: {\n          datosNodos: [],\n          configuracion: {\n            modo: \"estudiante\",\n          },\n        },\n      },\n\n      centroVistaDecimal: {\n        x: 218,\n        y: 39,\n      },\n      showingZoomInfo: false,\n      zoom: 80,\n      minZoom: 20,\n      maxZoom: 200,\n      pinching: false,\n      lastPinchDistance: 0,\n      actualizarTrazos: 0,\n      panningVista: false,\n      vistaPanned: false,\n      nodosConectadosAlSeleccionado: {\n        listaCompleta: [],\n        listaPorNiveles: [],\n      },\n      profundidadNodosConectadosAlSeleccionado: 1,\n      actualizarVinculosGrises: 0,\n\n      ultimoTouchX: 0,\n      ultimoTouchY: 0,\n\n      cerrarBusqueda: 0,\n\n      callingPosiciones: false,\n\n      mostrandoMenuContextual: false,\n      offsetMenuContextual: {\n        top: \"0px\",\n        left: \"0px\",\n      },\n      enviandoQueryConfiguracionAtlas: false,\n    };\n  },\n  computed: {\n    idsNodosObjetivos() {\n      if (!this.yo || !this.yo.atlas || !this.yo.atlas.datosNodos) {\n        return [];\n      }\n      return this.yo.atlas.datosNodos\n        .filter((n) => n.objetivo == true)\n        .map((n) => n.idNodo);\n    },\n    nodosObjetivo() {\n      if (!this.todosNodos) return [];\n      return this.todosNodos.filter((n) =>\n        this.idsNodosObjetivos.includes(n.id)\n      );\n    },\n    nodoSeleccionado: function () {\n      if (!this.todosNodos) {\n        console.log(`NO HAY NODOS`);\n        return false;\n      }\n      if (this.todosNodos.some((n) => n.id == this.idNodoSeleccionado)) {\n        let indexSeleccionado = this.todosNodos.findIndex(\n          (n) => n.id == this.idNodoSeleccionado\n        );\n        return this.todosNodos[indexSeleccionado];\n      }\n      return {\n        id: \"-1\",\n        vinculos: [],\n      };\n    },\n    idUsuario: function () {\n      return this.$store.state.usuario.id;\n    },\n    usuarioAdministradorAtlas: function () {\n      if (!this.$store.state.usuario.permisos) return false;\n      return this.$store.state.usuario.permisos.includes(\"atlasAdministrador\")\n        ? true\n        : false;\n    },\n    idNodoTarget() {\n      if (!this.yo || !this.yo.atlas) return null;\n      return this.yo.atlas.idNodoTarget;\n    },\n    idsNodosAprendidos() {\n      return this.yo.atlas.datosNodos\n        .filter((n) => n.aprendido == true)\n        .map((n) => n.idNodo);\n    },\n    centroVista() {\n      return {\n        x: Math.round(this.centroVistaDecimal.x),\n        y: Math.round(this.centroVistaDecimal.y),\n      };\n    },\n    factorZoom() {\n      return Number((this.zoom / 100).toFixed(2));\n    },\n    offsetContenedorNodos() {\n      return {\n        left: -(this.centroVista.x * this.factorZoom) + \"px\",\n        top: -(this.centroVista.y * this.factorZoom) + \"px\",\n      };\n    },\n  },\n  methods: {\n    iniciarCallingPosiciones() {\n      var ciclos = prompt(\"Cuantos ciclos?\");\n      if (isNaN(ciclos)) {\n        return;\n      }\n\n      ciclos = Math.round(ciclos);\n      if (ciclos < 1) {\n        return;\n      }\n      console.log(`Enviando reposicionamiento de ${ciclos} ciclos`);\n      this.callingPosiciones = true;\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($ciclos: Int!) {\n              posicionarNodosConocimientoByFuerzas(ciclos: $ciclos)\n            }\n          `,\n          variables: {\n            ciclos,\n          },\n        })\n        .then(() => {\n          this.callingPosiciones = false;\n        })\n        .catch((error) => {\n          this.callingPosiciones = false;\n          console.log(`Error: ${error}`);\n        });\n    },\n    togglePosicionamiento() {\n      this.enviandoQueryConfiguracionAtlas = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($nombreAtlas: String!) {\n              togglePosicionamientoAutomaticoAtlas(nombreAtlas: $nombreAtlas) {\n                id\n                posicionando\n              }\n            }\n          `,\n          variables: {\n            nombreAtlas: \"conocimiento\",\n          },\n        })\n        .then(() => {\n          this.enviandoQueryConfiguracionAtlas = false;\n        })\n        .catch(() => {\n          this.enviandoQueryConfiguracionAtlas = false;\n        });\n    },\n    abrirMenuContextual(e) {\n      let posCalendario = this.$el.getBoundingClientRect();\n\n      let topClick = Math.round(e.pageY - posCalendario.top);\n      let leftClick = Math.round(e.pageX - posCalendario.left);\n\n      this.$set(this.offsetMenuContextual, \"top\", topClick + \"px\");\n      this.$set(this.offsetMenuContextual, \"left\", leftClick + \"px\");\n      this.mostrandoMenuContextual = true;\n      //this.crearNodo({x: leftClick, y: topClick});\n    },\n    crearNodoEnMenuContextual() {\n      let posContenedor = document\n        .getElementById(\"contenedorNodos\")\n        .getBoundingClientRect();\n\n      console.log(`Offset men cx: ${this.offsetMenuContextual.top}`);\n      console.log(`Offset men cx: ${parseInt(this.offsetMenuContextual.top)}`);\n\n      var posicionNuevoNodo = {\n        x: parseInt(\n          (parseInt(this.offsetMenuContextual.left) - posContenedor.left) /\n            this.factorZoom\n        ),\n        y: parseInt(\n          (parseInt(this.offsetMenuContextual.top) - posContenedor.top) /\n            this.factorZoom\n        ),\n      };\n\n      console.log(`Creando nuevo nodo en ${JSON.stringify(posicionNuevoNodo)}`);\n\n      this.crearNodo(posicionNuevoNodo);\n    },\n    encontrarNodosNecesariosDeNodo(idNodo, listaTotal) {\n      const elNodo = this.todosNodos.find((n) => n.id == idNodo);\n      if (!elNodo) {\n        return listaTotal;\n      }\n      const necesarios = elNodo.vinculos\n        .filter((v) => v.rol == \"target\")\n        .map((v) => v.idRef);\n      necesarios.forEach((necesario) => {\n        if (!listaTotal.includes(necesario)) {\n          listaTotal.push(necesario);\n          listaTotal = this.encontrarNodosNecesariosDeNodo(\n            necesario,\n            listaTotal\n          );\n        }\n      });\n      return listaTotal;\n    },\n    clickFondoAtlas() {\n      console.log(`Click en el fondo del atlas`);\n      if (!this.vistaPanned) this.idNodoSeleccionado = \"-1\";\n      this.panningVista = false;\n      this.vistaPanned = false;\n      this.$refs.panelConjuntosNodos.abierto = false;\n      this.$refs.panelConfiguracionAtlas.abierto = false;\n      this.mostrandoMenuContextual = false;\n    },\n    setEstadoObjetivoNodoCache(nuevoEstado, idNodo) {\n      console.log(\n        `Seting en cache al nodo ${idNodo} con estado objetivo: ${nuevoEstado}`\n      );\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n\n      var indexN = nuevoCache.yo.atlas.datosNodos.findIndex(\n        (n) => n.idNodo == idNodo\n      );\n      if (indexN > -1) {\n        nuevoCache.yo.atlas.datosNodos[indexN].objetivo = nuevoEstado;\n      } else {\n        console.log(`No estaba en cach. Pushing`);\n        nuevoCache.yo.atlas.datosNodos.push({\n          __typename: \"DatoNodoUsuario\",\n          idNodo,\n          objetivo: nuevoEstado,\n          aprendido: false,\n        });\n      }\n      store.writeQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n        data: nuevoCache,\n      });\n    },\n    setNodoAprendidoCache(nuevoEstado, idNodo) {\n      console.log(\n        `Seting en cache al nodo ${idNodo} con estado aprendido: ${nuevoEstado}`\n      );\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n      var indexN = nuevoCache.yo.atlas.datosNodos.findIndex(\n        (n) => n.idNodo == idNodo\n      );\n      if (indexN > -1) {\n        nuevoCache.yo.atlas.datosNodos[indexN].aprendido = nuevoEstado;\n      } else {\n        console.log(`No estaba en cach. Pushing`);\n        nuevoCache.yo.atlas.datosNodos.push({\n          __typename: \"DatoNodoUsuario\",\n          idNodo,\n          objetivo: false,\n          aprendido: nuevoEstado,\n        });\n      }\n      store.writeQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n        data: nuevoCache,\n      });\n    },\n    setNodoTargetCache(idNodo) {\n      console.log(`Seting en cache al nodo ${idNodo} como target`);\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n      nuevoCache.yo.atlas.idNodoTarget = idNodo;\n      store.writeQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n        data: nuevoCache,\n      });\n    },\n\n    centrarEnNodo(n) {\n      this.$set(\n        this.centroVistaDecimal,\n        \"x\",\n        n.coords.x - this.$el.offsetWidth / (2 * this.factorZoom)\n      );\n      this.$set(\n        this.centroVistaDecimal,\n        \"y\",\n        n.coords.y - this.$el.offsetHeight / (2 * this.factorZoom)\n      );\n      this.seleccionNodo(n);\n      //this.centroVista=e;\n    },\n    iniciaMovimientoTouch(e) {\n      if (e.touches.length === 2) {\n        var dist = Math.hypot(\n          e.touches[0].pageX - e.touches[1].pageX,\n          e.touches[0].pageY - e.touches[1].pageY\n        );\n        this.lastPinchDistance = dist;\n        this.pinching = true;\n        return;\n      }\n\n      this.ultimoTouchX = e.changedTouches[0].clientX;\n      this.ultimoTouchY = e.changedTouches[0].clientY;\n    },\n    movimientoMobile(e) {\n      if (this.pinching) {\n        var contenedor = this.$el;\n        let posContenedor = contenedor.getBoundingClientRect();\n\n        const posZoom = {\n          x:\n            Math.round(posContenedor.width / 2 / this.factorZoom) +\n            this.centroVista.x,\n          y:\n            Math.round(posContenedor.height / 2 / this.factorZoom) +\n            this.centroVista.y,\n        };\n\n        const proporciones = {\n          x:\n            (posZoom.x - this.centroVistaDecimal.x) /\n            (posContenedor.width / this.factorZoom),\n          y:\n            (posZoom.y - this.centroVistaDecimal.y) /\n            (posContenedor.height / this.factorZoom),\n        };\n\n        var dist = Math.hypot(\n          e.touches[0].pageX - e.touches[1].pageX,\n          e.touches[0].pageY - e.touches[1].pageY\n        );\n        var pinch = dist - this.lastPinchDistance;\n        pinch = pinch * 0.5;\n        this.zoomVista(pinch);\n        this.lastPinchDistance = dist;\n\n        this.$set(\n          this.centroVistaDecimal,\n          \"x\",\n          posZoom.x - (posContenedor.width / this.factorZoom) * proporciones.x\n        );\n        this.$set(\n          this.centroVistaDecimal,\n          \"y\",\n          posZoom.y - (posContenedor.height / this.factorZoom) * proporciones.y\n        );\n        return;\n      }\n\n      const deltaX = e.changedTouches[0].clientX - this.ultimoTouchX;\n      const deltaY = e.changedTouches[0].clientY - this.ultimoTouchY;\n      this.ultimoTouchX = e.changedTouches[0].clientX;\n      this.ultimoTouchY = e.changedTouches[0].clientY;\n\n      this.desplazarVista(deltaX, deltaY);\n    },\n    finTouch() {\n      this.pinching = false;\n    },\n    cambiarCoordsManualesNodo(idNodo, coordsManuales) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      this.todosNodos[this.todosNodos.findIndex((n) => n.id == idNodo)].coords =\n        coordsManuales;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: String, $coordsManuales: CoordsInput) {\n              setCoordsManuales(\n                idNodo: $idNodo\n                coordsManuales: $coordsManuales\n              ) {\n                modificados {\n                  id\n                  coordsManuales {\n                    x\n                    y\n                  }\n                  coords {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          `,\n          variables: {\n            idNodo,\n            coordsManuales,\n          },\n        })\n        .then(() => {\n          this.$refs.canvases.crearImagenTodosVinculos();\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n        });\n    },\n    eliminarNodo(idNodo) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      if (!confirm(\"Seguro de que quieres eliminar este nodo?\")) return;\n      console.log(`enviando mutacion de eliminar nodo`);\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!) {\n              eliminarNodo(idNodo: $idNodo)\n            }\n          `,\n          variables: {\n            idNodo,\n          },\n          update(store, { data: { eliminarNodo } }) {\n            if (!eliminarNodo) {\n              console.log(`Nodo no fue eliminado`);\n              return;\n            }\n            const cache = store.readQuery({\n              query: QUERY_NODOS,\n            });\n            var nuevoCache = JSON.parse(JSON.stringify(cache));\n            const indexN = nuevoCache.todosNodos.findIndex(\n              (n) => n.id == idNodo\n            );\n            if (indexN > -1) {\n              nuevoCache.todosNodos.splice(indexN, 1);\n              store.writeQuery({\n                query: QUERY_NODOS,\n                data: nuevoCache,\n              });\n            } else {\n              console.log(`El nodo no estaba presente`);\n            }\n          },\n        })\n        .then((data) => {\n          console.log(`quitando el objeto del array. ${data}`);\n        });\n    },\n    crearNodo(posicion) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`Error usuario no autorizado`);\n        return;\n      }\n      console.log(`enviando una mutacin de crear nodo`);\n\n      let infoNodo = {\n        coordsManuales: {\n          x: posicion.x,\n          y: posicion.y,\n        },\n        coords: {\n          x: posicion.x,\n          y: posicion.y,\n        },\n        autoCoords: {\n          x: posicion.x,\n          y: posicion.y,\n        },\n      };\n      console.log(`en las coordenadas: ${posicion.x}, ${posicion.y} `);\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($infoNodo: NodoConocimientoInput) {\n              crearNodo(infoNodo: $infoNodo) {\n                ...fragNodoConocimiento\n              }\n            }\n            ${fragmentoNodoConocimiento}\n          `,\n          variables: {\n            infoNodo,\n          },\n        })\n        .then(({ data: { crearNodo } }) => {\n          console.log(`Creado ${crearNodo.id}`);\n          const store = this.$apollo.provider.defaultClient;\n          const cache = store.readQuery({\n            query: QUERY_NODOS,\n          });\n          var nuevoCache = JSON.parse(JSON.stringify(cache));\n          var losNodos = nuevoCache.todosNodos;\n          const indexN = losNodos.findIndex((n) => n.id === crearNodo.id);\n          if (indexN > -1) {\n            console.log(`El nodo ya estaba en cach`);\n          } else {\n            losNodos.push(crearNodo);\n            store.writeQuery({\n              query: QUERY_NODOS,\n              data: nuevoCache,\n            });\n          }\n\n          //this.$router.push(\"/nodoConocimiento/\"+crearNodo.id);\n        })\n        .catch((error) => {\n          console.log(`Error. E: ${error}`);\n        });\n    },\n    descargarCentroVista() {\n      let dis = this;\n      this.$apollo\n        .query({\n          query: gql`\n            query {\n              yo {\n                id\n                atlas {\n                  centroVista {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          `,\n          variables: {\n            idUsuario: this.$store.state.usuario.id,\n          },\n          fetchPolicy: \"network-only\",\n        })\n        .then(function ({ data: { yo } }) {\n          let coords = yo.atlas.centroVista;\n          dis.$set(dis.centroVista, \"x\", coords.x);\n          dis.$set(dis.centroVista, \"y\", coords.y);\n          dis.$store.commit(\"setCentroVistaAtlas\", coords);\n        })\n        .catch(function (error) {\n          console.log(`error fetching centro vista: ${error}`);\n        });\n    },\n    desplazarVista(deltaX, deltaY) {\n      this.$set(\n        this.centroVistaDecimal,\n        \"x\",\n        Math.round(this.centroVistaDecimal.x - deltaX / this.factorZoom)\n      );\n      this.$set(\n        this.centroVistaDecimal,\n        \"y\",\n        Math.round(this.centroVistaDecimal.y - deltaY / this.factorZoom)\n      );\n      this.actualizarTrazos++;\n    },\n    panVista(e) {\n      if (!this.panningVista) {\n        return;\n      }\n      this.desplazarVista(e.movementX, e.movementY);\n      e.preventDefault();\n      this.vistaPanned = true;\n\n      /*this.centroVista.x -= e.movementX;\n      this.centroVista.y -= e.movementY;\n      */\n    },\n    seleccionNodo(nodo) {\n      this.idNodoSeleccionado = nodo.id;\n      if (!this.todosNodos.some((n) => n.id == this.idNodoSeleccionado)) {\n        console.log(`No encontrado`);\n        return null;\n      }\n\n      let profundidad = parseInt(this.profundidadNodosConectadosAlSeleccionado);\n      let listaPorNiveles = [];\n      let idNodoSel = this.idNodoSeleccionado;\n      let listaCompleta = [idNodoSel];\n      if (profundidad > 0) {\n        for (let i = 0; i < profundidad; i++) {\n          listaPorNiveles[i] = [];\n        }\n        ({ listaCompleta, listaPorNiveles } =\n          this.encontrarNodosConectadosRecursivamente(\n            idNodoSel,\n            [\"target\", \"source\"],\n            [\"continuacion\"],\n            listaCompleta,\n            listaPorNiveles,\n            0,\n            profundidad\n          ));\n      }\n      this.nodosConectadosAlSeleccionado = {\n        listaCompleta,\n        listaPorNiveles,\n      };\n    },\n    async eliminarVinculo(args) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      console.log(\n        `eliminando un vinculo entre ${args.idNodoFrom} y ${args.idNodoTo} `\n      );\n      await this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodoFrom: ID!, $idNodoTo: ID!) {\n              eliminarVinculoFromTo(\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    tipo\n                    rol\n                  }\n                }\n              }\n            }\n          `,\n          variables: {\n            idNodoFrom: args.idNodoFrom,\n            idNodoTo: args.idNodoTo,\n          },\n        })\n        .then(() => {})\n        .catch((error) => {\n          console.log(`error: ${error}`);\n        });\n    },\n    dibujarVinculosGrises() {\n      this.actualizarVinculosGrises++;\n    },\n    async crearVinculo(args) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      console.log(`creando un vinculo ${JSON.stringify(args)} `);\n      await this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($tipo: String!, $idNodoFrom: ID!, $idNodoTo: ID!) {\n              crearVinculo(\n                tipo: $tipo\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    rol\n                    tipo\n                  }\n                }\n              }\n            }\n          `,\n          variables: {\n            tipo: \"continuacion\",\n            idNodoFrom: args.idNodoFrom,\n            idNodoTo: args.idNodoTo,\n          },\n        })\n        .then(() => {})\n        .catch((error) => {\n          console.log(`error: ${error}`);\n        });\n    },\n    encontrarNodosConectadosRecursivamente(\n      idNodo,\n      roles,\n      tipos,\n      listaCompleta,\n      listaPorNiveles,\n      nivel,\n      profundidad\n    ) {\n      // Rol debe ser un array que incluye los roles validos en esta bsqueda.\n      // Tipo deber ser un array que incluye todos los tipos vlidos en esta bsqueda\n      let nodo = this.todosNodos.find((n) => n.id == idNodo);\n      for (let vinculo of nodo.vinculos) {\n        if (\n          this.todosNodos.some((n) => n.id == vinculo.idRef) &&\n          roles.some((r) => r == vinculo.rol) &&\n          tipos.some((t) => t == vinculo.tipo) &&\n          !listaCompleta.some((idN) => idN == vinculo.idRef)\n        ) {\n          listaPorNiveles[nivel].push(vinculo.idRef);\n          listaCompleta.push(vinculo.idRef);\n\n          if (nivel + 1 < profundidad) {\n            ({ listaCompleta, listaPorNiveles } =\n              this.encontrarNodosConectadosRecursivamente(\n                vinculo.idRef,\n                roles,\n                tipos,\n                listaCompleta,\n                listaPorNiveles,\n                nivel + 1,\n                profundidad\n              ));\n          }\n        } else {\n          console.log(`No`);\n        }\n      }\n      return { listaCompleta, listaPorNiveles };\n    },\n    zoomVista(deltaZoom) {\n      var nuevoZoom = this.zoom + deltaZoom;\n      if (nuevoZoom < this.minZoom) {\n        this.zoom = this.minZoom;\n      } else if (nuevoZoom > this.maxZoom) {\n        this.zoom = this.maxZoom;\n      } else {\n        this.zoom = nuevoZoom;\n      }\n\n      //Pan vista de acuerdo con la posicin del mouse respecto del atlas\n    },\n    zoomWheel(e) {\n      if (!this.hovered || !e.ctrlKey) {\n        return;\n      }\n      e.preventDefault();\n\n      var contenedor = this.$el;\n      let posContenedor = contenedor.getBoundingClientRect();\n\n      const posZoom = {\n        x:\n          Math.round((e.clientX - posContenedor.left) / this.factorZoom) +\n          this.centroVista.x,\n        y:\n          Math.round((e.clientY - posContenedor.top) / this.factorZoom) +\n          this.centroVista.y,\n      };\n\n      const proporciones = {\n        x:\n          (posZoom.x - this.centroVistaDecimal.x) /\n          (posContenedor.width / this.factorZoom),\n        y:\n          (posZoom.y - this.centroVistaDecimal.y) /\n          (posContenedor.height / this.factorZoom),\n      };\n\n      const factorZoom = 0.2;\n      this.zoomVista(-Math.round(e.deltaY * factorZoom), {\n        x: posZoom.x,\n        y: posZoom.y,\n      });\n\n      this.$set(\n        this.centroVistaDecimal,\n        \"x\",\n        posZoom.x - (posContenedor.width / this.factorZoom) * proporciones.x\n      );\n      this.$set(\n        this.centroVistaDecimal,\n        \"y\",\n        posZoom.y - (posContenedor.height / this.factorZoom) * proporciones.y\n      );\n    },\n    hideZoomInfo: debounce(function () {\n      this.showingZoomInfo = false;\n    }, 1000),\n  },\n  watch: {\n    nodoSeleccionado: function () {\n      this.actualizarTrazos++;\n    },\n    route: function (to) {\n      console.log(`cambio de navegacin a ${to.path}`);\n    },\n    idNodoTarget(idNodoTarget) {\n      if (!idNodoTarget) {\n        this.idsNecesariosParaTarget = [];\n        return;\n      }\n      console.log(`iniciando busqueda de requeridos de nodo ${idNodoTarget}`);\n      this.idsNecesariosParaTarget = this.encontrarNodosNecesariosDeNodo(\n        idNodoTarget,\n        []\n      );\n    },\n    zoom() {\n      this.showingZoomInfo = true;\n      this.hideZoomInfo();\n    },\n  },\n  mounted() {\n    // if (!this.usuario.atlas || !this.usuario.atlas.centroVista) {\n    //   console.log(`No haba info de centro vista en la store. Descargando`);\n    //   this.descargarCentroVista();\n    //   return;\n    // }\n    // this.$set(this.centroVistaDecimal, \"x\", this.usuario.atlas.centroVista.x);\n    // this.$set(this.centroVistaDecimal, \"y\", this.usuario.atlas.centroVista.y);\n\n    if (screen.width < 600) {\n      this.zoom = 70;\n    }\n  },\n  created() {\n    window.addEventListener(\"wheel\", this.zoomWheel, { passive: false });\n  },\n  removed() {\n    window.removeEventListener(\"wheel\", this.zoomWheel);\n  },\n  // beforeRouteLeave(_, __, next) {\n  //   console.log(\n  //     `enviando nuevo centroVista para el usuario ${\n  //       this.usuario.id\n  //     }. Centro vista: ${JSON.stringify(this.centroVista)}`\n  //   );\n  //   this.$store.commit(\"setCentroVistaAtlas\", this.centroVista);\n\n  //   this.$apollo\n  //     .mutate({\n  //       mutation: gql`\n  //         mutation($idUsuario: ID, $centroVista: CoordsInput) {\n  //           setCentroVista(idUsuario: $idUsuario, centroVista: $centroVista)\n  //         }\n  //       `,\n  //       variables: {\n  //         idUsuario: this.$store.state.usuario.id,\n  //         centroVista: this.centroVista,\n  //       },\n  //     })\n  //     .then(function () {\n  //       next();\n  //     })\n  //     .catch(function (error) {\n  //       console.log(`error: ${error}`);\n  //       next();\n  //     });\n  // },\n};\n</script>\n\n<style scoped>\n.atlasConocimiento {\n  position: relative;\n  overflow: hidden;\n}\n#menuContextual {\n  position: absolute;\n  background-color: gray;\n  z-index: 100;\n}\n.botonMenuContextual {\n  font-size: 12px;\n  color: rgb(221, 221, 221);\n  cursor: pointer;\n  padding: 10px;\n}\n.botonMenuContextual:hover {\n  background-color: rgb(68, 68, 68);\n}\n\n#canvases {\n  position: absolute;\n  pointer-events: none;\n}\n#contenedorNodos {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  user-select: none;\n\n  pointer-events: none;\n}\n#buscadorNodosConocimiento {\n  position: absolute;\n  top: 1%;\n  left: 1%;\n  /* transform: translateX(-50%); */\n  z-index: 1;\n}\n#panelConjuntosNodos {\n  z-index: 100;\n}\n#panelConfiguracionAtlas {\n  z-index: 100;\n}\n#panelObjetivos {\n  position: absolute;\n  top: 2%;\n  left: 50%;\n  transform: translateX(-50%);\n  opacity: 0.2;\n  z-index: 100;\n}\n#panelObjetivos:hover {\n  opacity: 1;\n}\n#infoZoom {\n  position: absolute;\n  top: 2%;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 10px;\n  display: inline-block;\n  font-weight: bold;\n  color: rgb(102, 102, 102);\n}\n#botonCallingPosiciones {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  border: 1px solid black;\n  position: absolute;\n  top: 1%;\n  right: 1%;\n  cursor: pointer;\n}\n\n#simboloDescargandoNodos {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 100;\n}\n\n.fadeOut-leave-to {\n  opacity: 0;\n}\n.fadeOut-leave-active {\n  transition: opacity 1s;\n}\n.fadeOut-leave {\n  opacity: 1;\n}\n</style>"],"sourceRoot":"src/components"}]}