{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/NotificacionActividadForos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/NotificacionActividadForos.vue","mtime":1643654906679},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsIGZyb20gIi9ob21lL3ZpZGExL3dlYnBqL3BlcGVwZS92dWVjbGllbnRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90YWdnZWRUZW1wbGF0ZUxpdGVyYWwiOwoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgIG11dGF0aW9uKCRpZFBhcmVudDogSUQhKSB7XG4gICAgICAgICAgICBlbGltaW5hck5vdGlmaWNhY2lvbkFjdGl2aWRhZEZvcm9zKGlkUGFyZW50OiAkaWRQYXJlbnQpXG4gICAgICAgICAgfVxuICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgZ3FsIGZyb20gImdyYXBocWwtdGFnIjsKaW1wb3J0IHsgUVVFUllfWU8gfSBmcm9tICIuLi8uLi9BcHAudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJOb3RpZmljYWNpb25BY3RpdmlkYWRGb3JvcyIsCiAgcHJvcHM6IHsKICAgIGVzdGFOb3RpZmljYWNpb246IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHZpc2l0YXI6IGZ1bmN0aW9uIHZpc2l0YXIoKSB7CiAgICAgIHZhciBlbmxhY2UgPSAiLyI7CiAgICAgIGVubGFjZSArPSB0aGlzLmVzdGFOb3RpZmljYWNpb24udGlwb1BhcmVudCArICIvIiArIHRoaXMuZXN0YU5vdGlmaWNhY2lvbi5pZFBhcmVudDsKCiAgICAgIGlmICh0aGlzLmVzdGFOb3RpZmljYWNpb24udGlwb1BhcmVudCA9PSAibGlicm8iKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVzIGVsIGVubGFjZSBhIHVuIGxpYnJvIik7CiAgICAgICAgdmFyIGVubGFjZUxpYnJvID0gdGhpcy50YWxsZXJDdWVudG9zVXJsICsgJz90PScgKyB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiArICImbD0iICsgdGhpcy5lc3RhTm90aWZpY2FjaW9uLmlkUGFyZW50OwogICAgICAgIGNvbnNvbGUubG9nKCJBYnJpZW5kbyBlbmxhY2U6ICIuY29uY2F0KGVubGFjZUxpYnJvKSk7CiAgICAgICAgd2luZG93Lm9wZW4oZW5sYWNlTGlicm8sICJfYmxhbmsiKTsKICAgICAgICB0aGlzLmVsaW1pbmFyc2UoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmVsaW1pbmFyc2UoKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaChlbmxhY2UpLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coIkVycm9yIGRlIG5hdmVnYWNpXHhGM246ICIuY29uY2F0KGVycm9yLm1lc3NhZ2Uuc3Vic3RyKDAsIDI4KSkpOwoKICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlLnN1YnN0cigwLCAyOCkgPT0gIkF2b2lkZWQgcmVkdW5kYW50IG5hdmlnYXRpb24iKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciBwb3IgbmF2ZWdhY2lceEYzbiIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgZWxpbWluYXJzZTogZnVuY3Rpb24gZWxpbWluYXJzZSgpIHsKICAgICAgdmFyIGlkUGFyZW50ID0gdGhpcy5lc3RhTm90aWZpY2FjaW9uLmlkUGFyZW50OwogICAgICBjb25zb2xlLmxvZygiRWxpbWluYW5kb3NlOiAiLmNvbmNhdChpZFBhcmVudCkpOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdCgpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkUGFyZW50OiBpZFBhcmVudAogICAgICAgIH0sCiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoc3RvcmUsIF9yZWYpIHsKICAgICAgICAgIHZhciBlbGltaW5hck5vdGlmaWNhY2lvbkFjdGl2aWRhZEZvcm9zID0gX3JlZi5kYXRhLmVsaW1pbmFyTm90aWZpY2FjaW9uQWN0aXZpZGFkRm9yb3M7CgogICAgICAgICAgaWYgKGVsaW1pbmFyTm90aWZpY2FjaW9uQWN0aXZpZGFkRm9yb3MpIHsKICAgICAgICAgICAgdmFyIGNhY2hlID0gc3RvcmUucmVhZFF1ZXJ5KHsKICAgICAgICAgICAgICBxdWVyeTogUVVFUllfWU8KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciBudWV2b0NhY2hlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjYWNoZSkpOwogICAgICAgICAgICB2YXIgaW5kZXhOID0gbnVldm9DYWNoZS55by5ub3RpZmljYWNpb25lc0FjdGl2aWRhZEZvcm9zLmZpbmRJbmRleChmdW5jdGlvbiAobikgewogICAgICAgICAgICAgIHJldHVybiBuLmlkUGFyZW50ID09IGlkUGFyZW50OwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChpbmRleE4gPiAtMSkgewogICAgICAgICAgICAgIG51ZXZvQ2FjaGUueW8ubm90aWZpY2FjaW9uZXNBY3RpdmlkYWRGb3Jvcy5zcGxpY2UoaW5kZXhOLCAxKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc3RvcmUud3JpdGVRdWVyeSh7CiAgICAgICAgICAgICAgcXVlcnk6IFFVRVJZX1lPLAogICAgICAgICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBtZW5zYWplOiBmdW5jdGlvbiBtZW5zYWplKCkgewogICAgICB2YXIgdGlwb1RhcmdldCA9IHRoaXMuZXN0YU5vdGlmaWNhY2lvbi50aXBvUGFyZW50OwogICAgICBpZiAodGlwb1RhcmdldCA9PSAibm9kb0Nvbm9jaW1pZW50byIpIHRpcG9UYXJnZXQgPSAibm9kbyBkZSBjb25vY2ltaWVudG8iOwogICAgICB2YXIgcGFsYWJyYVRhcmdldCA9ICI8c3BhbiBzdHlsZT0nY29sb3I6cmVkJz4iICsgdGlwb1RhcmdldCArICI8L3NwYW4+IjsKICAgICAgdmFyIG1lbnNhamUgPSAiSGF5IG51ZXZhcyByZXNwdWVzdGFzIGVuIGxvcyBmb3JvcyBkZWwgIiArIHBhbGFicmFUYXJnZXQgKyAiICIgKyB0aGlzLmVzdGFOb3RpZmljYWNpb24ubm9tYnJlUGFyZW50OwogICAgICByZXR1cm4gbWVuc2FqZTsKICAgIH0sCiAgICB0YWxsZXJDdWVudG9zVXJsOiBmdW5jdGlvbiB0YWxsZXJDdWVudG9zVXJsKCkgewogICAgICByZXR1cm4gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICJwcm9kdWN0aW9uIiA/ICJodHRwczovL3BlLXBlLXBlLmhlcm9rdWFwcC5jb20vdGFsbGVyQ3VlbnRvcyIgOiAiaHR0cDovL2xvY2FsaG9zdDo4MDgxIjsKICAgIH0KICB9Cn07"},{"version":3,"sources":["NotificacionActividadForos.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"notificacionActividadForos\" @click=\"visitar\">\n    <img\n      src=\"@/assets/iconos/conversacion.png\"\n      alt=\"Conversación\"\n      id=\"iconoConversacion\"\n    />\n    <div id=\"texto\" v-html=\"mensaje\"></div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport { QUERY_YO } from \"../../App.vue\";\n\nexport default {\n  name: \"NotificacionActividadForos\",\n  props: {\n    estaNotificacion: {\n      type: Object,\n      default: function () {\n        return {};\n      },\n    },\n  },\n  methods: {\n    visitar() {\n      var enlace = \"/\";\n      enlace +=\n        this.estaNotificacion.tipoParent + \"/\" + this.estaNotificacion.idParent;\n\n      if (this.estaNotificacion.tipoParent == \"libro\") {\n        console.log(`Es el enlace a un libro`);\n        var enlaceLibro =this.tallerCuentosUrl+'?t='+this.$store.state.token+\"&l=\"+this.estaNotificacion.idParent;\n        console.log(`Abriendo enlace: ${enlaceLibro}`);\n        window.open(enlaceLibro, \"_blank\");\n        this.eliminarse();\n      } else {\n        this.eliminarse();\n        this.$router.push(enlace).catch((error) => {\n          console.log(`Error de navegación: ${error.message.substr(0, 28)}`);\n          if (error.message.substr(0, 28) == \"Avoided redundant navigation\") {\n            console.log(`Error por navegación`);\n          }\n        });\n      }\n    },\n    eliminarse() {\n      let idParent = this.estaNotificacion.idParent;\n      console.log(`Eliminandose: ${idParent}`);\n      this.$apollo.mutate({\n        mutation: gql`\n          mutation($idParent: ID!) {\n            eliminarNotificacionActividadForos(idParent: $idParent)\n          }\n        `,\n        variables: {\n          idParent,\n        },\n        update: (store, { data: { eliminarNotificacionActividadForos } }) => {\n          if (eliminarNotificacionActividadForos) {\n            let cache = store.readQuery({\n              query: QUERY_YO,\n            });\n            let nuevoCache = JSON.parse(JSON.stringify(cache));\n            let indexN = nuevoCache.yo.notificacionesActividadForos.findIndex(\n              (n) => n.idParent == idParent\n            );\n            if (indexN > -1) {\n              nuevoCache.yo.notificacionesActividadForos.splice(indexN, 1);\n            }\n            store.writeQuery({\n              query: QUERY_YO,\n              data: nuevoCache,\n            });\n          }\n        },\n      });\n    },\n  },\n  computed: {\n    mensaje: function () {\n      let tipoTarget = this.estaNotificacion.tipoParent;\n      if (tipoTarget == \"nodoConocimiento\") tipoTarget = \"nodo de conocimiento\";\n      let palabraTarget = \"<span style='color:red'>\" + tipoTarget + \"</span>\";\n      var mensaje =\n        \"Hay nuevas respuestas en los foros del \" +\n        palabraTarget +\n        \" \" +\n        this.estaNotificacion.nombreParent;\n\n      return mensaje;\n    },\n    tallerCuentosUrl() {\n      return process.env.NODE_ENV === \"production\"\n        ? \"https://pe-pe-pe.herokuapp.com/tallerCuentos\"\n        : \"http://localhost:8081\";\n    },\n  },\n};\n</script>\n\n<style scoped>\n.notificacionActividadForos {\n  width: 300px;\n  height: 130px;\n  border: 1px solid rgb(0, 58, 105);\n  background-color: rgb(58, 175, 243);\n  display: grid;\n  grid-template-columns: 100px 1fr;\n  grid-template-rows: 15px 1fr;\n  grid-template-areas:\n    \"info info\"\n    \"imagen texto\";\n  align-items: center;\n  justify-items: center;\n  cursor: pointer;\n}\n.notificacionActividadForos:hover {\n  background-color: rgb(119, 196, 241);\n}\n#info {\n  grid-area: info;\n  font-size: 11px;\n  color: white;\n}\n#iconoConversacion {\n  grid-area: imagen;\n  width: 70px;\n  height: 70px;\n  border-radius: 50%;\n}\n#texto {\n  grid-area: texto;\n}\n.textoTarget {\n  color: white;\n}\n</style>"],"sourceRoot":"src/components/usuario"}]}