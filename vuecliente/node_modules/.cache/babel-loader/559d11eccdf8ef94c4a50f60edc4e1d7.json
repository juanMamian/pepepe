{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/visorNodoConocimiento/archivoSeccionNodo.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/visorNodoConocimiento/archivoSeccionNodo.vue","mtime":1644587546126},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvdmlkYTEvd2VicGovcGVwZXBlL3Z1ZWNsaWVudGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCI7CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QyKCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgIG11dGF0aW9uKCRpZE5vZG86SUQhLCAkaWRTZWNjaW9uOiBJRCEsICRub21icmVBcmNoaXZvOlN0cmluZyEpe1xuICAgICAgICAgICAgbWFyY2FyUHJpbWFyaW9BcmNoaXZvU2VjY2lvbk5vZG8oaWROb2RvOiRpZE5vZG8sIGlkU2VjY2lvbjokaWRTZWNjaW9uLCBub21icmVBcmNoaXZvOiAkbm9tYnJlQXJjaGl2bylcbiAgICAgICAgICB9XG4gICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISwgJGlkU2VjY2lvbjogSUQhLCAkbm9tYnJlQXJjaGl2bzogU3RyaW5nISkge1xuICAgICAgICAgICAgICBlbGltaW5hckFyY2hpdm9TZWNjaW9uTm9kbyhcbiAgICAgICAgICAgICAgICBpZE5vZG86ICRpZE5vZG9cbiAgICAgICAgICAgICAgICBpZFNlY2Npb246ICRpZFNlY2Npb25cbiAgICAgICAgICAgICAgICBub21icmVBcmNoaXZvOiAkbm9tYnJlQXJjaGl2b1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3QgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CmltcG9ydCBMb2FkaW5nIGZyb20gJy4uL3V0aWxpZGFkZXMvTG9hZGluZy52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTG9hZGluZzogTG9hZGluZwogIH0sCiAgbmFtZTogIkFyY2hpdm9TZWNjaW9uTm9kbyIsCiAgcHJvcHM6IHsKICAgIGVzdGVBcmNoaXZvOiBPYmplY3QsCiAgICB1c3VhcmlvRXhwZXJ0bzogQm9vbGVhbiwKICAgIGlkTm9kbzogU3RyaW5nLAogICAgaWRTZWNjaW9uOiBTdHJpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbGltaW5hbmRvc2U6IGZhbHNlLAogICAgICBtYXJjYW5kb1ByaW1hcmlvOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGVsaW1pbmFyc2U6IGZ1bmN0aW9uIGVsaW1pbmFyc2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMudXN1YXJpb0V4cGVydG8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghY29uZmlybSgiQm9ycmFuZG8gYXJjaGl2byDCv0NvbnRpbnVhcj8iKSkgewogICAgICAgIGNvbnNvbGUubG9nKCJDYW5jZWxhZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZWxpbWluYW5kb3NlID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZE5vZG86IHRoaXMuaWROb2RvLAogICAgICAgICAgaWRTZWNjaW9uOiB0aGlzLmlkU2VjY2lvbiwKICAgICAgICAgIG5vbWJyZUFyY2hpdm86IHRoaXMuZXN0ZUFyY2hpdm8ubm9tYnJlCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGVsaW1pbmFyQXJjaGl2b1NlY2Npb25Ob2RvID0gX3JlZi5kYXRhLmVsaW1pbmFyQXJjaGl2b1NlY2Npb25Ob2RvOwogICAgICAgIF90aGlzLmVsaW1pbmFuZG9zZSA9IGZhbHNlOwoKICAgICAgICBpZiAoIWVsaW1pbmFyQXJjaGl2b1NlY2Npb25Ob2RvKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiQXJjaGl2byBubyBlbGltaW5hZG8iKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzLiRlbWl0KCJtZUVsaW1pbmUiKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMuZWxpbWluYW5kb3NlID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yLiBFOiAiLmNvbmNhdChlcnJvcikpOwogICAgICB9KTsKICAgIH0sCiAgICBtYXJjYXJQcmltYXJpbzogZnVuY3Rpb24gbWFyY2FyUHJpbWFyaW8oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5tYXJjYW5kb1ByaW1hcmlvID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QyKCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWROb2RvOiB0aGlzLmlkTm9kbywKICAgICAgICAgIGlkU2VjY2lvbjogdGhpcy5pZFNlY2Npb24sCiAgICAgICAgICBub21icmVBcmNoaXZvOiB0aGlzLmVzdGVBcmNoaXZvLm5vbWJyZQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLm1hcmNhbmRvUHJpbWFyaW8gPSBmYWxzZTsKCiAgICAgICAgX3RoaXMyLiRlbWl0KCdzb3lQcmltYXJpbycpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLm1hcmNhbmRvUHJpbWFyaW8gPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["archivoSeccionNodo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,GAAA,MAAA,aAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,OAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,oBAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,WAAA,EAAA,MADA;AAEA,IAAA,cAAA,EAAA,OAFA;AAGA,IAAA,MAAA,EAAA,MAHA;AAIA,IAAA,SAAA,EAAA;AAJA,GAHA;AASA,EAAA,IATA,kBASA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,KADA;AAEA,MAAA,gBAAA,EAAA;AAFA,KAAA;AAIA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,UAAA,CAAA,KAAA,cAAA,EAAA;AACA;AACA;;AACA,UAAA,CAAA,OAAA,CAAA,8BAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA;AACA;AACA;;AACA,WAAA,YAAA,GAAA,IAAA;AACA,WAAA,OAAA,CACA,MADA,CACA;AACA,QAAA,QAAA,EAAA,GAAA,mBADA;AAUA,QAAA,SAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA,MADA;AAEA,UAAA,SAAA,EAAA,KAAA,SAFA;AAGA,UAAA,aAAA,EAAA,KAAA,WAAA,CAAA;AAHA;AAVA,OADA,EAiBA,IAjBA,CAiBA,gBAAA;AAAA,YAAA,0BAAA,QAAA,IAAA,CAAA,0BAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;;AAEA,YAAA,CAAA,0BAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA;AACA;AACA;;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,WAAA;AACA,OAzBA,EA0BA,KA1BA,CA0BA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,QAAA,OAAA,CAAA,GAAA,qBAAA,KAAA;AACA,OA7BA;AA8BA,KAxCA;AAyCA,IAAA,cAzCA,4BAyCA;AAAA;;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,OAAA,CAAA,MAAA,CAAA;AACA,QAAA,QAAA,EAAA,GAAA,oBADA;AAMA,QAAA,SAAA,EAAA;AACA,UAAA,MAAA,EAAA,KAAA,MADA;AAEA,UAAA,SAAA,EAAA,KAAA,SAFA;AAGA,UAAA,aAAA,EAAA,KAAA,WAAA,CAAA;AAHA;AANA,OAAA,EAWA,IAXA,CAWA,YAAA;AACA,QAAA,MAAA,CAAA,gBAAA,GAAA,KAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,aAAA;AACA,OAdA,EAcA,KAdA,CAcA,YAAA;AACA,QAAA,MAAA,CAAA,gBAAA,GAAA,KAAA;AACA,OAhBA;AAiBA;AA5DA;AAfA,CAAA","sourcesContent":["<template>\n  <div class=\"archivoSeccionNodo\" :class=\"{deshabilitado: eliminandose}\">\n    <div id=\"barraSuperior\">\n      <div id=\"icono\">\n        <img src=\"@/assets/iconos/file.svg\" alt=\"Archivo\" />\n      </div>\n      <div id=\"nombre\">\n        {{ esteArchivo.nombre }}\n      </div>\n\n      <div\n        class=\"contenedorControles\"\n        style=\"margin-left: auto; margin-right: 10px\"\n      >\n        <div class=\"boton\" title=\"Eliminar\" @click=\"eliminarse\">\n          <img src=\"@/assets/iconos/trash.svg\" alt=\"Basura\" />\n        </div>\n        <div class=\"boton\" @click=\"marcarPrimario\" v-show=\"!esteArchivo.primario && !marcandoPrimario\">\n          <img src=\"@/assets/iconos/arrowUp.svg\" alt=\"Subir\" />\n        </div>\n        <loading texto=\"\" v-show=\"marcandoPrimario\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from '../utilidades/Loading.vue';\nexport default {\n  components: { Loading },\n  name: \"ArchivoSeccionNodo\",\n  props: {\n    esteArchivo: Object,\n    usuarioExperto: Boolean,\n    idNodo: String,\n    idSeccion: String,\n  },\n  data() {\n    return {\n      eliminandose: false,\n      marcandoPrimario:false,\n    };\n  },\n  methods: {\n    eliminarse() {\n      if (!this.usuarioExperto) {\n        return;\n      }\n      if (!confirm(\"Borrando archivo Â¿Continuar?\")) {\n        console.log(`Cancelado`);\n        return;\n      }\n      this.eliminandose = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!, $idSeccion: ID!, $nombreArchivo: String!) {\n              eliminarArchivoSeccionNodo(\n                idNodo: $idNodo\n                idSeccion: $idSeccion\n                nombreArchivo: $nombreArchivo\n              )\n            }\n          `,\n          variables: {\n            idNodo: this.idNodo,\n            idSeccion: this.idSeccion,\n            nombreArchivo: this.esteArchivo.nombre,\n          },\n        })\n        .then(({ data: { eliminarArchivoSeccionNodo } }) => {\n          this.eliminandose = false;\n\n          if (!eliminarArchivoSeccionNodo) {\n            console.log(`Archivo no eliminado`);\n            return;\n          }\n          this.$emit(\"meElimine\");\n        })\n        .catch((error) => {\n          this.eliminandose = false;\n          console.log(`Error. E: ${error}`);\n        });\n    },\n    marcarPrimario(){\n      this.marcandoPrimario=true;\n      this.$apollo.mutate({\n        mutation:gql`\n          mutation($idNodo:ID!, $idSeccion: ID!, $nombreArchivo:String!){\n            marcarPrimarioArchivoSeccionNodo(idNodo:$idNodo, idSeccion:$idSeccion, nombreArchivo: $nombreArchivo)\n          }\n        `,\n        variables:{\n          idNodo: this.idNodo,\n          idSeccion:this.idSeccion,\n          nombreArchivo:this.esteArchivo.nombre\n        }\n      }).then(()=>{\n        this.marcandoPrimario=false;\n        this.$emit('soyPrimario');\n      }).catch(()=>{\n        this.marcandoPrimario=false;\n      })\n    }\n  },\n};\n</script>\n\n<style scoped>\n.archivoSeccionNodo {\n}\n#barraSuperior {\n  padding: 10px 0px;\n  display: flex;\n  align-items: center;\n}\n#icono {\n  margin-left: 30px;\n  width: 15px;\n  height: 15px;\n}\n#icono img {\n  height: 100%;\n  opacity: 0.7;\n}\n</style>"],"sourceRoot":"src/components/visorNodoConocimiento"}]}