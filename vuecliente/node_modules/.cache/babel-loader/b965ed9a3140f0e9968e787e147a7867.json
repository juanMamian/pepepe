{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/eslint-loader/index.js??ref--13-0!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasSolidaridad/ConfiguracionNodoSolidaridad.js","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasSolidaridad/ConfiguracionNodoSolidaridad.js","mtime":1644587546122},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvdmlkYTEvd2VicGovcGVwZXBlL3Z1ZWNsaWVudGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCI7CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxNSgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkaW5mb05vZG86IE5vZG9Tb2xpZGFyaWRhZElucHV0ISwgJGlkTm9kb1BhcmVudDogSUQhLCAkdGlwb1BhcmVudDpTdHJpbmchKSB7XG4gICAgICAgICAgICAgIGNyZWFyTnVldm9Ob2RvU29saWRhcmlkYWRVbmRlck5vZG8oXG4gICAgICAgICAgICAgICAgaW5mb05vZG86ICRpbmZvTm9kb1xuICAgICAgICAgICAgICAgIGlkTm9kb1BhcmVudDogJGlkTm9kb1BhcmVudFxuICAgICAgICAgICAgICAgIHRpcG9QYXJlbnQ6JHRpcG9QYXJlbnRcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgbnVldm9Ob2Rve1xuICAgICAgICAgICAgICAgICAgLi4uZnJhZ05vZG9Tb2xpZGFyaWRhZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub2Rvc01vZGlmaWNhZG9ze1xuICAgICAgICAgICAgICAgICAgLi4uZnJhZ05vZG9Tb2xpZGFyaWRhZCAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXN1YXJpb3NNb2RpZmljYWRvc3tcbiAgICAgICAgICAgICAgICAgIC4uLmZyYWdQZXJzb25hQXRsYXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICIsICJcbiAgICAgICAgICAgICIsICJcbiAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDE1ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTUoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTQoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICBtdXRhdGlvbiAoJGlkTm9kb1JlcXVpcmllbnRlOiBJRCEsICR0aXBvUmVxdWlyaWVudGU6U3RyaW5nISwgJGlkTm9kb1JlcXVlcmlkbzogSUQhKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZVJlcXVlcmltZW50b05vZG9zQXRsYXNTb2xpZGFyaWRhZChcbiAgICAgICAgICAgICAgICBpZE5vZG9SZXF1aXJpZW50ZTogJGlkTm9kb1JlcXVpcmllbnRlXG4gICAgICAgICAgICAgICAgdGlwb1JlcXVpcmllbnRlOiAkdGlwb1JlcXVpcmllbnRlXG4gICAgICAgICAgICAgICAgaWROb2RvUmVxdWVyaWRvOiAkaWROb2RvUmVxdWVyaWRvXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgbm9kb3NNb2RpZmljYWRvc3tcbiAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgdmluY3Vsb3Mge1xuICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgaWRSZWZcbiAgICAgICAgICAgICAgICAgICAgICB0aXBvICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFkbWluaXN0cmFkb3Jlc1xuICAgICAgICAgICAgICAgICAgICBub2RvUGFyZW50XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB1c3Vhcmlvc01vZGlmaWNhZG9ze1xuICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICB2aW5jdWxvcyB7XG4gICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICBpZFJlZlxuICAgICAgICAgICAgICAgICAgICAgIHRpcG8gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTQgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxNCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMygpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvUmVxdWlyaWVudGU6IElEISwgJHRpcG9SZXF1aXJpZW50ZTpTdHJpbmchLCAkaWROb2RvUmVxdWVyaWRvOiBJRCEpIHtcbiAgICAgICAgICAgICAgY3JlYXJQYXJlbnRpbmdFbnRyZU5vZG9zQXRsYXNTb2xpZGFyaWRhZChcbiAgICAgICAgICAgICAgICBpZE5vZG9SZXF1aXJpZW50ZTogJGlkTm9kb1JlcXVpcmllbnRlXG4gICAgICAgICAgICAgICAgdGlwb1JlcXVpcmllbnRlOiAkdGlwb1JlcXVpcmllbnRlXG4gICAgICAgICAgICAgICAgaWROb2RvUmVxdWVyaWRvOiAkaWROb2RvUmVxdWVyaWRvXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIG5vZG9zTW9kaWZpY2Fkb3N7XG4gICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgdmluY3Vsb3Mge1xuICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICBpZFJlZlxuICAgICAgICAgICAgICAgICAgICB0aXBvICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYWRtaW5pc3RyYWRvcmVzXG4gICAgICAgICAgICAgICAgICBub2RvUGFyZW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVzdWFyaW9zTW9kaWZpY2Fkb3N7XG4gICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgdmluY3Vsb3Mge1xuICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICBpZFJlZlxuICAgICAgICAgICAgICAgICAgICB0aXBvICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTMgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMygpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMigpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvUmVxdWlyaWVudGU6IElEISwgJHRpcG9SZXF1aXJpZW50ZTogU3RyaW5nISwgJGlkTm9kb1JlcXVlcmlkbzogSUQhKSB7XG4gICAgICAgICAgICAgIGNyZWFyUmVxdWVyaW1lbnRvRW50cmVOb2Rvc0F0bGFzU29saWRhcmlkYWQoXG4gICAgICAgICAgICAgICAgaWROb2RvUmVxdWlyaWVudGU6ICRpZE5vZG9SZXF1aXJpZW50ZVxuICAgICAgICAgICAgICAgIHRpcG9SZXF1aXJpZW50ZTokdGlwb1JlcXVpcmllbnRlXG4gICAgICAgICAgICAgICAgaWROb2RvUmVxdWVyaWRvOiAkaWROb2RvUmVxdWVyaWRvXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIG5vZG9zTW9kaWZpY2Fkb3N7XG4gICAgICAgICAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgdmluY3Vsb3Mge1xuICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICBpZFJlZlxuICAgICAgICAgICAgICAgICAgICB0aXBvICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYWRtaW5pc3RyYWRvcmVzXG4gICAgICAgICAgICAgICAgICBub2RvUGFyZW50XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVzdWFyaW9zTW9kaWZpY2Fkb3N7XG4gICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgdmluY3Vsb3Mge1xuICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICBpZFJlZlxuICAgICAgICAgICAgICAgICAgICB0aXBvICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTIgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMigpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMSgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBJRCEsICRpZFVzdWFyaW86IElEISkge1xuICAgICAgICAgICAgICAgICAgICBhZGRSZXNwb25zYWJsZU5vZG9Tb2xpZGFyaWRhZChcbiAgICAgICAgICAgICAgICAgICAgICBpZE5vZG86ICRpZE5vZG9cbiAgICAgICAgICAgICAgICAgICAgICBpZFVzdWFyaW86ICRpZFVzdWFyaW9cbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zYWJsZXNcbiAgICAgICAgICAgICAgICAgICAgICBwb3NpYmxlc1Jlc3BvbnNhYmxlc1xuICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNhYmxlc1NvbGljaXRhZG9zXG4gICAgICAgICAgICAgICAgICAgICAgYWRtaW5pc3RyYWRvcmVzXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDExID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTEoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTAoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkTm9kbzogSUQhLCAkaWRVc3VhcmlvOiBJRCEpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkUmVzcG9uc2FibGVOb2RvU29saWRhcmlkYWQoXG4gICAgICAgICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvXG4gICAgICAgICAgICAgICAgICAgICAgaWRVc3VhcmlvOiAkaWRVc3VhcmlvXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2FibGVzXG4gICAgICAgICAgICAgICAgICAgICAgcG9zaWJsZXNSZXNwb25zYWJsZXNcbiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zYWJsZXNTb2xpY2l0YWRvc1xuICAgICAgICAgICAgICAgICAgICAgIGFkbWluaXN0cmFkb3Jlc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3QxMCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDEwKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDkoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkTm9kbzogSUQhLCAkaWRVc3VhcmlvOiBJRCEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUmVzcG9uc2FibGVOb2RvU29saWRhcmlkYWQoXG4gICAgICAgICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvXG4gICAgICAgICAgICAgICAgICAgICAgaWRVc3VhcmlvOiAkaWRVc3VhcmlvXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2FibGVzXG4gICAgICAgICAgICAgICAgICAgICAgcG9zaWJsZXNSZXNwb25zYWJsZXNcbiAgICAgICAgICAgICAgICAgICAgICBhZG1pbmlzdHJhZG9yZXNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0OSA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDkoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0OCgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBJRCEsICRpZFVzdWFyaW86IElEISkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVSZXNwb25zYWJsZU5vZG9Tb2xpZGFyaWRhZChcbiAgICAgICAgICAgICAgICAgICAgICBpZE5vZG86ICRpZE5vZG9cbiAgICAgICAgICAgICAgICAgICAgICBpZFVzdWFyaW86ICRpZFVzdWFyaW9cbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zYWJsZXNcbiAgICAgICAgICAgICAgICAgICAgICBwb3NpYmxlc1Jlc3BvbnNhYmxlc1xuICAgICAgICAgICAgICAgICAgICAgIGFkbWluaXN0cmFkb3Jlc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q4ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0OCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q3KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISkge1xuICAgICAgICAgICAgICAgICAgICB1c3VhcmlvRW50cmFyUmVzcG9uc2FibGVOb2RvU29saWRhcmlkYWQoaWROb2RvOiAkaWROb2RvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICByZXNwb25zYWJsZXNcbiAgICAgICAgICAgICAgICAgICAgICBwb3NpYmxlc1Jlc3BvbnNhYmxlc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q3ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NygpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q2KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISwgJG51ZXZvRXN0YWRvOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEVzdGFkb05vZG9Tb2xpZGFyaWRhZChcbiAgICAgICAgICAgICAgICAgICAgICBpZE5vZG86ICRpZE5vZG9cbiAgICAgICAgICAgICAgICAgICAgICBudWV2b0VzdGFkbzogJG51ZXZvRXN0YWRvXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgZXN0YWRvRGVzYXJyb2xsb1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q2ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NigpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q1KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISwgJG51ZXZvS2V5d29yZHM6IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdGFyS2V5d29yZHNOb2RvU29saWRhcmlkYWQoXG4gICAgICAgICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvXG4gICAgICAgICAgICAgICAgICAgICAgbnVldm9LZXl3b3JkczogJG51ZXZvS2V5d29yZHNcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICBrZXl3b3Jkc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q1ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NSgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISwgJG51ZXZvRGVzY3JpcGNpb246IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdGFyRGVzY3JpcGNpb25Ob2RvU29saWRhcmlkYWQoXG4gICAgICAgICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvXG4gICAgICAgICAgICAgICAgICAgICAgbnVldm9EZXNjcmlwY2lvbjogJG51ZXZvRGVzY3JpcGNpb25cbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwY2lvblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QzKCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISwgJG51ZXZvTm9tYnJlOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRhck5vbWJyZU5vZG9Tb2xpZGFyaWRhZChcbiAgICAgICAgICAgICAgICAgICAgICBpZE5vZG86ICRpZE5vZG9cbiAgICAgICAgICAgICAgICAgICAgICBudWV2b05vbWJyZTogJG51ZXZvTm9tYnJlXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgbm9tYnJlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDMgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QzKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJGlkTm9kbzogSUQhKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsaW1pbmFyTm9kb1NvbGlkYXJpZGFkKGlkTm9kbzogJGlkTm9kbylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDIgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QyKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgcXVlcnkge1xuICAgIHlvIHtcbiAgICAgIGlkXG4gICAgICBub21icmVcbiAgICAgIGNvb3Jkc3tcbiAgICAgICAgeFxuICAgICAgICB5XG4gICAgICB9XG4gICAgICB2aW5jdWxvc3tcbiAgICAgIGlkXG4gICAgICAgIHRpcG9cbiAgICAgICAgaWRSZWZcbiAgICAgIH1cbiAgICAgIGZ1ZXJ6YUNlbnRyb01hc2F7XG4gICAgICBmdWVyemFcbiAgICAgIGRpcmVjY2lvblxuICAgIH1cbiAgICBmdWVyemFDb2xpc2lvbntcbiAgICAgIGZ1ZXJ6YVxuICAgICAgZGlyZWNjaW9uICBcbiAgICB9XG4gICAgICBhdGxhc1NvbGlkYXJpZGFkIHtcbiAgICAgICAgaWRcbiAgICAgICAgY29vcmRzVmlzdGEge1xuICAgICAgICAgIHhcbiAgICAgICAgICB5XG4gICAgICAgIH1cbiAgICAgICAgaWRzTm9kb3NEZXNwbGVnYWRvc1xuICAgICAgfVxuICAgIH1cbiAgfVxuIl0pOwoKICBfdGVtcGxhdGVPYmplY3QgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CmltcG9ydCB7IGNoYXJQcm9oaWJpZG9zTm9tYnJlQ29zYSwgY2hhclByb2hpYmlkb3NUZXh0byB9IGZyb20gIi4vY29uZmlndXJhY2lvbiI7CmltcG9ydCB7IGZyYWdtZW50b05vZG9Tb2xpZGFyaWRhZCwgZnJhZ21lbnRvUGVyc29uYUF0bGFzIH0gZnJvbSAiLi9mcmFncyI7CmV4cG9ydCB2YXIgY2hhclByb2hpYmlkb3NOb21icmVOb2RvID0gY2hhclByb2hpYmlkb3NOb21icmVDb3NhOwpleHBvcnQgdmFyIGNoYXJQcm9oaWJpZG9zRGVzY3JpcGNpb25Ob2RvID0gY2hhclByb2hpYmlkb3NUZXh0bzsKZXhwb3J0IHZhciBjaGFyUHJvaGliaWRvc0tleXdvcmRzID0gL1teIGEtekEtWsOxMC05XS87CmV4cG9ydCB2YXIgUVVFUllfREFUT1NfVVNVQVJJT19BVExBU19TT0xJREFSSURBRCA9IGdxbChfdGVtcGxhdGVPYmplY3QoKSk7CmV4cG9ydCB2YXIgTWl4aW5HZW5lcmFsTm9kb1NvbGlkYXJpZGFkID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbnZpYW5kb1F1ZXJ5R2VuZXJhbDogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBlbGltaW5hcnNlOiBmdW5jdGlvbiBlbGltaW5hcnNlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb0FkbWluaXN0cmFkb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiTm8gYXV0b3JpemFkbyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFjb25maXJtKCLCv0NvbmZpcm1hciBlbGltaW5hY2nDs24gZGUgbm9kbz8gKEVzdGEgYWNjacOzbiBubyBwdWVkZSBkZXNoYWNlcnNlIikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZW52aWFuZG9RdWVyeUdlbmVyYWwgPSB0cnVlOwogICAgICB2YXIgZGlzID0gdGhpczsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QyKCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWROb2RvOiB0aGlzLmVzdGVOb2RvLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBkaXMuZW52aWFuZG9RdWVyeUdlbmVyYWwgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMuJGVtaXQoIm1lRWxpbWluZSIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgICAgZGlzLmVudmlhbmRvUXVlcnlHZW5lcmFsID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTsKZXhwb3J0IHZhciBNaXhpbkVkaWNpb25Ob2RvU29saWRhcmlkYWQgPSB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlkUmVzcG9uc2FibGVTZWxlY2Npb25hZG86IG51bGwsCiAgICAgIGVudmlhbmRvUXVlcnlSZXNwb25zYWJsZXM6IGZhbHNlLAogICAgICBudWV2b05vbWJyZTogIk51ZXZvIG5vbWJyZSIsCiAgICAgIGVkaXRhbmRvTm9tYnJlOiBmYWxzZSwKICAgICAgZW52aWFuZG9OdWV2b05vbWJyZTogZmFsc2UsCiAgICAgIG51ZXZvRGVzY3JpcGNpb246ICJOdWV2YSBkZXNjcmlwY2lvbiIsCiAgICAgIGVkaXRhbmRvRGVzY3JpcGNpb246IGZhbHNlLAogICAgICBlbnZpYW5kb051ZXZvRGVzY3JpcGNpb246IGZhbHNlLAogICAgICBudWV2b0tleXdvcmRzOiBudWxsLAogICAgICBlZGl0YW5kb0tleXdvcmRzOiBmYWxzZSwKICAgICAgZW52aWFuZG9OdWV2b0tleXdvcmRzOiBmYWxzZSwKICAgICAgdG9nZ2xpbmdFc3RhZG86IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgZ3VhcmRhck51ZXZvTm9tYnJlOiBmdW5jdGlvbiBndWFyZGFyTnVldm9Ob21icmUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5udWV2b05vbWJyZSA9IHRoaXMuJHJlZnMuaW5wdXROdWV2b05vbWJyZS52YWx1ZTsKCiAgICAgIGlmICh0aGlzLm51ZXZvTm9tYnJlSWxlZ2FsKSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGVudmlhZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm51ZXZvTm9tYnJlID09IHRoaXMuZXN0ZU5vZG8ubm9tYnJlKSB7CiAgICAgICAgdGhpcy5lZGl0YW5kb05vbWJyZSA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coImd1YXJkYW5kbyBudWV2byBub21icmUiKTsKICAgICAgdGhpcy5lbnZpYW5kb051ZXZvTm9tYnJlID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QzKCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWROb2RvOiB0aGlzLmVzdGVOb2RvLmlkLAogICAgICAgICAgbnVldm9Ob21icmU6IHRoaXMubnVldm9Ob21icmUKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi5lbnZpYW5kb051ZXZvTm9tYnJlID0gZmFsc2U7CiAgICAgICAgX3RoaXMyLmVkaXRhbmRvTm9tYnJlID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi5lbnZpYW5kb051ZXZvTm9tYnJlID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yLiBFIDoiLmNvbmNhdChlcnJvcikpOwogICAgICB9KTsKICAgIH0sCiAgICBndWFyZGFyTnVldm9EZXNjcmlwY2lvbjogZnVuY3Rpb24gZ3VhcmRhck51ZXZvRGVzY3JpcGNpb24oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubnVldm9EZXNjcmlwY2lvbklsZWdhbCkgewogICAgICAgIGNvbnNvbGUubG9nKCJObyBlbnZpYWRvIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5udWV2b0Rlc2NyaXBjaW9uID09IHRoaXMuZXN0ZU5vZG8uZGVzY3JpcGNpb24pIHsKICAgICAgICB0aGlzLmVkaXRhbmRvRGVzY3JpcGNpb24gPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJndWFyZGFuZG8gbnVldm8gZGVzY3JpcGNpb24iKTsKICAgICAgdGhpcy5lbnZpYW5kb051ZXZvRGVzY3JpcGNpb24gPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDQoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZE5vZG86IHRoaXMuZXN0ZU5vZG8uaWQsCiAgICAgICAgICBudWV2b0Rlc2NyaXBjaW9uOiB0aGlzLm51ZXZvRGVzY3JpcGNpb24KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5lbnZpYW5kb051ZXZvRGVzY3JpcGNpb24gPSBmYWxzZTsKICAgICAgICBfdGhpczMuZWRpdGFuZG9EZXNjcmlwY2lvbiA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczMuZW52aWFuZG9OdWV2b0Rlc2NyaXBjaW9uID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yLiBFIDoiLmNvbmNhdChlcnJvcikpOwogICAgICB9KTsKICAgIH0sCiAgICBndWFyZGFyTnVldm9LZXl3b3JkczogZnVuY3Rpb24gZ3VhcmRhck51ZXZvS2V5d29yZHMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubnVldm9LZXl3b3Jkc0lsZWdhbCkgewogICAgICAgIGNvbnNvbGUubG9nKCJLZXl3b3JkcyBpbGVnYWwiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm51ZXZvS2V5d29yZHMgPT0gdGhpcy5lc3RlTm9kby5rZXl3b3JkcykgewogICAgICAgIHRoaXMuZWRpdGFuZG9LZXl3b3JkcyA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coImd1YXJkYW5kbyBudWV2byBrZXl3b3JkcyIpOwogICAgICB0aGlzLmVudmlhbmRvTnVldm9LZXl3b3JkcyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0NSgpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkTm9kbzogdGhpcy5lc3RlTm9kby5pZCwKICAgICAgICAgIG51ZXZvS2V5d29yZHM6IHRoaXMubnVldm9LZXl3b3JkcwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM0LmVudmlhbmRvTnVldm9LZXl3b3JkcyA9IGZhbHNlOwogICAgICAgIF90aGlzNC5lZGl0YW5kb0tleXdvcmRzID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGdyYXBoUUxFcnJvcnMgPSBfcmVmLmdyYXBoUUxFcnJvcnM7CiAgICAgICAgX3RoaXM0LmVudmlhbmRvTnVldm9LZXl3b3JkcyA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvci4gRSA6Ii5jb25jYXQoZ3JhcGhRTEVycm9ycykpOwogICAgICB9KTsKICAgIH0sCiAgICB0b2dnbGVFZGl0YW5kb0Rlc2NyaXBjaW9uOiBmdW5jdGlvbiB0b2dnbGVFZGl0YW5kb0Rlc2NyaXBjaW9uKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIGlmICghdGhpcy51c3VhcmlvQWRtaW5pc3RyYWRvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kcmVmcy5pbnB1dE51ZXZvRGVzY3JpcGNpb24uc3R5bGUuaGVpZ2h0ID0gdGhpcy4kcmVmcy5kZXNjcmlwY2lvbi5vZmZzZXRIZWlnaHQgKyAicHgiOwogICAgICB0aGlzLmVkaXRhbmRvRGVzY3JpcGNpb24gPSAhdGhpcy5lZGl0YW5kb0Rlc2NyaXBjaW9uOwogICAgICB0aGlzLm51ZXZvRGVzY3JpcGNpb24gPSB0aGlzLmVzdGVOb2RvLmRlc2NyaXBjaW9uOwoKICAgICAgaWYgKHRoaXMuZWRpdGFuZG9EZXNjcmlwY2lvbikgewogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNS4kcmVmcy5pbnB1dE51ZXZvRGVzY3JpcGNpb24uZm9jdXMoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHRvZ2dsZUVkaXRhbmRvS2V5d29yZHM6IGZ1bmN0aW9uIHRvZ2dsZUVkaXRhbmRvS2V5d29yZHMoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9BZG1pbmlzdHJhZG9yKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRyZWZzLmlucHV0TnVldm9LZXl3b3Jkcy5zdHlsZS5oZWlnaHQgPSB0aGlzLiRyZWZzLmtleXdvcmRzLm9mZnNldEhlaWdodCArICJweCI7CiAgICAgIHRoaXMuZWRpdGFuZG9LZXl3b3JkcyA9ICF0aGlzLmVkaXRhbmRvS2V5d29yZHM7CiAgICAgIHRoaXMubnVldm9LZXl3b3JkcyA9IHRoaXMuZXN0ZU5vZG8ua2V5d29yZHM7CgogICAgICBpZiAodGhpcy5lZGl0YW5kb0tleXdvcmRzKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM2LiRyZWZzLmlucHV0TnVldm9LZXl3b3Jkcy5mb2N1cygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlRXN0YWRvTm9kbzogZnVuY3Rpb24gdG9nZ2xlRXN0YWRvTm9kbygpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMudXN1YXJpb0FkbWluaXN0cmFkb3IpIHJldHVybjsKICAgICAgdmFyIG51ZXZvRXN0YWRvID0gIm5vQ29tcGxldGFkbyI7CgogICAgICBpZiAodGhpcy5lc3RlTm9kby5lc3RhZG9EZXNhcnJvbGxvID09PSAibm9Db21wbGV0YWRvIikgewogICAgICAgIG51ZXZvRXN0YWRvID0gImNvbXBsZXRhZG8iOwogICAgICB9CgogICAgICB0aGlzLnRvZ2dsaW5nRXN0YWRvID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3Q2KCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWROb2RvOiB0aGlzLmVzdGVOb2RvLmlkLAogICAgICAgICAgbnVldm9Fc3RhZG86IG51ZXZvRXN0YWRvCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczcudG9nZ2xpbmdFc3RhZG8gPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZygidG9nZ2xlZCIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczcudG9nZ2xpbmdFc3RhZG8gPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6IEU6Ii5jb25jYXQoZXJyb3IpKTsKICAgICAgfSk7CiAgICB9LAogICAgZW50cmFyUmVzcG9uc2FibGVzOiBmdW5jdGlvbiBlbnRyYXJSZXNwb25zYWJsZXMoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coIkVudmlhbmRvIHBldGljaW9uIGRlIGVudHJhciBhIGxhIGxpc3RhIGRlIHJlc3BvbnNhYmxlcyBkZWwgbm9kbyBjb24gaWQgIi5jb25jYXQodGhpcy5lc3RlTm9kby5pZCkpOwogICAgICB0aGlzLmVudmlhbmRvUXVlcnlSZXNwb25zYWJsZXMgPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDcoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZE5vZG86IHRoaXMuZXN0ZU5vZG8uaWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzOC5lbnZpYW5kb1F1ZXJ5UmVzcG9uc2FibGVzID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzOC5lbnZpYW5kb1F1ZXJ5UmVzcG9uc2FibGVzID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coImVycm9yOiAiICsgZXJyb3IpOwogICAgICB9KTsKICAgIH0sCiAgICBhYmFuZG9uYXJMaXN0YVJlc3BvbnNhYmxlczogZnVuY3Rpb24gYWJhbmRvbmFyTGlzdGFSZXNwb25zYWJsZXMoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coIkFiYW5kb25hbmRvIGxhIHJlc3BvbnNhYmlsaWRhZCBlbiBlc3RlIG5vZG8iKTsKICAgICAgdGhpcy5lbnZpYW5kb1F1ZXJ5UmVzcG9uc2FibGVzID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3Q4KCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWROb2RvOiB0aGlzLmVzdGVOb2RvLmlkLAogICAgICAgICAgaWRVc3VhcmlvOiB0aGlzLnVzdWFyaW8uaWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzOS5lbnZpYW5kb1F1ZXJ5UmVzcG9uc2FibGVzID0gZmFsc2U7CiAgICAgICAgX3RoaXM5LmlkUmVzcG9uc2FibGVTZWxlY2Npb25hZG8gPSBudWxsOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczkuZW52aWFuZG9RdWVyeVJlc3BvbnNhYmxlcyA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvcjogIiArIGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgcmV0aXJhclVzdWFyaW9Gcm9tTGlzdGFSZXNwb25zYWJsZXM6IGZ1bmN0aW9uIHJldGlyYXJVc3VhcmlvRnJvbUxpc3RhUmVzcG9uc2FibGVzKGlkVXN1YXJpbykgewogICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvUGFyZW50KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZygiUmV0aXJhbmRvIHVzdWFyaW8gZGUgZXN0ZSBub2RvIik7CiAgICAgIHRoaXMuZW52aWFuZG9RdWVyeVJlc3BvbnNhYmxlcyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0OSgpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkTm9kbzogdGhpcy5lc3RlTm9kby5pZCwKICAgICAgICAgIGlkVXN1YXJpbzogaWRVc3VhcmlvCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczEwLmVudmlhbmRvUXVlcnlSZXNwb25zYWJsZXMgPSBmYWxzZTsKICAgICAgICBfdGhpczEwLmlkUmVzcG9uc2FibGVTZWxlY2Npb25hZG8gPSBudWxsOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczEwLmVudmlhbmRvUXVlcnlSZXNwb25zYWJsZXMgPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZygiZXJyb3I6ICIgKyBlcnJvcik7CiAgICAgIH0pOwogICAgfSwKICAgIGFjZXB0YXJSZXNwb25zYWJsZTogZnVuY3Rpb24gYWNlcHRhclJlc3BvbnNhYmxlKGlkUG9zaWJsZVJlc3BvbnNhYmxlKSB7CiAgICAgIHZhciBfdGhpczExID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCJhY2VwdGFuZG8gY29tbyByZXNwb25zYWJsZSBhbCB1c3VhcmlvICIuY29uY2F0KGlkUG9zaWJsZVJlc3BvbnNhYmxlKSk7CiAgICAgIHRoaXMuZW52aWFuZG9RdWVyeVJlc3BvbnNhYmxlcyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0MTAoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZE5vZG86IHRoaXMuZXN0ZU5vZG8uaWQsCiAgICAgICAgICBpZFVzdWFyaW86IGlkUG9zaWJsZVJlc3BvbnNhYmxlCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczExLmVudmlhbmRvUXVlcnlSZXNwb25zYWJsZXMgPSBmYWxzZTsKICAgICAgICBfdGhpczExLnJlc3BvbnNhYmxlU2VsZWNjaW9uYWRvRXN0YUFjZXB0YWRvID0gdHJ1ZTsKICAgICAgICBfdGhpczExLnZlcnNpb25DYWxlbmRhcmlvKys7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMTEuZW52aWFuZG9RdWVyeVJlc3BvbnNhYmxlcyA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvcjogIiArIGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlRWRpdGFuZG9Ob21icmU6IGZ1bmN0aW9uIHRvZ2dsZUVkaXRhbmRvTm9tYnJlKGUpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnNlbGVjY2lvbmFkbyAmJiAhdGhpcy5ub1NlbGVjY2lvbmFibGUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnVzdWFyaW9BZG1pbmlzdHJhZG9yKSB7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB0aGlzLmVkaXRhbmRvTm9tYnJlID0gdHJ1ZTsKICAgICAgICB0aGlzLm51ZXZvTm9tYnJlID0gdGhpcy5lc3RlTm9kby5ub21icmU7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMxMi4kcmVmcy5pbnB1dE51ZXZvTm9tYnJlLmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBrZXlkb3duSW5wdXROdWV2b05vbWJyZTogZnVuY3Rpb24ga2V5ZG93bklucHV0TnVldm9Ob21icmUoZSkgewogICAgICBpZiAoZS5rZXkgPT09ICJFc2NhcGUiKSB7CiAgICAgICAgdGhpcy4kcmVmcy5pbnB1dE51ZXZvTm9tYnJlLmJsdXIoKTsKICAgICAgfQogICAgfSwKICAgIGFkZFJlc3BvbnNhYmxlTWFudWFsbHk6IGZ1bmN0aW9uIGFkZFJlc3BvbnNhYmxlTWFudWFsbHkoaWRVc3VhcmlvKSB7CiAgICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy51c3VhcmlvTG9nZWFkbyB8fCAhdGhpcy51c3VhcmlvLnBlcm1pc29zLmluY2x1ZGVzKCJtYWVzdHJhVmlkYS1wcm9mZXNvciIpICYmICF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJBZGRpbmcgIi5jb25jYXQoaWRVc3VhcmlvLCAiIGEgbGEgbGlzdGEgZGUgcmVzcG9uc2FibGVzIikpOwogICAgICB2YXIgaWRQb3NpYmxlUmVzcG9uc2FibGUgPSBpZFVzdWFyaW87CiAgICAgIHRoaXMuZW52aWFuZG9RdWVyeVJlc3BvbnNhYmxlcyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0MTEoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZE5vZG86IHRoaXMuZXN0ZU5vZG8uaWQsCiAgICAgICAgICBpZFVzdWFyaW86IGlkUG9zaWJsZVJlc3BvbnNhYmxlCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczEzLmVudmlhbmRvUXVlcnlSZXNwb25zYWJsZXMgPSBmYWxzZTsKICAgICAgICBfdGhpczEzLnZlcnNpb25DYWxlbmRhcmlvKys7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMTMuZW52aWFuZG9RdWVyeVJlc3BvbnNhYmxlcyA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvcjogIiArIGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbnVldm9Ob21icmVJbGVnYWw6IGZ1bmN0aW9uIG51ZXZvTm9tYnJlSWxlZ2FsKCkgewogICAgICBpZiAodGhpcy5udWV2b05vbWJyZS5sZW5ndGggPCAxKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChjaGFyUHJvaGliaWRvc05vbWJyZU5vZG8udGVzdCh0aGlzLm51ZXZvTm9tYnJlKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgbnVldm9EZXNjcmlwY2lvbklsZWdhbDogZnVuY3Rpb24gbnVldm9EZXNjcmlwY2lvbklsZWdhbCgpIHsKICAgICAgaWYgKCF0aGlzLm51ZXZvRGVzY3JpcGNpb24gfHwgdGhpcy5udWV2b0Rlc2NyaXBjaW9uLmxlbmd0aCA8IDEpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKGNoYXJQcm9oaWJpZG9zRGVzY3JpcGNpb25Ob2RvLnRlc3QodGhpcy5udWV2b0Rlc2NyaXBjaW9uKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgbnVldm9LZXl3b3Jkc0lsZWdhbDogZnVuY3Rpb24gbnVldm9LZXl3b3Jkc0lsZWdhbCgpIHsKICAgICAgaWYgKCF0aGlzLm51ZXZvS2V5d29yZHMgfHwgdGhpcy5udWV2b0tleXdvcmRzLmxlbmd0aCA8IDEpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKGNoYXJQcm9oaWJpZG9zS2V5d29yZHMudGVzdCh0aGlzLm51ZXZvS2V5d29yZHMpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBtb3N0cmFuZG86IGZ1bmN0aW9uIG1vc3RyYW5kbyhfbW9zdHJhbmRvKSB7CiAgICAgIGlmIChfbW9zdHJhbmRvICE9ICJkZXNjcmlwY2lvbiIpIHRoaXMuZWRpdGFuZG9EZXNjcmlwY2lvbiA9IGZhbHNlOwogICAgICBpZiAoX21vc3RyYW5kbyAhPSAia2V5d29yZHMiKSB0aGlzLmVkaXRhbmRvS2V5d29yZHMgPSBmYWxzZTsKCiAgICAgIGlmIChfbW9zdHJhbmRvID09PSAiZGVzY3JpcGNpb24iKSB7CiAgICAgICAgaWYgKCF0aGlzLmVzdGVOb2RvLmRlc2NyaXBjaW9uIHx8IHRoaXMuZXN0ZU5vZG8uZGVzY3JpcGNpb24ubGVuZ3RoIDwgMSB8fCB0aGlzLmVzdGVOb2RvLmRlc2NyaXBjaW9uID09PSAiU2luIGRlc2NyaXBjacOzbiIgfHwgdGhpcy5lc3RlTm9kby5kZXNjcmlwY2lvbiA9PT0gIlNpbiBkZXNjcmlwY2lvbiIpIHsKICAgICAgICAgIGlmICghdGhpcy5lZGl0YW5kb0Rlc2NyaXBjaW9uKSB7CiAgICAgICAgICAgIHRoaXMudG9nZ2xlRWRpdGFuZG9EZXNjcmlwY2lvbigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChfbW9zdHJhbmRvID09PSAia2V5d29yZHMiKSB7CiAgICAgICAgaWYgKCF0aGlzLmVzdGVOb2RvLmtleXdvcmRzIHx8IHRoaXMuZXN0ZU5vZG8ua2V5d29yZHMubGVuZ3RoIDwgMSkgewogICAgICAgICAgaWYgKCF0aGlzLmVkaXRhbmRvS2V5d29yZHMpIHsKICAgICAgICAgICAgdGhpcy50b2dnbGVFZGl0YW5kb0tleXdvcmRzKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9OwpleHBvcnQgdmFyIE1peGluUGVybWlzb3NVc3VhcmlvTm9kb1NvbGlkYXJpZGFkID0gewogIGNvbXB1dGVkOiB7CiAgICB1c3VhcmlvUmVzcG9uc2FibGU6IGZ1bmN0aW9uIHVzdWFyaW9SZXNwb25zYWJsZSgpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9Mb2dlYWRvIHx8ICF0aGlzLnVzdWFyaW8gfHwgIXRoaXMudXN1YXJpby5pZCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5lc3RlTm9kby5yZXNwb25zYWJsZXMgJiYgdGhpcy5lc3RlTm9kby5yZXNwb25zYWJsZXMuaW5jbHVkZXModGhpcy51c3VhcmlvLmlkKTsKICAgIH0sCiAgICB1c3VhcmlvUmVzcG9uc2FibGVBbXBsaW86IGZ1bmN0aW9uIHVzdWFyaW9SZXNwb25zYWJsZUFtcGxpbygpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9Mb2dlYWRvIHx8ICF0aGlzLnVzdWFyaW8gfHwgIXRoaXMudXN1YXJpby5pZCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5lc3RlTm9kby5yZXNwb25zYWJsZXNBbXBsaW8gJiYgdGhpcy5lc3RlTm9kby5yZXNwb25zYWJsZXNBbXBsaW8uaW5jbHVkZXModGhpcy51c3VhcmlvLmlkKTsKICAgIH0sCiAgICB1c3VhcmlvUG9zaWJsZVJlc3BvbnNhYmxlOiBmdW5jdGlvbiB1c3VhcmlvUG9zaWJsZVJlc3BvbnNhYmxlKCkgewogICAgICBpZiAoIXRoaXMuZXN0ZU5vZG8ucG9zaWJsZXNSZXNwb25zYWJsZXMpIHJldHVybiBmYWxzZTsKCiAgICAgIGlmICh0aGlzLmVzdGVOb2RvLnBvc2libGVzUmVzcG9uc2FibGVzLmluY2x1ZGVzKHRoaXMudXN1YXJpby5pZCkpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHVzdWFyaW9BZG1pbmlzdHJhZG9yOiBmdW5jdGlvbiB1c3VhcmlvQWRtaW5pc3RyYWRvcigpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW8gfHwgIXRoaXMudXN1YXJpby5pZCkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5lc3RlTm9kby5hZG1pbmlzdHJhZG9yZXMuaW5jbHVkZXModGhpcy51c3VhcmlvLmlkKTsKICAgIH0sCiAgICB1c3VhcmlvUGFyZW50OiBmdW5jdGlvbiB1c3VhcmlvUGFyZW50KCkgewogICAgICBpZiAoIXRoaXMudXN1YXJpb0xvZ2VhZG8pIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRoaXMuZXN0ZU5vZG8udGlwb1BhcmVudCA9PT0gJ3VzdWFyaW8nICYmIHRoaXMuZXN0ZU5vZG8ubm9kb1BhcmVudCA9PT0gdGhpcy51c3VhcmlvLmlkOwogICAgfQogIH0KfTsKZXhwb3J0IHZhciBNaXhpbkVkaWNpb25WaW5jdWxvc05vZG9Tb2xpZGFyaWRhZCA9IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3JlYW5kb1N1Yk5vZG86IGZhbHNlLAogICAgICBlbnZpYW5kb0VkaXRWaW5jdWxvczogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjcmVhclJlcXVlcmltZW50bzogZnVuY3Rpb24gY3JlYXJSZXF1ZXJpbWVudG8oaWROb2RvUmVxdWlyaWVudGUsIHRpcG9SZXF1aXJpZW50ZSwgaWROb2RvUmVxdWVyaWRvKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCJTZSBmaWphcmEgcXVlICIuY29uY2F0KGlkTm9kb1JlcXVpcmllbnRlLCAiIHJlcXVpZXJlIGEgIikuY29uY2F0KGlkTm9kb1JlcXVlcmlkbykpOwogICAgICB0aGlzLmVudmlhbmRvRWRpdFZpbmN1bG9zID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QxMigpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkTm9kb1JlcXVpcmllbnRlOiBpZE5vZG9SZXF1aXJpZW50ZSwKICAgICAgICAgIHRpcG9SZXF1aXJpZW50ZTogdGlwb1JlcXVpcmllbnRlLAogICAgICAgICAgaWROb2RvUmVxdWVyaWRvOiBpZE5vZG9SZXF1ZXJpZG8KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTQuZW52aWFuZG9FZGl0VmluY3Vsb3MgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMxNC5lbnZpYW5kb0VkaXRWaW5jdWxvcyA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogIi5jb25jYXQoZXJyb3IpKTsKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXJQYXJlbnRpbmc6IGZ1bmN0aW9uIGNyZWFyUGFyZW50aW5nKGlkTm9kb1JlcXVpcmllbnRlLCB0aXBvUmVxdWlyaWVudGUsIGlkTm9kb1JlcXVlcmlkbykgewogICAgICBpZiAoIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJPcGNpXHhGM24gZXhjbHVzaXZhIGRlIHNceEZBcGVyYWRtaW5pc3RyYWRvciIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coIlNlIGZpamFyYSBxdWUgIi5jb25jYXQoaWROb2RvUmVxdWlyaWVudGUsICIgZXMgcGFyZW50IGRlICIpLmNvbmNhdChpZE5vZG9SZXF1ZXJpZG8pKTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QxMygpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkTm9kb1JlcXVpcmllbnRlOiBpZE5vZG9SZXF1aXJpZW50ZSwKICAgICAgICAgIHRpcG9SZXF1aXJpZW50ZTogdGlwb1JlcXVpcmllbnRlLAogICAgICAgICAgaWROb2RvUmVxdWVyaWRvOiBpZE5vZG9SZXF1ZXJpZG8KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGVsaW1pbmFyUmVxdWVyaW1lbnRvOiBmdW5jdGlvbiBlbGltaW5hclJlcXVlcmltZW50byhpZE5vZG9SZXF1aXJpZW50ZSwgdGlwb1JlcXVpcmllbnRlLCBpZE5vZG9SZXF1ZXJpZG8pIHsKICAgICAgdmFyIF90aGlzMTUgPSB0aGlzOwoKICAgICAgY29uc29sZS5sb2coIlNlIGVsaW1pbmFyXHhFMSBlbCByZXF1ZXJpbWVudG8gZW50cmUgZWwgbm9kbyAiLmNvbmNhdChpZE5vZG9SZXF1aXJpZW50ZSwgIiBkZSB0aXBvICIpLmNvbmNhdCh0aXBvUmVxdWlyaWVudGUsICIgeSBlbCBub2RvICIpLmNvbmNhdChpZE5vZG9SZXF1ZXJpZG8pKTsKICAgICAgdGhpcy5lbnZpYW5kb0VkaXRWaW5jdWxvcyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0MTQoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZE5vZG9SZXF1aXJpZW50ZTogaWROb2RvUmVxdWlyaWVudGUsCiAgICAgICAgICB0aXBvUmVxdWlyaWVudGU6IHRpcG9SZXF1aXJpZW50ZSwKICAgICAgICAgIGlkTm9kb1JlcXVlcmlkbzogaWROb2RvUmVxdWVyaWRvCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczE1LmVudmlhbmRvRWRpdFZpbmN1bG9zID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogIi5jb25jYXQoZXJyb3IpKTsKICAgICAgICBfdGhpczE1LmVudmlhbmRvRWRpdFZpbmN1bG9zID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGFmdGVyQ3JlYXJOb2RvVW5kZXI6IGZ1bmN0aW9uIGFmdGVyQ3JlYXJOb2RvVW5kZXIobnVldm9Ob2RvKSB7CiAgICAgIHRoaXMuJGVtaXQoIm5vZG9Tb2xpZGFyaWRhZENyZWFkbyIsIG51ZXZvTm9kbyk7CiAgICB9LAogICAgY3JlYXJOdWV2b05vZG9VbmRlcjogZnVuY3Rpb24gY3JlYXJOdWV2b05vZG9VbmRlcihpbmZvTm9kbykgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZygiQ3JlYW5kbyBub2RvIHVuZGVyICIuY29uY2F0KHRoaXMuZXN0ZU5vZG8uX190eXBlbmFtZSkpOwogICAgICB0aGlzLmNyZWFuZG9TdWJOb2RvID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QxNSgpLCBmcmFnbWVudG9Ob2RvU29saWRhcmlkYWQsIGZyYWdtZW50b1BlcnNvbmFBdGxhcyksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpbmZvTm9kbzogaW5mb05vZG8sCiAgICAgICAgICBpZE5vZG9QYXJlbnQ6IHRoaXMuZXN0ZU5vZG8uaWQsCiAgICAgICAgICB0aXBvUGFyZW50OiB0aGlzLmVzdGVOb2RvLl9fdHlwZW5hbWUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyB0aGlzLmVzdGVOb2RvLl9fdHlwZW5hbWUuc2xpY2UoMSkKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWYyKSB7CiAgICAgICAgdmFyIGNyZWFyTnVldm9Ob2RvU29saWRhcmlkYWRVbmRlck5vZG8gPSBfcmVmMi5kYXRhLmNyZWFyTnVldm9Ob2RvU29saWRhcmlkYWRVbmRlck5vZG87CiAgICAgICAgX3RoaXMxNi5jcmVhbmRvU3ViTm9kbyA9IGZhbHNlOwoKICAgICAgICBfdGhpczE2LmFmdGVyQ3JlYXJOb2RvVW5kZXIoY3JlYXJOdWV2b05vZG9Tb2xpZGFyaWRhZFVuZGVyTm9kby5udWV2b05vZG8pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczE2LmNyZWFuZG9TdWJOb2RvID0gZmFsc2U7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiLmNvbmNhdChlcnJvcikpOwogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydCB2YXIgTWl4aW5WaXN1YWxlc05vZG9zU29saWRhcmlkYWQgPSB7CiAgY29tcHV0ZWQ6IHsKICAgIGNvbG9ySWNvbm86IGZ1bmN0aW9uIGNvbG9ySWNvbm8oKSB7CiAgICAgIGlmICh0aGlzLmVzdGVOb2RvLmVzdGFkb0Rlc2Fycm9sbG8gPT09ICJjb21wbGV0YWRvIikgewogICAgICAgIHJldHVybiAiIzJjNzEwYyI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnVzdWFyaW9SZXNwb25zYWJsZUFtcGxpbykgewogICAgICAgIHJldHVybiAidmFyKC0tYXRsYXNNb3JhZG8pIjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudXN1YXJpb0FkbWluaXN0cmFkb3IpIHsKICAgICAgICByZXR1cm4gInZhcigtLWF0bGFzUGFyZW50KSI7CiAgICAgIH0KCiAgICAgIHJldHVybiAiYmxhY2siOwogICAgfQogIH0KfTsgLy9Mb2dpY2EgcGFyYSB1biBub2RvIGRlc3BsZWdhZGFkbyBncsOhZmljYW1lbnRlIGVuIGxhIHJlZCBkZWwgYXRsYXMKCmV4cG9ydCB2YXIgTWl4aW5Ob2RvQXRsYXMgPSB7CiAgcHJvcHM6IHsKICAgIHNlbGVjY2lvbmFkb0VzUmVzcG9uc2FibGU6IEJvb2xlYW4sCiAgICBlc3RlTm9kbzogT2JqZWN0LAogICAgdG9kb3NOb2RvczogQXJyYXksCiAgICBpZE5vZG9TZWxlY2Npb25hZG86IFN0cmluZywKICAgIHJlcXVlcmlkb1BvclNlbGVjY2lvbmFkbzogQm9vbGVhbiwKICAgIHJlcXVpZXJlQWxTZWxlY2Npb25hZG86IEJvb2xlYW4sCiAgICBub2RvU2VsZWNjaW9uYWRvOiBPYmplY3QsCiAgICBtZW51Q3g6IEJvb2xlYW4sCiAgICBmYWN0b3Jab29tOiBOdW1iZXIsCiAgICBjYWxsaW5nUG9zaWNpb25lczogQm9vbGVhbiwKICAgIHRyYW5zcGFyZW50b3NvOiBCb29sZWFuLAogICAgdXN1YXJpb0FkbWluaXN0cmFkb3JOb2RvU2VsZWNjaW9uYWRvOiBCb29sZWFuLAogICAgdXN1YXJpb1Jlc3BvbnNhYmxlTm9kb1NlbGVjY2lvbmFkbzogQm9vbGVhbiwKICAgIHVzdWFyaW9SZXNwb25zYWJsZUFtcGxpb05vZG9TZWxlY2Npb25hZG86IEJvb2xlYW4sCiAgICBjaGlsZFNlbGVjY2lvbmFkbzogQm9vbGVhbiwKICAgIGlkc05vZG9zRGVzcGxlZ2Fkb3M6IEFycmF5LAogICAgbm9kb1BhcmVudDogT2JqZWN0LAogICAgaWRzTm9kb3NOZWVkaW5nRmV0Y2hNb3JlOiBBcnJheSwKICAgIHRyYW5zaWNpb25hclBvc2ljaW9uTm9kb3M6IEJvb2xlYW4KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlc3RpbG9Ob21icmVCYXNlOiB7CiAgICAgICAgbWluV2lkdGg6IDgwLAogICAgICAgIGZvbnRTaXplOiAxNiwKICAgICAgICBtaW5IZWlnaHQ6IDE1LAogICAgICAgIHBhZGRpbmc6IDgsCiAgICAgICAgYm9yZGVyUmFkaXVzOiA1CiAgICAgIH0sCiAgICAgIHBvc2ljaW9uOiB0aGlzLm5vZG9QYXJlbnQgPyB7CiAgICAgICAgeDogdGhpcy5ub2RvUGFyZW50LmNvb3Jkcy54LAogICAgICAgIHk6IHRoaXMubm9kb1BhcmVudC5jb29yZHMueQogICAgICB9IDogewogICAgICAgIHg6IDAsCiAgICAgICAgeTogMAogICAgICB9LAogICAgICB3aWR0aEJhc2U6IDE1MCwKICAgICAgaGVpZ2h0QmFzZTogMTAwLAogICAgICBzaXplOiB7CiAgICAgICAgeDogMzAsCiAgICAgICAgeTogMzAKICAgICAgfSwKICAgICAgcHJpbWVyYVViaWNhY2lvbkNvbXBsZXRhZGE6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdG9nZ2xlRGVzcGxlZ2FyOiBmdW5jdGlvbiB0b2dnbGVEZXNwbGVnYXIoKSB7CiAgICAgIHZhciBzdG9yZSA9IHRoaXMuJGFwb2xsby5wcm92aWRlci5kZWZhdWx0Q2xpZW50OwogICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX0FUTEFTX1NPTElEQVJJREFECiAgICAgIH0pOwogICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKICAgICAgdmFyIGluZGV4TiA9IG51ZXZvQ2FjaGUueW8uYXRsYXNTb2xpZGFyaWRhZC5pZHNOb2Rvc0Rlc3BsZWdhZG9zLmluZGV4T2YodGhpcy5lc3RlTm9kby5pZCk7CgogICAgICBpZiAoaW5kZXhOID4gLTEgIT0gIXRoaXMuZGVzcGxlZ2FkbykgewogICAgICAgIGlmIChpbmRleE4gPT09IC0xKSB7CiAgICAgICAgICBudWV2b0NhY2hlLnlvLmF0bGFzU29saWRhcmlkYWQuaWRzTm9kb3NEZXNwbGVnYWRvcy5wdXNoKHRoaXMuZXN0ZU5vZG8uaWQpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBudWV2b0NhY2hlLnlvLmF0bGFzU29saWRhcmlkYWQuaWRzTm9kb3NEZXNwbGVnYWRvcy5zcGxpY2UoaW5kZXhOLCAxKTsKICAgICAgICB9CgogICAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fQVRMQVNfU09MSURBUklEQUQsCiAgICAgICAgICBkYXRhOiBudWV2b0NhY2hlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIkNvbmZ1c2lceEYzbiIpOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgd2FpdGluZ0ZldGNoQ2hpbGRyZW46IGZ1bmN0aW9uIHdhaXRpbmdGZXRjaENoaWxkcmVuKCkgewogICAgICByZXR1cm4gdGhpcy5pZHNOb2Rvc05lZWRpbmdGZXRjaE1vcmUuaW5jbHVkZXModGhpcy5lc3RlTm9kby5pZCk7CiAgICB9LAogICAgc2l6ZUVmZWN0aXZvOiBmdW5jdGlvbiBzaXplRWZlY3Rpdm8oKSB7CiAgICAgIC8vIGNvbnN0IGZhY3RvckFtcGxpYWNpb24gPSAxLjI7CiAgICAgIC8vIGlmICh0aGlzLnNlbGVjY2lvbmFkbykgewogICAgICAvLyAgIHJldHVybiB7CiAgICAgIC8vICAgICB4OiBNYXRoLnJvdW5kKHRoaXMuc2l6ZS54ICogZmFjdG9yQW1wbGlhY2lvbiksCiAgICAgIC8vICAgICB5OiBNYXRoLnJvdW5kKHRoaXMuc2l6ZS55ICogZmFjdG9yQW1wbGlhY2lvbiksCiAgICAgIC8vICAgfTsKICAgICAgLy8gfQogICAgICByZXR1cm4gdGhpcy5zaXplOwogICAgfSwKICAgIGVzdGlsb1Bvc2ljaW9uOiBmdW5jdGlvbiBlc3RpbG9Qb3NpY2lvbigpIHsKICAgICAgaWYgKHRoaXMubW9udGFkbykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsZWZ0OiAodGhpcy5wb3NpY2lvbi54IC0gdGhpcy5zaXplRWZlY3Rpdm8ueCAvIDIpICogdGhpcy5mYWN0b3Jab29tICsgInB4IiwKICAgICAgICAgIHRvcDogKHRoaXMucG9zaWNpb24ueSAtIHRoaXMuc2l6ZUVmZWN0aXZvLnkgLyAyKSAqIHRoaXMuZmFjdG9yWm9vbSArICJweCIKICAgICAgICB9OwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIHRvcDogIjBweCIsCiAgICAgICAgbGVmdDogIjBweCIKICAgICAgfTsKICAgIH0sCiAgICBlc3RpbG9aZXRhOiBmdW5jdGlvbiBlc3RpbG9aZXRhKCkgewogICAgICB2YXIgdmFsb3JaID0gMDsKCiAgICAgIGlmICh0aGlzLmFycmFzdHJhbmRvTm9kbyA+IHRoaXMudW1icmFsQXJyYXN0cmVOb2RvIHx8IHRoaXMuc2VsZWNjaW9uYWRvKSB7CiAgICAgICAgdmFsb3JaID0gMTAwOwogICAgICB9CgogICAgICBpZiAodGhpcy5tZW51Q3gpIHsKICAgICAgICB2YWxvclogPSAyMDA7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgekluZGV4OiB2YWxvcloKICAgICAgfTsKICAgIH0sCiAgICBlc3RpbG9TaXplOiBmdW5jdGlvbiBlc3RpbG9TaXplKCkgewogICAgICByZXR1cm4gewogICAgICAgIHdpZHRoOiBNYXRoLnJvdW5kKHRoaXMuc2l6ZUVmZWN0aXZvLnggKiB0aGlzLmZhY3Rvclpvb20pICsgInB4IiwKICAgICAgICBoZWlnaHQ6IE1hdGgucm91bmQodGhpcy5zaXplRWZlY3Rpdm8ueSAqIHRoaXMuZmFjdG9yWm9vbSkgKyAicHgiLAogICAgICAgIGZvbnRTaXplOiBNYXRoLnJvdW5kKDE0ICogdGhpcy5mYWN0b3Jab29tKSArICJweCIKICAgICAgfTsKICAgIH0sCiAgICAvLyBlc3RpbG9PcGFjaWRhZCgpIHsKICAgIC8vICAgcmV0dXJuIHsKICAgIC8vICAgICBvcGFjaXR5OgogICAgLy8gICAgICAgdHJhbnNwYXJlbnRvc28KICAgIC8vICAgICAgICAgPyAiMC4yIgogICAgLy8gICAgICAgICA6ICIxIiwKICAgIC8vICAgfTsKICAgIC8vIH0sCiAgICBzZWxlY2Npb25hZG86IGZ1bmN0aW9uIHNlbGVjY2lvbmFkbygpIHsKICAgICAgcmV0dXJuIHRoaXMuaWROb2RvU2VsZWNjaW9uYWRvICYmIHRoaXMuaWROb2RvU2VsZWNjaW9uYWRvID09IHRoaXMuZXN0ZU5vZG8uaWQ7CiAgICB9LAogICAgZXN0aWxvQ2FydGVsTm9tYnJlOiBmdW5jdGlvbiBlc3RpbG9DYXJ0ZWxOb21icmUoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbWluV2lkdGg6IHBhcnNlSW50KHRoaXMuZXN0aWxvTm9tYnJlQmFzZS5taW5XaWR0aCAqIHRoaXMuZmFjdG9yWm9vbSkgKyAicHgiLAogICAgICAgIGZvbnRTaXplOiBwYXJzZUludCh0aGlzLmVzdGlsb05vbWJyZUJhc2UuZm9udFNpemUgKiB0aGlzLmZhY3Rvclpvb20pICsgInB4IiwKICAgICAgICBtaW5IZWlnaHQ6IHBhcnNlSW50KHRoaXMuZXN0aWxvTm9tYnJlQmFzZS5taW5IZWlnaHQgKiB0aGlzLmZhY3Rvclpvb20pICsgInB4IiwKICAgICAgICBwYWRkaW5nOiBwYXJzZUludCh0aGlzLmVzdGlsb05vbWJyZUJhc2UucGFkZGluZyAqIHRoaXMuZmFjdG9yWm9vbSkgKyAicHgiLAogICAgICAgIGJvcmRlclJhZGl1czogcGFyc2VJbnQodGhpcy5lc3RpbG9Ob21icmVCYXNlLmJvcmRlclJhZGl1cyAqIHRoaXMuZmFjdG9yWm9vbSkgKyAicHgiIC8vIG1heEhlaWdodDogdGhpcy5zZWxlY2Npb25hZG8gPyAiIiA6ICI5MCUiLAoKICAgICAgfTsKICAgIH0sCiAgICBjb2xvckNhcnRlbE5vbWJyZTogZnVuY3Rpb24gY29sb3JDYXJ0ZWxOb21icmUoKSB7CiAgICAgIHZhciBjb2xvciA9ICJ2YXIoLS1hdGxhc0dyaXMpIjsKICAgICAgdmFyIGJvcmRlID0gIjFweCBzb2xpZCBibGFjayI7CgogICAgICBpZiAodGhpcy51c3VhcmlvUmVzcG9uc2FibGVBbXBsaW8pIHsKICAgICAgICBib3JkZSA9ICIxcHggc29saWQgdmFyKC0tYXRsYXNNb3JhZG8pIjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuZXN0ZU5vZG8uZXN0YWRvRGVzYXJyb2xsbyA9PT0gImNvbXBsZXRhZG8iKSB7CiAgICAgICAgY29sb3IgPSAicmdiKDkxIDE0NiA2NikiOwogICAgICAgIGJvcmRlID0gIjFweCBzb2xpZCB2YXIoLS1hdGxhc1ZlcmRlKSI7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvciwKICAgICAgICBib3JkZXI6IGJvcmRlCiAgICAgIH07CiAgICB9LAogICAgcGFyZW50RGVTZWxlY2Npb25hZG86IGZ1bmN0aW9uIHBhcmVudERlU2VsZWNjaW9uYWRvKCkgewogICAgICBpZiAoIXRoaXMubm9kb1NlbGVjY2lvbmFkbykgcmV0dXJuIGZhbHNlOwogICAgICBpZiAodGhpcy5ub2RvU2VsZWNjaW9uYWRvLm5vZG9QYXJlbnQgPT09IHRoaXMuZXN0ZU5vZG8uaWQpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgZXN0aWxvQm9saXRhOiBmdW5jdGlvbiBlc3RpbG9Cb2xpdGEoKSB7CiAgICAgIHZhciBlbENvbG9yID0gInJnYmEoMTA1LCAxOTksIDE5OSwgMC45KSI7CgogICAgICBpZiAodGhpcy5zZWxlY2Npb25hZG8pIHsKICAgICAgICBlbENvbG9yID0gInZhcigtLWF0bGFzTmFyYW5qYSkiOwogICAgICB9IGVsc2UgaWYgKHRoaXMucGFyZW50RGVTZWxlY2Npb25hZG8pIHsKICAgICAgICBlbENvbG9yID0gInZhcigtLWF0bGFzUGFyZW50KSI7CiAgICAgIH0KCiAgICAgIHZhciBib3JkZSA9ICIiOwoKICAgICAgaWYgKHRoaXMudXN1YXJpb1Jlc3BvbnNhYmxlKSB7CiAgICAgICAgYm9yZGUgPSBNYXRoLnJvdW5kKDMgKiB0aGlzLmZhY3Rvclpvb20pICsgInB4IGRvdHRlZCB2YXIoLS1hdGxhc01vcmFkbykiOwogICAgICB9CgogICAgICBpZiAodGhpcy5jaGlsZFNlbGVjY2lvbmFkbykgewogICAgICAgIGJvcmRlID0gTWF0aC5yb3VuZCgzICogdGhpcy5mYWN0b3Jab29tKSArICJweCBzb2xpZCB2YXIoLS1hdGxhc05hcmFuamEpIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGVsQ29sb3IsCiAgICAgICAgYm9yZGVyOiBib3JkZQogICAgICB9OwogICAgfSwKICAgIGRlc3BsZWdhZG86IGZ1bmN0aW9uIGRlc3BsZWdhZG8oKSB7CiAgICAgIHJldHVybiB0aGlzLmlkc05vZG9zRGVzcGxlZ2Fkb3MuaW5jbHVkZXModGhpcy5lc3RlTm9kby5pZCk7CiAgICB9LAogICAgZXN0aWxvVHJhbnNpY2lvbjogZnVuY3Rpb24gZXN0aWxvVHJhbnNpY2lvbigpIHsKICAgICAgdmFyIHRyYW5zaWNpb24gPSAnJzsgLy8gdmFyIHRyYW5zaWNpb249J2xlZnQgMC40cywgdG9wIDAuNHMnCiAgICAgIC8vIGlmKHRoaXMucHJpbWVyYVViaWNhY2lvbkNvbXBsZXRhZGEpewogICAgICAvLyAgIHRyYW5zaWNpb249J2xlZnQgNXMsIHJpZ2h0IDVzJwogICAgICAvLyB9CgogICAgICByZXR1cm4gewogICAgICAgIHRyYW5zaXRpb246IHRyYW5zaWNpb24KICAgICAgfTsKICAgIH0sCiAgICBlblZlbnRhbml0YTogZnVuY3Rpb24gZW5WZW50YW5pdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLmlkTm9kb1BhVmVudGFuaXRhICYmIHRoaXMuaWROb2RvUGFWZW50YW5pdGEgPT09IHRoaXMuZXN0ZU5vZG8uaWQ7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZXN0ZU5vZG86IGZ1bmN0aW9uIGVzdGVOb2RvKCkgewogICAgICB0aGlzLiRzZXQodGhpcy5wb3NpY2lvbiwgIngiLCB0aGlzLmVzdGVOb2RvLmNvb3Jkcy54KTsKICAgICAgdGhpcy4kc2V0KHRoaXMucG9zaWNpb24sICJ5IiwgdGhpcy5lc3RlTm9kby5jb29yZHMueSk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgIGlmICh0aGlzLmVzdGVOb2RvLm5vbWJyZSA9PT0gJ1Jlc3BvbmRlciBwcmVndW50YXMgZnVuZGFtZW50YWxlcycpIHsKICAgICAgY29uc29sZS5sb2coIlJlY2llbiBtb250YWRvLCBlc3RceEUxIGVuICIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHRoaXMucG9zaWNpb24pKSk7CiAgICB9CgogICAgdGhpcy5tb250YWRvID0gdHJ1ZTsKICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgX3RoaXMxNy4kc2V0KF90aGlzMTcucG9zaWNpb24sICJ4IiwgX3RoaXMxNy5lc3RlTm9kby5jb29yZHMueCk7CgogICAgICBfdGhpczE3LiRzZXQoX3RoaXMxNy5wb3NpY2lvbiwgInkiLCBfdGhpczE3LmVzdGVOb2RvLmNvb3Jkcy55KTsKCiAgICAgIGlmIChfdGhpczE3LmVzdGVOb2RvLm5vbWJyZSA9PT0gJ1Jlc3BvbmRlciBwcmVndW50YXMgZnVuZGFtZW50YWxlcycpIHsKICAgICAgICBjb25zb2xlLmxvZygiQWhvcmEgZXN0XHhFMSBlbiAiLmNvbmNhdChKU09OLnN0cmluZ2lmeShfdGhpczE3LnBvc2ljaW9uKSkpOwogICAgICB9CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczE3LnByaW1lcmFVYmljYWNpb25Db21wbGV0YWRhID0gdHJ1ZTsKICAgICAgfSwgNTAwKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["/home/vida1/webpj/pepepe/vuecliente/src/components/atlasSolidaridad/ConfiguracionNodoSolidaridad.js"],"names":["gql","charProhibidosNombreCosa","charProhibidosTexto","fragmentoNodoSolidaridad","fragmentoPersonaAtlas","charProhibidosNombreNodo","charProhibidosDescripcionNodo","charProhibidosKeywords","QUERY_DATOS_USUARIO_ATLAS_SOLIDARIDAD","MixinGeneralNodoSolidaridad","data","enviandoQueryGeneral","methods","eliminarse","usuarioSuperadministrador","usuarioAdministrador","console","log","confirm","dis","$apollo","mutate","mutation","variables","idNodo","esteNodo","id","then","$emit","catch","error","MixinEdicionNodoSolidaridad","idResponsableSeleccionado","enviandoQueryResponsables","nuevoNombre","editandoNombre","enviandoNuevoNombre","nuevoDescripcion","editandoDescripcion","enviandoNuevoDescripcion","nuevoKeywords","editandoKeywords","enviandoNuevoKeywords","togglingEstado","guardarNuevoNombre","$refs","inputNuevoNombre","value","nuevoNombreIlegal","nombre","guardarNuevoDescripcion","nuevoDescripcionIlegal","descripcion","guardarNuevoKeywords","nuevoKeywordsIlegal","keywords","graphQLErrors","toggleEditandoDescripcion","inputNuevoDescripcion","style","height","offsetHeight","$nextTick","focus","toggleEditandoKeywords","inputNuevoKeywords","toggleEstadoNodo","nuevoEstado","estadoDesarrollo","entrarResponsables","abandonarListaResponsables","idUsuario","usuario","retirarUsuarioFromListaResponsables","usuarioParent","aceptarResponsable","idPosibleResponsable","responsableSeleccionadoEstaAceptado","versionCalendario","toggleEditandoNombre","e","seleccionado","noSeleccionable","stopPropagation","keydownInputNuevoNombre","key","blur","addResponsableManually","usuarioLogeado","permisos","includes","computed","length","test","watch","mostrando","MixinPermisosUsuarioNodoSolidaridad","usuarioResponsable","responsables","usuarioResponsableAmplio","responsablesAmplio","usuarioPosibleResponsable","posiblesResponsables","administradores","tipoParent","nodoParent","MixinEdicionVinculosNodoSolidaridad","creandoSubNodo","enviandoEditVinculos","crearRequerimento","idNodoRequiriente","tipoRequiriente","idNodoRequerido","crearParenting","eliminarRequerimento","afterCrearNodoUnder","nuevoNodo","crearNuevoNodoUnder","infoNodo","__typename","idNodoParent","charAt","toLowerCase","slice","crearNuevoNodoSolidaridadUnderNodo","MixinVisualesNodosSolidaridad","colorIcono","MixinNodoAtlas","props","seleccionadoEsResponsable","Boolean","Object","todosNodos","Array","idNodoSeleccionado","String","requeridoPorSeleccionado","requiereAlSeleccionado","nodoSeleccionado","menuCx","factorZoom","Number","callingPosiciones","transparentoso","usuarioAdministradorNodoSeleccionado","usuarioResponsableNodoSeleccionado","usuarioResponsableAmplioNodoSeleccionado","childSeleccionado","idsNodosDesplegados","idsNodosNeedingFetchMore","transicionarPosicionNodos","estiloNombreBase","minWidth","fontSize","minHeight","padding","borderRadius","posicion","x","coords","y","widthBase","heightBase","size","primeraUbicacionCompletada","toggleDesplegar","store","provider","defaultClient","cache","readQuery","query","nuevoCache","JSON","parse","stringify","indexN","yo","atlasSolidaridad","indexOf","desplegado","push","splice","writeQuery","waitingFetchChildren","sizeEfectivo","estiloPosicion","montado","left","top","estiloZeta","valorZ","arrastrandoNodo","umbralArrastreNodo","zIndex","estiloSize","width","Math","round","estiloCartelNombre","parseInt","colorCartelNombre","color","borde","backgroundColor","border","parentDeSeleccionado","estiloBolita","elColor","estiloTransicion","transicion","transition","enVentanita","idNodoPaVentanita","$set","mounted","setTimeout"],"mappings":"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","sourcesContent":["import gql from \"graphql-tag\";\nimport { charProhibidosNombreCosa, charProhibidosTexto } from \"./configuracion\";\n\nimport { fragmentoNodoSolidaridad, fragmentoPersonaAtlas } from \"./frags\";\n\nexport const charProhibidosNombreNodo = charProhibidosNombreCosa;\nexport const charProhibidosDescripcionNodo = charProhibidosTexto\nexport const charProhibidosKeywords = /[^ a-zA-Z0-9]/;\nexport const QUERY_DATOS_USUARIO_ATLAS_SOLIDARIDAD = gql`\n  query {\n    yo {\n      id\n      nombre\n      coords{\n        x\n        y\n      }\n      vinculos{\n      id\n        tipo\n        idRef\n      }\n      fuerzaCentroMasa{\n      fuerza\n      direccion\n    }\n    fuerzaColision{\n      fuerza\n      direccion  \n    }\n      atlasSolidaridad {\n        id\n        coordsVista {\n          x\n          y\n        }\n        idsNodosDesplegados\n      }\n    }\n  }\n`;\n\nexport var MixinGeneralNodoSolidaridad = {\n  data() {\n    return {\n      enviandoQueryGeneral: false,\n    }\n  },\n  methods: {\n    eliminarse() {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministrador) {\n        console.log(`No autorizado`);\n        return;\n      }\n      if (\n        !confirm(\n          \"Confirmar eliminacin de nodo? (Esta accin no puede deshacerse\"\n        )\n      ) {\n        return;\n      }\n      this.enviandoQueryGeneral = true;\n      const dis = this;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!) {\n                    eliminarNodoSolidaridad(idNodo: $idNodo)\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n          },\n        })\n        .then(() => {\n          dis.enviandoQueryGeneral = false;\n          this.$emit(\"meElimine\")\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          dis.enviandoQueryGeneral = false;\n        });\n    },\n  }\n}\n\nexport var MixinEdicionNodoSolidaridad = {\n  data() {\n    return {\n      idResponsableSeleccionado: null,\n      enviandoQueryResponsables: false,\n\n      nuevoNombre: \"Nuevo nombre\",\n      editandoNombre: false,\n      enviandoNuevoNombre: false,\n\n      nuevoDescripcion: \"Nueva descripcion\",\n      editandoDescripcion: false,\n      enviandoNuevoDescripcion: false,\n\n      nuevoKeywords: null,\n      editandoKeywords: false,\n      enviandoNuevoKeywords: false,\n\n      togglingEstado: false,\n    };\n  },\n  methods: {\n\n    guardarNuevoNombre() {\n      this.nuevoNombre = this.$refs.inputNuevoNombre.value;\n\n      if (this.nuevoNombreIlegal) {\n        console.log(`No enviado`);\n        return;\n      }\n      if (this.nuevoNombre == this.esteNodo.nombre) {\n        this.editandoNombre = false;\n        return;\n      }\n      console.log(`guardando nuevo nombre`);\n      this.enviandoNuevoNombre = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!, $nuevoNombre: String!) {\n                    editarNombreNodoSolidaridad(\n                      idNodo: $idNodo\n                      nuevoNombre: $nuevoNombre\n                    ) {\n                      id\n                      nombre\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            nuevoNombre: this.nuevoNombre,\n          },\n        })\n        .then(() => {\n          this.enviandoNuevoNombre = false;\n          this.editandoNombre = false;\n        })\n        .catch((error) => {\n          this.enviandoNuevoNombre = false;\n          console.log(`Error. E :${error}`);\n        });\n    },\n    guardarNuevoDescripcion() {\n      if (this.nuevoDescripcionIlegal) {\n        console.log(`No enviado`);\n        return;\n      }\n      if (this.nuevoDescripcion == this.esteNodo.descripcion) {\n        this.editandoDescripcion = false;\n        return;\n      }\n      console.log(`guardando nuevo descripcion`);\n      this.enviandoNuevoDescripcion = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!, $nuevoDescripcion: String!) {\n                    editarDescripcionNodoSolidaridad(\n                      idNodo: $idNodo\n                      nuevoDescripcion: $nuevoDescripcion\n                    ) {\n                      id\n                      descripcion\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            nuevoDescripcion: this.nuevoDescripcion,\n          },\n        })\n        .then(() => {\n          this.enviandoNuevoDescripcion = false;\n          this.editandoDescripcion = false;\n        })\n        .catch((error) => {\n          this.enviandoNuevoDescripcion = false;\n          console.log(`Error. E :${error}`);\n        });\n    },\n    guardarNuevoKeywords() {\n      if (this.nuevoKeywordsIlegal) {\n        console.log(`Keywords ilegal`);\n        return;\n      }\n      if (this.nuevoKeywords == this.esteNodo.keywords) {\n        this.editandoKeywords = false;\n        return;\n      }\n      console.log(`guardando nuevo keywords`);\n      this.enviandoNuevoKeywords = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!, $nuevoKeywords: String!) {\n                    editarKeywordsNodoSolidaridad(\n                      idNodo: $idNodo\n                      nuevoKeywords: $nuevoKeywords\n                    ) {\n                      id\n                      keywords\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            nuevoKeywords: this.nuevoKeywords,\n          },\n        })\n        .then(() => {\n          this.enviandoNuevoKeywords = false;\n          this.editandoKeywords = false;\n        })\n        .catch(({ graphQLErrors }) => {\n          this.enviandoNuevoKeywords = false;\n          console.log(`Error. E :${graphQLErrors}`);\n        });\n    },\n    toggleEditandoDescripcion() {\n      if (!this.usuarioAdministrador) {\n        return;\n      }\n      this.$refs.inputNuevoDescripcion.style.height =\n        this.$refs.descripcion.offsetHeight + \"px\";\n      this.editandoDescripcion = !this.editandoDescripcion;\n      this.nuevoDescripcion = this.esteNodo.descripcion;\n\n      if (this.editandoDescripcion) {\n        this.$nextTick(() => {\n          this.$refs.inputNuevoDescripcion.focus();\n        })\n      }\n    },\n    toggleEditandoKeywords() {\n      if (!this.usuarioAdministrador) {\n        return;\n      }\n      this.$refs.inputNuevoKeywords.style.height =\n        this.$refs.keywords.offsetHeight + \"px\";\n      this.editandoKeywords = !this.editandoKeywords;\n      this.nuevoKeywords = this.esteNodo.keywords;\n\n      if (this.editandoKeywords) {\n        this.$nextTick(() => {\n          this.$refs.inputNuevoKeywords.focus();\n        })\n      }\n    },\n    toggleEstadoNodo() {\n      if (!this.usuarioAdministrador) return;\n      var nuevoEstado = \"noCompletado\";\n      if (this.esteNodo.estadoDesarrollo === \"noCompletado\") {\n        nuevoEstado = \"completado\";\n      }\n      this.togglingEstado = true;\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!, $nuevoEstado: String!) {\n                    setEstadoNodoSolidaridad(\n                      idNodo: $idNodo\n                      nuevoEstado: $nuevoEstado\n                    ) {\n                      id\n                      estadoDesarrollo\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            nuevoEstado,\n          },\n        })\n        .then(() => {\n          this.togglingEstado = false;\n          console.log(`toggled`);\n        })\n        .catch((error) => {\n          this.togglingEstado = false;\n          console.log(`Error: E:${error}`);\n        });\n    },\n    entrarResponsables() {\n      console.log(\n        `Enviando peticion de entrar a la lista de responsables del nodo con id ${this.esteNodo.id}`\n      );\n      this.enviandoQueryResponsables = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!) {\n                    usuarioEntrarResponsableNodoSolidaridad(idNodo: $idNodo) {\n                      id\n                      responsables\n                      posiblesResponsables\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n          },\n        })\n        .then(() => {\n          this.enviandoQueryResponsables = false;\n        })\n        .catch((error) => {\n          this.enviandoQueryResponsables = false;\n          console.log(\"error: \" + error);\n        });\n    },\n    abandonarListaResponsables() {\n      console.log(`Abandonando la responsabilidad en este nodo`);\n      this.enviandoQueryResponsables = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!, $idUsuario: ID!) {\n                    removeResponsableNodoSolidaridad(\n                      idNodo: $idNodo\n                      idUsuario: $idUsuario\n                    ) {\n                      id\n                      responsables\n                      posiblesResponsables\n                      administradores\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            idUsuario: this.usuario.id,\n          },\n        })\n        .then(() => {\n          this.enviandoQueryResponsables = false;\n          this.idResponsableSeleccionado=null;\n        })\n        .catch((error) => {\n          this.enviandoQueryResponsables = false;\n          console.log(\"error: \" + error);\n        });\n    },\n    retirarUsuarioFromListaResponsables(idUsuario) {\n      if(!this.usuarioSuperadministrador && !this.usuarioParent){\n        return;\n      }\n      console.log(`Retirando usuario de este nodo`);\n      \n      this.enviandoQueryResponsables = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!, $idUsuario: ID!) {\n                    removeResponsableNodoSolidaridad(\n                      idNodo: $idNodo\n                      idUsuario: $idUsuario\n                    ) {\n                      id\n                      responsables\n                      posiblesResponsables\n                      administradores\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            idUsuario,\n          },\n        })\n        .then(() => {\n          this.enviandoQueryResponsables = false;\n          this.idResponsableSeleccionado=null;\n        })\n        .catch((error) => {\n          this.enviandoQueryResponsables = false;\n          console.log(\"error: \" + error);\n        });\n    },\n    aceptarResponsable(idPosibleResponsable) {\n      console.log(\n        `aceptando como responsable al usuario ${idPosibleResponsable}`\n      );\n      this.enviandoQueryResponsables = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!, $idUsuario: ID!) {\n                    addResponsableNodoSolidaridad(\n                      idNodo: $idNodo\n                      idUsuario: $idUsuario\n                    ) {\n                      id\n                      responsables\n                      posiblesResponsables\n                      responsablesSolicitados\n                      administradores\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            idUsuario: idPosibleResponsable,\n          },\n        })\n        .then(() => {\n          this.enviandoQueryResponsables = false;\n          this.responsableSeleccionadoEstaAceptado = true;\n          this.versionCalendario++;\n        })\n        .catch((error) => {\n          this.enviandoQueryResponsables = false;\n          console.log(\"error: \" + error);\n        });\n    },\n    toggleEditandoNombre(e) {\n      if (!this.seleccionado && !this.noSeleccionable) {\n        return\n      }\n      if (this.usuarioAdministrador) {\n        e.stopPropagation();\n\n        this.editandoNombre = true;\n        this.nuevoNombre = this.esteNodo.nombre;\n        this.$nextTick(() => {\n          this.$refs.inputNuevoNombre.focus();\n        })\n      }\n    },\n    keydownInputNuevoNombre(e) {\n      if (e.key === \"Escape\") {\n        this.$refs.inputNuevoNombre.blur();\n      }\n    },\n    addResponsableManually(idUsuario){\n      if(!this.usuarioLogeado || (!this.usuario.permisos.includes(\"maestraVida-profesor\") && !this.usuarioSuperadministrador)){\n        return\n      }\n      console.log(`Adding ${idUsuario} a la lista de responsables`);\n      const idPosibleResponsable=idUsuario\n      this.enviandoQueryResponsables = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n                  mutation ($idNodo: ID!, $idUsuario: ID!) {\n                    addResponsableNodoSolidaridad(\n                      idNodo: $idNodo\n                      idUsuario: $idUsuario\n                    ) {\n                      id\n                      responsables\n                      posiblesResponsables\n                      responsablesSolicitados\n                      administradores\n                    }\n                  }\n                `,\n          variables: {\n            idNodo: this.esteNodo.id,\n            idUsuario: idPosibleResponsable,\n          },\n        })\n        .then(() => {\n          this.enviandoQueryResponsables = false;\n          this.versionCalendario++;\n        })\n        .catch((error) => {\n          this.enviandoQueryResponsables = false;\n          console.log(\"error: \" + error);\n        });\n    }\n\n  },\n  computed: {\n\n    nuevoNombreIlegal() {\n      if (this.nuevoNombre.length < 1) {\n        return true;\n      }\n      if (charProhibidosNombreNodo.test(this.nuevoNombre)) {\n        return true;\n      }\n      return false;\n    },\n    nuevoDescripcionIlegal() {\n      if (!this.nuevoDescripcion || this.nuevoDescripcion.length < 1) {\n        return true;\n      }\n      if (charProhibidosDescripcionNodo.test(this.nuevoDescripcion)) {\n        return true;\n      }\n      return false;\n    },\n    nuevoKeywordsIlegal() {\n      if (!this.nuevoKeywords || this.nuevoKeywords.length < 1) {\n        return true;\n      }\n      if (charProhibidosKeywords.test(this.nuevoKeywords)) {\n        return true;\n      }\n      return false;\n    },\n  },\n  watch: {\n    mostrando(mostrando) {\n      if (mostrando != \"descripcion\") this.editandoDescripcion = false;\n      if (mostrando != \"keywords\") this.editandoKeywords = false;\n\n      if (mostrando === \"descripcion\") {\n        if (\n          !this.esteNodo.descripcion ||\n          this.esteNodo.descripcion.length < 1 ||\n          this.esteNodo.descripcion === \"Sin descripcin\" ||\n          this.esteNodo.descripcion === \"Sin descripcion\"\n        ) {\n          if (!this.editandoDescripcion) {\n            this.toggleEditandoDescripcion();\n          }\n        }\n      }\n      else if (mostrando === \"keywords\") {\n        if (\n          !this.esteNodo.keywords ||\n          this.esteNodo.keywords.length < 1\n        ) {\n          if (!this.editandoKeywords) {\n            this.toggleEditandoKeywords();\n          }\n        }\n      }\n    },\n  }\n}\n\nexport var MixinPermisosUsuarioNodoSolidaridad = {\n  computed: {\n    usuarioResponsable() {\n      if (!this.usuarioLogeado || !this.usuario || !this.usuario.id)\n        return false;\n      return (\n        this.esteNodo.responsables &&\n        this.esteNodo.responsables.includes(this.usuario.id)\n      );\n    },\n    usuarioResponsableAmplio() {\n      if (!this.usuarioLogeado || !this.usuario || !this.usuario.id)\n        return false;\n      return (\n        this.esteNodo.responsablesAmplio &&\n        this.esteNodo.responsablesAmplio.includes(this.usuario.id)\n      );\n    },\n    usuarioPosibleResponsable: function () {\n      if (!this.esteNodo.posiblesResponsables) return false;\n\n      if (this.esteNodo.posiblesResponsables.includes(this.usuario.id)) {\n        return true;\n      }\n      return false;\n    },\n    usuarioAdministrador() {\n      if (!this.usuario || !this.usuario.id) return false;\n      return this.esteNodo.administradores.includes(this.usuario.id);\n    },\n    usuarioParent(){\n      if(!this.usuarioLogeado)return false;\n      return this.esteNodo.tipoParent==='usuario' && this.esteNodo.nodoParent===this.usuario.id;\n    }\n  }\n}\n\nexport var MixinEdicionVinculosNodoSolidaridad = {\n  data() {\n    return {\n      creandoSubNodo: false,\n      enviandoEditVinculos: false,\n    }\n  },\n  methods: {\n    crearRequerimento(idNodoRequiriente, tipoRequiriente, idNodoRequerido) {\n      console.log(\n        `Se fijara que ${idNodoRequiriente} requiere a ${idNodoRequerido}`\n      );\n      this.enviandoEditVinculos = true;\n      this.$apollo.mutate({\n        mutation: gql`\n            mutation ($idNodoRequiriente: ID!, $tipoRequiriente: String!, $idNodoRequerido: ID!) {\n              crearRequerimentoEntreNodosAtlasSolidaridad(\n                idNodoRequiriente: $idNodoRequiriente\n                tipoRequiriente:$tipoRequiriente\n                idNodoRequerido: $idNodoRequerido\n              ) {\n                nodosModificados{\n                  __typename\n                  id\n                  vinculos {\n                    id\n                    idRef\n                    tipo                \n                  }\n                  administradores\n                  nodoParent\n                }\n                usuariosModificados{\n                  id\n                  vinculos {\n                    id\n                    idRef\n                    tipo                \n                  }\n                }\n                \n              }\n            }\n          `,\n        variables: {\n          idNodoRequiriente,\n          tipoRequiriente,\n          idNodoRequerido,\n        },\n      }).then(() => {\n        this.enviandoEditVinculos = false;\n      }).catch((error) => {\n        this.enviandoEditVinculos = false;\n        console.log(`Error: ${error}`);\n      });\n    },\n    crearParenting(idNodoRequiriente, tipoRequiriente, idNodoRequerido) {\n      if (!this.usuarioSuperadministrador) {\n        console.log(`Opcin exclusiva de speradministrador`);\n        return\n      }\n      console.log(\n        `Se fijara que ${idNodoRequiriente} es parent de ${idNodoRequerido}`\n      );\n      this.$apollo.mutate({\n        mutation: gql`\n            mutation ($idNodoRequiriente: ID!, $tipoRequiriente:String!, $idNodoRequerido: ID!) {\n              crearParentingEntreNodosAtlasSolidaridad(\n                idNodoRequiriente: $idNodoRequiriente\n                tipoRequiriente: $tipoRequiriente\n                idNodoRequerido: $idNodoRequerido\n              ) {\n                nodosModificados{\n                  id\n                  vinculos {\n                    id\n                    idRef\n                    tipo                \n                  }\n                  administradores\n                  nodoParent\n                }\n                usuariosModificados{\n                  id\n                  vinculos {\n                    id\n                    idRef\n                    tipo                \n                  }\n                }\n              }\n            }\n          `,\n        variables: {\n          idNodoRequiriente,\n          tipoRequiriente,\n          idNodoRequerido,\n        },\n      });\n    },\n    eliminarRequerimento(idNodoRequiriente, tipoRequiriente, idNodoRequerido) {\n      console.log(`Se eliminar el requerimento entre el nodo ${idNodoRequiriente} de tipo ${tipoRequiriente} y el nodo ${idNodoRequerido}`);\n      this.enviandoEditVinculos = true;\n\n      this.$apollo.mutate({\n        mutation: gql`\n            mutation ($idNodoRequiriente: ID!, $tipoRequiriente:String!, $idNodoRequerido: ID!) {\n              deleteRequerimentoNodosAtlasSolidaridad(\n                idNodoRequiriente: $idNodoRequiriente\n                tipoRequiriente: $tipoRequiriente\n                idNodoRequerido: $idNodoRequerido\n              ) {\n                  nodosModificados{\n                    id\n                    vinculos {\n                      id\n                      idRef\n                      tipo                \n                    }\n                    administradores\n                    nodoParent\n                  }\n                  usuariosModificados{\n                    id\n                    vinculos {\n                      id\n                      idRef\n                      tipo                \n                    }                                        \n                  }              \n              }\n            }\n          `,\n        variables: {\n          idNodoRequiriente,\n          tipoRequiriente,\n          idNodoRequerido,\n        },\n      }).then(() => {\n        this.enviandoEditVinculos = false;\n\n      }).catch((error) => {\n        console.log(`Error: ${error}`);\n        this.enviandoEditVinculos = false;\n      });\n    },\n    afterCrearNodoUnder(nuevoNodo) {\n      this.$emit(\"nodoSolidaridadCreado\", nuevoNodo)\n    },\n    crearNuevoNodoUnder(infoNodo) {\n      console.log(`Creando nodo under ${this.esteNodo.__typename}`);\n      this.creandoSubNodo = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($infoNodo: NodoSolidaridadInput!, $idNodoParent: ID!, $tipoParent:String!) {\n              crearNuevoNodoSolidaridadUnderNodo(\n                infoNodo: $infoNodo\n                idNodoParent: $idNodoParent\n                tipoParent:$tipoParent\n              ) {\n                nuevoNodo{\n                  ...fragNodoSolidaridad\n                }\n                nodosModificados{\n                  ...fragNodoSolidaridad                      \n                }\n                usuariosModificados{\n                  ...fragPersonaAtlas\n                }\n              }\n            }\n            ${fragmentoNodoSolidaridad}\n            ${fragmentoPersonaAtlas}\n          `,\n          variables: {\n            infoNodo,\n            idNodoParent: this.esteNodo.id,\n            tipoParent: this.esteNodo.__typename.charAt(0).toLowerCase() + this.esteNodo.__typename.slice(1),\n          },\n        })\n        .then(({ data: { crearNuevoNodoSolidaridadUnderNodo } }) => {\n          this.creandoSubNodo = false;\n          this.afterCrearNodoUnder(crearNuevoNodoSolidaridadUnderNodo.nuevoNodo);\n        })\n        .catch((error) => {\n          this.creandoSubNodo = false;\n          console.log(`Error: ${error}`);\n        });\n    },\n  }\n}\n\nexport var MixinVisualesNodosSolidaridad = {\n  computed: {\n    colorIcono() {\n\n      if (this.esteNodo.estadoDesarrollo === \"completado\") {\n        return \"#2c710c\"\n      }\n      if (this.usuarioResponsableAmplio) {\n        return \"var(--atlasMorado)\";\n      }\n      if (this.usuarioAdministrador) {\n        return \"var(--atlasParent)\";\n      }\n      return \"black\";\n\n    },\n  }\n\n}\n\n\n//Logica para un nodo desplegadado grficamente en la red del atlas\nexport var MixinNodoAtlas = {\n  props: {\n    seleccionadoEsResponsable: Boolean,\n    esteNodo: Object,\n    todosNodos: Array,\n    idNodoSeleccionado: String,\n    requeridoPorSeleccionado: Boolean,\n    requiereAlSeleccionado: Boolean,\n    nodoSeleccionado: Object,\n    menuCx: Boolean,\n    factorZoom: Number,\n    callingPosiciones: Boolean,\n    transparentoso: Boolean,\n    usuarioAdministradorNodoSeleccionado: Boolean,\n    usuarioResponsableNodoSeleccionado: Boolean,\n    usuarioResponsableAmplioNodoSeleccionado: Boolean,\n    childSeleccionado: Boolean,\n    idsNodosDesplegados: Array,\n    nodoParent: Object,\n    idsNodosNeedingFetchMore: Array,\n    transicionarPosicionNodos: Boolean,\n  },\n  data() {\n    return {\n      estiloNombreBase: {\n        minWidth: 80,\n        fontSize: 16,\n        minHeight: 15,\n        padding: 8,\n        borderRadius: 5,\n      },\n      posicion: this.nodoParent\n        ? { x: this.nodoParent.coords.x, y: this.nodoParent.coords.y }\n        : { x: 0, y: 0 },\n      widthBase: 150,\n      heightBase: 100,\n      size: {\n        x: 30,\n        y: 30,\n      },\n      primeraUbicacionCompletada: false,\n    }\n\n  },\n  methods: {\n    toggleDesplegar() {\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_ATLAS_SOLIDARIDAD,\n      });\n      const nuevoCache = JSON.parse(JSON.stringify(cache));\n      const indexN = nuevoCache.yo.atlasSolidaridad.idsNodosDesplegados.indexOf(\n        this.esteNodo.id\n      );\n      if (indexN > -1 != !this.desplegado) {\n        if (indexN === -1) {\n          nuevoCache.yo.atlasSolidaridad.idsNodosDesplegados.push(\n            this.esteNodo.id\n          );\n        } else {\n          nuevoCache.yo.atlasSolidaridad.idsNodosDesplegados.splice(indexN, 1);\n        }\n        store.writeQuery({\n          query: QUERY_DATOS_USUARIO_ATLAS_SOLIDARIDAD,\n          data: nuevoCache,\n        });\n      } else {\n        console.log(`Confusin`);\n      }\n    },   \n  },\n  computed: {\n    waitingFetchChildren() {\n      return this.idsNodosNeedingFetchMore.includes(this.esteNodo.id);\n    },\n    sizeEfectivo() {\n      // const factorAmpliacion = 1.2;\n      // if (this.seleccionado) {\n      //   return {\n      //     x: Math.round(this.size.x * factorAmpliacion),\n      //     y: Math.round(this.size.y * factorAmpliacion),\n      //   };\n      // }\n      return this.size;\n    },\n    estiloPosicion() {\n      if (this.montado) {\n        return {\n          left:\n            (this.posicion.x - this.sizeEfectivo.x / 2) * this.factorZoom +\n            \"px\",\n          top:\n            (this.posicion.y - this.sizeEfectivo.y / 2) * this.factorZoom +\n            \"px\",\n        };\n      }\n      return {\n        top: \"0px\",\n        left: \"0px\",\n      };\n    },\n    estiloZeta() {\n      let valorZ = 0;\n      if (this.arrastrandoNodo > this.umbralArrastreNodo || this.seleccionado) {\n        valorZ = 100;\n      }\n      if (this.menuCx) {\n        valorZ = 200;\n      }\n      return {\n        zIndex: valorZ,\n      };\n    },\n    estiloSize() {\n      return {\n        width: Math.round(this.sizeEfectivo.x * this.factorZoom) + \"px\",\n        height: Math.round(this.sizeEfectivo.y * this.factorZoom) + \"px\",\n        fontSize: Math.round(14 * this.factorZoom) + \"px\",\n      };\n    },\n    // estiloOpacidad() {\n    //   return {\n    //     opacity:\n    //       transparentoso\n    //         ? \"0.2\"\n    //         : \"1\",\n    //   };\n    // },\n    seleccionado() {\n      return (\n        this.idNodoSeleccionado && this.idNodoSeleccionado == this.esteNodo.id\n      );\n    },\n    estiloCartelNombre() {\n      return {\n        minWidth:\n          parseInt(this.estiloNombreBase.minWidth * this.factorZoom) + \"px\",\n        fontSize:\n          parseInt(this.estiloNombreBase.fontSize * this.factorZoom) + \"px\",\n        minHeight:\n          parseInt(this.estiloNombreBase.minHeight * this.factorZoom) + \"px\",\n        padding:\n          parseInt(this.estiloNombreBase.padding * this.factorZoom) + \"px\",\n        borderRadius:\n          parseInt(this.estiloNombreBase.borderRadius * this.factorZoom) + \"px\",\n        // maxHeight: this.seleccionado ? \"\" : \"90%\",\n      };\n    },\n    colorCartelNombre() {\n      var color = \"var(--atlasGris)\";\n      var borde = \"1px solid black\"\n      if (this.usuarioResponsableAmplio) {\n        borde = \"1px solid var(--atlasMorado)\"\n      }\n      if (this.esteNodo.estadoDesarrollo === \"completado\") {\n        color = \"rgb(91 146 66)\";\n        borde = \"1px solid var(--atlasVerde)\";\n      }\n\n      return {\n        backgroundColor: color,\n        border: borde\n      };\n    },\n    parentDeSeleccionado() {\n      if (!this.nodoSeleccionado) return false;\n      if (this.nodoSeleccionado.nodoParent === this.esteNodo.id) return true;\n      return false;\n    },\n    estiloBolita() {\n      var elColor = \"rgba(105, 199, 199, 0.9)\";\n\n      if (this.seleccionado) {\n        elColor = \"var(--atlasNaranja)\";\n      } else if (this.parentDeSeleccionado) {\n        elColor = \"var(--atlasParent)\";\n      }\n\n      var borde = \"\";\n\n      if (this.usuarioResponsable) {\n        borde =\n          Math.round(3 * this.factorZoom) + \"px dotted var(--atlasMorado)\";\n      }\n      if (this.childSeleccionado) {\n        borde =\n          Math.round(3 * this.factorZoom) + \"px solid var(--atlasNaranja)\";\n      }\n\n      return {\n        backgroundColor: elColor,\n        border: borde,\n      };\n    },\n    desplegado() {\n      return this.idsNodosDesplegados.includes(this.esteNodo.id);\n    },\n    estiloTransicion() {\n      const transicion = '';\n      // var transicion='left 0.4s, top 0.4s'\n      // if(this.primeraUbicacionCompletada){\n      //   transicion='left 5s, right 5s'\n      // }\n\n\n      return {\n        transition: transicion\n      }\n\n    },\n    enVentanita() {\n      return this.idNodoPaVentanita && this.idNodoPaVentanita === this.esteNodo.id\n    }\n  },\n  watch: {\n    esteNodo() {\n      this.$set(this.posicion, \"x\", this.esteNodo.coords.x);\n      this.$set(this.posicion, \"y\", this.esteNodo.coords.y);\n    },\n  },\n  mounted() {\n    if (this.esteNodo.nombre === 'Responder preguntas fundamentales') {\n      console.log(`Recien montado, est en ${JSON.stringify(this.posicion)}`);\n    }\n    this.montado = true;\n\n\n    this.$nextTick(() => {\n\n      this.$set(this.posicion, \"x\", this.esteNodo.coords.x);\n      this.$set(this.posicion, \"y\", this.esteNodo.coords.y);\n      if (this.esteNodo.nombre === 'Responder preguntas fundamentales') {\n        console.log(`Ahora est en ${JSON.stringify(this.posicion)}`);\n      }\n\n      setTimeout(() => {\n        this.primeraUbicacionCompletada = true;\n      }, 500)\n    });\n\n\n  },\n\n}"]}]}