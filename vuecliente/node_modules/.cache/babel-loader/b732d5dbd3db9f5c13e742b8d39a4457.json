{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/eslint-loader/index.js??ref--13-0!/home/vida1/webpj/pepepe/vuecliente/src/components/MixinsEventos.js","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/MixinsEventos.js","mtime":1659974906844},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsIGZyb20gIi9ob21lL3ZpZGExL3dlYnBqL3BlcGVwZS92dWVjbGllbnRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90YWdnZWRUZW1wbGF0ZUxpdGVyYWwiOwoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTEoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uKCRpbmZvRXZlbnRvUGVyc29uYWw6IElucHV0Q3JlYXJFdmVudG9QZXJzb25hbCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhckV2ZW50b1BlcnNvbmFsKGluZm9FdmVudG9QZXJzb25hbDokaW5mb0V2ZW50b1BlcnNvbmFsKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5mcmFnRXZlbnRvUGVyc29uYWxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICIsICJcbiAgICAgICAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDExID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTEoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTAoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJG51ZXZvRGF0ZTogRGF0ZSEsICR0aXBvRXZlbnRvOiBTdHJpbmchLCAkaWRFdmVudG86IElEISkge1xuICAgICAgICAgICAgICAgICAgICBzZXREYXRlSW5pY2lvRXZlbnRvSG9sZER1cmF0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgIG51ZXZvRGF0ZTogJG51ZXZvRGF0ZVxuICAgICAgICAgICAgICAgICAgICAgIHRpcG9FdmVudG86ICR0aXBvRXZlbnRvXG4gICAgICAgICAgICAgICAgICAgICAgaWRFdmVudG86ICRpZEV2ZW50b1xuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgLi4uIG9uIEV2ZW50b1BlcnNvbmFse1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcmFyaW9JbmljaW9cbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcmFyaW9GaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAuLi4gb24gRXZlbnRvUHVibGljb3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICBob3JhcmlvSW5pY2lvXG4gICAgICAgICAgICAgICAgICAgICAgICBob3JhcmlvRmluYWxcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDEwID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTAoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0OSgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgICAgICAgIG11dGF0aW9uICgkbnVldm9EYXRlOiBEYXRlISwgJHRpcG9FdmVudG86IFN0cmluZyEsICRpZEV2ZW50bzogSUQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldERhdGVJbmljaW9FdmVudG8oXG4gICAgICAgICAgICAgICAgICAgICAgbnVldm9EYXRlOiAkbnVldm9EYXRlXG4gICAgICAgICAgICAgICAgICAgICAgdGlwb0V2ZW50bzogJHRpcG9FdmVudG9cbiAgICAgICAgICAgICAgICAgICAgICBpZEV2ZW50bzogJGlkRXZlbnRvXG4gICAgICAgICAgICAgICAgICAgICl7XG4gICAgICAgICAgICAgICAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgLi4uIG9uIEV2ZW50b1BlcnNvbmFse1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcmFyaW9JbmljaW9cbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcmFyaW9GaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAuLi4gb24gRXZlbnRvUHVibGljb3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICBob3JhcmlvSW5pY2lvXG4gICAgICAgICAgICAgICAgICAgICAgICBob3JhcmlvRmluYWxcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDkgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q5KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDgoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uICgkbnVldm9EYXRlOiBEYXRlISwgJHRpcG9FdmVudG86IFN0cmluZyEsICRpZEV2ZW50bzogSUQhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXREYXRlRmluYWxFdmVudG8oXG4gICAgICAgICAgICAgICAgICAgICAgICBudWV2b0RhdGU6ICRudWV2b0RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpcG9FdmVudG86ICR0aXBvRXZlbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICBpZEV2ZW50bzogJGlkRXZlbnRvXG4gICAgICAgICAgICAgICAgICAgICAgICApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uIG9uIEV2ZW50b1BlcnNvbmFse1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3JhcmlvSW5pY2lvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvcmFyaW9GaW5hbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi4gb24gRXZlbnRvUHVibGljb3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXJpb0luaWNpb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3JhcmlvRmluYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q4ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0OCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q3KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgIG11dGF0aW9uKCRwZXJpb2RvUmVwZXRpcjogU3RyaW5nLCAkY2FudGlkYWRSZXBldGlyOiBJbnQhLCAkaWRFdmVudG86SUQhLCAkdGlwb0V2ZW50bzpTdHJpbmchKXtcbiAgICAgICAgICAgICAgICAgIHJlcGV0aXJFdmVudG9QZXJpb2RpY2FtZW50ZShwZXJpb2RvUmVwZXRpcjokcGVyaW9kb1JlcGV0aXIsIGNhbnRpZGFkUmVwZXRpcjogJGNhbnRpZGFkUmVwZXRpciwgaWRFdmVudG86ICRpZEV2ZW50bywgdGlwb0V2ZW50bzokdGlwb0V2ZW50byl7XG4gICAgICAgICAgICAgICAgICAgIF9fdHlwZW5hbWVcbiAgICAgICAgICAgICAgICAgICAgLi4ub24gRXZlbnRvUHVibGljb3tcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmZyYWdFdmVudG9QdWJsaWNvXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLi4ub24gRXZlbnRvUGVyc29uYWx7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5mcmFnRXZlbnRvUGVyc29uYWxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgIiwgIlxuICAgICAgICAgICAgICAgICIsICJcbiAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q3ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NygpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q2KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgICAgICBtdXRhdGlvbiAoJG51ZXZvRGF0ZTogRGF0ZSEsICR0aXBvRXZlbnRvOiBTdHJpbmchLCAkaWRFdmVudG86IElEISkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RGF0ZUZpbmFsRXZlbnRvKFxuICAgICAgICAgICAgICAgICAgICAgICAgbnVldm9EYXRlOiAkbnVldm9EYXRlXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXBvRXZlbnRvOiAkdGlwb0V2ZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRFdmVudG86ICRpZEV2ZW50b1xuICAgICAgICAgICAgICAgICAgICAgICAgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX190eXBlbmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLiBvbiBFdmVudG9QZXJzb25hbHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXJpb0luaWNpb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3JhcmlvRmluYWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uIG9uIEV2ZW50b1B1YmxpY297XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvcmFyaW9JbmljaW9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXJpb0ZpbmFsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0NiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDYoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NSgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgICAgICAgIG11dGF0aW9uICgkbnVldm9EYXRlOiBEYXRlISwgJHRpcG9FdmVudG86IFN0cmluZyEsICRpZEV2ZW50bzogSUQhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldERhdGVJbmljaW9FdmVudG9Ib2xkRHVyYXRpb24oXG4gICAgICAgICAgICAgICAgICAgICAgbnVldm9EYXRlOiAkbnVldm9EYXRlXG4gICAgICAgICAgICAgICAgICAgICAgdGlwb0V2ZW50bzogJHRpcG9FdmVudG9cbiAgICAgICAgICAgICAgICAgICAgICBpZEV2ZW50bzogJGlkRXZlbnRvXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgIF9fdHlwZW5hbWVcbiAgICAgICAgICAgICAgICAgICAgICAuLi4gb24gRXZlbnRvUGVyc29uYWx7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXJpb0luaWNpb1xuICAgICAgICAgICAgICAgICAgICAgICAgaG9yYXJpb0ZpbmFsXG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIC4uLiBvbiBFdmVudG9QdWJsaWNve1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcmFyaW9JbmljaW9cbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcmFyaW9GaW5hbFxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0NSA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDUoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NCgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWRFdmVudG86IElEISwgJHRpcG9FdmVudG86U3RyaW5nISwgJG51ZXZvRGVzY3JpcGNpb246IFN0cmluZyEpIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdGFyRGVzY3JpcGNpb25FdmVudG8oXG4gICAgICAgICAgICAgICAgICAgICAgaWRFdmVudG86ICRpZEV2ZW50b1xuICAgICAgICAgICAgICAgICAgICAgIHRpcG9FdmVudG86ICR0aXBvRXZlbnRvXG4gICAgICAgICAgICAgICAgICAgICAgbnVldm9EZXNjcmlwY2lvbjogJG51ZXZvRGVzY3JpcGNpb25cbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfX3R5cGVuYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4gb24gRXZlbnRvUHVibGljb3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLiBvbiBFdmVudG9QZXJzb25hbHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXBjaW9uICBcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0NCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDQoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MygpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWRFdmVudG86IElEISwgJHRpcG9FdmVudG86U3RyaW5nISwgJG51ZXZvTGltaXRlRGVDdXBvczogSW50ISkge1xuICAgICAgICAgICAgICAgICAgICBlZGl0YXJMaW1pdGVEZUN1cG9zRXZlbnRvKFxuICAgICAgICAgICAgICAgICAgICAgIGlkRXZlbnRvOiAkaWRFdmVudG9cbiAgICAgICAgICAgICAgICAgICAgICB0aXBvRXZlbnRvOiR0aXBvRXZlbnRvXG4gICAgICAgICAgICAgICAgICAgICAgbnVldm9MaW1pdGVEZUN1cG9zOiAkbnVldm9MaW1pdGVEZUN1cG9zXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICBsaW1pdGVEZUN1cG9zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MyA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDMoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MigpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgICAgICAgIG11dGF0aW9uICgkaWRFdmVudG86IElEISwgJHRpcG9FdmVudG86U3RyaW5nISwgJG51ZXZvTm9tYnJlOiBTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRhck5vbWJyZUV2ZW50byhcbiAgICAgICAgICAgICAgICAgICAgICBpZEV2ZW50bzogJGlkRXZlbnRvXG4gICAgICAgICAgICAgICAgICAgICAgdGlwb0V2ZW50bzokdGlwb0V2ZW50b1xuICAgICAgICAgICAgICAgICAgICAgIG51ZXZvTm9tYnJlOiAkbnVldm9Ob21icmVcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIF9fdHlwZW5hbWVcbiAgICAgICAgICAgICAgICAgICAgLi4uIG9uIEV2ZW50b1BlcnNvbmFse1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgICAgICBub21icmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAuLi4gb24gRXZlbnRvUHVibGljb3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgICAgICAgICBub21icmVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgICAgICAgbXV0YXRpb24gKCRpZEV2ZW50bzogSUQhLCAkdGlwb0V2ZW50bzpTdHJpbmchKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsaW1pbmFyRXZlbnRvKGlkRXZlbnRvOiAkaWRFdmVudG8sIHRpcG9FdmVudG86JHRpcG9FdmVudG8pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3QgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKaW1wb3J0IHsgZnJhZ21lbnRvRXZlbnRvUHVibGljbywgZnJhZ21lbnRvRXZlbnRvUGVyc29uYWwgfSBmcm9tICIuL3V0aWxpZGFkZXMvZnJhZ3NDYWxlbmRhcmlvIjsKaW1wb3J0IHsgY2hhclByb2hpYmlkb3NOb21icmVDb3NhLCBjaGFyUHJvaGliaWRvc1RleHRvIH0gZnJvbSAiLi9jb25maWdzIjsKaW1wb3J0IGdxbCBmcm9tICJncmFwaHFsLXRhZyI7CnZhciBkaWFzU2VtYW5hID0gWyJEb21pbmdvIiwgIkx1bmVzIiwgIk1hcnRlcyIsICJNaWVyY29sZXMiLCAiSnVldmVzIiwgIlZpZXJuZXMiLCAiU8OhYmFkbyJdOwp2YXIgbWVzZXMgPSBbIkVuZXJvIiwgIkZlYnJlcm8iLCAiTWFyem8iLCAiQWJyaWwiLCAiTWF5byIsICJKdW5pbyIsICJKdWxpbyIsICJBZ29zdG8iLCAiU2VwdGllbWJyZSIsICJPY3R1YnJlIiwgIk5vdmllbWJyZSIsICJEaWNpZW1icmUiXTsKZXhwb3J0IHZhciBNaXhpbkJhc2ljb0V2ZW50b3MgPSB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7fTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB0aXBvRXZlbnRvOiBmdW5jdGlvbiB0aXBvRXZlbnRvKCkgewogICAgICByZXR1cm4gdGhpcy5lc3RlRXZlbnRvLl9fdHlwZW5hbWUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyB0aGlzLmVzdGVFdmVudG8uX190eXBlbmFtZS5zbGljZSgxKTsKICAgIH0sCiAgICBkYXRlSW5pY2lvOiBmdW5jdGlvbiBkYXRlSW5pY2lvKCkgewogICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5lc3RlRXZlbnRvLmhvcmFyaW9JbmljaW8pOwogICAgfSwKICAgIGZlY2hhSW5pY2lvRm9ybWF0ZWFkYTogZnVuY3Rpb24gZmVjaGFJbmljaW9Gb3JtYXRlYWRhKCkgewogICAgICB2YXIgZGF0ZUFjdHVhbFN0cmluZyA9IHRoaXMuZGF0ZUluaWNpby50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgIHJldHVybiBkYXRlQWN0dWFsU3RyaW5nOwogICAgfSwKICAgIGZlY2hhRmluYWxGb3JtYXRlYWRhOiBmdW5jdGlvbiBmZWNoYUZpbmFsRm9ybWF0ZWFkYSgpIHsKICAgICAgdmFyIGRhdGVBY3R1YWxTdHJpbmcgPSB0aGlzLmRhdGVGaW5hbC50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07CiAgICAgIHJldHVybiBkYXRlQWN0dWFsU3RyaW5nOwogICAgfSwKICAgIGRhdGVGaW5hbDogZnVuY3Rpb24gZGF0ZUZpbmFsKCkgewogICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5lc3RlRXZlbnRvLmhvcmFyaW9GaW5hbCk7CiAgICB9LAogICAgaG9yYXJpb0luaWNpb0Zvcm1hdGVhZG86IGZ1bmN0aW9uIGhvcmFyaW9JbmljaW9Gb3JtYXRlYWRvKCkgewogICAgICByZXR1cm4gdGhpcy50aW1lc0xlZ2libGVzLmhvcmFyaW9JbmljaW8uaG9yYXMgKyAiOiIgKyB0aGlzLnRpbWVzTGVnaWJsZXMuaG9yYXJpb0luaWNpby5taW51dG9zOwogICAgfSwKICAgIGhvcmFyaW9GaW5hbEZvcm1hdGVhZG86IGZ1bmN0aW9uIGhvcmFyaW9GaW5hbEZvcm1hdGVhZG8oKSB7CiAgICAgIHJldHVybiB0aGlzLnRpbWVzTGVnaWJsZXMuaG9yYXJpb0ZpbmFsLmhvcmFzICsgIjoiICsgdGhpcy50aW1lc0xlZ2libGVzLmhvcmFyaW9GaW5hbC5taW51dG9zOwogICAgfSwKICAgIGZlY2hhSW5pY2lvTGVnaWJsZTogZnVuY3Rpb24gZmVjaGFJbmljaW9MZWdpYmxlKCkgewogICAgICB2YXIgZGlhU2VtYW5hID0gZGlhc1NlbWFuYVt0aGlzLmRhdGVJbmljaW8uZ2V0RGF5KCldOwogICAgICB2YXIgZGlhTWVzID0gdGhpcy5kYXRlSW5pY2lvLmdldERhdGUoKTsKICAgICAgdmFyIG1lcyA9IG1lc2VzW3RoaXMuZGF0ZUluaWNpby5nZXRNb250aCgpXTsKICAgICAgdmFyIHRleHRvID0gZGlhU2VtYW5hICsgIiAiICsgZGlhTWVzICsgIiBkZSAiICsgbWVzOwogICAgICByZXR1cm4gdGV4dG87CiAgICB9LAogICAgaG9yYUluaWNpb0xlZ2libGU6IGZ1bmN0aW9uIGhvcmFJbmljaW9MZWdpYmxlKCkgewogICAgICB2YXIgaG9yYSA9IHRoaXMuZGF0ZUluaWNpby5nZXRIb3VycygpOwogICAgICB2YXIgbWludXRvcyA9IHRoaXMuZGF0ZUluaWNpby5nZXRNaW51dGVzKCk7CgogICAgICBpZiAoKCcnICsgaG9yYSkubGVuZ3RoIDwgMikgewogICAgICAgIGhvcmEgPSAnMCcgKyBob3JhOwogICAgICB9CgogICAgICBpZiAoKCcnICsgbWludXRvcykubGVuZ3RoIDwgMikgewogICAgICAgIG1pbnV0b3MgPSAnMCcgKyBtaW51dG9zOwogICAgICB9CgogICAgICByZXR1cm4gaG9yYSArICc6JyArIG1pbnV0b3M7CiAgICB9LAogICAgZGF0ZUluaWNpb0xlZ2libGU6IGZ1bmN0aW9uIGRhdGVJbmljaW9MZWdpYmxlKCkgewogICAgICB2YXIgdGV4dG8gPSB0aGlzLmZlY2hhSW5pY2lvTGVnaWJsZSArICIsICIgKyB0aGlzLmhvcmFJbmljaW9MZWdpYmxlOwogICAgICByZXR1cm4gdGV4dG87CiAgICB9LAogICAgZmVjaGFGaW5hbExlZ2libGU6IGZ1bmN0aW9uIGZlY2hhRmluYWxMZWdpYmxlKCkgewogICAgICB2YXIgZGlhU2VtYW5hID0gZGlhc1NlbWFuYVt0aGlzLmRhdGVGaW5hbC5nZXREYXkoKV07CiAgICAgIHZhciBkaWFNZXMgPSB0aGlzLmRhdGVGaW5hbC5nZXREYXRlKCk7CiAgICAgIHZhciBtZXMgPSBtZXNlc1t0aGlzLmRhdGVGaW5hbC5nZXRNb250aCgpXTsKICAgICAgdmFyIHRleHRvID0gZGlhU2VtYW5hICsgIiAiICsgZGlhTWVzICsgIiBkZSAiICsgbWVzOwogICAgICByZXR1cm4gdGV4dG87CiAgICB9LAogICAgaG9yYUZpbmFsTGVnaWJsZTogZnVuY3Rpb24gaG9yYUZpbmFsTGVnaWJsZSgpIHsKICAgICAgdmFyIGhvcmEgPSB0aGlzLmRhdGVGaW5hbC5nZXRIb3VycygpOwogICAgICB2YXIgbWludXRvcyA9IHRoaXMuZGF0ZUZpbmFsLmdldE1pbnV0ZXMoKTsKCiAgICAgIGlmICgoJycgKyBob3JhKS5sZW5ndGggPCAyKSB7CiAgICAgICAgaG9yYSA9ICcwJyArIGhvcmE7CiAgICAgIH0KCiAgICAgIGlmICgoJycgKyBtaW51dG9zKS5sZW5ndGggPCAyKSB7CiAgICAgICAgbWludXRvcyA9ICcwJyArIG1pbnV0b3M7CiAgICAgIH0KCiAgICAgIHJldHVybiBob3JhICsgJzonICsgbWludXRvczsKICAgIH0sCiAgICBkYXRlRmluYWxMZWdpYmxlOiBmdW5jdGlvbiBkYXRlRmluYWxMZWdpYmxlKCkgewogICAgICB2YXIgdGV4dG8gPSB0aGlzLmZlY2hhRmluYWxMZWdpYmxlICsgIiwgIiArIHRoaXMuaG9yYUZpbmFsTGVnaWJsZTsKICAgICAgcmV0dXJuIHRleHRvOwogICAgfSwKICAgIHRpbWVzTGVnaWJsZXM6IGZ1bmN0aW9uIHRpbWVzTGVnaWJsZXMoKSB7CiAgICAgIHZhciBtaWxsaXNIb3lJbmljaW8gPSB0aGlzLm1pbGxpc0luaWNpb0xvY2FsICUgODY0MDAwMDA7CiAgICAgIHZhciBtaWxsaXNIb3lGaW5hbCA9IHRoaXMubWlsbGlzRmluYWxMb2NhbCAlIDg2NDAwMDAwOwogICAgICByZXR1cm4gewogICAgICAgIGhvcmFyaW9JbmljaW86IHsKICAgICAgICAgIGhvcmFzOiBNYXRoLmZsb29yKG1pbGxpc0hveUluaWNpbyAvIDM2MDAwMDApLAogICAgICAgICAgbWludXRvczogbWlsbGlzSG95SW5pY2lvICUgMzYwMDAwMCAvIDYwMDAwCiAgICAgICAgfSwKICAgICAgICBob3JhcmlvRmluYWw6IHsKICAgICAgICAgIGhvcmFzOiBNYXRoLmZsb29yKG1pbGxpc0hveUZpbmFsIC8gMzYwMDAwMCksCiAgICAgICAgICBtaW51dG9zOiBtaWxsaXNIb3lGaW5hbCAlIDM2MDAwMDAgLyA2MDAwMAogICAgICAgIH0KICAgICAgfTsKICAgIH0sCiAgICBtaWxsaXNGaW5hbExvY2FsOiBmdW5jdGlvbiBtaWxsaXNGaW5hbExvY2FsKCkgewogICAgICB2YXIgZmVjaGEgPSBuZXcgRGF0ZSh0aGlzLmVzdGVFdmVudG8uaG9yYXJpb0ZpbmFsKTsKICAgICAgdmFyIG1pbGxpcyA9IGZlY2hhLmdldFRpbWUoKTsKICAgICAgdmFyIG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDsKICAgICAgcmV0dXJuIG1pbGxpcyAtIG9mZnNldDsKICAgIH0sCiAgICBtaWxsaXNJbmljaW9Mb2NhbDogZnVuY3Rpb24gbWlsbGlzSW5pY2lvTG9jYWwoKSB7CiAgICAgIHZhciBmZWNoYSA9IG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvSW5pY2lvKTsKICAgICAgdmFyIG1pbGxpcyA9IGZlY2hhLmdldFRpbWUoKTsKICAgICAgdmFyIG9mZnNldCA9IGZlY2hhLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MDAwMDsKICAgICAgcmV0dXJuIG1pbGxpcyAtIG9mZnNldDsKICAgIH0sCiAgICBkdXJhY2lvbk1pbnV0b3M6IGZ1bmN0aW9uIGR1cmFjaW9uTWludXRvcygpIHsKICAgICAgcmV0dXJuIE1hdGgucm91bmQoKG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvRmluYWwpLmdldFRpbWUoKSAtIG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvSW5pY2lvKS5nZXRUaW1lKCkpIC8gNjAwMDApOwogICAgfSwKICAgIGR1cmFjaW9uTGVnaWJsZTogZnVuY3Rpb24gZHVyYWNpb25MZWdpYmxlKCkgewogICAgICB2YXIgZGlhcyA9IE1hdGguZmxvb3IodGhpcy5kdXJhY2lvbk1pbnV0b3MgLyAxNDQwKTsKICAgICAgdmFyIGhvcmFzID0gTWF0aC5mbG9vcigodGhpcy5kdXJhY2lvbk1pbnV0b3MgLSBkaWFzICogMTQ0MCkgLyA2MCk7CiAgICAgIHZhciBtaW51dG9zID0gdGhpcy5kdXJhY2lvbk1pbnV0b3MgLSBkaWFzICogMTQ0MCAtIGhvcmFzICogNjA7CiAgICAgIHZhciB0ZXh0byA9ICIiOwoKICAgICAgaWYgKG1pbnV0b3MgPiAwIHx8IHRoaXMuZHVyYWNpb25NaW51dG9zID09PSAwKSB7CiAgICAgICAgdGV4dG8gPSBtaW51dG9zICsgIm1pbiI7CiAgICAgIH0KCiAgICAgIGlmIChob3JhcyA+IDApIHsKICAgICAgICBpZiAodGV4dG8ubGVuZ3RoID4gMCkgewogICAgICAgICAgdGV4dG8gPSAiLCAiICsgdGV4dG87CiAgICAgICAgfQoKICAgICAgICB0ZXh0byA9IGhvcmFzICsgImgiICsgdGV4dG87CiAgICAgIH0KCiAgICAgIGlmIChkaWFzID4gMCkgewogICAgICAgIGlmICh0ZXh0by5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0ZXh0byA9ICIsICIgKyB0ZXh0bzsKICAgICAgICB9CgogICAgICAgIHRleHRvID0gZGlhcyArICJkaWFzIiArIHRleHRvOwogICAgICB9CgogICAgICByZXR1cm4gdGV4dG87CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBlbGltaW5hcnNlOiBmdW5jdGlvbiBlbGltaW5hcnNlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCFjb25maXJtKCLCv0NvbmZpcm1hciBsYSBlbGltaW5hY2nDs24gZGUgZXN0ZSBldmVudG8/IChFc3RhIGFjY2nDs24gbm8gcHVlZGUgZGVzaGFjZXJzZSkiKSkgcmV0dXJuOwoKICAgICAgaWYgKCF0aGlzLmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvUHJvZmUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZWxpbWluYW5kb3NlID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZEV2ZW50bzogdGhpcy5lc3RlRXZlbnRvLmlkLAogICAgICAgICAgdGlwb0V2ZW50bzogdGhpcy50aXBvRXZlbnRvCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy4kZW1pdCgibWVFbGltaW5lIik7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogIi5jb25jYXQoZXJyb3IpKTsKICAgICAgfSk7CiAgICB9CiAgfQp9OwpleHBvcnQgdmFyIE1peGluQmFzaWNvRXZlbnRvc1B1YmxpY29zID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wdXRlZDogewogICAgYWRtaW5pc3RyYWRvcjogZnVuY3Rpb24gYWRtaW5pc3RyYWRvcigpIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9Mb2dlYWRvKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0aGlzLnVzdWFyaW8uaWQgPT09IHRoaXMuZXN0ZUV2ZW50by5pZEFkbWluaXN0cmFkb3I7CiAgICB9CiAgfQp9OwpleHBvcnQgdmFyIE1peGluQmFzaWNvRXZlbnRvc1BlcnNvbmFsZXMgPSB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7fTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBhZG1pbmlzdHJhZG9yOiBmdW5jdGlvbiBhZG1pbmlzdHJhZG9yKCkgewogICAgICBpZiAoIXRoaXMudXN1YXJpb0xvZ2VhZG8pIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRoaXMudXN1YXJpby5pZCA9PT0gdGhpcy5lc3RlRXZlbnRvLmlkUGVyc29uYTsKICAgIH0KICB9Cn07CmV4cG9ydCB2YXIgTWl4aW5FZGljaW9uRXZlbnRvcyA9IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbnVldm9Ob21icmU6ICJOdWV2byBub21icmUiLAogICAgICBlZGl0YW5kb05vbWJyZTogZmFsc2UsCiAgICAgIGVudmlhbmRvTnVldm9Ob21icmU6IGZhbHNlLAogICAgICBudWV2b0Rlc2NyaXBjaW9uOiAiTnVldmEgZGVzY3JpcGNpb24iLAogICAgICBlZGl0YW5kb0Rlc2NyaXBjaW9uOiBmYWxzZSwKICAgICAgZW52aWFuZG9OdWV2b0Rlc2NyaXBjaW9uOiBmYWxzZSwKICAgICAgZWRpdGFuZG9GZWNoYUluaWNpbzogZmFsc2UsCiAgICAgIGVkaXRhbmRvSG9yYUluaWNpbzogZmFsc2UsCiAgICAgIG51ZXZvRHVyYWNpb246IG51bGwsCiAgICAgIGVudmlhbmRvTnVldm9EYXRlSW5pY2lvOiBmYWxzZSwKICAgICAgZW52aWFuZG9OdWV2b0RhdGVGaW5hbDogZmFsc2UsCiAgICAgIGVudmlhbmRvSG9yYXJpb3M6IGZhbHNlLAogICAgICBlbnZpYW5kb1NvbWVIb3JhcmlvOiBmYWxzZSwKICAgICAgbnVldm9MaW1pdGVEZUN1cG9zOiBudWxsLAogICAgICBlZGl0YW5kb0xpbWl0ZURlQ3Vwb3M6IGZhbHNlLAogICAgICBlbnZpYW5kb051ZXZvTGltaXRlRGVDdXBvczogZmFsc2UsCiAgICAgIG1pblJlcGV0aXI6IDEsCiAgICAgIG1heFJlcGV0aXI6IDUyLAogICAgICBlbnZpYW5kb1F1ZXJ5UmVwZXRpcjogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBndWFyZGFyTnVldm9Ob21icmU6IGZ1bmN0aW9uIGd1YXJkYXJOdWV2b05vbWJyZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLm51ZXZvTm9tYnJlID0gdGhpcy4kcmVmcy5pbnB1dE51ZXZvTm9tYnJlLnZhbHVlOwoKICAgICAgaWYgKHRoaXMubnVldm9Ob21icmVJbGVnYWwpIHsKICAgICAgICBjb25zb2xlLmxvZygiTm8gZW52aWFkbyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubnVldm9Ob21icmUgPT0gdGhpcy5lc3RlRXZlbnRvLm5vbWJyZSkgewogICAgICAgIHRoaXMuZWRpdGFuZG9Ob21icmUgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJndWFyZGFuZG8gbnVldm8gbm9tYnJlIik7CiAgICAgIHRoaXMuZW52aWFuZG9OdWV2b05vbWJyZSA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0MigpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkRXZlbnRvOiB0aGlzLmVzdGVFdmVudG8uaWQsCiAgICAgICAgICB0aXBvRXZlbnRvOiB0aGlzLnRpcG9FdmVudG8sCiAgICAgICAgICBudWV2b05vbWJyZTogdGhpcy5udWV2b05vbWJyZQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLmVudmlhbmRvTnVldm9Ob21icmUgPSBmYWxzZTsKICAgICAgICBfdGhpczIuZWRpdGFuZG9Ob21icmUgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMyLmVudmlhbmRvTnVldm9Ob21icmUgPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3IuIEUgOiIuY29uY2F0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGd1YXJkYXJOdWV2b0xpbWl0ZURlQ3Vwb3M6IGZ1bmN0aW9uIGd1YXJkYXJOdWV2b0xpbWl0ZURlQ3Vwb3MoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy5udWV2b0xpbWl0ZURlQ3Vwb3MgPSB0aGlzLiRyZWZzLmlucHV0TnVldm9MaW1pdGVEZUN1cG9zLnZhbHVlOwoKICAgICAgaWYgKHRoaXMubnVldm9MaW1pdGVEZUN1cG9zSWxlZ2FsKSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGVudmlhZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm51ZXZvTGltaXRlRGVDdXBvcyA9PSB0aGlzLmVzdGVFdmVudG8ubGltaXRlRGVDdXBvcykgewogICAgICAgIHRoaXMuZWRpdGFuZG9MaW1pdGVEZUN1cG9zID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZygiZ3VhcmRhbmRvIG51ZXZvIGxpbWl0ZSBkZSBjdXBvcyIpOwogICAgICB0aGlzLmVudmlhbmRvbnVldm9MaW1pdGVEZUN1cG9zID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QzKCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWRFdmVudG86IHRoaXMuZXN0ZUV2ZW50by5pZCwKICAgICAgICAgIHRpcG9FdmVudG86IHRoaXMudGlwb0V2ZW50bywKICAgICAgICAgIG51ZXZvTGltaXRlRGVDdXBvczogcGFyc2VJbnQodGhpcy5udWV2b0xpbWl0ZURlQ3Vwb3MpCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuZW52aWFuZG9OdWV2b0xpbWl0ZURlQ3Vwb3MgPSBmYWxzZTsKICAgICAgICBfdGhpczMuZWRpdGFuZG9MaW1pdGVEZUN1cG9zID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMy5lbnZpYW5kb051ZXZvTGltaXRlRGVDdXBvcyA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvci4gRSA6Ii5jb25jYXQoZXJyb3IpKTsKICAgICAgfSk7CiAgICB9LAogICAgZ3VhcmRhck51ZXZvRGVzY3JpcGNpb246IGZ1bmN0aW9uIGd1YXJkYXJOdWV2b0Rlc2NyaXBjaW9uKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLm51ZXZvRGVzY3JpcGNpb25JbGVnYWwpIHsKICAgICAgICBjb25zb2xlLmxvZygiTm8gZW52aWFkbyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubnVldm9EZXNjcmlwY2lvbiA9PSB0aGlzLmVzdGVFdmVudG8uZGVzY3JpcGNpb24pIHsKICAgICAgICB0aGlzLmVkaXRhbmRvRGVzY3JpcGNpb24gPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJndWFyZGFuZG8gbnVldm8gZGVzY3JpcGNpb24iKTsKICAgICAgdGhpcy5lbnZpYW5kb051ZXZvRGVzY3JpcGNpb24gPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDQoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZEV2ZW50bzogdGhpcy5lc3RlRXZlbnRvLmlkLAogICAgICAgICAgdGlwb0V2ZW50bzogdGhpcy50aXBvRXZlbnRvLAogICAgICAgICAgbnVldm9EZXNjcmlwY2lvbjogdGhpcy5udWV2b0Rlc2NyaXBjaW9uCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuZW52aWFuZG9OdWV2b0Rlc2NyaXBjaW9uID0gZmFsc2U7CiAgICAgICAgX3RoaXM0LmVkaXRhbmRvRGVzY3JpcGNpb24gPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXM0LmVudmlhbmRvTnVldm9EZXNjcmlwY2lvbiA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvci4gRSA6Ii5jb25jYXQoZXJyb3IpKTsKICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlRWRpdGFuZG9EZXNjcmlwY2lvbjogZnVuY3Rpb24gdG9nZ2xlRWRpdGFuZG9EZXNjcmlwY2lvbigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuYWRtaW5pc3RyYWRvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kcmVmcy5pbnB1dE51ZXZvRGVzY3JpcGNpb24uc3R5bGUuaGVpZ2h0ID0gdGhpcy4kcmVmcy5kZXNjcmlwY2lvbi5vZmZzZXRIZWlnaHQgKyAicHgiOwogICAgICB0aGlzLmVkaXRhbmRvRGVzY3JpcGNpb24gPSAhdGhpcy5lZGl0YW5kb0Rlc2NyaXBjaW9uOwogICAgICB0aGlzLm51ZXZvRGVzY3JpcGNpb24gPSB0aGlzLmVzdGVFdmVudG8uZGVzY3JpcGNpb247CgogICAgICBpZiAodGhpcy5lZGl0YW5kb0Rlc2NyaXBjaW9uKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM1LiRyZWZzLmlucHV0TnVldm9EZXNjcmlwY2lvbi5mb2N1cygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlRWRpdGFuZG9Ob21icmU6IGZ1bmN0aW9uIHRvZ2dsZUVkaXRhbmRvTm9tYnJlKGUpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5hZG1pbmlzdHJhZG9yKSB7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB0aGlzLmVkaXRhbmRvTm9tYnJlID0gdHJ1ZTsKICAgICAgICB0aGlzLm51ZXZvTm9tYnJlID0gdGhpcy5lc3RlRXZlbnRvLm5vbWJyZTsKICAgICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczYuJHJlZnMuaW5wdXROdWV2b05vbWJyZS5mb2N1cygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlRWRpdGFuZG9MaW1pdGVEZUN1cG9zOiBmdW5jdGlvbiB0b2dnbGVFZGl0YW5kb0xpbWl0ZURlQ3Vwb3MoZSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLmFkbWluaXN0cmFkb3IpIHsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgIHRoaXMuZWRpdGFuZG9MaW1pdGVEZUN1cG9zID0gdHJ1ZTsKICAgICAgICB0aGlzLm51ZXZvTGltaXRlRGVDdXBvcyA9IHRoaXMuZXN0ZUV2ZW50by5saW1pdGVEZUN1cG9zOwogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNy4kcmVmcy5pbnB1dE51ZXZvTGltaXRlRGVDdXBvcy5mb2N1cygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAga2V5ZG93bklucHV0TnVldm9Ob21icmU6IGZ1bmN0aW9uIGtleWRvd25JbnB1dE51ZXZvTm9tYnJlKGUpIHsKICAgICAgaWYgKGUua2V5ID09PSAiRXNjYXBlIikgewogICAgICAgIHRoaXMuJHJlZnMuaW5wdXROdWV2b05vbWJyZS5ibHVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRIb3JhRmluYWw6IGZ1bmN0aW9uIHNldEhvcmFGaW5hbCgpIHsKICAgICAgdmFyIHRleHRvQWN0dWFsID0gImhoOm1tIjsKCiAgICAgIGlmICh0aGlzLmhvcmFGaW5hbExlZ2libGUpIHsKICAgICAgICB0ZXh0b0FjdHVhbCA9IHRoaXMuaG9yYUZpbmFsTGVnaWJsZTsKICAgICAgfQoKICAgICAgdmFyIG51ZXZhSG9yYUZpbmFsSW5wdXQgPSBwcm9tcHQoIkludHJvZHVjaXIgbnVldmEgaG9yYSBkZSBmaW5hbGl6YWNpw7NuIiwgdGV4dG9BY3R1YWwpOwogICAgICB2YXIgaW5kZXhQdW50b3MgPSBudWV2YUhvcmFGaW5hbElucHV0LmluZGV4T2YoIjoiKTsKICAgICAgdmFyIGhvcmFzSW5wdXQgPSBwYXJzZUludChudWV2YUhvcmFGaW5hbElucHV0LnN1YnN0cigwLCBpbmRleFB1bnRvcykpOwogICAgICB2YXIgbWludXRvc0lucHV0ID0gcGFyc2VJbnQobnVldmFIb3JhRmluYWxJbnB1dC5zdWJzdHIoaW5kZXhQdW50b3MgKyAxKSk7CgogICAgICBpZiAoaG9yYXNJbnB1dCAhPSBudWxsICYmIG1pbnV0b3NJbnB1dCAhPSBudWxsICYmIGhvcmFzSW5wdXQgPj0gMCAmJiBob3Jhc0lucHV0IDwgMjQgJiYgbWludXRvc0lucHV0ID49IDAgJiYgbWludXRvc0lucHV0IDwgNjApIHsKICAgICAgICB2YXIgbnVldmFEYXRlRmluYWwgPSBuZXcgRGF0ZSh0aGlzLmRpYUNhbGVuZGFyaW9PdmVyLmRhdGUpOwogICAgICAgIG51ZXZhRGF0ZUZpbmFsLnNldEhvdXJzKGhvcmFzSW5wdXQpOwogICAgICAgIG51ZXZhRGF0ZUZpbmFsLnNldE1pbnV0ZXMobWludXRvc0lucHV0KTsKICAgICAgICBjb25zb2xlLmxvZygiU2UgZmlqYXLDoSBsYSBudWV2YSBob3JhIGRlIGZpbmFsIGVuICIgKyBudWV2YURhdGVGaW5hbCk7CiAgICAgICAgdGhpcy5lbnZpYXJOdWV2b0hvcmFyaW9GaW5hbChudWV2YURhdGVGaW5hbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIkhvcmEgaW52w6FsaWRhIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgc2V0SG9yYUluaWNpbzogZnVuY3Rpb24gc2V0SG9yYUluaWNpbygpIHsKICAgICAgdmFyIHRleHRvQWN0dWFsID0gImhoOm1tIjsKCiAgICAgIGlmICh0aGlzLmhvcmFJbmljaW9MZWdpYmxlKSB7CiAgICAgICAgdGV4dG9BY3R1YWwgPSB0aGlzLmhvcmFJbmljaW9MZWdpYmxlOwogICAgICB9CgogICAgICB2YXIgbnVldmFIb3JhSW5pY2lvSW5wdXQgPSBwcm9tcHQoIkludHJvZHVjaXIgbnVldmEgaG9yYSBkZSBpbmljaW8iLCB0ZXh0b0FjdHVhbCk7CiAgICAgIHZhciBpbmRleFB1bnRvcyA9IG51ZXZhSG9yYUluaWNpb0lucHV0LmluZGV4T2YoIjoiKTsKICAgICAgdmFyIGhvcmFzSW5wdXQgPSBwYXJzZUludChudWV2YUhvcmFJbmljaW9JbnB1dC5zdWJzdHIoMCwgaW5kZXhQdW50b3MpKTsKICAgICAgdmFyIG1pbnV0b3NJbnB1dCA9IHBhcnNlSW50KG51ZXZhSG9yYUluaWNpb0lucHV0LnN1YnN0cihpbmRleFB1bnRvcyArIDEpKTsKCiAgICAgIGlmIChob3Jhc0lucHV0ICE9IG51bGwgJiYgbWludXRvc0lucHV0ICE9IG51bGwgJiYgaG9yYXNJbnB1dCA+PSAwICYmIGhvcmFzSW5wdXQgPCAyNCAmJiBtaW51dG9zSW5wdXQgPj0gMCAmJiBtaW51dG9zSW5wdXQgPCA2MCkgewogICAgICAgIHZhciBudWV2YURhdGVJbmljaW8gPSBuZXcgRGF0ZSh0aGlzLmRpYUNhbGVuZGFyaW9PdmVyLmRhdGUpOwogICAgICAgIG51ZXZhRGF0ZUluaWNpby5zZXRIb3Vycyhob3Jhc0lucHV0KTsKICAgICAgICBudWV2YURhdGVJbmljaW8uc2V0TWludXRlcyhtaW51dG9zSW5wdXQpOwogICAgICAgIGNvbnNvbGUubG9nKCJTZSBmaWphcsOhIGxhIG51ZXZhIGhvcmEgZGUgaW5pY2lvIGVuICIgKyBudWV2YURhdGVJbmljaW8pOwogICAgICAgIHRoaXMuZW52aWFyTnVldmFEYXRlSW5pY2lvSG9sZER1cmF0aW9uKG51ZXZhRGF0ZUluaWNpbyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIkhvcmEgaW52w6FsaWRhIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9LAogICAgZW52aWFyTnVldmFEYXRlSW5pY2lvSG9sZER1cmF0aW9uOiBmdW5jdGlvbiBlbnZpYXJOdWV2YURhdGVJbmljaW9Ib2xkRHVyYXRpb24obnVldmFEYXRlSW5pY2lvKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdGhpcy5lbnZpYW5kb051ZXZvRGF0ZUluaWNpbyA9IHRydWU7CiAgICAgIHRoaXMuZW52aWFuZG9Tb21lSG9yYXJpbyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0NSgpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIG51ZXZvRGF0ZTogbnVldmFEYXRlSW5pY2lvLAogICAgICAgICAgdGlwb0V2ZW50bzogdGhpcy50aXBvRXZlbnRvLAogICAgICAgICAgaWRFdmVudG86IHRoaXMuZXN0ZUV2ZW50by5pZAogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM4LiRlbWl0KCJldmVudG9DYW1iaW9GZWNoYSIsIF90aGlzOC5lc3RlRXZlbnRvKTsKCiAgICAgICAgX3RoaXM4LmVudmlhbmRvU29tZUhvcmFyaW8gPSBmYWxzZTsKICAgICAgICBfdGhpczguZW52aWFuZG9OdWV2b0RhdGVJbmljaW8gPSBmYWxzZTsKICAgICAgICBfdGhpczguZWRpdGFuZG9GZWNoYUluaWNpbyA9IGZhbHNlOwogICAgICAgIF90aGlzOC5lZGl0YW5kb0hvcmFJbmljaW8gPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiLmNvbmNhdChlcnJvcikpOwogICAgICAgIF90aGlzOC5lbnZpYW5kb051ZXZvRGF0ZUluaWNpbyA9IGZhbHNlOwogICAgICAgIF90aGlzOC5lbnZpYW5kb1NvbWVIb3JhcmlvID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGVudmlhck51ZXZvSG9yYXJpb0ZpbmFsOiBmdW5jdGlvbiBlbnZpYXJOdWV2b0hvcmFyaW9GaW5hbChkYXRlRmluYWwpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICB0aGlzLmVudmlhbmRvTnVldm9EYXRlRmluYWwgPSB0cnVlOwogICAgICB0aGlzLmVudmlhbmRvU29tZUhvcmFyaW8gPSB0cnVlOwogICAgICBjb25zb2xlLmxvZygiRW52aWFuZG8gbnVldm8gaG9yYXJpbyBmaW5hbDogIi5jb25jYXQoZGF0ZUZpbmFsKSk7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0NigpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIG51ZXZvRGF0ZTogZGF0ZUZpbmFsLAogICAgICAgICAgdGlwb0V2ZW50bzogdGhpcy5lc3RlRXZlbnRvLl9fdHlwZW5hbWUuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyB0aGlzLmVzdGVFdmVudG8uX190eXBlbmFtZS5zbGljZSgxKSwKICAgICAgICAgIGlkRXZlbnRvOiB0aGlzLmVzdGVFdmVudG8uaWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzOS5lbnZpYW5kb051ZXZvRGF0ZUZpbmFsID0gZmFsc2U7CiAgICAgICAgX3RoaXM5LmVudmlhbmRvU29tZUhvcmFyaW8gPSBmYWxzZTsKICAgICAgICBfdGhpczkuZWRpdGFuZG9EdXJhY2lvbiA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgICAgX3RoaXM5LmVudmlhbmRvTnVldm9EYXRlRmluYWwgPSBmYWxzZTsKICAgICAgICBfdGhpczkuZW52aWFuZG9Tb21lSG9yYXJpbyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBpbmljaWFyRWRpY2lvbkR1cmFjaW9uOiBmdW5jdGlvbiBpbmljaWFyRWRpY2lvbkR1cmFjaW9uKCkgewogICAgICB0aGlzLm51ZXZvRHVyYWNpb24gPSB0aGlzLmVzdGVFdmVudG8uaG9yYXJpb0ZpbmFsIC0gdGhpcy5lc3RlRXZlbnRvLmhvcmFyaW9JbmljaW87CiAgICAgIHRoaXMuZWRpdGFuZG9EdXJhY2lvbiA9IHRydWU7CiAgICB9LAogICAgcmVwZXRpckV2ZW50bzogZnVuY3Rpb24gcmVwZXRpckV2ZW50byhjYW50aWRhZFJlcGV0aXIsIHBlcmlvZG9SZXBldGlyKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIGlmICghdGhpcy51c3VhcmlvU3VwZXJhZG1pbmlzdHJhZG9yICYmICF0aGlzLmFkbWluaXN0cmFkb3IpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNhbnRpZGFkUmVwZXRpciA9IHBhcnNlSW50KGNhbnRpZGFkUmVwZXRpcik7CgogICAgICBpZiAoY2FudGlkYWRSZXBldGlyIDwgdGhpcy5taW5SZXBldGlyIHx8IGNhbnRpZGFkUmVwZXRpciA+IHRoaXMubWF4UmVwZXRpcikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc29sZS5sb2coIlNlIGhhcmEgcXVlcnkgZGUgcmVwZXRpciBlc3RlIGV2ZW50byAiLmNvbmNhdChjYW50aWRhZFJlcGV0aXIsICIgdmVjZXMgIikuY29uY2F0KHBlcmlvZG9SZXBldGlyKSk7CiAgICAgIHRoaXMuZW52aWFuZG9RdWVyeVJlcGV0aXIgPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDcoKSwgZnJhZ21lbnRvRXZlbnRvUHVibGljbywgZnJhZ21lbnRvRXZlbnRvUGVyc29uYWwpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgcGVyaW9kb1JlcGV0aXI6IHBlcmlvZG9SZXBldGlyLAogICAgICAgICAgY2FudGlkYWRSZXBldGlyOiBjYW50aWRhZFJlcGV0aXIsCiAgICAgICAgICBpZEV2ZW50bzogdGhpcy5lc3RlRXZlbnRvLmlkLAogICAgICAgICAgdGlwb0V2ZW50bzogdGhpcy50aXBvRXZlbnRvCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIHJlcGV0aXJFdmVudG9QZXJpb2RpY2FtZW50ZSA9IF9yZWYuZGF0YS5yZXBldGlyRXZlbnRvUGVyaW9kaWNhbWVudGU7CgogICAgICAgIGlmIChyZXBldGlyRXZlbnRvUGVyaW9kaWNhbWVudGUpIHsKICAgICAgICAgIF90aGlzMTAuJGVtaXQoJ21lUmVwZXRpUGVyaW9kaWNhbWVudGUnLCByZXBldGlyRXZlbnRvUGVyaW9kaWNhbWVudGUpOwoKICAgICAgICAgIF90aGlzMTAubW9zdHJhbmRvWm9uYVJlcGV0aXIgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIF90aGlzMTAuZW52aWFuZG9RdWVyeVJlcGV0aXIgPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiLmNvbmNhdChlcnJvcikpOwogICAgICAgIF90aGlzMTAuZW52aWFuZG9RdWVyeVJlcGV0aXIgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbnVldm9Ob21icmVJbGVnYWw6IGZ1bmN0aW9uIG51ZXZvTm9tYnJlSWxlZ2FsKCkgewogICAgICBpZiAodGhpcy5udWV2b05vbWJyZS5sZW5ndGggPCAxKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIGlmIChjaGFyUHJvaGliaWRvc05vbWJyZUNvc2EudGVzdCh0aGlzLm51ZXZvTm9tYnJlKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgbnVldm9EZXNjcmlwY2lvbklsZWdhbDogZnVuY3Rpb24gbnVldm9EZXNjcmlwY2lvbklsZWdhbCgpIHsKICAgICAgaWYgKCF0aGlzLm51ZXZvRGVzY3JpcGNpb24gfHwgdGhpcy5udWV2b0Rlc2NyaXBjaW9uLmxlbmd0aCA8IDEpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKGNoYXJQcm9oaWJpZG9zVGV4dG8udGVzdCh0aGlzLm51ZXZvRGVzY3JpcGNpb24pKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBudWV2b0xpbWl0ZURlQ3Vwb3NJbGVnYWw6IGZ1bmN0aW9uIG51ZXZvTGltaXRlRGVDdXBvc0lsZWdhbCgpIHsKICAgICAgaWYgKCF0aGlzLm51ZXZvTGltaXRlRGVDdXBvcyB8fCB0aGlzLm51ZXZvTGltaXRlRGVDdXBvcyA8IDEpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG1vc3RyYW5kbzogZnVuY3Rpb24gbW9zdHJhbmRvKF9tb3N0cmFuZG8pIHsKICAgICAgaWYgKF9tb3N0cmFuZG8gIT0gImRlc2NyaXBjaW9uIikgdGhpcy5lZGl0YW5kb0Rlc2NyaXBjaW9uID0gZmFsc2U7CgogICAgICBpZiAoX21vc3RyYW5kbyA9PT0gImRlc2NyaXBjaW9uIikgewogICAgICAgIGlmICghdGhpcy5lc3RlRXZlbnRvLmRlc2NyaXBjaW9uIHx8IHRoaXMuZXN0ZUV2ZW50by5kZXNjcmlwY2lvbi5sZW5ndGggPCAxKSB7CiAgICAgICAgICBpZiAoIXRoaXMuZWRpdGFuZG9EZXNjcmlwY2lvbikgewogICAgICAgICAgICB0aGlzLnRvZ2dsZUVkaXRhbmRvRGVzY3JpcGNpb24oKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07CmV4cG9ydCB2YXIgTWl4aW5FZGljaW9uRXZlbnRvc1B1YmxpY29zID0gewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBtZXRob2RzOiB7fQp9OwpleHBvcnQgdmFyIE1peGluRXZlbnRvQ2FsZW5kYXJpbyA9IHsKICBwcm9wczogewogICAgaWRFdmVudG9TZWxlY2Npb25hZG86IFN0cmluZywKICAgIGVzdGVFdmVudG86IE9iamVjdCwKICAgIGhvcmFQeDogTnVtYmVyLAogICAgc2VsZWNjaW9uYWRvOiBCb29sZWFuLAogICAgaW5mb09mZnNldDogT2JqZWN0LAogICAgZGlhQ2FsZW5kYXJpb092ZXI6IE9iamVjdCwKICAgIGVuZmFzaXM6IFN0cmluZywKICAgIGlkVXN1YXJpb1RhcmdldDogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWxpbWluYW5kb3NlOiBmYWxzZSwKICAgICAgcmVjb2dpZG86IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGR1cmFjaW9uTWludXRvczogZnVuY3Rpb24gZHVyYWNpb25NaW51dG9zKCkgewogICAgICByZXR1cm4gKHRoaXMuZGF0ZUZpbmFsLmdldFRpbWUoKSAtIHRoaXMuZGF0ZUluaWNpby5nZXRUaW1lKCkpIC8gNjAwMDA7CiAgICB9LAogICAgZXN0aWxvU2l6ZTogZnVuY3Rpb24gZXN0aWxvU2l6ZSgpIHsKICAgICAgdmFyIGFuY2hvUHggPSB0aGlzLmR1cmFjaW9uTWludXRvcyAvIDYwICogdGhpcy5ob3JhUHg7CiAgICAgIHJldHVybiB7CiAgICAgICAgd2lkdGg6IGFuY2hvUHggKyAicHgiCiAgICAgIH07CiAgICB9LAogICAgZXN0aWxvUG9zOiBmdW5jdGlvbiBlc3RpbG9Qb3MoKSB7CiAgICAgIHZhciBtaWxsaXNEaWEgPSB0aGlzLmRhdGVJbmljaW8uZ2V0SG91cnMoKSAqIDM2MDAwMDAgKyB0aGlzLmRhdGVJbmljaW8uZ2V0TWludXRlcygpICogNjAwMDA7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGVmdDogbWlsbGlzRGlhIC8gMzYwMDAwMCAqIHRoaXMuaG9yYVB4ICsgInB4IiwKICAgICAgICB0b3A6IHRoaXMuaW5mb09mZnNldCA/IHRoaXMuaW5mb09mZnNldC50b3AgKyAncHgnIDogMCArICJweCIKICAgICAgfTsKICAgIH0sCiAgICBlc3RpbG9aOiBmdW5jdGlvbiBlc3RpbG9aKCkgewogICAgICByZXR1cm4gewogICAgICAgIHpJbmRleDogdGhpcy5zZWxlY2Npb25hZG8gPyAxMCA6IDAKICAgICAgfTsKICAgIH0sCiAgICBjbGFzZU9mZnNldDogZnVuY3Rpb24gY2xhc2VPZmZzZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLmluZm9PZmZzZXQuY2xhc2U7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7fSwKICB3YXRjaDogewogICAgZGF0ZUluaWNpbzogZnVuY3Rpb24gZGF0ZUluaWNpbyhfZGF0ZUluaWNpbykgewogICAgICBjb25zb2xlLmxvZygiQ2FtYmlvIGRlIGRhdGUgaW5pY2lvLiBBaG9yYSBpbmljaW8gZW4gIi5jb25jYXQoX2RhdGVJbmljaW8pKTsKCiAgICAgIGlmIChfZGF0ZUluaWNpbyA8IHRoaXMuZGlhQ2FsZW5kYXJpb092ZXIuZGF0ZSB8fCBfZGF0ZUluaWNpby5nZXRUaW1lKCkgPiB0aGlzLmRpYUNhbGVuZGFyaW9PdmVyLmRhdGUuZ2V0VGltZSgpICsgODY0MDAwMDApIHsKICAgICAgICBjb25zb2xlLmxvZygiIi5jb25jYXQodGhpcy5lc3RlRXZlbnRvLm5vbWJyZSwgIiBkaWNlOiBNZSBjYW1iaWFyb24gZGUgZFx4RURhIikpOwogICAgICAgIHRoaXMuJGVtaXQoIm1lQ2FtYmlhcm9uRGlhIiwgdGhpcy5lc3RlRXZlbnRvKTsKICAgICAgfQogICAgfQogIH0KfTsKZXhwb3J0IHZhciBNaXhpblZlbnRhbmFFdmVudG8gPSB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vc3RyYW5kbzogbnVsbCwKICAgICAgZXN0ZUV2ZW50bzoge30sCiAgICAgIGVkaXRhbmRvRGF0ZUluaWNpbzogZmFsc2UsCiAgICAgIGVkaXRhbmRvSG9yYXJpb0ZpbmFsOiBmYWxzZSwKICAgICAgZWRpdGFuZG9EdXJhY2lvbjogZmFsc2UsCiAgICAgIG1vc3RyYW5kb1pvbmFSZXBldGlyOiBmYWxzZSwKICAgICAgcGVyaW9kb1JlcGV0aXI6ICJkaWFyaWFtZW50ZSIsCiAgICAgIGNhbnRpZGFkUmVwZXRpcjogMQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNlcnJhclZlbnRhbmE6IGZ1bmN0aW9uIGNlcnJhclZlbnRhbmEoKSB7CiAgICAgIHZhciBpbmRleEVzdGVTdWJwYXRoID0gdGhpcy50aXBvRXZlbnRvID09PSAnZXZlbnRvUHVibGljbycgPyB0aGlzLiRyb3V0ZS5wYXRoLnNlYXJjaCgidmVudGFuYUV2ZW50b1B1YmxpY28iKSA6IHRoaXMudGlwb0V2ZW50byA9PT0gJ2V2ZW50b1BlcnNvbmFsJyA/IHRoaXMuJHJvdXRlLnBhdGguc2VhcmNoKCJ2ZW50YW5hRXZlbnRvUGVyc29uYWwiKSA6IG51bGw7CiAgICAgIGlmICghaW5kZXhFc3RlU3VicGF0aCkgcmV0dXJuOwogICAgICB2YXIgcGF0aFBhcmVudCA9IHRoaXMuJHJvdXRlLnBhdGguc3Vic3RyaW5nKDAsIGluZGV4RXN0ZVN1YnBhdGggLSAxKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2gocGF0aFBhcmVudCk7CiAgICB9LAogICAgaW5pY2lhckVkaWNpb25GZWNoYUluaWNpbzogZnVuY3Rpb24gaW5pY2lhckVkaWNpb25GZWNoYUluaWNpbygpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvUHJvZmUpIHJldHVybjsKICAgICAgY29uc29sZS5sb2coIkluaWNpYW5kbyBlZGljaW9uIGRlIGZlY2hhIGluaWNpbyBjb24gIi5jb25jYXQodGhpcy5mZWNoYUluaWNpb1N0cmluZykpOwogICAgICB0aGlzLiRyZWZzLmlucHV0RmVjaGFJbmljaW8udmFsdWUgPSB0aGlzLmZlY2hhSW5pY2lvRm9ybWF0ZWFkYTsKICAgICAgdGhpcy5lZGl0YW5kb0ZlY2hhSW5pY2lvID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTEuJHJlZnMuaW5wdXRGZWNoYUluaWNpby5mb2N1cygpOwogICAgICB9KTsKICAgIH0sCiAgICBpbmljaWFyRWRpY2lvbkhvcmFJbmljaW86IGZ1bmN0aW9uIGluaWNpYXJFZGljaW9uSG9yYUluaWNpbygpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvUHJvZmUpIHJldHVybjsKICAgICAgdGhpcy4kcmVmcy5pbnB1dEhvcmFJbmljaW8udmFsdWUgPSB0aGlzLmhvcmFJbmljaW9MZWdpYmxlOwogICAgICB0aGlzLmVkaXRhbmRvSG9yYUluaWNpbyA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczEyLiRyZWZzLmlucHV0SG9yYUluaWNpby5mb2N1cygpOwogICAgICB9KTsKICAgIH0sCiAgICBpbmljaWFyRWRpY2lvbkR1cmFjaW9uOiBmdW5jdGlvbiBpbmljaWFyRWRpY2lvbkR1cmFjaW9uKCkgewogICAgICB2YXIgX3RoaXMxMyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvU3VwZXJhZG1pbmlzdHJhZG9yICYmICF0aGlzLnVzdWFyaW9Qcm9mZSkgcmV0dXJuOwogICAgICBjb25zb2xlLmxvZygiSW5pY2lhbmRvIGVkaWNpb24gZGUgZHVyYWNpXHhGM24gY29uICIuY29uY2F0KHRoaXMuZHVyYWNpb25NaW51dG9zKSk7CiAgICAgIHRoaXMuJHJlZnMuaW5wdXREdXJhY2lvbi52YWx1ZSA9IHRoaXMuZHVyYWNpb25NaW51dG9zOwogICAgICB0aGlzLmVkaXRhbmRvRHVyYWNpb24gPSB0cnVlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMy4kcmVmcy5pbnB1dER1cmFjaW9uLmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUR1cmFjaW9uOiBmdW5jdGlvbiB1cGRhdGVEdXJhY2lvbihudWV2YUR1cmFjaW9uKSB7CiAgICAgIGNvbnNvbGUubG9nKCJVcGRhdGluZyBkdXJhY2lceEYzbiB0byAiLmNvbmNhdChudWV2YUR1cmFjaW9uLCAiIG1pbnV0b3MiKSk7CiAgICAgIHZhciBudWV2b0hvcmFyaW9GaW5hbCA9IG5ldyBEYXRlKHRoaXMuZGF0ZUluaWNpby5nZXRUaW1lKCkgKyBudWV2YUR1cmFjaW9uICogNjAwMDApOwogICAgICB0aGlzLmVudmlhck51ZXZvSG9yYXJpb0ZpbmFsKG51ZXZvSG9yYXJpb0ZpbmFsKTsKICAgIH0sCiAgICBlbnZpYXJOdWV2b0hvcmFyaW9GaW5hbDogZnVuY3Rpb24gZW52aWFyTnVldm9Ib3JhcmlvRmluYWwoZGF0ZUZpbmFsKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICAgIHRoaXMuZW52aWFuZG9OdWV2b0RhdGVGaW5hbCA9IHRydWU7CiAgICAgIHRoaXMuZW52aWFuZG9Tb21lSG9yYXJpbyA9IHRydWU7CiAgICAgIGNvbnNvbGUubG9nKCJFbnZpYW5kbyBudWV2byBob3JhcmlvIGZpbmFsOiAiLmNvbmNhdChkYXRlRmluYWwpKTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3Q4KCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgbnVldm9EYXRlOiBkYXRlRmluYWwsCiAgICAgICAgICB0aXBvRXZlbnRvOiB0aGlzLmVzdGVFdmVudG8uX190eXBlbmFtZS5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHRoaXMuZXN0ZUV2ZW50by5fX3R5cGVuYW1lLnNsaWNlKDEpLAogICAgICAgICAgaWRFdmVudG86IHRoaXMuZXN0ZUV2ZW50by5pZAogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxNC5lbnZpYW5kb051ZXZvRGF0ZUZpbmFsID0gZmFsc2U7CiAgICAgICAgX3RoaXMxNC5lbnZpYW5kb1NvbWVIb3JhcmlvID0gZmFsc2U7CiAgICAgICAgX3RoaXMxNC5lZGl0YW5kb0R1cmFjaW9uID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogIi5jb25jYXQoZXJyb3IpKTsKICAgICAgICBfdGhpczE0LmVudmlhbmRvTnVldm9EYXRlRmluYWwgPSBmYWxzZTsKICAgICAgICBfdGhpczE0LmVudmlhbmRvU29tZUhvcmFyaW8gPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlSG9yYXJpb0luaWNpbzogZnVuY3Rpb24gdXBkYXRlSG9yYXJpb0luaWNpbyhlKSB7CiAgICAgIHZhciBfdGhpczE1ID0gdGhpczsKCiAgICAgIHZhciBudWV2b1RpbWUgPSBlLnRhcmdldC52YWx1ZTsKICAgICAgdmFyIGhvcmFzID0gcGFyc2VJbnQobnVldm9UaW1lLnN1YnN0cmluZygwLCAyKSk7CiAgICAgIHZhciBtaW51dG9zID0gcGFyc2VJbnQobnVldm9UaW1lLnN1YnN0cmluZygzKSk7CiAgICAgIGNvbnNvbGUubG9nKCJudWV2b1RpbWU6ICIuY29uY2F0KG51ZXZvVGltZSwgIi4gIikuY29uY2F0KGhvcmFzLCAiIGhvcmFzIHkgIikuY29uY2F0KG1pbnV0b3MsICIgbWludXRvcyIpKTsKICAgICAgdmFyIGFjdHVhbERhdGVGaW5hbCA9IG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvRmluYWwpOwogICAgICB2YXIgZGF0ZUluaWNpbyA9IG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvSW5pY2lvKTsKICAgICAgY29uc29sZS5sb2coIkFjdHVhbCBkYXRlOiAiLmNvbmNhdChkYXRlSW5pY2lvKSk7CiAgICAgIGRhdGVJbmljaW8uc2V0SG91cnMoaG9yYXMpOwogICAgICBkYXRlSW5pY2lvLnNldE1pbnV0ZXMobWludXRvcyk7CiAgICAgIGNvbnNvbGUubG9nKCJOdWV2YSBkYXRlIGluaWNpbzogIi5jb25jYXQoZGF0ZUluaWNpbykpOwoKICAgICAgaWYgKGRhdGVJbmljaW8gPiBhY3R1YWxEYXRlRmluYWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZW52aWFuZG9OdWV2b0RhdGVJbmljaW8gPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDkoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBudWV2b0RhdGU6IGRhdGVJbmljaW8sCiAgICAgICAgICB0aXBvRXZlbnRvOiB0aGlzLnRpcG9FdmVudG8sCiAgICAgICAgICBpZEV2ZW50bzogdGhpcy5lc3RlRXZlbnRvLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczE1LmVudmlhbmRvTnVldm9EYXRlSW5pY2lvID0gZmFsc2U7CiAgICAgICAgX3RoaXMxNS5lZGl0YW5kb0RhdGVJbmljaW8gPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiLmNvbmNhdChlcnJvcikpOwogICAgICAgIF90aGlzMTUuZW52aWFuZG9OdWV2b0RhdGVJbmljaW8gPSBmYWxzZTsKICAgICAgfSk7IC8vIGNvbnN0IG51ZXZvRGF0ZT10aGlzLgogICAgfSwKICAgIGluaWNpYXJFZGljaW9uSG9yYXJpb0ZpbmFsOiBmdW5jdGlvbiBpbmljaWFyRWRpY2lvbkhvcmFyaW9GaW5hbCgpIHsKICAgICAgdmFyIF90aGlzMTYgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvUHJvZmUpIHJldHVybjsKICAgICAgY29uc29sZS5sb2coIkluaWNpYW5kbyBlZGljaW9uIik7CiAgICAgIHRoaXMuJHJlZnMuaW5wdXRIb3JhcmlvRmluYWwudmFsdWUgPSB0aGlzLmhvcmFGaW5hbFN0cmluZzsKICAgICAgdGhpcy5lZGl0YW5kb0hvcmFyaW9GaW5hbCA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczE2LiRyZWZzLmlucHV0SG9yYXJpb0ZpbmFsLmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHVwZGF0ZUhvcmFyaW9GaW5hbDogZnVuY3Rpb24gdXBkYXRlSG9yYXJpb0ZpbmFsKGUpIHsKICAgICAgdmFyIG51ZXZvVGltZSA9IGUudGFyZ2V0LnZhbHVlOwogICAgICB2YXIgaG9yYXMgPSBwYXJzZUludChudWV2b1RpbWUuc3Vic3RyaW5nKDAsIDIpKTsKICAgICAgdmFyIG1pbnV0b3MgPSBwYXJzZUludChudWV2b1RpbWUuc3Vic3RyaW5nKDMpKTsKICAgICAgY29uc29sZS5sb2coIm51ZXZvVGltZTogIi5jb25jYXQobnVldm9UaW1lLCAiLiAiKS5jb25jYXQoaG9yYXMsICIgaG9yYXMgeSAiKS5jb25jYXQobWludXRvcywgIiBtaW51dG9zIikpOwogICAgICB2YXIgYWN0dWFsRGF0ZUluaWNpbyA9IG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvSW5pY2lvKTsKICAgICAgdmFyIGRhdGVGaW5hbCA9IG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvRmluYWwpOwogICAgICBjb25zb2xlLmxvZygiQWN0dWFsIGRhdGU6ICIuY29uY2F0KGRhdGVGaW5hbCkpOwogICAgICBkYXRlRmluYWwuc2V0SG91cnMoaG9yYXMpOwogICAgICBkYXRlRmluYWwuc2V0TWludXRlcyhtaW51dG9zKTsKICAgICAgY29uc29sZS5sb2coIk51ZXZhIGRhdGUgZmluYWw6ICIuY29uY2F0KGRhdGVGaW5hbCkpOwoKICAgICAgaWYgKGRhdGVGaW5hbCA8IGFjdHVhbERhdGVJbmljaW8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuZW52aWFyTnVldm9Ib3JhcmlvRmluYWwoZGF0ZUZpbmFsKTsgLy8gY29uc3QgbnVldm9EYXRlPXRoaXMuCiAgICB9LAogICAgZW52aWFyTnVldmFEYXRlSW5pY2lvSG9sZER1cmF0aW9uOiBmdW5jdGlvbiBlbnZpYXJOdWV2YURhdGVJbmljaW9Ib2xkRHVyYXRpb24obnVldmFEYXRlSW5pY2lvKSB7CiAgICAgIHZhciBfdGhpczE3ID0gdGhpczsKCiAgICAgIHRoaXMuZW52aWFuZG9OdWV2b0RhdGVJbmljaW8gPSB0cnVlOwogICAgICB0aGlzLmVudmlhbmRvU29tZUhvcmFyaW8gPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDEwKCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgbnVldm9EYXRlOiBudWV2YURhdGVJbmljaW8sCiAgICAgICAgICB0aXBvRXZlbnRvOiB0aGlzLnRpcG9FdmVudG8sCiAgICAgICAgICBpZEV2ZW50bzogdGhpcy5lc3RlRXZlbnRvLmlkCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczE3LiRlbWl0KCJldmVudG9DYW1iaW9GZWNoYSIsIF90aGlzMTcuZXN0ZUV2ZW50byk7CgogICAgICAgIF90aGlzMTcuZW52aWFuZG9Tb21lSG9yYXJpbyA9IGZhbHNlOwogICAgICAgIF90aGlzMTcuZW52aWFuZG9OdWV2b0RhdGVJbmljaW8gPSBmYWxzZTsKICAgICAgICBfdGhpczE3LmVkaXRhbmRvRmVjaGFJbmljaW8gPSBmYWxzZTsKICAgICAgICBfdGhpczE3LmVkaXRhbmRvSG9yYUluaWNpbyA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgICAgX3RoaXMxNy5lbnZpYW5kb051ZXZvRGF0ZUluaWNpbyA9IGZhbHNlOwogICAgICAgIF90aGlzMTcuZW52aWFuZG9Tb21lSG9yYXJpbyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVGZWNoYUluaWNpb0hvbGREdXJhdGlvbjogZnVuY3Rpb24gdXBkYXRlRmVjaGFJbmljaW9Ib2xkRHVyYXRpb24obnVldmFGZWNoYUluaWNpb0Zvcm1hdGVhZGEpIHsKICAgICAgY29uc29sZS5sb2coInNlIGhhcmEgdXBkYXRlIGRlIGZlY2hhIGluaWNpbyBob2xkaW5nIGR1cmF0aW9uLiAiLmNvbmNhdChudWV2YUZlY2hhSW5pY2lvRm9ybWF0ZWFkYSkpOwogICAgICB2YXIgZGF0b3NGZWNoYSA9IG5ldyBEYXRlKG51ZXZhRmVjaGFJbmljaW9Gb3JtYXRlYWRhKTsKICAgICAgdmFyIG51ZXZvRGlhSW5pY2lvID0gZGF0b3NGZWNoYS5nZXRVVENEYXRlKCk7CiAgICAgIHZhciBudWV2b01lc0luaWNpbyA9IGRhdG9zRmVjaGEuZ2V0VVRDTW9udGgoKTsKICAgICAgdmFyIG51ZXZvWWVhckluaWNpbyA9IGRhdG9zRmVjaGEuZ2V0VVRDRnVsbFllYXIoKTsKICAgICAgdmFyIG51ZXZhRGF0ZUluaWNpbyA9IG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvSW5pY2lvKTsKICAgICAgbnVldmFEYXRlSW5pY2lvLnNldERhdGUobnVldm9EaWFJbmljaW8pOwogICAgICBudWV2YURhdGVJbmljaW8uc2V0TW9udGgobnVldm9NZXNJbmljaW8pOwogICAgICBudWV2YURhdGVJbmljaW8uc2V0RnVsbFllYXIobnVldm9ZZWFySW5pY2lvKTsKICAgICAgY29uc29sZS5sb2coIlF1ZWRhclx4RTE6ICIuY29uY2F0KG51ZXZhRGF0ZUluaWNpbykpOwogICAgICB0aGlzLmVudmlhck51ZXZhRGF0ZUluaWNpb0hvbGREdXJhdGlvbihudWV2YURhdGVJbmljaW8pOwogICAgfSwKICAgIHVwZGF0ZUhvcmFJbmljaW9Ib2xkRHVyYXRpb246IGZ1bmN0aW9uIHVwZGF0ZUhvcmFJbmljaW9Ib2xkRHVyYXRpb24obnVldmFIb3JhSW5pY2lvRm9ybWF0ZWFkYSkgewogICAgICBjb25zb2xlLmxvZygic2UgaGFyYSB1cGRhdGUgZGUgaG9yYSBpbmljaW8gaG9sZGluZyBkdXJhdGlvbi4gIi5jb25jYXQobnVldmFIb3JhSW5pY2lvRm9ybWF0ZWFkYSkpOwogICAgICB2YXIgaG9yYXMgPSBudWV2YUhvcmFJbmljaW9Gb3JtYXRlYWRhLnN1YnN0cmluZygwLCAyKTsKICAgICAgdmFyIG1pbnV0b3MgPSBudWV2YUhvcmFJbmljaW9Gb3JtYXRlYWRhLnN1YnN0cmluZygzKTsKICAgICAgdmFyIG51ZXZhRGF0ZUluaWNpbyA9IG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvSW5pY2lvKTsKICAgICAgbnVldmFEYXRlSW5pY2lvLnNldEhvdXJzKGhvcmFzKTsKICAgICAgbnVldmFEYXRlSW5pY2lvLnNldE1pbnV0ZXMobWludXRvcyk7CiAgICAgIGNvbnNvbGUubG9nKCJRdWVkYXJceEUxOiAiLmNvbmNhdChudWV2YURhdGVJbmljaW8pKTsKICAgICAgdGhpcy5lbnZpYXJOdWV2YURhdGVJbmljaW9Ib2xkRHVyYXRpb24obnVldmFEYXRlSW5pY2lvKTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBob3JhSW5pY2lvU3RyaW5nOiBmdW5jdGlvbiBob3JhSW5pY2lvU3RyaW5nKCkgewogICAgICByZXR1cm4gbmV3IERhdGUodGhpcy5lc3RlRXZlbnRvLmhvcmFyaW9JbmljaW8pLnRvVGltZVN0cmluZygpLnN1YnN0cmluZygwLCA1KTsKICAgIH0sCiAgICBob3JhRmluYWxTdHJpbmc6IGZ1bmN0aW9uIGhvcmFGaW5hbFN0cmluZygpIHsKICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMuZXN0ZUV2ZW50by5ob3JhcmlvRmluYWwpLnRvVGltZVN0cmluZygpLnN1YnN0cmluZygwLCA1KTsKICAgIH0KICB9Cn07CmV4cG9ydCB2YXIgTWl4aW5FdmVudG9zUHVibGljb3NVc2VFdmVudG9zUGVyc29uYWxlc1VuZGVyID0gewogIHByb3BzOiB7CiAgICBpZFBhcmVudDogU3RyaW5nLAogICAgdGlwb1BhcmVudDogU3RyaW5nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3JlYW5kb0V2ZW50b1BlcnNvbmFsVW5kZXI6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY3JlYXJFdmVudG9QZXJzb25hbFVuZGVyOiBmdW5jdGlvbiBjcmVhckV2ZW50b1BlcnNvbmFsVW5kZXIoKSB7CiAgICAgIHZhciBfdGhpczE4ID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCJDcmVhbmRvIGV2ZW50byBwZXJzb25hbCB1bmRlciIpOwogICAgICB0aGlzLmNyZWFuZG9FdmVudG9QZXJzb25hbFVuZGVyID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QxMSgpLCBmcmFnbWVudG9FdmVudG9QZXJzb25hbCksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpbmZvRXZlbnRvUGVyc29uYWw6IHsKICAgICAgICAgICAgaWRQZXJzb25hOiB0aGlzLmlkVXN1YXJpb1RhcmdldCwKICAgICAgICAgICAgaWRFdmVudG9NYXJjbzogdGhpcy5lc3RlRXZlbnRvLmlkLAogICAgICAgICAgICBpZFBhcmVudDogdGhpcy5pZFBhcmVudCwKICAgICAgICAgICAgdGlwb1BhcmVudDogdGhpcy50aXBvUGFyZW50CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmMikgewogICAgICAgIHZhciBjcmVhckV2ZW50b1BlcnNvbmFsID0gX3JlZjIuZGF0YS5jcmVhckV2ZW50b1BlcnNvbmFsOwogICAgICAgIF90aGlzMTguY3JlYW5kb0V2ZW50b1BlcnNvbmFsVW5kZXIgPSBmYWxzZTsKCiAgICAgICAgX3RoaXMxOC4kZW1pdCgnY3JlYWRvRXZlbnRvUGVyc29uYWwnLCBjcmVhckV2ZW50b1BlcnNvbmFsKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiLmNvbmNhdChlcnJvcikpOwogICAgICAgIF90aGlzMTguY3JlYW5kb0V2ZW50b1BlcnNvbmFsVW5kZXIgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/home/vida1/webpj/pepepe/vuecliente/src/components/MixinsEventos.js"],"names":["fragmentoEventoPublico","fragmentoEventoPersonal","charProhibidosNombreCosa","charProhibidosTexto","gql","diasSemana","meses","MixinBasicoEventos","data","computed","tipoEvento","esteEvento","__typename","charAt","toLowerCase","slice","dateInicio","Date","horarioInicio","fechaInicioFormateada","dateActualString","toISOString","split","fechaFinalFormateada","dateFinal","horarioFinal","horarioInicioFormateado","timesLegibles","horas","minutos","horarioFinalFormateado","fechaInicioLegible","diaSemana","getDay","diaMes","getDate","mes","getMonth","texto","horaInicioLegible","hora","getHours","getMinutes","length","dateInicioLegible","fechaFinalLegible","horaFinalLegible","dateFinalLegible","millisHoyInicio","millisInicioLocal","millisHoyFinal","millisFinalLocal","Math","floor","fecha","millis","getTime","offset","getTimezoneOffset","duracionMinutos","round","duracionLegible","dias","methods","eliminarse","confirm","administrador","usuarioSuperadministrador","usuarioProfe","eliminandose","$apollo","mutate","mutation","variables","idEvento","id","then","$emit","catch","error","console","log","MixinBasicoEventosPublicos","usuarioLogeado","usuario","idAdministrador","MixinBasicoEventosPersonales","idPersona","MixinEdicionEventos","nuevoNombre","editandoNombre","enviandoNuevoNombre","nuevoDescripcion","editandoDescripcion","enviandoNuevoDescripcion","editandoFechaInicio","editandoHoraInicio","nuevoDuracion","enviandoNuevoDateInicio","enviandoNuevoDateFinal","enviandoHorarios","enviandoSomeHorario","nuevoLimiteDeCupos","editandoLimiteDeCupos","enviandoNuevoLimiteDeCupos","minRepetir","maxRepetir","enviandoQueryRepetir","guardarNuevoNombre","$refs","inputNuevoNombre","value","nuevoNombreIlegal","nombre","guardarNuevoLimiteDeCupos","inputNuevoLimiteDeCupos","nuevoLimiteDeCuposIlegal","limiteDeCupos","enviandonuevoLimiteDeCupos","parseInt","guardarNuevoDescripcion","nuevoDescripcionIlegal","descripcion","toggleEditandoDescripcion","inputNuevoDescripcion","style","height","offsetHeight","$nextTick","focus","toggleEditandoNombre","e","stopPropagation","toggleEditandoLimiteDeCupos","keydownInputNuevoNombre","key","blur","setHoraFinal","textoActual","nuevaHoraFinalInput","prompt","indexPuntos","indexOf","horasInput","substr","minutosInput","nuevaDateFinal","diaCalendarioOver","date","setHours","setMinutes","enviarNuevoHorarioFinal","setHoraInicio","nuevaHoraInicioInput","nuevaDateInicio","enviarNuevaDateInicioHoldDuration","nuevoDate","editandoDuracion","iniciarEdicionDuracion","repetirEvento","cantidadRepetir","periodoRepetir","repetirEventoPeriodicamente","mostrandoZonaRepetir","test","watch","mostrando","MixinEdicionEventosPublicos","MixinEventoCalendario","props","idEventoSeleccionado","String","Object","horaPx","Number","seleccionado","Boolean","infoOffset","enfasis","idUsuarioTarget","recogido","estiloSize","anchoPx","width","estiloPos","millisDia","left","top","estiloZ","zIndex","claseOffset","clase","MixinVentanaEvento","editandoDateInicio","editandoHorarioFinal","cerrarVentana","indexEsteSubpath","$route","path","search","pathParent","substring","$router","push","iniciarEdicionFechaInicio","fechaInicioString","inputFechaInicio","iniciarEdicionHoraInicio","inputHoraInicio","inputDuracion","updateDuracion","nuevaDuracion","nuevoHorarioFinal","updateHorarioInicio","nuevoTime","target","actualDateFinal","iniciarEdicionHorarioFinal","inputHorarioFinal","horaFinalString","updateHorarioFinal","actualDateInicio","updateFechaInicioHoldDuration","nuevaFechaInicioFormateada","datosFecha","nuevoDiaInicio","getUTCDate","nuevoMesInicio","getUTCMonth","nuevoYearInicio","getUTCFullYear","setDate","setMonth","setFullYear","updateHoraInicioHoldDuration","nuevaHoraInicioFormateada","horaInicioString","toTimeString","MixinEventosPublicosUseEventosPersonalesUnder","idParent","tipoParent","creandoEventoPersonalUnder","crearEventoPersonalUnder","infoEventoPersonal","idEventoMarco","crearEventoPersonal"],"mappings":"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","sourcesContent":["import { fragmentoEventoPublico, fragmentoEventoPersonal } from \"./utilidades/fragsCalendario\";\nimport { charProhibidosNombreCosa, charProhibidosTexto } from \"./configs\";\nimport gql from \"graphql-tag\";\nconst diasSemana = [\"Domingo\", \"Lunes\", \"Martes\", \"Miercoles\", \"Jueves\", \"Viernes\", \"Sábado\"];\nconst meses = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\n\nexport const MixinBasicoEventos = {\n\n    data() {\n        return {\n\n        }\n    },\n    computed: {\n        tipoEvento() {\n            return this.esteEvento.__typename.charAt(0).toLowerCase() + this.esteEvento.__typename.slice(1);\n        },\n        dateInicio() {\n            return new Date(this.esteEvento.horarioInicio);\n        },\n        fechaInicioFormateada() {\n            const dateActualString = this.dateInicio.toISOString().split('T')[0];\n            return dateActualString;\n        },\n        fechaFinalFormateada() {\n            const dateActualString = this.dateFinal.toISOString().split('T')[0];\n            return dateActualString;\n        },\n        dateFinal() {\n            return new Date(this.esteEvento.horarioFinal)\n        },\n        horarioInicioFormateado() {\n            return (\n                this.timesLegibles.horarioInicio.horas +\n                \":\" +\n                this.timesLegibles.horarioInicio.minutos\n            );\n        },\n        horarioFinalFormateado() {\n            return (\n                this.timesLegibles.horarioFinal.horas +\n                \":\" +\n                this.timesLegibles.horarioFinal.minutos\n            );\n        },\n        fechaInicioLegible() {\n\n            const diaSemana = diasSemana[this.dateInicio.getDay()];\n            const diaMes = this.dateInicio.getDate();\n            const mes = meses[this.dateInicio.getMonth()];\n\n            const texto = diaSemana + \" \" + diaMes + \" de \" + mes;\n            return texto;\n\n        },\n        horaInicioLegible() {\n            var hora = this.dateInicio.getHours();\n            var minutos = this.dateInicio.getMinutes();\n            if (('' + hora).length < 2) {\n                hora = '0' + hora;\n            }\n            if (('' + minutos).length < 2) {\n                minutos = '0' + minutos;\n            }\n            return hora + ':' + minutos\n        },\n        dateInicioLegible() {\n            const texto = this.fechaInicioLegible + \", \" + this.horaInicioLegible;\n            return texto;\n        },\n        fechaFinalLegible() {\n            const diaSemana = diasSemana[this.dateFinal.getDay()];\n            const diaMes = this.dateFinal.getDate();\n            const mes = meses[this.dateFinal.getMonth()];\n\n            const texto = diaSemana + \" \" + diaMes + \" de \" + mes;\n            return texto;\n\n        },\n        horaFinalLegible() {\n            var hora = this.dateFinal.getHours();\n            var minutos = this.dateFinal.getMinutes();\n            if (('' + hora).length < 2) {\n                hora = '0' + hora;\n            }\n            if (('' + minutos).length < 2) {\n                minutos = '0' + minutos;\n            }\n            return hora + ':' + minutos\n        },\n        dateFinalLegible() {\n\n            const texto = this.fechaFinalLegible + \", \" + this.horaFinalLegible;\n            return texto;\n        },\n        timesLegibles() {\n            const millisHoyInicio = this.millisInicioLocal % 86400000;\n            const millisHoyFinal = this.millisFinalLocal % 86400000;\n\n            return {\n                horarioInicio: {\n                    horas: Math.floor(millisHoyInicio / 3600000),\n                    minutos: (millisHoyInicio % 3600000) / 60000,\n                },\n                horarioFinal: {\n                    horas: Math.floor(millisHoyFinal / 3600000),\n                    minutos: (millisHoyFinal % 3600000) / 60000,\n                },\n            };\n        },\n        millisFinalLocal() {\n            const fecha = new Date(this.esteEvento.horarioFinal);\n            const millis = fecha.getTime();\n            const offset = fecha.getTimezoneOffset() * 60000;\n            return millis - offset;\n        },\n        millisInicioLocal() {\n            const fecha = new Date(this.esteEvento.horarioInicio);\n            const millis = fecha.getTime();\n            const offset = fecha.getTimezoneOffset() * 60000;\n            return millis - offset;\n        },\n        duracionMinutos() {\n            return Math.round((new Date(this.esteEvento.horarioFinal).getTime() - new Date(this.esteEvento.horarioInicio).getTime()) / 60000);\n        },\n        duracionLegible() {\n            const dias = Math.floor(this.duracionMinutos / 1440);\n            const horas = Math.floor((this.duracionMinutos - (dias * 1440)) / 60);\n            const minutos = this.duracionMinutos - (dias * 1440) - (horas * 60);\n\n            var texto = \"\";\n            if (minutos > 0 || this.duracionMinutos === 0) {\n                texto = minutos + \"min\";\n            }\n            if (horas > 0) {\n                if (texto.length > 0) {\n                    texto = \", \" + texto\n                }\n                texto = horas + \"h\" + texto;\n            }\n            if (dias > 0) {\n                if (texto.length > 0) {\n                    texto = \", \" + texto\n                }\n                texto = dias + \"dias\" + texto;\n            }\n            return texto;\n        }\n    },\n    methods: {\n        eliminarse() {\n            if (\n                !confirm(\n                    \"¿Confirmar la eliminación de este evento? (Esta acción no puede deshacerse)\"\n                )\n            )\n                return;\n\n            if (!this.administrador && !this.usuarioSuperadministrador && !this.usuarioProfe) {\n                return;\n            }\n            this.eliminandose = true;\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                  mutation ($idEvento: ID!, $tipoEvento:String!) {\n                    eliminarEvento(idEvento: $idEvento, tipoEvento:$tipoEvento)\n                  }\n                `,\n                    variables: {\n                        idEvento: this.esteEvento.id,\n                        tipoEvento: this.tipoEvento,\n                    },\n                })\n                .then(() => {\n                    this.$emit(\"meElimine\");\n                })\n                .catch((error) => {\n                    console.log(`Error: ${error}`);\n                });\n        },\n    }\n\n}\nexport const MixinBasicoEventosPublicos = {\n    data() {\n        return {\n        }\n    },\n    computed: {\n        administrador() {\n            if (!this.usuarioLogeado) return false;\n\n            return this.usuario.id === this.esteEvento.idAdministrador;\n        },\n    }\n}\nexport const MixinBasicoEventosPersonales = {\n    data() {\n        return {\n        }\n    },\n    computed: {\n        administrador() {\n            if (!this.usuarioLogeado) return false;\n\n            return this.usuario.id === this.esteEvento.idPersona;\n        },\n\n    }\n}\n\n\n\nexport const MixinEdicionEventos = {\n    data() {\n        return {\n            nuevoNombre: \"Nuevo nombre\",\n            editandoNombre: false,\n            enviandoNuevoNombre: false,\n\n            nuevoDescripcion: \"Nueva descripcion\",\n            editandoDescripcion: false,\n            enviandoNuevoDescripcion: false,\n\n            editandoFechaInicio: false,\n            editandoHoraInicio: false,\n            nuevoDuracion: null,\n\n            enviandoNuevoDateInicio: false,\n            enviandoNuevoDateFinal: false,\n            enviandoHorarios: false,\n            enviandoSomeHorario: false,\n\n            nuevoLimiteDeCupos: null,\n            editandoLimiteDeCupos: false,\n            enviandoNuevoLimiteDeCupos: false,\n\n            minRepetir: 1,\n            maxRepetir: 52,\n\n            enviandoQueryRepetir: false,\n        }\n    },\n    methods: {\n        guardarNuevoNombre() {\n            this.nuevoNombre = this.$refs.inputNuevoNombre.value;\n\n            if (this.nuevoNombreIlegal) {\n                console.log(`No enviado`);\n                return;\n            }\n            if (this.nuevoNombre == this.esteEvento.nombre) {\n                this.editandoNombre = false;\n                return;\n            }\n            console.log(`guardando nuevo nombre`);\n            this.enviandoNuevoNombre = true;\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                  mutation ($idEvento: ID!, $tipoEvento:String!, $nuevoNombre: String!) {\n                    editarNombreEvento(\n                      idEvento: $idEvento\n                      tipoEvento:$tipoEvento\n                      nuevoNombre: $nuevoNombre\n                    ) {\n                    __typename\n                    ... on EventoPersonal{\n                        id\n                      nombre\n                    }\n                    ... on EventoPublico{\n                        id\n                        nombre\n                    }\n                    \n                    }\n                  }\n                `,\n                    variables: {\n                        idEvento: this.esteEvento.id,\n                        tipoEvento: this.tipoEvento,\n                        nuevoNombre: this.nuevoNombre,\n                    },\n                })\n                .then(() => {\n                    this.enviandoNuevoNombre = false;\n                    this.editandoNombre = false;\n                })\n                .catch((error) => {\n                    this.enviandoNuevoNombre = false;\n                    console.log(`Error. E :${error}`);\n                });\n        },\n        guardarNuevoLimiteDeCupos() {\n            this.nuevoLimiteDeCupos = this.$refs.inputNuevoLimiteDeCupos.value;\n\n            if (this.nuevoLimiteDeCuposIlegal) {\n                console.log(`No enviado`);\n                return;\n            }\n            if (this.nuevoLimiteDeCupos == this.esteEvento.limiteDeCupos) {\n                this.editandoLimiteDeCupos = false;\n                return;\n            }\n            console.log(`guardando nuevo limite de cupos`);\n            this.enviandonuevoLimiteDeCupos = true;\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                  mutation ($idEvento: ID!, $tipoEvento:String!, $nuevoLimiteDeCupos: Int!) {\n                    editarLimiteDeCuposEvento(\n                      idEvento: $idEvento\n                      tipoEvento:$tipoEvento\n                      nuevoLimiteDeCupos: $nuevoLimiteDeCupos\n                    ) {\n                        id\n                      limiteDeCupos                                      \n                    }\n                  }\n                `,\n                    variables: {\n                        idEvento: this.esteEvento.id,\n                        tipoEvento: this.tipoEvento,\n                        nuevoLimiteDeCupos: parseInt(this.nuevoLimiteDeCupos),\n                    },\n                })\n                .then(() => {\n                    this.enviandoNuevoLimiteDeCupos = false;\n                    this.editandoLimiteDeCupos = false;\n                })\n                .catch((error) => {\n                    this.enviandoNuevoLimiteDeCupos = false;\n                    console.log(`Error. E :${error}`);\n                });\n        },\n        guardarNuevoDescripcion() {\n            if (this.nuevoDescripcionIlegal) {\n                console.log(`No enviado`);\n                return;\n            }\n            if (this.nuevoDescripcion == this.esteEvento.descripcion) {\n                this.editandoDescripcion = false;\n                return;\n            }\n            console.log(`guardando nuevo descripcion`);\n            this.enviandoNuevoDescripcion = true;\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                  mutation ($idEvento: ID!, $tipoEvento:String!, $nuevoDescripcion: String!) {\n                    editarDescripcionEvento(\n                      idEvento: $idEvento\n                      tipoEvento: $tipoEvento\n                      nuevoDescripcion: $nuevoDescripcion\n                    ) {\n                        __typename\n                        ... on EventoPublico{\n                            id\n                            descripcion  \n                        }\n                        ... on EventoPersonal{\n                            id\n                            descripcion  \n                        }\n                      \n                    }\n                  }\n                `,\n                    variables: {\n                        idEvento: this.esteEvento.id,\n                        tipoEvento: this.tipoEvento,\n                        nuevoDescripcion: this.nuevoDescripcion,\n                    },\n                })\n                .then(() => {\n                    this.enviandoNuevoDescripcion = false;\n                    this.editandoDescripcion = false;\n                })\n                .catch((error) => {\n                    this.enviandoNuevoDescripcion = false;\n                    console.log(`Error. E :${error}`);\n                });\n        },\n        toggleEditandoDescripcion() {\n            if (!this.administrador) {\n                return;\n            }\n            this.$refs.inputNuevoDescripcion.style.height =\n                this.$refs.descripcion.offsetHeight + \"px\";\n            this.editandoDescripcion = !this.editandoDescripcion;\n            this.nuevoDescripcion = this.esteEvento.descripcion;\n\n            if (this.editandoDescripcion) {\n                this.$nextTick(() => {\n                    this.$refs.inputNuevoDescripcion.focus();\n                });\n            }\n        },\n        toggleEditandoNombre(e) {\n            if (this.administrador) {\n                e.stopPropagation();\n\n                this.editandoNombre = true;\n                this.nuevoNombre = this.esteEvento.nombre;\n                this.$nextTick(() => {\n                    this.$refs.inputNuevoNombre.focus();\n                });\n            }\n        },\n        toggleEditandoLimiteDeCupos(e) {\n            if (this.administrador) {\n                e.stopPropagation();\n\n                this.editandoLimiteDeCupos = true;\n                this.nuevoLimiteDeCupos = this.esteEvento.limiteDeCupos;\n                this.$nextTick(() => {\n                    this.$refs.inputNuevoLimiteDeCupos.focus();\n                });\n            }\n        },\n        keydownInputNuevoNombre(e) {\n            if (e.key === \"Escape\") {\n                this.$refs.inputNuevoNombre.blur();\n            }\n        },\n        setHoraFinal() {\n            var textoActual=\"hh:mm\";\n            if(this.horaFinalLegible){                \n                textoActual=this.horaFinalLegible;\n            }\n            \n            var nuevaHoraFinalInput = prompt(\"Introducir nueva hora de finalización\", textoActual);\n\n            const indexPuntos = nuevaHoraFinalInput.indexOf(\":\");\n\n            const horasInput = parseInt(nuevaHoraFinalInput.substr(0, indexPuntos));\n            const minutosInput = parseInt(nuevaHoraFinalInput.substr(indexPuntos + 1));\n\n            if (horasInput!=null && minutosInput!=null && horasInput >= 0 && horasInput < 24 && minutosInput >= 0 && minutosInput < 60) {\n                var nuevaDateFinal = new Date(this.diaCalendarioOver.date);\n                nuevaDateFinal.setHours(horasInput);\n                nuevaDateFinal.setMinutes(minutosInput);\n\n\n                console.log(\"Se fijará la nueva hora de final en \" + nuevaDateFinal);\n                this.enviarNuevoHorarioFinal(nuevaDateFinal);\n            }\n            else {\n                console.log(\"Hora inválida\");\n                return;\n            }\n        },\n        setHoraInicio() {\n            var textoActual=\"hh:mm\";\n            if(this.horaInicioLegible){                \n                textoActual=this.horaInicioLegible;\n            }\n            var nuevaHoraInicioInput = prompt(\"Introducir nueva hora de inicio\",textoActual);\n\n            const indexPuntos = nuevaHoraInicioInput.indexOf(\":\");\n\n            const horasInput = parseInt(nuevaHoraInicioInput.substr(0, indexPuntos));\n            const minutosInput = parseInt(nuevaHoraInicioInput.substr(indexPuntos + 1));\n\n            if (horasInput!=null && minutosInput!=null && horasInput >= 0 && horasInput < 24 && minutosInput >= 0 && minutosInput < 60) {\n                var nuevaDateInicio = new Date(this.diaCalendarioOver.date);\n                nuevaDateInicio.setHours(horasInput);\n                nuevaDateInicio.setMinutes(minutosInput);\n\n\n                console.log(\"Se fijará la nueva hora de inicio en \" + nuevaDateInicio);\n                this.enviarNuevaDateInicioHoldDuration(nuevaDateInicio);\n            }\n            else {\n                console.log(\"Hora inválida\");\n                return;\n            }\n\n\n        },\n        enviarNuevaDateInicioHoldDuration(nuevaDateInicio) {\n            this.enviandoNuevoDateInicio = true;\n            this.enviandoSomeHorario = true;\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                  mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                    setDateInicioEventoHoldDuration(\n                      nuevoDate: $nuevoDate\n                      tipoEvento: $tipoEvento\n                      idEvento: $idEvento\n                    ) {\n                      __typename\n                      ... on EventoPersonal{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      ... on EventoPublico{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      \n                    }\n                  }\n                `,\n                    variables: {\n                        nuevoDate: nuevaDateInicio,\n                        tipoEvento: this.tipoEvento,\n                        idEvento: this.esteEvento.id,\n                    },\n                })\n                .then(() => {\n                    this.$emit(\"eventoCambioFecha\", this.esteEvento);\n                    this.enviandoSomeHorario = false;\n                    this.enviandoNuevoDateInicio = false;\n                    this.editandoFechaInicio = false;\n                    this.editandoHoraInicio = false;\n                })\n                .catch((error) => {\n                    console.log(`Error: ${error}`);\n                    this.enviandoNuevoDateInicio = false;\n                    this.enviandoSomeHorario = false;\n                });\n        },\n        enviarNuevoHorarioFinal(dateFinal) {\n            this.enviandoNuevoDateFinal = true;\n            this.enviandoSomeHorario = true;\n            console.log(`Enviando nuevo horario final: ${dateFinal}`);\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                    mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                        setDateFinalEvento(\n                        nuevoDate: $nuevoDate\n                        tipoEvento: $tipoEvento\n                        idEvento: $idEvento\n                        ){\n                                __typename\n                            ... on EventoPersonal{\n                                id\n                                horarioInicio\n                                horarioFinal\n                            }\n                            ... on EventoPublico{\n                                id\n                                horarioInicio\n                                horarioFinal\n                            }\n                        }\n                  }\n                `,\n                    variables: {\n                        nuevoDate: dateFinal,\n                        tipoEvento: this.esteEvento.__typename.charAt(0).toLowerCase() + this.esteEvento.__typename.slice(1),\n                        idEvento: this.esteEvento.id,\n                    },\n                })\n                .then(() => {\n\n                    this.enviandoNuevoDateFinal = false;\n                    this.enviandoSomeHorario = false;\n                    this.editandoDuracion = false;\n\n                })\n                .catch((error) => {\n                    console.log(`Error: ${error}`);\n                    this.enviandoNuevoDateFinal = false;\n                    this.enviandoSomeHorario = false;\n                });\n        },\n        iniciarEdicionDuracion() {\n            this.nuevoDuracion = this.esteEvento.horarioFinal - this.esteEvento.horarioInicio;\n            this.editandoDuracion = true;\n        },\n        repetirEvento(cantidadRepetir, periodoRepetir) {\n            if (!this.usuarioSuperadministrador && !this.administrador) {\n                return;\n            }\n            cantidadRepetir = parseInt(cantidadRepetir);\n\n            if (cantidadRepetir < this.minRepetir || cantidadRepetir > this.maxRepetir) {\n                return;\n            }\n            console.log(`Se hara query de repetir este evento ${cantidadRepetir} veces ${periodoRepetir}`)\n            this.enviandoQueryRepetir = true;\n            this.$apollo.mutate({\n                mutation: gql`\n                mutation($periodoRepetir: String, $cantidadRepetir: Int!, $idEvento:ID!, $tipoEvento:String!){\n                  repetirEventoPeriodicamente(periodoRepetir:$periodoRepetir, cantidadRepetir: $cantidadRepetir, idEvento: $idEvento, tipoEvento:$tipoEvento){\n                    __typename\n                    ...on EventoPublico{\n                        ...fragEventoPublico\n                    }\n                    ...on EventoPersonal{\n                        ...fragEventoPersonal\n                    }\n                  }\n                } \n                ${fragmentoEventoPublico}\n                ${fragmentoEventoPersonal}\n              `,\n                variables: {\n                    periodoRepetir: periodoRepetir,\n                    cantidadRepetir: cantidadRepetir,\n                    idEvento: this.esteEvento.id,\n                    tipoEvento: this.tipoEvento,\n                }\n            }).then(({ data: { repetirEventoPeriodicamente } }) => {\n                if (repetirEventoPeriodicamente) {\n                    this.$emit('meRepetiPeriodicamente', repetirEventoPeriodicamente);\n                    this.mostrandoZonaRepetir = false;\n                }\n                this.enviandoQueryRepetir = false;\n\n            }).catch((error) => {\n                console.log(`Error: ${error}`);\n                this.enviandoQueryRepetir = false;\n\n            })\n        },\n    },\n    computed: {\n        nuevoNombreIlegal() {\n            if (this.nuevoNombre.length < 1) {\n                return true;\n            }\n            if (charProhibidosNombreCosa.test(this.nuevoNombre)) {\n                return true;\n            }\n            return false;\n        },\n        nuevoDescripcionIlegal() {\n            if (!this.nuevoDescripcion || this.nuevoDescripcion.length < 1) {\n                return true;\n            }\n            if (charProhibidosTexto.test(this.nuevoDescripcion)) {\n                return true;\n            }\n            return false;\n        },\n        nuevoLimiteDeCuposIlegal() {\n            if (!this.nuevoLimiteDeCupos || this.nuevoLimiteDeCupos < 1) {\n                return true;\n            }\n\n            return false;\n        },\n    },\n    watch: {\n        mostrando(mostrando) {\n            if (mostrando != \"descripcion\") this.editandoDescripcion = false;\n\n            if (mostrando === \"descripcion\") {\n                if (\n                    !this.esteEvento.descripcion ||\n                    this.esteEvento.descripcion.length < 1\n                ) {\n                    if (!this.editandoDescripcion) {\n                        this.toggleEditandoDescripcion();\n                    }\n                }\n            }\n        },\n    },\n}\nexport const MixinEdicionEventosPublicos = {\n    data() {\n        return {\n\n\n        }\n    },\n    methods: {\n\n    },\n\n};\n\n\n\nexport const MixinEventoCalendario = {\n    props: {\n        idEventoSeleccionado: String,\n        esteEvento: Object,\n        horaPx: Number,\n        seleccionado: Boolean,\n        infoOffset: Object,\n        diaCalendarioOver: Object,\n        enfasis: String,\n        idUsuarioTarget: String,\n    },\n    data() {\n        return {\n            eliminandose: false,\n            recogido: false,\n        }\n    },\n    computed: {\n        duracionMinutos() {\n            return (this.dateFinal.getTime() - this.dateInicio.getTime()) / 60000;\n        },\n        estiloSize() {\n            const anchoPx = (this.duracionMinutos / 60) * this.horaPx;\n            return {\n                width: anchoPx + \"px\",\n            };\n        },\n        estiloPos() {\n            const millisDia = (this.dateInicio.getHours() * 3600000) + (this.dateInicio.getMinutes() * 60000)\n            return {\n                left: (millisDia / 3600000) * this.horaPx + \"px\",\n                top: this.infoOffset ? this.infoOffset.top + 'px' : 0 + \"px\",\n            };\n        },\n        estiloZ() {\n            return {\n                zIndex: this.seleccionado ? 10 : 0\n            }\n        },\n        claseOffset() {\n            return this.infoOffset.clase;\n        },\n    },\n    methods: {\n\n    },\n    watch: {\n        dateInicio(dateInicio) {\n            console.log(`Cambio de date inicio. Ahora inicio en ${dateInicio}`);\n            if (\n                dateInicio < this.diaCalendarioOver.date ||\n                dateInicio.getTime() > this.diaCalendarioOver.date.getTime() + 86400000\n            ) {\n                console.log(`${this.esteEvento.nombre} dice: Me cambiaron de día`);\n                this.$emit(\"meCambiaronDia\", this.esteEvento);\n            }\n        },\n    },\n}\nexport const MixinVentanaEvento = {\n    data() {\n        return {\n            mostrando: null,\n            esteEvento: {\n\n            },\n\n            editandoDateInicio: false,\n            editandoHorarioFinal: false,\n            editandoDuracion: false,\n\n            mostrandoZonaRepetir: false,\n            periodoRepetir: \"diariamente\",\n            cantidadRepetir: 1,\n        }\n\n    },\n    methods: {\n        cerrarVentana() {\n            const indexEsteSubpath = this.tipoEvento === 'eventoPublico' ? this.$route.path.search(\"ventanaEventoPublico\") : this.tipoEvento === 'eventoPersonal' ? this.$route.path.search(\"ventanaEventoPersonal\") : null\n            if (!indexEsteSubpath) return;\n            const pathParent = this.$route.path.substring(0, indexEsteSubpath - 1);\n            this.$router.push(pathParent);\n        },\n        iniciarEdicionFechaInicio() {\n            if (!this.administrador && !this.usuarioSuperadministrador && !this.usuarioProfe) return;\n\n            console.log(\n                `Iniciando edicion de fecha inicio con ${this.fechaInicioString}`\n            );\n            this.$refs.inputFechaInicio.value = this.fechaInicioFormateada;\n            this.editandoFechaInicio = true;\n            this.$nextTick(() => {\n                this.$refs.inputFechaInicio.focus();\n            });\n        },\n        iniciarEdicionHoraInicio() {\n            if (!this.administrador && !this.usuarioSuperadministrador && !this.usuarioProfe) return;\n\n            this.$refs.inputHoraInicio.value = this.horaInicioLegible;\n            this.editandoHoraInicio = true;\n            this.$nextTick(() => {\n                this.$refs.inputHoraInicio.focus();\n            });\n        },\n        iniciarEdicionDuracion() {\n            if (!this.administrador && !this.usuarioSuperadministrador && !this.usuarioProfe) return;\n\n            console.log(`Iniciando edicion de duración con ${this.duracionMinutos}`);\n            this.$refs.inputDuracion.value = this.duracionMinutos;\n            this.editandoDuracion = true;\n            this.$nextTick(() => {\n                this.$refs.inputDuracion.focus();\n            });\n        },\n        updateDuracion(nuevaDuracion) {\n            console.log(`Updating duración to ${nuevaDuracion} minutos`);\n            const nuevoHorarioFinal = new Date(\n                this.dateInicio.getTime() + nuevaDuracion * 60000\n            );\n            this.enviarNuevoHorarioFinal(nuevoHorarioFinal);\n        },\n        enviarNuevoHorarioFinal(dateFinal) {\n            this.enviandoNuevoDateFinal = true;\n            this.enviandoSomeHorario = true;\n            console.log(`Enviando nuevo horario final: ${dateFinal}`);\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                    mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                        setDateFinalEvento(\n                        nuevoDate: $nuevoDate\n                        tipoEvento: $tipoEvento\n                        idEvento: $idEvento\n                        ){\n                                __typename\n                            ... on EventoPersonal{\n                                id\n                                horarioInicio\n                                horarioFinal\n                            }\n                            ... on EventoPublico{\n                                id\n                                horarioInicio\n                                horarioFinal\n                            }\n                        }\n                  }\n                `,\n                    variables: {\n                        nuevoDate: dateFinal,\n                        tipoEvento: this.esteEvento.__typename.charAt(0).toLowerCase() + this.esteEvento.__typename.slice(1),\n                        idEvento: this.esteEvento.id,\n                    },\n                })\n                .then(() => {\n\n                    this.enviandoNuevoDateFinal = false;\n                    this.enviandoSomeHorario = false;\n                    this.editandoDuracion = false;\n\n                })\n                .catch((error) => {\n                    console.log(`Error: ${error}`);\n                    this.enviandoNuevoDateFinal = false;\n                    this.enviandoSomeHorario = false;\n                });\n        },\n        updateHorarioInicio(e) {\n            const nuevoTime = e.target.value;\n            const horas = parseInt(nuevoTime.substring(0, 2));\n            const minutos = parseInt(nuevoTime.substring(3));\n            console.log(\n                `nuevoTime: ${nuevoTime}. ${horas} horas y ${minutos} minutos`\n            );\n            const actualDateFinal = new Date(this.esteEvento.horarioFinal);\n            var dateInicio = new Date(this.esteEvento.horarioInicio);\n            console.log(`Actual date: ${dateInicio}`);\n            dateInicio.setHours(horas);\n            dateInicio.setMinutes(minutos);\n            console.log(`Nueva date inicio: ${dateInicio}`);\n            if (dateInicio > actualDateFinal) {\n                return;\n            }\n\n            this.enviandoNuevoDateInicio = true;\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                  mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                    setDateInicioEvento(\n                      nuevoDate: $nuevoDate\n                      tipoEvento: $tipoEvento\n                      idEvento: $idEvento\n                    ){\n                        __typename\n                      ... on EventoPersonal{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      ... on EventoPublico{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                    }\n                  }\n                `,\n                    variables: {\n                        nuevoDate: dateInicio,\n                        tipoEvento: this.tipoEvento,\n                        idEvento: this.esteEvento.id,\n                    },\n                })\n                .then(() => {\n                    this.enviandoNuevoDateInicio = false;\n                    this.editandoDateInicio = false;\n                })\n                .catch((error) => {\n                    console.log(`Error: ${error}`);\n                    this.enviandoNuevoDateInicio = false;\n                });\n            // const nuevoDate=this.\n        },\n        iniciarEdicionHorarioFinal() {\n            if (!this.administrador && !this.usuarioSuperadministrador && !this.usuarioProfe) return;\n            console.log(`Iniciando edicion`);\n            this.$refs.inputHorarioFinal.value = this.horaFinalString;\n            this.editandoHorarioFinal = true;\n            this.$nextTick(() => {\n                this.$refs.inputHorarioFinal.focus();\n            });\n        },\n        updateHorarioFinal(e) {\n            const nuevoTime = e.target.value;\n            const horas = parseInt(nuevoTime.substring(0, 2));\n            const minutos = parseInt(nuevoTime.substring(3));\n            console.log(\n                `nuevoTime: ${nuevoTime}. ${horas} horas y ${minutos} minutos`\n            );\n            const actualDateInicio = new Date(this.esteEvento.horarioInicio);\n            var dateFinal = new Date(this.esteEvento.horarioFinal);\n            console.log(`Actual date: ${dateFinal}`);\n            dateFinal.setHours(horas);\n            dateFinal.setMinutes(minutos);\n            console.log(`Nueva date final: ${dateFinal}`);\n            if (dateFinal < actualDateInicio) {\n                return;\n            }\n\n            this.enviarNuevoHorarioFinal(dateFinal);\n            // const nuevoDate=this.\n        },\n        enviarNuevaDateInicioHoldDuration(nuevaDateInicio) {\n            this.enviandoNuevoDateInicio = true;\n            this.enviandoSomeHorario = true;\n            this.$apollo\n                .mutate({\n                    mutation: gql`\n                  mutation ($nuevoDate: Date!, $tipoEvento: String!, $idEvento: ID!) {\n                    setDateInicioEventoHoldDuration(\n                      nuevoDate: $nuevoDate\n                      tipoEvento: $tipoEvento\n                      idEvento: $idEvento\n                    ) {\n                      __typename\n                      ... on EventoPersonal{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      ... on EventoPublico{\n                        id\n                        horarioInicio\n                        horarioFinal\n                      }\n                      \n                    }\n                  }\n                `,\n                    variables: {\n                        nuevoDate: nuevaDateInicio,\n                        tipoEvento: this.tipoEvento,\n                        idEvento: this.esteEvento.id,\n                    },\n                })\n                .then(() => {\n                    this.$emit(\"eventoCambioFecha\", this.esteEvento);\n                    this.enviandoSomeHorario = false;\n                    this.enviandoNuevoDateInicio = false;\n                    this.editandoFechaInicio = false;\n                    this.editandoHoraInicio = false;\n                })\n                .catch((error) => {\n                    console.log(`Error: ${error}`);\n                    this.enviandoNuevoDateInicio = false;\n                    this.enviandoSomeHorario = false;\n                });\n        },\n        updateFechaInicioHoldDuration(nuevaFechaInicioFormateada) {\n            console.log(\n                `se hara update de fecha inicio holding duration. ${nuevaFechaInicioFormateada}`\n            );\n            const datosFecha = new Date(nuevaFechaInicioFormateada);\n            const nuevoDiaInicio = datosFecha.getUTCDate();\n            const nuevoMesInicio = datosFecha.getUTCMonth();\n            const nuevoYearInicio = datosFecha.getUTCFullYear();\n\n            var nuevaDateInicio = new Date(this.esteEvento.horarioInicio);\n            nuevaDateInicio.setDate(nuevoDiaInicio);\n            nuevaDateInicio.setMonth(nuevoMesInicio);\n            nuevaDateInicio.setFullYear(nuevoYearInicio);\n\n            console.log(`Quedará: ${nuevaDateInicio}`);\n\n            this.enviarNuevaDateInicioHoldDuration(nuevaDateInicio);\n        },\n        updateHoraInicioHoldDuration(nuevaHoraInicioFormateada) {\n            console.log(\n                `se hara update de hora inicio holding duration. ${nuevaHoraInicioFormateada}`\n            );\n            const horas = nuevaHoraInicioFormateada.substring(0, 2);\n            const minutos = nuevaHoraInicioFormateada.substring(3);\n\n            var nuevaDateInicio = new Date(this.esteEvento.horarioInicio);\n            nuevaDateInicio.setHours(horas);\n            nuevaDateInicio.setMinutes(minutos);\n\n            console.log(`Quedará: ${nuevaDateInicio}`);\n            this.enviarNuevaDateInicioHoldDuration(nuevaDateInicio);\n        },\n    },\n    computed: {\n        horaInicioString() {\n            return new Date(this.esteEvento.horarioInicio)\n                .toTimeString()\n                .substring(0, 5);\n        },\n        horaFinalString() {\n            return new Date(this.esteEvento.horarioFinal)\n                .toTimeString()\n                .substring(0, 5);\n        },\n    },\n}\n\n\nexport const MixinEventosPublicosUseEventosPersonalesUnder = {\n    props: {\n        idParent: String,\n        tipoParent: String,\n    },\n    data() {\n        return {\n            creandoEventoPersonalUnder: false,\n        }\n    },\n    methods: {\n        crearEventoPersonalUnder() {\n            console.log(`Creando evento personal under`);\n            this.creandoEventoPersonalUnder = true;\n\n            this.$apollo.mutate({\n                mutation: gql`\n                    mutation($infoEventoPersonal: InputCrearEventoPersonal){\n                        crearEventoPersonal(infoEventoPersonal:$infoEventoPersonal){\n                            ...fragEventoPersonal\n                        }\n                    }\n                ${fragmentoEventoPersonal}\n                `,\n                variables: {\n                    infoEventoPersonal: {\n                        idPersona: this.idUsuarioTarget,\n                        idEventoMarco: this.esteEvento.id,\n                        idParent: this.idParent,\n                        tipoParent: this.tipoParent\n                    }\n                }\n            }).then(({ data: { crearEventoPersonal } }) => {\n                this.creandoEventoPersonalUnder = false;\n                this.$emit('creadoEventoPersonal', crearEventoPersonal);\n\n            }).catch((error) => {\n                console.log(`Error: ${error}`);\n                this.creandoEventoPersonalUnder = false;\n            })\n        }\n    }\n}"]}]}