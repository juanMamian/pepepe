{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/Canvases.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/Canvases.vue","mtime":1643654906495},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZWR1Y2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb21lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvaG9tZS92aWRhMS93ZWJwai9wZXBlcGUvdnVlY2xpZW50ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgZGVib3VuY2UgPSByZXF1aXJlKCJkZWJvdW5jZSIpOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJDYW52YXNlcyIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vbnRhZG86IGZhbHNlLAogICAgICBsYXBpejogbnVsbCwKICAgICAgcG9zaWNpb25DYW52YXNUb2Rvc1ZpbmN1bG9zOiB7CiAgICAgICAgdG9wOiAwLAogICAgICAgIGxlZnQ6IDAKICAgICAgfSwKICAgICAgcG9zaWNpb25DYW52YXNBY3Rpdm86IHsKICAgICAgICB4OiAwLAogICAgICAgIHk6IDAKICAgICAgfQogICAgfTsKICB9LAogIHByb3BzOiB7CiAgICBub2RvU2VsZWNjaW9uYWRvOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiAiLTEiLAogICAgICAgICAgdmluY3Vsb3M6IFtdCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGlkc05lY2VzYXJpb3NQYXJhVGFyZ2V0OiBBcnJheSwKICAgIG5vZG9SZWxldmFudGU6IFtPYmplY3RdLAogICAgaWROb2RvVGFyZ2V0OiBTdHJpbmcsCiAgICB0b2Rvc05vZG9zOiBBcnJheSwKICAgIGNlbnRyb1Zpc3RhOiBPYmplY3QsCiAgICBhY3R1YWxpemFyOiBOdW1iZXIsCiAgICBjYWxsaW5nUG9zaWNpb25lczogQm9vbGVhbiwKICAgIGZhY3Rvclpvb206IE51bWJlcgogIH0sCiAgbWV0aG9kczogewogICAgY3JlYXJJbWFnZW5Qb3NpY2lvbmVzOiBmdW5jdGlvbiBjcmVhckltYWdlblBvc2ljaW9uZXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxhcGl6ID0gdGhpcy4kcmVmcy5jYW52YXNQb3NpY2lvbmVzLmdldENvbnRleHQoIjJkIik7CiAgICAgIHZhciBub2Rvc1JlbGV2YW50ZXMgPSB0aGlzLnRvZG9zTm9kb3M7CiAgICAgIGlmICh0aGlzLm5vZG9TZWxlY2Npb25hZG8gJiYgdGhpcy5ub2RvU2VsZWNjaW9uYWRvLmlkLmxlbmd0aCA+IDQpIG5vZG9zUmVsZXZhbnRlcyA9IFt0aGlzLm5vZG9TZWxlY2Npb25hZG9dOwogICAgICBpZiAobm9kb3NSZWxldmFudGVzIDw9IDEpIHJldHVybjsKICAgICAgdGhpcy5sYXBpei5jYW52YXMud2lkdGggPSBwYXJzZUludCh0aGlzLnNpemVDYW52YXNUb2Rvc1ZpbmN1bG9zLndpZHRoKTsKICAgICAgdGhpcy5sYXBpei5jYW52YXMuaGVpZ2h0ID0gcGFyc2VJbnQodGhpcy5zaXplQ2FudmFzVG9kb3NWaW5jdWxvcy5oZWlnaHQpOwogICAgICB0aGlzLmxhcGl6LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmxhcGl6LmNhbnZhcy53aWR0aCwgdGhpcy5sYXBpei5jYW52YXMuaGVpZ2h0KTsKICAgICAgdGhpcy5sYXBpei5saW5lV2lkdGggPSAyOwogICAgICB0aGlzLmxhcGl6LmJlZ2luUGF0aCgpOwogICAgICBub2Rvc1JlbGV2YW50ZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kbykgewogICAgICAgIF90aGlzLmxhcGl6LmJlZ2luUGF0aCgpOwoKICAgICAgICBfdGhpcy5sYXBpei5zdHJva2VTdHlsZSA9IG5vZG8uc3R1Y2sgPyAncmVkJyA6ICIjOTc2MWQyIjsKCiAgICAgICAgX3RoaXMubGFwaXoubW92ZVRvKG5vZG8uY29vcmRzLnggLSBfdGhpcy5wb3NpY2lvbkNhbnZhc0FjdGl2by54LCBub2RvLmNvb3Jkcy55IC0gX3RoaXMucG9zaWNpb25DYW52YXNBY3Rpdm8ueSk7CgogICAgICAgIF90aGlzLmxhcGl6LmxpbmVUbyhub2RvLmNlbnRyb01hc2EueCAtIF90aGlzLnBvc2ljaW9uQ2FudmFzQWN0aXZvLngsIG5vZG8uY2VudHJvTWFzYS55IC0gX3RoaXMucG9zaWNpb25DYW52YXNBY3Rpdm8ueSk7CgogICAgICAgIF90aGlzLmxhcGl6LmFyYyhub2RvLmNlbnRyb01hc2EueCAtIF90aGlzLnBvc2ljaW9uQ2FudmFzQWN0aXZvLngsIG5vZG8uY2VudHJvTWFzYS55IC0gX3RoaXMucG9zaWNpb25DYW52YXNBY3Rpdm8ueSwgMTAsIDAsIE1hdGguUEkgKiAyKTsKCiAgICAgICAgX3RoaXMubGFwaXouc3Ryb2tlKCk7CiAgICAgIH0pOwogICAgICB0aGlzLmxhcGl6LmJlZ2luUGF0aCgpOwogICAgICBub2Rvc1JlbGV2YW50ZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kbykgewogICAgICAgIGlmICghbm9kby5zdHVjaykgewogICAgICAgICAgX3RoaXMubGFwaXouc3Ryb2tlU3R5bGUgPSAnYmx1ZSc7CiAgICAgICAgICB2YXIgbm9kb3ggPSBub2RvLmNvb3Jkcy54IC0gX3RoaXMucG9zaWNpb25DYW52YXNBY3Rpdm8ueDsKICAgICAgICAgIHZhciBub2RveSA9IG5vZG8uY29vcmRzLnkgLSBfdGhpcy5wb3NpY2lvbkNhbnZhc0FjdGl2by55OwoKICAgICAgICAgIF90aGlzLmxhcGl6Lm1vdmVUbyhub2RveCwgbm9kb3kpOwoKICAgICAgICAgIHZhciB2ZWN0b3J4ID0gTWF0aC5jb3Mobm9kby5hbmd1bG8pICogMTAwOwogICAgICAgICAgdmFyIHZlY3RvcnkgPSBNYXRoLnNpbihub2RvLmFuZ3VsbykgKiAxMDA7CgogICAgICAgICAgX3RoaXMubGFwaXoubGluZVRvKG5vZG94ICsgdmVjdG9yeCwgbm9kb3kgKyB2ZWN0b3J5KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmxhcGl6LnN0cm9rZSgpOwogICAgfSwKICAgIGNyZWFySW1hZ2VuVG9kb3NWaW5jdWxvczogZnVuY3Rpb24gY3JlYXJJbWFnZW5Ub2Rvc1ZpbmN1bG9zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBub2Rvc1JlbGV2YW50ZXMgPSB0aGlzLnRvZG9zTm9kb3M7CgogICAgICBpZiAodGhpcy5pZE5vZG9UYXJnZXQpIHsKICAgICAgICBub2Rvc1JlbGV2YW50ZXMgPSB0aGlzLnRvZG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMyLmlkc05lY2VzYXJpb3NQYXJhVGFyZ2V0LmluY2x1ZGVzKG4uaWQpIHx8IG4uaWQgPT0gX3RoaXMyLmlkTm9kb1RhcmdldDsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKG5vZG9zUmVsZXZhbnRlcy5sZW5ndGggPD0gMSkgcmV0dXJuOwogICAgICB2YXIgbGFwaXogPSB0aGlzLiRyZWZzLmNhbnZhc1RvZG9zVmluY3Vsb3MuZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgbGFwaXouY2FudmFzLndpZHRoID0gdGhpcy5lc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MueDIgLSB0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy54MTsKICAgICAgbGFwaXouY2FudmFzLmhlaWdodCA9IHRoaXMuZXNxdWluYXNDYW52YXNUb2Rvc1ZpbmN1bG9zLnkyIC0gdGhpcy5lc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MueTE7CiAgICAgIHZhciBwb3NpY2lvbkNhbnZhcyA9IHsKICAgICAgICB4OiB0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy54MSwKICAgICAgICB5OiB0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy55MQogICAgICB9OwogICAgICBsYXBpei5saW5lV2lkdGggPSAxOwogICAgICBsYXBpei5jbGVhclJlY3QoMCwgMCwgbGFwaXouY2FudmFzLndpZHRoLCBsYXBpei5jYW52YXMuaGVpZ2h0KTsKICAgICAgbGFwaXouYmVnaW5QYXRoKCk7CiAgICAgIGxhcGl6LnN0cm9rZVN0eWxlID0gIiNiM2IzYjMiOwoKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZG9zUmVsZXZhbnRlcyksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBub2RvID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgdmFyIF9pdGVyYXRvcjIgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihub2RvLnZpbmN1bG9zKSwKICAgICAgICAgICAgICBfc3RlcDI7CgogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7CiAgICAgICAgICAgICAgdmFyIHZpbmN1bG8gPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgICAgaWYgKCFub2Rvc1JlbGV2YW50ZXMuc29tZShmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgcmV0dXJuIG4uaWQgPT0gdmluY3Vsby5pZFJlZjsKICAgICAgICAgICAgICB9KSkgcmV0dXJuICJjb250aW51ZSI7CgogICAgICAgICAgICAgIGlmICh2aW5jdWxvLnJvbCA9PSAic291cmNlIikgewogICAgICAgICAgICAgICAgX3RoaXMyLmRpYnVqYXJMaW5lYUVudHJlTm9kb3Mobm9kbywgbm9kb3NSZWxldmFudGVzLmZpbmQoZnVuY3Rpb24gKG5vZG8pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZG8uaWQgPT0gdmluY3Vsby5pZFJlZjsKICAgICAgICAgICAgICAgIH0pLCBsYXBpeiwgcG9zaWNpb25DYW52YXMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgdmFyIF9yZXQgPSBfbG9vcCgpOwoKICAgICAgICAgICAgICBpZiAoX3JldCA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CgogICAgICBsYXBpei5zdHJva2UoKTsKICAgIH0sCiAgICBjcmVhckltYWdlblZpbmN1bG9zU2VsZWNjaW9uYWRvOiBmdW5jdGlvbiBjcmVhckltYWdlblZpbmN1bG9zU2VsZWNjaW9uYWRvKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciBub2Rvc1JlbGV2YW50ZXMgPSB0aGlzLnRvZG9zTm9kb3M7CgogICAgICBpZiAodGhpcy5pZE5vZG9UYXJnZXQpIHsKICAgICAgICBub2Rvc1JlbGV2YW50ZXMgPSB0aGlzLnRvZG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXMzLmlkc05lY2VzYXJpb3NQYXJhVGFyZ2V0LmluY2x1ZGVzKG4uaWQpIHx8IG4uaWQgPT0gX3RoaXMzLmlkTm9kb1RhcmdldDsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKG5vZG9zUmVsZXZhbnRlcyA8PSAxKSByZXR1cm47CiAgICAgIHZhciBsYXBpeiA9IHRoaXMuJHJlZnMuY2FudmFzVmluY3Vsb3NTZWxlY2Npb25hZG8uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgbGFwaXouY2FudmFzLndpZHRoID0gdGhpcy5lc3F1aW5hc0NhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvLngyIC0gdGhpcy5lc3F1aW5hc0NhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvLngxOwogICAgICBsYXBpei5jYW52YXMuaGVpZ2h0ID0gdGhpcy5lc3F1aW5hc0NhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvLnkyIC0gdGhpcy5lc3F1aW5hc0NhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvLnkxOwogICAgICB2YXIgcG9zaWNpb25DYW52YXMgPSB7CiAgICAgICAgeDogdGhpcy5lc3F1aW5hc0NhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvLngxLAogICAgICAgIHk6IHRoaXMuZXNxdWluYXNDYW52YXNWaW5jdWxvc1NlbGVjY2lvbmFkby55MQogICAgICB9OwogICAgICBsYXBpei5jbGVhclJlY3QoMCwgMCwgbGFwaXouY2FudmFzLndpZHRoLCBsYXBpei5jYW52YXMuaGVpZ2h0KTsKCiAgICAgIGlmIChub2Rvc1JlbGV2YW50ZXMuc29tZShmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkID09IF90aGlzMy5ub2RvU2VsZWNjaW9uYWRvLmlkOwogICAgICB9KSkgewogICAgICAgIC8vTGluZWFzIHZlcmRlcyBkZSBwb3NpYmxpZGFkZXMKICAgICAgICBsYXBpei5iZWdpblBhdGgoKTsKICAgICAgICBsYXBpei5saW5lV2lkdGggPSAyOwogICAgICAgIGxhcGl6LnN0cm9rZVN0eWxlID0gIiMwMDgwMDAiOyAvL0xpbmVhcyB2ZXJkZXMgZGUgc2FsaWRhCgogICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5ub2RvU2VsZWNjaW9uYWRvLnZpbmN1bG9zKSwKICAgICAgICAgICAgX3N0ZXAzOwoKICAgICAgICB0cnkgewogICAgICAgICAgdmFyIF9sb29wMiA9IGZ1bmN0aW9uIF9sb29wMigpIHsKICAgICAgICAgICAgdmFyIHZpbmN1bG8gPSBfc3RlcDMudmFsdWU7CgogICAgICAgICAgICBpZiAoIW5vZG9zUmVsZXZhbnRlcy5zb21lKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG4uaWQgPT0gdmluY3Vsby5pZFJlZjsKICAgICAgICAgICAgfSkpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygiQUxFUlRBLiBWaW5jdWxvIGEgIi5jb25jYXQodmluY3Vsby5pZFJlZiwgIiBodWVyZmFubyIpKTsKICAgICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHZpbmN1bG8ucm9sID09ICJzb3VyY2UiKSB7CiAgICAgICAgICAgICAgdmFyIG90cm9Ob2RvID0gbm9kb3NSZWxldmFudGVzLmZpbmQoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgIHJldHVybiBuLmlkID09IHZpbmN1bG8uaWRSZWY7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIF90aGlzMy5kaWJ1amFyTGluZWFFbnRyZU5vZG9zKF90aGlzMy5ub2RvU2VsZWNjaW9uYWRvLCBvdHJvTm9kbywgbGFwaXosIHBvc2ljaW9uQ2FudmFzKTsKICAgICAgICAgICAgfQogICAgICAgICAgfTsKCiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX3JldDIgPSBfbG9vcDIoKTsKCiAgICAgICAgICAgIGlmIChfcmV0MiA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IzLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMy5mKCk7CiAgICAgICAgfQoKICAgICAgICBsYXBpei5zdHJva2UoKTsgLy9MaW5lYXMgcm9qYXMgZGUgZGVwZW5kZW5jaWFzCgogICAgICAgIGxhcGl6LmJlZ2luUGF0aCgpOwogICAgICAgIGxhcGl6LnN0cm9rZVN0eWxlID0gIiNiODBlMGUiOwoKICAgICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMubm9kb1NlbGVjY2lvbmFkby52aW5jdWxvcyksCiAgICAgICAgICAgIF9zdGVwNDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHZhciBfbG9vcDMgPSBmdW5jdGlvbiBfbG9vcDMoKSB7CiAgICAgICAgICAgIHZhciB2aW5jdWxvID0gX3N0ZXA0LnZhbHVlOwoKICAgICAgICAgICAgaWYgKCFub2Rvc1JlbGV2YW50ZXMuc29tZShmdW5jdGlvbiAobikgewogICAgICAgICAgICAgIHJldHVybiBuLmlkID09IHZpbmN1bG8uaWRSZWY7CiAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coIkFMRVJUQS4gVmluY3VsbyBhICIuY29uY2F0KHZpbmN1bG8uaWRSZWYsICIgaHVlcmZhbm8iKSk7CiAgICAgICAgICAgICAgcmV0dXJuICJjb250aW51ZSI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh2aW5jdWxvLnJvbCA9PSAidGFyZ2V0IikgewogICAgICAgICAgICAgIHZhciBvdHJvTm9kbyA9IG5vZG9zUmVsZXZhbnRlcy5maW5kKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbi5pZCA9PSB2aW5jdWxvLmlkUmVmOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBfdGhpczMuZGlidWphckxpbmVhRW50cmVOb2RvcyhvdHJvTm9kbywgX3RoaXMzLm5vZG9TZWxlY2Npb25hZG8sIGxhcGl6LCBwb3NpY2lvbkNhbnZhcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgZm9yIChfaXRlcmF0b3I0LnMoKTsgIShfc3RlcDQgPSBfaXRlcmF0b3I0Lm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIF9yZXQzID0gX2xvb3AzKCk7CgogICAgICAgICAgICBpZiAoX3JldDMgPT09ICJjb250aW51ZSIpIGNvbnRpbnVlOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgIH0KCiAgICAgICAgbGFwaXouc3Ryb2tlKCk7CiAgICAgIH0KICAgIH0sCiAgICBkaWJ1amFyTGluZWFFbnRyZU5vZG9zOiBmdW5jdGlvbiBkaWJ1amFyTGluZWFFbnRyZU5vZG9zKG5vZG9Gcm9tLCBub2RvVG8sIGxhcGl6LCBwb3NpY2lvbikgewogICAgICB2YXIgYW5ndWxvVmluY3VsbyA9IE1hdGguYXRhbigobm9kb1RvLmNvb3Jkcy55IC0gbm9kb0Zyb20uY29vcmRzLnkpIC8gKG5vZG9Uby5jb29yZHMueCAtIG5vZG9Gcm9tLmNvb3Jkcy54KSk7CiAgICAgIGlmIChub2RvVG8uY29vcmRzLnkgLSBub2RvRnJvbS5jb29yZHMueSA8IDAgJiYgbm9kb1RvLmNvb3Jkcy54IC0gbm9kb0Zyb20uY29vcmRzLnggPCAwKSBhbmd1bG9WaW5jdWxvICs9IE1hdGguUEk7CiAgICAgIGlmIChub2RvVG8uY29vcmRzLnkgLSBub2RvRnJvbS5jb29yZHMueSA+IDAgJiYgbm9kb1RvLmNvb3Jkcy54IC0gbm9kb0Zyb20uY29vcmRzLnggPCAwKSBhbmd1bG9WaW5jdWxvICs9IE1hdGguUEk7CiAgICAgIHZhciB6b25hTm9kbyA9IHsKICAgICAgICB4OiAyNSAqIE1hdGguY29zKGFuZ3Vsb1ZpbmN1bG8pLAogICAgICAgIHk6IDI1ICogTWF0aC5zaW4oYW5ndWxvVmluY3VsbykKICAgICAgfTsKICAgICAgdmFyIGluaWNpbyA9IHsKICAgICAgICB4OiAobm9kb0Zyb20uY29vcmRzLnggKyB6b25hTm9kby54KSAqIHRoaXMuZmFjdG9yWm9vbSAtIHBvc2ljaW9uLngsCiAgICAgICAgeTogKG5vZG9Gcm9tLmNvb3Jkcy55ICsgem9uYU5vZG8ueSkgKiB0aGlzLmZhY3Rvclpvb20gLSBwb3NpY2lvbi55CiAgICAgIH07CiAgICAgIHZhciBmaW5hbCA9IHsKICAgICAgICB4OiAobm9kb1RvLmNvb3Jkcy54IC0gem9uYU5vZG8ueCkgKiB0aGlzLmZhY3Rvclpvb20gLSBwb3NpY2lvbi54LAogICAgICAgIHk6IChub2RvVG8uY29vcmRzLnkgLSB6b25hTm9kby55KSAqIHRoaXMuZmFjdG9yWm9vbSAtIHBvc2ljaW9uLnkKICAgICAgfTsKICAgICAgbGFwaXoubW92ZVRvKGluaWNpby54LCBpbmljaW8ueSk7CiAgICAgIGxhcGl6LmxpbmVUbyhmaW5hbC54LCBmaW5hbC55KTsgLy9haG9yYSBsYSBmbGVjaGl0YQoKICAgICAgdmFyIGNlbnRybyA9IHsKICAgICAgICB4OiAoZmluYWwueCArIGluaWNpby54KSAvIDIsCiAgICAgICAgeTogKGZpbmFsLnkgKyBpbmljaW8ueSkgLyAyCiAgICAgIH07CiAgICAgIHZhciBsb25naXR1ZEFsYSA9IHBhcnNlSW50KDcgKiB0aGlzLmZhY3Rvclpvb20pOyAvL2FuZ3Vsb1ZpbmN1bG89YW5ndWxvVmluY3VsbyoxODAvTWF0aC5QSTsKCiAgICAgIHZhciBwdW50YUFsYUl6cXVpZXJkYSA9IHsKICAgICAgICB4OiBjZW50cm8ueCArIGxvbmdpdHVkQWxhICogTWF0aC5jb3MoYW5ndWxvVmluY3VsbyAtIDMgKiBNYXRoLlBJIC8gNCksCiAgICAgICAgeTogY2VudHJvLnkgKyBsb25naXR1ZEFsYSAqIE1hdGguc2luKGFuZ3Vsb1ZpbmN1bG8gLSAzICogTWF0aC5QSSAvIDQpCiAgICAgIH07CiAgICAgIHZhciBwdW50YUFsYURlcmVjaGEgPSB7CiAgICAgICAgeDogY2VudHJvLnggKyBsb25naXR1ZEFsYSAqIE1hdGguY29zKGFuZ3Vsb1ZpbmN1bG8gKyAzICogTWF0aC5QSSAvIDQpLAogICAgICAgIHk6IGNlbnRyby55ICsgbG9uZ2l0dWRBbGEgKiBNYXRoLnNpbihhbmd1bG9WaW5jdWxvICsgMyAqIE1hdGguUEkgLyA0KQogICAgICB9OwogICAgICBsYXBpei5tb3ZlVG8oY2VudHJvLngsIGNlbnRyby55KTsKICAgICAgbGFwaXoubGluZVRvKHB1bnRhQWxhSXpxdWllcmRhLngsIHB1bnRhQWxhSXpxdWllcmRhLnkpOwogICAgICBsYXBpei5tb3ZlVG8oY2VudHJvLngsIGNlbnRyby55KTsKICAgICAgbGFwaXoubGluZVRvKHB1bnRhQWxhRGVyZWNoYS54LCBwdW50YUFsYURlcmVjaGEueSk7CiAgICB9LAogICAgdHJhemFyVmluY3Vsb3NEZU5vZG9SZWN1cnNpdmFtZW50ZTogZnVuY3Rpb24gdHJhemFyVmluY3Vsb3NEZU5vZG9SZWN1cnNpdmFtZW50ZShpZE5vZG8sIHJvbCwgbml2ZWxlc1Jlc3RhbnRlcywgYmxhY2tsaXN0KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgbml2ZWxlc1Jlc3RhbnRlcy0tOwogICAgICB2YXIgZXN0ZU5vZG8gPSB0aGlzLnRvZG9zTm9kb3MuZmluZChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkID09IGlkTm9kbzsKICAgICAgfSk7CgogICAgICB2YXIgX2l0ZXJhdG9yNSA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKGVzdGVOb2RvLnZpbmN1bG9zKSwKICAgICAgICAgIF9zdGVwNTsKCiAgICAgIHRyeSB7CiAgICAgICAgdmFyIF9sb29wNCA9IGZ1bmN0aW9uIF9sb29wNCgpIHsKICAgICAgICAgIHZhciB2aW5jdWxvID0gX3N0ZXA1LnZhbHVlOwogICAgICAgICAgaWYgKHZpbmN1bG8ucm9sICE9IHJvbCkgcmV0dXJuICJjb250aW51ZSI7CgogICAgICAgICAgdmFyIG5vZG9SZWYgPSBfdGhpczQudG9kb3NOb2Rvcy5maW5kKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHJldHVybiBuLmlkID09IHZpbmN1bG8uaWRSZWY7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoIW5vZG9SZWYpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkFMRVJUQS4gaWRSZWYgZGVsIHZpbmN1bG8gbm8gZXN0YWJhIGVudHJlIGxvcyBub2RvcyIpOwogICAgICAgICAgICByZXR1cm4gImNvbnRpbnVlIjsKICAgICAgICAgIH0KCiAgICAgICAgICBibGFja2xpc3QucHVzaChub2RvUmVmLmlkKTsKCiAgICAgICAgICBpZiAocm9sID09ICJ0YXJnZXQiKSB7CiAgICAgICAgICAgIF90aGlzNC5kaWJ1amFyTGluZWFFbnRyZU5vZG9zKG5vZG9SZWYsIGVzdGVOb2RvKTsKCiAgICAgICAgICAgIGJsYWNrbGlzdC5wdXNoKG5vZG9SZWYuaWQpOwogICAgICAgICAgfSBlbHNlIGlmIChyb2wgPT0gInNvdXJjZSIpIHsKICAgICAgICAgICAgX3RoaXM0LmRpYnVqYXJMaW5lYUVudHJlTm9kb3MoZXN0ZU5vZG8sIG5vZG9SZWYpOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChuaXZlbGVzUmVzdGFudGVzID4gMCAmJiAhYmxhY2tsaXN0LnNvbWUoZnVuY3Rpb24gKGlkTikgewogICAgICAgICAgICByZXR1cm4gaWROID09IG5vZG9SZWYuaWQ7CiAgICAgICAgICB9KSkgewogICAgICAgICAgICBibGFja2xpc3QgPSBfdGhpczQudHJhemFyVmluY3Vsb3NEZU5vZG9SZWN1cnNpdmFtZW50ZShub2RvUmVmLmlkLCByb2wsIG5pdmVsZXNSZXN0YW50ZXMsIGJsYWNrbGlzdCk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBfcmV0NCA9IF9sb29wNCgpOwoKICAgICAgICAgIGlmIChfcmV0NCA9PT0gImNvbnRpbnVlIikgY29udGludWU7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3I1LmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3I1LmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGJsYWNrbGlzdDsKICAgIH0sCiAgICBkZWJUcmF6YXJWaW5jdWxvczogZGVib3VuY2UoZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmNyZWFySW1hZ2VuVG9kb3NWaW5jdWxvcygpOwogICAgfSwgMTAwMCkKICB9LAogIGNvbXB1dGVkOiB7CiAgICBlc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3M6IGZ1bmN0aW9uIGVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgbm9kb3NSZWxldmFudGVzID0gdGhpcy50b2Rvc05vZG9zOwoKICAgICAgaWYgKHRoaXMuaWROb2RvVGFyZ2V0KSB7CiAgICAgICAgbm9kb3NSZWxldmFudGVzID0gdGhpcy50b2Rvc05vZG9zLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgICAgcmV0dXJuIF90aGlzNS5pZHNOZWNlc2FyaW9zUGFyYVRhcmdldC5pbmNsdWRlcyhuLmlkKSB8fCBuLmlkID09IF90aGlzNS5pZE5vZG9UYXJnZXQ7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChub2Rvc1JlbGV2YW50ZXMubGVuZ3RoIDw9IDEpIHJldHVybiB7CiAgICAgICAgeDE6IDAsCiAgICAgICAgeTE6IDAsCiAgICAgICAgeDI6IDAsCiAgICAgICAgeTI6IDAKICAgICAgfTsKICAgICAgdmFyIGJvcmRlcyA9IHt9OwogICAgICBib3JkZXMudG9wID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZyhgUmVkdWNpZW5kbyAke24ubm9tYnJlfSBjb24gY29vcmRzOiAke24ucG9zaWNpb259YCk7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzLnkgPiBhY2MgPyBuLmNvb3Jkcy55IDogYWNjOwogICAgICB9LCAwKTsKICAgICAgYm9yZGVzLmJvdCA9IG5vZG9zUmVsZXZhbnRlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbikgewogICAgICAgIHJldHVybiBuLmNvb3Jkcy55IDwgYWNjID8gbi5jb29yZHMueSA6IGFjYzsKICAgICAgfSwgMCk7CiAgICAgIGJvcmRlcy5sZWZ0ID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzLnggPCBhY2MgPyBuLmNvb3Jkcy54IDogYWNjOwogICAgICB9LCAwKTsKICAgICAgYm9yZGVzLnJpZ2h0ID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzLnggPiBhY2MgPyBuLmNvb3Jkcy54IDogYWNjOwogICAgICB9LCAwKTsKICAgICAgcmV0dXJuIHsKICAgICAgICB4MTogYm9yZGVzLmxlZnQgKiB0aGlzLmZhY3Rvclpvb20sCiAgICAgICAgeTE6IGJvcmRlcy5ib3QgKiB0aGlzLmZhY3Rvclpvb20sCiAgICAgICAgeDI6IGJvcmRlcy5yaWdodCAqIHRoaXMuZmFjdG9yWm9vbSwKICAgICAgICB5MjogYm9yZGVzLnRvcCAqIHRoaXMuZmFjdG9yWm9vbQogICAgICB9OwogICAgfSwKICAgIG9mZnNldENhbnZhc1RvZG9zVmluY3Vsb3M6IGZ1bmN0aW9uIG9mZnNldENhbnZhc1RvZG9zVmluY3Vsb3MoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgbGVmdDogdGhpcy5lc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MueDEgKyAicHgiLAogICAgICAgIHRvcDogdGhpcy5lc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MueTEgKyAicHgiLAogICAgICAgIHdpZHRoOiB0aGlzLmVzcXVpbmFzQ2FudmFzVG9kb3NWaW5jdWxvcy54MiAtIHRoaXMuZXNxdWluYXNDYW52YXNUb2Rvc1ZpbmN1bG9zLngxICsgInB4IiwKICAgICAgICBoZWlnaHQ6IHRoaXMuZXNxdWluYXNDYW52YXNUb2Rvc1ZpbmN1bG9zLnkyIC0gdGhpcy5lc3F1aW5hc0NhbnZhc1RvZG9zVmluY3Vsb3MueTEgKyAicHgiCiAgICAgIH07CiAgICB9LAogICAgZXNxdWluYXNDYW52YXNWaW5jdWxvc1NlbGVjY2lvbmFkbzogZnVuY3Rpb24gZXNxdWluYXNDYW52YXNWaW5jdWxvc1NlbGVjY2lvbmFkbygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgbm9kb3NSZWxldmFudGVzID0gdGhpcy50b2Rvc05vZG9zLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkID09IF90aGlzNi5ub2RvU2VsZWNjaW9uYWRvLmlkIHx8IG4udmluY3Vsb3Muc29tZShmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuIHYuaWRSZWYgPT0gX3RoaXM2Lm5vZG9TZWxlY2Npb25hZG8uaWQ7CiAgICAgICAgfSk7CiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMuaWROb2RvVGFyZ2V0KSB7CiAgICAgICAgbm9kb3NSZWxldmFudGVzID0gbm9kb3NSZWxldmFudGVzLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgICAgcmV0dXJuIF90aGlzNi5pZHNOZWNlc2FyaW9zUGFyYVRhcmdldC5pbmNsdWRlcyhuLmlkKSB8fCBuLmlkID09IF90aGlzNi5pZE5vZG9UYXJnZXQ7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmIChub2Rvc1JlbGV2YW50ZXMubGVuZ3RoIDw9IDEpIHJldHVybiB7CiAgICAgICAgeDE6IDAsCiAgICAgICAgeTE6IDAsCiAgICAgICAgeDI6IDAsCiAgICAgICAgeTI6IDAKICAgICAgfTsKICAgICAgdmFyIGJvcmRlcyA9IHt9OwogICAgICBib3JkZXMudG9wID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgLy9jb25zb2xlLmxvZyhgUmVkdWNpZW5kbyAke24ubm9tYnJlfSBjb24gY29vcmRzOiAke24ucG9zaWNpb259YCk7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzLnkgPiBhY2MgPyBuLmNvb3Jkcy55IDogYWNjOwogICAgICB9LCAwKTsKICAgICAgYm9yZGVzLmJvdCA9IG5vZG9zUmVsZXZhbnRlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbikgewogICAgICAgIHJldHVybiBuLmNvb3Jkcy55IDwgYWNjID8gbi5jb29yZHMueSA6IGFjYzsKICAgICAgfSwgMCk7CiAgICAgIGJvcmRlcy5sZWZ0ID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzLnggPCBhY2MgPyBuLmNvb3Jkcy54IDogYWNjOwogICAgICB9LCAwKTsKICAgICAgYm9yZGVzLnJpZ2h0ID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzLnggPiBhY2MgPyBuLmNvb3Jkcy54IDogYWNjOwogICAgICB9LCAwKTsKICAgICAgcmV0dXJuIHsKICAgICAgICB4MTogYm9yZGVzLmxlZnQgKiB0aGlzLmZhY3Rvclpvb20sCiAgICAgICAgeTE6IGJvcmRlcy5ib3QgKiB0aGlzLmZhY3Rvclpvb20sCiAgICAgICAgeDI6IGJvcmRlcy5yaWdodCAqIHRoaXMuZmFjdG9yWm9vbSwKICAgICAgICB5MjogYm9yZGVzLnRvcCAqIHRoaXMuZmFjdG9yWm9vbQogICAgICB9OwogICAgfSwKICAgIG9mZnNldENhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvOiBmdW5jdGlvbiBvZmZzZXRDYW52YXNWaW5jdWxvc1NlbGVjY2lvbmFkbygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBsZWZ0OiB0aGlzLmVzcXVpbmFzQ2FudmFzVmluY3Vsb3NTZWxlY2Npb25hZG8ueDEgKyAicHgiLAogICAgICAgIHRvcDogdGhpcy5lc3F1aW5hc0NhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvLnkxICsgInB4IiwKICAgICAgICB3aWR0aDogdGhpcy5lc3F1aW5hc0NhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvLngyIC0gdGhpcy5lc3F1aW5hc0NhbnZhc1ZpbmN1bG9zU2VsZWNjaW9uYWRvLngxICsgInB4IiwKICAgICAgICBoZWlnaHQ6IHRoaXMuZXNxdWluYXNDYW52YXNWaW5jdWxvc1NlbGVjY2lvbmFkby55MiAtIHRoaXMuZXNxdWluYXNDYW52YXNWaW5jdWxvc1NlbGVjY2lvbmFkby55MSArICJweCIKICAgICAgfTsKICAgIH0sCiAgICBzaXplQ2FudmFzVG9kb3NWaW5jdWxvczogZnVuY3Rpb24gc2l6ZUNhbnZhc1RvZG9zVmluY3Vsb3MoKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIG5vZG9zUmVsZXZhbnRlcyA9IHRoaXMudG9kb3NOb2RvczsKCiAgICAgIGlmICh0aGlzLmlkTm9kb1RhcmdldCkgewogICAgICAgIG5vZG9zUmVsZXZhbnRlcyA9IHRoaXMudG9kb3NOb2Rvcy5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIHJldHVybiBfdGhpczcuaWRzTmVjZXNhcmlvc1BhcmFUYXJnZXQuaW5jbHVkZXMobi5pZCkgfHwgbi5pZCA9PSBfdGhpczcuaWROb2RvVGFyZ2V0OwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAobm9kb3NSZWxldmFudGVzLmxlbmd0aCA8PSAxKSByZXR1cm4gewogICAgICAgIHdpZHRoOiAiMHB4IiwKICAgICAgICBoZWlnaHQ6ICIwcHgiCiAgICAgIH07CiAgICAgIHZhciBib3JkZXNDYW52YXNUb2Rvc1ZpbmN1bG9zID0ge307CiAgICAgIGJvcmRlc0NhbnZhc1RvZG9zVmluY3Vsb3MudG9wID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzTWFudWFsZXMueSA+IGFjYyA/IG4uY29vcmRzTWFudWFsZXMueSA6IGFjYzsKICAgICAgfSwgMCk7CiAgICAgIGJvcmRlc0NhbnZhc1RvZG9zVmluY3Vsb3MuYm90ID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzTWFudWFsZXMueSA8IGFjYyA/IG4uY29vcmRzTWFudWFsZXMueSA6IGFjYzsKICAgICAgfSwgMCk7CiAgICAgIGJvcmRlc0NhbnZhc1RvZG9zVmluY3Vsb3MubGVmdCA9IG5vZG9zUmVsZXZhbnRlcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbikgewogICAgICAgIHJldHVybiBuLmNvb3Jkc01hbnVhbGVzLnggPCBhY2MgPyBuLmNvb3Jkc01hbnVhbGVzLnggOiBhY2M7CiAgICAgIH0sIDApOwogICAgICBib3JkZXNDYW52YXNUb2Rvc1ZpbmN1bG9zLnJpZ2h0ID0gbm9kb3NSZWxldmFudGVzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uY29vcmRzTWFudWFsZXMueCA+IGFjYyA/IG4uY29vcmRzTWFudWFsZXMueCA6IGFjYzsKICAgICAgfSwgMCk7CiAgICAgIHZhciBhbmNob0RpYWdyYW1hID0gcGFyc2VJbnQoYm9yZGVzQ2FudmFzVG9kb3NWaW5jdWxvcy5yaWdodCAtIGJvcmRlc0NhbnZhc1RvZG9zVmluY3Vsb3MubGVmdCk7CiAgICAgIHZhciBhbHRvRGlhZ3JhbWEgPSBwYXJzZUludChib3JkZXNDYW52YXNUb2Rvc1ZpbmN1bG9zLnRvcCAtIGJvcmRlc0NhbnZhc1RvZG9zVmluY3Vsb3MuYm90KTsKCiAgICAgIGlmIChhbmNob0RpYWdyYW1hID4gNTAwMCB8fCBhbHRvRGlhZ3JhbWEgPiA1MDAwKSB7CiAgICAgICAgY29uc29sZS5sb2coIkFMRVJUQS4gRGlhZ3JhbWEgZGVtYXNpYWRvIGdyYW5kZSIpOwogICAgICB9CgogICAgICB0aGlzLiRzZXQodGhpcy5wb3NpY2lvbkNhbnZhc1RvZG9zVmluY3Vsb3MsICJ5IiwgYm9yZGVzQ2FudmFzVG9kb3NWaW5jdWxvcy5ib3QpOwogICAgICB0aGlzLiRzZXQodGhpcy5wb3NpY2lvbkNhbnZhc1RvZG9zVmluY3Vsb3MsICJ4IiwgYm9yZGVzQ2FudmFzVG9kb3NWaW5jdWxvcy5sZWZ0KTsKICAgICAgcmV0dXJuIHsKICAgICAgICB3aWR0aDogYW5jaG9EaWFncmFtYSArICJweCIsCiAgICAgICAgaGVpZ2h0OiBhbHRvRGlhZ3JhbWEgKyAicHgiCiAgICAgIH07IC8vIHRoaXMuJHNldCh0aGlzLnNpemVDYW52YXNUb2Rvc1ZpbmN1bG9zLCAid2lkdGgiLCBhbmNob0RpYWdyYW1hICsgInB4Iik7CiAgICAgIC8vIHRoaXMuJHNldCh0aGlzLnNpemVDYW52YXNUb2Rvc1ZpbmN1bG9zLCAiaGVpZ2h0IiwgYWx0b0RpYWdyYW1hICsgInB4Iik7CiAgICB9LAogICAgZXN0aWxvUG9zaWNpb25SZWxhdGl2YUNhbnZhczogZnVuY3Rpb24gZXN0aWxvUG9zaWNpb25SZWxhdGl2YUNhbnZhcygpIHsKICAgICAgdmFyIHRvcCA9IHRoaXMucG9zaWNpb25DYW52YXNUb2Rvc1ZpbmN1bG9zLnkgLSB0aGlzLmNlbnRyb1Zpc3RhLnk7CiAgICAgIHZhciBsZWZ0ID0gdGhpcy5wb3NpY2lvbkNhbnZhc1RvZG9zVmluY3Vsb3MueCAtIHRoaXMuY2VudHJvVmlzdGEueDsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3A6IHRvcCArICJweCIsCiAgICAgICAgbGVmdDogbGVmdCArICJweCIKICAgICAgfTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB0b2Rvc05vZG9zOiBmdW5jdGlvbiB0b2Rvc05vZG9zKCkgewogICAgICBpZiAodGhpcy50b2Rvc05vZG9zLmxlbmd0aCA8IDEpIHJldHVybjsKICAgICAgdGhpcy5jcmVhckltYWdlblRvZG9zVmluY3Vsb3MoKTsKICAgICAgaWYgKHRoaXMuY2FsbGluZ1Bvc2ljaW9uZXMpIHRoaXMuY3JlYXJJbWFnZW5Qb3NpY2lvbmVzKCk7CiAgICAgIHRoaXMuY3JlYXJJbWFnZW5WaW5jdWxvc1NlbGVjY2lvbmFkbygpOwogICAgfSwKICAgIG5vZG9TZWxlY2Npb25hZG86IGZ1bmN0aW9uIG5vZG9TZWxlY2Npb25hZG8oKSB7CiAgICAgIGlmICghdGhpcy5jYWxsaW5nUG9zaWNpb25lcykgdGhpcy5jcmVhckltYWdlblZpbmN1bG9zU2VsZWNjaW9uYWRvKCk7CiAgICAgIGlmICh0aGlzLmNhbGxpbmdQb3NpY2lvbmVzKSB0aGlzLmNyZWFySW1hZ2VuUG9zaWNpb25lcygpOwogICAgfSwKICAgIGlkTm9kb1RhcmdldDogZnVuY3Rpb24gaWROb2RvVGFyZ2V0KCkgewogICAgICBjb25zb2xlLmxvZygiVHJhemFuZG8gdG9kb3Mgdlx4RURuY3Vsb3MgdGVuaWVuZG8gZW4gY3VlbnRhIGVsIHRhcmdldCIpOwogICAgICB0aGlzLmNyZWFySW1hZ2VuVG9kb3NWaW5jdWxvcygpOwogICAgfSwKICAgIGZhY3Rvclpvb206IGZ1bmN0aW9uIGZhY3Rvclpvb20oKSB7CiAgICAgIHRoaXMuZGViVHJhemFyVmluY3Vsb3MoKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLm1vbnRhZG8gPSB0cnVlOwogICAgdGhpcy5jcmVhckltYWdlblRvZG9zVmluY3Vsb3MoKTsKICAgIHRoaXMuY3JlYXJJbWFnZW5Qb3NpY2lvbmVzKCk7CiAgICB0aGlzLmNyZWFySW1hZ2VuVmluY3Vsb3NTZWxlY2Npb25hZG8oKTsKICB9Cn07"},{"version":3,"sources":["Canvases.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"canvases\">\n    <canvas\n      id=\"canvasTodosVinculos\"\n      ref=\"canvasTodosVinculos\"\n      :style=\"[offsetCanvasTodosVinculos]\"\n      class=\"canvas\"\n    ></canvas>\n    <canvas\n      id=\"canvasVinculosSeleccionado\"\n      ref=\"canvasVinculosSeleccionado\"\n      :style=\"[offsetCanvasVinculosSeleccionado]\"\n      class=\"canvas\"\n    ></canvas>\n    <canvas\n      id=\"canvasPosiciones\"\n      ref=\"canvasPosiciones\"\n      :style=\"[estiloPosicionRelativaCanvas, sizeCanvasTodosVinculos]\"\n      class=\"canvas\"\n      v-show=\"callingPosiciones\"\n    >\n\n    </canvas>\n  </div>\n</template>\n\n<script>\nvar debounce =require(\"debounce\");\n\n\nexport default {\n  name: \"Canvases\",\n  data() {\n    return {\n      montado: false,\n\n      lapiz: null,\n      posicionCanvasTodosVinculos: {\n        top: 0,\n        left: 0,\n      },      \n      posicionCanvasActivo: {\n        x: 0,\n        y: 0,\n      },\n    };\n  },\n  props: {\n    nodoSeleccionado: {\n      type: Object,\n      default() {\n        return {\n          id: \"-1\",\n          vinculos: [],\n        };\n      },\n    },\n    idsNecesariosParaTarget:Array,\n    nodoRelevante: [Object],\n    idNodoTarget: String,\n    todosNodos: Array,\n    centroVista: Object,\n    actualizar: Number,\n\n    callingPosiciones:Boolean,\n    factorZoom:Number,\n  },\n  methods: {\n    crearImagenPosiciones(){\n      \n      this.lapiz=this.$refs.canvasPosiciones.getContext(\"2d\")\n      var nodosRelevantes = this.todosNodos;\n\n      if(this.nodoSeleccionado && this.nodoSeleccionado.id.length>4) nodosRelevantes=[this.nodoSeleccionado];\n      if (nodosRelevantes <= 1) return;\n\n      this.lapiz.canvas.width=parseInt(this.sizeCanvasTodosVinculos.width);\n      this.lapiz.canvas.height=parseInt(this.sizeCanvasTodosVinculos.height);\n      \n      this.lapiz.clearRect(\n        0,\n        0,\n        this.lapiz.canvas.width,\n        this.lapiz.canvas.height\n      );\n\n      this.lapiz.lineWidth=2;\n      this.lapiz.beginPath();\n\n      nodosRelevantes.forEach(nodo=>{\n        this.lapiz.beginPath();\n        this.lapiz.strokeStyle = nodo.stuck?'red':\"#9761d2\";\n\n        this.lapiz.moveTo(nodo.coords.x -this.posicionCanvasActivo.x, nodo.coords.y-this.posicionCanvasActivo.y);\n        this.lapiz.lineTo(nodo.centroMasa.x - this.posicionCanvasActivo.x, nodo.centroMasa.y - this.posicionCanvasActivo.y);\n        this.lapiz.arc(nodo.centroMasa.x - this.posicionCanvasActivo.x, nodo.centroMasa.y - this.posicionCanvasActivo.y, 10, 0, Math.PI*2);\n        this.lapiz.stroke();     \n     })\n\n     this.lapiz.beginPath();    \n     nodosRelevantes.forEach(nodo=>{\n       if(!nodo.stuck){\n        this.lapiz.strokeStyle = 'blue';\n        let nodox=nodo.coords.x -this.posicionCanvasActivo.x;\n        let nodoy=nodo.coords.y-this.posicionCanvasActivo.y\n        this.lapiz.moveTo(nodox, nodoy);\n        \n        let vectorx=(Math.cos(nodo.angulo)*100);\n        let vectory=(Math.sin(nodo.angulo)*100);\n        \n        this.lapiz.lineTo(nodox+vectorx, nodoy+vectory);\n       }\n       \n     })\n     this.lapiz.stroke();\n\n    },\n    crearImagenTodosVinculos: function () {\n      var nodosRelevantes=this.todosNodos;\n      if (this.idNodoTarget) {\n        nodosRelevantes = this.todosNodos.filter(n=>this.idsNecesariosParaTarget.includes(n.id) || n.id==this.idNodoTarget);\n      }\n\n      if (nodosRelevantes.length <= 1) return \n\n      var lapiz = this.$refs.canvasTodosVinculos.getContext(\"2d\");\n                        \n      lapiz.canvas.width = this.esquinasCanvasTodosVinculos.x2 - this.esquinasCanvasTodosVinculos.x1;\n      lapiz.canvas.height = this.esquinasCanvasTodosVinculos.y2 - this.esquinasCanvasTodosVinculos.y1;\n\n      const posicionCanvas={\n        x: this.esquinasCanvasTodosVinculos.x1,\n        y: this.esquinasCanvasTodosVinculos.y1,\n      }\n      lapiz.lineWidth = 1;\n      lapiz.clearRect(0, 0, lapiz.canvas.width, lapiz.canvas.height);\n      lapiz.beginPath();\n      lapiz.strokeStyle = \"#b3b3b3\";\n      for (let nodo of nodosRelevantes) {\n        for (let vinculo of nodo.vinculos) {\n          if (!nodosRelevantes.some((n) => n.id == vinculo.idRef)) continue;\n          if (vinculo.rol == \"source\") {\n            this.dibujarLineaEntreNodos(\n              nodo,\n              nodosRelevantes.find((nodo) => nodo.id == vinculo.idRef),\n              lapiz,\n              posicionCanvas\n            );\n          }\n        }\n      }\n      lapiz.stroke();\n    },\n    crearImagenVinculosSeleccionado: function () {\n\n      var nodosRelevantes = this.todosNodos;\n\n      if (this.idNodoTarget) {\n        nodosRelevantes = this.todosNodos.filter(n=>this.idsNecesariosParaTarget.includes(n.id) || n.id==this.idNodoTarget);\n      }\n\n      if (nodosRelevantes <= 1) return;\n\n      var lapiz = this.$refs.canvasVinculosSeleccionado.getContext(\"2d\");\n\n      lapiz.canvas.width = this.esquinasCanvasVinculosSeleccionado.x2 - this.esquinasCanvasVinculosSeleccionado.x1;\n      lapiz.canvas.height = this.esquinasCanvasVinculosSeleccionado.y2 - this.esquinasCanvasVinculosSeleccionado.y1; \n\n      const posicionCanvas={\n        x: this.esquinasCanvasVinculosSeleccionado.x1,\n        y: this.esquinasCanvasVinculosSeleccionado.y1,\n      }\n\n      lapiz.clearRect(\n        0,\n        0,\n        lapiz.canvas.width,\n        lapiz.canvas.height\n      );\n\n      \n\n      if (nodosRelevantes.some((n) => n.id == this.nodoSeleccionado.id)) {\n        //Lineas verdes de posiblidades\n        lapiz.beginPath();\n        lapiz.lineWidth = 2;\n        lapiz.strokeStyle = \"#008000\";\n\n        //Lineas verdes de salida\n        for (let vinculo of this.nodoSeleccionado.vinculos) {\n          if (!nodosRelevantes.some((n) => n.id == vinculo.idRef)) {\n            console.log(`ALERTA. Vinculo a ${vinculo.idRef} huerfano`);\n            continue;\n          }\n          if (vinculo.rol == \"source\") {\n            let otroNodo = nodosRelevantes.find((n) => n.id == vinculo.idRef);\n            this.dibujarLineaEntreNodos(this.nodoSeleccionado, otroNodo, lapiz, posicionCanvas);\n          }\n        }\n        lapiz.stroke();\n        //Lineas rojas de dependencias\n\n        lapiz.beginPath();\n        lapiz.strokeStyle = \"#b80e0e\";\n        for (let vinculo of this.nodoSeleccionado.vinculos) {\n          if (!nodosRelevantes.some((n) => n.id == vinculo.idRef)) {\n            console.log(`ALERTA. Vinculo a ${vinculo.idRef} huerfano`);\n            continue;\n          }\n          if (vinculo.rol == \"target\") {\n            let otroNodo = nodosRelevantes.find((n) => n.id == vinculo.idRef);\n            this.dibujarLineaEntreNodos(otroNodo, this.nodoSeleccionado, lapiz, posicionCanvas);\n          }\n        }\n        lapiz.stroke();\n      }\n    },\n    dibujarLineaEntreNodos(nodoFrom, nodoTo, lapiz, posicion) {\n      \n      var anguloVinculo = Math.atan(\n        (nodoTo.coords.y - nodoFrom.coords.y) / (nodoTo.coords.x - nodoFrom.coords.x)\n      );\n\n      if (nodoTo.coords.y - nodoFrom.coords.y < 0 && nodoTo.coords.x - nodoFrom.coords.x < 0)\n        anguloVinculo += Math.PI;\n      if (nodoTo.coords.y - nodoFrom.coords.y > 0 && nodoTo.coords.x - nodoFrom.coords.x < 0)\n        anguloVinculo += Math.PI;\n\n      const zonaNodo={\n        x: 25*Math.cos(anguloVinculo),\n        y: 25*Math.sin(anguloVinculo)\n      }\n      \n      let inicio = {\n        x: ((nodoFrom.coords.x+zonaNodo.x)*this.factorZoom) - posicion.x,\n        y: ((nodoFrom.coords.y+zonaNodo.y)*this.factorZoom) - posicion.y,\n      };\n      let final = {\n        x: ((nodoTo.coords.x-zonaNodo.x)*this.factorZoom) - posicion.x,\n        y: ((nodoTo.coords.y-zonaNodo.y)*this.factorZoom) - posicion.y,\n      };\n\n      \n\n      lapiz.moveTo(inicio.x, inicio.y);\n      lapiz.lineTo(final.x, final.y);\n      //ahora la flechita\n      const centro = {\n        x: (final.x + inicio.x) / 2,\n        y: (final.y + inicio.y) / 2,\n      };\n      const longitudAla = parseInt(7*this.factorZoom);\n            \n\n      \n      //anguloVinculo=anguloVinculo*180/Math.PI;\n\n      const puntaAlaIzquierda = {\n        x: centro.x + longitudAla * Math.cos(anguloVinculo - (3 * Math.PI) / 4),\n        y: centro.y + longitudAla * Math.sin(anguloVinculo - (3 * Math.PI) / 4),\n      };\n      const puntaAlaDerecha = {\n        x: centro.x + longitudAla * Math.cos(anguloVinculo + (3 * Math.PI) / 4),\n        y: centro.y + longitudAla * Math.sin(anguloVinculo + (3 * Math.PI) / 4),\n      };\n      lapiz.moveTo(centro.x, centro.y);\n      lapiz.lineTo(puntaAlaIzquierda.x, puntaAlaIzquierda.y);\n      lapiz.moveTo(centro.x, centro.y);\n      lapiz.lineTo(puntaAlaDerecha.x, puntaAlaDerecha.y);\n    },\n    trazarVinculosDeNodoRecursivamente(\n      idNodo,\n      rol,\n      nivelesRestantes,\n      blacklist\n    ) {\n      nivelesRestantes--;\n      let esteNodo = this.todosNodos.find((n) => n.id == idNodo);\n\n      for (let vinculo of esteNodo.vinculos) {\n        if (vinculo.rol != rol) continue;\n        let nodoRef = this.todosNodos.find((n) => n.id == vinculo.idRef);\n        if (!nodoRef) {\n          console.log(`ALERTA. idRef del vinculo no estaba entre los nodos`);\n          continue;\n        }\n        blacklist.push(nodoRef.id);\n        if (rol == \"target\") {\n          this.dibujarLineaEntreNodos(nodoRef, esteNodo);\n          blacklist.push(nodoRef.id);\n        } else if (rol == \"source\") {\n          this.dibujarLineaEntreNodos(esteNodo, nodoRef);\n        }\n        if (\n          nivelesRestantes > 0 &&\n          !blacklist.some((idN) => idN == nodoRef.id)\n        ) {\n          blacklist = this.trazarVinculosDeNodoRecursivamente(\n            nodoRef.id,\n            rol,\n            nivelesRestantes,\n            blacklist\n          );\n        }\n      }\n      return blacklist;\n    },\n    debTrazarVinculos:debounce(function(){\n      this.crearImagenTodosVinculos();\n    }, 1000)\n  },\n  computed: {\n    esquinasCanvasTodosVinculos(){\n      var nodosRelevantes=this.todosNodos;\n\n      if (this.idNodoTarget) {\n        nodosRelevantes = this.todosNodos.filter(n=>this.idsNecesariosParaTarget.includes(n.id) || n.id==this.idNodoTarget);\n      }\n\n      if (nodosRelevantes.length <= 1) return {\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: 0,        \n      };\n\n      let bordes = {};\n      bordes.top = nodosRelevantes.reduce((acc, n) => {\n        //console.log(`Reduciendo ${n.nombre} con coords: ${n.posicion}`);\n        return n.coords.y > acc ? n.coords.y : acc;\n      }, 0);\n      bordes.bot = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.y < acc ? n.coords.y : acc;\n      }, 0);\n      bordes.left = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.x < acc ? n.coords.x : acc;\n      }, 0);\n      bordes.right = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.x > acc ? n.coords.x : acc;\n      }, 0);\n\n      return {\n        x1: bordes.left*this.factorZoom,\n        y1: bordes.bot*this.factorZoom,\n        x2: bordes.right*this.factorZoom,\n        y2: bordes.top*this.factorZoom\n      }\n    },\n    offsetCanvasTodosVinculos(){\n      return {\n        left:  this.esquinasCanvasTodosVinculos.x1 + \"px\",\n        top: this.esquinasCanvasTodosVinculos.y1 + \"px\",\n\n        width: (this.esquinasCanvasTodosVinculos.x2-this.esquinasCanvasTodosVinculos.x1) + \"px\",\n        height: (this.esquinasCanvasTodosVinculos.y2-this.esquinasCanvasTodosVinculos.y1) + \"px\",\n      }\n    },\n    esquinasCanvasVinculosSeleccionado(){\n      var nodosRelevantes=this.todosNodos.filter(n=>n.id==this.nodoSeleccionado.id || n.vinculos.some(v=>v.idRef==this.nodoSeleccionado.id));\n\n      if (this.idNodoTarget) {\n        nodosRelevantes = nodosRelevantes.filter(n=>this.idsNecesariosParaTarget.includes(n.id) || n.id==this.idNodoTarget);\n      }\n\n      if (nodosRelevantes.length <= 1) return {\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: 0,        \n      };\n\n      let bordes = {};\n      bordes.top = nodosRelevantes.reduce((acc, n) => {\n        //console.log(`Reduciendo ${n.nombre} con coords: ${n.posicion}`);\n        return n.coords.y > acc ? n.coords.y : acc;\n      }, 0);\n      bordes.bot = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.y < acc ? n.coords.y : acc;\n      }, 0);\n      bordes.left = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.x < acc ? n.coords.x : acc;\n      }, 0);\n      bordes.right = nodosRelevantes.reduce((acc, n) => {\n        return n.coords.x > acc ? n.coords.x : acc;\n      }, 0);\n\n      return {\n        x1: bordes.left*this.factorZoom,\n        y1: bordes.bot*this.factorZoom,\n        x2: bordes.right*this.factorZoom,\n        y2: bordes.top*this.factorZoom\n      }\n    },\n    offsetCanvasVinculosSeleccionado(){\n      return {\n        left:  this.esquinasCanvasVinculosSeleccionado.x1 + \"px\",\n        top: this.esquinasCanvasVinculosSeleccionado.y1 + \"px\",\n\n        width: (this.esquinasCanvasVinculosSeleccionado.x2-this.esquinasCanvasVinculosSeleccionado.x1) + \"px\",\n        height: (this.esquinasCanvasVinculosSeleccionado.y2-this.esquinasCanvasVinculosSeleccionado.y1) + \"px\",\n      }\n    },\n    sizeCanvasTodosVinculos(){\n      var nodosRelevantes = this.todosNodos;\n      if (this.idNodoTarget) {\n        nodosRelevantes = this.todosNodos.filter(n=>this.idsNecesariosParaTarget.includes(n.id) || n.id==this.idNodoTarget);\n      }\n\n      if (nodosRelevantes.length <= 1) return {\n        width:\"0px\",\n        height:\"0px\",\n      };\n\n      let bordesCanvasTodosVinculos = {};\n\n      bordesCanvasTodosVinculos.top = nodosRelevantes.reduce((acc, n) => {\n        return n.coordsManuales.y > acc ? n.coordsManuales.y : acc;\n      }, 0);\n      bordesCanvasTodosVinculos.bot = nodosRelevantes.reduce((acc, n) => {\n        return n.coordsManuales.y < acc ? n.coordsManuales.y : acc;\n      }, 0);\n      bordesCanvasTodosVinculos.left = nodosRelevantes.reduce((acc, n) => {\n        return n.coordsManuales.x < acc ? n.coordsManuales.x : acc;\n      }, 0);\n      bordesCanvasTodosVinculos.right = nodosRelevantes.reduce((acc, n) => {\n        return n.coordsManuales.x > acc ? n.coordsManuales.x : acc;\n      }, 0);\n\n      let anchoDiagrama = parseInt(\n        bordesCanvasTodosVinculos.right - bordesCanvasTodosVinculos.left\n      );\n      let altoDiagrama = parseInt(\n        bordesCanvasTodosVinculos.top - bordesCanvasTodosVinculos.bot\n      );\n\n      if (anchoDiagrama > 5000 || altoDiagrama > 5000) {\n        console.log(`ALERTA. Diagrama demasiado grande`);\n      }\n\n      this.$set(\n        this.posicionCanvasTodosVinculos,\n        \"y\",\n        bordesCanvasTodosVinculos.bot\n      );\n      this.$set(\n        this.posicionCanvasTodosVinculos,\n        \"x\",\n        bordesCanvasTodosVinculos.left\n      );\n\n      return {\n        width: anchoDiagrama+\"px\",\n        height: altoDiagrama+\"px\"\n      }\n      // this.$set(this.sizeCanvasTodosVinculos, \"width\", anchoDiagrama + \"px\");\n      // this.$set(this.sizeCanvasTodosVinculos, \"height\", altoDiagrama + \"px\");\n      \n      \n    },\n    estiloPosicionRelativaCanvas() {\n      let top = this.posicionCanvasTodosVinculos.y - this.centroVista.y;\n      let left = this.posicionCanvasTodosVinculos.x - this.centroVista.x;\n      return {\n        top: top + \"px\",\n        left: left + \"px\",\n      };\n    },\n  },\n  watch: {\n    todosNodos: function () {\n      if (this.todosNodos.length < 1) return;\n      this.crearImagenTodosVinculos();\n      if(this.callingPosiciones)this.crearImagenPosiciones();\n      this.crearImagenVinculosSeleccionado();\n    },\n    nodoSeleccionado: function () {\n      if(!this.callingPosiciones)this.crearImagenVinculosSeleccionado();\n      if(this.callingPosiciones)this.crearImagenPosiciones();\n\n    },\n    idNodoTarget() {\n      console.log(`Trazando todos vínculos teniendo en cuenta el target`);\n      this.crearImagenTodosVinculos();\n    },\n    factorZoom(){\n      this.debTrazarVinculos();\n    }\n  },\n  mounted() {\n    this.montado = true;\n    this.crearImagenTodosVinculos();\n    this.crearImagenPosiciones();\n    this.crearImagenVinculosSeleccionado();\n  },\n};\n</script>\n\n<style scoped>\n.canvas {\n  position: absolute;\n}\n\n#canvasTodosVinculos {\n  z-index: 0;\n}\n</style>"],"sourceRoot":"src/components/atlasConocimiento"}]}