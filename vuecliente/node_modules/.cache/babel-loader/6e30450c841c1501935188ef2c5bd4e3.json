{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/NodoGrado.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/usuario/NodoGrado.vue","mtime":1675084065131},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvdmlkYTEvd2VicGovcGVwZXBlL3Z1ZWNsaWVudGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCI7CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICBtdXRhdGlvbiAoJGlkVXN1YXJpbzogSUQhLCAkaWROb2RvOiBJRCEsICRudWV2b0VzdGFkbzogQm9vbGVhbiEpIHtcbiAgICAgICAgICAgICAgc2V0Tm9kb0dyYWRvQ29tcGxldGFkb1VzdWFyaW8oXG4gICAgICAgICAgICAgICAgaWRVc3VhcmlvOiAkaWRVc3VhcmlvXG4gICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvXG4gICAgICAgICAgICAgICAgbnVldm9Fc3RhZG86ICRudWV2b0VzdGFkb1xuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgIG5vZG9zQ29tcGxldGFkb3NSdXRhR3JhZG9cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBncWwgZnJvbSAnZ3JhcGhxbC10YWcnOwppbXBvcnQgTG9hZGluZyBmcm9tICcuLi91dGlsaWRhZGVzL0xvYWRpbmcudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmc6IExvYWRpbmcKICB9LAogIG5hbWU6ICJOb2RvR3JhZG8iLAogIHByb3BzOiB7CiAgICBlc3RlTm9kbzogT2JqZWN0LAogICAgY29tcGxldGFkbzogQm9vbGVhbiwKICAgIGNvbG9yU3VicnV0YTogU3RyaW5nLAogICAgc2VsZWNjaW9uYWRvOiBCb29sZWFuLAogICAgaWRVc3VhcmlvOiBTdHJpbmcKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZW51Q3g6IGZhbHNlLAogICAgICBtb3N0cmFuZG9EZXNjcmlwY2lvbjogZmFsc2UsCiAgICAgIHRvZ2dsaW5nRXN0YWRvQ29tcGxldGFkbzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29sb3JCb2xpdGE6IGZ1bmN0aW9uIGNvbG9yQm9saXRhKCkgewogICAgICB2YXIgYmFja2dyb3VuZENvbG9yID0gdGhpcy5jb2xvclN1YnJ1dGE7CgogICAgICBpZiAodGhpcy5jb21wbGV0YWRvKSB7CiAgICAgICAgYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWF0bGFzVmVyZGUpJzsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvcgogICAgICB9OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWJyaXJEZXNjcmlwY2lvbjogZnVuY3Rpb24gYWJyaXJEZXNjcmlwY2lvbigpIHsKICAgICAgdGhpcy4kZW1pdCgnc2VsZWNjaW9uYW1lJyk7CiAgICAgIHRoaXMubW9zdHJhbmRvRGVzY3JpcGNpb24gPSB0cnVlOwogICAgICB0aGlzLm1lbnVDeCA9IGZhbHNlOwogICAgfSwKICAgIGFicmlyTWVudUN4OiBmdW5jdGlvbiBhYnJpck1lbnVDeCgpIHsKICAgICAgdGhpcy4kZW1pdCgic2VsZWNjaW9uYW1lIik7CiAgICAgIHRoaXMubWVudUN4ID0gdHJ1ZTsKICAgIH0sCiAgICB0b2dnbGVDb21wbGV0YWRvOiBmdW5jdGlvbiB0b2dnbGVDb21wbGV0YWRvKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb1Byb2ZlKSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGF1dG9yaXphZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBudWV2b0VzdGFkbyA9ICF0aGlzLmNvbXBsZXRhZG87CiAgICAgIHRoaXMudG9nZ2xpbmdFc3RhZG9Db21wbGV0YWRvID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZFVzdWFyaW86IHRoaXMuaWRVc3VhcmlvLAogICAgICAgICAgaWROb2RvOiB0aGlzLmVzdGVOb2RvLmlkLAogICAgICAgICAgbnVldm9Fc3RhZG86IG51ZXZvRXN0YWRvCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy50b2dnbGluZ0VzdGFkb0NvbXBsZXRhZG8gPSBmYWxzZTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiICsgZXJyb3IpOwogICAgICAgIF90aGlzLnRvZ2dsaW5nRXN0YWRvQ29tcGxldGFkbyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY2Npb25hZG86IGZ1bmN0aW9uIHNlbGVjY2lvbmFkbyhfc2VsZWNjaW9uYWRvKSB7CiAgICAgIGlmICghX3NlbGVjY2lvbmFkbykgewogICAgICAgIHRoaXMubWVudUN4ID0gZmFsc2U7CiAgICAgICAgdGhpcy5tb3N0cmFuZG9EZXNjcmlwY2lvbiA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["NodoGrado.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,OAAA,GAAA,MAAA,aAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,OAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,WAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,QAAA,EAAA,MADA;AAEA,IAAA,UAAA,EAAA,OAFA;AAGA,IAAA,YAAA,EAAA,MAHA;AAIA,IAAA,YAAA,EAAA,OAJA;AAKA,IAAA,SAAA,EAAA;AALA,GAHA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,KADA;AAEA,MAAA,oBAAA,EAAA,KAFA;AAIA,MAAA,wBAAA,EAAA;AAJA,KAAA;AAMA,GAjBA;AAkBA,EAAA,QAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,UAAA,eAAA,GAAA,KAAA,YAAA;;AAEA,UAAA,KAAA,UAAA,EAAA;AACA,QAAA,eAAA,GAAA,mBAAA;AACA;;AAEA,aAAA;AACA,QAAA,eAAA,EAAA;AADA,OAAA;AAGA;AAXA,GAlBA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AACA,WAAA,KAAA,CAAA,cAAA;AACA,WAAA,oBAAA,GAAA,IAAA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,KALA;AAMA,IAAA,WANA,yBAMA;AACA,WAAA,KAAA,CAAA,cAAA;AACA,WAAA,MAAA,GAAA,IAAA;AACA,KATA;AAUA,IAAA,gBAVA,8BAUA;AAAA;;AACA,UAAA,CAAA,KAAA,yBAAA,IAAA,CAAA,KAAA,YAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,eAAA;AACA;AACA;;AAEA,UAAA,WAAA,GAAA,CAAA,KAAA,UAAA;AAEA,WAAA,wBAAA,GAAA,IAAA;AACA,WAAA,OAAA,CACA,MADA,CACA;AACA,QAAA,QAAA,EAAA,GAAA,mBADA;AAaA,QAAA,SAAA,EAAA;AACA,UAAA,SAAA,EAAA,KAAA,SADA;AAEA,UAAA,MAAA,EAAA,KAAA,QAAA,CAAA,EAFA;AAGA,UAAA,WAAA,EAAA;AAHA;AAbA,OADA,EAoBA,IApBA,CAoBA,YAAA;AACA,QAAA,KAAA,CAAA,wBAAA,GAAA,KAAA;AACA,OAtBA,EAuBA,KAvBA,CAuBA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,YAAA,KAAA;AACA,QAAA,KAAA,CAAA,wBAAA,GAAA,KAAA;AACA,OA1BA;AA2BA;AA9CA,GA/BA;AA+EA,EAAA,KAAA,EAAA;AACA,IAAA,YADA,wBACA,aADA,EACA;AACA,UAAA,CAAA,aAAA,EAAA;AACA,aAAA,MAAA,GAAA,KAAA;AACA,aAAA,oBAAA,GAAA,KAAA;AACA;AACA;AANA;AA/EA,CAAA","sourcesContent":["<template>\n  <div class=\"nodoGrado\" :class=\"seleccionado\" @contextmenu.prevent=\"abrirMenuCx\" @dblclick.stop=\"abrirDescripcion\">\n    <div id=\"laBolita\" :class=\"{seleccionado}\" :style=\"[colorBolita]\"></div>\n\n    <div id=\"cartel\">\n      {{ esteNodo.nombre }}\n      <div\n        class=\"boton\"\n        id=\"botonOpciones\"\n        v-if=\"usuarioSuperadministrador || usuarioProfe\"\n        v-show=\"seleccionado\"\n        @click.stop=\"abrirMenuCx\"\n      >\n        <img\n          src=\"@/assets/iconos/ellipsisVertical.svg\"\n          alt=\"Opciones\"\n          style=\"\"\n        />\n      </div>\n    </div>\n\n    <div class=\"menuContextual\" @click.stop=\"\" v-show=\"menuCx\">\n      <div\n        class=\"botonMenuCx\"\n        @click=\"abrirDescripcion\"\n      >\n        Ver descripci√≥n\n      </div>\n      <div\n        class=\"botonMenuCx\"\n        v-if=\"usuarioSuperadministrador || usuarioProfe\"\n        :class=\"{deshabilitado: togglingEstadoCompletado}\"\n        @click=\"toggleCompletado\"\n      >\n      <loading v-show=\"togglingEstadoCompletado\" />\n        {{\n          completado ? \"Desmarcar como completado\" : \"Marcar como completado\"\n        }}\n      </div>\n    </div>\n\n    <div id=\"descripcion\" v-show=\"mostrandoDescripcion\">\n      {{ esteNodo.descripcion }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from 'graphql-tag';\nimport Loading from '../utilidades/Loading.vue';\nexport default {\n  components: { Loading },\n  name: \"NodoGrado\",\n  props: {\n    esteNodo: Object,\n    completado: Boolean,\n    colorSubruta:String,\n    seleccionado: Boolean,\n    idUsuario: String,\n  },\n  data() {\n    return {\n      menuCx: false,\n      mostrandoDescripcion: false,\n\n      togglingEstadoCompletado:false,\n    };\n  },\n  computed: {    \n    colorBolita(){\n        var backgroundColor=this.colorSubruta;\n\n        if(this.completado){\n            backgroundColor='var(--atlasVerde)';\n        }\n\n        return {\n            backgroundColor,\n        }\n    }\n  },\n  methods: {\n    abrirDescripcion(){\n      this.$emit('seleccioname');\n      this.mostrandoDescripcion=true;\n      this.menuCx=false;\n    },\n    abrirMenuCx(){\n      this.$emit(\"seleccioname\");\n      this.menuCx=true;\n    },\n    toggleCompletado() {\n      if (!this.usuarioSuperadministrador && !this.usuarioProfe) {\n        console.log(\"No autorizado\");\n        return;\n      }\n\n      const nuevoEstado = !this.completado;\n\n      this.togglingEstadoCompletado = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!, $idNodo: ID!, $nuevoEstado: Boolean!) {\n              setNodoGradoCompletadoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n                nuevoEstado: $nuevoEstado\n              ) {\n                id\n                nodosCompletadosRutaGrado\n              }\n            }\n          `,\n          variables: {\n            idUsuario: this.idUsuario,\n            idNodo: this.esteNodo.id,\n            nuevoEstado,\n          },\n        })\n        .then(() => {\n          this.togglingEstadoCompletado = false;\n        })\n        .catch((error) => {\n          console.log(\"Error: \" + error);\n          this.togglingEstadoCompletado = false;\n        });\n    },\n  },\n  watch: {\n    seleccionado(seleccionado) {\n      if (!seleccionado) {\n        this.menuCx = false;\n        this.mostrandoDescripcion = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.nodoGrado {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  align-items: center;\n  position: relative;\n}\n\n.nodoGrado.seleccionado{\n  z-index: 1;\n}\n\n#laBolita {\n  border-radius: 50%;\n  border: 1px solid var(--gris);\n  width: 30px;\n  height: 30px;\n  flex-shrink: 0;\n  background-color: var(--gris);\n}\n\n#laBolita:not(.seleccionado){\n  border-color: var(--gris);\n}\n\n#laBolita.seleccionado{\n  border-color: black;\n}\n\n#cartel {\n  font-size: 15px;\n  text-align: center;\n  border-radius: 10px;\n  background-color: whitesmoke;\n  padding: 10px 10px;\n  color: rgb(59, 59, 59);\n  position: relative;\n  max-width: 160px;\n}\n\n#botonOpciones {\n  position: absolute;\n  top: 50%;\n  left: calc(100% + 5px);\n  transform: translateY(-50%);\n}\n\n.menuContextual{\n    position: absolute;\n    top: 50%;\n    left: 50%;\n}\n\n#descripcion{\n  position: absolute;\n  top: calc(100% - 10px);\n  z-index: 1;\n  padding: 10px 10px;\n  background-color: whitesmoke;\n}\n</style>"],"sourceRoot":"src/components/usuario"}]}