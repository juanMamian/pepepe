{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/ItemRepaso.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/ItemRepaso.vue","mtime":1648741729541},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCBmcm9tICIvaG9tZS92aWRhMS93ZWJwai9wZXBlcGUvdnVlY2xpZW50ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdGFnZ2VkVGVtcGxhdGVMaXRlcmFsIjsKCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdCgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkaWRVc3VhcmlvOiBJRCEsICRpZE5vZG86IElEISwgJGludGVydmFsbzogSW50KSB7XG4gICAgICAgICAgICAgIGNyZWFySXRlcmFjaW9uUmVwYXNvTm9kb0Nvbm9jaW1pZW50b1VzdWFyaW8oXG4gICAgICAgICAgICAgICAgaWRVc3VhcmlvOiAkaWRVc3VhcmlvXG4gICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvXG4gICAgICAgICAgICAgICAgaW50ZXJ2YWxvOiAkaW50ZXJ2YWxvXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgaXRlcmFjaW9uZXNSZXBhc28ge1xuICAgICAgICAgICAgICAgICAgaWRcbiAgICAgICAgICAgICAgICAgIGludGVydmFsb1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTG9hZGluZyBmcm9tICIuLi91dGlsaWRhZGVzL0xvYWRpbmcudnVlIjsKaW1wb3J0IEl0ZXJhY2lvblJlcGFzbyBmcm9tICIuL0l0ZXJhY2lvblJlcGFzby52dWUiOwppbXBvcnQgeyBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TIH0gZnJvbSAiLi9BdGxhc0Nvbm9jaW1pZW50by52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgSXRlcmFjaW9uUmVwYXNvOiBJdGVyYWNpb25SZXBhc28sCiAgICBMb2FkaW5nOiBMb2FkaW5nCiAgfSwKICBuYW1lOiAiSXRlbVJlcGFzbyIsCiAgcHJvcHM6IHsKICAgIGVzdGVSZXBhc286IE9iamVjdCwKICAgIG1vc3RyYXJSZXBhc29zOiBCb29sZWFuCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY3JlYW5kb0l0ZXJhY2lvbjogZmFsc2UKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjcmVhckl0ZXJhY2lvbjogZnVuY3Rpb24gY3JlYXJJdGVyYWNpb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgaW50ZXJ2YWxvID0gbnVsbDsKICAgICAgdGhpcy5jcmVhbmRvSXRlcmFjaW9uID0gdHJ1ZTsKICAgICAgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZFVzdWFyaW86IHRoaXMudXN1YXJpby5pZCwKICAgICAgICAgIGlkTm9kbzogdGhpcy5lc3RlUmVwYXNvLmlkTm9kbywKICAgICAgICAgIGludGVydmFsbzogaW50ZXJ2YWxvCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5jcmVhbmRvSXRlcmFjaW9uID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzLmNyZWFuZG9JdGVyYWNpb24gPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGVsaW1pbmFySXRlcmFjaW9uQ2FjaGU6IGZ1bmN0aW9uIGVsaW1pbmFySXRlcmFjaW9uQ2FjaGUoaWRJdGVyYWNpb24pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgc3RvcmUgPSB0aGlzLiRhcG9sbG8ucHJvdmlkZXIuZGVmYXVsdENsaWVudDsKICAgICAgdmFyIGNhY2hlID0gc3RvcmUucmVhZFF1ZXJ5KHsKICAgICAgICBxdWVyeTogUVVFUllfREFUT1NfVVNVQVJJT19OT0RPUwogICAgICB9KTsKICAgICAgdmFyIG51ZXZvQ2FjaGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGNhY2hlKSk7CiAgICAgIHZhciBlbERhdG9Ob2RvID0gbnVldm9DYWNoZS55by5hdGxhcy5kYXRvc05vZG9zLmZpbmQoZnVuY3Rpb24gKGRuKSB7CiAgICAgICAgcmV0dXJuIGRuLmlkID09PSBfdGhpczIuZXN0ZVJlcGFzby5pZDsKICAgICAgfSk7CiAgICAgIHZhciBpbmRleEkgPSBlbERhdG9Ob2RvLml0ZXJhY2lvbmVzUmVwYXNvLmZpbmRJbmRleChmdW5jdGlvbiAoaSkgewogICAgICAgIHJldHVybiBpLmlkID09PSBpZEl0ZXJhY2lvbjsKICAgICAgfSk7CgogICAgICBpZiAoaW5kZXhJID4gLTEpIHsKICAgICAgICBlbERhdG9Ob2RvLml0ZXJhY2lvbmVzUmVwYXNvLnNwbGljZShpbmRleEksIDEpOwogICAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MsCiAgICAgICAgICBkYXRhOiBudWV2b0NhY2hlCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIkxhIGl0ZXJhY2lceEYzbiBubyBlc3RhYmEgZW4gY2FjaFx4RTkiKTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbG9yQmFycmFTdXBlcmlvcjogZnVuY3Rpb24gY29sb3JCYXJyYVN1cGVyaW9yKCkgewogICAgICB2YXIgY29sb3IgPSAidHJhbnNwYXJlbnQiOwoKICAgICAgaWYgKHRoaXMubW9zdHJhclJlcGFzb3MpIHsKICAgICAgICBjb2xvciA9ICJ2YXIoLS1tYWluQ29sb3IpIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yCiAgICAgIH07CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy4kZW1pdCgiaW5pY2lhZG8iKTsKICB9Cn07"},{"version":3,"sources":["ItemRepaso.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,OAAA,GAAA,MAAA,aAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,OAAA,eAAA,MAAA,uBAAA;AACA,SAAA,yBAAA,QAAA,yBAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,eAAA,EAAA,eAAA;AAAA,IAAA,OAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,YAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,UAAA,EAAA,MADA;AAEA,IAAA,cAAA,EAAA;AAFA,GAHA;AAOA,EAAA,IAPA,kBAOA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA;AADA,KAAA;AAGA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AACA,UAAA,SAAA,GAAA,IAAA;AACA,WAAA,gBAAA,GAAA,IAAA;AACA,WAAA,OAAA,CACA,MADA,CACA;AACA,QAAA,QAAA,EAAA,GAAA,mBADA;AAgBA,QAAA,SAAA,EAAA;AACA,UAAA,SAAA,EAAA,KAAA,OAAA,CAAA,EADA;AAEA,UAAA,MAAA,EAAA,KAAA,UAAA,CAAA,MAFA;AAGA,UAAA,SAAA,EAAA;AAHA;AAhBA,OADA,EAuBA,IAvBA,CAuBA,YAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,KAAA;AACA,OAzBA,EA0BA,KA1BA,CA0BA,UAAA,KAAA,EAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,KAAA;AACA,QAAA,OAAA,CAAA,GAAA,kBAAA,KAAA;AACA,OA7BA;AA8BA,KAlCA;AAmCA,IAAA,sBAnCA,kCAmCA,WAnCA,EAmCA;AAAA;;AACA,UAAA,KAAA,GAAA,KAAA,OAAA,CAAA,QAAA,CAAA,aAAA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,SAAA,CAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA,CAAA;AAGA,UAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,CAAA;AACA,UAAA,UAAA,GAAA,UAAA,CAAA,EAAA,CAAA,KAAA,CAAA,UAAA,CAAA,IAAA,CACA,UAAA,EAAA;AAAA,eAAA,EAAA,CAAA,EAAA,KAAA,MAAA,CAAA,UAAA,CAAA,EAAA;AAAA,OADA,CAAA;AAGA,UAAA,MAAA,GAAA,UAAA,CAAA,iBAAA,CAAA,SAAA,CAAA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,WAAA;AAAA,OAAA,CAAA;;AACA,UAAA,MAAA,GAAA,CAAA,CAAA,EAAA;AACA,QAAA,UAAA,CAAA,iBAAA,CAAA,MAAA,CAAA,MAAA,EAAA,CAAA;AACA,QAAA,KAAA,CAAA,UAAA,CAAA;AACA,UAAA,KAAA,EAAA,yBADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,OANA,MAMA;AACA,QAAA,OAAA,CAAA,GAAA;AACA;AACA;AAtDA,GAZA;AAoEA,EAAA,QAAA,EAAA;AACA,IAAA,kBADA,gCACA;AACA,UAAA,KAAA,GAAA,aAAA;;AACA,UAAA,KAAA,cAAA,EAAA;AACA,QAAA,KAAA,GAAA,kBAAA;AACA;;AACA,aAAA;AACA,QAAA,eAAA,EAAA;AADA,OAAA;AAGA;AATA,GApEA;AA+EA,EAAA,OA/EA,qBA+EA;AACA,SAAA,KAAA,CAAA,UAAA;AACA;AAjFA,CAAA","sourcesContent":["<template>\n  <div class=\"itemRepaso\">\n    <div id=\"barraSuperior\" :style=\"[colorBarraSuperior]\">\n      <div id=\"nombre\">\n        {{ esteRepaso.nombreNodo }}\n      </div>\n      <div id=\"bloqueBotones\" class=\"contenedorControles\">\n        <div\n          class=\"boton\"\n          title=\"Abrir\"\n          @click=\"\n            $router.push({\n              name: 'visorNodoConocimiento',\n              params: { idNodo: esteRepaso.idNodo },\n            })\n          \"\n        >\n          <img src=\"@/assets/iconos/expand.svg\" alt=\"Expandir\" />\n        </div>\n        <div class=\"boton\" title=\"Ver en el atlas\" @click=\"$emit('centrarEnNodo')\">\n          <img src=\"@/assets/iconos/nodos.svg\" alt=\"Nodos\" />\n        </div>\n        <div\n          class=\"boton\"\n          title=\"Programar repasos\"\n          @click=\"$emit('toggleAbierto')\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n          <path\n            d=\"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z\"\n            :fill=\"esteRepaso.porcentajeIntervaloTranscurrido>=100?'var(--atlasConocimientoRepaso)':''\"\n          />\n        </svg>\n        </div>\n      </div>\n    </div>\n    <div id=\"zonaIteraciones\" v-show=\"mostrarRepasos\">\n      <div id=\"listaIteraciones\">\n        <iteracion-repaso\n          v-for=\"(iteracion, index) of esteRepaso.iteracionesRepaso\"\n          :key=\"iteracion.id\"\n          :primero=\"index===0\"\n          :porcentajeIntervaloTranscurrido=\"esteRepaso.porcentajeIntervaloTranscurrido\"\n          :urgente=\"index===0 && Date.now()>(new Date(esteRepaso.estudiado).getTime()+iteracion.intervalo)\"\n          :estaIteracion=\"iteracion\"\n          :idNodo=\"esteRepaso.idNodo\"\n          @meElimine=\"eliminarIteracionCache(iteracion.id)\"\n        />\n        <div\n        class=\"boton\"\n        title=\"Crear nuevo repaso\"\n        id=\"botonCrearIteracionRepaso\"\n        v-show=\"!creandoIteracion\"\n        @click=\"crearIteracion\"\n      >\n        <img src=\"@/assets/iconos/plusCircle.svg\" alt=\"Plus\" />\n      </div>\n      <loading texto=\"\" v-show=\"creandoIteracion\" />\n      </div>\n      \n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport Loading from \"../utilidades/Loading.vue\";\nimport IteracionRepaso from \"./IteracionRepaso.vue\";\nimport { QUERY_DATOS_USUARIO_NODOS } from \"./AtlasConocimiento.vue\";\n\nexport default {\n  components: { IteracionRepaso, Loading },\n  name: \"ItemRepaso\",\n  props: {\n    esteRepaso: Object,\n    mostrarRepasos: Boolean\n  },\n  data() {\n    return {\n      creandoIteracion: false,\n    };\n  },\n  methods: {\n    crearIteracion() {\n      var intervalo = null;\n      this.creandoIteracion = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idUsuario: ID!, $idNodo: ID!, $intervalo: Int) {\n              crearIteracionRepasoNodoConocimientoUsuario(\n                idUsuario: $idUsuario\n                idNodo: $idNodo\n                intervalo: $intervalo\n              ) {\n                id\n                iteracionesRepaso {\n                  id\n                  intervalo\n                }\n              }\n            }\n          `,\n          variables: {\n            idUsuario: this.usuario.id,\n            idNodo: this.esteRepaso.idNodo,\n            intervalo: intervalo,\n          },\n        })\n        .then(() => {\n          this.creandoIteracion = false;\n        })\n        .catch((error) => {\n          this.creandoIteracion = false;\n          console.log(`Error: ${error}`);\n        });\n    },\n    eliminarIteracionCache(idIteracion) {      \n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n      var elDatoNodo = nuevoCache.yo.atlas.datosNodos.find(\n        (dn) => dn.id === this.esteRepaso.id\n      );\n      var indexI = elDatoNodo.iteracionesRepaso.findIndex((i) => i.id === idIteracion);\n      if (indexI > -1) {\n        elDatoNodo.iteracionesRepaso.splice(indexI, 1);\n        store.writeQuery({\n          query: QUERY_DATOS_USUARIO_NODOS,\n          data: nuevoCache,\n        });\n      } else {\n        console.log(`La iteración no estaba en caché`);\n      }\n    },\n  },\n  computed:{\n    colorBarraSuperior(){\n      var color=\"transparent\"\n      if(this.mostrarRepasos){\n        color=\"var(--mainColor)\";\n      }\n      return {\n        backgroundColor: color\n      }\n    }\n  },\n  mounted(){\n    this.$emit(\"iniciado\");\n  }\n};\n</script>\n\n<style scoped>\n#barraSuperior {\n  display: flex;\n  padding: 20px 5px;\n  padding-left: 15px;\n  align-items: center;\n  font-family: Salsa, cursive;\n}\n.contenedorControles {\n  margin-left: auto;\n}\n#listaIteraciones {\n  display: flex;\n  flex-wrap: wrap;\n  padding: 20px 5px;\n  background-color: rgb(216, 216, 216);\n  align-items: center;\n}\n#botonCrearIteracionRepaso{\n  height: 28px;\n  margin: 0px 10px;\n}\n</style>"],"sourceRoot":"src/components/atlasConocimiento"}]}