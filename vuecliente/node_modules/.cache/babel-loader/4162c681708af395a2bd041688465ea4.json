{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/VentanaRepasos.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/VentanaRepasos.vue","mtime":1675084065131},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL3ZpZGExL3dlYnBqL3BlcGVwZS92dWVjbGllbnRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgUVVFUllfREFUT1NfVVNVQVJJT19OT0RPUyB9IGZyb20gIi4vQXRsYXNDb25vY2ltaWVudG8udnVlIjsKaW1wb3J0IEl0ZW1SZXBhc28gZnJvbSAiLi9JdGVtUmVwYXNvLnZ1ZSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBJdGVtUmVwYXNvOiBJdGVtUmVwYXNvCiAgfSwKICBuYW1lOiAiVmVudGFuYVJlcGFzb3MiLAogIHByb3BzOiB7CiAgICB5bzogT2JqZWN0LAogICAgZGF0b3NOb2Rvc1JlcGFzYXI6IEFycmF5LAogICAgZGF0b3NOb2Rvc1VyZ2VudGVzOiBBcnJheQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlkUmVwYXNvQWJpZXJ0bzogbnVsbCwKICAgICAgaW5pY2lhZG9zOiAwLAogICAgICBzY3JvbGxJbmRleDogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGVsaW1pbmFyUmVwYXNvQ2FjaGU6IGZ1bmN0aW9uIGVsaW1pbmFyUmVwYXNvQ2FjaGUoaWRSZXBhc28pIHsKICAgICAgdmFyIHN0b3JlID0gdGhpcy4kYXBvbGxvLnByb3ZpZGVyLmRlZmF1bHRDbGllbnQ7CiAgICAgIHZhciBjYWNoZSA9IHN0b3JlLnJlYWRRdWVyeSh7CiAgICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MKICAgICAgfSk7CiAgICAgIHZhciBudWV2b0NhY2hlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjYWNoZSkpOwogICAgICB2YXIgaW5kZXhJID0gbnVldm9DYWNoZS55by5hdGxhcy5yZXBhc29zLmZpbmRJbmRleChmdW5jdGlvbiAocikgewogICAgICAgIHJldHVybiByLmlkID09PSBpZFJlcGFzbzsKICAgICAgfSk7CgogICAgICBpZiAoaW5kZXhJID4gLTEpIHsKICAgICAgICBudWV2b0NhY2hlLnlvLmF0bGFzLnJlcGFzb3Muc3BsaWNlKGluZGV4SSwgMSk7CiAgICAgICAgc3RvcmUud3JpdGVRdWVyeSh7CiAgICAgICAgICBxdWVyeTogUVVFUllfREFUT1NfVVNVQVJJT19OT0RPUywKICAgICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygiRWwgcmVwYXNvIG5vIGVzdGFiYSBlbiBjYWNoXHhFOSIpOwogICAgICB9CiAgICB9LAogICAgdG9nZ2xlUmVwYXNvQWJpZXJ0bzogZnVuY3Rpb24gdG9nZ2xlUmVwYXNvQWJpZXJ0byhpZFJlcGFzbykgewogICAgICBpZiAoaWRSZXBhc28gPT09IHRoaXMuaWRSZXBhc29BYmllcnRvKSB7CiAgICAgICAgdGhpcy5pZFJlcGFzb0FiaWVydG8gPSBudWxsOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaWRSZXBhc29BYmllcnRvID0gaWRSZXBhc287CiAgICAgIH0KICAgIH0sCiAgICBjb250YXJJbmljaWFkb3M6IGZ1bmN0aW9uIGNvbnRhckluaWNpYWRvcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuaW5pY2lhZG9zKys7CiAgICAgIGNvbnNvbGUubG9nKCJJbmljaWFkb3M6ICIuY29uY2F0KHRoaXMuaW5pY2lhZG9zKSk7CgogICAgICBpZiAodGhpcy5pbmljaWFkb3MgPT09IHRoaXMuZGF0b3NOb2Rvc1JlcGFzYXIubGVuZ3RoKSB7CiAgICAgICAgY29uc29sZS5sb2coIlRvZG9zIGNvbXBsZXRvcyIpOwoKICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkUmVwYXNvKSB7CiAgICAgICAgICB2YXIgaW5kZXhSID0gdGhpcy5ub2Rvc1JlcGFzYXJPcmRlbmFkb3MuZmluZEluZGV4KGZ1bmN0aW9uIChucikgewogICAgICAgICAgICByZXR1cm4gbnIuaWQgPT09IF90aGlzLiRyb3V0ZS5wYXJhbXMuaWRSZXBhc287CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAoaW5kZXhSID4gLTEpIHsKICAgICAgICAgICAgdGhpcy5zY3JvbGxJbmRleCA9IGluZGV4UjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBub2Rvc1JlcGFzYXJPcmRlbmFkb3M6IGZ1bmN0aW9uIG5vZG9zUmVwYXNhck9yZGVuYWRvcygpIHsKICAgICAgdmFyIGRhdG9zID0gdGhpcy5kYXRvc05vZG9zUmVwYXNhci5tYXAoZnVuY3Rpb24gKGRuKSB7CiAgICAgICAgdmFyIHRpZW1wb1Jlc3RhbnRlVG9SZXBhc28gPSBuZXcgRGF0ZShkbi5lc3R1ZGlhZG8pLmdldFRpbWUoKSArIGRuLnBlcmlvZG9SZXBhc28gLSBEYXRlLm5vdygpOwogICAgICAgIHZhciBwb3JjZW50YWplSW50ZXJ2YWxvUmVzdGFudGUgPSBNYXRoLnJvdW5kKHRpZW1wb1Jlc3RhbnRlVG9SZXBhc28gKiAxMDAgLyBkbi5wZXJpb2RvUmVwYXNvKTsKICAgICAgICB2YXIgcG9yY2VudGFqZUludGVydmFsb1RyYW5zY3VycmlkbyA9IDEwMCAtIHBvcmNlbnRhamVJbnRlcnZhbG9SZXN0YW50ZTsKICAgICAgICBpZiAocG9yY2VudGFqZUludGVydmFsb1RyYW5zY3VycmlkbyA+IDEwMCkgcG9yY2VudGFqZUludGVydmFsb1RyYW5zY3VycmlkbyA9IDEwMDsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBkbiksIHt9LCB7CiAgICAgICAgICB0aWVtcG9SZXN0YW50ZVRvUmVwYXNvOiB0aWVtcG9SZXN0YW50ZVRvUmVwYXNvLAogICAgICAgICAgcG9yY2VudGFqZUludGVydmFsb1Jlc3RhbnRlOiBwb3JjZW50YWplSW50ZXJ2YWxvUmVzdGFudGUsCiAgICAgICAgICBwb3JjZW50YWplSW50ZXJ2YWxvVHJhbnNjdXJyaWRvOiBwb3JjZW50YWplSW50ZXJ2YWxvVHJhbnNjdXJyaWRvCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBkYXRvcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEudGllbXBvUmVzdGFudGVUb1JlcGFzbyAtIGIudGllbXBvUmVzdGFudGVUb1JlcGFzbzsKICAgICAgfSk7CiAgICAgIHJldHVybiBkYXRvczsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICBjb25zb2xlLmxvZygiTW9udGFkYSBjb24gaWQgcmVwYXNvOiAiLmNvbmNhdCh0aGlzLiRyb3V0ZS5wYXJhbXMuaWRSZXBhc28pKTsKICAgIHRoaXMuaWRSZXBhc29BYmllcnRvID0gdGhpcy4kcm91dGUucGFyYW1zLmlkUmVwYXNvOwoKICAgIGlmICh0aGlzLnNjcm9sbEluZGV4KSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKCJTY3JvbGxpbmcgaW50byB2aWV3IGVsIGl0ZW0gIi5jb25jYXQoX3RoaXMyLnNjcm9sbEluZGV4KSk7CgogICAgICAgIF90aGlzMi4kcmVmcy5pdGVtc1JlcGFzb1tfdGhpczIuc2Nyb2xsSW5kZXhdLiRlbC5zY3JvbGxJbnRvVmlldygpOwogICAgICB9LCA1MDApOwogICAgfQogIH0KfTs="},{"version":3,"sources":["VentanaRepasos.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,SAAA,yBAAA,QAAA,yBAAA;AACA,OAAA,UAAA,MAAA,kBAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,UAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,gBAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA,MADA;AAEA,IAAA,iBAAA,EAAA,KAFA;AAGA,IAAA,kBAAA,EAAA;AAHA,GAHA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,eAAA,EAAA,IADA;AAEA,MAAA,SAAA,EAAA,CAFA;AAGA,MAAA,WAAA,EAAA;AAHA,KAAA;AAKA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,+BACA,QADA,EACA;AACA,UAAA,KAAA,GAAA,KAAA,OAAA,CAAA,QAAA,CAAA,aAAA;AACA,UAAA,KAAA,GAAA,KAAA,CAAA,SAAA,CAAA;AACA,QAAA,KAAA,EAAA;AADA,OAAA,CAAA;AAGA,UAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,CAAA;AACA,UAAA,MAAA,GAAA,UAAA,CAAA,EAAA,CAAA,KAAA,CAAA,OAAA,CAAA,SAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,EAAA,KAAA,QAAA;AAAA,OADA,CAAA;;AAGA,UAAA,MAAA,GAAA,CAAA,CAAA,EAAA;AACA,QAAA,UAAA,CAAA,EAAA,CAAA,KAAA,CAAA,OAAA,CAAA,MAAA,CAAA,MAAA,EAAA,CAAA;AACA,QAAA,KAAA,CAAA,UAAA,CAAA;AACA,UAAA,KAAA,EAAA,yBADA;AAEA,UAAA,IAAA,EAAA;AAFA,SAAA;AAIA,OANA,MAMA;AACA,QAAA,OAAA,CAAA,GAAA;AACA;AACA,KAnBA;AAoBA,IAAA,mBApBA,+BAoBA,QApBA,EAoBA;AACA,UAAA,QAAA,KAAA,KAAA,eAAA,EAAA;AACA,aAAA,eAAA,GAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,eAAA,GAAA,QAAA;AACA;AACA,KA1BA;AA2BA,IAAA,eA3BA,6BA2BA;AAAA;;AACA,WAAA,SAAA;AACA,MAAA,OAAA,CAAA,GAAA,sBAAA,KAAA,SAAA;;AACA,UAAA,KAAA,SAAA,KAAA,KAAA,iBAAA,CAAA,MAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA;;AACA,YAAA,KAAA,MAAA,CAAA,MAAA,CAAA,QAAA,EAAA;AACA,cAAA,MAAA,GAAA,KAAA,qBAAA,CAAA,SAAA,CACA,UAAA,EAAA;AAAA,mBAAA,EAAA,CAAA,EAAA,KAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,QAAA;AAAA,WADA,CAAA;;AAGA,cAAA,MAAA,GAAA,CAAA,CAAA,EAAA;AACA,iBAAA,WAAA,GAAA,MAAA;AACA;AACA;AACA;AACA;AAzCA,GAfA;AA0DA,EAAA,QAAA,EAAA;AACA,IAAA,qBADA,mCACA;AACA,UAAA,KAAA,GAAA,KAAA,iBAAA,CAAA,GAAA,CAAA,UAAA,EAAA,EAAA;AACA,YAAA,sBAAA,GACA,IAAA,IAAA,CAAA,EAAA,CAAA,SAAA,EAAA,OAAA,KACA,EAAA,CAAA,aADA,GAEA,IAAA,CAAA,GAAA,EAHA;AAKA,YAAA,2BAAA,GAAA,IAAA,CAAA,KAAA,CACA,sBAAA,GAAA,GAAA,GAAA,EAAA,CAAA,aADA,CAAA;AAGA,YAAA,+BAAA,GAAA,MAAA,2BAAA;AACA,YAAA,+BAAA,GAAA,GAAA,EACA,+BAAA,GAAA,GAAA;AACA,+CACA,EADA;AAEA,UAAA,sBAAA,EAAA,sBAFA;AAGA,UAAA,2BAAA,EAAA,2BAHA;AAIA,UAAA,+BAAA,EAAA;AAJA;AAMA,OAlBA,CAAA;AAoBA,MAAA,KAAA,CAAA,IAAA,CAAA,UAAA,CAAA,EAAA,CAAA;AAAA,eAAA,CAAA,CAAA,sBAAA,GAAA,CAAA,CAAA,sBAAA;AAAA,OAAA;AACA,aAAA,KAAA;AACA;AAxBA,GA1DA;AAoFA,EAAA,OApFA,qBAoFA;AAAA;;AACA,IAAA,OAAA,CAAA,GAAA,kCAAA,KAAA,MAAA,CAAA,MAAA,CAAA,QAAA;AACA,SAAA,eAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,QAAA;;AACA,QAAA,KAAA,WAAA,EAAA;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,OAAA,CAAA,GAAA,uCAAA,MAAA,CAAA,WAAA;;AACA,QAAA,MAAA,CAAA,KAAA,CAAA,WAAA,CAAA,MAAA,CAAA,WAAA,EAAA,GAAA,CAAA,cAAA;AACA,OAHA,EAGA,GAHA,CAAA;AAIA;AACA;AA7FA,CAAA","sourcesContent":["<template>\n  <div class=\"ventanaRepasos\">\n    <div id=\"barraSuperior\">\n      <div id=\"titulo\">Temas para repasar</div>\n      <div\n        class=\"boton\"\n        id=\"botonCerrar\"\n        title=\"Cerrar\"\n        @click=\"$router.push({ name: 'atlas' })\"\n      >\n        <img src=\"@/assets/iconos/equis.svg\" alt=\"Equis\" />\n      </div>\n    </div>\n    <div id=\"zonaTemas\">\n      <div id=\"listaTemas\">\n        <item-repaso\n          v-for=\"repaso of nodosRepasarOrdenados\"\n          :key=\"repaso.id\"\n          ref=\"itemsRepaso\"\n          :esteRepaso=\"repaso\"\n          :mostrarRepasos=\"idRepasoAbierto === repaso.id\"\n          @iniciado=\"contarIniciados\"\n          @toggleAbierto=\"toggleRepasoAbierto(repaso.id)\"\n          @meElimine=\"eliminarRepasoCache(repaso.id)\"\n          @centrarEnNodo=\"$emit('centrarEnNodo', repaso.idNodo)\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { QUERY_DATOS_USUARIO_NODOS } from \"./AtlasConocimiento.vue\";\nimport ItemRepaso from \"./ItemRepaso.vue\";\nexport default {\n  components: { ItemRepaso },\n  name: \"VentanaRepasos\",\n  props: {\n    yo: Object,\n    datosNodosRepasar: Array,\n    datosNodosUrgentes: Array,\n  },\n  data() {\n    return {\n      idRepasoAbierto: null,\n      iniciados: 0,\n      scrollIndex: null,\n    };\n  },\n  methods: {\n    eliminarRepasoCache(idRepaso) {\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n      var indexI = nuevoCache.yo.atlas.repasos.findIndex(\n        (r) => r.id === idRepaso\n      );\n      if (indexI > -1) {\n        nuevoCache.yo.atlas.repasos.splice(indexI, 1);\n        store.writeQuery({\n          query: QUERY_DATOS_USUARIO_NODOS,\n          data: nuevoCache,\n        });\n      } else {\n        console.log(`El repaso no estaba en caché`);\n      }\n    },\n    toggleRepasoAbierto(idRepaso) {\n      if (idRepaso === this.idRepasoAbierto) {\n        this.idRepasoAbierto = null;\n      } else {\n        this.idRepasoAbierto = idRepaso;\n      }\n    },\n    contarIniciados() {\n      this.iniciados++;\n      console.log(`Iniciados: ${this.iniciados}`);\n      if (this.iniciados === this.datosNodosRepasar.length) {\n        console.log(`Todos completos`);\n        if (this.$route.params.idRepaso) {\n          const indexR = this.nodosRepasarOrdenados.findIndex(\n            (nr) => nr.id === this.$route.params.idRepaso\n          );\n          if (indexR > -1) {\n            this.scrollIndex = indexR;\n          }\n        }\n      }\n    },\n  },\n  computed: {\n    nodosRepasarOrdenados() {\n      var datos = this.datosNodosRepasar.map((dn) => {\n        var tiempoRestanteToRepaso =\n          new Date(dn.estudiado).getTime() +\n          dn.periodoRepaso -\n          Date.now();\n\n        var porcentajeIntervaloRestante = Math.round(\n          (tiempoRestanteToRepaso * 100) / dn.periodoRepaso\n        );\n        var porcentajeIntervaloTranscurrido = 100 - porcentajeIntervaloRestante;\n        if (porcentajeIntervaloTranscurrido > 100)\n          porcentajeIntervaloTranscurrido = 100;\n        return {\n          ...dn,\n          tiempoRestanteToRepaso,\n          porcentajeIntervaloRestante,\n          porcentajeIntervaloTranscurrido,\n        };\n      });\n\n      datos.sort((a, b) => a.tiempoRestanteToRepaso - b.tiempoRestanteToRepaso);\n      return datos;\n    },\n  },\n  mounted() {\n    console.log(`Montada con id repaso: ${this.$route.params.idRepaso}`);\n    this.idRepasoAbierto = this.$route.params.idRepaso;\n    if (this.scrollIndex) {\n      setTimeout(() => {\n        console.log(`Scrolling into view el item ${this.scrollIndex}`);\n        this.$refs.itemsRepaso[this.scrollIndex].$el.scrollIntoView();\n      }, 500);\n    }\n  },\n};\n</script>\n\n<style scoped>\n.ventanaRepasos {\n  width: min(500px, 100vw);\n}\n#barraSuperior {\n  display: flex;\n  padding: 10px;\n  font-family: Salsa, cursive;\n  font-size: 20px;\n}\n#botonCerrar {\n  margin-left: auto;\n}\n#listaTemas {\n  padding-bottom: 100px;\n  overflow-y: scroll;\n  height: min(700px, 80vh);\n}\n</style>"],"sourceRoot":"src/components/atlasConocimiento"}]}