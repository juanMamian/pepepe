{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/AtlasConocimiento.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/AtlasConocimiento.vue","mtime":1676563818636},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5tYXRoLmh5cG90LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3ZpZGExL3dlYnBqL3BlcGVwZS92dWVjbGllbnRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0IF90eXBlb2YgZnJvbSAiL2hvbWUvdmlkYTEvd2VicGovcGVwZXBlL3Z1ZWNsaWVudGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciBmcm9tICIvaG9tZS92aWRhMS93ZWJwai9wZXBlcGUvdnVlY2xpZW50ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL2hvbWUvdmlkYTEvd2VicGovcGVwZXBlL3Z1ZWNsaWVudGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwgZnJvbSAiL2hvbWUvdmlkYTEvd2VicGovcGVwZXBlL3Z1ZWNsaWVudGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbCI7CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxNigpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkdGlwbzogU3RyaW5nISwgJGlkTm9kb0Zyb206IElEISwgJGlkTm9kb1RvOiBJRCEpIHtcbiAgICAgICAgICAgICAgY3JlYXJWaW5jdWxvKFxuICAgICAgICAgICAgICAgIHRpcG86ICR0aXBvXG4gICAgICAgICAgICAgICAgaWRTb3VyY2U6ICRpZE5vZG9Gcm9tXG4gICAgICAgICAgICAgICAgaWRUYXJnZXQ6ICRpZE5vZG9Ub1xuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBtb2RpZmljYWRvcyB7XG4gICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgdmluY3Vsb3Mge1xuICAgICAgICAgICAgICAgICAgICBpZFJlZlxuICAgICAgICAgICAgICAgICAgICByb2xcbiAgICAgICAgICAgICAgICAgICAgdGlwb1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTYgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxNigpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxNSgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvRnJvbTogSUQhLCAkaWROb2RvVG86IElEISkge1xuICAgICAgICAgICAgICBlbGltaW5hclZpbmN1bG9Gcm9tVG8oXG4gICAgICAgICAgICAgICAgaWRTb3VyY2U6ICRpZE5vZG9Gcm9tXG4gICAgICAgICAgICAgICAgaWRUYXJnZXQ6ICRpZE5vZG9Ub1xuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBtb2RpZmljYWRvcyB7XG4gICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgdmluY3Vsb3Mge1xuICAgICAgICAgICAgICAgICAgICBpZFJlZlxuICAgICAgICAgICAgICAgICAgICB0aXBvXG4gICAgICAgICAgICAgICAgICAgIHJvbFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTUgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxNSgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxNCgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIHF1ZXJ5IHtcbiAgICAgICAgICAgICAgeW8ge1xuICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgYXRsYXMge1xuICAgICAgICAgICAgICAgICAgY2VudHJvVmlzdGEge1xuICAgICAgICAgICAgICAgICAgICB4XG4gICAgICAgICAgICAgICAgICAgIHlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDE0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTQoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MTMoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICBtdXRhdGlvbiAoJGluZm9Ob2RvOiBOb2RvQ29ub2NpbWllbnRvSW5wdXQpIHtcbiAgICAgICAgICAgICAgY3JlYXJOb2RvKGluZm9Ob2RvOiAkaW5mb05vZG8pIHtcbiAgICAgICAgICAgICAgICAuLi5mcmFnTm9kb0Nvbm9jaW1pZW50b1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAiLCAiXG4gICAgICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3QxMyA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDEzKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDEyKCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24gKCRpZE5vZG86IElEISkge1xuICAgICAgICAgICAgICBlbGltaW5hck5vZG8oaWROb2RvOiAkaWROb2RvKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTIgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMigpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMSgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIG11dGF0aW9uICgkaWROb2RvOiBTdHJpbmcsICRjb29yZHNNYW51YWxlczogQ29vcmRzSW5wdXQpIHtcbiAgICAgICAgICAgICAgc2V0Q29vcmRzTWFudWFsZXMoXG4gICAgICAgICAgICAgICAgaWROb2RvOiAkaWROb2RvXG4gICAgICAgICAgICAgICAgY29vcmRzTWFudWFsZXM6ICRjb29yZHNNYW51YWxlc1xuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBtb2RpZmljYWRvcyB7XG4gICAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgICAgY29vcmRzTWFudWFsZXMge1xuICAgICAgICAgICAgICAgICAgICB4XG4gICAgICAgICAgICAgICAgICAgIHlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGNvb3JkcyB7XG4gICAgICAgICAgICAgICAgICAgIHhcbiAgICAgICAgICAgICAgICAgICAgeVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTEgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMSgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMCgpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgICAgIHF1ZXJ5ICgkaWROb2RvOiBJRCEpIHtcbiAgICAgICAgICAgICAgbm9kbyhpZE5vZG86ICRpZE5vZG8pIHtcbiAgICAgICAgICAgICAgICBpZFxuICAgICAgICAgICAgICAgIGF1dG9Db29yZHMge1xuICAgICAgICAgICAgICAgICAgeFxuICAgICAgICAgICAgICAgICAgeVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MTAgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QxMCgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q5KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24gKCRub21icmVBdGxhczogU3RyaW5nISkge1xuICAgICAgICAgICAgICB0b2dnbGVQb3NpY2lvbmFtaWVudG9BdXRvbWF0aWNvQXRsYXMobm9tYnJlQXRsYXM6ICRub21icmVBdGxhcykge1xuICAgICAgICAgICAgICAgIGlkXG4gICAgICAgICAgICAgICAgcG9zaWNpb25hbmRvXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDkgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q5KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDgoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgICAgICBtdXRhdGlvbiAoJGNpY2xvczogSW50ISkge1xuICAgICAgICAgICAgICBwb3NpY2lvbmFyTm9kb3NDb25vY2ltaWVudG9CeUZ1ZXJ6YXMoY2ljbG9zOiAkY2ljbG9zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0OCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDgoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NygpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgICAgICAgcXVlcnkgKCRpZENvbGVjY2lvbjogSUQhLCAkaWRVc3VhcmlvOiBJRCEpIHtcbiAgICAgICAgICBjb2xlY2Npb25Ob2Rvc0Nvbm9jaW1pZW50byhcbiAgICAgICAgICAgIGlkQ29sZWNjaW9uOiAkaWRDb2xlY2Npb25cbiAgICAgICAgICAgIGlkVXN1YXJpbzogJGlkVXN1YXJpb1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIHByb2dyZXNvXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDcgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q3KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDYoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgIHF1ZXJ5ICgkaWROb2RvOiBJRCEpIHtcbiAgICAgICAgICBub2RvKGlkTm9kbzogJGlkTm9kbykge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIHBvcmNlbnRhamVDb21wbGV0YWRvXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAiXSk7CgogIF90ZW1wbGF0ZU9iamVjdDYgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q2KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDUoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gICAgICAgIHF1ZXJ5ICgkbm9tYnJlQXRsYXM6IFN0cmluZyEpIHtcbiAgICAgICAgICBjb25maWd1cmFjaW9uQXRsYXMobm9tYnJlQXRsYXM6ICRub21icmVBdGxhcykge1xuICAgICAgICAgICAgaWRcbiAgICAgICAgICAgIHBvc2ljaW9uYW5kb1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgIl0pOwoKICBfdGVtcGxhdGVPYmplY3Q1ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0NSgpIHsKICAgIHJldHVybiBkYXRhOwogIH07CgogIHJldHVybiBkYXRhOwp9CgpmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3Q0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICBxdWVyeSB7XG4gICAgeW8ge1xuICAgICAgaWRcbiAgICAgIGF0bGFzIHtcbiAgICAgICAgZGF0b3NOb2RvcyB7XG4gICAgICAgICAgLi4uZnJhZ0RhdG9Ob2RvQ29ub2NpbWllbnRvXG4gICAgICAgIH1cbiAgICAgICAgY29uZmlndXJhY2lvbiB7XG4gICAgICAgICAgbW9kb1xuICAgICAgICB9XG4gICAgICAgIGNvbGVjY2lvbmVzIHtcbiAgICAgICAgICAuLi5mcmFnQ29sZWNjaW9uZXNcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICAiLCAiXG4gICIsICJcbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0NCA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDQoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0MygpIHsKICB2YXIgZGF0YSA9IF90YWdnZWRUZW1wbGF0ZUxpdGVyYWwoWyJcbiAgcXVlcnkgdG9kb3NOb2RvcyB7XG4gICAgdG9kb3NOb2RvcyB7XG4gICAgICAuLi5mcmFnTm9kb0Nvbm9jaW1pZW50b1xuICAgIH1cbiAgfVxuICAiLCAiXG4iXSk7CgogIF90ZW1wbGF0ZU9iamVjdDMgPSBmdW5jdGlvbiBfdGVtcGxhdGVPYmplY3QzKCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCmZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgdmFyIGRhdGEgPSBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsKFsiXG4gIGZyYWdtZW50IGZyYWdOb2RvQ29ub2NpbWllbnRvIG9uIE5vZG9Db25vY2ltaWVudG8ge1xuICAgIGlkXG4gICAgbm9tYnJlXG4gICAgZGVzY3JpcGNpb25cbiAgICBleHBlcnRvc1xuICAgIHRpcG9Ob2RvXG4gICAgY2xhc2VzIHtcbiAgICAgIGlkXG4gICAgICBub21icmVcbiAgICAgIGlkRXhwZXJ0b1xuICAgICAgaW50ZXJlc2Fkb3NcbiAgICB9XG4gICAgY29vcmRzTWFudWFsZXMge1xuICAgICAgeFxuICAgICAgeVxuICAgIH1cbiAgICBjb29yZHMge1xuICAgICAgeFxuICAgICAgeVxuICAgIH1cbiAgICBhdXRvQ29vcmRzIHtcbiAgICAgIHhcbiAgICAgIHlcbiAgICB9XG4gICAgY2VudHJvTWFzYSB7XG4gICAgICB4XG4gICAgICB5XG4gICAgfVxuICAgIHN0dWNrXG4gICAgYW5ndWxvXG4gICAgcHVudGFqZVxuICAgIHZpbmN1bG9zIHtcbiAgICAgIGlkXG4gICAgICBpZFJlZlxuICAgICAgcm9sXG4gICAgICB0aXBvXG4gICAgfVxuICAgIGZ1ZXJ6YUNlbnRyb01hc2Ege1xuICAgICAgZnVlcnphXG4gICAgICBkaXJlY2Npb25cbiAgICB9XG4gICAgZnVlcnphQ29saXNpb24ge1xuICAgICAgZnVlcnphXG4gICAgICBkaXJlY2Npb25cbiAgICB9XG4gIH1cbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0MiA9IGZ1bmN0aW9uIF90ZW1wbGF0ZU9iamVjdDIoKSB7CiAgICByZXR1cm4gZGF0YTsKICB9OwoKICByZXR1cm4gZGF0YTsKfQoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICBmcmFnbWVudCBmcmFnQ29sZWNjaW9uZXMgb24gQ29sZWNjaW9uTm9kb3NBdGxhc0Nvbm9jaW1pZW50byB7XG4gICAgaWRcbiAgICBub21icmVcbiAgICBpZHNOb2Rvc1xuICAgIG5vZG9zIHtcbiAgICAgIGlkXG4gICAgICBub21icmVcbiAgICB9XG4gIH1cbiJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBncWwgZnJvbSAiZ3JhcGhxbC10YWciOwppbXBvcnQgTm9kb0Nvbm9jaW1pZW50byBmcm9tICIuL05vZG9Db25vY2ltaWVudG8udnVlIjsKaW1wb3J0IEJ1c2NhZG9yTm9kb3NDb25vY2ltaWVudG8gZnJvbSAiLi9CdXNjYWRvck5vZG9zQ29ub2NpbWllbnRvLnZ1ZSI7CmltcG9ydCBMb2FkaW5nIGZyb20gIi4uL3V0aWxpZGFkZXMvTG9hZGluZy52dWUiOwppbXBvcnQgUGFuZWxDb25qdW50b3NOb2RvcyBmcm9tICIuL1BhbmVsQ29uanVudG9zTm9kb3MudnVlIjsKaW1wb3J0IEVubGFjZXNOb2RvQ29ub2NpbWllbnRvIGZyb20gIi4vRW5sYWNlc05vZG9Db25vY2ltaWVudG8udnVlIjsKaW1wb3J0IHsgZnJhZ21lbnRvRGF0b05vZG9Db25vY2ltaWVudG8gfSBmcm9tICIuL2ZyYWdzQXRsYXNDb25vY2ltaWVudG8iOwppbXBvcnQgUGllUHJvZ3Jlc28gZnJvbSAiLi4vdXRpbGlkYWRlcy9QaWVQcm9ncmVzby52dWUiOwoKdmFyIGRlYm91bmNlID0gcmVxdWlyZSgiZGVib3VuY2UiKTsKCmV4cG9ydCB2YXIgZnJhZ21lbnRvQ29sZWNjaW9uZXMgPSBncWwoX3RlbXBsYXRlT2JqZWN0KCkpOwp2YXIgZnJhZ21lbnRvTm9kb0Nvbm9jaW1pZW50byA9IGdxbChfdGVtcGxhdGVPYmplY3QyKCkpOwp2YXIgUVVFUllfTk9ET1MgPSBncWwoX3RlbXBsYXRlT2JqZWN0MygpLCBmcmFnbWVudG9Ob2RvQ29ub2NpbWllbnRvKTsKZXhwb3J0IHZhciBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TID0gZ3FsKF90ZW1wbGF0ZU9iamVjdDQoKSwgZnJhZ21lbnRvRGF0b05vZG9Db25vY2ltaWVudG8sIGZyYWdtZW50b0NvbGVjY2lvbmVzKTsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIE5vZG9Db25vY2ltaWVudG86IE5vZG9Db25vY2ltaWVudG8sCiAgICBCdXNjYWRvck5vZG9zQ29ub2NpbWllbnRvOiBCdXNjYWRvck5vZG9zQ29ub2NpbWllbnRvLAogICAgTG9hZGluZzogTG9hZGluZywKICAgIFBhbmVsQ29uanVudG9zTm9kb3M6IFBhbmVsQ29uanVudG9zTm9kb3MsCiAgICBFbmxhY2VzTm9kb0Nvbm9jaW1pZW50bzogRW5sYWNlc05vZG9Db25vY2ltaWVudG8sCiAgICBQaWVQcm9ncmVzbzogUGllUHJvZ3Jlc28KICB9LAogIG5hbWU6ICJBdGxhc0Nvbm9jaW1pZW50byIsCiAgYXBvbGxvOiB7CiAgICB0b2Rvc05vZG9zOiB7CiAgICAgIHF1ZXJ5OiBRVUVSWV9OT0RPUywKICAgICAgcmVzdWx0OiBmdW5jdGlvbiByZXN1bHQoKSB7CiAgICAgICAgdGhpcy5kaWJ1amFyVmluY3Vsb3NHcmlzZXMoKTsKICAgICAgfSwKICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoX3JlZikgewogICAgICAgIHZhciB0b2Rvc05vZG9zID0gX3JlZi50b2Rvc05vZG9zOwogICAgICAgIHRoaXMubm9kb3NEZXNjYXJnYWRvcyA9IHRydWU7CiAgICAgICAgdmFyIG51ZXZvVG9kb3NOb2RvcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodG9kb3NOb2RvcykpOwogICAgICAgIG51ZXZvVG9kb3NOb2Rvcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RvKSB7CiAgICAgICAgICBub2RvLmNvb3Jkc01hbnVhbGVzID0gbm9kby5hdXRvQ29vcmRzOwogICAgICAgICAgbm9kby5jb29yZHMgPSBub2RvLmF1dG9Db29yZHM7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGlkTGFzdE5vZG9UYXJnZXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXRsYXNDb25vY2ltaWVudG9JZExhc3ROb2RvVGFyZ2V0Iik7CgogICAgICAgIGlmIChpZExhc3ROb2RvVGFyZ2V0KSB7CiAgICAgICAgICB2YXIgbm9kb0xhc3QgPSB0b2Rvc05vZG9zLmZpbmQoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIG4uaWQgPT09IGlkTGFzdE5vZG9UYXJnZXQ7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAobm9kb0xhc3QpIHsKICAgICAgICAgICAgdGhpcy5pZE5vZG9UYXJnZXQgPSBub2RvTGFzdC5pZDsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiBudWV2b1RvZG9zTm9kb3M7CiAgICAgIH0sCiAgICAgIGZldGNoUG9saWN5OiAiY2FjaGUtZmlyc3QiCiAgICB9LAogICAgeW86IHsKICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MsCiAgICAgIHNraXA6IGZ1bmN0aW9uIHNraXAoKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLnVzdWFyaW9Mb2dlYWRvIHx8IHRoaXMudG9kb3NOb2Rvcy5sZW5ndGggPCAxOwogICAgICB9LAogICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShfcmVmMikgewogICAgICAgIHZhciBfeW8kYXRsYXM7CgogICAgICAgIHZhciB5byA9IF9yZWYyLnlvOwogICAgICAgIHZhciBpZExhc3RDb2xlY2Npb25UYXJnZXQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYXRsYXNDb25vY2ltaWVudG9JZExhc3RDb2xlY2Npb25UYXJnZXQiKTsKICAgICAgICBjb25zb2xlLmxvZygiSUQgbGFzdENvbGVjY2lvblRhcmdldDogIi5jb25jYXQoaWRMYXN0Q29sZWNjaW9uVGFyZ2V0KSk7CgogICAgICAgIGlmIChpZExhc3RDb2xlY2Npb25UYXJnZXQgJiYgKF95byRhdGxhcyA9IHlvLmF0bGFzKSAhPT0gbnVsbCAmJiBfeW8kYXRsYXMgIT09IHZvaWQgMCAmJiBfeW8kYXRsYXMuY29sZWNjaW9uZXMpIHsKICAgICAgICAgIHZhciBfeW8kYXRsYXMyOwoKICAgICAgICAgIHZhciBjb2xlY2Npb25MYXN0ID0gKF95byRhdGxhczIgPSB5by5hdGxhcykgPT09IG51bGwgfHwgX3lvJGF0bGFzMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3lvJGF0bGFzMi5jb2xlY2Npb25lcy5maW5kKGZ1bmN0aW9uIChjb2wpIHsKICAgICAgICAgICAgcmV0dXJuIGNvbC5pZCA9PT0gaWRMYXN0Q29sZWNjaW9uVGFyZ2V0OwogICAgICAgICAgfSk7CgogICAgICAgICAgaWYgKGNvbGVjY2lvbkxhc3QpIHsKICAgICAgICAgICAgdGhpcy5pZENvbGVjY2lvblNlbGVjY2lvbmFkYSA9IGNvbGVjY2lvbkxhc3QuaWQ7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4geW87CiAgICAgIH0KICAgIH0sCiAgICBjb25maWd1cmFjaW9uQXRsYXM6IHsKICAgICAgcXVlcnk6IGdxbChfdGVtcGxhdGVPYmplY3Q1KCkpLAogICAgICB2YXJpYWJsZXM6IHsKICAgICAgICBub21icmVBdGxhczogImNvbm9jaW1pZW50byIKICAgICAgfSwKICAgICAgZmV0Y2hQb2xpY3k6ICJuZXR3b3JrLW9ubHkiCiAgICB9LAogICAgcHJvZ3Jlc29Ob2RvVGFyZ2V0OiB7CiAgICAgIHF1ZXJ5OiBncWwoX3RlbXBsYXRlT2JqZWN0NigpKSwKICAgICAgdmFyaWFibGVzOiBmdW5jdGlvbiB2YXJpYWJsZXMoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkTm9kbzogdGhpcy5pZE5vZG9UYXJnZXQKICAgICAgICB9OwogICAgICB9LAogICAgICBza2lwOiBmdW5jdGlvbiBza2lwKCkgewogICAgICAgIHJldHVybiAhdGhpcy5pZE5vZG9UYXJnZXQ7CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKF9yZWYzKSB7CiAgICAgICAgdmFyIG5vZG8gPSBfcmVmMy5ub2RvOwogICAgICAgIHJldHVybiBub2RvLnBvcmNlbnRhamVDb21wbGV0YWRvOwogICAgICB9CiAgICB9LAogICAgcHJvZ3Jlc29Db2xlY2Npb25TZWxlY2Npb25hZGE6IHsKICAgICAgcXVlcnk6IGdxbChfdGVtcGxhdGVPYmplY3Q3KCkpLAogICAgICB2YXJpYWJsZXM6IGZ1bmN0aW9uIHZhcmlhYmxlcygpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWRDb2xlY2Npb246IHRoaXMuaWRDb2xlY2Npb25TZWxlY2Npb25hZGEsCiAgICAgICAgICBpZFVzdWFyaW86IHRoaXMudXN1YXJpby5pZAogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKF9yZWY0KSB7CiAgICAgICAgdmFyIGNvbGVjY2lvbk5vZG9zQ29ub2NpbWllbnRvID0gX3JlZjQuY29sZWNjaW9uTm9kb3NDb25vY2ltaWVudG87CiAgICAgICAgcmV0dXJuIGNvbGVjY2lvbk5vZG9zQ29ub2NpbWllbnRvLnByb2dyZXNvOwogICAgICB9LAogICAgICBza2lwOiBmdW5jdGlvbiBza2lwKCkgewogICAgICAgIHJldHVybiAhdGhpcy5pZENvbGVjY2lvblNlbGVjY2lvbmFkYTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbmZpZ3VyYWNpb25BdGxhczogewogICAgICAgIHBvc2ljaW9uYW5kbzogZmFsc2UKICAgICAgfSwKICAgICAgaG92ZXJlZDogZmFsc2UsCiAgICAgIHRvZG9zTm9kb3M6IFtdLAogICAgICBub2Rvc0Rlc2NhcmdhZG9zOiBmYWxzZSwKICAgICAgcG9zaWNpb25DcmVhbmRvTm9kbzogbnVsbCwKICAgICAgaWROb2RvU2VsZWNjaW9uYWRvOiBudWxsLAogICAgICBpZHNOb2Rvc0NhZGVuYVByZXZpYVNlbGVjY2lvbmFkbzogW10sCiAgICAgIGlkTm9kb01lbnVDeDogbnVsbCwKICAgICAgaWRzTmVjZXNhcmlvc1BhcmFUYXJnZXQ6IFtdLAogICAgICBlbnZpYW5kb1F1ZXJ5TW9kbzogZmFsc2UsCiAgICAgIG1vZG9BdGxhczogImVzdHVkaWFudGUiLAogICAgICBlbnZpYW5kb1F1ZXJ5VGFyZ2V0OiBmYWxzZSwKICAgICAgcmVkaWJ1amFyRW5sYWNlc05vZG9zOiAwLAogICAgICB5bzogewogICAgICAgIGF0bGFzOiB7CiAgICAgICAgICBkYXRvc05vZG9zOiBbXSwKICAgICAgICAgIGNvbmZpZ3VyYWNpb246IHsKICAgICAgICAgICAgbW9kbzogImVzdHVkaWFudGUiCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBjZW50cm9WaXN0YURlY2ltYWw6IHsKICAgICAgICB4OiAyMTgsCiAgICAgICAgeTogMzkKICAgICAgfSwKICAgICAgc2hvd2luZ1pvb21JbmZvOiBmYWxzZSwKICAgICAgem9vbTogODAsCiAgICAgIG1pblpvb206IDIwLAogICAgICBtYXhab29tOiAyMDAsCiAgICAgIHBpbmNoaW5nOiBmYWxzZSwKICAgICAgbGFzdFBpbmNoRGlzdGFuY2U6IDAsCiAgICAgIGFjdHVhbGl6YXJUcmF6b3M6IDAsCiAgICAgIHBhbm5pbmdWaXN0YTogZmFsc2UsCiAgICAgIHZpc3RhUGFubmVkOiBmYWxzZSwKICAgICAgYWN0dWFsaXphclZpbmN1bG9zR3Jpc2VzOiAwLAogICAgICB1bHRpbW9Ub3VjaFg6IDAsCiAgICAgIHVsdGltb1RvdWNoWTogMCwKICAgICAgY2VycmFyQnVzcXVlZGE6IDAsCiAgICAgIGNhbGxpbmdQb3NpY2lvbmVzOiBmYWxzZSwKICAgICAgbW9zdHJhbmRvTWVudUNvbnRleHR1YWw6IGZhbHNlLAogICAgICBvZmZzZXRNZW51Q29udGV4dHVhbDogewogICAgICAgIHRvcDogIjBweCIsCiAgICAgICAgbGVmdDogIjBweCIKICAgICAgfSwKICAgICAgZW52aWFuZG9RdWVyeUNvbmZpZ3VyYWNpb25BdGxhczogZmFsc2UsCiAgICAgIGlkQ29sZWNjaW9uU2VsZWNjaW9uYWRhOiBudWxsLAogICAgICBzZWxlY2Npb25hbmRvQ29sZWNjaW9uOiBmYWxzZSwKICAgICAgbW9zdHJhbmRvT3BjaW9uZXNDb2xlY2Npb246IGZhbHNlLAogICAgICBpbmRleExhc3RMb2NhdGVOZXh0QXZhaWxhYmxlOiAwLAogICAgICBpbmRleExhc3RMb2NhdGVOZXh0Q2hlY2s6IDAsCiAgICAgIGluZGV4TGFzdExvY2F0ZU5leHRSZXBhc286IDAsCiAgICAgIGlkQ29sZWNjaW9uVGFyZ2V0T25MYXN0TG9jYWxpemFjaW9uOiBudWxsLAogICAgICBpZE5vZG9UYXJnZXQ6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgbm9tYnJlQ29sZWNjaW9uU2VsZWNjaW9uYWRhOiBmdW5jdGlvbiBub21icmVDb2xlY2Npb25TZWxlY2Npb25hZGEoKSB7CiAgICAgIHZhciBfdGhpcyRjb2xlY2Npb25TZWxlY2M7CgogICAgICBpZiAoIXRoaXMuaWRDb2xlY2Npb25TZWxlY2Npb25hZGEpIHsKICAgICAgICByZXR1cm4gIkF0bGFzIjsKICAgICAgfQoKICAgICAgcmV0dXJuICgoX3RoaXMkY29sZWNjaW9uU2VsZWNjID0gdGhpcy5jb2xlY2Npb25TZWxlY2Npb25hZGEpID09PSBudWxsIHx8IF90aGlzJGNvbGVjY2lvblNlbGVjYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY29sZWNjaW9uU2VsZWNjLm5vbWJyZSkgfHwgIkNhcmdhbmRvIjsKICAgIH0sCiAgICBjb2xlY2Npb25TZWxlY2Npb25hZGE6IGZ1bmN0aW9uIGNvbGVjY2lvblNlbGVjY2lvbmFkYSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5pZENvbGVjY2lvblNlbGVjY2lvbmFkYSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5jb2xlY2Npb25lc1VzdWFyaW8uZmluZChmdW5jdGlvbiAoY29sKSB7CiAgICAgICAgcmV0dXJuIGNvbC5pZCA9PT0gX3RoaXMuaWRDb2xlY2Npb25TZWxlY2Npb25hZGE7CiAgICAgIH0pOwogICAgfSwKICAgIGNvbGVjY2lvbmVzVXN1YXJpbzogZnVuY3Rpb24gY29sZWNjaW9uZXNVc3VhcmlvKCkgewogICAgICB2YXIgX3RoaXMkeW8sIF90aGlzJHlvJGF0bGFzOwoKICAgICAgaWYgKCEoKF90aGlzJHlvID0gdGhpcy55bykgIT09IG51bGwgJiYgX3RoaXMkeW8gIT09IHZvaWQgMCAmJiAoX3RoaXMkeW8kYXRsYXMgPSBfdGhpcyR5by5hdGxhcykgIT09IG51bGwgJiYgX3RoaXMkeW8kYXRsYXMgIT09IHZvaWQgMCAmJiBfdGhpcyR5byRhdGxhcy5jb2xlY2Npb25lcykpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnlvLmF0bGFzLmNvbGVjY2lvbmVzOwogICAgfSwKICAgIGlkc05vZG9zT2JqZXRpdm9zOiBmdW5jdGlvbiBpZHNOb2Rvc09iamV0aXZvcygpIHsKICAgICAgaWYgKCF0aGlzLnlvIHx8ICF0aGlzLnlvLmF0bGFzIHx8ICF0aGlzLnlvLmF0bGFzLmRhdG9zTm9kb3MpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnlvLmF0bGFzLmRhdG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4ub2JqZXRpdm8gPT0gdHJ1ZTsKICAgICAgfSkubWFwKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4uaWROb2RvOwogICAgICB9KTsKICAgIH0sCiAgICBub2Rvc09iamV0aXZvOiBmdW5jdGlvbiBub2Rvc09iamV0aXZvKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICghdGhpcy50b2Rvc05vZG9zKSByZXR1cm4gW107CiAgICAgIHJldHVybiB0aGlzLnRvZG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5pZHNOb2Rvc09iamV0aXZvcy5pbmNsdWRlcyhuLmlkKTsKICAgICAgfSk7CiAgICB9LAogICAgbm9kb1NlbGVjY2lvbmFkbzogZnVuY3Rpb24gbm9kb1NlbGVjY2lvbmFkbygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuaWROb2RvU2VsZWNjaW9uYWRvKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnRvZG9zTm9kb3MuZmluZChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkID09PSBfdGhpczMuaWROb2RvU2VsZWNjaW9uYWRvOwogICAgICB9KTsKICAgIH0sCiAgICBpZFVzdWFyaW86IGZ1bmN0aW9uIGlkVXN1YXJpbygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzdWFyaW8uaWQ7CiAgICB9LAogICAgdXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhczogZnVuY3Rpb24gdXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcygpIHsKICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS51c3VhcmlvLnBlcm1pc29zKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c3VhcmlvLnBlcm1pc29zLmluY2x1ZGVzKCJhdGxhc0FkbWluaXN0cmFkb3IiKSA/IHRydWUgOiBmYWxzZTsKICAgIH0sCiAgICBub2RvVGFyZ2V0OiBmdW5jdGlvbiBub2RvVGFyZ2V0KCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5pZE5vZG9UYXJnZXQpIHJldHVybiBudWxsOwogICAgICByZXR1cm4gdGhpcy50b2Rvc05vZG9zLmZpbmQoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5pZCA9PT0gX3RoaXM0LmlkTm9kb1RhcmdldDsKICAgICAgfSk7CiAgICB9LAogICAgaWRzTm9kb3NBcHJlbmRpZG9zOiBmdW5jdGlvbiBpZHNOb2Rvc0FwcmVuZGlkb3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnlvLmF0bGFzLmRhdG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4uYXByZW5kaWRvID09PSB0cnVlOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5pZE5vZG87CiAgICAgIH0pOwogICAgfSwKICAgIGRhdG9zTm9kb3NFc3R1ZGlhZG9zOiBmdW5jdGlvbiBkYXRvc05vZG9zRXN0dWRpYWRvcygpIHsKICAgICAgcmV0dXJuIHRoaXMueW8uYXRsYXMuZGF0b3NOb2Rvcy5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gIW4uYXByZW5kaWRvICYmIG4uZXN0dWRpYWRvOwogICAgICB9KTsKICAgIH0sCiAgICBpZHNOb2Rvc0VzdHVkaWFkb3M6IGZ1bmN0aW9uIGlkc05vZG9zRXN0dWRpYWRvcygpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0b3NOb2Rvc0VzdHVkaWFkb3MubWFwKGZ1bmN0aW9uIChuZSkgewogICAgICAgIHJldHVybiBuZS5pZE5vZG87CiAgICAgIH0pOwogICAgfSwKICAgIGRhdG9zTm9kb3NSZXBhc2FyOiBmdW5jdGlvbiBkYXRvc05vZG9zUmVwYXNhcigpIHsKICAgICAgaWYgKCF0aGlzLnlvIHx8ICF0aGlzLnlvLmF0bGFzIHx8ICF0aGlzLnlvLmF0bGFzLmRhdG9zTm9kb3MpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICAgIHZhciBkYXRvc05vZG9Db25SZXBhc29Db25maWd1cmFkbyA9IHRoaXMuZGF0b3NOb2Rvc0VzdHVkaWFkb3MuZmlsdGVyKGZ1bmN0aW9uIChkbikgewogICAgICAgIHJldHVybiBkbi5wZXJpb2RvUmVwYXNvOwogICAgICB9KTsKICAgICAgdmFyIGRhdGVIb3kgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgZGF0ZUhveU1pbiA9IGRhdGVIb3k7CiAgICAgIGRhdGVIb3lNaW4uc2V0SG91cnMoMCk7CiAgICAgIGRhdGVIb3lNaW4uc2V0TWludXRlcygwKTsKICAgICAgZGF0ZUhveU1pbi5zZXRTZWNvbmRzKDApOwogICAgICB2YXIgZGF0b3NOb2RvUGFyYVJlcGFzYXIgPSBkYXRvc05vZG9Db25SZXBhc29Db25maWd1cmFkby5maWx0ZXIoZnVuY3Rpb24gKGRuKSB7CiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRuLmVzdHVkaWFkbykuZ2V0VGltZSgpICsgZG4ucGVyaW9kb1JlcGFzbyA8IGRhdGVIb3lNaW4uZ2V0VGltZSgpOwogICAgICB9KTsKICAgICAgcmV0dXJuIGRhdG9zTm9kb1BhcmFSZXBhc2FyOwogICAgfSwKICAgIGlkc05vZG9zUmVwYXNhcjogZnVuY3Rpb24gaWRzTm9kb3NSZXBhc2FyKCkgewogICAgICByZXR1cm4gdGhpcy5kYXRvc05vZG9zUmVwYXNhci5tYXAoZnVuY3Rpb24gKGRuKSB7CiAgICAgICAgcmV0dXJuIGRuLmlkTm9kbzsKICAgICAgfSk7CiAgICB9LAogICAgaWRzTm9kb3NSZXBhc2FyUHJlc2VudGVzOiBmdW5jdGlvbiBpZHNOb2Rvc1JlcGFzYXJQcmVzZW50ZXMoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLmlkVGFyZ2V0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaWRzTm9kb3NSZXBhc2FyOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5pZHNOb2Rvc1JlcGFzYXIuZmlsdGVyKGZ1bmN0aW9uIChpZCkgewogICAgICAgIHJldHVybiBfdGhpczUuaWRzTm9kb3NSZW5kZXIuaW5jbHVkZXMoaWQpOwogICAgICB9KTsKICAgIH0sCiAgICBkYXRvc05vZG9zRnJlc2NvczogZnVuY3Rpb24gZGF0b3NOb2Rvc0ZyZXNjb3MoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIHRoaXMuZGF0b3NOb2Rvc0VzdHVkaWFkb3MuZmlsdGVyKGZ1bmN0aW9uIChkbikgewogICAgICAgIHJldHVybiAhX3RoaXM2Lmlkc05vZG9zUmVwYXNhci5pbmNsdWRlcyhkbi5pZE5vZG8pOwogICAgICB9KTsKICAgIH0sCiAgICBpZHNOb2Rvc0ZyZXNjb3M6IGZ1bmN0aW9uIGlkc05vZG9zRnJlc2NvcygpIHsKICAgICAgcmV0dXJuIHRoaXMuZGF0b3NOb2Rvc0ZyZXNjb3MubWFwKGZ1bmN0aW9uIChuZikgewogICAgICAgIHJldHVybiBuZi5pZE5vZG87CiAgICAgIH0pOwogICAgfSwKICAgIGlkc05vZG9zUHJlc2VudGVzQ2FiZXphOiBmdW5jdGlvbiBpZHNOb2Rvc1ByZXNlbnRlc0NhYmV6YSgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICByZXR1cm4gdGhpcy5pZHNOb2Rvc0ZyZXNjb3MuZmlsdGVyKGZ1bmN0aW9uIChpZE5lKSB7CiAgICAgICAgcmV0dXJuICFfdGhpczcuaWRzTm9kb3NBcHJlbmRpZG9zLmluY2x1ZGVzKGlkTmUpOwogICAgICB9KS5jb25jYXQodGhpcy5pZHNOb2Rvc0FwcmVuZGlkb3MpOwogICAgfSwKICAgIGNlbnRyb1Zpc3RhOiBmdW5jdGlvbiBjZW50cm9WaXN0YSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB4OiBNYXRoLnJvdW5kKHRoaXMuY2VudHJvVmlzdGFEZWNpbWFsLngpLAogICAgICAgIHk6IE1hdGgucm91bmQodGhpcy5jZW50cm9WaXN0YURlY2ltYWwueSkKICAgICAgfTsKICAgIH0sCiAgICBmYWN0b3Jab29tOiBmdW5jdGlvbiBmYWN0b3Jab29tKCkgewogICAgICByZXR1cm4gTnVtYmVyKCh0aGlzLnpvb20gLyAxMDApLnRvRml4ZWQoMikpOwogICAgfSwKICAgIGVzcXVpbmFzRGlhZ3JhbWE6IGZ1bmN0aW9uIGVzcXVpbmFzRGlhZ3JhbWEoKSB7CiAgICAgIHZhciBtYXhYID0gdGhpcy50b2Rvc05vZG9zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uYXV0b0Nvb3Jkcy54ID4gYWNjID8gbi5hdXRvQ29vcmRzLnggOiBhY2M7CiAgICAgIH0sIDApOwogICAgICB2YXIgbWF4WSA9IHRoaXMudG9kb3NOb2Rvcy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgbikgewogICAgICAgIHJldHVybiBuLmF1dG9Db29yZHMueSA+IGFjYyA/IG4uYXV0b0Nvb3Jkcy55IDogYWNjOwogICAgICB9LCAwKTsKICAgICAgdmFyIG1pblggPSB0aGlzLnRvZG9zTm9kb3MucmVkdWNlKGZ1bmN0aW9uIChhY2MsIG4pIHsKICAgICAgICByZXR1cm4gbi5hdXRvQ29vcmRzLnggPCBhY2MgPyBuLmF1dG9Db29yZHMueCA6IGFjYzsKICAgICAgfSwgMCk7CiAgICAgIHZhciBtaW5ZID0gdGhpcy50b2Rvc05vZG9zLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBuKSB7CiAgICAgICAgcmV0dXJuIG4uYXV0b0Nvb3Jkcy55IDwgYWNjID8gbi5hdXRvQ29vcmRzLnkgOiBhY2M7CiAgICAgIH0sIDApOwogICAgICByZXR1cm4gewogICAgICAgIHgxOiBtaW5YLAogICAgICAgIHkxOiBtaW5ZLAogICAgICAgIHgyOiBtYXhYLAogICAgICAgIHkyOiBtYXhZCiAgICAgIH07CiAgICB9LAogICAgb2Zmc2V0Q29udGVuZWRvck5vZG9zOiBmdW5jdGlvbiBvZmZzZXRDb250ZW5lZG9yTm9kb3MoKSB7CiAgICAgIHZhciBhbmNobyA9IHRoaXMuZXNxdWluYXNEaWFncmFtYS54MiAtIHRoaXMuZXNxdWluYXNEaWFncmFtYS54MTsKICAgICAgdmFyIGFsdG8gPSB0aGlzLmVzcXVpbmFzRGlhZ3JhbWEueTIgLSB0aGlzLmVzcXVpbmFzRGlhZ3JhbWEueTE7CiAgICAgIHJldHVybiB7CiAgICAgICAgLy8gbGVmdDogLSh0aGlzLmNlbnRyb1Zpc3RhLnggKiB0aGlzLmZhY3Rvclpvb20pICsgInB4IiwKICAgICAgICAvLyB0b3A6IC0odGhpcy5jZW50cm9WaXN0YS55ICogdGhpcy5mYWN0b3Jab29tKSArICJweCIsCiAgICAgICAgd2lkdGg6IGFuY2hvICogdGhpcy5mYWN0b3Jab29tICsgInB4IiwKICAgICAgICBoZWlnaHQ6IGFsdG8gKiB0aGlzLmZhY3Rvclpvb20gKyAicHgiCiAgICAgIH07CiAgICB9LAogICAgbm9kb3NDb25SZXF1ZXJpbWVudG9zOiBmdW5jdGlvbiBub2Rvc0NvblJlcXVlcmltZW50b3MoKSB7CiAgICAgIHZhciBuciA9IHRoaXMudG9kb3NOb2Rvcy5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi52aW5jdWxvcy5sZW5ndGggPiAwOwogICAgICB9KTsKICAgICAgcmV0dXJuIG5yOwogICAgfSwKICAgIG5vZG9zUmVuZGVyOiBmdW5jdGlvbiBub2Rvc1JlbmRlcigpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICBpZiAodGhpcy4kcm91dGUubmFtZSAhPSAiYXRsYXMiKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CgogICAgICBpZiAodGhpcy5pZE5vZG9UYXJnZXQpIHsKICAgICAgICByZXR1cm4gdGhpcy50b2Rvc05vZG9zLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgICAgcmV0dXJuIF90aGlzOC5pZHNOZWNlc2FyaW9zUGFyYVRhcmdldC5pbmNsdWRlcyhuLmlkKTsKICAgICAgICB9KS5jb25jYXQoW3RoaXMudG9kb3NOb2Rvcy5maW5kKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM4LmlkTm9kb1RhcmdldCA9PT0gbi5pZDsKICAgICAgICB9KV0pOwogICAgICB9IGVsc2UgaWYgKHRoaXMuY29sZWNjaW9uU2VsZWNjaW9uYWRhKSB7CiAgICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZ3VhcmRhID0gMDsKICAgICAgICAgIHZhciBpZHNOb2Rvc0FjdHVhbGVzID0gX3RoaXM4LmNvbGVjY2lvblNlbGVjY2lvbmFkYS5pZHNOb2RvczsKICAgICAgICAgIHZhciB0b2Rvc05vZG9zQ29sZWNjaW9uID0gW107CiAgICAgICAgICB2YXIgbm9kb3NBY3R1YWxlcyA9IFtdOwoKICAgICAgICAgIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKCkgewogICAgICAgICAgICBub2Rvc0FjdHVhbGVzID0gX3RoaXM4LnRvZG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGlkc05vZG9zQWN0dWFsZXMuaW5jbHVkZXMobi5pZCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0b2Rvc05vZG9zQ29sZWNjaW9uLnB1c2guYXBwbHkodG9kb3NOb2Rvc0NvbGVjY2lvbiwgX3RvQ29uc3VtYWJsZUFycmF5KG5vZG9zQWN0dWFsZXMpKTsKICAgICAgICAgICAgdmFyIGlkc1RvZG9zTm9kb3NDb2xlY2Npb24gPSB0b2Rvc05vZG9zQ29sZWNjaW9uLm1hcChmdW5jdGlvbiAobikgewogICAgICAgICAgICAgIHJldHVybiBuLmlkOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWRzTm9kb3NBY3R1YWxlcyA9IFtdOwoKICAgICAgICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5vZG9zQWN0dWFsZXMpLAogICAgICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgX2lkc05vZG9zQWN0dWFsZXM7CgogICAgICAgICAgICAgICAgdmFyIG5vZG9BY3R1YWwgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgICAgIHZhciBpZHNWaW5jdWxvc1JlcXVlcmlkb3MgPSBub2RvQWN0dWFsLnZpbmN1bG9zLmZpbHRlcihmdW5jdGlvbiAodikgewogICAgICAgICAgICAgICAgICByZXR1cm4gdi50aXBvID09PSAiY29udGludWFjaW9uIiAmJiB2LnJvbCA9PT0gInRhcmdldCI7CiAgICAgICAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHYuaWRSZWY7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHZhciBpZHNWaW5jdWxvc051ZXZvcyA9IGlkc1ZpbmN1bG9zUmVxdWVyaWRvcy5maWx0ZXIoZnVuY3Rpb24gKGlkVikgewogICAgICAgICAgICAgICAgICByZXR1cm4gIWlkc1RvZG9zTm9kb3NDb2xlY2Npb24uaW5jbHVkZXMoaWRWKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIChfaWRzTm9kb3NBY3R1YWxlcyA9IGlkc05vZG9zQWN0dWFsZXMpLnB1c2guYXBwbHkoX2lkc05vZG9zQWN0dWFsZXMsIF90b0NvbnN1bWFibGVBcnJheShpZHNWaW5jdWxvc051ZXZvcykpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwoKICAgICAgICAgIHdoaWxlIChndWFyZGEgPCAxMDAgJiYgaWRzTm9kb3NBY3R1YWxlcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIF9sb29wKCk7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgdjogdG9kb3NOb2Rvc0NvbGVjY2lvbgogICAgICAgICAgfTsKICAgICAgICB9KCk7CgogICAgICAgIGlmIChfdHlwZW9mKF9yZXQpID09PSAib2JqZWN0IikgcmV0dXJuIF9yZXQudjsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMudG9kb3NOb2RvczsKICAgIH0sCiAgICBpZHNOb2Rvc1JlbmRlcjogZnVuY3Rpb24gaWRzTm9kb3NSZW5kZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLm5vZG9zUmVuZGVyLm1hcChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkOwogICAgICB9KTsKICAgIH0sCiAgICBpZHNUb2Rvc05vZG9zUmVuZGVyOiBmdW5jdGlvbiBpZHNUb2Rvc05vZG9zUmVuZGVyKCkgewogICAgICByZXR1cm4gdGhpcy5ub2Rvc1JlbmRlci5tYXAoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5pZDsKICAgICAgfSk7CiAgICB9LAogICAgb2Zmc2V0TG9hZGluZ0NyZWFuZG9Ob2RvOiBmdW5jdGlvbiBvZmZzZXRMb2FkaW5nQ3JlYW5kb05vZG8oKSB7CiAgICAgIGlmICghdGhpcy5wb3NpY2lvbkNyZWFuZG9Ob2RvKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHZhciBsZWZ0ID0gKHRoaXMucG9zaWNpb25DcmVhbmRvTm9kby54IC0gdGhpcy5lc3F1aW5hc0RpYWdyYW1hLngxKSAqIHRoaXMuZmFjdG9yWm9vbTsKICAgICAgdmFyIHRvcCA9ICh0aGlzLnBvc2ljaW9uQ3JlYW5kb05vZG8ueSAtIHRoaXMuZXNxdWluYXNEaWFncmFtYS55MSkgKiB0aGlzLmZhY3Rvclpvb207CiAgICAgIHJldHVybiB7CiAgICAgICAgbGVmdDogbGVmdCArICJweCIsCiAgICAgICAgdG9wOiB0b3AgKyAicHgiCiAgICAgIH07CiAgICB9LAogICAgbm9kb0FiaWVydG86IGZ1bmN0aW9uIG5vZG9BYmllcnRvKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUubmFtZSA9PT0gInZpc29yTm9kb0Nvbm9jaW1pZW50byI7CiAgICB9LAogICAgbm9kb3NDb25lY3RhZG9zQWxTZWxlY2Npb25hZG86IGZ1bmN0aW9uIG5vZG9zQ29uZWN0YWRvc0FsU2VsZWNjaW9uYWRvKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIGlmICghdGhpcy5ub2RvU2VsZWNjaW9uYWRvKSByZXR1cm4gW107CiAgICAgIHJldHVybiB0aGlzLnRvZG9zTm9kb3MuZmlsdGVyKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIF90aGlzOS5ub2RvU2VsZWNjaW9uYWRvLnZpbmN1bG9zLnNvbWUoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgIHJldHVybiB2LmlkUmVmID09PSBuLmlkOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBpZHNOb2Rvc1ByZXZpb3NTZWxlY2Npb25hZG86IGZ1bmN0aW9uIGlkc05vZG9zUHJldmlvc1NlbGVjY2lvbmFkbygpIHsKICAgICAgaWYgKCF0aGlzLm5vZG9TZWxlY2Npb25hZG8pIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICAgIHZhciBpZHNBY3R1YWxlcyA9IFt0aGlzLmlkTm9kb1NlbGVjY2lvbmFkb107CiAgICAgIHZhciBjYWRlbmFUb3RhbCA9IFtdOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyMDsgaSsrKSB7CiAgICAgICAgdmFyIHByZXZpb3MgPSB0aGlzLm5vZG9zUmVuZGVyLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgICAgcmV0dXJuIG4udmluY3Vsb3Muc29tZShmdW5jdGlvbiAodikgewogICAgICAgICAgICByZXR1cm4gdi5yb2wgPT09ICJzb3VyY2UiICYmIGlkc0FjdHVhbGVzLmluY2x1ZGVzKHYuaWRSZWYpOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChwcmV2aW9zLmxlbmd0aCA8IDEpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgdmFyIGlkc1ByZXZpb3MgPSBwcmV2aW9zLm1hcChmdW5jdGlvbiAocHJldmlvKSB7CiAgICAgICAgICByZXR1cm4gcHJldmlvLmlkOwogICAgICAgIH0pOwogICAgICAgIGNhZGVuYVRvdGFsLnB1c2guYXBwbHkoY2FkZW5hVG90YWwsIF90b0NvbnN1bWFibGVBcnJheShpZHNQcmV2aW9zKSk7CiAgICAgICAgaWRzQWN0dWFsZXMgPSBpZHNQcmV2aW9zOwogICAgICB9CgogICAgICByZXR1cm4gY2FkZW5hVG90YWw7CiAgICB9LAogICAgaWRzTm9kb3NDb250aW51YWNpb25TZWxlY2Npb25hZG86IGZ1bmN0aW9uIGlkc05vZG9zQ29udGludWFjaW9uU2VsZWNjaW9uYWRvKCkgewogICAgICBpZiAoIXRoaXMubm9kb1NlbGVjY2lvbmFkbykgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMubm9kb1NlbGVjY2lvbmFkby52aW5jdWxvcy5maWx0ZXIoZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gdi50aXBvID09PSAiY29udGludWFjaW9uIiAmJiB2LnJvbCA9PT0gInNvdXJjZSI7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiB2LmlkUmVmOwogICAgICB9KTsKICAgIH0sCiAgICBpZHNOb2Rvc0NvbmVjdGFkb3NTZWxlY2Npb25hZG86IGZ1bmN0aW9uIGlkc05vZG9zQ29uZWN0YWRvc1NlbGVjY2lvbmFkbygpIHsKICAgICAgaWYgKCF0aGlzLm5vZG9TZWxlY2Npb25hZG8pIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLm5vZG9TZWxlY2Npb25hZG8udmluY3Vsb3MubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIHYuaWRSZWY7CiAgICAgIH0pOwogICAgfSwKICAgIGlkVGFyZ2V0OiBmdW5jdGlvbiBpZFRhcmdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaWROb2RvVGFyZ2V0IHx8IHRoaXMuaWRDb2xlY2Npb25TZWxlY2Npb25hZGE7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBsb2NhbGl6YXJOZXh0OiBmdW5jdGlvbiBsb2NhbGl6YXJOZXh0KHRpcG8pIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgdmFyIG5vZG9zQ29uc2lkZXJhZG9zID0gX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMubm9kb3NSZW5kZXIpOwoKICAgICAgdGhpcy5pZENvbGVjY2lvblRhcmdldE9uTGFzdExvY2FsaXphY2lvbiA9IHRoaXMuaWRDb2xlY2Npb25TZWxlY2Npb25hZGE7CgogICAgICBpZiAodGlwbyA9PT0gImF2YWlsYWJsZSIpIHsKICAgICAgICB2YXIgaW5kZXhFbmNvbnRyYWRvcyA9IDA7CiAgICAgICAgdmFyIG5leHROb2RvID0gbm9kb3NDb25zaWRlcmFkb3MuZmluZChmdW5jdGlvbiAobikgewogICAgICAgICAgaWYgKF90aGlzMTAuaWRzTm9kb3NQcmVzZW50ZXNDYWJlemEuaW5jbHVkZXMobi5pZCkpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIGlmIChfdGhpczEwLmluZGV4TGFzdExvY2F0ZU5leHRBdmFpbGFibGUgPT09IG4uaWQpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBpZHNOb2Rvc1JlcXVlcmlkb3MgPSBuLnZpbmN1bG9zLmZpbHRlcihmdW5jdGlvbiAodikgewogICAgICAgICAgICByZXR1cm4gdi50aXBvID09PSAiY29udGludWFjaW9uIiAmJiB2LnJvbCA9PT0gInRhcmdldCI7CiAgICAgICAgICB9KS5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgcmV0dXJuIHYuaWRSZWY7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBub2Rvc1JlcXVlcmlkb3MgPSBub2Rvc0NvbnNpZGVyYWRvcy5maWx0ZXIoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgcmV0dXJuIGlkc05vZG9zUmVxdWVyaWRvcy5pbmNsdWRlcyhuLmlkKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChub2Rvc1JlcXVlcmlkb3Muc29tZShmdW5jdGlvbiAobm9kbykgewogICAgICAgICAgICByZXR1cm4gIV90aGlzMTAuaWRzTm9kb3NQcmVzZW50ZXNDYWJlemEuaW5jbHVkZXMobm9kby5pZCk7CiAgICAgICAgICB9KSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgaW5kZXhFbmNvbnRyYWRvcysrOwoKICAgICAgICAgIGlmIChpbmRleEVuY29udHJhZG9zIDw9IF90aGlzMTAuaW5kZXhMYXN0TG9jYXRlTmV4dEF2YWlsYWJsZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChuZXh0Tm9kbykgewogICAgICAgICAgdGhpcy5jZW50cmFyRW5Ob2RvQnlJZChuZXh0Tm9kby5pZCk7CiAgICAgICAgICB0aGlzLmluZGV4TGFzdExvY2F0ZU5leHRBdmFpbGFibGUgPSBpbmRleEVuY29udHJhZG9zOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmluZGV4TGFzdExvY2F0ZU5leHRBdmFpbGFibGUgPSAwOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aXBvID09PSAiY2hlY2siKSB7CiAgICAgICAgdmFyIF9pbmRleEVuY29udHJhZG9zID0gMDsKCiAgICAgICAgdmFyIF9uZXh0Tm9kbyA9IG5vZG9zQ29uc2lkZXJhZG9zLmZpbmQoZnVuY3Rpb24gKG4pIHsKICAgICAgICAgIGlmIChfdGhpczEwLmlkc05vZG9zUHJlc2VudGVzQ2FiZXphLmluY2x1ZGVzKG4uaWQpKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFc3RhYmEgZnJlc2NvIik7CiAgICAgICAgICAgIF9pbmRleEVuY29udHJhZG9zKys7CgogICAgICAgICAgICBpZiAoX2luZGV4RW5jb250cmFkb3MgPD0gX3RoaXMxMC5pbmRleExhc3RMb2NhdGVDaGVjaykgewogICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGlmIChfbmV4dE5vZG8pIHsKICAgICAgICAgIHRoaXMuY2VudHJhckVuTm9kb0J5SWQoX25leHROb2RvLmlkKTsKICAgICAgICAgIHRoaXMuaW5kZXhMYXN0TG9jYXRlQ2hlY2sgPSBfaW5kZXhFbmNvbnRyYWRvczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pbmRleExhc3RMb2NhdGVDaGVjayA9IDA7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRpcG8gPT09ICJyZXBhc28iKSB7CiAgICAgICAgdmFyIF90aGlzJGlkc05vZG9zUmVwYXNhcjsKCiAgICAgICAgaWYgKCEoKF90aGlzJGlkc05vZG9zUmVwYXNhciA9IHRoaXMuaWRzTm9kb3NSZXBhc2FyUHJlc2VudGVzKSAhPT0gbnVsbCAmJiBfdGhpcyRpZHNOb2Rvc1JlcGFzYXIgIT09IHZvaWQgMCAmJiBfdGhpcyRpZHNOb2Rvc1JlcGFzYXIubGVuZ3RoKSA+IDApIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHRoaXMuaW5kZXhMYXN0TG9jYXRlTmV4dFJlcGFzbysrOwoKICAgICAgICBpZiAodGhpcy5pbmRleExhc3RMb2NhdGVOZXh0UmVwYXNvID49IHRoaXMuaWRzTm9kb3NSZXBhc2FyUHJlc2VudGVzLmxlbmd0aCkgewogICAgICAgICAgdGhpcy5pbmRleExhc3RMb2NhdGVOZXh0UmVwYXNvID0gMDsKICAgICAgICB9CgogICAgICAgIHRoaXMuY2VudHJhckVuTm9kb0J5SWQodGhpcy5pZHNOb2Rvc1JlcGFzYXJQcmVzZW50ZXNbdGhpcy5pbmRleExhc3RMb2NhdGVOZXh0UmVwYXNvXSk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRJZENvbGVjY2lvblNlbGVjY2lvbmFkYTogZnVuY3Rpb24gc2V0SWRDb2xlY2Npb25TZWxlY2Npb25hZGEobnVldm9JZCkgewogICAgICB0aGlzLmluZGV4TGFzdExvY2F0ZU5leHRBdmFpbGFibGUgPSAwOwogICAgICB0aGlzLmluZGV4TGFzdExvY2F0ZU5leHRDaGVjayA9IDA7CiAgICAgIHRoaXMuaWRDb2xlY2Npb25TZWxlY2Npb25hZGEgPSBudWV2b0lkOwogICAgfSwKICAgIGluaWNpYXJDYWxsaW5nUG9zaWNpb25lczogZnVuY3Rpb24gaW5pY2lhckNhbGxpbmdQb3NpY2lvbmVzKCkgewogICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7CgogICAgICB2YXIgY2ljbG9zID0gcHJvbXB0KCLCv0N1YW50b3MgY2ljbG9zPyIpOwoKICAgICAgaWYgKGlzTmFOKGNpY2xvcykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNpY2xvcyA9IE1hdGgucm91bmQoY2ljbG9zKTsKCiAgICAgIGlmIChjaWNsb3MgPCAxKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZygiRW52aWFuZG8gcmVwb3NpY2lvbmFtaWVudG8gZGUgIi5jb25jYXQoY2ljbG9zLCAiIGNpY2xvcyIpKTsKICAgICAgdGhpcy5jYWxsaW5nUG9zaWNpb25lcyA9IHRydWU7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0OCgpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGNpY2xvczogY2ljbG9zCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczExLmNhbGxpbmdQb3NpY2lvbmVzID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMTEuY2FsbGluZ1Bvc2ljaW9uZXMgPSBmYWxzZTsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfSwKICAgIHRvZ2dsZVBvc2ljaW9uYW1pZW50bzogZnVuY3Rpb24gdG9nZ2xlUG9zaWNpb25hbWllbnRvKCkgewogICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICB0aGlzLmVudmlhbmRvUXVlcnlDb25maWd1cmFjaW9uQXRsYXMgPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDkoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBub21icmVBdGxhczogImNvbm9jaW1pZW50byIKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMTIuZW52aWFuZG9RdWVyeUNvbmZpZ3VyYWNpb25BdGxhcyA9IGZhbHNlOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxMi5lbnZpYW5kb1F1ZXJ5Q29uZmlndXJhY2lvbkF0bGFzID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGFicmlyTWVudUNvbnRleHR1YWw6IGZ1bmN0aW9uIGFicmlyTWVudUNvbnRleHR1YWwoZSkgewogICAgICB2YXIgcG9zRGlhZ3JhbWEgPSB0aGlzLiRyZWZzLmNvbnRlbmVkb3JEaWFncmFtYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdmFyIHRvcENsaWNrID0gTWF0aC5yb3VuZChlLnBhZ2VZIC0gcG9zRGlhZ3JhbWEudG9wKTsKICAgICAgdmFyIGxlZnRDbGljayA9IE1hdGgucm91bmQoZS5wYWdlWCAtIHBvc0RpYWdyYW1hLmxlZnQpOwogICAgICB0aGlzLiRzZXQodGhpcy5vZmZzZXRNZW51Q29udGV4dHVhbCwgInRvcCIsIHRvcENsaWNrICsgInB4Iik7CiAgICAgIHRoaXMuJHNldCh0aGlzLm9mZnNldE1lbnVDb250ZXh0dWFsLCAibGVmdCIsIGxlZnRDbGljayArICJweCIpOwogICAgICB0aGlzLm1vc3RyYW5kb01lbnVDb250ZXh0dWFsID0gdHJ1ZTsgLy90aGlzLmNyZWFyTm9kbyh7eDogbGVmdENsaWNrLCB5OiB0b3BDbGlja30pOwogICAgfSwKICAgIGNyZWFyTm9kb0VuTWVudUNvbnRleHR1YWw6IGZ1bmN0aW9uIGNyZWFyTm9kb0VuTWVudUNvbnRleHR1YWwoKSB7CiAgICAgIHZhciBwb3NDb250ZW5lZG9yTm9kb3MgPSB0aGlzLiRyZWZzLmNvbnRlbmVkb3JOb2Rvcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdmFyIGRpc3RhbmNpYUxlZnRQeCA9IHBhcnNlSW50KHRoaXMub2Zmc2V0TWVudUNvbnRleHR1YWwubGVmdCkgLSBwYXJzZUludChwb3NDb250ZW5lZG9yTm9kb3MubGVmdCk7CiAgICAgIHZhciBkaXN0YW5jaWFUb3BQeCA9IHBhcnNlSW50KHRoaXMub2Zmc2V0TWVudUNvbnRleHR1YWwudG9wKSAtIChwYXJzZUludChwb3NDb250ZW5lZG9yTm9kb3MudG9wKSAtIHBhcnNlSW50KHRoaXMuJGVsLm9mZnNldFRvcCkpOwogICAgICB2YXIgcG9zUHhYID0gZGlzdGFuY2lhTGVmdFB4OwogICAgICB2YXIgcG9zUHhZID0gZGlzdGFuY2lhVG9wUHg7CiAgICAgIGNvbnNvbGUubG9nKCJ4UGl4OiAiLmNvbmNhdChwYXJzZUludCh0aGlzLm9mZnNldE1lbnVDb250ZXh0dWFsLmxlZnQpKSk7CiAgICAgIGNvbnNvbGUubG9nKCJwb3NYQ29udGVuZWRvck5vZG9zOiAiLmNvbmNhdChwYXJzZUludChwb3NDb250ZW5lZG9yTm9kb3MubGVmdCksICIsICIpLmNvbmNhdChwb3NDb250ZW5lZG9yTm9kb3MudG9wKSk7CiAgICAgIGNvbnNvbGUubG9nKCJkaXN0YW5jaWFMZWZ0UHg6ICIuY29uY2F0KGRpc3RhbmNpYUxlZnRQeCkpOwogICAgICBjb25zb2xlLmxvZygiZGlzdGFuY2lhVG9wUHg6ICIuY29uY2F0KGRpc3RhbmNpYVRvcFB4KSk7CiAgICAgIGNvbnNvbGUubG9nKCJTY3JvbGwgeCBjb250ZW5lZG9yRGlhZ3JhbWE6ICIuY29uY2F0KHRoaXMuJHJlZnMuY29udGVuZWRvckRpYWdyYW1hLnNjcm9sbExlZnQpKTsKICAgICAgdmFyIHBvc2ljaW9uTnVldm9Ob2RvID0gewogICAgICAgIHg6IHBhcnNlSW50KHBvc1B4WCAvIHRoaXMuZmFjdG9yWm9vbSArIHRoaXMuZXNxdWluYXNEaWFncmFtYS54MSksCiAgICAgICAgeTogcGFyc2VJbnQocG9zUHhZIC8gdGhpcy5mYWN0b3Jab29tICsgdGhpcy5lc3F1aW5hc0RpYWdyYW1hLnkxKQogICAgICB9OwogICAgICBjb25zb2xlLmxvZygiQ3JlYW5kbyBudWV2byBub2RvIGVuICIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHBvc2ljaW9uTnVldm9Ob2RvKSkpOwogICAgICB0aGlzLmNyZWFyTm9kbyhwb3NpY2lvbk51ZXZvTm9kbyk7CiAgICB9LAogICAgZW5jb250cmFyTm9kb3NOZWNlc2FyaW9zRGVOb2RvOiBmdW5jdGlvbiBlbmNvbnRyYXJOb2Rvc05lY2VzYXJpb3NEZU5vZG8oaWROb2RvLCBsaXN0YVRvdGFsKSB7CiAgICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICAgIHZhciBlbE5vZG8gPSB0aGlzLnRvZG9zTm9kb3MuZmluZChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkID09IGlkTm9kbzsKICAgICAgfSk7CgogICAgICBpZiAoIWVsTm9kbykgewogICAgICAgIHJldHVybiBsaXN0YVRvdGFsOwogICAgICB9CgogICAgICB2YXIgbmVjZXNhcmlvcyA9IGVsTm9kby52aW5jdWxvcy5maWx0ZXIoZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gdi5yb2wgPT0gInRhcmdldCI7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiB2LmlkUmVmOwogICAgICB9KTsKICAgICAgbmVjZXNhcmlvcy5mb3JFYWNoKGZ1bmN0aW9uIChuZWNlc2FyaW8pIHsKICAgICAgICBpZiAoIWxpc3RhVG90YWwuaW5jbHVkZXMobmVjZXNhcmlvKSkgewogICAgICAgICAgbGlzdGFUb3RhbC5wdXNoKG5lY2VzYXJpbyk7CiAgICAgICAgICBsaXN0YVRvdGFsID0gX3RoaXMxMy5lbmNvbnRyYXJOb2Rvc05lY2VzYXJpb3NEZU5vZG8obmVjZXNhcmlvLCBsaXN0YVRvdGFsKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gbGlzdGFUb3RhbDsKICAgIH0sCiAgICBjbGlja0ZvbmRvQXRsYXM6IGZ1bmN0aW9uIGNsaWNrRm9uZG9BdGxhcygpIHsKICAgICAgLy8gY29uc29sZS5sb2coYENsaWNrIGVuIGVsIGZvbmRvIGRlbCBhdGxhcy4gUm91dGUgbmFtZTogJHt0aGlzLiRyb3V0ZS5uYW1lfWApOwogICAgICBpZiAodGhpcy4kcm91dGUubmFtZSAhPSAiYXRsYXMiKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgbmFtZTogImF0bGFzIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnZpc3RhUGFubmVkKSB0aGlzLmlkTm9kb1NlbGVjY2lvbmFkbyA9IG51bGw7CiAgICAgIHRoaXMucGFubmluZ1Zpc3RhID0gZmFsc2U7CiAgICAgIHRoaXMudmlzdGFQYW5uZWQgPSBmYWxzZTsKICAgICAgdGhpcy4kcmVmcy5wYW5lbENvbmp1bnRvc05vZG9zLmFiaWVydG8gPSBmYWxzZTsKICAgICAgdGhpcy5tb3N0cmFuZG9NZW51Q29udGV4dHVhbCA9IGZhbHNlOwogICAgfSwKICAgIHNldEVzdGFkb09iamV0aXZvTm9kb0NhY2hlOiBmdW5jdGlvbiBzZXRFc3RhZG9PYmpldGl2b05vZG9DYWNoZShudWV2b0VzdGFkbywgaWROb2RvKSB7CiAgICAgIGNvbnNvbGUubG9nKCJTZXRpbmcgZW4gY2FjaGUgYWwgbm9kbyAiLmNvbmNhdChpZE5vZG8sICIgY29uIGVzdGFkbyBvYmpldGl2bzogIikuY29uY2F0KG51ZXZvRXN0YWRvKSk7CiAgICAgIHZhciBzdG9yZSA9IHRoaXMuJGFwb2xsby5wcm92aWRlci5kZWZhdWx0Q2xpZW50OwogICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TCiAgICAgIH0pOwogICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKICAgICAgdmFyIGluZGV4TiA9IG51ZXZvQ2FjaGUueW8uYXRsYXMuZGF0b3NOb2Rvcy5maW5kSW5kZXgoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5pZE5vZG8gPT0gaWROb2RvOwogICAgICB9KTsKCiAgICAgIGlmIChpbmRleE4gPiAtMSkgewogICAgICAgIG51ZXZvQ2FjaGUueW8uYXRsYXMuZGF0b3NOb2Rvc1tpbmRleE5dLm9iamV0aXZvID0gbnVldm9Fc3RhZG87CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGVzdGFiYSBlbiBjYWNoXHhFOS4gUHVzaGluZyIpOwogICAgICAgIG51ZXZvQ2FjaGUueW8uYXRsYXMuZGF0b3NOb2Rvcy5wdXNoKHsKICAgICAgICAgIF9fdHlwZW5hbWU6ICJEYXRvTm9kb1VzdWFyaW8iLAogICAgICAgICAgaWROb2RvOiBpZE5vZG8sCiAgICAgICAgICBvYmpldGl2bzogbnVldm9Fc3RhZG8sCiAgICAgICAgICBhcHJlbmRpZG86IGZhbHNlCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TLAogICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgfSk7CiAgICB9LAogICAgc2V0Tm9kb0FwcmVuZGlkb0NhY2hlOiBmdW5jdGlvbiBzZXROb2RvQXByZW5kaWRvQ2FjaGUobnVldm9Fc3RhZG8sIGlkTm9kbykgewogICAgICBjb25zb2xlLmxvZygiU2V0aW5nIGVuIGNhY2hlIGFsIG5vZG8gIi5jb25jYXQoaWROb2RvLCAiIGNvbiBlc3RhZG8gYXByZW5kaWRvOiAiKS5jb25jYXQobnVldm9Fc3RhZG8pKTsKICAgICAgdmFyIHN0b3JlID0gdGhpcy4kYXBvbGxvLnByb3ZpZGVyLmRlZmF1bHRDbGllbnQ7CiAgICAgIHZhciBjYWNoZSA9IHN0b3JlLnJlYWRRdWVyeSh7CiAgICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MKICAgICAgfSk7CiAgICAgIHZhciBudWV2b0NhY2hlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjYWNoZSkpOwogICAgICB2YXIgaW5kZXhOID0gbnVldm9DYWNoZS55by5hdGxhcy5kYXRvc05vZG9zLmZpbmRJbmRleChmdW5jdGlvbiAobikgewogICAgICAgIHJldHVybiBuLmlkTm9kbyA9PSBpZE5vZG87CiAgICAgIH0pOwoKICAgICAgaWYgKGluZGV4TiA+IC0xKSB7CiAgICAgICAgbnVldm9DYWNoZS55by5hdGxhcy5kYXRvc05vZG9zW2luZGV4Tl0uYXByZW5kaWRvID0gbnVldm9Fc3RhZG87CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGVzdGFiYSBlbiBjYWNoXHhFOS4gUHVzaGluZyIpOwogICAgICAgIG51ZXZvQ2FjaGUueW8uYXRsYXMuZGF0b3NOb2Rvcy5wdXNoKHsKICAgICAgICAgIF9fdHlwZW5hbWU6ICJEYXRvTm9kb1VzdWFyaW8iLAogICAgICAgICAgaWROb2RvOiBpZE5vZG8sCiAgICAgICAgICBvYmpldGl2bzogZmFsc2UsCiAgICAgICAgICBhcHJlbmRpZG86IG51ZXZvRXN0YWRvCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TLAogICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgfSk7CiAgICB9LAogICAgc2V0Tm9kb1RhcmdldENhY2hlOiBmdW5jdGlvbiBzZXROb2RvVGFyZ2V0Q2FjaGUoaWROb2RvKSB7CiAgICAgIGNvbnNvbGUubG9nKCJTZXRpbmcgZW4gY2FjaGUgYWwgbm9kbyAiLmNvbmNhdChpZE5vZG8sICIgY29tbyB0YXJnZXQiKSk7CiAgICAgIHZhciBzdG9yZSA9IHRoaXMuJGFwb2xsby5wcm92aWRlci5kZWZhdWx0Q2xpZW50OwogICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TCiAgICAgIH0pOwogICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKICAgICAgbnVldm9DYWNoZS55by5hdGxhcy5pZE5vZG9UYXJnZXQgPSBpZE5vZG87CiAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgIHF1ZXJ5OiBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TLAogICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgfSk7CiAgICB9LAogICAgc2V0TW9kbzogZnVuY3Rpb24gc2V0TW9kbyhtb2RvKSB7CiAgICAgIGlmICghdGhpcy51c3VhcmlvTG9nZWFkbykgcmV0dXJuOwogICAgICB0aGlzLm1vZG9BdGxhcyA9IG1vZG87IC8vIHRoaXMuZW52aWFuZG9RdWVyeU1vZG8gPSB0cnVlOwogICAgICAvLyB0aGlzLiRhcG9sbG8KICAgICAgLy8gICAubXV0YXRlKHsKICAgICAgLy8gICAgIG11dGF0aW9uOiBncWxgCiAgICAgIC8vICAgICAgIG11dGF0aW9uICgkaWRVc3VhcmlvOiBJRCEsICRudWV2b01vZG86IFN0cmluZyEpIHsKICAgICAgLy8gICAgICAgICBzZXRNb2RvVXN1YXJpb0F0bGFzKGlkVXN1YXJpbzogJGlkVXN1YXJpbywgbnVldm9Nb2RvOiAkbnVldm9Nb2RvKXsKICAgICAgLy8gICAgICAgICAgICAgaWQKICAgICAgLy8gICAgICAgICAgICAgYXRsYXN7CiAgICAgIC8vICAgICAgICAgICAgICAgICBjb25maWd1cmFjaW9uewogICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1vZG8KICAgICAgLy8gICAgICAgICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAvLyAgICAgICAgIH0KICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgYCwKICAgICAgLy8gICAgIHZhcmlhYmxlczogewogICAgICAvLyAgICAgICBpZFVzdWFyaW86IHRoaXMudXN1YXJpby5pZCwKICAgICAgLy8gICAgICAgbnVldm9Nb2RvOiBtb2RvLAogICAgICAvLyAgICAgfSwKICAgICAgLy8gICB9KQogICAgICAvLyAgIC50aGVuKCgpID0+IHsKICAgICAgLy8gICAgIHRoaXMuZW52aWFuZG9RdWVyeU1vZG8gPSBmYWxzZTsKICAgICAgLy8gICB9KQogICAgICAvLyAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgLy8gICAgIHRoaXMuZW52aWFuZG9RdWVyeU1vZG8gPSBmYWxzZTsKICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGBFcnJvcjogJHtlcnJvcn1gKTsKICAgICAgLy8gICB9KTsKICAgIH0sCiAgICBjb25maWd1cmFyTm9kb1RhcmdldDogZnVuY3Rpb24gY29uZmlndXJhck5vZG9UYXJnZXQoaWROb2RvKSB7CiAgICAgIHZhciBfdGhpczE0ID0gdGhpczsKCiAgICAgIHRoaXMuZW52aWFuZG9RdWVyeVRhcmdldCA9IHRydWU7CiAgICAgIGNvbnNvbGUubG9nKCJDb25maWd1cmFuZG8gbm9kbyB0YXJnZXQiKTsKCiAgICAgIGlmICghaWROb2RvIHx8IGlkTm9kbyA9PT0gdGhpcy5pZE5vZG9UYXJnZXQpIHsKICAgICAgICBjb25zb2xlLmxvZygiTnVsaWZpY2FuZG8iKTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMTQubnVsaWZpY2FyTm9kb1RhcmdldCgpOwogICAgICAgIH0sIDEwMCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczE0LnNldE5vZG9UYXJnZXQoaWROb2RvKTsKICAgICAgICB9LCAxMDApOwogICAgICB9CiAgICB9LAogICAgc2V0Tm9kb1RhcmdldDogZnVuY3Rpb24gc2V0Tm9kb1RhcmdldChpZE5vZG8pIHsKICAgICAgaWYgKCFpZE5vZG8pIHJldHVybjsKCiAgICAgIGlmICh0aGlzLmlkTm9kb1RhcmdldCA9PSBpZE5vZG8pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuaWROb2RvVGFyZ2V0ID0gaWROb2RvOwogICAgfSwKICAgIG51bGlmaWNhck5vZG9UYXJnZXQ6IGZ1bmN0aW9uIG51bGlmaWNhck5vZG9UYXJnZXQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJOdWxpZmljYW5kbyBub2RvIHRhcmdldCIpOwogICAgICB0aGlzLmlkTm9kb1RhcmdldCA9IG51bGw7CiAgICB9LAogICAgY2VudHJhckVuTm9kbzogZnVuY3Rpb24gY2VudHJhckVuTm9kbyhuKSB7CiAgICAgIHZhciBwb3NEaWFncmFtYSA9IHRoaXMuJHJlZnMuY29udGVuZWRvckRpYWdyYW1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB2YXIgcG9zTm9kbyA9IHsKICAgICAgICB4OiAobi5hdXRvQ29vcmRzLnggLSB0aGlzLmVzcXVpbmFzRGlhZ3JhbWEueDEpICogdGhpcy5mYWN0b3Jab29tLAogICAgICAgIHk6IChuLmF1dG9Db29yZHMueSAtIHRoaXMuZXNxdWluYXNEaWFncmFtYS55MSkgKiB0aGlzLmZhY3Rvclpvb20KICAgICAgfTsKICAgICAgdmFyIHBvc0lkZWFsU2Nyb2xsID0gewogICAgICAgIHg6IHBhcnNlSW50KHBvc05vZG8ueCAtIHBvc0RpYWdyYW1hLndpZHRoIC8gMiksCiAgICAgICAgeTogcGFyc2VJbnQocG9zTm9kby55IC0gcG9zRGlhZ3JhbWEuaGVpZ2h0IC8gMikKICAgICAgfTsKICAgICAgdGhpcy4kcmVmcy5jb250ZW5lZG9yRGlhZ3JhbWEuc2Nyb2xsTGVmdCA9IHBvc0lkZWFsU2Nyb2xsLng7CiAgICAgIHRoaXMuJHJlZnMuY29udGVuZWRvckRpYWdyYW1hLnNjcm9sbFRvcCA9IHBvc0lkZWFsU2Nyb2xsLnk7CiAgICAgIHRoaXMuc2VsZWNjaW9uTm9kbyhuKTsgLy90aGlzLmNlbnRyb1Zpc3RhPWU7CiAgICB9LAogICAgY2VudHJhckVuTm9kb0J5SWQ6IGZ1bmN0aW9uIGNlbnRyYXJFbk5vZG9CeUlkKGlkTm9kbykgewogICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7CgogICAgICBjb25zb2xlLmxvZygiQ2VudHJhbmRvIGVuIG5vZG8gY29uIGlkICIuY29uY2F0KGlkTm9kbykpOwogICAgICB2YXIgZWxOb2RvID0gdGhpcy50b2Rvc05vZG9zLmZpbmQoZnVuY3Rpb24gKG4pIHsKICAgICAgICByZXR1cm4gbi5pZCA9PT0gaWROb2RvOwogICAgICB9KTsKCiAgICAgIGlmIChlbE5vZG8pIHsKICAgICAgICB0aGlzLmNlbnRyYXJFbk5vZG8oZWxOb2RvKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJGFwb2xsby5xdWVyeSh7CiAgICAgICAgcXVlcnk6IGdxbChfdGVtcGxhdGVPYmplY3QxMCgpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkTm9kbzogaWROb2RvCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmNSkgewogICAgICAgIHZhciBub2RvID0gX3JlZjUuZGF0YS5ub2RvOwogICAgICAgIGNvbnNvbGUubG9nKCJSZWNpYmlkbyBub2RvIGFzXHhFRDogIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkobm9kbykpKTsKCiAgICAgICAgX3RoaXMxNS5jZW50cmFyRW5Ob2RvKG5vZG8pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygiRXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfSwKICAgIGluaWNpYU1vdmltaWVudG9Ub3VjaDogZnVuY3Rpb24gaW5pY2lhTW92aW1pZW50b1RvdWNoKGUpIHsKICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPT09IDIpIHsKICAgICAgICB2YXIgZGlzdCA9IE1hdGguaHlwb3QoZS50b3VjaGVzWzBdLnBhZ2VYIC0gZS50b3VjaGVzWzFdLnBhZ2VYLCBlLnRvdWNoZXNbMF0ucGFnZVkgLSBlLnRvdWNoZXNbMV0ucGFnZVkpOwogICAgICAgIHRoaXMubGFzdFBpbmNoRGlzdGFuY2UgPSBkaXN0OwogICAgICAgIHRoaXMucGluY2hpbmcgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy51bHRpbW9Ub3VjaFggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFg7CiAgICAgIHRoaXMudWx0aW1vVG91Y2hZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZOwogICAgfSwKICAgIGZpblRvdWNoOiBmdW5jdGlvbiBmaW5Ub3VjaCgpIHsKICAgICAgdGhpcy5waW5jaGluZyA9IGZhbHNlOwogICAgfSwKICAgIGNhbWJpYXJDb29yZHNNYW51YWxlc05vZG86IGZ1bmN0aW9uIGNhbWJpYXJDb29yZHNNYW51YWxlc05vZG8oaWROb2RvLCBjb29yZHNNYW51YWxlcykgewogICAgICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMudXN1YXJpb1N1cGVyYWRtaW5pc3RyYWRvciAmJiAhdGhpcy51c3VhcmlvQWRtaW5pc3RyYWRvckF0bGFzKSB7CiAgICAgICAgY29uc29sZS5sb2coIk5vIGF1dG9yaXphZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMudG9kb3NOb2Rvc1t0aGlzLnRvZG9zTm9kb3MuZmluZEluZGV4KGZ1bmN0aW9uIChuKSB7CiAgICAgICAgcmV0dXJuIG4uaWQgPT0gaWROb2RvOwogICAgICB9KV0uY29vcmRzID0gY29vcmRzTWFudWFsZXM7CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0MTEoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZE5vZG86IGlkTm9kbywKICAgICAgICAgIGNvb3Jkc01hbnVhbGVzOiBjb29yZHNNYW51YWxlcwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMxNi4kcmVmcy5jYW52YXNlcy5jcmVhckltYWdlblRvZG9zVmluY3Vsb3MoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiLmNvbmNhdChlcnJvcikpOwogICAgICB9KTsKICAgIH0sCiAgICBlbGltaW5hck5vZG86IGZ1bmN0aW9uIGVsaW1pbmFyTm9kbyhpZE5vZG8pIHsKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcykgewogICAgICAgIGNvbnNvbGUubG9nKCJObyBhdXRvcml6YWRvIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIWNvbmZpcm0oIsK/U2VndXJvIGRlIHF1ZSBxdWllcmVzIGVsaW1pbmFyIGVzdGUgbm9kbz8iKSkgcmV0dXJuOwogICAgICBjb25zb2xlLmxvZygiZW52aWFuZG8gbXV0YWNpb24gZGUgZWxpbWluYXIgbm9kbyIpOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdDEyKCkpLAogICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgaWROb2RvOiBpZE5vZG8KICAgICAgICB9LAogICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHN0b3JlLCBfcmVmNikgewogICAgICAgICAgdmFyIGVsaW1pbmFyTm9kbyA9IF9yZWY2LmRhdGEuZWxpbWluYXJOb2RvOwoKICAgICAgICAgIGlmICghZWxpbWluYXJOb2RvKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJOb2RvIG5vIGZ1ZSBlbGltaW5hZG8iKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBjYWNoZSA9IHN0b3JlLnJlYWRRdWVyeSh7CiAgICAgICAgICAgIHF1ZXJ5OiBRVUVSWV9OT0RPUwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKICAgICAgICAgIHZhciBpbmRleE4gPSBudWV2b0NhY2hlLnRvZG9zTm9kb3MuZmluZEluZGV4KGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHJldHVybiBuLmlkID09IGlkTm9kbzsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGlmIChpbmRleE4gPiAtMSkgewogICAgICAgICAgICBudWV2b0NhY2hlLnRvZG9zTm9kb3Muc3BsaWNlKGluZGV4TiwgMSk7CiAgICAgICAgICAgIHN0b3JlLndyaXRlUXVlcnkoewogICAgICAgICAgICAgIHF1ZXJ5OiBRVUVSWV9OT0RPUywKICAgICAgICAgICAgICBkYXRhOiBudWV2b0NhY2hlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coIkVsIG5vZG8gbm8gZXN0YWJhIHByZXNlbnRlIik7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgY29uc29sZS5sb2coInF1aXRhbmRvIGVsIG9iamV0byBkZWwgYXJyYXkuICIuY29uY2F0KGRhdGEpKTsKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXJOb2RvOiBmdW5jdGlvbiBjcmVhck5vZG8ocG9zaWNpb24pIHsKICAgICAgdmFyIF90aGlzMTcgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIXRoaXMudXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcykgewogICAgICAgIGNvbnNvbGUubG9nKCJFcnJvciB1c3VhcmlvIG5vIGF1dG9yaXphZG8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKCJlbnZpYW5kbyB1bmEgbXV0YWNpXHhGM24gZGUgY3JlYXIgbm9kbyIpOwogICAgICB2YXIgaW5mb05vZG8gPSB7CiAgICAgICAgY29vcmRzTWFudWFsZXM6IHsKICAgICAgICAgIHg6IHBvc2ljaW9uLngsCiAgICAgICAgICB5OiBwb3NpY2lvbi55CiAgICAgICAgfSwKICAgICAgICBjb29yZHM6IHsKICAgICAgICAgIHg6IHBvc2ljaW9uLngsCiAgICAgICAgICB5OiBwb3NpY2lvbi55CiAgICAgICAgfSwKICAgICAgICBhdXRvQ29vcmRzOiB7CiAgICAgICAgICB4OiBwb3NpY2lvbi54LAogICAgICAgICAgeTogcG9zaWNpb24ueQogICAgICAgIH0KICAgICAgfTsKICAgICAgY29uc29sZS5sb2coImVuIGxhcyBjb29yZGVuYWRhczogIi5jb25jYXQocG9zaWNpb24ueCwgIiwgIikuY29uY2F0KHBvc2ljaW9uLnksICIgIikpOwogICAgICB0aGlzLnBvc2ljaW9uQ3JlYW5kb05vZG8gPSB7CiAgICAgICAgeDogcG9zaWNpb24ueCwKICAgICAgICB5OiBwb3NpY2lvbi55CiAgICAgIH07CiAgICAgIHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgIG11dGF0aW9uOiBncWwoX3RlbXBsYXRlT2JqZWN0MTMoKSwgZnJhZ21lbnRvTm9kb0Nvbm9jaW1pZW50byksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpbmZvTm9kbzogaW5mb05vZG8KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKF9yZWY3KSB7CiAgICAgICAgdmFyIGNyZWFyTm9kbyA9IF9yZWY3LmRhdGEuY3JlYXJOb2RvOwogICAgICAgIGNvbnNvbGUubG9nKCJDcmVhZG8gIi5jb25jYXQoY3JlYXJOb2RvLmlkKSk7CiAgICAgICAgdmFyIHN0b3JlID0gX3RoaXMxNy4kYXBvbGxvLnByb3ZpZGVyLmRlZmF1bHRDbGllbnQ7CiAgICAgICAgdmFyIGNhY2hlID0gc3RvcmUucmVhZFF1ZXJ5KHsKICAgICAgICAgIHF1ZXJ5OiBRVUVSWV9OT0RPUwogICAgICAgIH0pOwogICAgICAgIHZhciBudWV2b0NhY2hlID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShjYWNoZSkpOwogICAgICAgIGNvbnNvbGUubG9nKCIxIik7CiAgICAgICAgdmFyIGxvc05vZG9zID0gbnVldm9DYWNoZS50b2Rvc05vZG9zOwogICAgICAgIGNvbnNvbGUubG9nKCIyIik7CiAgICAgICAgdmFyIGluZGV4TiA9IGxvc05vZG9zLmZpbmRJbmRleChmdW5jdGlvbiAobikgewogICAgICAgICAgcmV0dXJuIG4uaWQgPT09IGNyZWFyTm9kby5pZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGluZGV4TiA+IC0xKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRWwgbm9kbyB5YSBlc3RhYmEgZW4gY2FjaFx4RTkiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbG9zTm9kb3MucHVzaChjcmVhck5vZG8pOwogICAgICAgICAgc3RvcmUud3JpdGVRdWVyeSh7CiAgICAgICAgICAgIHF1ZXJ5OiBRVUVSWV9OT0RPUywKICAgICAgICAgICAgZGF0YTogbnVldm9DYWNoZQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBfdGhpczE3LnBvc2ljaW9uQ3JlYW5kb05vZG8gPSBudWxsOyAvL3RoaXMuJHJvdXRlci5wdXNoKCIvbm9kb0Nvbm9jaW1pZW50by8iK2NyZWFyTm9kby5pZCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMTcucG9zaWNpb25DcmVhbmRvTm9kbyA9IG51bGw7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yLiBFOiAiLmNvbmNhdChlcnJvcikpOwogICAgICB9KTsKICAgIH0sCiAgICBkZXNjYXJnYXJDZW50cm9WaXN0YTogZnVuY3Rpb24gZGVzY2FyZ2FyQ2VudHJvVmlzdGEoKSB7CiAgICAgIHZhciBkaXMgPSB0aGlzOwogICAgICB0aGlzLiRhcG9sbG8ucXVlcnkoewogICAgICAgIHF1ZXJ5OiBncWwoX3RlbXBsYXRlT2JqZWN0MTQoKSksCiAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICBpZFVzdWFyaW86IHRoaXMuJHN0b3JlLnN0YXRlLnVzdWFyaW8uaWQKICAgICAgICB9LAogICAgICAgIGZldGNoUG9saWN5OiAibmV0d29yay1vbmx5IgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmOCkgewogICAgICAgIHZhciB5byA9IF9yZWY4LmRhdGEueW87CiAgICAgICAgdmFyIGNvb3JkcyA9IHlvLmF0bGFzLmNlbnRyb1Zpc3RhOwogICAgICAgIGRpcy4kc2V0KGRpcy5jZW50cm9WaXN0YSwgIngiLCBjb29yZHMueCk7CiAgICAgICAgZGlzLiRzZXQoZGlzLmNlbnRyb1Zpc3RhLCAieSIsIGNvb3Jkcy55KTsKICAgICAgICBkaXMuJHN0b3JlLmNvbW1pdCgic2V0Q2VudHJvVmlzdGFBdGxhcyIsIGNvb3Jkcyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBmZXRjaGluZyBjZW50cm8gdmlzdGE6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjY2lvbk5vZG86IGZ1bmN0aW9uIHNlbGVjY2lvbk5vZG8obm9kbykgewogICAgICB0aGlzLmlkTm9kb1NlbGVjY2lvbmFkbyA9IG5vZG8uaWQ7CiAgICB9LAogICAgZWxpbWluYXJWaW5jdWxvOiBmdW5jdGlvbiBlbGltaW5hclZpbmN1bG8oYXJncykgewogICAgICB2YXIgX3RoaXMxOCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKCFfdGhpczE4LnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIV90aGlzMTgudXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJObyBhdXRvcml6YWRvIik7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coImVsaW1pbmFuZG8gdW4gdmluY3VsbyBlbnRyZSAiLmNvbmNhdChhcmdzLmlkTm9kb0Zyb20sICIgeSAiKS5jb25jYXQoYXJncy5pZE5vZG9UbywgIiAiKSk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE4LiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgICAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QxNSgpKSwKICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgICAgICAgaWROb2RvRnJvbTogYXJncy5pZE5vZG9Gcm9tLAogICAgICAgICAgICAgICAgICAgIGlkTm9kb1RvOiBhcmdzLmlkTm9kb1RvCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge30pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGRpYnVqYXJWaW5jdWxvc0dyaXNlczogZnVuY3Rpb24gZGlidWphclZpbmN1bG9zR3Jpc2VzKCkgewogICAgICB0aGlzLmFjdHVhbGl6YXJWaW5jdWxvc0dyaXNlcysrOwogICAgfSwKICAgIGNyZWFyVmluY3VsbzogZnVuY3Rpb24gY3JlYXJWaW5jdWxvKGFyZ3MpIHsKICAgICAgdmFyIF90aGlzMTkgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKCFfdGhpczE5LnVzdWFyaW9TdXBlcmFkbWluaXN0cmFkb3IgJiYgIV90aGlzMTkudXN1YXJpb0FkbWluaXN0cmFkb3JBdGxhcykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTm8gYXV0b3JpemFkbyIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiY3JlYW5kbyB1biB2aW5jdWxvICIuY29uY2F0KEpTT04uc3RyaW5naWZ5KGFyZ3MpLCAiICIpKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczE5LiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgICAgICAgICAgbXV0YXRpb246IGdxbChfdGVtcGxhdGVPYmplY3QxNigpKSwKICAgICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgICAgICAgICAgdGlwbzogImNvbnRpbnVhY2lvbiIsCiAgICAgICAgICAgICAgICAgICAgaWROb2RvRnJvbTogYXJncy5pZE5vZG9Gcm9tLAogICAgICAgICAgICAgICAgICAgIGlkTm9kb1RvOiBhcmdzLmlkTm9kb1RvCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkge30pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiZXJyb3I6ICIuY29uY2F0KGVycm9yKSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2VuZFVwZGF0ZXNOb2RvczogZnVuY3Rpb24gc2VuZFVwZGF0ZXNOb2RvcygpIHsvLyBmb3IodmFyIG5vZG8gb2YgdGhpcy4kcmVmcy5ub2Rvc1JlbmRlcil7CiAgICAgIC8vICAgaWYoKQogICAgICAvLyB9CiAgICB9LAogICAgem9vbVZpc3RhOiBmdW5jdGlvbiB6b29tVmlzdGEoZGVsdGFab29tKSB7CiAgICAgIHZhciBudWV2b1pvb20gPSB0aGlzLnpvb20gKyBkZWx0YVpvb207CgogICAgICBpZiAobnVldm9ab29tIDwgdGhpcy5taW5ab29tKSB7CiAgICAgICAgdGhpcy56b29tID0gdGhpcy5taW5ab29tOwogICAgICB9IGVsc2UgaWYgKG51ZXZvWm9vbSA+IHRoaXMubWF4Wm9vbSkgewogICAgICAgIHRoaXMuem9vbSA9IHRoaXMubWF4Wm9vbTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnpvb20gPSBudWV2b1pvb207CiAgICAgIH0gLy9QYW4gdmlzdGEgZGUgYWN1ZXJkbyBjb24gbGEgcG9zaWNpw7NuIGRlbCBtb3VzZSByZXNwZWN0byBkZWwgYXRsYXMKCiAgICB9LAogICAgem9vbVdoZWVsOiBmdW5jdGlvbiB6b29tV2hlZWwoZSkgewogICAgICBpZiAoIXRoaXMuaG92ZXJlZCB8fCAhZS5jdHJsS2V5KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBjb250ZW5lZG9yID0gdGhpcy4kZWw7CiAgICAgIHZhciBwb3NDb250ZW5lZG9yID0gY29udGVuZWRvci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgdmFyIHBvc1pvb20gPSB7CiAgICAgICAgeDogTWF0aC5yb3VuZCgoZS5jbGllbnRYIC0gcG9zQ29udGVuZWRvci5sZWZ0KSAvIHRoaXMuZmFjdG9yWm9vbSkgKyB0aGlzLmNlbnRyb1Zpc3RhLngsCiAgICAgICAgeTogTWF0aC5yb3VuZCgoZS5jbGllbnRZIC0gcG9zQ29udGVuZWRvci50b3ApIC8gdGhpcy5mYWN0b3Jab29tKSArIHRoaXMuY2VudHJvVmlzdGEueQogICAgICB9OyAvLyBjb25zdCBwcm9wb3JjaW9uZXMgPSB7CiAgICAgIC8vICAgeDoKICAgICAgLy8gICAgIChwb3Nab29tLnggLSB0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbC54KSAvCiAgICAgIC8vICAgICAocG9zQ29udGVuZWRvci53aWR0aCAvIHRoaXMuZmFjdG9yWm9vbSksCiAgICAgIC8vICAgeToKICAgICAgLy8gICAgIChwb3Nab29tLnkgLSB0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbC55KSAvCiAgICAgIC8vICAgICAocG9zQ29udGVuZWRvci5oZWlnaHQgLyB0aGlzLmZhY3Rvclpvb20pLAogICAgICAvLyB9OwoKICAgICAgdmFyIGZhY3Rvclpvb20gPSAwLjI7CiAgICAgIHRoaXMuem9vbVZpc3RhKC1NYXRoLnJvdW5kKGUuZGVsdGFZICogZmFjdG9yWm9vbSksIHsKICAgICAgICB4OiBwb3Nab29tLngsCiAgICAgICAgeTogcG9zWm9vbS55CiAgICAgIH0pOwogICAgfSwKICAgIGhpZGVab29tSW5mbzogZGVib3VuY2UoZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnNob3dpbmdab29tSW5mbyA9IGZhbHNlOwogICAgfSwgMTAwMCkKICB9LAogIHdhdGNoOiB7CiAgICBpZENvbGVjY2lvblNlbGVjY2lvbmFkYTogZnVuY3Rpb24gaWRDb2xlY2Npb25TZWxlY2Npb25hZGEoaWRDb2xlY2Npb24pIHsKICAgICAgdGhpcy5zZWxlY2Npb25hbmRvQ29sZWNjaW9uID0gZmFsc2U7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJhdGxhc0Nvbm9jaW1pZW50b0lkTGFzdENvbGVjY2lvblRhcmdldCIsIGlkQ29sZWNjaW9uKTsKCiAgICAgIGlmIChpZENvbGVjY2lvbikgewogICAgICAgIGNvbnNvbGUubG9nKCJTZXR0aW5nIGxhc3RUYXJnZXQiKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjY2lvbmFuZG9Db2xlY2Npb246IGZ1bmN0aW9uIHNlbGVjY2lvbmFuZG9Db2xlY2Npb24oKSB7CiAgICAgIHRoaXMubW9zdHJhbmRvT3BjaW9uZXNDb2xlY2Npb24gPSBmYWxzZTsKICAgIH0sCiAgICBub2RvU2VsZWNjaW9uYWRvOiBmdW5jdGlvbiBub2RvU2VsZWNjaW9uYWRvKCkgewogICAgICB0aGlzLmFjdHVhbGl6YXJUcmF6b3MrKzsKICAgIH0sCiAgICByb3V0ZTogZnVuY3Rpb24gcm91dGUodG8pIHsKICAgICAgY29uc29sZS5sb2coImNhbWJpbyBkZSBuYXZlZ2FjaVx4RjNuIGEgIi5jb25jYXQodG8ucGF0aCkpOwogICAgfSwKICAgIGlkTm9kb1RhcmdldDogZnVuY3Rpb24gaWROb2RvVGFyZ2V0KF9pZE5vZG9UYXJnZXQpIHsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oImF0bGFzQ29ub2NpbWllbnRvSWRMYXN0Tm9kb1RhcmdldCIsIF9pZE5vZG9UYXJnZXQpOwoKICAgICAgaWYgKCFfaWROb2RvVGFyZ2V0KSB7CiAgICAgICAgdGhpcy5pZHNOZWNlc2FyaW9zUGFyYVRhcmdldCA9IFtdOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5pZHNOZWNlc2FyaW9zUGFyYVRhcmdldCA9IHRoaXMuZW5jb250cmFyTm9kb3NOZWNlc2FyaW9zRGVOb2RvKF9pZE5vZG9UYXJnZXQsIFtdKTsKICAgIH0sCiAgICB6b29tOiBmdW5jdGlvbiB6b29tKCkgewogICAgICB0aGlzLnNob3dpbmdab29tSW5mbyA9IHRydWU7CiAgICAgIHRoaXMuaGlkZVpvb21JbmZvKCk7CiAgICB9LAogICAgbm9kb3NSZW5kZXI6IGZ1bmN0aW9uIG5vZG9zUmVuZGVyKCkgewogICAgICB2YXIgX3RoaXMyMCA9IHRoaXM7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIV90aGlzMjAuJHJlZnMuZW5sYWNlc05vZG9zKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiTm8gaGF5IGVubGFjZXMiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKCJIYXkgIi5jb25jYXQoX3RoaXMyMC4kcmVmcy5lbmxhY2VzTm9kb3MubGVuZ3RoLCAiIGVubGFjZXMgZGUgbm9kb3MiKSk7CgogICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoX3RoaXMyMC4kcmVmcy5lbmxhY2VzTm9kb3MpLAogICAgICAgICAgICBfc3RlcDI7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgZW5sYWNlID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICBlbmxhY2Uuc2V0VmluY3Vsb3NHcmlzZXMoKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICB9CiAgICAgIH0sIDEwMDApOwogICAgfSAvLwoKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICAvLyBpZiAoIXRoaXMudXN1YXJpby5hdGxhcyB8fCAhdGhpcy51c3VhcmlvLmF0bGFzLmNlbnRyb1Zpc3RhKSB7CiAgICAvLyAgIGNvbnNvbGUubG9nKGBObyBoYWLDrWEgaW5mbyBkZSBjZW50cm8gdmlzdGEgZW4gbGEgc3RvcmUuIERlc2NhcmdhbmRvYCk7CiAgICAvLyAgIHRoaXMuZGVzY2FyZ2FyQ2VudHJvVmlzdGEoKTsKICAgIC8vICAgcmV0dXJuOwogICAgLy8gfQogICAgLy8gdGhpcy4kc2V0KHRoaXMuY2VudHJvVmlzdGFEZWNpbWFsLCAieCIsIHRoaXMudXN1YXJpby5hdGxhcy5jZW50cm9WaXN0YS54KTsKICAgIC8vIHRoaXMuJHNldCh0aGlzLmNlbnRyb1Zpc3RhRGVjaW1hbCwgInkiLCB0aGlzLnVzdWFyaW8uYXRsYXMuY2VudHJvVmlzdGEueSk7CiAgICBpZiAoc2NyZWVuLndpZHRoIDwgNjAwKSB7CiAgICAgIHRoaXMuem9vbSA9IDcwOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJ3aGVlbCIsIHRoaXMuem9vbVdoZWVsLCB7CiAgICAgIHBhc3NpdmU6IGZhbHNlCiAgICB9KTsKICB9LAogIHJlbW92ZWQ6IGZ1bmN0aW9uIHJlbW92ZWQoKSB7CiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigid2hlZWwiLCB0aGlzLnpvb21XaGVlbCk7CiAgfSAvLyBiZWZvcmVSb3V0ZUxlYXZlKF8sIF9fLCBuZXh0KSB7CiAgLy8gICBjb25zb2xlLmxvZygKICAvLyAgICAgYGVudmlhbmRvIG51ZXZvIGNlbnRyb1Zpc3RhIHBhcmEgZWwgdXN1YXJpbyAkewogIC8vICAgICAgIHRoaXMudXN1YXJpby5pZAogIC8vICAgICB9LiBDZW50cm8gdmlzdGE6ICR7SlNPTi5zdHJpbmdpZnkodGhpcy5jZW50cm9WaXN0YSl9YAogIC8vICAgKTsKICAvLyAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0Q2VudHJvVmlzdGFBdGxhcyIsIHRoaXMuY2VudHJvVmlzdGEpOwogIC8vICAgdGhpcy4kYXBvbGxvCiAgLy8gICAgIC5tdXRhdGUoewogIC8vICAgICAgIG11dGF0aW9uOiBncWxgCiAgLy8gICAgICAgICBtdXRhdGlvbigkaWRVc3VhcmlvOiBJRCwgJGNlbnRyb1Zpc3RhOiBDb29yZHNJbnB1dCkgewogIC8vICAgICAgICAgICBzZXRDZW50cm9WaXN0YShpZFVzdWFyaW86ICRpZFVzdWFyaW8sIGNlbnRyb1Zpc3RhOiAkY2VudHJvVmlzdGEpCiAgLy8gICAgICAgICB9CiAgLy8gICAgICAgYCwKICAvLyAgICAgICB2YXJpYWJsZXM6IHsKICAvLyAgICAgICAgIGlkVXN1YXJpbzogdGhpcy4kc3RvcmUuc3RhdGUudXN1YXJpby5pZCwKICAvLyAgICAgICAgIGNlbnRyb1Zpc3RhOiB0aGlzLmNlbnRyb1Zpc3RhLAogIC8vICAgICAgIH0sCiAgLy8gICAgIH0pCiAgLy8gICAgIC50aGVuKGZ1bmN0aW9uICgpIHsKICAvLyAgICAgICBuZXh0KCk7CiAgLy8gICAgIH0pCiAgLy8gICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyAgICAgICBjb25zb2xlLmxvZyhgZXJyb3I6ICR7ZXJyb3J9YCk7CiAgLy8gICAgICAgbmV4dCgpOwogIC8vICAgICB9KTsKICAvLyB9LAoKfTs="},{"version":3,"sources":["AtlasConocimiento.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    class=\"atlasConocimiento\"\n    :style=\"{ overflowY: nodoAbierto ? 'scroll' : 'hidden' }\"\n    @mousedown.left.exact.stop=\"panningVista = true\"\n    @mouseenter=\"hovered = true\"\n    @mouseleave=\"hovered = false\"\n    @click=\"\n      idNodoMenuCx = null;\n      cerrarBusqueda++;\n    \"\n  >\n    <router-view\n      :yo=\"yo\"\n      :datosNodosRepasar=\"datosNodosRepasar\"\n      :datosNodosUrgentes=\"datosNodosRepasar\"\n      @centrarEnNodo=\"centrarEnNodoById($event)\"\n    />\n    <div\n      id=\"zonaSeleccionColeccion\"\n      v-if=\"yo.atlas && yo.atlas.colecciones\"\n      v-show=\"!idNodoTarget\"\n    >\n      <div\n        id=\"nombreColeccion\"\n        @click.stop=\"seleccionandoColeccion = !seleccionandoColeccion\"\n      >\n        <pie-progreso\n          v-if=\"coleccionSeleccionada && progresoColeccionSeleccionada\"\n          :progreso=\"progresoColeccionSeleccionada\"\n          style=\"margin-right: 10px\"\n        />\n        <span style=\"z-index: 1\">\n          {{ nombreColeccionSeleccionada }}\n        </span>\n      </div>\n\n      <div\n        class=\"boton\"\n        id=\"botonMostrarOpcionesColeccion\"\n        v-show=\"!seleccionandoColeccion\"\n        @click=\"mostrandoOpcionesColeccion = !mostrandoOpcionesColeccion\"\n      >\n        <img\n          src=\"@/assets/iconos/ellipsisVertical.svg\"\n          alt=\"Opciones\"\n          style=\"\"\n        />\n      </div>\n\n      <div\n        id=\"contenedorControlesColeccion\"\n        v-show=\"mostrandoOpcionesColeccion\"\n      >\n        <div class=\"boton controlColeccion\" @click=\"localizarNext('available')\">\n          <img\n            src=\"@/assets/iconos/atlas/locationCrosshair.svg\"\n            alt=\"Localizar\"\n            style=\"filter: var(--filtroAtlasAvailable)\"\n          />\n        </div>\n        <div class=\"boton controlColeccion\" @click=\"localizarNext('check')\">\n          <img\n            src=\"@/assets/iconos/atlas/locationCrosshair.svg\"\n            alt=\"Localizar\"\n            style=\"filter: var(--filtroAtlasCheck)\"\n          />\n        </div>\n        <div class=\"boton controlColeccion\" @click=\"localizarNext('repaso')\" :class=\"{deshabilitado:!idsNodosRepasarPresentes || idsNodosRepasarPresentes.length===0}\">\n          <img\n            src=\"@/assets/iconos/atlas/locationCrosshair.svg\"\n            alt=\"Localizar\"\n            style=\"filter: var(--filtroAtlasRepaso)\"\n          />\n        </div>\n      </div>\n\n      <div id=\"listaSelectoresColeccion\" v-show=\"seleccionandoColeccion\">\n        <div\n          class=\"selectorColeccion\"\n          @click.stop=\"setIdColeccionSeleccionada(null)\"\n          v-show=\"idColeccionSeleccionada\"\n        >\n          <img\n            src=\"@/assets/iconos/userNodes.png\"\n            alt=\"Coleccion\"\n            style=\"height: 15px\"\n          />\n          Atlas\n        </div>\n        <div\n          class=\"selectorColeccion\"\n          @click.stop=\"setIdColeccionSeleccionada(coleccion.id)\"\n          v-for=\"coleccion of coleccionesUsuario.filter(\n            (col) => idColeccionSeleccionada != col.id\n          )\"\n          :key=\"coleccion.id\"\n        >\n          <img\n            src=\"@/assets/iconos/userNodes.png\"\n            alt=\"Coleccion\"\n            style=\"height: 15px\"\n          />\n          {{ coleccion.nombre }}\n        </div>\n      </div>\n    </div>\n    <transition name=\"fadeOut\">\n      <div v-show=\"showingZoomInfo\" id=\"infoZoom\">x{{ factorZoom }}</div>\n    </transition>\n    <div\n      id=\"menuContextual\"\n      :style=\"[offsetMenuContextual]\"\n      v-show=\"mostrandoMenuContextual\"\n    >\n      <div\n        class=\"botonMenuContextual\"\n        id=\"botonCrearNuevoNodo\"\n        :class=\"{ deshabilitado: posicionCreandoNodo }\"\n        v-if=\"usuarioAdministradorAtlas || usuarioProfe\"\n        @click=\"crearNodoEnMenuContextual\"\n      >\n        Crear Nodo de conocimiento\n      </div>\n    </div>\n\n    <div id=\"zonaNodoTarget\" v-show=\"idNodoTarget\">\n      <div\n        id=\"nombreNodoTarget\"\n        v-if=\"nodoTarget\"\n        @click=\"centrarEnNodo(nodoTarget)\"\n      >\n        <pie-progreso\n          v-show=\"\n            progresoNodoTarget && !$apollo.queries.progresoNodoTarget.loading\n          \"\n          :progreso=\"progresoNodoTarget\"\n          :size=\"40\"\n          :cifrasDecimales=\"0\"\n        />\n        <img\n          style=\"\n            height: 25px;\n            filter: var(--filtroBlanco);\n            margin: 2px 5px;\n            margin-right: 15px;\n          \"\n          src=\"@/assets/iconos/target.png\"\n          alt=\"Target\"\n        />\n\n        {{ nodoTarget.nombre }}\n      </div>\n\n      <div class=\"boton\" @click.stop=\"configurarNodoTarget(null)\">\n        <img src=\"@/assets/iconos/equis.svg\" alt=\"Equis\" />\n      </div>\n    </div>\n\n    <div\n      id=\"botonCallingPosiciones\"\n      v-if=\"usuarioSuperadministrador && usuario.username == 'juanMamian'\"\n      @click.stop=\"iniciarCallingPosiciones\"\n      :class=\"{ deshabilitado: callingPosiciones }\"\n      :style=\"[\n        { backgroundColor: callingPosiciones ? 'green' : 'transparent' },\n      ]\"\n    ></div>\n    <buscador-nodos-conocimiento\n      @nodoSeleccionado=\"centrarEnNodo\"\n      ref=\"buscadorNodos\"\n      :cerrarBusqueda=\"cerrarBusqueda\"\n    />\n\n    <panel-conjuntos-nodos\n      ref=\"panelConjuntosNodos\"\n      :yo=\"yo\"\n      :modoAtlas=\"modoAtlas\"\n      @centrarEnNodo=\"centrarEnNodo(todosNodos.find((n) => n.id == $event))\"\n    />\n\n    <div\n      id=\"contenedorDiagrama\"\n      v-show=\"!$apollo.queries.yo.loading\"\n      ref=\"contenedorDiagrama\"\n      @contextmenu.self.exact.prevent=\"abrirMenuContextual\"\n      @mouseup.left.self=\"clickFondoAtlas\"\n    >\n      <div id=\"contenedorVinculosNodos\" :style=\"[offsetContenedorNodos]\">\n        <enlaces-nodo-conocimiento\n          v-for=\"nodo of nodosRender\"\n          :key=\"nodo.id\"\n          :yo=\"yo\"\n          ref=\"enlacesNodos\"\n          :idNodoSeleccionado=\"idNodoSeleccionado\"\n          :esteNodo=\"nodo\"\n          :todosNodos=\"todosNodos\"\n          :factorZoom=\"factorZoom\"\n          :esquinasDiagrama=\"esquinasDiagrama\"\n          :nodoSeleccionado=\"nodoSeleccionado\"\n          :redibujarEnlaces=\"redibujarEnlacesNodos\"\n          :idsTodosNodosRender=\"idsTodosNodosRender\"\n          :callingPosiciones=\"callingPosiciones\"\n          :conectadoSeleccionado=\"\n            idsNodosConectadosSeleccionado.includes(nodo.id)\n          \"\n          :idsNodosConectadosSeleccionado=\"idsNodosConectadosSeleccionado\"\n          :idsNodosContinuacionSeleccionado=\"idsNodosContinuacionSeleccionado\"\n          :idsNodosPreviosSeleccionado=\"idsNodosPreviosSeleccionado\"\n          :idsNodosPresentesCabeza=\"idsNodosPresentesCabeza\"\n        />\n      </div>\n      <div\n        id=\"contenedorNodos\"\n        ref=\"contenedorNodos\"\n        :style=\"[offsetContenedorNodos]\"\n      >\n        <loading\n          texto=\"\"\n          v-show=\"posicionCreandoNodo\"\n          style=\"position: absolute\"\n          :style=\"[offsetLoadingCreandoNodo]\"\n        />\n        <nodo-conocimiento\n          :key=\"nodo.id\"\n          v-for=\"nodo of nodosRender\"\n          :esteNodo=\"nodo\"\n          ref=\"nodosRender\"\n          :nodoSeleccionado=\"nodoSeleccionado\"\n          :todosNodos=\"todosNodos\"\n          :idNodoMenuCx=\"idNodoMenuCx\"\n          :usuarioAdministradorAtlas=\"usuarioAdministradorAtlas\"\n          :yo=\"yo\"\n          :modoAtlas=\"modoAtlas\"\n          :esquinasDiagrama=\"esquinasDiagrama\"\n          :centroVista=\"centroVista\"\n          :esNodoObjetivo=\"idsNodosObjetivos.includes(nodo.id)\"\n          :esTarget=\"idNodoTarget == nodo.id\"\n          :idsNodosAprendidos=\"idsNodosAprendidos\"\n          :idsNodosEstudiados=\"idsNodosEstudiados\"\n          :idsNodosFrescos=\"idsNodosFrescos\"\n          :idsNodosPresentesCabeza=\"idsNodosPresentesCabeza\"\n          :idsNodosRepasar=\"idsNodosRepasar\"\n          :factorZoom=\"factorZoom\"\n          :seleccionado=\"idNodoSeleccionado === nodo.id\"\n          :escondido=\"\n            idNodoTarget &&\n            !idsNecesariosParaTarget.includes(nodo.id) &&\n            idNodoTarget != nodo.id\n          \"\n          :configuracionAtlas=\"configuracionAtlas\"\n          :callingPosiciones=\"callingPosiciones\"\n          :datosUsuarioEsteNodo=\"\n            yo.atlas.datosNodos.find((dn) => dn.idNodo === nodo.id) || {}\n          \"\n          :fantasmeado=\"\n            idNodoSeleccionado &&\n            idNodoSeleccionado != nodo.id &&\n            !idsNodosPreviosSeleccionado.includes(nodo.id) &&\n            !idsNodosContinuacionSeleccionado.includes(nodo.id)\n          \"\n          :previoDeSeleccionado=\"\n            idNodoSeleccionado && idsNodosPreviosSeleccionado.includes(nodo.id)\n          \"\n          :continuacionDeSeleccionado=\"\n            idNodoSeleccionado &&\n            idsNodosContinuacionSeleccionado.includes(nodo.id)\n          \"\n          :enviandoQueryTarget=\"enviandoQueryTarget\"\n          @contextmenu.native.exact.stop.prevent=\"idNodoMenuCx = nodo.id\"\n          @abroMenuContextual=\"idNodoMenuCx = nodo.id\"\n          @click.native.stop=\"seleccionNodo(nodo)\"\n          @creacionVinculo=\"crearVinculo\"\n          @eliminacionVinculo=\"eliminarVinculo\"\n          @cambioDePosicionManual=\"cambiarCoordsManualesNodo\"\n          @eliminar=\"eliminarNodo\"\n          @cambieEstadoObjetivo=\"setEstadoObjetivoNodoCache($event, nodo.id)\"\n          @tengoNuevoValorAprendido=\"setNodoAprendidoCache($event, nodo.id)\"\n          @mePongoEnMira=\"configurarNodoTarget(nodo.id)\"\n        />\n      </div>\n    </div>\n\n    <div id=\"barraInferior\">\n      <div\n        class=\"boton\"\n        title=\"Mostrar colecciones\"\n        @click=\"$refs.panelConjuntosNodos.abierto = true\"\n      >\n        <img src=\"@/assets/iconos/userNodes.png\" alt=\"Nodos de usuario\" />\n      </div>\n\n      <div\n        class=\"boton\"\n        :title=\"\n          'Cambiar a modo ' + modoAtlas === 'experto' ? 'estudiante' : 'experto'\n        \"\n        :class=\"{ deshabilitado: enviandoQueryModo }\"\n        @click=\"setModo(modoAtlas === 'estudiante' ? 'experto' : 'estudiante')\"\n      >\n        <img\n          src=\"@/assets/iconos/teacher.svg\"\n          v-if=\"modoAtlas === 'experto'\"\n          alt=\"Experto\"\n        />\n        <img\n          src=\"@/assets/iconos/estudiante.png\"\n          v-if=\"modoAtlas === 'estudiante'\"\n          alt=\"Estudiante\"\n        />\n      </div>\n\n      <div\n        class=\"boton\"\n        title=\"Mostrar temas para repasar\"\n        @click=\"$router.push({ name: 'ventanaRepasos' })\"\n      >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n          <path\n            d=\"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z\"\n            :fill=\"\n              datosNodosRepasar.length > 0\n                ? 'var(--atlasConocimientoRepaso)'\n                : ''\n            \"\n          />\n        </svg>\n      </div>\n    </div>\n\n    <loading\n      id=\"simboloDescargandoNodos\"\n      v-show=\"!nodosDescargados || $apollo.queries.yo.loading\"\n      texto=\"descargando nodos de conocimiento\"\n    />\n  </div>\n</template>\n\n<script>\nimport gql from \"graphql-tag\";\nimport NodoConocimiento from \"./NodoConocimiento.vue\";\nimport BuscadorNodosConocimiento from \"./BuscadorNodosConocimiento.vue\";\nimport Loading from \"../utilidades/Loading.vue\";\nimport PanelConjuntosNodos from \"./PanelConjuntosNodos.vue\";\nimport EnlacesNodoConocimiento from \"./EnlacesNodoConocimiento.vue\";\nimport { fragmentoDatoNodoConocimiento } from \"./fragsAtlasConocimiento\";\nimport PieProgreso from \"../utilidades/PieProgreso.vue\";\nconst debounce = require(\"debounce\");\n\nexport const fragmentoColecciones = gql`\n  fragment fragColecciones on ColeccionNodosAtlasConocimiento {\n    id\n    nombre\n    idsNodos\n    nodos {\n      id\n      nombre\n    }\n  }\n`;\n\nconst fragmentoNodoConocimiento = gql`\n  fragment fragNodoConocimiento on NodoConocimiento {\n    id\n    nombre\n    descripcion\n    expertos\n    tipoNodo\n    clases {\n      id\n      nombre\n      idExperto\n      interesados\n    }\n    coordsManuales {\n      x\n      y\n    }\n    coords {\n      x\n      y\n    }\n    autoCoords {\n      x\n      y\n    }\n    centroMasa {\n      x\n      y\n    }\n    stuck\n    angulo\n    puntaje\n    vinculos {\n      id\n      idRef\n      rol\n      tipo\n    }\n    fuerzaCentroMasa {\n      fuerza\n      direccion\n    }\n    fuerzaColision {\n      fuerza\n      direccion\n    }\n  }\n`;\n\nconst QUERY_NODOS = gql`\n  query todosNodos {\n    todosNodos {\n      ...fragNodoConocimiento\n    }\n  }\n  ${fragmentoNodoConocimiento}\n`;\n\nexport const QUERY_DATOS_USUARIO_NODOS = gql`\n  query {\n    yo {\n      id\n      atlas {\n        datosNodos {\n          ...fragDatoNodoConocimiento\n        }\n        configuracion {\n          modo\n        }\n        colecciones {\n          ...fragColecciones\n        }\n      }\n    }\n  }\n  ${fragmentoDatoNodoConocimiento}\n  ${fragmentoColecciones}\n`;\n\nexport default {\n  components: {\n    NodoConocimiento,\n    BuscadorNodosConocimiento,\n    Loading,\n    PanelConjuntosNodos,\n    EnlacesNodoConocimiento,\n    PieProgreso,\n  },\n  name: \"AtlasConocimiento\",\n  apollo: {\n    todosNodos: {\n      query: QUERY_NODOS,\n      result: function () {\n        this.dibujarVinculosGrises();\n      },\n      update({ todosNodos }) {\n        this.nodosDescargados = true;\n        var nuevoTodosNodos = JSON.parse(JSON.stringify(todosNodos));\n        nuevoTodosNodos.forEach((nodo) => {\n          nodo.coordsManuales = nodo.autoCoords;\n          nodo.coords = nodo.autoCoords;\n        });\n\n        const idLastNodoTarget = localStorage.getItem(\n          \"atlasConocimientoIdLastNodoTarget\"\n        );\n\n        if (idLastNodoTarget) {\n          const nodoLast = todosNodos.find((n) => n.id === idLastNodoTarget);\n          if (nodoLast) {\n            this.idNodoTarget = nodoLast.id;\n          }\n        }\n        return nuevoTodosNodos;\n      },\n      fetchPolicy: \"cache-first\",\n    },\n    yo: {\n      query: QUERY_DATOS_USUARIO_NODOS,\n      skip() {\n        return !this.usuarioLogeado || this.todosNodos.length < 1;\n      },\n      update({ yo }) {\n        const idLastColeccionTarget = localStorage.getItem(\n          \"atlasConocimientoIdLastColeccionTarget\"\n        );\n\n        console.log(`ID lastColeccionTarget: ${idLastColeccionTarget}`);\n\n        if (idLastColeccionTarget && yo.atlas?.colecciones) {\n          const coleccionLast = yo.atlas?.colecciones.find(\n            (col) => col.id === idLastColeccionTarget\n          );\n          if (coleccionLast) {\n            this.idColeccionSeleccionada = coleccionLast.id;\n          }\n        }\n        return yo;\n      },\n    },\n    configuracionAtlas: {\n      query: gql`\n        query ($nombreAtlas: String!) {\n          configuracionAtlas(nombreAtlas: $nombreAtlas) {\n            id\n            posicionando\n          }\n        }\n      `,\n      variables: {\n        nombreAtlas: \"conocimiento\",\n      },\n      fetchPolicy: \"network-only\",\n    },\n    progresoNodoTarget: {\n      query: gql`\n        query ($idNodo: ID!) {\n          nodo(idNodo: $idNodo) {\n            id\n            porcentajeCompletado\n          }\n        }\n      `,\n      variables() {\n        return {\n          idNodo: this.idNodoTarget,\n        };\n      },\n      skip() {\n        return !this.idNodoTarget;\n      },\n      update({ nodo }) {\n        return nodo.porcentajeCompletado;\n      },\n    },\n    progresoColeccionSeleccionada: {\n      query: gql`\n        query ($idColeccion: ID!, $idUsuario: ID!) {\n          coleccionNodosConocimiento(\n            idColeccion: $idColeccion\n            idUsuario: $idUsuario\n          ) {\n            id\n            progreso\n          }\n        }\n      `,\n      variables() {\n        return {\n          idColeccion: this.idColeccionSeleccionada,\n          idUsuario: this.usuario.id,\n        };\n      },\n      update({ coleccionNodosConocimiento }) {\n        return coleccionNodosConocimiento.progreso;\n      },\n      skip() {\n        return !this.idColeccionSeleccionada;\n      },\n    },\n  },\n  data() {\n    return {\n      configuracionAtlas: {\n        posicionando: false,\n      },\n      hovered: false,\n      todosNodos: [],\n      nodosDescargados: false,\n      posicionCreandoNodo: null,\n      idNodoSeleccionado: null,\n      idsNodosCadenaPreviaSeleccionado: [],\n      idNodoMenuCx: null,\n      idsNecesariosParaTarget: [],\n      enviandoQueryModo: false,\n      modoAtlas: \"estudiante\",\n      enviandoQueryTarget: false,\n\n      redibujarEnlacesNodos: 0,\n\n      yo: {\n        atlas: {\n          datosNodos: [],\n          configuracion: {\n            modo: \"estudiante\",\n          },\n        },\n      },\n\n      centroVistaDecimal: {\n        x: 218,\n        y: 39,\n      },\n      showingZoomInfo: false,\n      zoom: 80,\n      minZoom: 20,\n      maxZoom: 200,\n      pinching: false,\n      lastPinchDistance: 0,\n      actualizarTrazos: 0,\n      panningVista: false,\n      vistaPanned: false,\n\n      actualizarVinculosGrises: 0,\n\n      ultimoTouchX: 0,\n      ultimoTouchY: 0,\n\n      cerrarBusqueda: 0,\n\n      callingPosiciones: false,\n\n      mostrandoMenuContextual: false,\n      offsetMenuContextual: {\n        top: \"0px\",\n        left: \"0px\",\n      },\n      enviandoQueryConfiguracionAtlas: false,\n\n      idColeccionSeleccionada: null,\n      seleccionandoColeccion: false,\n      mostrandoOpcionesColeccion: false,\n\n      indexLastLocateNextAvailable: 0,\n      indexLastLocateNextCheck: 0,\n      indexLastLocateNextRepaso: 0,\n\n      idColeccionTargetOnLastLocalizacion: null,\n\n      idNodoTarget: null,\n    };\n  },\n  computed: {\n    nombreColeccionSeleccionada() {\n      if (!this.idColeccionSeleccionada) {\n        return \"Atlas\";\n      }\n\n      return this.coleccionSeleccionada?.nombre || \"Cargando\";\n    },\n    coleccionSeleccionada() {\n      if (!this.idColeccionSeleccionada) {\n        return null;\n      }\n      return this.coleccionesUsuario.find(\n        (col) => col.id === this.idColeccionSeleccionada\n      );\n    },\n    coleccionesUsuario() {\n      if (!this.yo?.atlas?.colecciones) {\n        return [];\n      }\n\n      return this.yo.atlas.colecciones;\n    },\n    idsNodosObjetivos() {\n      if (!this.yo || !this.yo.atlas || !this.yo.atlas.datosNodos) {\n        return [];\n      }\n      return this.yo.atlas.datosNodos\n        .filter((n) => n.objetivo == true)\n        .map((n) => n.idNodo);\n    },\n    nodosObjetivo() {\n      if (!this.todosNodos) return [];\n      return this.todosNodos.filter((n) =>\n        this.idsNodosObjetivos.includes(n.id)\n      );\n    },\n    nodoSeleccionado: function () {\n      if (!this.idNodoSeleccionado) {\n        return null;\n      }\n      return this.todosNodos.find((n) => n.id === this.idNodoSeleccionado);\n    },\n    idUsuario: function () {\n      return this.$store.state.usuario.id;\n    },\n    usuarioAdministradorAtlas: function () {\n      if (!this.$store.state.usuario.permisos) return false;\n      return this.$store.state.usuario.permisos.includes(\"atlasAdministrador\")\n        ? true\n        : false;\n    },\n\n    nodoTarget() {\n      if (!this.idNodoTarget) return null;\n      return this.todosNodos.find((n) => n.id === this.idNodoTarget);\n    },\n    idsNodosAprendidos() {\n      return this.yo.atlas.datosNodos\n        .filter((n) => n.aprendido === true)\n        .map((n) => n.idNodo);\n    },\n    datosNodosEstudiados() {\n      return this.yo.atlas.datosNodos.filter(\n        (n) => !n.aprendido && n.estudiado\n      );\n    },\n    idsNodosEstudiados() {\n      return this.datosNodosEstudiados.map((ne) => ne.idNodo);\n    },\n    datosNodosRepasar() {\n      if (!this.yo || !this.yo.atlas || !this.yo.atlas.datosNodos) {\n        return [];\n      }\n\n      var datosNodoConRepasoConfigurado = this.datosNodosEstudiados.filter(\n        (dn) => dn.periodoRepaso\n      );\n      let dateHoy = new Date();\n\n      let dateHoyMin = dateHoy;\n      dateHoyMin.setHours(0);\n      dateHoyMin.setMinutes(0);\n      dateHoyMin.setSeconds(0);\n\n      let datosNodoParaRepasar = datosNodoConRepasoConfigurado.filter((dn) => {\n        return (\n          new Date(dn.estudiado).getTime() + dn.periodoRepaso <\n          dateHoyMin.getTime()\n        );\n      });\n      return datosNodoParaRepasar;\n    },\n    idsNodosRepasar() {\n      return this.datosNodosRepasar.map((dn) => dn.idNodo);\n    },\n    idsNodosRepasarPresentes() {\n      if (!this.idTarget) {\n        return this.idsNodosRepasar;\n      }\n\n      return this.idsNodosRepasar.filter((id) =>\n        this.idsNodosRender.includes(id)\n      );\n    },\n    datosNodosFrescos() {\n      return this.datosNodosEstudiados.filter(\n        (dn) => !this.idsNodosRepasar.includes(dn.idNodo)\n      );\n    },\n    idsNodosFrescos() {\n      return this.datosNodosFrescos.map((nf) => nf.idNodo);\n    },\n    idsNodosPresentesCabeza() {\n      return this.idsNodosFrescos\n        .filter((idNe) => !this.idsNodosAprendidos.includes(idNe))\n        .concat(this.idsNodosAprendidos);\n    },\n    centroVista() {\n      return {\n        x: Math.round(this.centroVistaDecimal.x),\n        y: Math.round(this.centroVistaDecimal.y),\n      };\n    },\n    factorZoom() {\n      return Number((this.zoom / 100).toFixed(2));\n    },\n    esquinasDiagrama() {\n      const maxX = this.todosNodos.reduce(\n        (acc, n) => (n.autoCoords.x > acc ? n.autoCoords.x : acc),\n        0\n      );\n      const maxY = this.todosNodos.reduce(\n        (acc, n) => (n.autoCoords.y > acc ? n.autoCoords.y : acc),\n        0\n      );\n      const minX = this.todosNodos.reduce(\n        (acc, n) => (n.autoCoords.x < acc ? n.autoCoords.x : acc),\n        0\n      );\n      const minY = this.todosNodos.reduce(\n        (acc, n) => (n.autoCoords.y < acc ? n.autoCoords.y : acc),\n        0\n      );\n\n      return {\n        x1: minX,\n        y1: minY,\n\n        x2: maxX,\n        y2: maxY,\n      };\n    },\n    offsetContenedorNodos() {\n      const ancho = this.esquinasDiagrama.x2 - this.esquinasDiagrama.x1;\n      const alto = this.esquinasDiagrama.y2 - this.esquinasDiagrama.y1;\n      return {\n        // left: -(this.centroVista.x * this.factorZoom) + \"px\",\n        // top: -(this.centroVista.y * this.factorZoom) + \"px\",\n\n        width: ancho * this.factorZoom + \"px\",\n        height: alto * this.factorZoom + \"px\",\n      };\n    },\n    nodosConRequerimentos() {\n      var nr = this.todosNodos.filter((n) => n.vinculos.length > 0);\n\n      return nr;\n    },\n    nodosRender() {\n      if (this.$route.name != \"atlas\") {\n        return [];\n      }\n      if (this.idNodoTarget) {\n        return this.todosNodos\n          .filter((n) => this.idsNecesariosParaTarget.includes(n.id))\n          .concat([this.todosNodos.find((n) => this.idNodoTarget === n.id)]);\n      } else if (this.coleccionSeleccionada) {\n        let guarda = 0;\n        let idsNodosActuales = this.coleccionSeleccionada.idsNodos;\n        let todosNodosColeccion = [];\n        let nodosActuales = [];\n\n        while (guarda < 100 && idsNodosActuales.length > 0) {\n          nodosActuales = this.todosNodos.filter((n) =>\n            idsNodosActuales.includes(n.id)\n          );\n          todosNodosColeccion.push(...nodosActuales);\n          let idsTodosNodosColeccion = todosNodosColeccion.map((n) => n.id);\n\n          idsNodosActuales = [];\n          for (const nodoActual of nodosActuales) {\n            let idsVinculosRequeridos = nodoActual.vinculos\n              .filter((v) => v.tipo === \"continuacion\" && v.rol === \"target\")\n              .map((v) => v.idRef);\n            let idsVinculosNuevos = idsVinculosRequeridos.filter(\n              (idV) => !idsTodosNodosColeccion.includes(idV)\n            );\n            idsNodosActuales.push(...idsVinculosNuevos);\n          }\n        }\n\n        return todosNodosColeccion;\n      }\n      return this.todosNodos;\n    },\n    idsNodosRender(){\n      return this.nodosRender.map(n=>n.id);\n    },\n    idsTodosNodosRender() {\n      return this.nodosRender.map((n) => n.id);\n    },\n    offsetLoadingCreandoNodo() {\n      if (!this.posicionCreandoNodo) {\n        return null;\n      }\n      const left =\n        (this.posicionCreandoNodo.x - this.esquinasDiagrama.x1) *\n        this.factorZoom;\n      const top =\n        (this.posicionCreandoNodo.y - this.esquinasDiagrama.y1) *\n        this.factorZoom;\n      return {\n        left: left + \"px\",\n        top: top + \"px\",\n      };\n    },\n    nodoAbierto() {\n      return this.$route.name === \"visorNodoConocimiento\";\n    },\n    nodosConectadosAlSeleccionado() {\n      if (!this.nodoSeleccionado) return [];\n      return this.todosNodos.filter((n) =>\n        this.nodoSeleccionado.vinculos.some((v) => v.idRef === n.id)\n      );\n    },\n    idsNodosPreviosSeleccionado() {\n      if (!this.nodoSeleccionado) {\n        return [];\n      }\n      var idsActuales = [this.idNodoSeleccionado];\n      var cadenaTotal = [];\n      for (var i = 0; i < 20; i++) {\n        let previos = this.nodosRender.filter((n) =>\n          n.vinculos.some(\n            (v) => v.rol === \"source\" && idsActuales.includes(v.idRef)\n          )\n        );\n\n        if (previos.length < 1) {\n          break;\n        }\n\n        let idsPrevios = previos.map((previo) => previo.id);\n\n        cadenaTotal.push(...idsPrevios);\n\n        idsActuales = idsPrevios;\n      }\n\n      return cadenaTotal;\n    },\n    idsNodosContinuacionSeleccionado() {\n      if (!this.nodoSeleccionado) {\n        return [];\n      }\n\n      return this.nodoSeleccionado.vinculos\n        .filter((v) => v.tipo === \"continuacion\" && v.rol === \"source\")\n        .map((v) => v.idRef);\n    },\n    idsNodosConectadosSeleccionado() {\n      if (!this.nodoSeleccionado) {\n        return [];\n      }\n      return this.nodoSeleccionado.vinculos.map((v) => v.idRef);\n    },\n    idTarget() {\n      return this.idNodoTarget || this.idColeccionSeleccionada;\n    },\n  },\n  methods: {\n    localizarNext(tipo) {\n      let nodosConsiderados = [...this.nodosRender];\n\n      this.idColeccionTargetOnLastLocalizacion = this.idColeccionSeleccionada;\n      if (tipo === \"available\") {\n        let indexEncontrados = 0;\n        let nextNodo = nodosConsiderados.find((n) => {\n          if (this.idsNodosPresentesCabeza.includes(n.id)) {\n            return false;\n          }\n\n          if (this.indexLastLocateNextAvailable === n.id) {\n            return false;\n          }\n\n          let idsNodosRequeridos = n.vinculos\n            .filter((v) => v.tipo === \"continuacion\" && v.rol === \"target\")\n            .map((v) => v.idRef);\n\n          let nodosRequeridos = nodosConsiderados.filter((n) =>\n            idsNodosRequeridos.includes(n.id)\n          );\n\n          if (\n            nodosRequeridos.some(\n              (nodo) => !this.idsNodosPresentesCabeza.includes(nodo.id)\n            )\n          ) {\n            return false;\n          }\n\n          indexEncontrados++;\n\n          if (indexEncontrados <= this.indexLastLocateNextAvailable) {\n            return false;\n          }\n          return true;\n        });\n\n        if (nextNodo) {\n          this.centrarEnNodoById(nextNodo.id);\n          this.indexLastLocateNextAvailable = indexEncontrados;\n        } else {\n          this.indexLastLocateNextAvailable = 0;\n        }\n      } else if (tipo === \"check\") {\n        let indexEncontrados = 0;\n        let nextNodo = nodosConsiderados.find((n) => {\n          if (this.idsNodosPresentesCabeza.includes(n.id)) {\n            console.log(\"Estaba fresco\");\n\n            indexEncontrados++;\n\n            if (indexEncontrados <= this.indexLastLocateCheck) {\n              return false;\n            }\n            return true;\n          }\n        });\n\n        if (nextNodo) {\n          this.centrarEnNodoById(nextNodo.id);\n          this.indexLastLocateCheck = indexEncontrados;\n        } else {\n          this.indexLastLocateCheck = 0;\n        }\n      } else if (tipo === \"repaso\") {\n        if (!this.idsNodosRepasarPresentes?.length > 0) {\n          return;\n        }\n        this.indexLastLocateNextRepaso++;\n        if (this.indexLastLocateNextRepaso >= this.idsNodosRepasarPresentes.length) {\n          this.indexLastLocateNextRepaso = 0;\n        }\n\n        this.centrarEnNodoById(\n          this.idsNodosRepasarPresentes[this.indexLastLocateNextRepaso]\n        );\n      }\n    },\n    setIdColeccionSeleccionada(nuevoId) {\n      this.indexLastLocateNextAvailable = 0;\n      this.indexLastLocateNextCheck = 0;\n\n      this.idColeccionSeleccionada = nuevoId;\n    },\n    iniciarCallingPosiciones() {\n      var ciclos = prompt(\"Cuantos ciclos?\");\n      if (isNaN(ciclos)) {\n        return;\n      }\n\n      ciclos = Math.round(ciclos);\n      if (ciclos < 1) {\n        return;\n      }\n      console.log(`Enviando reposicionamiento de ${ciclos} ciclos`);\n      this.callingPosiciones = true;\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($ciclos: Int!) {\n              posicionarNodosConocimientoByFuerzas(ciclos: $ciclos)\n            }\n          `,\n          variables: {\n            ciclos,\n          },\n        })\n        .then(() => {\n          this.callingPosiciones = false;\n        })\n        .catch((error) => {\n          this.callingPosiciones = false;\n          console.log(`Error: ${error}`);\n        });\n    },\n    togglePosicionamiento() {\n      this.enviandoQueryConfiguracionAtlas = true;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($nombreAtlas: String!) {\n              togglePosicionamientoAutomaticoAtlas(nombreAtlas: $nombreAtlas) {\n                id\n                posicionando\n              }\n            }\n          `,\n          variables: {\n            nombreAtlas: \"conocimiento\",\n          },\n        })\n        .then(() => {\n          this.enviandoQueryConfiguracionAtlas = false;\n        })\n        .catch(() => {\n          this.enviandoQueryConfiguracionAtlas = false;\n        });\n    },\n    abrirMenuContextual(e) {\n      let posDiagrama = this.$refs.contenedorDiagrama.getBoundingClientRect();\n\n      let topClick = Math.round(e.pageY - posDiagrama.top);\n      let leftClick = Math.round(e.pageX - posDiagrama.left);\n\n      this.$set(this.offsetMenuContextual, \"top\", topClick + \"px\");\n      this.$set(this.offsetMenuContextual, \"left\", leftClick + \"px\");\n      this.mostrandoMenuContextual = true;\n      //this.crearNodo({x: leftClick, y: topClick});\n    },\n    crearNodoEnMenuContextual() {\n      const posContenedorNodos =\n        this.$refs.contenedorNodos.getBoundingClientRect();\n      const distanciaLeftPx =\n        parseInt(this.offsetMenuContextual.left) -\n        parseInt(posContenedorNodos.left);\n      const distanciaTopPx =\n        parseInt(this.offsetMenuContextual.top) -\n        (parseInt(posContenedorNodos.top) - parseInt(this.$el.offsetTop));\n\n      const posPxX = distanciaLeftPx;\n      const posPxY = distanciaTopPx;\n\n      console.log(`xPix: ${parseInt(this.offsetMenuContextual.left)}`);\n      console.log(\n        `posXContenedorNodos: ${parseInt(posContenedorNodos.left)}, ${\n          posContenedorNodos.top\n        }`\n      );\n      console.log(`distanciaLeftPx: ${distanciaLeftPx}`);\n      console.log(`distanciaTopPx: ${distanciaTopPx}`);\n      console.log(\n        `Scroll x contenedorDiagrama: ${this.$refs.contenedorDiagrama.scrollLeft}`\n      );\n\n      var posicionNuevoNodo = {\n        x: parseInt(posPxX / this.factorZoom + this.esquinasDiagrama.x1),\n        y: parseInt(posPxY / this.factorZoom + this.esquinasDiagrama.y1),\n      };\n\n      console.log(`Creando nuevo nodo en ${JSON.stringify(posicionNuevoNodo)}`);\n\n      this.crearNodo(posicionNuevoNodo);\n    },\n    encontrarNodosNecesariosDeNodo(idNodo, listaTotal) {\n      const elNodo = this.todosNodos.find((n) => n.id == idNodo);\n      if (!elNodo) {\n        return listaTotal;\n      }\n      const necesarios = elNodo.vinculos\n        .filter((v) => v.rol == \"target\")\n        .map((v) => v.idRef);\n      necesarios.forEach((necesario) => {\n        if (!listaTotal.includes(necesario)) {\n          listaTotal.push(necesario);\n          listaTotal = this.encontrarNodosNecesariosDeNodo(\n            necesario,\n            listaTotal\n          );\n        }\n      });\n      return listaTotal;\n    },\n    clickFondoAtlas() {\n      // console.log(`Click en el fondo del atlas. Route name: ${this.$route.name}`);\n      if (this.$route.name != \"atlas\") {\n        this.$router.push({ name: \"atlas\" });\n        return;\n      }\n      if (!this.vistaPanned) this.idNodoSeleccionado = null;\n      this.panningVista = false;\n      this.vistaPanned = false;\n      this.$refs.panelConjuntosNodos.abierto = false;\n      this.mostrandoMenuContextual = false;\n    },\n    setEstadoObjetivoNodoCache(nuevoEstado, idNodo) {\n      console.log(\n        `Seting en cache al nodo ${idNodo} con estado objetivo: ${nuevoEstado}`\n      );\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n\n      var indexN = nuevoCache.yo.atlas.datosNodos.findIndex(\n        (n) => n.idNodo == idNodo\n      );\n      if (indexN > -1) {\n        nuevoCache.yo.atlas.datosNodos[indexN].objetivo = nuevoEstado;\n      } else {\n        console.log(`No estaba en cach. Pushing`);\n        nuevoCache.yo.atlas.datosNodos.push({\n          __typename: \"DatoNodoUsuario\",\n          idNodo,\n          objetivo: nuevoEstado,\n          aprendido: false,\n        });\n      }\n      store.writeQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n        data: nuevoCache,\n      });\n    },\n    setNodoAprendidoCache(nuevoEstado, idNodo) {\n      console.log(\n        `Seting en cache al nodo ${idNodo} con estado aprendido: ${nuevoEstado}`\n      );\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n      var indexN = nuevoCache.yo.atlas.datosNodos.findIndex(\n        (n) => n.idNodo == idNodo\n      );\n      if (indexN > -1) {\n        nuevoCache.yo.atlas.datosNodos[indexN].aprendido = nuevoEstado;\n      } else {\n        console.log(`No estaba en cach. Pushing`);\n        nuevoCache.yo.atlas.datosNodos.push({\n          __typename: \"DatoNodoUsuario\",\n          idNodo,\n          objetivo: false,\n          aprendido: nuevoEstado,\n        });\n      }\n      store.writeQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n        data: nuevoCache,\n      });\n    },\n    setNodoTargetCache(idNodo) {\n      console.log(`Seting en cache al nodo ${idNodo} como target`);\n      const store = this.$apollo.provider.defaultClient;\n      const cache = store.readQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n      });\n      var nuevoCache = JSON.parse(JSON.stringify(cache));\n      nuevoCache.yo.atlas.idNodoTarget = idNodo;\n      store.writeQuery({\n        query: QUERY_DATOS_USUARIO_NODOS,\n        data: nuevoCache,\n      });\n    },\n    setModo(modo) {\n      if (!this.usuarioLogeado) return;\n      this.modoAtlas = modo;\n      // this.enviandoQueryModo = true;\n\n      // this.$apollo\n      //   .mutate({\n      //     mutation: gql`\n      //       mutation ($idUsuario: ID!, $nuevoModo: String!) {\n      //         setModoUsuarioAtlas(idUsuario: $idUsuario, nuevoModo: $nuevoModo){\n      //             id\n      //             atlas{\n      //                 configuracion{\n      //                     modo\n      //                 }\n      //             }\n      //         }\n      //       }\n      //     `,\n      //     variables: {\n      //       idUsuario: this.usuario.id,\n      //       nuevoModo: modo,\n      //     },\n      //   })\n      //   .then(() => {\n      //     this.enviandoQueryModo = false;\n\n      //   })\n      //   .catch((error) => {\n      //     this.enviandoQueryModo = false;\n      //     console.log(`Error: ${error}`);\n      //   });\n    },\n    configurarNodoTarget(idNodo) {\n      this.enviandoQueryTarget = true;\n\n      console.log(`Configurando nodo target`);\n      if (!idNodo || idNodo === this.idNodoTarget) {\n        console.log(`Nulificando`);\n        setTimeout(() => {\n          this.nulificarNodoTarget();\n        }, 100);\n      } else {\n        setTimeout(() => {\n          this.setNodoTarget(idNodo);\n        }, 100);\n      }\n    },\n    setNodoTarget(idNodo) {\n      if (!idNodo) return;\n      if (this.idNodoTarget == idNodo) {\n        return;\n      }\n\n      this.idNodoTarget = idNodo;\n    },\n    nulificarNodoTarget() {\n      console.log(`Nulificando nodo target`);\n      this.idNodoTarget = null;\n    },\n    centrarEnNodo(n) {\n      const posDiagrama = this.$refs.contenedorDiagrama.getBoundingClientRect();\n      const posNodo = {\n        x: (n.autoCoords.x - this.esquinasDiagrama.x1) * this.factorZoom,\n        y: (n.autoCoords.y - this.esquinasDiagrama.y1) * this.factorZoom,\n      };\n\n      const posIdealScroll = {\n        x: parseInt(posNodo.x - posDiagrama.width / 2),\n        y: parseInt(posNodo.y - posDiagrama.height / 2),\n      };\n\n      this.$refs.contenedorDiagrama.scrollLeft = posIdealScroll.x;\n      this.$refs.contenedorDiagrama.scrollTop = posIdealScroll.y;\n\n      this.seleccionNodo(n);\n      //this.centroVista=e;\n    },\n    centrarEnNodoById(idNodo) {\n      console.log(`Centrando en nodo con id ${idNodo}`);\n      var elNodo = this.todosNodos.find((n) => n.id === idNodo);\n      if (elNodo) {\n        this.centrarEnNodo(elNodo);\n        return;\n      }\n      this.$apollo\n        .query({\n          query: gql`\n            query ($idNodo: ID!) {\n              nodo(idNodo: $idNodo) {\n                id\n                autoCoords {\n                  x\n                  y\n                }\n              }\n            }\n          `,\n          variables: {\n            idNodo,\n          },\n        })\n        .then(({ data: { nodo } }) => {\n          console.log(`Recibido nodo as: ${JSON.stringify(nodo)}`);\n          this.centrarEnNodo(nodo);\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n        });\n    },\n    iniciaMovimientoTouch(e) {\n      if (e.touches.length === 2) {\n        var dist = Math.hypot(\n          e.touches[0].pageX - e.touches[1].pageX,\n          e.touches[0].pageY - e.touches[1].pageY\n        );\n        this.lastPinchDistance = dist;\n        this.pinching = true;\n        return;\n      }\n\n      this.ultimoTouchX = e.changedTouches[0].clientX;\n      this.ultimoTouchY = e.changedTouches[0].clientY;\n    },\n    finTouch() {\n      this.pinching = false;\n    },\n    cambiarCoordsManualesNodo(idNodo, coordsManuales) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      this.todosNodos[this.todosNodos.findIndex((n) => n.id == idNodo)].coords =\n        coordsManuales;\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: String, $coordsManuales: CoordsInput) {\n              setCoordsManuales(\n                idNodo: $idNodo\n                coordsManuales: $coordsManuales\n              ) {\n                modificados {\n                  id\n                  coordsManuales {\n                    x\n                    y\n                  }\n                  coords {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          `,\n          variables: {\n            idNodo,\n            coordsManuales,\n          },\n        })\n        .then(() => {\n          this.$refs.canvases.crearImagenTodosVinculos();\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n        });\n    },\n    eliminarNodo(idNodo) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      if (!confirm(\"Seguro de que quieres eliminar este nodo?\")) return;\n      console.log(`enviando mutacion de eliminar nodo`);\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodo: ID!) {\n              eliminarNodo(idNodo: $idNodo)\n            }\n          `,\n          variables: {\n            idNodo,\n          },\n          update(store, { data: { eliminarNodo } }) {\n            if (!eliminarNodo) {\n              console.log(`Nodo no fue eliminado`);\n              return;\n            }\n            const cache = store.readQuery({\n              query: QUERY_NODOS,\n            });\n            var nuevoCache = JSON.parse(JSON.stringify(cache));\n            const indexN = nuevoCache.todosNodos.findIndex(\n              (n) => n.id == idNodo\n            );\n            if (indexN > -1) {\n              nuevoCache.todosNodos.splice(indexN, 1);\n              store.writeQuery({\n                query: QUERY_NODOS,\n                data: nuevoCache,\n              });\n            } else {\n              console.log(`El nodo no estaba presente`);\n            }\n          },\n        })\n        .then((data) => {\n          console.log(`quitando el objeto del array. ${data}`);\n        });\n    },\n    crearNodo(posicion) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`Error usuario no autorizado`);\n        return;\n      }\n      console.log(`enviando una mutacin de crear nodo`);\n\n      let infoNodo = {\n        coordsManuales: {\n          x: posicion.x,\n          y: posicion.y,\n        },\n        coords: {\n          x: posicion.x,\n          y: posicion.y,\n        },\n        autoCoords: {\n          x: posicion.x,\n          y: posicion.y,\n        },\n      };\n      console.log(`en las coordenadas: ${posicion.x}, ${posicion.y} `);\n      this.posicionCreandoNodo = {\n        x: posicion.x,\n        y: posicion.y,\n      };\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($infoNodo: NodoConocimientoInput) {\n              crearNodo(infoNodo: $infoNodo) {\n                ...fragNodoConocimiento\n              }\n            }\n            ${fragmentoNodoConocimiento}\n          `,\n          variables: {\n            infoNodo,\n          },\n        })\n        .then(({ data: { crearNodo } }) => {\n          console.log(`Creado ${crearNodo.id}`);\n          const store = this.$apollo.provider.defaultClient;\n          const cache = store.readQuery({\n            query: QUERY_NODOS,\n          });\n          var nuevoCache = JSON.parse(JSON.stringify(cache));\n          console.log(`1`);\n          var losNodos = nuevoCache.todosNodos;\n          console.log(`2`);\n\n          const indexN = losNodos.findIndex((n) => n.id === crearNodo.id);\n          if (indexN > -1) {\n            console.log(`El nodo ya estaba en cach`);\n          } else {\n            losNodos.push(crearNodo);\n            store.writeQuery({\n              query: QUERY_NODOS,\n              data: nuevoCache,\n            });\n          }\n          this.posicionCreandoNodo = null;\n          //this.$router.push(\"/nodoConocimiento/\"+crearNodo.id);\n        })\n        .catch((error) => {\n          this.posicionCreandoNodo = null;\n          console.log(`Error. E: ${error}`);\n        });\n    },\n    descargarCentroVista() {\n      let dis = this;\n      this.$apollo\n        .query({\n          query: gql`\n            query {\n              yo {\n                id\n                atlas {\n                  centroVista {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          `,\n          variables: {\n            idUsuario: this.$store.state.usuario.id,\n          },\n          fetchPolicy: \"network-only\",\n        })\n        .then(function ({ data: { yo } }) {\n          let coords = yo.atlas.centroVista;\n          dis.$set(dis.centroVista, \"x\", coords.x);\n          dis.$set(dis.centroVista, \"y\", coords.y);\n          dis.$store.commit(\"setCentroVistaAtlas\", coords);\n        })\n        .catch(function (error) {\n          console.log(`error fetching centro vista: ${error}`);\n        });\n    },\n    seleccionNodo(nodo) {\n      this.idNodoSeleccionado = nodo.id;\n    },\n    async eliminarVinculo(args) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      console.log(\n        `eliminando un vinculo entre ${args.idNodoFrom} y ${args.idNodoTo} `\n      );\n      await this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idNodoFrom: ID!, $idNodoTo: ID!) {\n              eliminarVinculoFromTo(\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    tipo\n                    rol\n                  }\n                }\n              }\n            }\n          `,\n          variables: {\n            idNodoFrom: args.idNodoFrom,\n            idNodoTo: args.idNodoTo,\n          },\n        })\n        .then(() => {})\n        .catch((error) => {\n          console.log(`error: ${error}`);\n        });\n    },\n    dibujarVinculosGrises() {\n      this.actualizarVinculosGrises++;\n    },\n    async crearVinculo(args) {\n      if (!this.usuarioSuperadministrador && !this.usuarioAdministradorAtlas) {\n        console.log(`No autorizado`);\n        return;\n      }\n      console.log(`creando un vinculo ${JSON.stringify(args)} `);\n      await this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($tipo: String!, $idNodoFrom: ID!, $idNodoTo: ID!) {\n              crearVinculo(\n                tipo: $tipo\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    rol\n                    tipo\n                  }\n                }\n              }\n            }\n          `,\n          variables: {\n            tipo: \"continuacion\",\n            idNodoFrom: args.idNodoFrom,\n            idNodoTo: args.idNodoTo,\n          },\n        })\n        .then(() => {})\n        .catch((error) => {\n          console.log(`error: ${error}`);\n        });\n    },\n    sendUpdatesNodos() {\n      // for(var nodo of this.$refs.nodosRender){\n      //   if()\n      // }\n    },\n\n    zoomVista(deltaZoom) {\n      var nuevoZoom = this.zoom + deltaZoom;\n      if (nuevoZoom < this.minZoom) {\n        this.zoom = this.minZoom;\n      } else if (nuevoZoom > this.maxZoom) {\n        this.zoom = this.maxZoom;\n      } else {\n        this.zoom = nuevoZoom;\n      }\n\n      //Pan vista de acuerdo con la posicin del mouse respecto del atlas\n    },\n    zoomWheel(e) {\n      if (!this.hovered || !e.ctrlKey) {\n        return;\n      }\n      e.preventDefault();\n\n      var contenedor = this.$el;\n      let posContenedor = contenedor.getBoundingClientRect();\n\n      const posZoom = {\n        x:\n          Math.round((e.clientX - posContenedor.left) / this.factorZoom) +\n          this.centroVista.x,\n        y:\n          Math.round((e.clientY - posContenedor.top) / this.factorZoom) +\n          this.centroVista.y,\n      };\n\n      // const proporciones = {\n      //   x:\n      //     (posZoom.x - this.centroVistaDecimal.x) /\n      //     (posContenedor.width / this.factorZoom),\n      //   y:\n      //     (posZoom.y - this.centroVistaDecimal.y) /\n      //     (posContenedor.height / this.factorZoom),\n      // };\n\n      const factorZoom = 0.2;\n      this.zoomVista(-Math.round(e.deltaY * factorZoom), {\n        x: posZoom.x,\n        y: posZoom.y,\n      });\n    },\n    hideZoomInfo: debounce(function () {\n      this.showingZoomInfo = false;\n    }, 1000),\n  },\n  watch: {\n    idColeccionSeleccionada(idColeccion) {\n      this.seleccionandoColeccion = false;\n      localStorage.setItem(\n        \"atlasConocimientoIdLastColeccionTarget\",\n        idColeccion\n      );\n      if (idColeccion) {\n        console.log(\"Setting lastTarget\");\n      }\n    },\n    seleccionandoColeccion() {\n      this.mostrandoOpcionesColeccion = false;\n    },\n    nodoSeleccionado: function () {\n      this.actualizarTrazos++;\n    },\n    route: function (to) {\n      console.log(`cambio de navegacin a ${to.path}`);\n    },\n    idNodoTarget(idNodoTarget) {\n      localStorage.setItem(\"atlasConocimientoIdLastNodoTarget\", idNodoTarget);\n\n      if (!idNodoTarget) {\n        this.idsNecesariosParaTarget = [];\n        return;\n      }\n      this.idsNecesariosParaTarget = this.encontrarNodosNecesariosDeNodo(\n        idNodoTarget,\n        []\n      );\n    },\n    zoom() {\n      this.showingZoomInfo = true;\n      this.hideZoomInfo();\n    },\n    nodosRender() {\n      setTimeout(() => {\n        if (!this.$refs.enlacesNodos) {\n          console.log(\"No hay enlaces\");\n          return;\n        }\n        console.log(`Hay ${this.$refs.enlacesNodos.length} enlaces de nodos`);\n        for (const enlace of this.$refs.enlacesNodos) {\n          enlace.setVinculosGrises();\n        }\n      }, 1000);\n    },\n    //\n  },\n  mounted() {\n    // if (!this.usuario.atlas || !this.usuario.atlas.centroVista) {\n    //   console.log(`No haba info de centro vista en la store. Descargando`);\n    //   this.descargarCentroVista();\n    //   return;\n    // }\n    // this.$set(this.centroVistaDecimal, \"x\", this.usuario.atlas.centroVista.x);\n    // this.$set(this.centroVistaDecimal, \"y\", this.usuario.atlas.centroVista.y);\n\n    if (screen.width < 600) {\n      this.zoom = 70;\n    }\n  },\n  created() {\n    window.addEventListener(\"wheel\", this.zoomWheel, { passive: false });\n  },\n  removed() {\n    window.removeEventListener(\"wheel\", this.zoomWheel);\n  },\n  // beforeRouteLeave(_, __, next) {\n  //   console.log(\n  //     `enviando nuevo centroVista para el usuario ${\n  //       this.usuario.id\n  //     }. Centro vista: ${JSON.stringify(this.centroVista)}`\n  //   );\n  //   this.$store.commit(\"setCentroVistaAtlas\", this.centroVista);\n\n  //   this.$apollo\n  //     .mutate({\n  //       mutation: gql`\n  //         mutation($idUsuario: ID, $centroVista: CoordsInput) {\n  //           setCentroVista(idUsuario: $idUsuario, centroVista: $centroVista)\n  //         }\n  //       `,\n  //       variables: {\n  //         idUsuario: this.$store.state.usuario.id,\n  //         centroVista: this.centroVista,\n  //       },\n  //     })\n  //     .then(function () {\n  //       next();\n  //     })\n  //     .catch(function (error) {\n  //       console.log(`error: ${error}`);\n  //       next();\n  //     });\n  // },\n};\n</script>\n\n\n<style>\n@import \"./estilosGlobalesAtlasConocimiento.css\";\n</style>\n\n<style>\n:root {\n  --atlasConocimientoFondo: #f3eff5;\n  --atlasConocimientoCheck: #3f7d20;\n  --atlasConocimientoAvailable: #e2c044;\n  --atlasConocimientoRepaso: #ff5f5f;\n  --atlasConocimientoOff: #d3d3d3;\n  --atlasConocimientoSeleccion: #ad58d8;\n  --atlasConocimientoContinuacion: #3066be;\n\n  --filtroAtlasSeleccion: invert(43%) sepia(84%) saturate(539%)\n    hue-rotate(236deg) brightness(88%) contrast(92%);\n\n  --filtroAtlasAvailable: invert(79%) sepia(70%) saturate(443%)\n    hue-rotate(349deg) brightness(92%) contrast(91%);\n  --filtroAtlasCheck: invert(34%) sepia(99%) saturate(407%) hue-rotate(56deg)\n    brightness(95%) contrast(81%);\n  --filtroAtlasRepaso: invert(50%) sepia(95%) saturate(2482%) hue-rotate(328deg)\n    brightness(106%) contrast(101%);\n}\n</style>\n<style scoped>\n.atlasConocimiento {\n  position: relative;\n  overflow-x: hidden;\n}\n.ventanaRepasos {\n  z-index: 100;\n  position: absolute;\n  top: 0px;\n  left: 0%;\n  background-color: rgb(255 252 249);\n  box-shadow: 3px 4px 4px rgba(0, 0, 0, 0.25);\n}\n#zonaNodoTarget {\n  position: absolute;\n  top: 0px;\n  left: 50%;\n  transform: translate(-50%);\n  display: flex;\n  align-items: center;\n  padding: 10px;\n  max-width: min(400px, 50%);\n  z-index: 50;\n}\n#zonaNodoTarget .boton {\n  width: 25px;\n  height: 25px;\n}\n#nombreNodoTarget {\n  background-color: var(--atlasConocimientoSeleccion);\n  padding: 5px 10px;\n  padding-right: 20px;\n  border-radius: 9px;\n  cursor: pointer;\n  font-size: 13px;\n  display: flex;\n  align-items: center;\n}\n#zonaSeleccionColeccion {\n  position: absolute;\n  top: 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  z-index: 1;\n}\n\n#nombreColeccion {\n  padding: 10px 30px;\n  background-color: var(--atlasConocimientoSeleccion);\n  border-radius: 45px;\n  cursor: pointer;\n  display: flex;\n  gap: 5px;\n  align-items: center;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n\n#listaSelectoresColeccion {\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  width: min(200px, 90vw);\n}\n#botonMostrarOpcionesColeccion {\n  position: absolute;\n  top: 50%;\n  left: calc(100% + 5px);\n  transform: translateY(-50%);\n}\n#contenedorControlesColeccion {\n  position: absolute;\n  top: calc(100% + 5px);\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 15px;\n  justify-content: center;\n}\n.controlColeccion {\n  background-color: rgb(58, 58, 58);\n}\n.selectorColeccion {\n  padding: 10px 15px;\n  font-size: 16px;\n  cursor: pointer;\n  background-color: var(--atlasConocimientoAvailable);\n  display: flex;\n  gap: 10px;\n  align-items: center;\n}\n#menuContextual {\n  position: absolute;\n  background-color: gray;\n  z-index: 110;\n}\n.botonMenuContextual {\n  font-size: 12px;\n  color: rgb(221, 221, 221);\n  cursor: pointer;\n  padding: 10px;\n}\n.botonMenuContextual:hover {\n  background-color: rgb(68, 68, 68);\n}\n#contenedorDiagrama {\n  position: relative;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n  z-index: 0;\n}\n#contenedorVinculosNodos {\n  position: absolute;\n  top: 50px;\n  left: 50px;\n  user-select: none;\n\n  pointer-events: none;\n}\n#contenedorNodos {\n  position: absolute;\n  top: 50px;\n  left: 50px;\n  user-select: none;\n\n  pointer-events: none;\n}\n#buscadorNodosConocimiento {\n  position: absolute;\n  top: 1%;\n  right: 1%;\n  /* transform: translateX(-50%); */\n  z-index: 1;\n  width: min(100vh, 350px);\n}\n#panelConjuntosNodos {\n  z-index: 100;\n}\n\n#panelObjetivos {\n  position: absolute;\n  top: 2%;\n  left: 50%;\n  transform: translateX(-50%);\n  opacity: 0.2;\n  z-index: 100;\n}\n#panelObjetivos:hover {\n  opacity: 1;\n}\n#infoZoom {\n  position: absolute;\n  top: 2%;\n  left: 50%;\n  transform: translateX(-50%);\n  padding: 10px;\n  display: inline-block;\n  font-weight: bold;\n  color: rgb(102, 102, 102);\n}\n#botonCallingPosiciones {\n  width: 20px;\n  height: 20px;\n  border-radius: 50%;\n  border: 1px solid black;\n  position: absolute;\n  top: 1%;\n  right: 1%;\n  cursor: pointer;\n  z-index: 1;\n}\n\n#simboloDescargandoNodos {\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 100;\n}\n\n.visorNodoConocimiento {\n  width: 100%;\n  min-height: 100%;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  z-index: 1000;\n  background-color: whitesmoke;\n}\n\n#barraInferior {\n  position: absolute;\n  bottom: 12px;\n  padding: 10px;\n  display: flex;\n  flex-direction: row-reverse;\n  right: 0px;\n  box-sizing: border-box;\n}\n\n#barraInferior .boton {\n  height: 30px;\n  width: 30px;\n  margin: 0px 5px;\n  z-index: 0;\n}\n\n.fadeOut-leave-to {\n  opacity: 0;\n}\n.fadeOut-leave-active {\n  transition: opacity 1s;\n}\n.fadeOut-leave {\n  opacity: 1;\n}\n</style>"],"sourceRoot":"src/components/atlasConocimiento"}]}