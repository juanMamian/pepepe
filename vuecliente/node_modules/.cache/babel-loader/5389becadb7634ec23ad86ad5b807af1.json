{"remainingRequest":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js!/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/SelectorConjunto.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/vida1/webpj/pepepe/vuecliente/src/components/atlasConocimiento/SelectorConjunto.vue","mtime":1676034838357},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/vida1/webpj/pepepe/vuecliente/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCBfdGFnZ2VkVGVtcGxhdGVMaXRlcmFsIGZyb20gIi9ob21lL3ZpZGExL3dlYnBqL3BlcGVwZS92dWVjbGllbnRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90YWdnZWRUZW1wbGF0ZUxpdGVyYWwiOwoKZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogIHZhciBkYXRhID0gX3RhZ2dlZFRlbXBsYXRlTGl0ZXJhbChbIlxuICAgICAgICAgICAgbXV0YXRpb24gKCRpZENvbGVjY2lvbjogSUQhKSB7XG4gICAgICAgICAgICAgIGVsaW1pbmFyQ29sZWNjaW9uTm9kb3NBdGxhc0Nvbm9jaW1pZW50b1VzdWFyaW8oXG4gICAgICAgICAgICAgICAgaWRDb2xlY2Npb246ICRpZENvbGVjY2lvblxuICAgICAgICAgICAgICApIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICJdKTsKCiAgX3RlbXBsYXRlT2JqZWN0ID0gZnVuY3Rpb24gX3RlbXBsYXRlT2JqZWN0KCkgewogICAgcmV0dXJuIGRhdGE7CiAgfTsKCiAgcmV0dXJuIGRhdGE7Cn0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBncWwgZnJvbSAnZ3JhcGhxbC10YWcnOwppbXBvcnQgeyBRVUVSWV9EQVRPU19VU1VBUklPX05PRE9TIH0gZnJvbSAnLi9BdGxhc0Nvbm9jaW1pZW50by52dWUnOwppbXBvcnQgTG9hZGluZyBmcm9tICcuLi91dGlsaWRhZGVzL0xvYWRpbmcudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmc6IExvYWRpbmcKICB9LAogIG5hbWU6ICJTZWxlY3RvckNvbmp1bnRvIiwKICBwcm9wczogewogICAgc2VsZWNjaW9uYWRvOiBCb29sZWFuLAogICAgZXN0YUNvbGVjY2lvbjogT2JqZWN0LAogICAgbWVudUN4OiBCb29sZWFuCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWxpbWluYW5kb3NlOiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGVsaW1pbmFyc2U6IGZ1bmN0aW9uIGVsaW1pbmFyc2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIWNvbmZpcm0oIkNvbmZpcm1hciBlbGltaW5hY2nDs24gZGUgY29sZWNjacOzbj8gKEVzdGEgYWNjacOzbiBubyBzZSBwdWVkZSBkZXNoYWNlcikiKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5lbGltaW5hbmRvc2UgPSB0cnVlOwogICAgICB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICBtdXRhdGlvbjogZ3FsKF90ZW1wbGF0ZU9iamVjdCgpKSwKICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgIGlkQ29sZWNjaW9uOiB0aGlzLmVzdGFDb2xlY2Npb24uaWQKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmVsaW1pbmFuZG9zZSA9IGZhbHNlOwogICAgICAgIHZhciBzdG9yZSA9IF90aGlzLiRhcG9sbG8ucHJvdmlkZXIuZGVmYXVsdENsaWVudDsKICAgICAgICB2YXIgY2FjaGUgPSBzdG9yZS5yZWFkUXVlcnkoewogICAgICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MKICAgICAgICB9KTsKICAgICAgICB2YXIgbnVldm9DYWNoZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY2FjaGUpKTsKICAgICAgICB2YXIgY29sZWNjaW9uZXMgPSBudWV2b0NhY2hlLnlvLmF0bGFzLmNvbGVjY2lvbmVzOwogICAgICAgIHZhciBpbmRleEMgPSBjb2xlY2Npb25lcy5maW5kSW5kZXgoZnVuY3Rpb24gKGNvbCkgewogICAgICAgICAgcmV0dXJuIGNvbC5pZCA9PT0gX3RoaXMuZXN0YUNvbGVjY2lvbi5pZDsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGluZGV4QyA+IC0xKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiUmV0aXJhbmRvIGNvbGVjY2lceEYzbiBkZSBjYWNoXHhFOSIpOwogICAgICAgICAgY29sZWNjaW9uZXMuc3BsaWNlKGluZGV4QywgMSk7CiAgICAgICAgICBzdG9yZS53cml0ZVF1ZXJ5KHsKICAgICAgICAgICAgcXVlcnk6IFFVRVJZX0RBVE9TX1VTVUFSSU9fTk9ET1MsCiAgICAgICAgICAgIGRhdGE6IG51ZXZvQ2FjaGUKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiTGEgY29sZWNjaVx4RjNuIGEgYm9ycmFyIG5vIGVzdGFiYSBlbiBjYWNoXHhFOSIpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yOiAiLmNvbmNhdChlcnJvcikpOwogICAgICAgIF90aGlzLmVsaW1pbmFuZG9zZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["SelectorConjunto.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA,OAAA,GAAA,MAAA,aAAA;AACA,SAAA,yBAAA,QAAA,yBAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,OAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,kBAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,YAAA,EAAA,OADA;AAEA,IAAA,aAAA,EAAA,MAFA;AAGA,IAAA,MAAA,EAAA;AAHA,GAHA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AADA,KAAA;AAGA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AACA,UACA,CAAA,OAAA,CACA,wEADA,CADA,EAIA;AACA;AACA;;AAEA,WAAA,YAAA,GAAA,IAAA;AAEA,WAAA,OAAA,CACA,MADA,CACA;AACA,QAAA,QAAA,EAAA,GAAA,mBADA;AAQA,QAAA,SAAA,EAAA;AACA,UAAA,WAAA,EAAA,KAAA,aAAA,CAAA;AADA;AARA,OADA,EAaA,IAbA,CAaA,YAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AAEA,YAAA,KAAA,GAAA,KAAA,CAAA,OAAA,CAAA,QAAA,CAAA,aAAA;AACA,YAAA,KAAA,GAAA,KAAA,CAAA,SAAA,CAAA;AACA,UAAA,KAAA,EAAA;AADA,SAAA,CAAA;AAIA,YAAA,UAAA,GAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,CAAA,KAAA,CAAA,CAAA;AAEA,YAAA,WAAA,GAAA,UAAA,CAAA,EAAA,CAAA,KAAA,CAAA,WAAA;AAEA,YAAA,MAAA,GAAA,WAAA,CAAA,SAAA,CAAA,UAAA,GAAA;AAAA,iBAAA,GAAA,CAAA,EAAA,KAAA,KAAA,CAAA,aAAA,CAAA,EAAA;AAAA,SAAA,CAAA;;AAEA,YAAA,MAAA,GAAA,CAAA,CAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA;AACA,UAAA,WAAA,CAAA,MAAA,CAAA,MAAA,EAAA,CAAA;AAEA,UAAA,KAAA,CAAA,UAAA,CAAA;AACA,YAAA,KAAA,EAAA,yBADA;AAEA,YAAA,IAAA,EAAA;AAFA,WAAA;AAIA,SARA,MASA;AACA,UAAA,OAAA,CAAA,GAAA;AACA;AACA,OAvCA,EAwCA,KAxCA,CAwCA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,kBAAA,KAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,KAAA;AACA,OA3CA;AA4CA;AAxDA;AAbA,CAAA","sourcesContent":["<template>\n  <div class=\"selectorConjunto\" :class=\"{ seleccionado, deshabilitado:eliminandose }\">\n    <div class=\"menuContextual\" id=\"menuContextual\" v-show=\"menuCx\" @click.stop=\"\">\n      <div class=\"botonMenuCx\" @click.stop=\"eliminarse\">Eliminar</div>\n    </div>\n    <div id=\"zonaIcono\">\n      <img\n        src=\"@/assets/iconos/userNodes.png\"\n        alt=\"Coleccion\"\n        style=\"height: 30px\"\n        v-show=\"!eliminandose\"\n      />\n      <loading v-show=\"eliminandose\" />\n    </div>\n\n    <div id=\"zonaInformacion\">\n      <div id=\"nombre\">\n        {{ estaColeccion.nombre }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport gql from 'graphql-tag';\nimport { QUERY_DATOS_USUARIO_NODOS } from './AtlasConocimiento.vue';\nimport Loading from '../utilidades/Loading.vue';\nexport default {\n  components: { Loading },\n  name: \"SelectorConjunto\",\n  props: {\n    seleccionado: Boolean,\n    estaColeccion: Object,\n    menuCx:Boolean,\n  },\n  data() {\n    return {\n      eliminandose: false,\n    };\n  },\n  methods: {\n    eliminarse() {\n      if (\n        !confirm(\n          \"Confirmar eliminación de colección? (Esta acción no se puede deshacer)\"\n        )\n      ) {\n        return;\n      }\n\n      this.eliminandose=true;\n\n      this.$apollo\n        .mutate({\n          mutation: gql`\n            mutation ($idColeccion: ID!) {\n              eliminarColeccionNodosAtlasConocimientoUsuario(\n                idColeccion: $idColeccion\n              ) \n            }\n          `,\n          variables: {\n            idColeccion: this.estaColeccion.id,\n          },\n        })\n        .then(() => {\n          this.eliminandose = false;\n\n          const store=this.$apollo.provider.defaultClient;\n          const cache=store.readQuery({\n            query: QUERY_DATOS_USUARIO_NODOS,\n          });\n\n          var nuevoCache=JSON.parse(JSON.stringify(cache));\n\n          var colecciones=nuevoCache.yo.atlas.colecciones;\n\n          const indexC=colecciones.findIndex(col=>col.id===this.estaColeccion.id);\n\n          if(indexC>-1){\n            console.log(`Retirando colección de caché`);\n            colecciones.splice(indexC, 1);\n\n            store.writeQuery({\n              query: QUERY_DATOS_USUARIO_NODOS,\n              data: nuevoCache\n            })\n          }\n          else{\n            console.log(`La colección a borrar no estaba en caché`);\n          }\n        })\n        .catch((error) => {\n          console.log(`Error: ${error}`);\n          this.eliminandose = false;\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.selectorConjunto {\n  display: flex;\n  position: relative;\n  gap: 10px;\n  align-items: center;\n  width: min(200px, 90vw);\n  min-height: 100px;\n  padding: 10px 20px;\n  border-radius: 15px;\n  background-color: var(--atlasConocimientoAvailable);\n  box-sizing: border-box;\n}\n.selectorConjunto.seleccionado {\n  border: 2px solid var(--atlasConocimientoSeleccion);\n}\n#menuContextual{\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-5%, -5%);\n}\n\n#zonaInformacion {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-grow: 1;\n}\n</style>"],"sourceRoot":"src/components/atlasConocimiento"}]}