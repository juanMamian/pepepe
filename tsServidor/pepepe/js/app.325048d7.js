(function(o){function e(e){for(var n,s,r=e[0],c=e[1],d=e[2],l=0,m=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&m.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(o[n]=c[n]);u&&u(e);while(m.length)m.shift()();return a.push.apply(a,d||[]),t()}function t(){for(var o,e=0;e<a.length;e++){for(var t=a[e],n=!0,r=1;r<t.length;r++){var c=t[r];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),o=s(s.s=t[0]))}return o}var n={},i={app:0},a=[];function s(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=o,s.c=n,s.d=function(o,e,t){s.o(o,e)||Object.defineProperty(o,e,{enumerable:!0,get:t})},s.r=function(o){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},s.t=function(o,e){if(1&e&&(o=s(o)),8&e)return o;if(4&e&&"object"===typeof o&&o&&o.__esModule)return o;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:o}),2&e&&"string"!=typeof o)for(var n in o)s.d(t,n,function(e){return o[e]}.bind(null,n));return t},s.n=function(o){var e=o&&o.__esModule?function(){return o["default"]}:function(){return o};return s.d(e,"a",e),e},s.o=function(o,e){return Object.prototype.hasOwnProperty.call(o,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var u=c;a.push([0,"chunk-vendors"]),t()})({0:function(o,e,t){o.exports=t("56d7")},"034f":function(o,e,t){"use strict";t("85ec")},"0f83":function(o,e,t){},1091:function(o,e,t){"use strict";t("492f")},"13a8":function(o,e,t){},2741:function(o,e,t){"use strict";t("abeb")},"2a41":function(o,e,t){},"30b56":function(o,e,t){"use strict";t("594f")},"320b":function(o,e,t){"use strict";t("95c3")},"34cf":function(o,e,t){},"3b64":function(o,e,t){"use strict";t("af07")},"492f":function(o,e,t){},"56d7":function(o,e,t){"use strict";t.r(e);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("2b0e"),i=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"navBar"}},[t("div",{staticClass:"botonNav hoverGris",attrs:{id:"navHome",to:"/"}},[o._v("Home")]),t("router-link",{attrs:{to:"/atlas"}},[t("div",{staticClass:"botonNav hoverGris",attrs:{id:"navAtlas"}},[o._v(" Atlas de conocimientos ")])]),t("router-link",{attrs:{to:"/proyectos"}},[t("div",{staticClass:"botonNav hoverGris",attrs:{id:"navProyectos"}},[o._v("Proyectos")])]),t("div",{staticClass:"botonNav hoverGris",attrs:{id:"navTrabajos"}},[o._v("Trabajos")]),o.usuarioLogeado?t("router-link",{attrs:{to:"/actividadesVirtuales2021"}},[t("div",{staticClass:"botonNav hoverGris",attrs:{id:"navActividadesVirtuales"}},[o._v("Actividades virtuales")])]):o._e(),o.usuarioAdministrador?t("router-link",{attrs:{to:"/personas"}},[t("div",{staticClass:"botonNav hoverGris",attrs:{id:"navActividadesVirtuales"}},[o._v("Personas")])]):o._e(),t("div",{attrs:{id:"botonesNavDerecha"}},[o.logeado?[t("div",{staticClass:"botonNav navLogin hoverGris",style:[o.colorBlancoAccionLogeado],attrs:{id:"navLogged"},on:{click:function(e){o.accionesLogeado=!o.accionesLogeado}}},[o._v(" "+o._s(o.username)+" "),o.accionesLogeado?t("div",{attrs:{id:"botonesLogeado"}},[t("router-link",{attrs:{to:"/miperfil"}},[t("div",{staticClass:"botonesLogeado hoverGris",attrs:{id:"Perfil"}},[o._v("Perfil")])]),t("div",{staticClass:"botonesLogeado hoverGris",attrs:{id:"desconexion"},on:{click:o.deslogeo}},[o._v(" Desconexion ")])],1):o._e()])]:[t("router-link",{staticClass:"botonNav hoverGris",attrs:{to:"/registro",id:"navRegistro"}},[t("div",[o._v("Registro")])]),t("router-link",{staticClass:"botonNav navLogin hoverGris",attrs:{to:"/login",id:"navLogin"}},[t("div",[o._v("Login")])])]],2)],1),t("router-view",{attrs:{id:"visorRouter"}},[o._v("asd")])],1)},a=[];t("a15b"),t("d81d"),t("fb6a"),t("d3b7"),t("ac1f"),t("25f0"),t("5319"),t("1276");function s(o){var e=o.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}var r={name:"App",components:{},data:function(){return{accionesLogeado:!1}},computed:{username:function(){return this.$store.state.usuario.username},logeado:function(){return void 0!=this.username&&null!=this.username&&this.username.length>2},colorBlancoAccionLogeado:function(){return this.accionesLogeado?{backgroundColor:"white"}:{}}},methods:{deslogeo:function(){this.$store.commit("deslogearse"),this.$router.push("/login")}},mounted:function(){var o=localStorage.getItem(Object({NODE_ENV:"production",BASE_URL:"/"}).TOKEN_KEY);if(o){var e=s(o),t=parseInt(Date.now()/1e3);t<e.exp?this.$store.commit("logearse",o):this.$store.commit("deslogearse")}else console.log("no habia token")}},c=r,d=(t("034f"),t("2877")),u=Object(d["a"])(c,i,a,!1,null,null,null),l=u.exports,m=t("2f62");function p(o){var e=o.split(".")[1],t=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map((function(o){return"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(n)}n["a"].use(m["a"]);var v=new m["a"].Store({state:{usuario:{username:null,permisos:null,id:null},token:null},mutations:{logearse:function(o,e){var t=p(e);o.token=e,o.usuario.username=t.username,o.usuario.permisos=t.permisos,o.usuario.id=t.id;var n=JSON.stringify(o.usuario);localStorage.setItem("pepepe_usuario",n),localStorage.setItem(Object({NODE_ENV:"production",BASE_URL:"/"}).TOKEN_KEY,e)},deslogearse:function(o){localStorage.removeItem("pepepe_usuario"),localStorage.removeItem(Object({NODE_ENV:"production",BASE_URL:"/"}).TOKEN_KEY),o.usuario.username=null,o.usuario.permisos=null,o.usuario.id=null,o.token=null}}}),b=(t("99af"),t("5530")),f=t("74ca"),h=t("2bf2"),g=t("478e"),y=t("522d"),N=t("8785"),P=t("9530"),j=t.n(P);function $(){var o=Object(N["a"])(["\n    \n    enum TiposUsuario{\n        USUARIO,\n        ADMINISTRADOR,\n        SUPERADMINSTRADOR\n    }\n    \n    type Usuario{\n        username:String,\n        permisos: TiposUsuario\n     }\n\n    type Mutations{ \n        setUsuario(username: String, permisos: TiposUsuario):Usuario\n    }\n"]);return $=function(){return o},o}function C(){var o=Object(N["a"])(["\n    {\n        usuario @client{\n            username\n            permisos\n        }\n    }\n"]);return C=function(){return o},o}var R=j()(C()),O=j()($()),_={Mutation:{setUsuario:function(o,e,t){var n=e.username,i=e.permisos,a=t.cache;return a.writeQuery({query:R,data:{username:n,permisos:i}}),a.readQuery({query:R})}}},T=t("c2c3");n["a"].use(y["a"]);var E=new h["a"],x=Object(g["a"])({uri:"http://localhost:3000/graphql"}),D=Object(T["a"])((function(o,e){var t=e.headers,n=localStorage.getItem(Object({NODE_ENV:"production",BASE_URL:"/"}).TOKEN_KEY)||"";return{headers:Object(b["a"])(Object(b["a"])({},t),{},{authorization:n})}})),S=D.concat(x),k=new f["a"]({link:S,cache:E,typeDefs:O,resolvers:_}),V=new y["a"]({defaultClient:k}),w=t("8c4f"),I=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"atlasConocimiento"},on:{mousedown:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:e.shiftKey?(e.stopPropagation(),void(o.panningVista=!0)):null},click:[function(e){o.idNodoMenuCx="-1"},function(e){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;o.idNodoSeleccionado="-1"}],mousemove:function(e){return o.panVista(e)},mouseup:function(e){o.panningVista=!1},dblclick:function(e){return e.ctrlKey&&e.shiftKey?e.target!==e.currentTarget?null:(e.stopPropagation(),o.crearNodo(e)):null}}},[t("div",{attrs:{id:"contenedorNodos"}},[t("canvases",{attrs:{todosNodos:o.todosNodos,nodoSeleccionado:o.nodoSeleccionado,centroVista:o.centroVista}}),o._l(o.todosNodos,(function(e){return t("nodo-conocimiento",{key:e.id,attrs:{nodoSeleccionado:o.nodoSeleccionado,todosNodos:o.todosNodos,idNodoMenuCx:o.idNodoMenuCx,esteNodo:e,centroVista:o.centroVista},on:{creacionVinculo:o.crearVinculo,eliminacionVinculo:o.eliminarVinculo,cambioDePosicionManual:o.cambiarCoordsManualesNodo,eliminar:o.eliminarNodo},nativeOn:{click:function(t){return t.stopPropagation(),o.seleccionNodo(e)},contextmenu:function(t){t.preventDefault(),o.idNodoMenuCx=e.id}}})}))],2)])},z=[],A=(t("7db0"),t("c740"),t("45fc"),t("b85c")),M=(t("96cf"),t("1da1")),U=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"nodoConocimiento",style:[o.estiloPosicion,o.estiloSize,o.estiloArrastrando],on:{mousedown:function(e){if(!e.ctrlKey)return null;o.arrastrandoNodo=!0},mouseup:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:o.guardarPosicion(e)},mousemove:o.arrastrarNodo,mouseleave:function(e){o.arrastrandoNodo=!1},dblclick:o.abrirPaginaNodo}},[t("div",{attrs:{id:"sombra"}}),t("img",{ref:"iconoNodo",staticClass:"iconoNodo",attrs:{src:"http://localhost:3000/api/atlas/iconos/"+o.esteNodo.id,alt:""},on:{"~error":function(e){return o.iconoFallback(e)}}}),t("div",{directives:[{name:"show",rawName:"v-show",value:o.menuCx,expression:"menuCx"}],attrs:{id:"menuContextual"}},[t("div",{staticClass:"seccionMenuCx"},[o._v(o._s(o.esteNodo.nombre))]),t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarEsteNodo(e)}}},[o._v("Eliminar")]),"superadministrador"==o.permisosUsuario?t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.copiarId(e)}}},[o._v(" "+o._s(o.esteNodo.id)+" ")]):o._e(),-1!=o.nodoSeleccionado.id&&o.nodoSeleccionado.id!=o.esteNodo.id?[t("div",{staticClass:"seccionMenuCx"},[o._v(o._s(o.nodoSeleccionado.nombre))]),t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.nodoSeleccionado,o.esteNodo)}}},[o._v(" Continua aquí ")]),t("div",{staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.crearVinculo("continuacion",o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Continua desde aquí ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:o.esteNodo.vinculos.some((function(e){return e.idRef==o.nodoSeleccionado.id})),expression:"esteNodo.vinculos.some((v) => v.idRef == nodoSeleccionado.id)"}],staticClass:"botonMenuCx",on:{click:function(e){return e.stopPropagation(),o.eliminarVinculo(o.esteNodo,o.nodoSeleccionado)}}},[o._v(" Desconectar ")])]:o._e()],2),t("div",{ref:"nombre",style:o.fondoNombre,attrs:{id:"nombre",contenteditable:!0},on:{blur:o.guardarNombre,input:o.setNombreEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurNombre(e)},dblclick:function(o){o.stopPropagation()}}},[o._v(" "+o._s(o.esteNodo.nombre)+" ")])])},L=[];t("498a");function G(){var o=Object(N["a"])(["\n            mutation($idNodo: ID!, $nuevoNombre: String!) {\n              editarNombreNodo(idNodo: $idNodo, nuevoNombre: $nuevoNombre) {\n                modificados {\n                  id\n                  nombre\n                }\n              }\n            }\n          "]);return G=function(){return o},o}var q=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,B={name:"NodoConocimiento",data:function(){return{arrastrandoNodo:!1,nombreEditable:!1,nombreEditandose:!1,baseSize:{x:50,y:50},posicion:{x:0,y:0}}},props:{esteNodo:{type:Object,required:!0},centroVista:Object,idNodoMenuCx:String,nodoSeleccionado:{type:Object,default:function(){return{id:"-1",nombre:"ninguno"}}}},computed:{menuCx:function(){return this.idNodoMenuCx==this.esteNodo.id},size:function(){var o=Object.assign({},this.baseSize);if(this.seleccionado){var e=this.baseSize.x,t=this.baseSize.y;o.x=Math.round(1.1*e),o.y=Math.round(1.1*t)}return Object(b["a"])({},o)},seleccionado:function(){var o=!1;return this.nodoSeleccionado.id==this.esteNodo.id&&(o=!0),o},estiloPosicion:function(){var o=Math.round(this.posicion.y-this.size.y/2),e=Math.round(this.posicion.x-this.size.x/2);return o-=this.centroVista.y,e-=this.centroVista.x,{top:o+"px",left:e+"px"}},estiloArrastrando:function(){var o=0;return this.arrastrandoNodo&&(o=1),{zIndex:o}},estiloSize:function(){return{width:this.size.x+"px",height:this.size.y+"px"}},fondoNombre:function(){return this.nombreEditandose?{backgroundColor:"orange"}:{backgroundColor:"lightblue"}},permisosUsuario:function(){return this.$store.state.usuario.permisos}},methods:{abrirPaginaNodo:function(){this.$router.push("/nodoConocimiento/"+this.esteNodo.id)},copiarId:function(o){var e=o.target.innerHTML.trim(),t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)},eliminarEsteNodo:function(){this.$emit("eliminar",this.esteNodo.id)},guardarNombre:function(){var o=this,e=this.$refs.nombre.innerHTML.trim(),t=this.esteNodo.id;this.nombreEditandose&&e!=this.esteNodo.nombre&&(e=e.replace(q,""),e=e.replace(/\s\s+/g," "),this.$apollo.mutate({mutation:j()(G()),variables:{idNodo:t,nuevoNombre:e}}).then((function(e){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(e)," ")),o.nombreEditandose=!1})).catch((function(o){console.log("error: ".concat(o))})))},setNombreEditandose:function(){this.esteNodo.nombre!=this.$refs.nombre.innerHTML.trim()?this.nombreEditandose=!0:this.nombreEditandose=!1},arrastrarNodo:function(o){if(this.arrastrandoNodo){var e=document.getElementById("contenedorNodos").getBoundingClientRect(),t=Math.round(o.clientY-e.top+this.centroVista.y),n=Math.round(o.clientX-e.left+this.centroVista.x);this.posicion.y=t,this.posicion.x=n}},guardarPosicion:function(){this.arrastrandoNodo&&(this.$emit("cambioDePosicionManual",this.esteNodo.id,{x:this.posicion.x,y:this.posicion.y}),this.arrastrandoNodo=!1)},crearVinculo:function(o,e,t){console.log("creando un vinculo tipo ".concat(o," entre ").concat(e.nombre," y ").concat(t.nombre," ")),this.$emit("creacionVinculo",{tipo:o,idNodoFrom:e.id,idNodoTo:t.id})},eliminarVinculo:function(o,e){this.$emit("eliminacionVinculo",{idNodoFrom:o.id,idNodoTo:e.id})},blurNombre:function(){this.$refs.nombre.blur()},iconoFallback:function(){this.$refs.iconoNodo.src="nodoConocimientoDefault.png"},dibujarLineaEntreNodos:function(o,e){var t={x:o.coordsManuales.x+this.paddingGuarda/2-parseInt(this.bordesDibujoActivo.left),y:o.coordsManuales.y+this.paddingGuarda/2-parseInt(this.bordesDibujoActivo.bot)},n={x:e.coordsManuales.x+this.paddingGuarda/2-parseInt(this.bordesDibujoActivo.left),y:e.coordsManuales.y+this.paddingGuarda/2-parseInt(this.bordesDibujoActivo.bot)};console.log("".concat(t.x,", ").concat(t.y," -> ").concat(n.x,", ").concat(n.y," "));var i=Math.atan((n.y-t.y)/(n.x-t.x));n.y-t.y<0&&n.x-t.x<0&&(i+=Math.PI),n.y-t.y>0&&n.x-t.x<0&&(i+=Math.PI);var a=parseInt(.6*this.baseSize.x);console.log("radio ampliado: ".concat(a));var s=parseInt(a*Math.cos(i)),r=parseInt(a*Math.sin(i));console.log("Correcciones: ".concat(s,", ").concat(r," "));var c={x:n.x-s,y:n.y-r};this.lapiz.moveTo(t.x,t.y),this.lapiz.lineTo(c.x,c.y);var d=7,u={x:c.x+d*Math.cos(i-3*Math.PI/4),y:c.y+d*Math.sin(i-3*Math.PI/4)},l={x:c.x+d*Math.cos(i+3*Math.PI/4),y:c.y+d*Math.sin(i+3*Math.PI/4)};this.lapiz.moveTo(c.x,c.y),this.lapiz.lineTo(u.x,u.y),this.lapiz.moveTo(c.x,c.y),this.lapiz.lineTo(l.x,l.y)}},mounted:function(){this.posicion.y=this.esteNodo.coordsManuales.y?this.esteNodo.coordsManuales.y:0,this.posicion.x=this.esteNodo.coordsManuales.x?this.esteNodo.coordsManuales.x:0}},F=B,J=(t("9375"),Object(d["a"])(F,U,L,!1,null,"b4cf5dae",null)),Z=J.exports,K=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"canvases"}},[t("canvas",{ref:"canvasTodosVinculos",staticClass:"canvas",style:[o.posicionRelativaCanvasTodosVinculos,o.sizeCanvasTodosVinculos],attrs:{id:"canvasTodosVinculos"}}),t("canvas",{ref:"canvasVinculosSeleccionado",staticClass:"canvas",style:[o.posicionRelativaCanvasTodosVinculos,o.sizeCanvasTodosVinculos],attrs:{id:"canvasVinculosSeleccionado"}})])},H=[],Q=(t("13d5"),t("a9e3"),{name:"Canvases",data:function(){return{montado:!1,lapiz:null,posicionCanvasTodosVinculos:{top:0,left:0},sizeCanvasTodosVinculos:{width:0,height:0},posicionCanvasActivo:{x:0,y:0}}},props:{nodoSeleccionado:{type:Object,default:function(){return{id:"-1",vinculos:[]}}},nodoRelevante:[Object],todosNodos:Array,centroVista:Object,actualizar:Number},methods:{crearImagenTodosVinculos:function(){var o=this;if(!(this.todosNodos.length<=1)){this.lapiz=this.$refs.canvasTodosVinculos.getContext("2d");var e={};e.top=this.todosNodos.reduce((function(o,e){return e.coordsManuales.y>o?e.coordsManuales.y:o}),0),e.bot=this.todosNodos.reduce((function(o,e){return e.coordsManuales.y<o?e.coordsManuales.y:o}),0),e.left=this.todosNodos.reduce((function(o,e){return e.coordsManuales.x<o?e.coordsManuales.x:o}),0),e.right=this.todosNodos.reduce((function(o,e){return e.coordsManuales.x>o?e.coordsManuales.x:o}),0);var t=parseInt(e.right-e.left),n=parseInt(e.top-e.bot);(t>5e3||n>5e3)&&console.log("ALERTA. Diagrama demasiado grande"),this.$set(this.posicionCanvasTodosVinculos,"y",e.bot),this.$set(this.posicionCanvasTodosVinculos,"x",e.left),this.posicionCanvasActivo=this.posicionCanvasTodosVinculos,this.$set(this.sizeCanvasTodosVinculos,"width",t+"px"),this.$set(this.sizeCanvasTodosVinculos,"height",n+"px"),this.lapiz.canvas.width=t,this.lapiz.canvas.height=n,this.$refs.canvasVinculosSeleccionado.width=t,this.$refs.canvasVinculosSeleccionado.height=n,this.lapiz.lineWidth=1,this.lapiz.clearRect(0,0,t,n),this.lapiz.beginPath(),this.lapiz.strokeStyle="#b3b3b3";var i,a=Object(A["a"])(this.todosNodos);try{for(a.s();!(i=a.n()).done;){var s,r=i.value,c=Object(A["a"])(r.vinculos);try{var d=function(){var e=s.value;"source"==e.rol&&o.dibujarLineaEntreNodos(r,o.todosNodos.find((function(o){return o.id==e.idRef})))};for(c.s();!(s=c.n()).done;)d()}catch(u){c.e(u)}finally{c.f()}}}catch(u){a.e(u)}finally{a.f()}this.lapiz.stroke()}},crearImagenVinculosSeleccionado:function(){var o=this;if(this.lapiz=this.$refs.canvasVinculosSeleccionado.getContext("2d"),this.lapiz.clearRect(0,0,this.lapiz.canvas.width,this.lapiz.canvas.height),this.todosNodos.some((function(e){return e.id==o.nodoSeleccionado.id}))){this.lapiz.beginPath(),this.lapiz.lineWidth=2,this.lapiz.strokeStyle="#008000";var e,t=Object(A["a"])(this.nodoSeleccionado.vinculos);try{var n=function(){var t=e.value;if(!o.todosNodos.some((function(o){return o.id==t.idRef})))return console.log("ALERTA. Vinculo a ".concat(t.idRef," huerfano")),"continue";if("source"==t.rol){var n=o.todosNodos.find((function(o){return o.id==t.idRef}));o.dibujarLineaEntreNodos(o.nodoSeleccionado,n)}};for(t.s();!(e=t.n()).done;)n()}catch(r){t.e(r)}finally{t.f()}this.lapiz.stroke(),this.lapiz.beginPath(),this.lapiz.strokeStyle="#b80e0e";var i,a=Object(A["a"])(this.nodoSeleccionado.vinculos);try{var s=function(){var e=i.value;if(!o.todosNodos.some((function(o){return o.id==e.idRef})))return console.log("ALERTA. Vinculo a ".concat(e.idRef," huerfano")),"continue";if("target"==e.rol){var t=o.todosNodos.find((function(o){return o.id==e.idRef}));o.dibujarLineaEntreNodos(t,o.nodoSeleccionado)}};for(a.s();!(i=a.n()).done;)s()}catch(r){a.e(r)}finally{a.f()}this.lapiz.stroke()}},dibujarLineaEntreNodos:function(o,e){var t={x:o.coordsManuales.x-this.posicionCanvasActivo.x,y:o.coordsManuales.y-this.posicionCanvasActivo.y},n={x:e.coordsManuales.x-this.posicionCanvasActivo.x,y:e.coordsManuales.y-this.posicionCanvasActivo.y};this.lapiz.moveTo(t.x,t.y),this.lapiz.lineTo(n.x,n.y);var i={x:(n.x+t.x)/2,y:(n.y+t.y)/2},a=7,s=Math.atan((n.y-t.y)/(n.x-t.x));n.y-t.y<0&&n.x-t.x<0&&(s+=Math.PI),n.y-t.y>0&&n.x-t.x<0&&(s+=Math.PI);var r={x:i.x+a*Math.cos(s-3*Math.PI/4),y:i.y+a*Math.sin(s-3*Math.PI/4)},c={x:i.x+a*Math.cos(s+3*Math.PI/4),y:i.y+a*Math.sin(s+3*Math.PI/4)};this.lapiz.moveTo(i.x,i.y),this.lapiz.lineTo(r.x,r.y),this.lapiz.moveTo(i.x,i.y),this.lapiz.lineTo(c.x,c.y)},trazarVinculosDeNodoRecursivamente:function(o,e,t,n){var i=this;t--;var a,s=this.todosNodos.find((function(e){return e.id==o})),r=Object(A["a"])(s.vinculos);try{var c=function(){var o=a.value;if(o.rol!=e)return"continue";var r=i.todosNodos.find((function(e){return e.id==o.idRef}));if(!r)return console.log("ALERTA. idRef del vinculo no estaba entre los nodos"),"continue";n.push(r.id),"target"==e?(i.dibujarLineaEntreNodos(r,s),n.push(r.id)):"source"==e&&i.dibujarLineaEntreNodos(s,r),t>0&&!n.some((function(o){return o==r.id}))&&(n=i.trazarVinculosDeNodoRecursivamente(r.id,e,t,n))};for(r.s();!(a=r.n()).done;)c()}catch(d){r.e(d)}finally{r.f()}return n}},computed:{posicionRelativaCanvasTodosVinculos:function(){var o=this.posicionCanvasTodosVinculos.y-this.centroVista.y,e=this.posicionCanvasTodosVinculos.x-this.centroVista.x;return{top:o+"px",left:e+"px"}},posicionRelativaCanvasVinculosSeleccionado:function(){var o=this.posicionCanvasVinculosSeleccionado.y-this.centroVista.y,e=this.posicionCanvasVinculosSeleccionado.x-this.centroVista.x;return{top:o+"px",left:e+"px"}},"tamaño":function(){return{width:this.sizeDiagrama.right-this.sizeDiagrama.left+"px",height:this.sizeDiagrama.top-this.sizeDiagrama.bot+"px"}}},watch:{todosNodos:function(){console.log("Redibujando lineas"),this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()},nodoSeleccionado:function(){this.crearImagenVinculosSeleccionado()}},mounted:function(){this.montado=!0,this.crearImagenTodosVinculos(),this.crearImagenVinculosSeleccionado()}}),Y=Q,X=(t("3b64"),Object(d["a"])(Y,K,H,!1,null,"ae6b44f2",null)),W=X.exports;function oo(){var o=Object(N["a"])(["\n          mutation($idUsuario: ID, $centroVista: CoordsInput) {\n            setCentroVista(idUsuario: $idUsuario, centroVista: $centroVista)\n          }\n        "]);return oo=function(){return o},o}function eo(){var o=Object(N["a"])(["\n            mutation($tipo: String!, $idNodoFrom: ID!, $idNodoTo: ID!) {\n              crearVinculo(\n                tipo: $tipo\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    rol\n                    tipo\n                  }\n                }\n              }\n            }\n          "]);return eo=function(){return o},o}function to(){var o=Object(N["a"])(["\n            mutation($idNodoFrom: ID!, $idNodoTo: ID!) {\n              eliminarVinculoFromTo(\n                idSource: $idNodoFrom\n                idTarget: $idNodoTo\n              ) {\n                modificados {\n                  id\n                  vinculos {\n                    idRef\n                    tipo\n                    rol\n                  }\n                }\n              }\n            }\n          "]);return to=function(){return o},o}function no(){var o=Object(N["a"])(["\n            query($idUsuario: ID!) {\n              publicUsuario(idUsuario: $idUsuario) {\n                id\n                atlas {\n                  centroVista {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return no=function(){return o},o}function io(){var o=Object(N["a"])(["\n          mutation($infoNodo: NodoConocimientoInput) {\n            crearNodo(infoNodo: $infoNodo) {\n              modificados {\n                nombre\n                id\n                coordsManuales {\n                  x\n                  y\n                }\n                vinculos {\n                  idRef\n                  rol\n                  tipo\n                }\n              }\n            }\n          }\n        "]);return io=function(){return o},o}function ao(){var o=Object(N["a"])(["\n            mutation($idNodo: ID!) {\n              eliminarNodo(idNodo: $idNodo)\n            }\n          "]);return ao=function(){return o},o}function so(){var o=Object(N["a"])(["\n            mutation($idNodo: String, $coordsManuales: CoordsInput) {\n              setCoordsManuales(\n                idNodo: $idNodo\n                coordsManuales: $coordsManuales\n              ) {\n                modificados {\n                  id\n                  coordsManuales {\n                    x\n                    y\n                  }\n                }\n              }\n            }\n          "]);return so=function(){return o},o}function ro(){var o=Object(N["a"])(["\n        query {\n          todosNodos {\n            nombre\n            id\n            coordsManuales {\n              x\n              y\n            }\n            vinculos {\n              idRef\n              rol\n              tipo\n            }\n          }\n        }\n      "]);return ro=function(){return o},o}var co={components:{NodoConocimiento:Z,Canvases:W},name:"AtlasConocimiento",apollo:{todosNodos:{query:j()(ro()),result:function(){this.dibujarVinculosGrises()}}},data:function(){return{todosNodos:[],idNodoSeleccionado:"-1",idNodoMenuCx:"-1",centroVista:{x:0,y:0},actualizarTrazos:0,panningVista:!1,nodosConectadosAlSeleccionado:{listaCompleta:[],listaPorNiveles:[]},profundidadNodosConectadosAlSeleccionado:1,actualizarVinculosGrises:0}},computed:{nodoSeleccionado:function(){var o=this;if(!this.todosNodos)return console.log("NO HAY NODOS"),!1;if(this.todosNodos.some((function(e){return e.id==o.idNodoSeleccionado}))){var e=this.todosNodos.findIndex((function(e){return e.id==o.idNodoSeleccionado}));return this.todosNodos[e]}return{id:"-1",vinculos:[]}},idUsuario:function(){return this.$store.state.usuario.id}},methods:{cambiarCoordsManualesNodo:function(o,e){this.todosNodos[this.todosNodos.findIndex((function(e){return e.id==o}))].coordsManuales=e,this.$apollo.mutate({mutation:j()(so()),variables:{idNodo:o,coordsManuales:e}}).then((function(){})).catch((function(o){console.log("Error: ".concat(o))}))},eliminarNodo:function(o){console.log("enviando mutacion de eliminar nodo"),this.$apollo.mutate({mutation:j()(ao()),variables:{idNodo:o}}).then((function(o){console.log("quitando el objeto del array. ".concat(o))}))},crearNodo:function(o){console.log("enviando una mutación de crear nodo");var e=document.getElementById("contenedorNodos").getBoundingClientRect(),t=Math.round(o.clientY-e.top+this.centroVista.y),n=Math.round(o.clientX-e.left+this.centroVista.x),i={coordsManuales:{x:n,y:t}};console.log("en las coordenadas: ".concat(n,", ").concat(t," ")),this.$apollo.mutate({mutation:j()(io()),variables:{infoNodo:i}})},descargarCentroVista:function(){var o=this;this.$apollo.query({query:j()(no()),variables:{idUsuario:this.$store.state.usuario.id},fetchPolicy:"network-only"}).then((function(e){var t=e.data;console.log("respuesta: ".concat(JSON.stringify(t)," "));var n=t.usuario.atlas.centroVista;o.$set(o.centroVista,"x",n.x),o.$set(o.centroVista,"y",n.y)})).catch((function(o){console.log("error: ".concat(o))}))},panVista:function(o){this.panningVista&&(o.preventDefault(),this.$set(this.centroVista,"x",this.centroVista.x-o.movementX),this.$set(this.centroVista,"y",this.centroVista.y-o.movementY),this.actualizarTrazos++)},seleccionNodo:function(o){var e=this;if(this.idNodoSeleccionado=o.id,!this.todosNodos.some((function(o){return o.id==e.idNodoSeleccionado})))return null;var t=parseInt(this.profundidadNodosConectadosAlSeleccionado),n=[],i=this.idNodoSeleccionado,a=[i];if(t>0){for(var s=0;s<t;s++)n[s]=[];var r=this.encontrarNodosConectadosRecursivamente(i,["target","source"],["continuacion"],a,n,0,t);a=r.listaCompleta,n=r.listaPorNiveles}this.nodosConectadosAlSeleccionado={listaCompleta:a,listaPorNiveles:n}},eliminarVinculo:function(o){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("eliminando un vinculo entre ".concat(o.idNodoFrom," y ").concat(o.idNodoTo," ")),t.next=3,e.$apollo.mutate({mutation:j()(to()),variables:{idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 3:case"end":return t.stop()}}),t)})))()},dibujarVinculosGrises:function(){this.actualizarVinculosGrises++},crearVinculo:function(o){var e=this;return Object(M["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("creando un vinculo ".concat(JSON.stringify(o)," ")),t.next=3,e.$apollo.mutate({mutation:j()(eo()),variables:{tipo:"continuacion",idNodoFrom:o.idNodoFrom,idNodoTo:o.idNodoTo}}).then((function(){})).catch((function(o){console.log("error: ".concat(o))}));case 3:case"end":return t.stop()}}),t)})))()},encontrarNodosConectadosRecursivamente:function(o,e,t,n,i,a,s){var r,c=this,d=this.todosNodos.find((function(e){return e.id==o})),u=Object(A["a"])(d.vinculos);try{var l=function(){var o=r.value;if(c.todosNodos.some((function(e){return e.id==o.idRef}))&&e.some((function(e){return e==o.rol}))&&t.some((function(e){return e==o.tipo}))&&!n.some((function(e){return e==o.idRef}))){if(i[a].push(o.idRef),n.push(o.idRef),a+1<s){var d=c.encontrarNodosConectadosRecursivamente(o.idRef,e,t,n,i,a+1,s);n=d.listaCompleta,i=d.listaPorNiveles}}else console.log("No")};for(u.s();!(r=u.n()).done;)l()}catch(m){u.e(m)}finally{u.f()}return{listaCompleta:n,listaPorNiveles:i}}},watch:{nodoSeleccionado:function(){this.actualizarTrazos++},route:function(o){console.log("cambio de navegación a ".concat(o.path))}},mounted:function(){this.descargarCentroVista()},beforeRouteLeave:function(o,e,t){console.log("enviando nuevo centroVista para el usuario ".concat(this.$store.state.usuario.id,". Centro vista: ").concat(JSON.stringify(this.centroVista))),this.$apollo.mutate({mutation:j()(oo()),variables:{idUsuario:this.$store.state.usuario.id,centroVista:this.centroVista}}).then((function(){t()})).catch((function(o){console.log("error: ".concat(o)),t()}))}},uo=co,lo=(t("30b56"),Object(d["a"])(uo,I,z,!1,null,"28d51acc",null)),mo=lo.exports,po=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"loginArea"}},[t("div",{attrs:{id:"ventanaCentral"}},[t("p",{attrs:{id:"tituloVentana"}},[o._v("Iniciar sesion")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.username,expression:"username"}],staticClass:"inputs",style:o.colorUsername,attrs:{type:"text",name:"username",placeholder:"Nombre de usuario"},domProps:{value:o.username},on:{input:function(e){e.target.composing||(o.username=e.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.password,expression:"password"}],staticClass:"inputs",style:o.colorPassword,attrs:{type:"password",name:"password",placeholder:"password"},domProps:{value:o.password},on:{keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.iniciarSesion(e)},input:function(e){e.target.composing||(o.password=e.target.value)}}}),t("br"),t("br"),t("button",{staticClass:"botonEnviar",on:{click:function(e){return e.stopPropagation(),o.iniciarSesion(e)}}},[o._v("Conectarse")])])])},vo=[],bo=t("bc3a"),fo=t.n(bo),ho=/[^a-zA-Z0-9_]/g,go=/[^a-zA-Z0-9*@_-]/g,yo=6,No=4,Po={name:"LoginArea",data:function(){return{username:"",password:""}},computed:{usuarioConectado:function(){return null!=this.$store.state.usuario.username},nombreUsuario:function(){return this.$store.state.usuario.username},colorUsername:function(){return{color:ho.test(this.username)||this.username.length<No?"red":"black"}},colorPassword:function(){return{color:go.test(this.password)||this.password.length<yo?"red":"black"}}},methods:{iniciarSesion:function(){if(!(ho.test(this.username)||go.test(this.password)||this.password.length<yo||this.username.length<No)){var o=this;fo.a.post(this.serverUrl+"/api/usuarios/login",{username:this.username,password:this.password}).then((function(e){e.data.username==o.username&&(o.$store.commit("logearse",e.data.token),o.$router.push("/miperfil"))})).catch((function(e){console.log("error: ".concat(e)),o.$store.commit("deslogearse")}))}},deslogearse:function(){this.$store.commit("deslogearse")}}},jo=Po,$o=(t("a05f"),Object(d["a"])(jo,po,vo,!1,null,"40d0f7d4",null)),Co=$o.exports,Ro=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"perfilPersonal"},[t("div",{attrs:{id:"categorias"}},[t("div",{staticClass:"categorias",on:{click:function(e){o.seccion=o.categorias}}},[o._v(" Datos personales ")]),t("div",{staticClass:"categorias",on:{click:function(e){o.seccion=o.contacto}}},[o._v(" Información de contacto ")]),t("div",{staticClass:"categorias",on:{click:function(e){o.seccion=o.conocimientos}}},[o._v(" Conocimientos ")])]),t("div",{attrs:{id:"contenidos"}},[t("div",{staticClass:"contenidos editables",attrs:{id:"datosPersonales"}},[t("div",{staticClass:"botonEditar hoverGris",on:{click:function(e){o.editandoDatosPersonales=!o.editandoDatosPersonales}}},[o._v(" "+o._s(o.editandoDatosPersonales?"Volver":"Editar")+" ")]),t("div",{attrs:{id:"fotografia"},on:{click:function(e){return e.target!==e.currentTarget?null:o.seleccionarFoto(e)}}},[t("img",{attrs:{id:"laFotografia",src:o.serverUrl+"/api/usuarios/fotografias/"+o.yo.id,alt:""}}),t("input",{ref:"inputNuevaFoto",attrs:{type:"file",id:"inputNuevaFoto"},on:{change:o.subirNuevaFoto}})]),t("div",{attrs:{id:"textosDatosPersonales"}},[o.editandoDatosPersonales?[t("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.nombres,expression:"edicionDatosPersonales.nombres"}],attrs:{type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.edicionDatosPersonales.nombres},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"nombres",e.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.apellidos,expression:"edicionDatosPersonales.apellidos"}],attrs:{type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.edicionDatosPersonales.apellidos},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"apellidos",e.target.value)}}}),t("br"),t("br"),t("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosPersonales.fechaNacimiento,expression:"edicionDatosPersonales.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.edicionDatosPersonales.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosPersonales,"fechaNacimiento",e.target.value)}}}),t("br"),t("button",{on:{click:o.enviarDatosPersonales}},[o._v("Enviar")])]:[t("div",{staticClass:"nombreApellido",attrs:{id:"miNombre"}},[o._v(o._s(o.yo.nombres))]),t("div",{staticClass:"nombreApellido",attrs:{id:"miApellido"}},[o._v(o._s(o.yo.apellidos))]),t("br"),t("div",{attrs:{id:"miEdad"}},[o._v(o._s(o.yo.edad)+" años")])]],2)]),t("div",{staticClass:"contenidos editables",attrs:{id:"informacionContacto"}},[t("div",{staticClass:"botonEditar hoverGris",on:{click:function(e){o.editandoDatosContacto=!o.editandoDatosContacto}}},[o._v(" "+o._s(o.editandoDatosContacto?"Volver":"Editar")+" ")]),o.editandoDatosContacto?[t("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.lugarResidencia,expression:"edicionDatosContacto.lugarResidencia"}],attrs:{type:"text",placeholder:"Residencia"},domProps:{value:o.edicionDatosContacto.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"lugarResidencia",e.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.email,expression:"edicionDatosContacto.email"}],attrs:{type:"email",placeholder:"Correo electronico"},domProps:{value:o.edicionDatosContacto.email},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"email",e.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.edicionDatosContacto.numeroTel,expression:"edicionDatosContacto.numeroTel"}],attrs:{type:"text",placeholder:"Número telefónico"},domProps:{value:o.edicionDatosContacto.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.edicionDatosContacto,"numeroTel",e.target.value)}}}),t("br"),t("button",{on:{click:o.enviarDatosContacto}},[o._v("Enviar")])]:[t("div",{attrs:{id:"miResidencia"}},[o._v("Residencia: "+o._s(o.yo.lugarResidencia))]),t("div",{attrs:{id:"miEmail"}},[o._v("Correo electrónico: "+o._s(o.yo.email))]),t("div",{attrs:{id:"miTelefono"}},[o._v("Mi número telefónico: "+o._s(o.yo.numeroTel))])]],2)])])},Oo=[],_o=(t("caad"),/[^ a-zA-ZÀ-ž0-9_():.,-]/g),To=/[^ a-zA-ZÀ-ž]/g,Eo=/[^0-9+-]/g,xo=/\S+@\S+\.\S+/,Do=/[12][90][0-9][0-9]-[01][0-9]-[0-3][0-9]/,So=function(o){var e=[];for(var t in o){if(!o[t])return e.push("El dato ".concat(t," no tenia valor")),e;o[t]=o[t].trim(),"nombres"==t?(o.nombres.length<2&&e.push("Tu nombre es muy corto"),To.test(o.nombres)&&e.push("Tu nombre contiene caracteres no permitidos")):"apellidos"==t?(o.apellidos.length<2&&e.push("Tu apellido es muy corto"),To.test(o.apellidos)&&e.push("Tu apellido contiene caracteres no permitidos")):"fechaNacimiento"==t?Do.test(o.fechaNacimiento)||e.push("Tu fecha de nacimiento es incorrecta"):"email"==t?o.email.length>0&&!xo.test(o.email)&&e.push("Tu e-mail no es válido"):"numeroTel"==t?Eo.test(o.numeroTel)&&e.push("Tu número telefónico no es válido"):"lugarResidencia"==t?(o.lugarResidencia.length<2&&e.push("Tu lugar de residencia es muy corto"),_o.test(o.lugarResidencia)&&e.push("Tu lugar de residencia contiene caracteres no permitidos")):"username"==t?(o.username.length<4&&e.push("Tu nombre de usuario es muy corto"),_o.test(o.username)&&e.push("Tu nombre de usuario contiene caracteres no permitidos")):"password"==t?(o.password.length<6||o.password.length>32)&&e.push("Tu contraseña debe contener entre 6 y 32 caracteres"):e.push("El dato ".concat(t," no tenía lǵica de validación"))}return e};function ko(){var o=Object(N["a"])(["\n              mutation($nuevosDatos: DatosEditablesUsuario) {\n                editarDatosUsuario(nuevosDatos: $nuevosDatos) {\n                  id\n                  ...DatosContacto\n                }\n              }\n              ","\n            "]);return ko=function(){return o},o}function Vo(){var o=Object(N["a"])(["\n              mutation($nuevosDatos: DatosEditablesUsuario) {\n                editarDatosUsuario(nuevosDatos: $nuevosDatos) {\n                  id\n                  ...DatosPersonales\n                }\n              }\n              ","\n            "]);return Vo=function(){return o},o}function wo(){var o=Object(N["a"])(["\n        query {\n          yo {\n            id\n            nombres\n            apellidos\n            fechaNacimiento\n            edad\n            lugarResidencia\n            numeroTel\n            email\n            username\n            nodosConocimiento {\n              nodoConocimiento {\n                id\n                nombre\n              }\n            }\n          }\n        }\n      "]);return wo=function(){return o},o}function Io(){var o=Object(N["a"])(["\n  fragment DatosContacto on Usuario {\n    lugarResidencia\n    email\n    numeroTel\n  }\n"]);return Io=function(){return o},o}function zo(){var o=Object(N["a"])(["\n  fragment DatosPersonales on Usuario {\n    nombres\n    apellidos\n    fechaNacimiento\n    edad\n  }\n"]);return zo=function(){return o},o}var Ao=j()(zo()),Mo=j()(Io()),Uo={name:"PerfilPersonal",apollo:{yo:{query:j()(wo()),fetchPolicy:"network-only"}},data:function(){return{yo:{id:null,nombres:null,apellidos:null,fechaNacimiento:null,email:null,edad:null,fotografia:null,lugarResidencia:null,username:null,misNodos:[]},editandoDatosPersonales:!1,editandoDatosContacto:!1}},computed:{edicionDatosPersonales:function(){return{nombres:this.yo.nombres,apellidos:this.yo.apellidos,fechaNacimiento:this.yo.fechaNacimiento.substr(0,10)}},edicionDatosContacto:function(){return{lugarResidencia:this.yo.lugarResidencia,email:this.yo.email,numeroTel:this.yo.numeroTel}}},methods:{subirNuevaFoto:function(){var o=this.$refs.inputNuevaFoto,e=new FormData,t=o.files[0],n=t["type"],i=["image/jpeg","image/png"];i.includes(n)?(e.append("nuevaFoto",t),fo()({method:"post",url:this.serverUrl+"/api/usuarios/updateFoto",data:e,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.$store.state.token},success:function(o){console.log("respuesta: ".concat(JSON.stringify(o)))},error:function(o,e,t){console.log("errores: "+o+"**"+e+"**"+t)}})):console.log("Archivo ilegal")},enviarDatosPersonales:function(){var o=this;console.log("Enviando nuevos datos personales");var e=So(this.edicionDatosPersonales);e.length<1?this.$apollo.mutate({mutation:j()(Vo(),Ao),variables:{nuevosDatos:this.edicionDatosPersonales}}).then((function(){console.log("Datos correctamente editados"),o.editandoDatosPersonales=!1})).catch((function(o){console.log("Error: ".concat(o))})):console.log("Errores: ".concat(e))},enviarDatosContacto:function(){var o=this;console.log("Enviando nuevos datos contacto: ".concat(JSON.stringify(this.edicionDatosContacto)));var e=So(this.edicionDatosContacto);e.length<1?this.$apollo.mutate({mutation:j()(ko(),Mo),variables:{nuevosDatos:this.edicionDatosContacto}}).then((function(){console.log("Datos correctamente editados"),o.editandoDatosContacto=!1})).catch((function(o){console.log("Error: ".concat(o))})):console.log("Errores: ".concat(e))},seleccionarFoto:function(){this.$refs.inputNuevaFoto.click()}}},Lo=Uo,Go=(t("2741"),Object(d["a"])(Lo,Ro,Oo,!1,null,"27522ce0",null)),qo=Go.exports,Bo=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"visorNodoConocimiento"}},[t("div",{attrs:{id:"layout"}},[t("div",{attrs:{id:"barraLateral"}}),t("iframe",{attrs:{id:"visor",src:o.direccionNodo}})])])},Fo=[],Jo={name:"VisorNodoConocimiento",computed:{direccionNodo:function(){return Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_DATA_SERVER_ADD+"/atlas/contenidosNodos/"+this.$route.params.idNodo}},mounted:function(){console.log("data server addres:: ".concat(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_DATA_SERVER_ADD))}},Zo=Jo,Ko=(t("dc67"),Object(d["a"])(Zo,Bo,Fo,!1,null,"2324a55e",null)),Ho=Ko.exports,Qo=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"proyectos"}},[t("center",[t("h3",[o._v("Proyectos")])]),t("div",{attrs:{id:"controles"}},[o.username?t("div",{staticClass:"controles hoverGris",attrs:{id:"crearProyecto"},on:{click:o.crearNuevoProyecto}},[o._v(" Crear nuevo proyecto ")]):o._e()]),t("div",{attrs:{id:"listaProyectos"}},o._l(o.proyectos,(function(e){return t("icono-proyecto",{key:e.id,attrs:{esteProyecto:e},on:{cambioDeNombre:o.cambiarNombreProyecto}})})),1)],1)},Yo=[],Xo=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"iconoProyecto",class:{proyectoPropio:o.usuarioResponsableProyecto},on:{dblclick:o.navegarAlProyecto}},[t("p",{ref:"nombre",attrs:{id:"nombre",contenteditable:o.permisosEdicion},on:{blur:o.guardarNombre,input:o.setNombreEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurNombre(e)},dblclick:function(o){o.stopPropagation()}}},[o._v(" "+o._s(o.esteProyecto.nombre)+" ")])])},Wo=[],oe=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,ee={name:"IconoProyecto",props:{esteProyecto:Object},data:function(){return{nombreEditandose:!1}},computed:{usuario:function(){return this.$store.state.usuario},usuarioResponsableProyecto:function(){var o=this;return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.some((function(e){return e.id==o.usuario.id}))},permisosEdicion:function(){return!(!this.usuarioResponsableProyecto&&"superadministrador"!=this.$store.state.usuario.permisos)}},methods:{guardarNombre:function(){console.log("guardando nombre");var o=this.$refs.nombre.innerHTML.trim(),e=this.esteProyecto.id;this.nombreEditandose&&o!=this.esteProyecto.nombre&&(console.log("guardando nombres"),o=o.replace(oe,""),o=o.replace(/\s\s+/g," "),this.$emit("cambioDeNombre",{idProyecto:e,nuevoNombre:o}),this.nombreEditandose=!1)},setNombreEditandose:function(){this.esteProyecto.nombre!=this.$refs.nombre.innerHTML.trim()?this.nombreEditandose=!0:this.nombreEditandose=!1},blurNombre:function(){this.$refs.nombre.blur()},navegarAlProyecto:function(){this.$router.push("/proyecto/"+this.esteProyecto.id)}}},te=ee,ne=(t("d533"),Object(d["a"])(te,Xo,Wo,!1,null,"b67c2b02",null)),ie=ne.exports;function ae(){var o=Object(N["a"])(["\n          mutation{\n            crearProyecto{\n              id\n              nombre\n              responsables{\n                username\n              }\n            }\n          }\n        "]);return ae=function(){return o},o}function se(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!, $nuevoNombre: String!) {\n              editarNombreProyecto(idProyecto: $idProyecto, nuevoNombre: $nuevoNombre){\n                  id\n                  nombre\n              }                               \n            }\n          "]);return se=function(){return o},o}function re(){var o=Object(N["a"])(["\n        query {\n          proyectos {\n            id\n            nombre\n            responsables {\n              id\n              username\n            }\n          }\n        }\n      "]);return re=function(){return o},o}var ce={components:{IconoProyecto:ie},name:"Proyectos",apollo:{proyectos:{query:j()(re()),update:function(o){var e=this,t=o.proyectos;return t.sort((function(o,t){var n=0;return o.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&n--,t.responsables.some((function(o){return o.id==e.$store.state.usuario.id}))&&n++,n}))}}},data:function(){return{proyectos:[]}},methods:{cambiarNombreProyecto:function(o){var e=o.idProyecto,t=o.nuevoNombre;console.log("cambiando nombre de un proyecto a ".concat(t)),this.$apollo.mutate({mutation:j()(se()),variables:{idProyecto:e,nuevoNombre:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))},crearNuevoProyecto:function(){this.$apollo.mutate({mutation:j()(ae())}).then((function(){})).catch((function(){}))}},computed:{username:function(){return this.$store.state.usuario.username}}},de=ce,ue=(t("1091"),Object(d["a"])(de,Qo,Yo,!1,null,"5688c6b6",null)),le=ue.exports,me=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"proyecto"},[t("div",{attrs:{id:"nombreProyecto"}},[o._v(o._s(o.esteProyecto.nombre))]),t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[t("div",{staticClass:"nombreZona"},[o._v("Responsables")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[1==o.usuarioLogeado&&o.esteProyecto.responsables.length<1?t("div",{staticClass:"controlesResponsables hoverGris botonesControles",attrs:{id:"asumirResponsable"},on:{click:o.asumirComoResponsable}},[o._v(" Asumir ")]):o._e(),o.usuarioLogeado&&!o.usuarioResponsableProyecto&&!o.usuarioPosibleResponsableProyecto&&o.esteProyecto.responsables.length>0?t("div",{staticClass:"controlesResponsables hoverGris botonesControles",attrs:{id:"botonAddResponsable"},on:{click:o.entrarListaPosiblesResponsables}},[o._v(" Quiero hacerme responsable ")]):o._e(),1!=o.usuarioLogeado||1!=o.usuarioResponsableProyecto&&1!=o.usuarioPosibleResponsableProyecto?o._e():t("div",{staticClass:"controlesResponsables hoverGris botonesControles",on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")])]),t("div",{attrs:{id:"listaResponsables"}},[o._l(o.esteProyecto.responsables,(function(o){return t("icono-persona",{key:o.id,attrs:{estaPersona:o,aceptado:!0}})})),o._l(o.esteProyecto.posiblesResponsables,(function(e){return t("icono-persona",{key:e.id,staticClass:"personaPosibleResponsable",attrs:{estaPersona:e,aceptado:!1},nativeOn:{dblclick:function(t){return t.shiftKey?o.aceptarResponsable(e.id):null}}})}))],2)]),t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaObjetivos"}},[t("div",{staticClass:"nombreZona"},[o._v("Objetivos")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesObjetivos"}},[o.usuarioResponsableProyecto?t("div",{staticClass:"controlesObjetivos botonesControles hoverGris",on:{click:o.crearNuevoObjetivo}},[o._v(" Crear objetivo ")]):o._e()]),t("div",{attrs:{id:"listaObjetivos"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idObjetivoSeleccionado=null}}},o._l(o.esteProyecto.objetivos,(function(e){return t("iconoObjetivo",{key:e.id,attrs:{esteObjetivo:e,idObjetivoSeleccionado:o.idObjetivoSeleccionado,permisosEdicion:o.permisosEdicion},on:{eliminandose:o.eliminarObjetivo,cambiandoNombre:o.cambiarNombreObjetivo,cambiandoDescripcion:o.cambiarDescripcionObjetivo},nativeOn:{click:function(t){o.idObjetivoSeleccionado=e.id}}})})),1)]),t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaTrabajos"}},[t("div",{staticClass:"nombreZona"},[o._v("Trabajos:")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesTrabajos"}},[o.usuarioResponsableProyecto?t("div",{staticClass:"controlesTrabajos hoverGris botonesControles",on:{click:o.crearNuevoTrabajo}},[o._v(" Crear trabajo ")]):o._e()]),t("div",{attrs:{id:"listaTrabajos"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idTrabajoSeleccionado=null}}},o._l(o.esteProyecto.trabajos,(function(e){return t("iconoTrabajo",{key:e.id,class:{opacar:null!=o.idTrabajoSeleccionado&&o.idTrabajoSeleccionado!=e.id},attrs:{esteTrabajo:e,idEsteProyecto:o.esteProyecto.id,idTrabajoSeleccionado:o.idTrabajoSeleccionado,permisosEdicion:o.permisosEdicion,usuarioLogeado:o.usuarioLogeado,usuarioResponsableProyecto:o.usuarioResponsableProyecto},on:{eliminandose:o.eliminarTrabajo,cambiandoNombre:o.cambiarNombreTrabajo,cambiandoDescripcion:o.cambiarDescripcionTrabajo},nativeOn:{click:function(t){o.idTrabajoSeleccionado=e.id}}})})),1)])])},pe=[],ve=(t("a434"),function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"iconoTrabajo",class:{trabajoSeleccionado:o.seleccionado}},[t("div",{ref:"nombre",attrs:{id:"nombre",contenteditable:1==o.permisosEdicion&&1==o.seleccionado},on:{blur:o.guardarNombre,input:o.setNombreEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurNombre(e)}}},[o._v(" "+o._s(o.esteTrabajo.nombre)+" ")]),t("img",{attrs:{src:"iconos/iconoTrabajo.png",alt:"",id:"imagenIcono"}}),o.seleccionado?[t("div",{attrs:{id:"zonaDescripcion"}},[t("div",{staticClass:"nombreZona"},[o._v("Descripcion")]),t("div",{ref:"descripcion",attrs:{id:"descripcion",contenteditable:1==o.permisosEdicion&&1==o.seleccionado},on:{blur:o.guardarDescripcion,input:o.setDescripcionEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurDescripcion(e)}}},[o._v(" "+o._s(o.esteTrabajo.descripcion)+" ")])]),t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaResponsables"}},[t("div",{staticClass:"nombreZona"},[o._v("Responsables")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesResponsables"}},[1==o.usuarioLogeado&&0==o.usuarioResponsableTrabajo?t("div",{staticClass:"controlesResponsables hoverGris botonesControles",attrs:{id:"botonParticipar"},on:{click:o.asumirComoResponsable}},[o._v(" Participar ")]):o._e(),1==o.usuarioResponsableTrabajo?t("div",{staticClass:"controlesResponsables hoverGris botonesControles",on:{click:o.abandonarListaResponsables}},[o._v(" Abandonar ")]):o._e()]),t("div",{attrs:{id:"listaResponsables"}},o._l(o.esteTrabajo.responsables,(function(o){return t("icono-persona",{key:o.id,attrs:{estaPersona:o,aceptado:!0}})})),1)]),t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaNodosConocimiento"}},[t("div",{staticClass:"nombreZona"},[o._v("Nodos de conocimiento involucrados")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesNodosConocimiento"}},[1==o.usuarioResponsableProyecto?t("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Añadir ")]):o._e(),1==o.usuarioResponsableProyecto&&null!=o.idNodoSeleccionado&&o.esteTrabajo.nodosConocimiento.some((function(e){return e.id==o.idNodoSeleccionado}))?t("div",{staticClass:"controlesNodosConocimiento hoverGris botonesControles"},[o._v(" Remover ")]):o._e()]),t("div",{attrs:{id:"listaNodosConocimiento"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idNodoSeleccionado=null}}},[o._l(o.esteTrabajo.nodosConocimiento,(function(e){return t("icono-nodo-conocimiento",{key:e.id,attrs:{esteNodo:e},nativeOn:{click:function(t){o.idNodoSeleccionado=e.id}}})})),t("buscador-nodos-conocimiento")],2)]),t("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{id:"controlesTrabajo"}},[1==o.usuarioResponsableProyecto?t("div",{staticClass:"controlesTrabajo hoverGris",on:{click:o.eliminarse}},[o._v(" Eliminar ")]):o._e()])]:o._e()],2)}),be=[];function fe(){var o=Object(N["a"])(["\nfragment fragResponsables on PublicUsuario {\n  id\n  username\n  nombres\n  apellidos\n  email\n  numeroTel\n  lugarResidencia\n}\n"]);return fe=function(){return o},o}var he=j()(fe()),ge=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"iconoPersona",class:{yo:o.soyYo,seleccionado:o.seleccionado}},[t("img",{attrs:{id:"fotografia",src:this.serverUrl+"/api/usuarios/fotografias/"+o.estaPersona.id,alt:""}}),t("div",{attrs:{id:"nombres"}},[o._v(o._s(o.estaPersona.nombres))])])},ye=[],Ne={name:"IconoPersona",data:function(){return{}},props:{estaPersona:Object,aceptado:Boolean,seleccionado:Boolean},computed:{soyYo:function(){return this.$store.state.usuario.id==this.estaPersona.id}}},Pe=Ne,je=(t("6a94"),Object(d["a"])(Pe,ge,ye,!1,null,"2b86dfba",null)),$e=je.exports,Ce=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{attrs:{id:"buscadorNodosConocimiento"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.palabraBuscada,expression:"palabraBuscada"}],attrs:{type:"text",placeholder:"Buscar"},domProps:{value:o.palabraBuscada},on:{input:function(e){e.target.composing||(o.palabraBuscada=e.target.value)}}}),t("img",{attrs:{id:"imagenTentativa",src:"",alt:""}}),t("div",{staticClass:"opciones"},o._l(o.opciones,(function(e){return t("div",{key:e.id,staticClass:"opcion"},[o._v(" "+o._s(e.nombre)+" ")])})),0)])},Re=[];function Oe(){var o=Object(N["a"])(["\n              query($palabrasBuscadas: [String]!) {\n                busquedaAmplia(palabrasBuscadas: $palabrasBuscadas) {\n                  id\n                  nombre\n                  resumen\n                }\n              }\n            "]);return Oe=function(){return o},o}var _e=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,Te={name:"BuscadorNodosConocimiento",data:function(){return{palabraBuscada:"",cantidadPalabrasValidas:0,opciones:[]}},watch:{palabraBuscada:function(o){o=o.trim(),o=o.replace(_e,""),o=o.replace(/\s\s+/g," ");for(var e=o.split(" "),t=[],n=0,i=0;i<e.length;i++)e[i].length>=3&&(t[n]=e[i],n++);this.palabrasValidas=t,this.cantidadPalabrasValidas=t.length,console.log("cantidad palabras validas: ".concat(this.cantidadPalabrasValidas))},cantidadPalabrasValidas:function(o,e){var t=this;o>e&&(console.log("Descargando nuevas opciones"),this.$apollo.query({query:j()(Oe()),variables:{palabrasBuscadas:this.palabrasValidas},fetchPolicy:"network-only"}).then((function(o){var e=o.data.busquedaAmplia;console.log("respuesta: ".concat(JSON.stringify(e))),t.opciones=e})).catch((function(o){console.log("Error: ".concat(o))})))}}},Ee=Te,xe=Object(d["a"])(Ee,Ce,Re,!1,null,"0ee434dc",null),De=xe.exports;function Se(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo:ID! $idUsuario: ID!) {\n              removeResponsableTrabajo(\n                idProyecto: $idProyecto\n                idTrabajo:$idTrabajo\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }                \n              }\n            }\n            ","\n          "]);return Se=function(){return o},o}function ke(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $idUsuario: ID!) {\n              addResponsableTrabajo(\n                idProyecto: $idProyecto\n                idTrabajo:$idTrabajo\n                idUsuario: $idUsuario                \n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return ke=function(){return o},o}var Ve=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,we={name:"IconoTrabajo",components:{IconoPersona:$e,BuscadorNodosConocimiento:De},data:function(){return{nombreEditandose:!1,descripcionEditandose:!1,idNodoSeleccionado:null}},props:{esteTrabajo:Object,idEsteProyecto:String,idTrabajoSeleccionado:String,permisosEdicion:Boolean,usuarioResponsableProyecto:Boolean},computed:{seleccionado:function(){return this.idTrabajoSeleccionado==this.esteTrabajo.id},usuarioResponsableTrabajo:function(){var o=this;return!!this.esteTrabajo.responsables.some((function(e){return e.id==o.$store.state.usuario.id}))}},methods:{asumirComoResponsable:function(){console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del trabajo con id ").concat(this.esteTrabajo.id," en el proyecto con id ").concat(this.idEsteProyecto)),this.$apollo.mutate({mutation:j()(ke(),he),variables:{idProyecto:this.idEsteProyecto,idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},abandonarListaResponsables:function(){console.log("Abandonando este trabajo"),this.$apollo.mutate({mutation:j()(Se(),he),variables:{idProyecto:this.idEsteProyecto,idTrabajo:this.esteTrabajo.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},eliminarse:function(){this.$emit("eliminandose",this.esteTrabajo.id)},setNombreEditandose:function(){this.esteTrabajo.nombre!=this.$refs.nombre.innerHTML.trim()?this.nombreEditandose=!0:this.nombreEditandose=!1},setDescripcionEditandose:function(){this.descripcionEditandose=!0},blurNombre:function(){this.$refs.nombre.blur()},blurDescripcion:function(){this.$refs.descripcion.blur()},guardarNombre:function(){var o=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.$refs.nombre.innerHTML.trim(),n=o.esteTrabajo.id,o.nombreEditandose&&t!=o.esteTrabajo.nombre){e.next=4;break}return e.abrupt("return");case 4:t=t.replace(Ve,""),t=t.replace(/\s\s+/g," "),o.$emit("cambiandoNombre",{idTrabajo:n,nuevoNombre:t});case 7:case"end":return e.stop()}}),e)})))()},guardarDescripcion:function(){var o=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.$refs.descripcion.innerHTML.trim(),n=o.esteTrabajo.id,o.descripcionEditandose&&t!=o.esteTrabajo.descripcion){e.next=4;break}return e.abrupt("return");case 4:t=t.replace(Ve,""),t=t.replace(/\s\s+/g," "),o.$emit("cambiandoDescripcion",{idTrabajo:n,nuevaDescripcion:t});case 7:case"end":return e.stop()}}),e)})))()}}},Ie=we,ze=(t("df17"),Object(d["a"])(Ie,ve,be,!1,null,"54b44ea3",null)),Ae=ze.exports,Me=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"iconoObjetivo",class:{objetivoSeleccionado:o.seleccionado}},[t("img",{attrs:{src:"iconos/iconoObjetivo.png",alt:"",id:"imagenIcono"}}),t("div",{ref:"nombre",attrs:{id:"nombre",contenteditable:1==o.permisosEdicion&&1==o.seleccionado},on:{blur:o.guardarNombre,input:o.setNombreEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurNombre(e)}}},[o._v(" "+o._s(o.esteObjetivo.nombre)+" ")]),o.seleccionado?t("div",{attrs:{id:"zonaDescripcion"}},[o._v(" Descripcion: "),t("br"),t("div",{ref:"descripcion",attrs:{id:"descripcion",contenteditable:1==o.permisosEdicion&&1==o.seleccionado},on:{blur:o.guardarDescripcion,input:o.setDescripcionEditandose,keypress:function(e){return!e.type.indexOf("key")&&o._k(e.keyCode,"enter",13,e.key,"Enter")?null:o.blurDescripcion(e)}}},[o._v(" "+o._s(o.esteObjetivo.descripcion)+" ")])]):o._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:o.seleccionado,expression:"seleccionado"}],attrs:{id:"controlesObjetivo"}},[t("div",{staticClass:"controlesObjetivo hoverGris",on:{click:o.eliminarse}},[o._v(" Eliminar ")])])])},Ue=[],Le=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,Ge=/[^ a-zA-ZÀ-ž0-9_():.,-¡!¿?"'%$]/g,qe={name:"IconoObjetivo",data:function(){return{nombreEditandose:!1,descripcionEditandose:!1}},props:{esteObjetivo:Object,idObjetivoSeleccionado:String,permisosEdicion:Boolean},computed:{seleccionado:function(){return this.idObjetivoSeleccionado==this.esteObjetivo.id}},methods:{eliminarse:function(){console.log("emitiendo evento de elimacion de objetivo"),this.$emit("eliminandose",this.esteObjetivo.id)},setNombreEditandose:function(){this.esteObjetivo.nombre!=this.$refs.nombre.innerHTML.trim()?this.nombreEditandose=!0:this.nombreEditandose=!1},setDescripcionEditandose:function(){this.descripcionEditandose=!0},blurNombre:function(){this.$refs.nombre.blur()},blurDescripcion:function(){this.$refs.descripcion.blur()},guardarNombre:function(){var o=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.$refs.nombre.innerHTML.trim(),n=o.esteObjetivo.id,o.nombreEditandose&&t!=o.esteObjetivo.nombre){e.next=4;break}return e.abrupt("return");case 4:t=t.replace(Le,""),t=t.replace(/\s\s+/g," "),o.$emit("cambiandoNombre",{idObjetivo:n,nuevoNombre:t});case 7:case"end":return e.stop()}}),e)})))()},guardarDescripcion:function(){var o=this;return Object(M["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=o.$refs.descripcion.innerHTML.trim(),n=o.esteObjetivo.id,o.descripcionEditandose&&t!=o.esteObjetivo.descripcion){e.next=4;break}return e.abrupt("return");case 4:t=t.replace(Ge,""),t=t.replace(/\s\s+/g," "),o.$emit("cambiandoDescripcion",{idObjetivo:n,nuevaDescripcion:t});case 7:case"end":return e.stop()}}),e)})))()}}},Be=qe,Fe=(t("320b"),Object(d["a"])(Be,Me,Ue,!1,null,"a5a4c026",null)),Je=Fe.exports;function Ze(){var o=Object(N["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevaDescripcion: String!\n            ) {\n              cambiarDescripcionObjetivo(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevaDescripcion: $nuevaDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return Ze=function(){return o},o}function Ke(){var o=Object(N["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idObjetivo: ID!\n              $nuevoNombre: String!\n            ) {\n              cambiarNombreObjetivo(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Ke=function(){return o},o}function He(){var o=Object(N["a"])(["\n            mutation($idObjetivo: ID!, $idProyecto: ID!) {\n              eliminarObjetivoDeProyecto(\n                idProyecto: $idProyecto\n                idObjetivo: $idObjetivo\n              )\n            }\n          "]);return He=function(){return o},o}function Qe(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!) {\n              crearObjetivoEnProyecto(idProyecto: $idProyecto) {\n                id\n                nombre\n                descripcion\n              }\n            }\n          "]);return Qe=function(){return o},o}function Ye(){var o=Object(N["a"])(["\n            mutation(\n              $idProyecto: ID!\n              $idTrabajo: ID!\n              $nuevaDescripcion: String!\n            ) {\n              cambiarDescripcionTrabajo(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevaDescripcion: $nuevaDescripcion\n              ) {\n                id\n                descripcion\n              }\n            }\n          "]);return Ye=function(){return o},o}function Xe(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!, $idTrabajo: ID!, $nuevoNombre: String!) {\n              cambiarNombreTrabajo(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n                nuevoNombre: $nuevoNombre\n              ) {\n                id\n                nombre\n              }\n            }\n          "]);return Xe=function(){return o},o}function We(){var o=Object(N["a"])(["\n            mutation($idTrabajo: ID!, $idProyecto: ID!) {\n              eliminarTrabajoDeProyecto(\n                idProyecto: $idProyecto\n                idTrabajo: $idTrabajo\n              )\n            }\n          "]);return We=function(){return o},o}function ot(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!) {\n              crearTrabajoEnProyecto(idProyecto: $idProyecto) {\n                id\n                nombre\n                descripcion\n                responsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return ot=function(){return o},o}function et(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return et=function(){return o},o}function tt(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addPosibleResponsableProyecto(idProyecto: $idProyecto, idUsuario: $idUsuario) {\n                id\n                posiblesResponsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return tt=function(){return o},o}function nt(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              addResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }\n                posiblesResponsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return nt=function(){return o},o}function it(){var o=Object(N["a"])(["\n            mutation($idProyecto: ID!, $idUsuario: ID!) {\n              removeResponsableProyecto(\n                idProyecto: $idProyecto\n                idUsuario: $idUsuario\n              ) {\n                id\n                responsables {\n                  ...fragResponsables\n                }\n                posiblesResponsables {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return it=function(){return o},o}function at(){var o=Object(N["a"])(["\n  query($idProyecto: ID!) {\n    proyecto(idProyecto: $idProyecto) {\n      id\n      nombre\n      responsables {\n        ...fragResponsables\n      }\n      posiblesResponsables {\n        ...fragResponsables\n      }\n      trabajos {\n        id\n        nombre\n        descripcion\n        responsables {\n          ...fragResponsables\n        }\n      }\n      objetivos {\n        id\n        nombre\n        descripcion\n      }\n    }\n  }\n  ","\n"]);return at=function(){return o},o}var st=j()(at(),he),rt={components:{IconoTrabajo:Ae,IconoPersona:$e,IconoObjetivo:Je},name:"proyecto",apollo:{esteProyecto:{query:st,variables:function(){return{idProyecto:this.$route.params.idProyecto}},update:function(o){return o.proyecto}}},data:function(){return{esteProyecto:{responsables:[]},idTrabajoSeleccionado:null,idObjetivoSeleccionado:null}},computed:{usuarioResponsableProyecto:function(){var o=this;return!!this.esteProyecto.responsables&&!!this.esteProyecto.responsables.some((function(e){return e.id==o.$store.state.usuario.id}))},usuarioPosibleResponsableProyecto:function(){var o=this;return!!this.esteProyecto.posiblesResponsables&&!!this.esteProyecto.posiblesResponsables.some((function(e){return e.id==o.$store.state.usuario.id}))},permisosEdicion:function(){return!(!this.usuarioResponsableProyecto&&"superadministrador"!=this.$store.state.usuario.permisos)}},methods:{abandonarListaResponsables:function(){console.log("Abandonando la responsabilidad en este proyecto"),this.$apollo.mutate({mutation:j()(it(),he),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},aceptarResponsable:function(o){console.log("aceptando como responsable al usuario ".concat(o)),this.$apollo.mutate({mutation:j()(nt(),he),variables:{idProyecto:this.esteProyecto.id,idUsuario:o}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},entrarListaPosiblesResponsables:function(){console.log("Enviando peticion de entrar a la lista de posibles responsables del proyecto con id ".concat(this.esteProyecto.id)),this.$apollo.mutate({mutation:j()(tt(),he),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},asumirComoResponsable:function(){console.log("enviando id ".concat(this.$store.state.usuario.id," para la lista de responsables del proyecto con id ").concat(this.esteProyecto.id)),this.$apollo.mutate({mutation:j()(et(),he),variables:{idProyecto:this.esteProyecto.id,idUsuario:this.$store.state.usuario.id}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},crearNuevoTrabajo:function(){var o=this;console.log("enviando mutacion de crear nuevo trabajo"),this.$apollo.mutate({mutation:j()(ot(),he),variables:{idProyecto:this.esteProyecto.id},update:function(e,t){var n=t.data.crearTrabajoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(n)));var i=n;try{var a=e.readQuery({query:st,variables:{idProyecto:o.esteProyecto.id}});a.proyecto.trabajos.push(i),e.writeQuery({query:st,variables:{idProyecto:o.esteProyecto.id},data:a}),console.log("cache actualizado")}catch(s){return void console.log("Error actualizando cache: ".concat(s))}}}).then((function(o){console.log("respuesta. ".concat(o))})).catch((function(o){console.log("error: ".concat(o))}))},eliminarTrabajo:function(o){var e=this;this.esteProyecto.trabajos.some((function(e){return e.id==o}))&&this.$apollo.mutate({mutation:j()(We()),variables:{idTrabajo:o,idProyecto:this.esteProyecto.id},update:function(t,n){var i=n.data.eliminarTrabajoDeProyecto;console.log("data: ".concat(JSON.stringify(i)));var a=i;if(a)try{var s=t.readQuery({query:st,variables:{idProyecto:e.esteProyecto.id}}),r=s.proyecto.trabajos.findIndex((function(e){return e.id==o}));r>-1&&s.proyecto.trabajos.splice(r,1),t.writeQuery({query:st,variables:{idProyecto:e.esteProyecto.id},data:s})}catch(c){console.log("Error actualizando cache")}}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},cambiarNombreTrabajo:function(o){var e=o.idTrabajo,t=o.nuevoNombre;this.$apollo.mutate({mutation:j()(Xe()),variables:{idProyecto:this.esteProyecto.id,idTrabajo:e,nuevoNombre:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))},cambiarDescripcionTrabajo:function(o){var e=o.idTrabajo,t=o.nuevaDescripcion;this.$apollo.mutate({mutation:j()(Ye()),variables:{idProyecto:this.esteProyecto.id,idTrabajo:e,nuevaDescripcion:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))},crearNuevoObjetivo:function(){var o=this;console.log("enviando mutacion de crear nuevo objetivo"),this.$apollo.mutate({mutation:j()(Qe()),variables:{idProyecto:this.esteProyecto.id},update:function(e,t){var n=t.data.crearObjetivoEnProyecto;console.log("respuesta: ".concat(JSON.stringify(n)));var i=n;try{var a=e.readQuery({query:st,variables:{idProyecto:o.esteProyecto.id}});console.log("cache: ".concat(JSON.stringify(a))),a.proyecto.objetivos.push(i),console.log("cache: ".concat(JSON.stringify(a))),e.writeQuery({query:st,variables:{idProyecto:o.esteProyecto.id},data:a}),console.log("cache actualizado")}catch(s){return void console.log("Error actualizando cache: ".concat(s))}}}).then((function(o){console.log("respuesta. ".concat(o))})).catch((function(o){console.log("error: ".concat(o))}))},eliminarObjetivo:function(o){var e=this;this.esteProyecto.objetivos.some((function(e){return e.id==o}))&&this.$apollo.mutate({mutation:j()(He()),variables:{idObjetivo:o,idProyecto:this.esteProyecto.id},update:function(t,n){var i=n.data.eliminarObjetivoDeProyecto;console.log("data: ".concat(JSON.stringify(i)));var a=i;if(a)try{var s=t.readQuery({query:st,variables:{idProyecto:e.esteProyecto.id}}),r=s.proyecto.objetivos.findIndex((function(e){return e.id==o}));r>-1&&s.proyecto.objetivos.splice(r,1),t.writeQuery({query:st,variables:{idProyecto:e.esteProyecto.id},data:s})}catch(c){console.log("Error actualizando cache")}}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},cambiarNombreObjetivo:function(o){var e=o.idObjetivo,t=o.nuevoNombre;this.$apollo.mutate({mutation:j()(Ke()),variables:{idProyecto:this.esteProyecto.id,idObjetivo:e,nuevoNombre:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))},cambiarDescripcionObjetivo:function(o){var e=o.idObjetivo,t=o.nuevaDescripcion;this.$apollo.mutate({mutation:j()(Ze()),variables:{idProyecto:this.esteProyecto.id,idObjetivo:e,nuevaDescripcion:t}}).then((function(o){console.log("fin de la mutacion. Data: ".concat(JSON.stringify(o)," "))})).catch((function(o){console.log("error: ".concat(o))}))}}},ct=rt,dt=(t("d974"),Object(d["a"])(ct,me,pe,!1,null,"9538ec36",null)),ut=dt.exports,lt=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"registro"},[t("div",{attrs:{id:"zonaDatosPersonales"}},[t("h3",[o._v("Información Personal")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.nombres,expression:"datosRegistro.nombres"}],attrs:{type:"text",name:"nombres",placeholder:"Nombres"},domProps:{value:o.datosRegistro.nombres},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"nombres",e.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.apellidos,expression:"datosRegistro.apellidos"}],attrs:{type:"text",name:"apellidos",placeholder:"Apellidos"},domProps:{value:o.datosRegistro.apellidos},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"apellidos",e.target.value)}}}),t("br"),t("br"),t("label",{attrs:{for:"fechaNacimiento"}},[o._v("Fecha de nacimiento")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.fechaNacimiento,expression:"datosRegistro.fechaNacimiento"}],attrs:{type:"date",name:"fechaNacimiento"},domProps:{value:o.datosRegistro.fechaNacimiento},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"fechaNacimiento",e.target.value)}}}),t("br")]),t("div",{attrs:{id:"zonaContacto"}},[t("h3",[o._v("Datos de contacto")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.email,expression:"datosRegistro.email"}],attrs:{type:"email",placeholder:"Correo electrónico"},domProps:{value:o.datosRegistro.email},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"email",e.target.value)}}}),t("br"),t("br"),t("label",{attrs:{for:"numeroTel"}},[o._v("Número telefónico")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.numeroTel,expression:"datosRegistro.numeroTel"}],attrs:{type:"text",name:"numeroTel"},domProps:{value:o.datosRegistro.numeroTel},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"numeroTel",e.target.value)}}}),t("br"),t("br"),t("label",{attrs:{for:"lugarResidencia"}},[o._v("Lugar de residencia")]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.lugarResidencia,expression:"datosRegistro.lugarResidencia"}],attrs:{type:"text",placeholder:"Lugar de residencia"},domProps:{value:o.datosRegistro.lugarResidencia},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"lugarResidencia",e.target.value)}}})]),t("div",{attrs:{id:"zonaLogin"}},[t("h3",[o._v("Datos de login")]),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.username,expression:"datosRegistro.username"}],attrs:{type:"text",placeholder:"nombre de usuario",name:"username"},domProps:{value:o.datosRegistro.username},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"username",e.target.value)}}}),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:o.datosRegistro.password,expression:"datosRegistro.password"}],attrs:{type:"password",placeholder:"password",name:"password"},domProps:{value:o.datosRegistro.password},on:{input:function(e){e.target.composing||o.$set(o.datosRegistro,"password",e.target.value)}}}),t("br")]),t("button",{on:{click:o.enviarRegistro}},[o._v("Enviar")])])},mt=[],pt=/[^ a-zA-ZÀ-ž0-9_():.,-]/g,vt=/[^ a-zA-ZÀ-ž]/g,bt=/[^0-9+-]/g,ft=/\S+@\S+\.\S+/,ht=/[12][90][0-9][0-9]-[01][0-9]-[0-3][0-9]/,gt={name:"Registro",data:function(){return{datosRegistro:{nombres:null,apellidos:null,fechaNacimiento:null,email:null,numeroTel:null,lugarResidencia:null,username:null,password:null}}},methods:{enviarRegistro:function(){var o=this,e=So(this.datosRegistro);e.length<1?fo.a.post(this.serverUrl+"/api/usuarios/registro",{usuario:this.datosRegistro}).then((function(e){console.log("respuesta: ".concat(JSON.stringify(e.data))),e.data.registro&&(console.log("Registro ok"),o.$router.push("/login"))})).catch((function(o){console.log("error: ".concat(o))})):console.log("Errores: ".concat(e))},validarDatos:function(){var o=0;return this.nombres=this.nombres.trim(),this.apellidos=this.apellidos.trim(),this.fechaNacimiento=this.fechaNacimiento.trim(),this.email=this.email.trim(),this.numeroTel=this.numeroTel.trim(),this.lugarResidencia=this.lugarResidencia.trim(),this.nombres.length<2&&(this.alertar("Tu nombre es muy corto"),o++),vt.test(this.nombres)&&(this.alertar("Tu nombre contiene caracteres no permitidos"),o++),this.apellidos.length<2&&(this.alertar("Tu apellido es muy corto"),o++),vt.test(this.apellidos)&&(this.alertar("Tu apellido contiene caracteres no permitidos"),o++),ht.test(this.fechaNacimiento)||(this.alertar("Tu fecha de nacimiento es incorrecta"),o++),this.email.length>0&&!ft.test(this.email)&&(this.alertar("Tu e-mail no es válido"),o++),bt.test(this.numeroTel)&&(this.alertar("Tu número telefónico no es válido"),o++),this.lugarResidencia.length<2&&(this.alertar("Tu lugar de residencia es muy corto"),o++),pt.test(this.lugarResidencia)&&(this.alertar("Tu lugar de residencia contiene caracteres no permitidos"),o++),this.username.length<4&&(this.alertar("Tu nombre de usuario es muy corto"),o++),pt.test(this.username)&&(this.alertar("Tu nombre de usuario contiene caracteres no permitidos"),o++),(this.password.length<6||this.password.length>32)&&(this.alertar("Tu contraseña debe contener entre 6 y 32 caracteres"),o++),!(o>0)},alertar:function(o){console.log(o)}}},yt=gt,Nt=(t("fb88"),Object(d["a"])(yt,lt,mt,!1,null,"3a9752f1",null)),Pt=Nt.exports,jt=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"actividadesProfes"},[t("div",{attrs:{id:"vistaProfe"}},[t("div",{attrs:{id:"barraGrupos"}},o._l(o.gruposEstudiantiles,(function(e){return t("div",{key:e.id,staticClass:"selectorGrupoEstudiantil"},[o._v(" "+o._s(e.nombre)+" ")])})),0),t("div",{attrs:{id:"contenidosGrupos"}},o._l(o.gruposEstudiantiles,(function(o){return t("contenido-grupo-profe",{key:o.id,attrs:{esteGrupo:o}})})),1)])])},$t=[],Ct=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"contenidoGrupoProfe"},[t("div",{staticClass:"zonaPrimerNivel",attrs:{id:"zonaEstudiantes"}},[t("div",{staticClass:"nombreZona"},[o._v("Estudiantes")]),t("div",{staticClass:"controlesZona",attrs:{id:"controlesEstudiantes"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.idEstudianteAñadir,expression:"idEstudianteAñadir"}],ref:"idEstudianteAñadir",attrs:{type:"text",placeholder:"id de estudiante"},domProps:{value:o.idEstudianteAñadir},on:{input:function(e){e.target.composing||(o.idEstudianteAñadir=e.target.value)}}}),1==o.usuarioSuperadministrador?t("div",{staticClass:"controlesEstudiantes hoverGris botonesControles",on:{click:o.addEstudianteGrupo}},[o._v(" Añadir estudiante ")]):o._e(),1==o.usuarioSuperadministrador?t("div",{staticClass:"controlesEstudiantes hoverGris botonesControles",class:{desactivado:null==o.idEstudianteSeleccionado},on:{click:function(e){return o.removeEstudianteGrupo(o.idEstudianteSeleccionado)}}},[o._v(" Retirar estudiante ")]):o._e()]),t("div",{attrs:{id:"listaEstudiantes"},on:{click:function(e){if(e.target!==e.currentTarget)return null;o.idEstudianteSeleccionado=null}}},o._l(o.esteGrupo.estudiantes,(function(e){return t("icono-persona",{key:e.id,attrs:{estaPersona:e,seleccionado:o.idEstudianteSeleccionado==e.id},nativeOn:{click:function(t){o.idEstudianteSeleccionado=e.id}}})})),1)])])},Rt=[];function Ot(){var o=Object(N["a"])(["\n            mutation($idGrupo: ID!, $idEstudiante: ID!) {\n              removeEstudianteGrupoEstudiantil(\n                idGrupo: $idGrupo\n                idEstudiante: $idEstudiante\n              ) {\n                id\n                estudiantes {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return Ot=function(){return o},o}function _t(){var o=Object(N["a"])(["\n            mutation($idGrupoEstudiantil: ID!, $idEstudiante: ID!) {\n              addEstudianteGrupoEstudiantil(\n                idGrupoEstudiantil: $idGrupoEstudiantil\n                idEstudiante: $idEstudiante\n              ) {\n                id\n                estudiantes {\n                  ...fragResponsables\n                }\n              }\n            }\n            ","\n          "]);return _t=function(){return o},o}var Tt={name:"ContenidoGrupoProfe",components:{IconoPersona:$e},data:function(){return{"idEstudianteAñadir":null,idEstudianteSeleccionado:null}},props:{esteGrupo:Object},methods:{addEstudianteGrupo:function(){console.log("añadiendo usuario a un grupo estudiantil"),this.$apollo.mutate({mutation:j()(_t(),he),variables:{idGrupoEstudiantil:this.esteGrupo.id,idEstudiante:this.idEstudianteAñadir}}).then((function(){})).catch((function(o){console.log("error: "+o)}))},removeEstudianteGrupo:function(o){console.log("Retirando el estudiante con id ".concat(o," del grupo con id ").concat(this.esteGrupo.id)),this.$apollo.mutate({mutation:j()(Ot(),he),variables:{idGrupo:this.esteGrupo.id,idEstudiante:o}}).then((function(){})).catch((function(o){console.log("error: "+o)}))}}},Et=Tt,xt=(t("c6a2"),Object(d["a"])(Et,Ct,Rt,!1,null,"b803cdb4",null)),Dt=xt.exports;function St(){var o=Object(N["a"])(["\n        query {\n          gruposEstudiantiles {\n            id\n            nombre\n            estudiantes{\n              ...fragResponsables\n            }            \n          }\n        }\n        ","\n      "]);return St=function(){return o},o}var kt={name:"ActividadesProfe",components:{ContenidoGrupoProfe:Dt},apollo:{gruposEstudiantiles:{query:j()(St(),he),update:function(o){var e=o.gruposEstudiantiles;return console.log("Respuesta. ".concat(JSON.stringify(e))),e}}},data:function(){return{gruposEstudiantiles:[]}}},Vt=kt,wt=(t("d702"),Object(d["a"])(Vt,jt,$t,!1,null,"294b6e62",null)),It=wt.exports,zt=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"personas"},[t("div",{attrs:{id:"listaPersonas"}},o._l(o.personas,(function(o){return t("icono-persona",{key:o.id,attrs:{estaPersona:o}})})),1)])},At=[];function Mt(){var o=Object(N["a"])(["\n        query {\n          todosUsuarios {\n            ...fragResponsables\n          }\n        }\n        ","\n      "]);return Mt=function(){return o},o}var Ut={name:"Personas",components:{IconoPersona:$e},apollo:{personas:{query:j()(Mt(),he),update:function(o){var e=o.todosUsuarios;return e}}},data:function(){return{personas:[]}}},Lt=Ut,Gt=(t("9bc7"),Object(d["a"])(Lt,zt,At,!1,null,"f604c8ae",null)),qt=Gt.exports;n["a"].use(w["a"]);var Bt=[{path:"/atlas",name:"atlas",component:mo},{path:"/login",name:"loginArea",component:Co},{path:"/miperfil",name:"perfilPersonal",component:qo},{path:"/nodoConocimiento/:idNodo",component:Ho},{path:"/proyectos",name:"proyectos",component:le},{path:"/proyecto/:idProyecto",name:"verProyecto",component:ut},{path:"/registro",name:"registro",component:Pt},{path:"/actividadesVirtuales2021",component:It},{path:"/personas",name:"personas",component:qt}],Ft=new w["a"]({routes:Bt});n["a"].mixin({data:function(){return{serverUrl:"http://localhost:3000"}},computed:{authHeader:function(){var o=localStorage.getItem("sesionUsuario");return o?(o=JSON.parse(o),o.token?(console.log("introduciendo header: ".concat(o.token)),{Authorization:"Bearer "+o.token}):null):null},usuarioLogeado:function(){return!!this.$store.state.usuario.id},usuarioAdministrador:function(){return"administrador"==this.$store.state.usuario.permisos||"superadministrador"==this.$store.state.usuario.permisos},usuarioSuperadministrador:function(){return"superadministrador"==this.$store.state.usuario.permisos}}}),n["a"].config.productionTip=!1,new n["a"]({render:function(o){return o(l)},store:v,apolloProvider:V,router:Ft}).$mount("#app")},"594f":function(o,e,t){},"6a94":function(o,e,t){"use strict";t("b800")},"7ed2":function(o,e,t){},"84f8":function(o,e,t){},"85ec":function(o,e,t){},9375:function(o,e,t){"use strict";t("f834")},"95c3":function(o,e,t){},"95f2":function(o,e,t){},9792:function(o,e,t){},"9bc7":function(o,e,t){"use strict";t("95f2")},a05f:function(o,e,t){"use strict";t("2a41")},a905:function(o,e,t){},abeb:function(o,e,t){},af07:function(o,e,t){},b800:function(o,e,t){},c6a2:function(o,e,t){"use strict";t("34cf")},d533:function(o,e,t){"use strict";t("0f83")},d702:function(o,e,t){"use strict";t("13a8")},d974:function(o,e,t){"use strict";t("84f8")},dc67:function(o,e,t){"use strict";t("9792")},df17:function(o,e,t){"use strict";t("7ed2")},f834:function(o,e,t){},fb88:function(o,e,t){"use strict";t("a905")}});
//# sourceMappingURL=app.325048d7.js.map